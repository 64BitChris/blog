<!DOCTYPE html>
<html amp lang="en">
  <head>

    <meta charset="utf-8">
    <title>ActiveRecord Is Even Worse Than ORM</title>
    <link rel="canonical" href="http://www.yegor256.com/2016/07/26/active-record.html">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "mainEntityOfPage":{
          "@type": "WebPage",
          "@id": "http://www.yegor256.com/2016/07/26/active-record.html"
        },
        "headline": "ActiveRecord Is Even Worse Than ORM",
        "image": {
          "@type": "ImageObject",
          "url": "http://img.teamed.io/face-1400x1400.jpg",
          "height": 1400,
          "width": 1400
        },
        "datePublished": "2016-07-26",
        "dateModified": "2016-07-26",
        "author": {
          "@type": "Person",
          "name": "Yegor Bugayenko"
        },
        "publisher": {
          "@type": "Organization",
          "name": "yegor256.com",
          "logo": {
            "@type": "ImageObject",
            "url": "http://img.teamed.io/face-512x512.jpg",
            "width": 512,
            "height": 512
          }
        },
        "description": "ActiveRecord is a popular design pattern that seemed
to be better than ORM, though from an object thinking standpoint
it is even worse.
",
        "keywords": ["ActiveRecord", "ActiveRecord ORM", "ActiveRecord design pattern", "ActiveRecord java", "ActiveRecord anti-pattern"]
      }
    </script>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style>
<noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom="amp-custom">
      body { padding: .5em; }
      article { width: 600px; max-width: 100%; margin-left: auto; margin-right: auto; }
      .intro { color: red; font-size: .75em; }
    </style>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
  </head>
  <body>
    <article>
      <p class="intro">
        This is a mobile version of the article,
        its original content can be found
        <a href="http://www.yegor256.com/2016/07/26/active-record.html">here</a>.
      </p>
      <h1>ActiveRecord Is Even Worse Than ORM</h1>
      <p>You probably remember what <a href="/2014/12/01/orm-offensive-anti-pattern.html">I think</a>
about ORM, a very popular design pattern. In a nutshell,
it encourages us to turn objects into
<a href="/2016/07/06/data-transfer-object.html">DTOs</a>, which are
anemic, passive, and not objects at all. The consequences are usually dramatic—the entire programming paradigm shifts from object-oriented to procedural.
I've tried to explain this at a <a href="https://www.youtube.com/watch?v=aER4uwyFbqQ">JPoint</a> and
<a href="https://www.youtube.com/watch?v=63tS3HNmhiE">JEEConf</a> this year. After
each talk, a few people told me that what I'm suggesting is called
<a href="https://en.wikipedia.org/wiki/Active_record_pattern">ActiveRecord</a> or
<a href="https://msdn.microsoft.com/en-us/library/ff649690.aspx">Repository</a> patterns.</p>





<p>Moreover, they claimed that ActiveRecord actually solves the problem
I've found in ORM. They said I should explain in my talks that
what I'm offering (SQL-speaking objects) already exists and has a name:
ActiveRecord.</p>

<p>I disagree. Moreover, I think that ActiveRecord is even worse than ORM.</p>



<p>ORM consists of two parts: the session and
<a href="/2016/07/06/data-transfer-object.html">DTOs</a>, also known as "entities."
The entities have no functionality; they are just primitive containers for the
data transferred from and to the session. And that is what the problem is—objects don't encapsulate but rather expose data. To understand why this is wrong and why it's
against the object paradigm, you can read
<a href="/2014/09/16/getters-and-setters-are-evil.html">here</a>,
<a href="/2016/04/05/printers-instead-of-getters.html">here</a>,
<a href="/2014/12/01/orm-offensive-anti-pattern.html">here</a>,
<a href="/2014/11/20/seven-virtues-of-good-object.html">here</a>, and
<a href="/2016/07/06/data-transfer-object.html">here</a>.
Now, let's just agree that it's very wrong and move on.</p>

<p>What solution is ActiveRecord proposing? How is it solving the problem?
It moves the engine into the <strong>parent class</strong>, which all our entities inherit from.
This is how we were supposed to save our entity to the database in the ORM
scenario (pseudo-code):</p>



<p>And this is what we do with an ActiveRecord:</p>



<p>The method <code>update()</code> is defined in book's parent class and uses
book as a <strong>data container</strong>. When called, it fetches data
from the container (the book) and updates the database. How is it
different than ORM? There is absolutely no difference. The book
is still a container that knows nothing about SQL and any persistence
mechanisms.</p>

<p>What's even worse in ActiveRecord, compared to ORM, is that it <strong>hides</strong>
the fact that objects are data containers. A book, in the second snippet,
<strong>pretends</strong> to be a <a href="/2014/11/20/seven-virtues-of-good-object.html">proper object</a>,
while in reality it's just a dumb data bag.</p>

<p>I believe this is what misguided those who were saying
that my SQL-speaking objects concept is exactly the same as the ActiveRecord
design pattern (or Repository, which is almost exactly the same).</p>

<p>No, it's not.</p>

    </article>
  </body>
</html>
