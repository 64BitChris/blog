<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US"><head><meta charset="utf-8"/><meta name="description" content="JAXB is a 10-year-old anti-pattern that encourages Java developers to turn their objects into dumb, passive data structures."/><meta name="keywords" content="jaxb alternatives, jaxb anti-pattern, jaxb is bad, jaxb marshalling, jaxb marshalling example"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="twitter:account_id" content="4503599630178231"/><link rel="search" type="application/opensearchdescription+xml" href="opensearch.xml" title="yegor256"/><link rel="shortcut icon" href="/favicon.ico?6a45156"/><link rel="apple-touch-icon" href="/favicon.ico?6a45156"/><link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="http://www.yegor256.com/rss.xml"/><link rel="author" href="http://plus.google.com/u/0/114792568016408327418?rel=author"/><link rel="publisher" href="http://plus.google.com/u/0/114792568016408327418"/><link rel="stylesheet" href="/css/layout.css?6a45156"/><link rel="stylesheet" href="//img.teamed.io/yegor256/icons.css?6a45156"/><link rel="canonical" href="http://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html"/><title>JAXB Is Doing It Wrong; Try Xembly - Yegor Bugayenko</title></head><body><div class="wrapper"> <header class="header"><div> <a href="/about-me.html"> <img src="/images/yegor-bugayenko.png" class="photo" alt="photo of Yegor Bugayenko"/> </a></div> <nav role="navigation"><ul class="menu social notranslate"><li><a href="http://www.twitter.com/yegor256" title="follow me in Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li><li><a href="/rss" title="RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li><li><a href="https://github.com/yegor256" title="my Github profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li><li><a href="http://stackoverflow.com/users/187141/yegor256" title="my StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li><li><a href="https://www.facebook.com/yegor.bugayenko" title="follow me in Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li><li><a href="https://plus.google.com/+YegorBugayenko/posts" title="follow me in Google+"><i class="icon icon-googleplus notranslate" aria-hidden="true"></i></a></li><li><a href="https://www.linkedin.com/in/yegor256" title="my LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li><li><a href="http://www.youtube.com/user/technoparkcorp" title="my Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li><li><a href="mailto:yegor@teamed.io" title="yegor@teamed.io"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"><li> <a href="/best.html" title="best articles to read">12 best articles</a> · <a href="/contents.html" title="blog contents">all 124</a> · <a href="/webinars.html" title="webinars">webinars</a> · <a href="/" title="home page">home page</a></li></ul><ul class="menu"><li> Win <strong style="font-size:2em;color:#81b341"> <a href="/award.html" title="software quality award">$4,096</a> </strong> for Your Open Source Project!</li></ul> </nav><div id="search"> <input id="search-query" class="field field-text" name="q" placeholder="Search" autocomplete="off"/><div id="search-results" style="display:none"><div class="entries"></div></div></div><div style="color:#b3d576;text-align:left;margin:2em 0"> <img src="/images/2015/07/webinar-4.gif" style="width:64px;height:64px;float:left;margin-right:1em" alt="webinar logo"/> Don't miss the 4th webinar, on the 1st of July, at 11am PST; we'll discuss why <a href="https://plus.google.com/events/cabfenpghh36tj413n2p0b4r3kk">Getters and Setters is an anti-pattern</a> in object-oriented programming.</div> <script id="search-results-template" type="text/mustache">
          {{#entries}}
            <div>
              <a href="{{url}}">{{title}}</a>
            </div>
          {{/entries}}
        </script></header></div> <section itemscope itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <code>http://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html</code></p><h1 itemprop="name">JAXB Is Doing It Wrong; Try Xembly</h1><ul class="subline"><li> <time itemprop="datePublished" datetime="2015-03-26T00:00:00+00:00"> 26 March 2015 </time></li><li><a href='https://github.com/yegor256/blog/commits/master/_posts/2015/mar/2015-03-26-jaxb-vs-xembly.md'>modified</a> on <time itemprop='dateModified' datetime='2015-03-30T18:41:17+0000'>30 March 2015</time></li><li class="printable">Yegor Bugayenko</li><li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html#disqus_thread">comments</a></li></ul><p class="unprintable"><a href='/tag/oop.html' class='tag notranslate'>oop</a> <a href='/tag/java.html' class='tag notranslate'>java</a> <a href='/tag/xml.html' class='tag notranslate'>xml</a></p><div class="buttons notranslate desktop-only"> <nav class="share" role="navigation"> <a href="http://www.facebook.com/sharer/sharer.php?u=http://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html" title="Share on Facebook" class="button"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=http://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html&amp;text=JAXB+Is+Doing+It+Wrong%3B+Try+Xembly" title="Share on Twitter" class="button"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=http://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html" title="Share on Google+" class="button"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=http://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html" title="Share on LinkedIn" class="button"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://www.stumbleupon.com/submit?url=http://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html&amp;title=JAXB+Is+Doing+It+Wrong%3B+Try+Xembly" title="Share on StumbleUpon" class="button"> <span class="count count-stumbleupon">0</span> <i class="icon icon-stumbleupon notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=http://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html%3F2015-12&amp;title=JAXB+Is+Doing+It+Wrong%3B+Try+Xembly" title="Share on Reddit" class="button"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=http://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html%3F2015-12&amp;t=JAXB+Is+Doing+It+Wrong%3B+Try+Xembly" title="Share on Hacker News" class="button"> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav></div> </header> <main role="main"> <article class="main" role="article" itemprop="articleBody"> <figure class='badge'><a href='http://www.xembly.org'><img src='http://img.xembly.org/logo-256x256.png' style='width:64px' alt='badge'/></a></figure><p><a href="http://en.wikipedia.org/wiki/Java_Architecture_for_XML_Binding">JAXB</a> is a 10-year-old Java technology that allows us to convert a Java object into an XML document (marshalling) and back (unmarshalling). This technology is based on <a href="/2014/09/16/getters-and-setters-are-evil.html">setters and getters</a> and, in my opinion, violates key principles of object-oriented programming by turning objects into <strong>passive data structures</strong>. I would recommend you use <a href="http://www.xembly.org">Xembly</a> instead for marshalling Java objects into XML documents.</p><p>This is how JAXB marshalling works. Say you have a <code>Book</code> class that needs to be marshalled into an XML document. You have to create getters and annotate them:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">javax.xml.bind.annotation.XmlElement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.xml.bind.annotation.XmlRootElement</span><span class="o">;</span>
<span class="nd">@XmlRootElement</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Book</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">isbn</span> <span class="o">=</span> <span class="n">isbn</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@XmlElement</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getIsbn</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">isbn</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@XmlElement</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTitle</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">title</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></div><p>Then you create a marshaller and ask it to convert an instance of class <code>Book</code> into XML:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">final</span> <span class="n">Book</span> <span class="n">book</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Book</span><span class="o">(</span><span class="s">"0132350882"</span><span class="o">,</span> <span class="s">"Clean Code"</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">JAXBContext</span> <span class="n">context</span> <span class="o">=</span> <span class="n">JAXBContext</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="n">Book</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">Marshaller</span> <span class="n">marshaller</span> <span class="o">=</span> <span class="n">jaxbContext</span><span class="o">.</span><span class="na">createMarshaller</span><span class="o">();</span>
<span class="n">marshaller</span><span class="o">.</span><span class="na">marshal</span><span class="o">(</span><span class="n">book</span><span class="o">,</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">);</span></code></pre></div><p>You should be expecting something like this in the output:</p><div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;book&gt;</span>
  <span class="nt">&lt;isbn&gt;</span>0132350882<span class="nt">&lt;/isbn&gt;</span>
  <span class="nt">&lt;title&gt;</span>Clean Code<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/book&gt;</span></code></pre></div><p>So what's wrong with it? Pretty much the same thing that's wrong with object-relational mapping, which is explained in <a href="/2014/12/01/orm-offensive-anti-pattern.html">ORM Is an Offensive Anti-Pattern</a>. JAXB is treating an object as a bag of data, extracting the data and converting it into XML the way JAXB wants. The object has no control over this process. Therefore an object is not <a href="/2014/11/20/seven-virtues-of-good-object.html">an object</a> anymore but rather a passive bag of data.</p><p>An ideal approach would be to redesign our class <code>Book</code> this way:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Book</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">isbn</span> <span class="o">=</span> <span class="n">isbn</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toXML</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// create XML document and return</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></div><p>However, there are a few problems with this approach. First of all, there's massive code duplication. Building an XML document is a rather verbose process in Java. If every class had to re-implement it in its <code>toXML()</code> method, we would have a big problem with duplicate code.</p><p>The second problem is that we don't know exactly what type of wrapping our XML document should be delivered in. It may be a <code>String</code> or an <code>InputStream</code> or maybe an instance of <code>org.w3c.dom.Document</code>. Making many <code>toXML()</code> methods in each object would definitely be a disaster.</p><p><a href="http://www.xembly.org">Xembly</a> provides a solution. As I've <a href="/2014/04/09/xembly-intro.html">mentioned before</a>, it is an imperative language for XML constructions and manipulations. Here is how we can implement our <code>Book</code> object with the help of Xembly:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">org.xembly.Directive</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Book</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">isbn</span> <span class="o">=</span> <span class="n">isbn</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Directive</span><span class="o">&gt;</span> <span class="nf">toXembly</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">Directives</span><span class="o">()</span>
      <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"book"</span><span class="o">)</span>
      <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"isbn"</span><span class="o">).</span><span class="na">set</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">isbn</span><span class="o">).</span><span class="na">up</span><span class="o">()</span>
      <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"title"</span><span class="o">).</span><span class="na">set</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">title</span><span class="o">).</span><span class="na">up</span><span class="o">()</span>
      <span class="o">.</span><span class="na">up</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></div><p>Now, in order to build an XML document, we should use this code outside the object:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">final</span> <span class="n">Book</span> <span class="n">book</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Book</span><span class="o">(</span><span class="s">"0132350882"</span><span class="o">,</span> <span class="s">"Clean Code"</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">String</span> <span class="n">xml</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Xembler</span><span class="o">(</span><span class="n">book</span><span class="o">.</span><span class="na">toXembly</span><span class="o">()).</span><span class="na">xml</span><span class="o">();</span></code></pre></div><p>This <a href="http://www.xembly.org/apidocs-0.21/org/xembly/Xembler.html"><code>Xembler</code></a> class will convert Xembly directives into an XML document.</p><p>The beauty of this solution is that the internals of the object are not exposed via getters and the object is fully in charge of the XML marshalling process. In addition, the compexity of these directives may be very high — much higher than the rather cumbersome annotations of JAXB.</p><p>Xembly is an open-source project, so feel free to submit your questions or corrections to <a href="https://github.com/yegor256/xembly">Github</a>.</p></article> </main><div class="unprintable"><h2>Related Posts</h2><p>You may also find these posts interesting:</p><ul><li><a href="/2015/02/02/xsl-transformations-in-java.html">XSL Transformation in Java: An Easy Way</a></li><li><a href="/2014/04/24/java-xml-parsing-and-traversing.html">Java XML Parsing Made Easy</a></li><li><a href="/2014/09/09/restful-web-sites.html">RESTful API and a Web Site in the Same URL</a></li><li><a href="/2014/04/28/xml-xpath-hamcrest-matchers.html">XML/XPath Matchers for Hamcrest</a></li><li><a href="/2014/04/09/xembly-intro.html">Xembly, an Assembly for XML</a></li></ul></div></div><div class="disqus" role="complementary"><div id="disqus_thread"></div> <a href="http://disqus.com" class="dsq-brlink"> comments powered by <span class="logo-disqus">Disqus</span> </a></div><div class="wrapper"> <footer class="footer"><p> © <span itemprop="author">Yegor Bugayenko</span>, 2014-2015</p> </footer></div></section><script src="http://code.jquery.com/jquery-2.1.0.min.js"></script><script src="/js/ext/search.min.js?6a45156"></script><script src="/js/global.js?6a45156" async defer></script><script src="/js/post.js?6a45156" async defer></script></body></html>