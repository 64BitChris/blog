<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebPage"><head><base href="http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html"/><meta charset="utf-8"/><meta itemprop="name" content="Vertical and Horizontal Decorating"/><meta itemprop="author" content="Yegor Bugayenko"/><meta itemprop="breadcrumb" content="http://www.yegor256.com"/><meta itemprop="keywords" content="composable decorators, decorator java, decorator pattern, decorator pattern java, encapsulation"/><meta itemprop="description" content="Decorators are used to extend object functionality without changing their interfaces, and there are two approaches: horizontal and vertical. "/><meta name="description" content="Decorators are used to extend object functionality without changing their interfaces, and there are two approaches: horizontal and vertical. "/><meta name="keywords" content="composable decorators, decorator java, decorator pattern, decorator pattern java, encapsulation"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="twitter:creator" content="@yegor256"/><meta property="twitter:account_id" content="4503599630178231"/><meta property="og:url" content="http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html"/><meta property="og:site_name" content="yegor256"/><meta property="og:title" content="Vertical and Horizontal Decorating"/><meta property="og:description" content="Decorators are used to extend object functionality without changing their interfaces, and there are two approaches: horizontal and vertical. "/><meta property="og:type" content="article"/><meta property="og:locale" content="en_US"/><meta property="fb:admins" content="10203747823006002"/><meta name="twitter:site" content="@yegor256"/><meta name="twitter:creator" content="@yegor256"/><meta name="twitter:url" content="http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html"/><meta property="article:author" content="https://www.facebook.com/yegor.bugayenko"/><meta name="p:domain_verify" content="61f09f0ef5db665328827225a3fc11bd"/><link rel="search" type="application/opensearchdescription+xml" href="opensearch.xml" title="yegor256"/><link rel="shortcut icon" href="/favicon.ico?1a2f25b"/><link rel="apple-touch-icon" href="/favicon.ico?1a2f25b"/><link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="http://www.yegor256.com/rss.xml"/><link rel="author" href="http://plus.google.com/u/0/114792568016408327418?rel=author"/><link rel="publisher" href="http://plus.google.com/u/0/114792568016408327418"/><link rel="stylesheet" href="/css/layout.css?1a2f25b"/><link rel="canonical" href="http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html"/><title>Vertical and Horizontal Decorating - Yegor Bugayenko</title></head><body><div class="wrapper"> <header class="header"><div class="face"> <a href="/about-me.html"><span class="sub">subscribe</span></a> <a href="/about-me.html"> <img src="/images/yegor-bugayenko-192x192.png" class="photo" alt="photo of Yegor Bugayenko"/> </a> <a href="/about-me.html"><span class="hire">hire me</span></a></div> <nav><ul class="menu social notranslate"><li><a href="http://www.twitter.com/yegor256" title="follow me in Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li><li><a href="/rss" title="RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li><li><a href="https://github.com/yegor256" title="my GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li><li><a href="http://stackoverflow.com/users/187141/yegor256" title="my StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li><li><a href="https://www.facebook.com/yegor.bugayenko" title="follow me in Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li><li><a href="https://plus.google.com/+YegorBugayenko/posts" title="follow me in Google+"><i class="icon icon-googleplus notranslate" aria-hidden="true"></i></a></li><li><a href="https://www.linkedin.com/in/yegor256" title="my LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li><li><a href="http://www.youtube.com/user/technoparkcorp" title="my Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li><li><a href="https://www.pinterest.com/yegor256/" title="my Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li><li><a href="mailto:yegor@teamed.io" title="yegor@teamed.io"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"><li> <a href="/" title="home page">home</a> · <a href="/best.html" title="best articles to read">12 best</a> · <a href="/contents.html" title="blog contents">all 158</a> · <a href="/webinars.html" title="webinars">webinars</a> · <a href="/talks.html" title="talks">talks</a> · <a href="/award.html" title="software quality award">award</a></li></ul> </nav><div id="search"><form action="https://www.google.com/search" style="position:relative"> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input id="search-query" class="field field-text" onfocus="$('#google').css('display','inline-block')" name="q" placeholder="Search" autocomplete="off"/> <span class="desktop-only"> <input type="image" src="/images/google-search-icon.png" id="google" title="search via Google" style="width:3em;height:3em;display:none;position:absolute;margin-left:1em" alt="search via Google"/> </span></form><div id="search-results" style="display:none"><div class="entries"></div></div></div> <script id="search-results-template" type="text/mustache">
          {{#entries}}
            <div>
              <a href="{{url}}">{{title}}</a>
            </div>
          {{/entries}}
        </script></header><div class="hot"><ul><li> While traveling, I'm starting to give lectures about OOP, project management and DevOps. Want me to talk <strong><a href="/lectures.html">in your office</a></strong>?</li><li> My first book <strong><a href="/elegant-objects.html">Elegant Objects</a></strong>, about object-oriented programming, will be published by the end of January</li><li> <a href="https://plus.google.com/u/0/events/c2l3nfnkkmfg01e2gvoks028a1c">Webinar #10</a> will be about Object-Relational Mapping (<strong>ORM</strong>) and why it is actually an <strong>anti-pattern</strong>, join us on January 6, at 11am PST</li></ul></div></div> <section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html&amp;format=svg" style="width:125px;height:125px" alt="QR code"/></p><p class="printable"> <code>http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html</code></p><h1 itemprop="name">Vertical and Horizontal Decorating</h1><ul class="subline"><li> <time itemprop="datePublished" datetime="2015-10-01T00:00:00+00:00"> 1 October 2015 </time></li><li class="desktop-only">Moscow, Russia</li><li class='unprintable desktop-only'><a href='https://github.com/yegor256/blog/commits/master/_posts/2015/oct/2015-10-01-vertical-horizontal-decorating.md'>modified</a> on <time itemprop='dateModified' datetime='2015-10-19T01:29:16+0000'>19 October 2015</time></li><li class="printable">Yegor Bugayenko</li><li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html#disqus_thread">comments</a></li></ul><p class="unprintable"><a href='/tag/java.html' class='tag notranslate'>java</a> <a href='/tag/oop.html' class='tag notranslate'>oop</a></p><div class="buttons notranslate desktop-only"> <nav class="share" role="navigation"> <a href="http://www.facebook.com/sharer/sharer.php?u=http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html" title="Share on Facebook" class="button"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html&amp;text=Vertical+and+Horizontal+Decorating" title="Share on Twitter" class="button"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html" title="Share on Google+" class="button"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html" title="Share on LinkedIn" class="button"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://www.stumbleupon.com/submit?url=http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html&amp;title=Vertical+and+Horizontal+Decorating" title="Share on StumbleUpon" class="button"> <span class="count count-stumbleupon">0</span> <i class="icon icon-stumbleupon notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html%3F2015-39&amp;title=Vertical+and+Horizontal+Decorating" title="Share on Reddit" class="button"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html%3F2015-39&amp;t=Vertical+and+Horizontal+Decorating" title="Share on Hacker News" class="button"> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav></div> </header> <main> <article class="main" itemprop="articleBody"><p>A <a href="http://en.wikipedia.org/wiki/Decorator_pattern">decorator pattern</a> is one of the best ways to add features to an object without changing its interface. I use <a href="/2015/02/26/composable-decorators.html">composable decorators</a> quite often and always question myself as to how to design them right when the list of features must be configurable. I'm not sure I have the right answer, but here is some food for thought.</p><figure><img src='/images/2015/10/the-apartment.jpg' style='width:600px' alt='The Apartment (1960) by Billy Wilder'/><figcaption>The Apartment (1960) by Billy Wilder</figcaption></figure><p>Let's say I have a list of numbers:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">interface</span> <span class="nc">Numbers</span> <span class="o">{</span>
  <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">iterate</span><span class="o">();</span>
<span class="o">}</span></code></pre></div><p>Now I want to create a list that will only have odd, unique, positive, and sorted numbers. The first approach is <strong>vertical</strong> (I just made this name up):</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Numbers</span> <span class="n">numbers</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Sorted</span><span class="o">(</span>
  <span class="k">new</span> <span class="nf">Unique</span><span class="o">(</span>
    <span class="k">new</span> <span class="nf">Odds</span><span class="o">(</span>
      <span class="k">new</span> <span class="nf">Positive</span><span class="o">(</span>
        <span class="k">new</span> <span class="nf">ArrayNumbers</span><span class="o">(</span>
          <span class="k">new</span> <span class="n">Integer</span><span class="o">[]</span> <span class="o">{</span>
            <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">78</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="o">-</span><span class="mi">34</span><span class="o">,</span> <span class="mi">98</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span>
          <span class="o">}</span>
        <span class="o">)</span>
      <span class="o">)</span>
    <span class="o">)</span>
  <span class="o">)</span>
<span class="o">);</span></code></pre></div><p>The second approach is <strong>horizontal</strong> (again, a name I made up):</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Numbers</span> <span class="n">numbers</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Modified</span><span class="o">(</span>
  <span class="k">new</span> <span class="nf">ArrayNumbers</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">Integer</span><span class="o">[]</span> <span class="o">{</span>
      <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">78</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="o">-</span><span class="mi">34</span><span class="o">,</span> <span class="mi">98</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span>
    <span class="o">}</span>
  <span class="o">),</span>
  <span class="k">new</span> <span class="n">Diff</span><span class="o">[]</span> <span class="o">{</span>
    <span class="k">new</span> <span class="nf">Positive</span><span class="o">(),</span>
    <span class="k">new</span> <span class="nf">Odds</span><span class="o">(),</span>
    <span class="k">new</span> <span class="nf">Unique</span><span class="o">(),</span>
    <span class="k">new</span> <span class="nf">Sorted</span><span class="o">(),</span>
  <span class="o">}</span>
<span class="o">);</span></code></pre></div><p>See the difference? The first approach decorates <code>ArrayNumbers</code> "vertically," adding functionality through the composable decorators <code>Positive</code>, <code>Odds</code>, <code>Unique</code>, and <code>Sorted</code>.</p><p>The second approach introduces the new interface <code>Diff</code>, which implements the core functionality of iterating numbers through instances of <code>Positive</code>, <code>Odds</code>, <code>Unique</code>, and <code>Sorted</code>:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">interface</span> <span class="nc">Diff</span> <span class="o">{</span>
  <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">apply</span><span class="o">(</span><span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">origin</span><span class="o">);</span>
<span class="o">}</span></code></pre></div><p>For the user of <code>numbers</code>, both approaches are the same. The difference is only in the design. Which one is better and when? It seems that vertical decorating is easier to implement and is more suitable for smaller objects that expose just a few methods.</p><p>As for my experience, I always tend to start with vertical decorating since it's easier to implement but eventually migrate to a horizontal one when the number of decorators starts to grow.</p></article> </main><div class="unprintable"><h2>Related Posts</h2><p>You may also find these posts interesting:</p><ul><li><a href="/2015/12/08/temporal-coupling-between-method-calls.html">Temporal Coupling Between Method Calls</a></li><li><a href="/2015/09/01/redundant-variables-are-evil.html">Redundant Variables Are Pure Evil</a></li><li><a href="/2015/08/18/multiple-return-statements-in-oop.html">Why Many Return Statements Are a Bad Idea in OOP</a></li><li><a href="/2015/07/28/checked-vs-unchecked-exceptions.html">Checked vs. Unchecked Exceptions: The Debate Is Not Over</a></li><li><a href="/2015/07/06/public-static-literals.html">Public Static Literals ... Are Not a Solution for Data Duplication</a></li></ul></div><div class="teamed-banner"> <a href="http://www.teamed.io"><img src="/images/teamed-banner.jpg" alt="teamed banner"/></a></div></div><div class="disqus" role="complementary"><div id="disqus_thread"></div> <a href="http://disqus.com" class="dsq-brlink"> comments powered by <span class="logo-disqus">Disqus</span> </a></div><div class="wrapper"> <footer class="footer"><p> © <span itemprop="author">Yegor Bugayenko</span>, 2014-2015</p> </footer></div></section><script src="http://code.jquery.com/jquery-2.1.0.min.js"></script><script src="/js/global.js?1a2f25b"></script><script src="/js/post.js?1a2f25b"></script><script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-1963507-32","auto"),ga("send","pageview")</script></body></html>