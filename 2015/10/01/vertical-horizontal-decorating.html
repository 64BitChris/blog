<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" itemprop="description" content="Decorators are used to extend object functionality without changing their interfaces, and there are two approaches: horizontal and vertical. " /> <meta name="keywords" itemprop="keywords" content="composable decorators, decorator java, decorator pattern, decorator pattern java, encapsulation" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="og:site_name" itemprop="author" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Vertical and Horizontal Decorating"/> <meta name="twitter:description" property="og:description" content="Decorators are used to extend object functionality without changing their interfaces, and there are two approaches: horizontal and vertical. "/> <meta name="twitter:url" property="og:url" content="http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?22a4190"/> <link rel="apple-touch-icon" href="/favicon.ico?22a4190"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="http://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?22a4190"/> <link rel="stylesheet" href="/css/icons.css?22a4190"/> <link rel="canonical" href="http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html" itemprop="url" /> <link rel="amphtml" href="http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.amp.html" /> <title itemprop='name'>Vertical and Horizontal Decorating </title> <meta name='og:image' content='http://www.yegor256.com/images/2015/10/the-apartment.jpg'/><meta name='twitter:image' content='http://www.yegor256.com/images/2015/10/the-apartment.jpg'/><meta name='og:image:width' content='1107'/> <meta name='twitter:image:width' content='1107'/><meta name='og:image:height' content='727'/> <meta name='twitter:image:height' content='727'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='The Apartment (1960) by Billy Wilder'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show head menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html"> <img src="//cf.jare.io/?u=http://www.yegor256.com/images/yegor-bugayenko-192x192.png" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" re="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://gitter.im/yegor256/elegantobjects" rel="nofollow" title="Our OOP Gitter chat"><i class="icon icon-gitter notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li><a href="/contents.html" title="The contents of the entire blog">All&#160;225</a></li> <li><a href="/webinars.html" title="My webinars">Webinars</a></li> <li><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li><a href="/books.html" title="The books I wrote">Books</a></li> <li><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li><a href="/award.html" title="Software quality award">Award</a></li> <li><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> Частично <strong>русифицированная</strong> версия <strong>Elegant Objects</strong> <a href="/elegant-objects.html">вышла</a> ограниченным тиражом, при поддержке подкаста "Разбор Полетов". Всего 128 штук. Чтобы купить, <a href="mailto:shop@yegor256.com">напишите нам</a>. </li> <li> At <a href="/webinars.html">Webinar #24</a> we'll discuss inheritance and subtyping in OOP to find out which one is which and which one is evil, join us on <b>May 3</b>, at 11am PST. </li> <li> Meet me at <a href="http://rigadevdays.lv/speakers/46/">RigaDevDays</a> (Riga/May-15), <a href="https://geecon.org/">GeeCON</a> (Krakow/May-18), <a href="http://jeeconf.com/speaker/yegor-bugayenko-2/">JEEConf</a> (Kiev/May-26), <a href="http://www.jdk.io/">JDK.io</a> (Copenhagen/Jun-19), and later <a href="/talks.html">somewhere else</a>. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div itemprop="review" itemscope="" itemtype="http://schema.org/Review"> <meta itemprop="author" content="Yegor Bugayenko"> <meta itemprop="itemReviewed" content="http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html"><div itemprop="reviewRating" itemscope="" itemtype="http://schema.org/Rating"> <meta itemprop="ratingValue" content="9"/> <meta itemprop="bestRating" content="10"/></div></div><div itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div><div itemscope="" itemprop="publisher" itemtype="http://schema.org/Organization"> <meta itemprop="name" content="yegor256.com"/><div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div></div><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html</code></p><h1 itemprop="name headline mainEntityOfPage">Vertical and Horizontal Decorating</h1><aside class='book'><a href='http://goo.gl/W2WVMk'><img src='/images/books/elegant-objects/cover.png' class='book-cover'/></a>Read more about this subject in <a href='http://goo.gl/W2WVMk'>Section&nbsp;3.2.6</a><br/> of my book<a href='http://goo.gl/W2WVMk'><img src='/images/books/amazon-buy-button.png' class='amazon-button'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-10-01T00:00:00+00:00"> 1 October 2015 </time> </li> <li class="desktop-only" itemprop="locationCreated">Moscow, Russia</li> <li class='unprintable desktop-only'><a href='https://github.com/yegor256/blog/commits/master/_posts/2015/oct/2015-10-01-vertical-horizontal-decorating.md'>Modified</a> on <time itemprop='dateModified' datetime='2017-03-28T09:42:47+0300'>28 March 2017</time></li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><a href='/tag/java.html' class='tag notranslate'>java</a> <a href='/tag/oop.html' class='tag notranslate'><img src='/images/books/elegant-objects/cactus.svg' alt='OOP'/>oop</a></p><div class="buttons notranslate desktop-only"> <nav class="share"> <a href="http://www.facebook.com/sharer/sharer.php?u=http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html&amp;text=Vertical+and+Horizontal+Decorating" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://www.stumbleupon.com/submit?url=http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html&amp;title=Vertical+and+Horizontal+Decorating" title="Share on StumbleUpon" class="button" rel="nofollow"> <span class="count count-stumbleupon">0</span> <i class="icon icon-stumbleupon notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html%3F2015-39&amp;title=Vertical+and+Horizontal+Decorating" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html%3F2015-39&amp;t=Vertical+and+Horizontal+Decorating" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav></div></header> <main> <article class="main" itemprop="articleBody"><div ><p>A <a href="http://en.wikipedia.org/wiki/Decorator_pattern">decorator pattern</a> is one of the best ways to add features to an object without changing its interface. I use <a href="/2015/02/26/composable-decorators.html">composable decorators</a> quite often and always question myself as to how to design them right when the list of features must be configurable. I&#39;m not sure I have the right answer, but here is some food for thought.</p><figure class='jb_picture'><img itemprop='image' alt='The Apartment (1960) by Billy Wilder' src='/images/2015/10/the-apartment.jpg' longdesc='#3406debc'/><figcaption id='3406debc'>The Apartment (1960) by Billy Wilder</figcaption></figure><p>Let&#39;s say I have a list of numbers:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">interface</span> <span class="nc">Numbers</span> <span class="o">{</span>
  <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">iterate</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>Now I want to create a list that will only have odd, unique, positive, and sorted numbers. The first approach is <strong>vertical</strong> (I just made this name up):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Numbers</span> <span class="n">numbers</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Sorted</span><span class="o">(</span>
  <span class="k">new</span> <span class="nf">Unique</span><span class="o">(</span>
    <span class="k">new</span> <span class="nf">Odds</span><span class="o">(</span>
      <span class="k">new</span> <span class="nf">Positive</span><span class="o">(</span>
        <span class="k">new</span> <span class="nf">ArrayNumbers</span><span class="o">(</span>
          <span class="k">new</span> <span class="n">Integer</span><span class="o">[]</span> <span class="o">{</span>
            <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">78</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="o">-</span><span class="mi">34</span><span class="o">,</span> <span class="mi">98</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span>
          <span class="o">}</span>
        <span class="o">)</span>
      <span class="o">)</span>
    <span class="o">)</span>
  <span class="o">)</span>
<span class="o">);</span></code></pre></figure><p>The second approach is <strong>horizontal</strong> (again, a name I made up):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Numbers</span> <span class="n">numbers</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Modified</span><span class="o">(</span>
  <span class="k">new</span> <span class="nf">ArrayNumbers</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">Integer</span><span class="o">[]</span> <span class="o">{</span>
      <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">78</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="o">-</span><span class="mi">34</span><span class="o">,</span> <span class="mi">98</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span>
    <span class="o">}</span>
  <span class="o">),</span>
  <span class="k">new</span> <span class="n">Diff</span><span class="o">[]</span> <span class="o">{</span>
    <span class="k">new</span> <span class="nf">Positive</span><span class="o">(),</span>
    <span class="k">new</span> <span class="nf">Odds</span><span class="o">(),</span>
    <span class="k">new</span> <span class="nf">Unique</span><span class="o">(),</span>
    <span class="k">new</span> <span class="nf">Sorted</span><span class="o">(),</span>
  <span class="o">}</span>
<span class="o">);</span></code></pre></figure><p>See the difference? The first approach decorates <code>ArrayNumbers</code> &quot;vertically,&quot; adding functionality through the composable decorators <code>Positive</code>, <code>Odds</code>, <code>Unique</code>, and <code>Sorted</code>.</p><p>The second approach introduces the new interface <code>Diff</code>, which implements the core functionality of iterating numbers through instances of <code>Positive</code>, <code>Odds</code>, <code>Unique</code>, and <code>Sorted</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">interface</span> <span class="nc">Diff</span> <span class="o">{</span>
  <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">apply</span><span class="o">(</span><span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">origin</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>For the user of <code>numbers</code>, both approaches are the same. The difference is only in the design. Which one is better and when? It seems that vertical decorating is easier to implement and is more suitable for smaller objects that expose just a few methods.</p><p>As for my experience, I always tend to start with vertical decorating since it&#39;s easier to implement but eventually migrate to a horizontal one when the number of decorators starts to grow.</p></div></article> </main></div><div class="wrapper"> 
  <div class="unprintable">
    <hr/>
    <p>
      You may also find these <strong>related</strong> posts interesting:
      
        <a href="/2016/02/03/design-patterns-and-anti-patterns.html" data-score="0.5708634625691176">Design Patterns and Anti-Patterns, Love and Hate</a>;
      
        <a href="/2016/08/15/what-is-wrong-object-oriented-programming.html" data-score="0.5413074318681119">What's Wrong With Object-Oriented Programming?</a>;
      
        <a href="/2017/01/31/decorating-envelopes.html" data-score="0.5143307375072839">Decorating Envelopes</a>;
      
        <a href="/2015/11/10/ten-mistakes-in-specs.html" data-score="0.4994750222216176">10 Typical Mistakes in Specs</a>;
      
        <a href="/2015/10/17/award-2016.html" data-score="0.45030686366584577">Software Quality Award, 2016</a>;
      
    </p>
  </div>

</div><div class="disqus" role="complementary"><div id="disqus_thread" class="disqus-thread"></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0]; this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2017</span></p></footer></div></section> <script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?22a4190"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script language="javascript" type="text/javascript"> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script language="javascript1.1" type="text/javascript"> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script language="javascript1.2" type="text/javascript"> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script language="javascript" type="text/javascript"> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> </body> </html>
