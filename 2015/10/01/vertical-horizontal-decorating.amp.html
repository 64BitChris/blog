<!DOCTYPE html>
<html âš¡ lang="en">
  <head>
    <meta charset="utf-8">
    <title>Vertical and Horizontal Decorating</title>
    <link rel="canonical" href="http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <script type='application/ld+json'>
      {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "mainEntityOfPage":{
          "@type": "WebPage",
          "@id": "http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html"
        },
        "headline": "Vertical and Horizontal Decorating",
        "image": {
          "@type": "ImageObject",
          "url": "http://img.teamed.io/face-1400x1400.jpg",
          "height": 1400,
          "width": 1400
        },
        "datePublished": "2015-10-01",
        "dateModified": "2015-10-01",
        "author": {
          "@type": "Person",
          "name": "Yegor Bugayenko"
        },
        "publisher": {
          "@type": "Organization",
          "name": "yegor256.com",
          "logo": {
            "@type": "ImageObject",
            "url": "http://img.teamed.io/face-512x512.jpg",
            "width": 512,
            "height": 512
          }
        },
        "description": "Decorators are used to extend object functionality
without changing their interfaces, and there are two
approaches: horizontal and vertical.
",
        "keywords": ["composable decorators", "decorator pattern", "decorator pattern java", "decorator java", "encapsulation"]
      }
    </script>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom="amp-custom">
      body { padding: 2em; }
      article { width: 600px; max-width: 100%; margin-left: auto; margin-right: auto; }
    </style>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
  </head>
  <body>
    <article>
      <h1>Vertical and Horizontal Decorating</h1>
      <p>A <a href="http://en.wikipedia.org/wiki/Decorator_pattern">decorator pattern</a>
is one of the best ways to add features to an object
without changing its interface. I use
<a href="/2015/02/26/composable-decorators.html">composable decorators</a>
quite often and always question myself as to how to design them right
when the list of features must be configurable.
I&#39;m not sure I have the right answer, but here is
some food for thought.</p>

<!--more-->



<p>Let&#39;s say I have a list of numbers:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">interface</span> <span class="nc">Numbers</span> <span class="o">{</span>
  <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">iterate</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure>

<p>Now I want to create a list that will only have odd, unique, positive, and sorted numbers.
The first approach is <strong>vertical</strong> (I just made this name up):</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Numbers</span> <span class="n">numbers</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Sorted</span><span class="o">(</span>
  <span class="k">new</span> <span class="nf">Unique</span><span class="o">(</span>
    <span class="k">new</span> <span class="nf">Odds</span><span class="o">(</span>
      <span class="k">new</span> <span class="nf">Positive</span><span class="o">(</span>
        <span class="k">new</span> <span class="nf">ArrayNumbers</span><span class="o">(</span>
          <span class="k">new</span> <span class="n">Integer</span><span class="o">[]</span> <span class="o">{</span>
            <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">78</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="o">-</span><span class="mi">34</span><span class="o">,</span> <span class="mi">98</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span>
          <span class="o">}</span>
        <span class="o">)</span>
      <span class="o">)</span>
    <span class="o">)</span>
  <span class="o">)</span>
<span class="o">);</span></code></pre></figure>

<p>The second approach is <strong>horizontal</strong> (again, a name I made up):</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Numbers</span> <span class="n">numbers</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Modified</span><span class="o">(</span>
  <span class="k">new</span> <span class="nf">ArrayNumbers</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">Integer</span><span class="o">[]</span> <span class="o">{</span>
      <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">78</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="o">-</span><span class="mi">34</span><span class="o">,</span> <span class="mi">98</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span>
    <span class="o">}</span>
  <span class="o">),</span>
  <span class="k">new</span> <span class="n">Diff</span><span class="o">[]</span> <span class="o">{</span>
    <span class="k">new</span> <span class="nf">Positive</span><span class="o">(),</span>
    <span class="k">new</span> <span class="nf">Odds</span><span class="o">(),</span>
    <span class="k">new</span> <span class="nf">Unique</span><span class="o">(),</span>
    <span class="k">new</span> <span class="nf">Sorted</span><span class="o">(),</span>
  <span class="o">}</span>
<span class="o">);</span></code></pre></figure>

<p>See the difference? The first approach decorates <code>ArrayNumbers</code> &quot;vertically,&quot;
adding functionality through the composable decorators <code>Positive</code>, <code>Odds</code>,
<code>Unique</code>, and <code>Sorted</code>.</p>

<p>The second approach introduces the new interface <code>Diff</code>, which implements
the core functionality of iterating numbers through instances of
<code>Positive</code>, <code>Odds</code>, <code>Unique</code>, and <code>Sorted</code>:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">interface</span> <span class="nc">Diff</span> <span class="o">{</span>
  <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">apply</span><span class="o">(</span><span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">origin</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<p>For the user of <code>numbers</code>, both approaches are the same. The difference is
only in the design. Which one is better and when? It seems that
vertical decorating is easier to implement and is more suitable for
smaller objects that expose just a few methods.</p>

<p>As for my experience, I always tend to start with vertical decorating since it&#39;s
easier to implement but eventually migrate to a horizontal one when the
number of decorators starts to grow.</p>

    </article>
  </body>
</html>
