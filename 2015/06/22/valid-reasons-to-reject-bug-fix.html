<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope itemtype="http://schema.org/WebPage"><head><base href="http://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html"/><meta charset="utf-8"/><meta itemprop="name" content="A Few Valid Reasons to Reject a Bug Fix"/><meta itemprop="author" content="Yegor Bugayenko"/><meta itemprop="breadcrumb" content="http://www.yegor256.com"/><meta itemprop="keywords" content="bug code review, bug fix, pull request code review, pull request rules, review pull request"/><meta itemprop="description" content="A bug fix is supposed to improve the quality of the software, but very often the effect of it is actually negative; here is why and how to avoid that."/><meta name="description" content="A bug fix is supposed to improve the quality of the software, but very often the effect of it is actually negative; here is why and how to avoid that."/><meta name="keywords" content="bug code review, bug fix, pull request code review, pull request rules, review pull request"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="twitter:creator" content="@yegor256"/><meta property="twitter:account_id" content="4503599630178231"/><meta property="og:url" content="http://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html"/><meta property="og:site_name" content="yegor256"/><meta property="og:title" content="A Few Valid Reasons to Reject a Bug Fix"/><meta property="og:description" content="A bug fix is supposed to improve the quality of the software, but very often the effect of it is actually negative; here is why and how to avoid that."/><meta property="og:type" content="article"/><meta property="og:locale" content="en_US"/><meta property="article:author" content="https://www.facebook.com/yegor.bugayenko"/><link rel="search" type="application/opensearchdescription+xml" href="opensearch.xml" title="yegor256"/><link rel="shortcut icon" href="/favicon.ico?06eedd5"/><link rel="apple-touch-icon" href="/favicon.ico?06eedd5"/><link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="http://www.yegor256.com/rss.xml"/><link rel="author" href="http://plus.google.com/u/0/114792568016408327418?rel=author"/><link rel="publisher" href="http://plus.google.com/u/0/114792568016408327418"/><link rel="stylesheet" href="/css/layout.css?06eedd5"/><link rel="stylesheet" href="//img.teamed.io/yegor256/icons.css?06eedd5"/><link rel="canonical" href="http://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html"/><title>A Few Valid Reasons to Reject a Bug Fix - Yegor Bugayenko</title></head><body><div class="wrapper"> <header class="header"><div> <a href="/about-me.html"> <img src="/images/yegor-bugayenko.png" class="photo" alt="photo of Yegor Bugayenko"/> </a></div> <nav><ul class="menu social notranslate"><li><a href="http://www.twitter.com/yegor256" title="follow me in Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li><li><a href="/rss" title="RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li><li><a href="https://github.com/yegor256" title="my Github profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li><li><a href="http://stackoverflow.com/users/187141/yegor256" title="my StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li><li><a href="https://www.facebook.com/yegor.bugayenko" title="follow me in Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li><li><a href="https://plus.google.com/+YegorBugayenko/posts" title="follow me in Google+"><i class="icon icon-googleplus notranslate" aria-hidden="true"></i></a></li><li><a href="https://www.linkedin.com/in/yegor256" title="my LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li><li><a href="http://www.youtube.com/user/technoparkcorp" title="my Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li><li><a href="mailto:yegor@teamed.io" title="yegor@teamed.io"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"><li> <a href="/best.html" title="best articles to read">12 best articles</a> · <a href="/contents.html" title="blog contents">all 133</a> · <a href="/webinars.html" title="webinars">webinars</a> · <a href="/" title="home page">home page</a></li></ul><ul class="menu"><li> Win <strong style="font-size:2em;color:#81b341"> <a href="/award.html" title="software quality award">$4,096</a> </strong> for Your Open Source Project!</li></ul> </nav><div id="search"> <input id="search-query" class="field field-text" name="q" placeholder="Search" autocomplete="off"/><div id="search-results" style="display:none"><div class="entries"></div></div></div><div style="color:#48624b;text-align:left;margin:2em 0"> <img src="/images/2015/08/webinar-5.gif" style="width:64px;height:64px;float:left;margin-right:1em" alt="webinar logo"/> Hey, don't miss the next webinar, on the 5th of August, at 11am PST; we'll talk about <a href="https://plus.google.com/events/cftrih1qol7h1q8sdprcbuv0c9g">Objects That End With -ER</a> and why they are actually an anti-pattern.</div> <script id="search-results-template" type="text/mustache">
          {{#entries}}
            <div>
              <a href="{{url}}">{{title}}</a>
            </div>
          {{/entries}}
        </script></header></div> <section itemscope itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <code>http://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html</code></p><h1 itemprop="name">A Few Valid Reasons to Reject a Bug Fix</h1><ul class="subline"><li> <time itemprop="datePublished" datetime="2015-06-22T00:00:00+00:00"> 22 June 2015 </time></li><li><a href='https://github.com/yegor256/blog/commits/master/_posts/2015/jun/2015-06-22-valid-reasons-to-reject-bug-fix.md'>modified</a> on <time itemprop='dateModified' datetime='2015-07-02T17:14:39+0000'>2 July 2015</time></li><li class="printable">Yegor Bugayenko</li><li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html#disqus_thread">comments</a></li></ul><p class="unprintable"><a href='/tag/agile.html' class='tag notranslate'>agile</a> <a href='/tag/mgmt.html' class='tag notranslate'>mgmt</a></p><div class="buttons notranslate desktop-only"> <nav class="share" role="navigation"> <a href="http://www.facebook.com/sharer/sharer.php?u=http://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html" title="Share on Facebook" class="button"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=http://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html&amp;text=A+Few+Valid+Reasons+to+Reject+a+Bug+Fix" title="Share on Twitter" class="button"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=http://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html" title="Share on Google+" class="button"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=http://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html" title="Share on LinkedIn" class="button"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://www.stumbleupon.com/submit?url=http://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html&amp;title=A+Few+Valid+Reasons+to+Reject+a+Bug+Fix" title="Share on StumbleUpon" class="button"> <span class="count count-stumbleupon">0</span> <i class="icon icon-stumbleupon notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=http://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html%3F2015-25&amp;title=A+Few+Valid+Reasons+to+Reject+a+Bug+Fix" title="Share on Reddit" class="button"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=http://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html%3F2015-25&amp;t=A+Few+Valid+Reasons+to+Reject+a+Bug+Fix" title="Share on Hacker News" class="button"> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav></div> </header> <main> <article class="main" itemprop="articleBody"><p>A bug exists when something doesn't work as expected. A <em>bug fix</em> is basically a patch (a pull request) to the existing code base that is supposed to solve the problem and make sure that "something" works as expected. Very often, such a patch fixes one thing and breaks many others. I believe that sometimes it's necessary to <strong>reject</strong> a bug fix and ask its author to re-do the patch in order to protect the project from bigger problems. There are a few valid reasons for such a rejection, according to my experience.</p><figure><img src='http://www.yegor256.com/images/2015/06/crimen-ferpecto.jpg' style='width:600px' alt='El Crimen Perfecto (2004) by Álex de la Iglesia'/><figcaption>El Crimen Perfecto (2004) by Álex de la Iglesia</figcaption></figure><h2 id="it-degrades-code-coverage">It Degrades Code Coverage</h2><p>This is a very common situation: After the changes are made in one place, unit tests fail in some other place. The bug is fixed, but some possibly unrelated unit tests start to report failure. Under pressure or simply because we're lazy, we don't fix them; we simply remove the tests or mark them as temporarily "skipped." The problem is solved, the build is clean, so let's merge the patch and call it a day, right? Wrong!</p><p>Even though I'm in favor of <a href="/2015/01/15/how-to-cut-corners.html">cutting corners</a> as much as possible, this is the corner I don't recommend you cut.</p><p>The unit tests are there precisely to prevent us from breaking the product when under pressure.</p><p>Obviously, there are situations when the unit tests are wrong and we have to delete them. In those cases, don't forget to create new ones.</p><figure class='badge'><a href='http://www.amazon.com/gp/product/0131177052/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0131177052&amp;linkCode=as2&amp;tag=yegor256com-20&amp;linkId=D2WNVUW64RHDRGSC'><img src='http://www.yegor256.com/images/2015/04/book-legacy.jpg' style='width:96px' alt='badge'/></a></figure><p>There are also situations when the bug must be fixed in a few minutes to put the system back online and fixing all unit tests will take an hour. Such a situation is a strong indicator that you've got a terrible underlying situation with test coverage in the product. There's no doubt that we have to make a fix and ask our tests to shut up for some time. But in this case, make sure the next task your team is working on after the bug fix is released is correcting those disabled unit tests. I would recommend reading <a href="http://www.amazon.com/gp/product/0131177052/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0131177052&amp;linkCode=as2&amp;tag=yegor256com-20&amp;linkId=D2WNVUW64RHDRGSC">Working Effectively With Legacy Code</a> by Michael Feathers, which tackles this very subject.</p><h2 id="it-doesn't-reproduce-the-issue">It Doesn't Reproduce the Issue</h2><p>Sometimes the entire system may be down simply because of a small typo in one line of code. An obvious bug fix is to remove the typo, but that's not what a good project is expecting from us if we care about its quality. The problem is not the typo but rather the absence of unit tests that would catch the typo at the deployment phase.</p><p>The real problem is the lack of test code coverage in this particular section of the code. By removing the typo, we're not helping the project in any way. Moreover, we're doing it a disservice — we're <em>concealing</em> the real problem.</p><p>Thus, no matter how small or cosmetic the issue is, its bug fix must contain an extra test that first reproduces the bug. Without such a test, a bug fix is a waste of the project's money.</p><p>Furthermore, without a unit test reproducing the issue, there is no guarantee that our bug fix doesn't introduce more bugs. I would even say that the more bug fixes we have, the higher the <a href="http://en.wikipedia.org/wiki/Entropy_%28information_theory%29">entropy</a>. And the only way to decrease this uncertainty is by covering the code with unit tests. Without a test, a bug fix brings more disorder to the code base.</p><h2 id="it-is-too-big">It Is Too Big</h2><p>Bug fixes are <em>not features</em>; they must be small and focused. It's a very typical mistake for programmers to get carried away while fixing a bug and introduce some refactoring together with a fix. The result is that the patch gets rather big and difficult to understand. I'm not against refactoring; it's a very important and positive thing for a project, but do it separately <em>after</em> the bug is fixed and merged.</p><p>No refactoring while fixing a bug!</p><p>Create a new unit test, reproduce the bug, and commit it. Fix the bug in the existing code base, no matter how ugly it is. Create new bugs, asking the team to improve the situation with the ugly code base. If interested, assign those bugs to yourself. Or maybe somebody else will be interested in fixing them and refactoring the code. But all that will happen later in other pull requests with new code reviews and new merges.</p><p>It's not about being lazy and unwilling to fix what looks bad. It's about a discipline, which is <a href="/2015/01/15/how-to-cut-corners.html">much more important</a> than good intentions.</p><h2 id="it-solves-more-than-one-issue">It Solves More Than One Issue</h2><p>Always fix one issue at a time — simple as that. No exceptions. When a bug fix patch contains code changes that fix multiple issues, it is very difficult to understand which issue is tested, which one is reproduced, and how they relate to each other. Combining several bug fixes into a single pull request is a very bad practice.</p><p>No matter how simple the fix is, keep it separate from others. Review, test, and merge it individually. This will also increase the traceability of changes. It will always be easy to understand who made that fix, who reviewed the code, and when it was merged (and deployed).</p></article> </main><div class="unprintable"><h2>Related Posts</h2><p>You may also find these posts interesting:</p><ul><li><a href="/2015/06/18/good-programmers-bug-free.html">Good Programmers Write Bug-Free Code, Don't They?</a></li><li><a href="/2015/06/08/deadly-sins-software-project.html">Seven Deadly Sins of a Software Project</a></li><li><a href="/2015/06/02/how-to-estimate-sofware-cost.html">How Much For This Software?</a></li><li><a href="/2015/05/13/two-instruments-of-software-architect.html">Two Instruments of a Software Architect</a></li><li><a href="/2015/05/11/software-architect-responsibilities.html">Three Things I Expect From a Software Architect</a></li></ul></div></div><div class="disqus" role="complementary"><div id="disqus_thread"></div> <a href="http://disqus.com" class="dsq-brlink"> comments powered by <span class="logo-disqus">Disqus</span> </a></div><div class="wrapper"> <footer class="footer"><p> © <span itemprop="author">Yegor Bugayenko</span>, 2014-2015</p> </footer></div></section><script src="http://code.jquery.com/jquery-2.1.0.min.js"></script><script src="/js/ext/search.min.js?06eedd5"></script><script src="/js/global.js?06eedd5" async defer></script><script src="/js/post.js?06eedd5" async defer></script></body></html>