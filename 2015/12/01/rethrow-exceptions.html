<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebPage"> <head> <script> (function(_,e,rr,s){_errs=[s];var c=_.onerror;_.onerror=function(){var a=arguments;_errs.push(a); c&&c.apply(this,a)};var b=function(){var c=e.createElement(rr),b=e.getElementsByTagName(rr)[0]; c.src="//beacon.errorception.com/"+s+".js";c.async=!0;b.parentNode.insertBefore(c,b)}; _.addEventListener?_.addEventListener("load",b,!1):_.attachEvent("onload",b)}) (window,document,"script","57c3846b0929bf2b09000494"); </script> <meta charset="utf-8"/> <meta itemprop="name" content="Throwing an Exception Without Proper Context Is a Bad Habit" /> <meta itemprop="author" content="Yegor Bugayenko" /> <meta itemprop="breadcrumb" content="http://www.yegor256.com" /> <meta itemprop="keywords" content="rethrow exception, rethrow exception c++, rethrow exception java, rethrow exception scala, rethrow exception with new message" /> <meta itemprop="description" content="One of the most helpful things you can do is add a contextual message to an exception on each re-throw &amp;dash; and actually, in all other situations. " /> <meta name="description" content="One of the most helpful things you can do is add a contextual message to an exception on each re-throw &amp;dash; and actually, in all other situations. " /> <meta name="keywords" content="rethrow exception, rethrow exception c++, rethrow exception java, rethrow exception scala, rethrow exception with new message" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="twitter:creator" content="@yegor256"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta property="twitter:account_id" content="4503599630178231" /> <meta property="og:url" content="http://www.yegor256.com/2015/12/01/rethrow-exceptions.html"/> <meta property="og:site_name" content="yegor256"/> <meta property="og:title" content="Throwing an Exception Without Proper Context Is a Bad Habit"/> <meta property="og:description" content="One of the most helpful things you can do is add a contextual message to an exception on each re-throw &amp;dash; and actually, in all other situations. "/> <meta property="og:type" content="article" /> <meta property="og:locale" content="en_US" /> <meta property="fb:admins" content="10203747823006002"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:url" content="http://www.yegor256.com/2015/12/01/rethrow-exceptions.html"/> <meta property="article:author" content="https://www.facebook.com/yegor256"/> <meta name="p:domain_verify" content="61f09f0ef5db665328827225a3fc11bd"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?ab902c2"/> <link rel="apple-touch-icon" href="/favicon.ico?ab902c2"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="http://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?ab902c2"/> <link rel="stylesheet" href="/css/icons.css?ab902c2"/> <link rel="canonical" href="http://www.yegor256.com/2015/12/01/rethrow-exceptions.html" /> <link rel="amphtml" href="http://www.yegor256.com/2015/12/01/rethrow-exceptions.amp.html" /> <title>Throwing an Exception Without Proper Context Is a Bad Habit - Yegor Bugayenko </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="show head menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub"><span>subscribe</span></a> <a href="/about-me.html"> <img src="/images/yegor-bugayenko-192x192.png" class="photo" alt="photo of Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="follow me in Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss" title="RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a href="https://github.com/yegor256" rel="nofollow" title="my GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="my StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a href="https://www.facebook.com/yegor256" rel="nofollow" title="follow me in Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a href="https://instagram.com/yegor256" rel="nofollow" title="follow me in Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="my LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a href="https://www.youtube.com/channel/UCr9qCdqXLm2SU0BIs6d_68Q" rel="nofollow" title="my Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a href="https://www.pinterest.com/yegor256/" rel="nofollow" title="my Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a href="https://angel.co/yegor256" rel="nofollow" title="my AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://gitter.im/yegor256/elegantobjects" rel="nofollow" title="Gitter chat"><i class="icon icon-gitter notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="Podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="blog@yegor256.com"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="home page">home</a></li> <li><a href="/best.html" title="best articles to read">12&#160;best</a></li> <li><a href="/contents.html" title="blog contents">all&#160;202</a></li> <li><a href="/webinars.html" title="webinars">webinars</a></li> <li><a href="/talks.html" title="talks">talks</a></li> <li><a href="/books.html" title="books">books</a></li> <li><a href="/papers.html" title="papers">papers</a></li> <li><a href="/pets.html" title="pets">pets</a></li> <li><a href="/award.html" title="software quality award">award</a></li> <li><a href="/testimonials.html" title="what people say about me">testimonials</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search"> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input type="text" id="search-query" class="field field-text" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search" autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="search via Google" alt="search via Google"/> </form></div><div class="hot"><ul> <li> At <a href="/webinars.html">Webinar #19</a> we'll discuss the role of a <strong>project manager</strong> in a software project, join us on <b>October 5</b>, at 11am PST. </li> <li> Meet me at <a href="http://javaday.org.ua/kyiv/">JavaDay</a> (Kyiv/Oct-14), <a href="http://2016.geecon.cz/">GeeCON</a> (Prague/Oct-20), <a href="http://2016.secr.ru/">SECR</a> (Moscow/Oct-28), <a href="http://www.oredev.org/2016/speakers/yegor-bugayenko">Oredev</a> (Malm√∂/Nov-7), <a href="http://xpdays.com.ua/">XP Days</a> (Kiev/Nov-11), <a href="http://topconf.com/tallinn-2016/speaker/yegor-bugayenko/">TopConf</a> (Tallinn/Nov-16), <a href="http://devternity.com/#/11">DevTernity</a> (Riga/Dec-1), <a href="https://appdevtrends.com/ECG/live360events/Events/Orlando-2016/Information/AppDevTrends.aspx">AppDevTrends</a> (Orlando/Dec-7), and later <a href="/talks.html">somewhere else</a>. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div><div itemscope="" itemprop="publisher" itemtype="http://schema.org/Organization"> <meta itemprop="name" content="yegor256.com"/><div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div></div><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=http://www.yegor256.com/2015/12/01/rethrow-exceptions.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">http://www.yegor256.com/2015/12/01/rethrow-exceptions.html</code></p><h1 itemprop="name headline mainEntityOfPage">Throwing an Exception Without Proper Context Is a Bad Habit</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-12-01T00:00:00+00:00"> 1 December 2015 </time> </li> <li class="desktop-only" itemprop="locationCreated">San Jose, CA</li> <li class='unprintable desktop-only'><a href='https://github.com/yegor256/blog/commits/master/_posts/2015/dec/2015-12-01-rethrow-exceptions.md'>modified</a> on <time itemprop='dateModified' datetime='2016-05-08T18:09:56+0300'>8 May 2016</time></li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/12/01/rethrow-exceptions.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><a href='/tag/java.html' class='tag notranslate'>java</a></p><div class="buttons notranslate desktop-only"> <nav class="share" role="navigation"> <a href="http://www.facebook.com/sharer/sharer.php?u=http://www.yegor256.com/2015/12/01/rethrow-exceptions.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=http://www.yegor256.com/2015/12/01/rethrow-exceptions.html&amp;text=Throwing+an+Exception+Without+Proper+Context+Is+a+Bad+Habit" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=http://www.yegor256.com/2015/12/01/rethrow-exceptions.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=http://www.yegor256.com/2015/12/01/rethrow-exceptions.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://www.stumbleupon.com/submit?url=http://www.yegor256.com/2015/12/01/rethrow-exceptions.html&amp;title=Throwing+an+Exception+Without+Proper+Context+Is+a+Bad+Habit" title="Share on StumbleUpon" class="button" rel="nofollow"> <span class="count count-stumbleupon">0</span> <i class="icon icon-stumbleupon notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=http://www.yegor256.com/2015/12/01/rethrow-exceptions.html%3F2015-48&amp;title=Throwing+an+Exception+Without+Proper+Context+Is+a+Bad+Habit" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=http://www.yegor256.com/2015/12/01/rethrow-exceptions.html%3F2015-48&amp;t=Throwing+an+Exception+Without+Proper+Context+Is+a+Bad+Habit" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav></div></header> <main> <article class="main" itemprop="articleBody"><p>I keep repeating the same mistake again and again. So it&#39;s time to stop and make a rule to prevent this from happening anymore. The mistake is not fatal, but it&#39;s very annoying. When I look at production logs, I often see something like <code>&quot;File doesn&#39;t exist&quot;</code>, and I ask myself: What file? Where is it supposed to exist? What did the server try to do with it? What was going on a second before it crashed? There is no answer in the log, and it&#39;s totally my fault. I either 1) don&#39;t re-throw or 2) re-throw without providing context. Both are wrong.</p><figure><img src='http://cf.jare.io/?u=http%3A%2F%2Fwww.yegor256.com%2Fimages%2F2015%2F12%2Ffour-rooms.jpg' style='width:600px;max-width:100%;' alt='Four Rooms (1995) by Allison Anders et al.'/><figcaption>Four Rooms (1995) by Allison Anders et al.</figcaption></figure><p>This is how the code may look:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span>
    <span class="s">&quot;File doesn&#39;t exist&quot;</span>
  <span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>It may also look like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">try</span> <span class="o">{</span>
  <span class="n">Files</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>Both examples demonstrate an inadequate style of handling situations that involve exceptions and reporting them. What&#39;s wrong here? The exception messages are not thorough enough. They simply don&#39;t contain any information from the place where they originated from.</p><p>This is how they should look instead:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span>
    <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
      <span class="s">&quot;User profile file %s doesn&#39;t exist&quot;</span><span class="o">,</span>
      <span class="n">file</span><span class="o">.</span><span class="na">getAbsolutePath</span><span class="o">()</span>
    <span class="o">)</span>
  <span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>And the second example should look like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">try</span> <span class="o">{</span>
  <span class="n">Files</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span>
    <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
      <span class="s">&quot;Can&#39;t delete user profile data file %s&quot;</span><span class="o">,</span>
      <span class="n">file</span><span class="o">.</span><span class="na">getAbsolutePath</span><span class="o">()</span>
    <span class="o">),</span>
    <span class="n">ex</span>
  <span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>See the difference? This may look like redundant code, but it&#39;s not. Of course, when I&#39;m writing all this, I don&#39;t really care about logs and exceptions. I&#39;m not really expecting this file to be absent.</p><p>But I should.</p><p>There should be a rule: Every time we throw or re-throw, an exception message must describe the problem with as much detail as possible.</p><p>Of course, we can&#39;t forget about security and risk putting any sensitive information into the exception message, like passwords, credit card numbers, etc. Besides that, as much as possible must be exposed to the exception catcher at a higher level.</p><p>Throwing an exception is literally an escalation of a problem to a higher level of management. Imagine that my boss is asking me to install a new server. I come back to him in a few hours and say, &quot;I failed; sorry.&quot; That would sound strange. He would ask for more details. Why did I fail? What exactly went wrong? Is it possible to do it differently? Etc.</p><p>Such code is literally a sign of disrespect to the client:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span>
  <span class="s">&quot;File doesn&#39;t exist&quot;</span>
<span class="o">);</span></code></pre></figure><p>I have to be more verbose and give more details.</p><p>And I&#39;m not alone in this mistake. I see it everywhere, and it really makes <a href="/2016/02/09/are-you-still-debugging.html">debugging</a> difficult, especially in production, where it&#39;s almost impossible to reproduce the problem right away.</p><p>Thus, please be more verbose in your exception messages. I will do the same in my code :)</p><p>And one more thing before you go. In most OOP languages, exceptions are unchecked, which means that catching them is not a mandatory operation, <a href="/2015/07/28/checked-vs-unchecked-exceptions.html">unfortunately</a>. Nevertheless, I recommend you catch, add context, and re-throw them all, <strong>always</strong>. This may seem like pure noise, but it&#39;s not! Just make your methods smaller and ensure all exceptions sent out of them have enough information about their origins. You will do yourself and everybody else a big favor.</p></article> </main> 
  <div class="unprintable">
    <h2>Related Posts</h2>
    <p>You may also find these posts interesting:</p>
    <ul>
      
        <li>
          <a href="/2016/02/03/design-patterns-and-anti-patterns.html" data-score="1.8414974004266282">Design Patterns and Anti-Patterns, Love and Hate</a>
        </li>
      
        <li>
          <a href="/2016/08/15/what-is-wrong-object-oriented-programming.html" data-score="1.5969294806287968">What's Wrong With Object-Oriented Programming?</a>
        </li>
      
        <li>
          <a href="/2015/07/09/catch-if-cant-otherwise.html" data-score="1.2196114764499557">Catch Me If You ... Can't Do Otherwise</a>
        </li>
      
        <li>
          <a href="/2016/03/30/jare-instant-free-cdn.html" data-score="1.097097366345475">Jare.io, an Instant and Free CDN</a>
        </li>
      
        <li>
          <a href="/2016/03/08/pimp-up-your-resume.html" data-score="1.0927060616229987">Pimp Up Your Resume</a>
        </li>
      
    </ul>
  </div>

</div><div class="disqus" role="complementary"><div id="disqus_thread" class="disqus-thread"></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0]; this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span>, 2014-<span itemprop="copyrightYear">2016</span></p></footer></div></section> <script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script> <script src="/js/all.js?ab902c2"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> </body> </html>
