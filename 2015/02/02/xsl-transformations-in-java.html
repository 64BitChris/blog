<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope itemtype="http://schema.org/WebPage"><head><base href="http://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html"/><meta charset="utf-8"/><meta itemprop="name" content="XSL Transformation in Java: An Easy Way"/><meta itemprop="author" content="Yegor Bugayenko"/><meta itemprop="breadcrumb" content="http://www.yegor256.com"/><meta itemprop="keywords" content="java xslt code example, java xslt example, transform xml java, xml transformation java, xslt java"/><meta itemprop="description" content="XSL transformations can be accomplished in Java through a single method call with the help of jcabi-xml."/><meta name="description" content="XSL transformations can be accomplished in Java through a single method call with the help of jcabi-xml."/><meta name="keywords" content="java xslt code example, java xslt example, transform xml java, xml transformation java, xslt java"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="twitter:creator" content="@yegor256"/><meta property="twitter:account_id" content="4503599630178231"/><meta property="og:url" content="http://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html"/><meta property="og:site_name" content="yegor256"/><meta property="og:title" content="XSL Transformation in Java: An Easy Way"/><meta property="og:description" content="XSL transformations can be accomplished in Java through a single method call with the help of jcabi-xml."/><meta property="og:type" content="article"/><meta property="og:locale" content="en_US"/><meta property="fb:admins" content="10203747823006002"/><meta name="twitter:site" content="@yegor256"/><meta name="twitter:creator" content="@yegor256"/><meta name="twitter:url" content="http://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html"/><meta property="article:author" content="https://www.facebook.com/yegor.bugayenko"/><link rel="search" type="application/opensearchdescription+xml" href="opensearch.xml" title="yegor256"/><link rel="shortcut icon" href="/favicon.ico?89d3001"/><link rel="apple-touch-icon" href="/favicon.ico?89d3001"/><link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="http://www.yegor256.com/rss.xml"/><link rel="author" href="http://plus.google.com/u/0/114792568016408327418?rel=author"/><link rel="publisher" href="http://plus.google.com/u/0/114792568016408327418"/><link rel="stylesheet" href="/css/layout.css?89d3001"/><link rel="canonical" href="http://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html"/><title>XSL Transformation in Java: An Easy Way - Yegor Bugayenko</title></head><body><div class="wrapper"> <header class="header"><div> <a href="/about-me.html"> <img src="/images/yegor-bugayenko.png" class="photo" alt="photo of Yegor Bugayenko"/> </a></div> <nav><ul class="menu social notranslate"><li><a href="http://www.twitter.com/yegor256" title="follow me in Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li><li><a href="/rss" title="RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li><li><a href="https://github.com/yegor256" title="my Github profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li><li><a href="http://stackoverflow.com/users/187141/yegor256" title="my StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li><li><a href="https://www.facebook.com/yegor.bugayenko" title="follow me in Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li><li><a href="https://plus.google.com/+YegorBugayenko/posts" title="follow me in Google+"><i class="icon icon-googleplus notranslate" aria-hidden="true"></i></a></li><li><a href="https://www.linkedin.com/in/yegor256" title="my LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li><li><a href="http://www.youtube.com/user/technoparkcorp" title="my Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li><li><a href="mailto:yegor@teamed.io" title="yegor@teamed.io"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"><li> <a href="/best.html" title="best articles to read">12 best articles</a> · <a href="/contents.html" title="blog contents">all 137</a> · <a href="/webinars.html" title="webinars">webinars</a> · <a href="/" title="home page">home page</a></li></ul><ul class="menu"><li> Win <strong style="font-size:2em;color:#81b341"> <a href="/award.html" title="software quality award">$4,096</a> </strong> for Your Open Source Project!</li></ul> </nav><div id="search"> <input id="search-query" class="field field-text" name="q" placeholder="Search" autocomplete="off"/><div id="search-results" style="display:none"><div class="entries"></div></div></div><div style="color:#823731;text-align:left;margin:2em 0"> <img src="/images/2015/09/webinar-6.gif" style="width:64px;height:64px;float:left;margin-right:1em" alt="webinar logo"/> Hey, don't miss the next webinar, on the 2nd of September, at 11am PST; we'll discuss <a href="https://plus.google.com/events/cn31s82dkejqo3pfetttq8mrgb0">What's Wrong About Utility Classes</a> in object-oriented world.</div> <script id="search-results-template" type="text/mustache">
          {{#entries}}
            <div>
              <a href="{{url}}">{{title}}</a>
            </div>
          {{/entries}}
        </script></header></div> <section itemscope itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <code>http://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html</code></p><h1 itemprop="name">XSL Transformation in Java: An Easy Way</h1><ul class="subline"><li> <time itemprop="datePublished" datetime="2015-02-02T00:00:00+00:00"> 2 February 2015 </time></li><li><a href='https://github.com/yegor256/blog/commits/master/_posts/2015/feb/2015-02-02-xsl-transformations-in-java.md'>modified</a> on <time itemprop='dateModified' datetime='2015-02-08T19:25:08+0000'>8 February 2015</time></li><li class="printable">Yegor Bugayenko</li><li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html#disqus_thread">comments</a></li></ul><p class="unprintable"><a href='/tag/xml.html' class='tag notranslate'>xml</a> <a href='/tag/java.html' class='tag notranslate'>java</a> <a href='/tag/jcabi.html' class='tag notranslate'>jcabi</a> <a href='/tag/xslt.html' class='tag notranslate'>xslt</a></p><div class="buttons notranslate desktop-only"> <nav class="share" role="navigation"> <a href="http://www.facebook.com/sharer/sharer.php?u=http://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html" title="Share on Facebook" class="button"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=http://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html&amp;text=XSL+Transformation+in+Java%3A+An+Easy+Way" title="Share on Twitter" class="button"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=http://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html" title="Share on Google+" class="button"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=http://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html" title="Share on LinkedIn" class="button"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://www.stumbleupon.com/submit?url=http://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html&amp;title=XSL+Transformation+in+Java%3A+An+Easy+Way" title="Share on StumbleUpon" class="button"> <span class="count count-stumbleupon">0</span> <i class="icon icon-stumbleupon notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=http://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html%3F2015-05&amp;title=XSL+Transformation+in+Java%3A+An+Easy+Way" title="Share on Reddit" class="button"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=http://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html%3F2015-05&amp;t=XSL+Transformation+in+Java%3A+An+Easy+Way" title="Share on Hacker News" class="button"> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav></div> </header> <main> <article class="main" itemprop="articleBody"> <figure class='badge'><a href='http://http.jcabi.com'><img src='http://img.jcabi.com/logo-square.svg' style='width:64px' alt='badge'/></a></figure><p><a href="http://www.w3.org/TR/xslt20/">XSL transformation</a> (XSLT) is a powerful mechanism for converting one XML document into another. However, in Java, XML manipulations are rather verbose and complex. Even for a simple XSL transformation, you have to write a few dozen lines of code — and maybe even more than that if proper exception handling and logging is needed. <a href="http://xml.jcabi.com">jcabi-xml</a> is a small open source library that makes life much easier by enabling XML parsing and XPath traversing with <a href="/2014/04/24/java-xml-parsing-and-traversing.html">a few simple methods</a>. Let's see how this library helps in XSL transformations.</p><p>First, take a look at a practical example — <a href="http://www.rultor.com">rultor.com</a> — a hosted DevOps assistant that <a href="/">automates</a> release, merge, and deploy operations. Rultor keeps each conversation session with an end user (a.k.a. "talk") in a DynamoDB record. There are multiple situations to handle in each talk; that's why using multiple columns of a record is not really feasible. Instead, we're keeping only a few parameters of each talk in record columns (like ID and name) and putting all the rest in a single XML column.</p><p>This is approximately how our DynamoDB table looks:</p><div class="highlight"><pre><code class="language-text" data-lang="text">+----+---------------+--------------------------------------+
| id | name          | xml                                  |
+----+---------------+--------------------------------------+
| 12 | jcabi-xml#54  | &lt;?xml version='1.0'?&gt;                |
|    |               | &lt;talk public="true"&gt;                 |
|    |               |   &lt;request id="e5f4b3"&gt;...&lt;/request&gt; |
|    |               | &lt;/talk&gt;                              |
+----+---------------+--------------------------------------+
| 13 | jcabi-email#2 | &lt;?xml version='1.0'?&gt;                |
|    |               | &lt;talk public="true"&gt;                 |
|    |               |   &lt;daemon id="f787fe"&gt;...&lt;/daemon&gt;   |
|    |               | &lt;/talk&gt;                              |
+----+---------------+--------------------------------------+</code></pre></div><p>Once a user posts <code>@rultor status</code> into a Github ticket, Rultor has to answer with a full status report about the current talk. In order to create such a text answer (a regular user would not appreciate an XML response), we have to fetch that <code>xml</code> column from the necessary DynamoDB record and convert it to plain English text.</p><p>Here is how we're doing that with the help of <a href="http://xml.jcabi.com">jcabi-xml</a> and its class, <a href="http://xml.jcabi.com/apidocs-0.15/com/jcabi/xml/XSLDocument.html"><code>XSLDocument</code></a>.</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">final</span> <span class="n">String</span> <span class="n">xml</span> <span class="o">=</span> <span class="c1">// comes from DynamoDB</span>
<span class="kd">final</span> <span class="n">XSL</span> <span class="n">xsl</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">XSLDocument</span><span class="o">(</span>
  <span class="k">this</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="s">"status.xsl"</span><span class="o">)</span>
<span class="o">);</span>
<span class="kd">final</span> <span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="n">xsl</span><span class="o">.</span><span class="na">applyTo</span><span class="o">(</span><span class="n">xml</span><span class="o">);</span></code></pre></div><p>That's it. Now let's see what's there in that <code>status.xsl</code> file (this is just a skeleton of it; the full version is <a href="https://github.com/yegor256/rultor/blob/1.48/src/main/resources/com/rultor/agents/github/qtn/status.xsl">here</a>):</p><div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;xsl:stylesheet</span> <span class="na">xmlns:xsl=</span><span class="s">"http://www.w3.org/1999/XSL/Transform"</span> <span class="na">version=</span><span class="s">"2.0"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsl:output</span> <span class="na">method=</span><span class="s">"text"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;xsl:template</span> <span class="na">match=</span><span class="s">"/talk"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsl:text&gt;</span>Hi, here is your status report:<span class="nt">&lt;/xsl:text&gt;</span>
    ...
  <span class="nt">&lt;/xsl:template&gt;</span>
  <span class="nt">&lt;xsl:template</span> <span class="na">match=</span><span class="s">"node()|@*"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsl:copy&gt;</span>
      <span class="nt">&lt;xsl:apply-templates</span> <span class="na">select=</span><span class="s">"node()|@*"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsl:copy&gt;</span>
  <span class="nt">&lt;/xsl:template&gt;</span>
<span class="nt">&lt;/xsl:stylesheet&gt;</span></code></pre></div><p>It is good practice to create XSL documents only once per application run. We have a static utility method <a href="http://xml.jcabi.com/apidocs-0.15/com/jcabi/xml/XSLDocument.html#make%28java.io.InputStream%29"><code>XSLDocument.make()</code></a> for this:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">final</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">XSL</span> <span class="n">STYLESHEET</span> <span class="o">=</span> <span class="n">XSLDocument</span><span class="o">.</span><span class="na">make</span><span class="o">(</span>
    <span class="n">Foo</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="s">"stylesheet.xsl"</span><span class="o">)</span>
  <span class="o">);</span>
  <span class="kd">public</span> <span class="n">XML</span> <span class="nf">style</span><span class="o">(</span><span class="kd">final</span> <span class="n">XML</span> <span class="n">xml</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Foo</span><span class="o">.</span><span class="na">STYLESHEET</span><span class="o">.</span><span class="na">transform</span><span class="o">(</span><span class="n">xml</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></div><p>Pay attention to the fact we're using XSLT 2.0. Built-in Java implementation of XSLT doesn't support version 2.0, and in order to make it work, we're using these two Maven Saxon dependencies:</p><div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>net.sourceforge.saxon<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>saxon<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>9.1.0.8<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>net.sourceforge.saxon<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>saxon<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>9.1.0.8<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;classifier&gt;</span>xpath<span class="nt">&lt;/classifier&gt;</span>
  <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre></div><p>All you need to do to start using <code>jcabi-xml</code> for XSL transformations is add this dependency to your <code>pom.xml</code>:</p><div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.jcabi<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>jcabi-xml<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre></div><p>If you have any problems or suggestions, don't hesitate to submit an issue to the Github <a href="https://github.com/jcabi/jcabi-xml/issues">issue tracker</a>.</p></article> </main><div class="unprintable"><h2>Related Posts</h2><p>You may also find these posts interesting:</p><ul><li><a href="/2014/09/09/restful-web-sites.html">RESTful API and a Web Site in the Same URL</a></li><li><a href="/2014/04/24/java-xml-parsing-and-traversing.html">Java XML Parsing Made Easy</a></li><li><a href="/2014/06/25/xml-and-xslt-in-browser.html">XML+XSLT in a Browser</a></li><li><a href="/2015/06/25/xml-data-xsl-views-takes-framework.html">XML Data and XSL Views in Takes Framework</a></li><li><a href="/2015/03/26/jaxb-vs-xembly.html">JAXB Is Doing It Wrong; Try Xembly</a></li></ul></div></div><div class="disqus" role="complementary"><div id="disqus_thread"></div> <a href="http://disqus.com" class="dsq-brlink"> comments powered by <span class="logo-disqus">Disqus</span> </a></div><div class="wrapper"> <footer class="footer"><p> © <span itemprop="author">Yegor Bugayenko</span>, 2014-2015</p> </footer></div></section><script src="http://code.jquery.com/jquery-2.1.0.min.js"></script><script src="/js/ext/search.min.js?89d3001"></script><script src="/js/global.js?89d3001" async defer></script><script src="/js/post.js?89d3001" async defer></script></body></html>