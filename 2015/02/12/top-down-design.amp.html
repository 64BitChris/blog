<!DOCTYPE html>
<html âš¡ lang="en">
  <head>
    <meta charset="utf-8">
    <title>Code For the User, Not for Yourself</title>
    <link rel="canonical" href="http://www.yegor256.com/2015/02/12/top-down-design.html" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <script type='application/ld+json'>
      {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "mainEntityOfPage":{
          "@type": "WebPage",
          "@id": "http://www.yegor256.com/2015/02/12/top-down-design.html"
        },
        "headline": "Code For the User, Not for Yourself",
        "image": {
          "@type": "ImageObject",
          "url": "http://img.teamed.io/face-1400x1400.jpg",
          "height": 1400,
          "width": 1400
        },
        "datePublished": "2015-02-12",
        "dateModified": "2015-02-12",
        "author": {
          "@type": "Person",
          "name": "Yegor Bugayenko"
        },
        "publisher": {
          "@type": "Organization",
          "name": "yegor256.com",
          "logo": {
            "@type": "ImageObject",
            "url": "http://img.teamed.io/face-512x512.jpg",
            "width": 512,
            "height": 512
          }
        },
        "description": "Each change we make to our software has to provide some value
to our users and customers; our technical objectives should
take a back seat.
",
        "keywords": ["breaking down tasks", "tasks breaking down", "incremental delivery", "iterative and incremental", "iterative programming"]
      }
    </script>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom="amp-custom">
      body { padding: 2em; }
      article { width: 600px; max-width: 100%; margin-left: auto; margin-right: auto; }
    </style>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
  </head>
  <body>
    <article>
      <h1>Code For the User, Not for Yourself</h1>
      <p>First, no matter what the methodology is, we all write software for our
users (a.k.a. customers, project sponsors, end users, or
<a href="/2015/01/26/happy-boss-false-objective.html">clients</a>). Second,
no matter what the methodology is, we write incrementally, releasing
features and bug fixes one by one. Maybe I&#39;m saying something absolutely obvious here,
but it&#39;s important to remember that each new version should first of all satisfy
the needs of the user, not of us programmers. In other words, the way
we decompose a big task into smaller pieces should be user-targeted, and that&#39;s
why you always work <strong>top down</strong>. Let&#39;s see what I mean through a practical example.</p>

<!--more-->

Delicatessen (1991) by Jean-Pierre Jeunet

<p>Say I&#39;m contracted by a friend of mine to create a word-counting command line
tool very similar to <a href="http://en.wikipedia.org/wiki/Wc_%28Unix%29">wc</a>. He
promised to pay me $200 for this work, and I promised him I&#39;d deliver the
product in two increments &mdash; an alpha and beta version. I promised him
I&#39;d release the alpha version on Saturday and the beta version on Sunday. He is
going to pay me $100 after the first release and the rest after the second release.</p>

<p>I&#39;ll write in C, and he will pay in cash.</p>

<p>The tool is very primitive, and it only took me a few minutes to write. Take a look at it:</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;unistd.h&gt;</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">ch</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">read</span><span class="p">(</span><span class="n">STDIN_FILENO</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ch</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ch</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="o">++</span><span class="n">count</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="o">++</span><span class="n">count</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">count</span><span class="p">);</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>But let&#39;s be professional and not forget about build automation and unit
testing. Here is a simple <code>Makefile</code> that does them both:</p>

<figure class="highlight"><pre><code class="language-makefile" data-lang="makefile"><span class="nf">all</span><span class="o">:</span> <span class="n">wc</span> <span class="n">test</span>
<span class="nf">wc</span><span class="o">:</span> <span class="n">wc</span>.<span class="n">c</span>
  gcc -o wc wc.c
<span class="nf">test</span><span class="o">:</span> <span class="n">wc</span>
  <span class="nb">echo</span> <span class="s1">&#39;&#39;</span> <span class="p">|</span> ./wc <span class="p">|</span> grep <span class="s1">&#39;0&#39;</span>
  <span class="nb">echo</span> <span class="s1">&#39;Hello, world! How are you?&#39;</span> <span class="p">|</span> ./wc <span class="p">|</span> grep <span class="s1">&#39;5&#39;</span></code></pre></figure>

<p>Now I run <code>make</code> from a command line and get this output:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">$ make
echo &#39;&#39; | ./wc | grep &#39;0&#39;
0
echo &#39;Hello, world! How are you?&#39; | ./wc | grep &#39;5&#39;
5</code></pre></figure>

<p>All clean!</p>

<p>I&#39;m ready to get my $200. Wait, the deal was to deliver two
versions and get cash in two installments. Let&#39;s back up a little and
think &mdash; how can we break this small tool into two parts?</p>

<p>On first thought, let&#39;s release the tool itself first and
build automation and testing next. Is that a good idea? Can we
deliver any software without running it first with a test? How can I be
sure that it works if I don&#39;t ship tests together with it? What will my friend
think about me releasing anything without tests? This would be
a total embarrassment.</p>

<p>Okay, let&#39;s release <code>Makefile</code> first and <code>wc.c</code> next. But what will my
friend do with a couple of tests and no product in hand? This first
release will be absolutely pointless, and I won&#39;t get my $100.</p>

<p>Now we&#39;re getting to the point of this article. What I&#39;m trying to say
is that every new increment must add some value to the product as it
is perceived by the customer, not by us programmers. The <code>Makefile</code> is
definitely a valuable artifact, but it provides no value to my friend.
He doesn&#39;t need it, but I need it.</p>

<p>Here is what I&#39;m going to do. I&#39;ll release a skeleton of the tool, backed
by the tests but with an absolutely dummy implementation. Look at it:</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;5</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>And I will modify the <code>Makefile</code> accordingly. I will disable the first test
to make sure the build passes.</p>

<p>Does my tool work? Yes, it does. Does it count words? Yes, it does for
some inputs. Does it have value to my friend. Obviously! He
can run it from the command line, and he can pass a file as an input. He will
always get number &quot;5&quot; as a result of counting, though. That&#39;s a bummer, but it&#39;s
an alpha version. He doesn&#39;t expect it to work perfectly.</p>

<p>However, it works, it is backed by tests, and it is properly packaged.</p>

<p>What I just did is a top-down approach to design. First of all, I created
something that provides value to my customer. I made sure it also satisfies
my technical objectives, like proper unit test coverage and build automation.
But the most important goal for me was to make sure my friend received
something ... and paid me.</p>

    </article>
  </body>
</html>
