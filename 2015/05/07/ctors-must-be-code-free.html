<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebPage"> <head> <script> (function(_,e,rr,s){_errs=[s];var c=_.onerror;_.onerror=function(){var a=arguments;_errs.push(a); c&&c.apply(this,a)};var b=function(){var c=e.createElement(rr),b=e.getElementsByTagName(rr)[0]; c.src="//beacon.errorception.com/"+s+".js";c.async=!0;b.parentNode.insertBefore(c,b)}; _.addEventListener?_.addEventListener("load",b,!1):_.attachEvent("onload",b)}) (window,document,"script","57c3846b0929bf2b09000494"); </script> <meta charset="utf-8"/> <meta itemprop="name" content="Constructors Must Be Code-Free" /> <meta itemprop="author" content="Yegor Bugayenko" /> <meta itemprop="breadcrumb" content="http://www.yegor256.com" /> <meta itemprop="keywords" content="best practices java constructors, constructors in java, how much code in constructors, how much code to put into constructors, oop constructors best practices" /> <meta itemprop="description" content="It is a bad idea to put executing statements into class constructors because that leads to side effects and uncontrollable behavior. " /> <meta name="description" content="It is a bad idea to put executing statements into class constructors because that leads to side effects and uncontrollable behavior. " /> <meta name="keywords" content="best practices java constructors, constructors in java, how much code in constructors, how much code to put into constructors, oop constructors best practices" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta property="twitter:account_id" content="4503599630178231" /> <meta property="og:url" content="http://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html"/> <meta property="og:site_name" content="yegor256"/> <meta property="og:title" content="Constructors Must Be Code-Free"/> <meta property="og:description" content="It is a bad idea to put executing statements into class constructors because that leads to side effects and uncontrollable behavior. "/> <meta property="og:type" content="article" /> <meta property="og:locale" content="en_US" /> <meta property="fb:admins" content="10203747823006002"/> <meta name="twitter:site" content="www.yegor256.com"/> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:url" content="http://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html"/> <meta property="article:author" content="https://www.facebook.com/yegor256"/> <meta name="p:domain_verify" content="61f09f0ef5db665328827225a3fc11bd"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?e082899"/> <link rel="apple-touch-icon" href="/favicon.ico?e082899"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="http://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?e082899"/> <link rel="stylesheet" href="/css/icons.css?e082899"/> <link rel="canonical" href="http://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html" /> <link rel="amphtml" href="http://www.yegor256.com/2015/05/07/ctors-must-be-code-free.amp.html" /> <title>Constructors Must Be Code-Free - Yegor Bugayenko </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="show head menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub"><span>subscribe</span></a> <a href="/about-me.html"> <img src="//cf.jare.io/?u=http://www.yegor256.com/images/yegor-bugayenko-192x192.png" class="photo" alt="photo of Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="follow me in Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss" title="RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a href="https://github.com/yegor256" rel="nofollow" title="my GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="my StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a href="https://www.facebook.com/yegor256" rel="nofollow" title="follow me in Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a href="https://instagram.com/yegor256" rel="nofollow" title="follow me in Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="my LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a href="https://www.youtube.com/c/yegor256" rel="nofollow" title="my Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a href="https://www.pinterest.com/yegor256/" rel="nofollow" title="my Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a href="https://angel.co/yegor256" rel="nofollow" title="my AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://gitter.im/yegor256/elegantobjects" rel="nofollow" title="Gitter chat"><i class="icon icon-gitter notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="Podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="blog@yegor256.com"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="home page">home</a></li> <li><a href="/best.html" title="best articles to read">12&#160;best</a></li> <li><a href="/contents.html" title="blog contents">all&#160;204</a></li> <li><a href="/webinars.html" title="webinars">webinars</a></li> <li><a href="/talks.html" title="talks">talks</a></li> <li><a href="/books.html" title="books">books</a></li> <li><a href="/papers.html" title="papers">papers</a></li> <li><a href="/pets.html" title="pets">pets</a></li> <li><a href="/award.html" title="software quality award">award</a></li> <li><a href="/testimonials.html" title="what people say about me">testimonials</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search"> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input type="text" id="search-query" class="field field-text" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search" autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="search via Google" alt="search via Google"/> </form></div><div class="hot"><ul> <li> At <a href="/webinars.html">Webinar #19</a> we'll discuss the role of a <strong>project manager</strong> in a software project, join us on <b>November 2</b>, at 11am PST. </li> <li> Meet me at <a href="http://www.oredev.org/2016/speakers/yegor-bugayenko">Oredev</a> (Malm√∂/Nov-7), <a href="http://xpdays.com.ua/">XP Days</a> (Kiev/Nov-11), <a href="http://topconf.com/tallinn-2016/speaker/yegor-bugayenko/">TopConf</a> (Tallinn/Nov-16), <a href="http://devternity.com/#/11">DevTernity</a> (Riga/Dec-1), <a href="https://appdevtrends.com/ECG/live360events/Events/Orlando-2016/Information/AppDevTrends.aspx">AppDevTrends</a> (Orlando/Dec-7), and later <a href="/talks.html">somewhere else</a>. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div><div itemscope="" itemprop="publisher" itemtype="http://schema.org/Organization"> <meta itemprop="name" content="yegor256.com"/><div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div></div><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=http://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">http://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html</code></p><h1 itemprop="name headline mainEntityOfPage">Constructors Must Be Code-Free</h1><aside class='book'><a href='http://goo.gl/W2WVMk'><img src='/images/books/elegant-objects/cover.png' class='book-cover'/></a>Read more about this subject in <a href='http://goo.gl/W2WVMk'>Section&nbsp;1.3</a><br/> of my book<a href='http://goo.gl/W2WVMk'><img src='/images/books/amazon-buy-button.png' class='amazon-button'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-05-07T00:00:00+00:00"> 7 May 2015 </time> </li> <li class='unprintable desktop-only'><a href='https://github.com/yegor256/blog/commits/master/_posts/2015/may/2015-05-07-ctors-must-be-code-free.md'>modified</a> on <time itemprop='dateModified' datetime='2016-09-26T19:22:41-0700'>26 September 2016</time></li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><a href='/tag/java.html' class='tag notranslate'>java</a> <a href='/tag/oop.html' class='tag notranslate'><img src='/images/books/elegant-objects/cactus.svg' alt='OOP'/>oop</a></p><div class="buttons notranslate desktop-only"> <nav class="share"> <a href="http://www.facebook.com/sharer/sharer.php?u=http://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=http://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html&amp;text=Constructors+Must+Be+Code-Free" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=http://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=http://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://www.stumbleupon.com/submit?url=http://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html&amp;title=Constructors+Must+Be+Code-Free" title="Share on StumbleUpon" class="button" rel="nofollow"> <span class="count count-stumbleupon">0</span> <i class="icon icon-stumbleupon notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=http://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html%3F2015-18&amp;title=Constructors+Must+Be+Code-Free" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=http://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html%3F2015-18&amp;t=Constructors+Must+Be+Code-Free" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav></div></header> <main> <article class="main" itemprop="articleBody"><p>How much work should be done within a constructor? It seems reasonable to do some computations inside a constructor and then encapsulate results. That way, when the results are required by object methods, we&#39;ll have them ready. Sounds like a good approach? No, it&#39;s not. It&#39;s a bad idea for one reason: It prevents composition of objects and makes them un-extensible.</p><figure><img src='http://cf.jare.io/?u=http%3A%2F%2Fwww.yegor256.com%2Fimages%2F2015%2F05%2Fkill-bill.jpg' style='width:600px;max-width:100%;' alt='Kill Bill: Vol. 2 (2004) by Quentin Tarantino'/><figcaption>Kill Bill: Vol. 2 (2004) by Quentin Tarantino</figcaption></figure><p>Let&#39;s say we&#39;re making an interface that would represent a name of a person:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">interface</span> <span class="nc">Name</span> <span class="o">{</span>
  <span class="n">String</span> <span class="nf">first</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>Pretty easy, right? Now, let&#39;s try to implement it:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">EnglishName</span> <span class="kd">implements</span> <span class="n">Name</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">EnglishName</span><span class="o">(</span><span class="kd">final</span> <span class="n">CharSequence</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">split</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">)[</span><span class="mi">0</span><span class="o">];</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">first</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>What&#39;s wrong with this? It&#39;s faster, right? It splits the name into parts only once and encapsulates them. Then, no matter how many times we call the <code>first()</code> method, it will return the same value and won&#39;t need to do the splitting again. However, this is flawed thinking! Let me show you the right way and explain:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">EnglishName</span> <span class="kd">implements</span> <span class="n">Name</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">CharSequence</span> <span class="n">text</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">EnglishName</span><span class="o">(</span><span class="kd">final</span> <span class="n">CharSequence</span> <span class="n">txt</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">text</span> <span class="o">=</span> <span class="n">txt</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">first</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">text</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">)[</span><span class="mi">0</span><span class="o">];</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This is the right design. I can see you smiling, so let me prove my point.</p><p>Before I start proving, though, let me ask you to read this article: <a href="/2015/02/26/composable-decorators.html">Composable Decorators vs. Imperative Utility Methods</a>. It explains the difference between a static method and composable decorators. The first snippet above is very close to an imperative utility method, even though it looks like an object. The second example is a true object.</p><p>In the first example, we are abusing the <code>new</code> operator and turning it into a static method, which does all calculations for us <em>right here and now</em>. This is what <em>imperative</em> programming is about. In imperative programming, we do all calculations right now and return fully ready results. In declarative programming, we are instead trying to delay calculations for as long as possible.</p><p>Let&#39;s try to use our <code>EnglishName</code> class:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">final</span> <span class="n">Name</span> <span class="n">name</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">EnglishName</span><span class="o">(</span>
  <span class="k">new</span> <span class="nf">NameInPostgreSQL</span><span class="o">(</span><span class="cm">/*...*/</span><span class="o">)</span>
<span class="o">);</span>
<span class="k">if</span> <span class="o">(</span><span class="cm">/* something goes wrong */</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span>
    <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
      <span class="s">&quot;Hi, %s, we can&#39;t proceed with your application&quot;</span><span class="o">,</span>
      <span class="n">name</span><span class="o">.</span><span class="na">first</span><span class="o">()</span>
    <span class="o">)</span>
  <span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>In the first line of this snippet, we are just making an instance of an object and labeling it <code>name</code>. We don&#39;t want to go to the database yet and fetch the full name from there, split it into parts, and encapsulate them inside <code>name</code>. We just want to create an instance of an object. Such a parsing behavior would be a side effect for us and, in this case, will slow down the application. As you see, we may only need <code>name.first()</code> if something goes wrong and we need to construct an exception object.</p><p>My point is that having <strong>any</strong> computations done inside a constructor is a bad practice and must be avoided because they are side effects and are not requested by the object owner.</p><p>What about performance during the re-use of <code>name</code>, you may ask. If we make an instance of <code>EnglishName</code> and then call <code>name.first()</code> five times, we&#39;ll end up with five calls to the <code>String.split()</code> method.</p><p>To solve that, we create another class, a <a href="/2015/02/26/composable-decorators.html">composable decorator</a>, which will help us solve this &quot;re-use&quot; problem:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">CachedName</span> <span class="kd">implements</span> <span class="n">Name</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Name</span> <span class="n">origin</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">CachedName</span><span class="o">(</span><span class="kd">final</span> <span class="n">Name</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="nd">@Cacheable</span><span class="o">(</span><span class="n">forever</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">first</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">first</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>I&#39;m using the <a href="http://aspects.jcabi.com/annotation-cacheable.html"><code>Cacheable</code></a> annotation from <a href="http://aspects.jcabi.com/">jcabi-aspects</a>, but you can use any other caching tools available in Java (or other languages), like <a href="https://code.google.com/p/guava-libraries/wiki/CachesExplained">Guava Cache</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">CachedName</span> <span class="kd">implements</span> <span class="n">Name</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Cache</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">cache</span> <span class="o">=</span>
    <span class="n">CacheBuilder</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Name</span> <span class="n">origin</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">CachedName</span><span class="o">(</span><span class="kd">final</span> <span class="n">Name</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">first</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">cache</span><span class="o">.</span><span class="na">get</span><span class="o">(</span>
      <span class="mi">1L</span><span class="o">,</span>
      <span class="k">new</span> <span class="n">Callable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">call</span><span class="o">()</span> <span class="o">{</span>
          <span class="k">return</span> <span class="n">CachedName</span><span class="o">.</span><span class="na">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">first</span><span class="o">();</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>But please don&#39;t make <code>CachedName</code> mutable and lazily loaded&mdash;it&#39;s an anti-pattern, which I&#39;ve discussed before in <a href="/2014/06/09/objects-should-be-immutable.html">Objects Should Be Immutable</a>.</p><p>This is how our code will look now:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">final</span> <span class="n">Name</span> <span class="n">name</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">CachedName</span><span class="o">(</span>
  <span class="k">new</span> <span class="nf">EnglishName</span><span class="o">(</span>
    <span class="k">new</span> <span class="nf">NameInPostgreSQL</span><span class="o">(</span><span class="cm">/*...*/</span><span class="o">)</span>
  <span class="o">)</span>
<span class="o">);</span></code></pre></figure><p>It&#39;s a very primitive example, but I hope you get the idea.</p><p>In this design, we&#39;re basically splitting the object into two parts. The first one knows how to get the first name from the English name. The second one knows how to cache the results of this calculation in memory. And now it&#39;s my decision, as a user of these classes, how exactly to use them. I will decide whether I need caching or not. This is what object composition is all about.</p><p>Let me reiterate that the only allowed statement inside a constructor is an assignment. If you need to put something else there, start thinking about refactoring&mdash;your class definitely needs a redesign.</p></article> </main><div class="youtube"><ul><li><a href='https://www.youtube.com/watch?v=9yjtsCK6Wdk'><img src='https://i.ytimg.com/vi/9yjtsCK6Wdk/mqdefault.jpg'/></a>A Few Thoughts About Constructors in OOP (webinar #7); 7 October 2015; 561 views; 16 likes</li></ul></div>
  <div class="unprintable">
    <h2>Related Posts</h2>
    <p>You may also find these posts interesting:</p>
    <ul>
      
        <li>
          <a href="/2016/02/03/design-patterns-and-anti-patterns.html" data-score="2.474829852283379">Design Patterns and Anti-Patterns, Love and Hate</a>
        </li>
      
        <li>
          <a href="/2015/10/17/award-2016.html" data-score="1.9568556296813602">Software Quality Award, 2016</a>
        </li>
      
        <li>
          <a href="/2016/08/15/what-is-wrong-object-oriented-programming.html" data-score="1.4460769246127463">What's Wrong With Object-Oriented Programming?</a>
        </li>
      
        <li>
          <a href="/2016/03/30/jare-instant-free-cdn.html" data-score="1.0724778058762936">Jare.io, an Instant and Free CDN</a>
        </li>
      
        <li>
          <a href="/2015/09/07/maven-repository-amazon-s3.html" data-score="0.9508537082736818">How to Set Up a Private Maven Repository in Amazon S3</a>
        </li>
      
    </ul>
  </div>

</div><div class="disqus" role="complementary"><div id="disqus_thread" class="disqus-thread"></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0]; this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span>, 2014-<span itemprop="copyrightYear">2016</span></p></footer></div></section> <script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?e082899"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> </body> </html>
