<!DOCTYPE html>
<html âš¡ lang="en">
  <head>
    <meta charset="utf-8">
    <title>Public Static Literals ... Are Not a Solution for Data Duplication</title>
    <link rel="canonical" href="http://www.yegor256.com/2015/07/06/public-static-literals.html" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <script type='application/ld+json'>
      {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "mainEntityOfPage":{
          "@type": "WebPage",
          "@id": "http://www.yegor256.com/2015/07/06/public-static-literals.html"
        },
        "headline": "Public Static Literals ... Are Not a Solution for Data Duplication",
        "image": {
          "@type": "ImageObject",
          "url": "http://img.teamed.io/face-1400x1400.jpg",
          "height": 1400,
          "width": 1400
        },
        "datePublished": "2015-07-06",
        "dateModified": "2015-07-06",
        "author": {
          "@type": "Person",
          "name": "Yegor Bugayenko"
        },
        "publisher": {
          "@type": "Organization",
          "name": "yegor256.com",
          "logo": {
            "@type": "ImageObject",
            "url": "http://img.teamed.io/face-512x512.jpg",
            "width": 512,
            "height": 512
          }
        },
        "description": "It's a common practice to make constants public
in order to avoid duplication, but it's a bad
practice, so use objects instead.
",
        "keywords": ["static constants java", "static literals java", "public static java", "public static", "public static literals"]
      }
    </script>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom="amp-custom">
      body { padding: 2em; }
      article { width: 600px; max-width: 100%; margin-left: auto; margin-right: auto; }
    </style>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
  </head>
  <body>
    <article>
      <h1>Public Static Literals ... Are Not a Solution for Data Duplication</h1>
      <p>I have a <code>new String(array,&quot;UTF-8&quot;)</code> in one place and exactly
the same code in another place in my app. Actually, I may have
it in many places. And every time, I have to use that <code>&quot;UTF-8&quot;</code> constant
in order to create a <code>String</code> from a byte array. It would be very
convenient to define it once somewhere and reuse it, just like Apache Commons
is doing; see <a href="https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/CharEncoding.html#UTF_8"><code>CharEncoding.UTF_8</code></a>
(There are many other static literals there).
These guys are setting a bad example! <code>public</code> <code>static</code>
&quot;properties&quot; are as bad as
<a href="/2014/05/05/oop-alternative-to-utility-classes.html">utility classes</a>.</p>

<!--more-->

The Shining (1980) by Stanley Kubrick

<p>Here is what I&#39;m talking about, specifically:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="n">org</span><span class="o">.</span><span class="na">apache</span><span class="o">.</span><span class="na">commons</span><span class="o">.</span><span class="na">lang3</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CharEncoding</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">UTF_8</span> <span class="o">=</span> <span class="s">&quot;UTF-8&quot;</span><span class="o">;</span>
  <span class="c1">// some other methods and properties</span>
<span class="o">}</span></code></pre></figure>

<p>Now, when I need to create a <code>String</code> from a byte array, I use this:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">org.apache.commons.lang3.CharEncoding</span><span class="o">;</span>
<span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">String</span><span class="o">(</span><span class="n">array</span><span class="o">,</span> <span class="n">CharEncoding</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">);</span></code></pre></figure>

<p>Let&#39;s say I want to convert a <code>String</code> into a byte array:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">org.apache.commons.lang3.CharEncoding</span><span class="o">;</span>
<span class="kt">byte</span><span class="o">[]</span> <span class="n">array</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="n">CharEncoding</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">);</span></code></pre></figure>

<p>Looks convenient, right? This is what the designers of Apache Commons think
(one of the most popular but simply <em>terrible</em> libraries
in the Java world). I encourage you to think differently.
I can&#39;t tell you to stop using Apache Commons, because we just don&#39;t have
a better alternative (yet!). But in your own code, don&#39;t use public
static properties &mdash; ever. Even if this code may look convenient to you,
it&#39;s a very bad design.</p>



<p>The reason why is very similar to
<a href="/2015/02/26/composable-decorators.html">utility classes</a>
with public static
methods &mdash; they are unbreakable hard-coded dependencies. Once you
use that <code>CharEncoding.UTF_8</code>, your object starts to depend on this
data, and its user (the user of your object) can&#39;t break this dependency. You may say that
this is your intention, in the case of a <code>&quot;UTF-8&quot;</code> constant &mdash; to make
sure that Unicode is specifically and exclusively being used. In this particular
example, this may be true, but look at it from a more global perspective.</p>

<p>Let me show you the alternative I have in mind before we continue.
Here is what I&#39;m suggesting instead to convert a byte array
into a <code>String</code>:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">UTF8String</span><span class="o">(</span><span class="n">array</span><span class="o">);</span></code></pre></figure>

<p>It&#39;s pseudo-code, since Java designers made class <code>String</code> final and we
can&#39;t really extend it and create <code>UTF8String</code>, but you get the idea. In the real
world, this would look like this:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">UTF8String</span><span class="o">(</span><span class="n">array</span><span class="o">).</span><span class="na">toString</span><span class="o">();</span></code></pre></figure>

<p>As you see, we encapsulate the &quot;UTF-8&quot; constant somewhere inside the class
<code>UTF8String</code>, and its users have no idea how exactly this &quot;byte array to string&quot;
conversion is happening.</p>

<p>By introducing <code>UTF8String</code>, we solved the problem of &quot;UTF-8&quot;
literal duplication. But we did it in a proper object-oriented way &mdash;
we encapsulated the functionality inside a class and let everybody
instantiate its objects and use them. We resolved the problem of functionality
duplication, not just data duplication.</p>

<p>Placing data into one shared place (<code>CharEncoding.UTF_8</code>)
doesn&#39;t really solve the duplication problem; it actually makes it <strong>worse</strong>, mostly
because it encourages everybody to duplicate functionality using the same
piece of shared data.</p>

<p>My point here is that every time you see that you have some data duplication
in your application, start thinking about the functionality you&#39;re duplicating.
You will easily find the code that is repeated again and again. Make a new
class for this code and place the data there, as a <code>private</code> property (or private
<code>static</code> property). That&#39;s how you will improve your design and truly get rid
of duplication.</p>

<p>PS. You can use a method instead of a class, but not a static literal.</p>

    </article>
  </body>
</html>
