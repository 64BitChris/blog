<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xml" href="http://www.yegor256.com/feed.xslt.xml"?><feed xmlns="http://www.w3.org/2005/Atom"><generator uri="http://jekyllrb.com" version="3.1.2">Jekyll</generator><link href="http://www.yegor256.com/rss.xml" rel="self" type="application/atom+xml" /><link href="http://www.yegor256.com/" rel="alternate" type="text/html" /><updated>2017-09-12T11:48:19+00:00</updated><id>http://www.yegor256.com/</id><title type="html">Yegor Bugayenko</title><subtitle>Yegor Bugayenko</subtitle><author><name>Yegor Bugayenko</name><email>yegor256@gmail.com</email></author><entry><title type="html">Yet Another Evil Suffix For Object Names: Client</title><link href="http://www.yegor256.com/2017/09/12/evil-object-name-suffix-client.html" rel="alternate" type="text/html" title="Yet Another Evil Suffix For Object Names: Client" /><published>2017-09-12T00:00:00+00:00</published><updated>2017-09-12T00:00:00+00:00</updated><id>http://www.yegor256.com/2017/09/12/evil-object-name-suffix-client</id><content type="html" xml:base="http://www.yegor256.com/2017/09/12/evil-object-name-suffix-client.html">&lt;p&gt;Some time ago we &lt;a href=&quot;/2015/03/09/objects-end-with-er.html&quot;&gt;were talking&lt;/a&gt;
about &amp;quot;-ER&amp;quot; suffixes in object and class
names. We agreed that they were evil and must be avoided if we want
our code to be truly object-oriented and our objects to be objects instead
of collections of procedures. Now I&amp;#39;m ready to introduce a new evil suffix:
&lt;code&gt;Client&lt;/code&gt;.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Let me give an example first. This is what an object with such a suffix may look like
(it&amp;#39;s a pseudo-code version of the
&lt;a href=&quot;http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/AmazonS3Client.html&quot;&gt;&lt;code&gt;AmazonS3Client&lt;/code&gt;&lt;/a&gt;
from &lt;a href=&quot;https://aws.amazon.com/sdk-for-java/&quot;&gt;AWS Java SDK&lt;/a&gt;):&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AmazonS3Client&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;createBucket&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;deleteBucket&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;doesBucketExist&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;getBucketAcl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;getBucketPolicy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;listBuckets&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// 160+ more methods here&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;All &amp;quot;clients&amp;quot; look similar: they encapsulate the destination URL
with some access credentials and expose a number of methods, which
transport the data to/from the &amp;quot;server.&amp;quot; Even though this design
looks like a &lt;a href=&quot;/2014/11/20/seven-virtues-of-good-object.html&quot;&gt;proper object&lt;/a&gt;,
it doesn&amp;#39;t really follow the true spirit of object-orientation.
That&amp;#39;s why it&amp;#39;s not as maintainable as it should be, for two reasons:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Its scope is too broad&lt;/strong&gt;.
Since the client is an abstraction of a server, it inevitably has to
represent the server&amp;#39;s &lt;em&gt;entire&lt;/em&gt; functionality. When the functionality
is rather limited there is no issue. Take
&lt;a href=&quot;https://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/HttpClient.html&quot;&gt;&lt;code&gt;HttpClient&lt;/code&gt;&lt;/a&gt;
from &lt;a href=&quot;https://hc.apache.org/&quot;&gt;Apache HttpComponents&lt;/a&gt; as an example.
However, when the server is more complex, the size of the client also
grows. There are over 160 (!) methods in &lt;code&gt;AmazonS3Client&lt;/code&gt; at the time of writing, while
it started with only a few dozen just a few &lt;del&gt;years&lt;/del&gt; hundred versions ago.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;It is data focused&lt;/strong&gt;.
The very idea of a client-server relationship is about transferring
data. Take the HTTP RESTful API of the AWS S3 service as
an example. There are entities on the AWS side: buckets, objects, versions,
access control policies, etc., and the server turns them into JSON/XML
data. Then the data comes to us and the client on our side deals
with JSON or XML. It inevitably remains &lt;em&gt;data&lt;/em&gt; for us and never really becomes
buckets, objects, or versions.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The consequences depend on the situation, but these are the most probable:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Procedural code&lt;/strong&gt;.
Since the client returns the data, the code that works with that
data will &lt;a href=&quot;/2016/11/21/naked-data.html&quot;&gt;most likely&lt;/a&gt;
be procedural. Look at the results AWS SDK methods
return, they all look like
&lt;a href=&quot;/2016/07/14/who-is-object.html&quot;&gt;objects&lt;/a&gt;, but in reality they are just
data structures:
&lt;a href=&quot;http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/model/S3Object.html&quot;&gt;&lt;code&gt;S3Object&lt;/code&gt;&lt;/a&gt;,
&lt;a href=&quot;http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/model/ObjectMetadata.html&quot;&gt;&lt;code&gt;ObjectMetadata&lt;/code&gt;&lt;/a&gt;,
&lt;a href=&quot;http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/model/BucketPolicy.html&quot;&gt;&lt;code&gt;BucketPolicy&lt;/code&gt;&lt;/a&gt;,
&lt;a href=&quot;http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/model/PutObjectResult.html&quot;&gt;&lt;code&gt;PutObjectResult&lt;/code&gt;&lt;/a&gt;, etc.
They are all &lt;a href=&quot;/2016/07/06/data-transfer-object.html&quot;&gt;Data Transfer Objects&lt;/a&gt;
with only
&lt;a href=&quot;/2014/09/16/getters-and-setters-are-evil.html&quot;&gt;getters and setters&lt;/a&gt;
inside.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Duplicated code&lt;/strong&gt;.
If we actually decide to stay object-oriented we will have to
turn the data the client returns to us into
&lt;a href=&quot;/2016/07/14/who-is-object.html&quot;&gt;objects&lt;/a&gt;. Most likely this
will lead to code duplication in multiple projects. I had that too,
when I started to work with S3 SDK. Very soon I realized that in order
to avoid duplication I&amp;#39;d better create a library that does the job
of converting S3 SDK data into objects: &lt;a href=&quot;https://github.com/jcabi/jcabi-s3&quot;&gt;jcabi-s3&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Difficulties with testing&lt;/strong&gt;.
Since the client is in most cases a rather big class/interface, mocking
it in unit tests or creating its &lt;a href=&quot;/2014/09/23/built-in-fake-objects.html&quot;&gt;test doubles/fakes&lt;/a&gt;
is a rather complex task.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Static problems&lt;/strong&gt;.
Client classes, even though their methods are not static, look very similar to
&lt;a href=&quot;/2014/05/05/oop-alternative-to-utility-classes.html&quot;&gt;utility classes&lt;/a&gt;,
which are well known for being
&lt;a href=&quot;/2014/09/10/anti-patterns-in-oop.html&quot;&gt;anti-OOP&lt;/a&gt;. The issues we have
with utility classes are almost the same as those we have with &amp;quot;client&amp;quot; classes.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Extendability issues&lt;/strong&gt;.
Needless to say, it&amp;#39;s almost impossible to
&lt;a href=&quot;/2015/02/26/composable-decorators.html&quot;&gt;decorate&lt;/a&gt; a client
object when it has 160+ methods and keeps on growing. The only possible
way to add new functionality to it is by creating new methods. Eventually
we get a monster class that can&amp;#39;t be re-used anyhow without modification.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;What is the alternative?&lt;/p&gt;

&lt;p&gt;The right design would be to replace &amp;quot;clients&amp;quot; with client-side objects
that represent &lt;em&gt;entities&lt;/em&gt; of the server side, not the entire server. For example, with the S3 SDK,
that could be &lt;code&gt;Bucket&lt;/code&gt;, &lt;code&gt;Object&lt;/code&gt;, &lt;code&gt;Version&lt;/code&gt;, &lt;code&gt;Policy&lt;/code&gt;, etc. Each of them
exposes the functionality of real
&lt;a href=&quot;http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingBucket.html&quot;&gt;buckets&lt;/a&gt;,
&lt;a href=&quot;http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingObjects.html&quot;&gt;objects&lt;/a&gt; and
&lt;a href=&quot;http://docs.aws.amazon.com/AmazonS3/latest/dev/ObjectVersioning.html&quot;&gt;versions&lt;/a&gt;,
which the AWS S3 can expose.&lt;/p&gt;

&lt;p&gt;Of course, we will need a high-level object that somehow represents the
entire API/server, but it should be small. For example, in the S3 SDK example
it could be called &lt;code&gt;Region&lt;/code&gt;, which means the entire
&lt;a href=&quot;http://docs.aws.amazon.com/general/latest/gr/rande.html#s3_region&quot;&gt;AWS region&lt;/a&gt; with buckets.
Then we could retrieve a bucket from it and won&amp;#39;t need a region anymore. Then,
to list objects in the bucket we ask the bucket to do it for us. No need to communicate
with the entire &amp;quot;server object&amp;quot; every time, even though technically such a communication
happens, of course.&lt;/p&gt;

&lt;p&gt;To summarize, the trouble is not in the name suffix, but in the very idea
of representing the entire server on the client side rather than its &lt;em&gt;entities&lt;/em&gt;. Such
an abstraction is 1) too big and 2) very data driven.&lt;/p&gt;

&lt;p&gt;BTW, check out some of the &lt;a href=&quot;http://www.jcabi.com&quot;&gt;JCabi libraries&lt;/a&gt; (Java) for examples
of object-oriented clients without &amp;quot;client&amp;quot; objects:
&lt;a href=&quot;http://github.jcabi.com&quot;&gt;jcabi-github&lt;/a&gt;,
&lt;a href=&quot;http://dynamo.jcabi.com&quot;&gt;jcabi-dynamo&lt;/a&gt;,
&lt;a href=&quot;http://s3.jcabi.com&quot;&gt;jcabi-s3&lt;/a&gt;,
or &lt;a href=&quot;http://simpledb.jcabi.com&quot;&gt;jcabi-simpledb&lt;/a&gt;.&lt;/p&gt;</content><author><name>Yegor Bugayenko</name><email>yegor256@gmail.com</email></author><category term="oop" /><summary type="html">Some time ago we were talking
about &amp;quot;-ER&amp;quot; suffixes in object and class
names. We agreed that they were evil and must be avoided if we want
our code to be truly object-oriented and our objects to be objects instead
of collections of procedures. Now I&amp;#39;m ready to introduce a new evil suffix:
Client.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://www.yegor256.com/images/2017/09/dont-tempt-me.jpg" /></entry><entry><title type="html">ReHTTP.net—HTTP Repeater</title><link href="http://www.yegor256.com/2017/09/05/rehttp-http-repeater.html" rel="alternate" type="text/html" title="ReHTTP.net&amp;mdash;HTTP Repeater" /><published>2017-09-05T00:00:00+00:00</published><updated>2017-09-05T00:00:00+00:00</updated><id>http://www.yegor256.com/2017/09/05/rehttp-http-repeater</id><content type="html" xml:base="http://www.yegor256.com/2017/09/05/rehttp-http-repeater.html">&lt;figure class=&#39;badge&#39;&gt;&lt;a href=&#39;http://www.rehttp.net&#39;&gt;&lt;img src=&#39;http://www.rehttp.net/images/logo.svg&#39; style=&#39;width:92px;max-width:100%;&#39; alt=&#39;badge&#39;/&gt;&lt;/a&gt;&lt;/figure&gt;

&lt;p&gt;I faced a problem a few weeks ago with
&lt;a href=&quot;http://www.0pdd.com&quot;&gt;0pdd.com&lt;/a&gt;, one of my web apps that is
supposed to receive HTTP requests (known as
&lt;a href=&quot;https://developer.github.com/webhooks/&quot;&gt;webhooks&lt;/a&gt;) from GitHub:
sometimes the app is down, GitHub gets an HTTP error, and never
sends the request again. The request simply gets lost. There is absolutely
no way to receive it again once the app is back up. I realized that I needed
a &lt;a href=&quot;https://buoyant.io/2017/04/25/whats-a-service-mesh-and-why-do-i-need-one/&quot;&gt;service mesh&lt;/a&gt;
between GitHub and my web app, to accept HTTP
requests and repeat them later if they can&amp;#39;t be delivered immediately.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;I created &lt;a href=&quot;http://www.rehttp.net&quot;&gt;rehttp.net&lt;/a&gt; to do exactly that.&lt;/p&gt;

&lt;p&gt;See, the URL I&amp;#39;ve been giving to GitHub is this one:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;http://www.0pdd.com/hook/github&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;From now on a new URL has to be used:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;http://p.rehttp.net/http://www.0pdd.com/hook/github&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;It looks very similar, but starts with &lt;code&gt;http://p.rehttp.net&lt;/code&gt;. GitHub sends
all webhook PUT/POST requests to the ReHTTP server, which stores
them in a temporary database (I&amp;#39;m using AWS DynamoDB).&lt;/p&gt;

&lt;p&gt;ReHTTP attempts to deliver them immediately. If something goes wrong and
the server HTTP response code is not in the 200-299 range, the next attempt is made
in about an hour. Then it retries every hour for about a day. If all
attempts fail, it abandons the request and that&amp;#39;s it.&lt;/p&gt;

&lt;p&gt;What is interesting is that now I can see a summary of my API
&lt;a href=&quot;http://www.rehttp.net/i?u=http%3A%2F%2Fwww.0pdd.com%2Fhook%2Fgithub&quot;&gt;here&lt;/a&gt;.
I see how many requests were processed successfully over the last 24 hours
and how many of them failed. Also, I have this cute button:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://www.rehttp.net/b?u=http%3A%2F%2Fwww.0pdd.com%2Fhook%2Fgithub&quot;/&gt;&lt;/p&gt;

&lt;p&gt;And I have a URL for checking the status of the entire API:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;http://www.rehttp.net/s?u=http%3A%2F%2Fwww.0pdd.com%2Fhook%2Fgithub&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;I gave this URL to &lt;a href=&quot;https://www.statuscake.com/&quot;&gt;StatusCake&lt;/a&gt; to
ping it every five minutes. If and when
something goes wrong, StatusCake will email me and drop me a message
on the phone.&lt;/p&gt;

&lt;p&gt;ReHTTP is absolutely free. It is written in Java and the code is open.
See its &lt;a href=&quot;https://github.com/yegor256/rehttp&quot;&gt;GitHub repository&lt;/a&gt;
and contribute if you find any bugs or just want to add a feature.&lt;/p&gt;</content><author><name>Yegor Bugayenko</name><email>yegor256@gmail.com</email></author><category term="pet" /><summary type="html">I faced a problem a few weeks ago with
0pdd.com, one of my web apps that is
supposed to receive HTTP requests (known as
webhooks) from GitHub:
sometimes the app is down, GitHub gets an HTTP error, and never
sends the request again. The request simply gets lost. There is absolutely
no way to receive it again once the app is back up. I realized that I needed
a service mesh
between GitHub and my web app, to accept HTTP
requests and repeat them later if they can&amp;#39;t be delivered immediately.</summary></entry><entry><title type="html">XCOP — XML Style Checker</title><link href="http://www.yegor256.com/2017/08/29/xcop.html" rel="alternate" type="text/html" title="XCOP &amp;mdash; XML Style Checker" /><published>2017-08-29T00:00:00+00:00</published><updated>2017-08-29T00:00:00+00:00</updated><id>http://www.yegor256.com/2017/08/29/xcop</id><content type="html" xml:base="http://www.yegor256.com/2017/08/29/xcop.html">&lt;p&gt;One of the biggest advantages of XML versus
&lt;a href=&quot;/2015/11/16/json-vs-xml.html&quot;&gt;many other&lt;/a&gt; data formats is that
it is human-readable. Well, to some extent, you may say. Indeed, a badly
formatted XML document may be rather difficult to digest. I&amp;#39;m not talking about
XML &lt;a href=&quot;https://en.wikipedia.org/wiki/Well-formed_document&quot;&gt;validity&lt;/a&gt;
now, but about its formatting style. Just like we format our
Java/Ruby/Python nicely and then check their &amp;quot;prettiness&amp;quot; with static analyzers,
we can also check our XML documents. Six years ago I asked the StackOverflow community
for such a tool, but unfortunately
&lt;a href=&quot;https://stackoverflow.com/questions/6091873/&quot;&gt;my question&lt;/a&gt;
was down-voted and closed
(you will need 10K+ reputation to see it).
Last week I finally decided to create a tool myself and I called it
&lt;a href=&quot;https://github.com/yegor256/xcop&quot;&gt;xcop&lt;/a&gt;.&lt;/p&gt;

&lt;!--more--&gt;

&lt;figure class=&#39;jb_picture&#39;&gt;&lt;img itemprop=&#39;image&#39; alt=&#39;L&amp;#39;appartement (1996) by Gilles Mimouni&#39; src=&#39;/images/2017/08/lappartement.jpg&#39; longdesc=&#39;#470ac825&#39;/&gt;&lt;figcaption id=&#39;470ac825&#39;&gt;L&amp;#39;appartement (1996) by Gilles Mimouni&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;It&amp;#39;s a very simple command line
&lt;a href=&quot;https://rubygems.org/gems/xcop&quot;&gt;Ruby gem&lt;/a&gt;.
First, you install it:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ gem install xcop&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;And then you ask it to check your XML file, say &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ xcop pom.xml&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;If the file is not &amp;quot;pretty,&amp;quot; &lt;code&gt;xcop&lt;/code&gt; will complain and
show what&amp;#39;s wrong. You can ask &lt;code&gt;xcop&lt;/code&gt; to fix the file:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ xcop --fix pom.xml&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Moreover, in most cases you may need your XML files to include a license
in their headers, especially if it&amp;#39;s open source. To enforce that, just
point &lt;code&gt;xcop&lt;/code&gt; to the file with the license:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ xcop --license&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;LICENSE.txt pom.xml&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;I believe it&amp;#39;s good practice to use &lt;code&gt;xcop&lt;/code&gt; together with
Checkstyle (for Java files), Rubocop (for Ruby files), and other static
analyzers, to ensure that your XML files always look pretty.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/yegor256/xcop&quot;&gt;Read&lt;/a&gt; how you can integrate &lt;code&gt;xcop&lt;/code&gt; with
&lt;a href=&quot;https://github.com/ruby/rake&quot;&gt;Rake&lt;/a&gt;,
&lt;a href=&quot;https://maven.apache.org/&quot;&gt;Maven&lt;/a&gt;, and other builders.
I will appreciate it if you contribute your own integrations too.&lt;/p&gt;</content><author><name>Yegor Bugayenko</name><email>yegor256@gmail.com</email></author><category term="xml" /><summary type="html">One of the biggest advantages of XML versus
many other data formats is that
it is human-readable. Well, to some extent, you may say. Indeed, a badly
formatted XML document may be rather difficult to digest. I&amp;#39;m not talking about
XML validity
now, but about its formatting style. Just like we format our
Java/Ruby/Python nicely and then check their &amp;quot;prettiness&amp;quot; with static analyzers,
we can also check our XML documents. Six years ago I asked the StackOverflow community
for such a tool, but unfortunately
my question
was down-voted and closed
(you will need 10K+ reputation to see it).
Last week I finally decided to create a tool myself and I called it
xcop.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://www.yegor256.com/images/2017/08/lappartement.jpg" /></entry><entry><title type="html">To Be Nice or Not to Be Nice?</title><link href="http://www.yegor256.com/2017/08/22/to-be-nice-or-not.html" rel="alternate" type="text/html" title="To Be Nice or Not to Be Nice?" /><published>2017-08-22T00:00:00+00:00</published><updated>2017-08-22T00:00:00+00:00</updated><id>http://www.yegor256.com/2017/08/22/to-be-nice-or-not</id><content type="html" xml:base="http://www.yegor256.com/2017/08/22/to-be-nice-or-not.html">&lt;p&gt;I stumbled upon this two-year-old article
&lt;a href=&quot;http://www.paulgraham.com/safe.html&quot;&gt;&lt;em&gt;Why It&amp;#39;s Safe for Founders to Be Nice&lt;/em&gt;&lt;/a&gt;,
written by &lt;a href=&quot;https://twitter.com/paulg&quot;&gt;Paul Graham&lt;/a&gt;
(a co-founder or &lt;a href=&quot;http://www.ycombinator.com/&quot;&gt;Y Combinator&lt;/a&gt;), whom I honestly respect,
and I decided to explain why I disagree. Not that I think we shouldn&amp;#39;t
be nice. Not at all. But I do think that &amp;quot;being nice&amp;quot; is not a solution for organizational,
management, marketing, sales, or business development problems. Moreover,
in most cases it is actually &lt;em&gt;not safe&lt;/em&gt; for founders to be nice.&lt;/p&gt;

&lt;!--more--&gt;

&lt;figure class=&#39;jb_picture&#39;&gt;&lt;img itemprop=&#39;image&#39; alt=&#39;Scarecrow (1973) by Jerry Schatzberg&#39; src=&#39;/images/2017/08/scarecrow.jpg&#39; longdesc=&#39;#04c96f77&#39;/&gt;&lt;figcaption id=&#39;04c96f77&#39;&gt;Scarecrow (1973) by Jerry Schatzberg&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;Graham in his article quotes a founder who explains
his worries about being &amp;quot;fundamentally soft-hearted and tending to give
away too much for free.&amp;quot; Then he suggests the founder should not worry too
much, because &amp;quot;as long as you build something good enough to spread by word of mouth,
you&amp;#39;ll have a hyperlinear growth curve.&amp;quot; In other words, don&amp;#39;t worry about
your &lt;em&gt;softness&lt;/em&gt; and instead focus on building a great product&amp;mdash;your efforts
will be appreciated. But will this really work in the modern world?&lt;/p&gt;

&lt;p&gt;It will, provided you&amp;#39;re a talented mathematician, or a composer, or
maybe a writer, where your success doesn&amp;#39;t really depend on people close to you, like
employees, partners, and investors. However, developing a business is
a different story, where success mostly depends on your ability to
generate &lt;em&gt;profit&lt;/em&gt;, which, by definition, is &amp;quot;taking more and returning less.&amp;quot;
What kind of a soft heart will be happy to do that?&lt;/p&gt;

&lt;aside class=&#39;quote&#39;&gt;In a nutshell, we are either soft-hearted or successful.&lt;/aside&gt;

&lt;p&gt;&lt;a href=&quot;http://foolishnessfile.com/soft-hearted-mistakes/&quot;&gt;&lt;em&gt;7 Soft Hearted Mistakes Startup Founders Make&lt;/em&gt;&lt;/a&gt;
perfectly summarizes how softness may become a weakness,
if we fail to take it under control. In a nutshell,
we are either soft-hearted or successful.
This &amp;quot;weakness&amp;quot; is affecting more people every year, since the entire
world, especially its &lt;a href=&quot;http://www.telegraph.co.uk/men/thinking-man/millennial-men-have-gone-soft--but-its-not-our-fault/&quot;&gt;male part&lt;/a&gt;,
is tending to soften up, mostly thanks to the rapidly growing quality of life.&lt;/p&gt;

&lt;p&gt;For some of us, who, like that founder, are &amp;quot;fundamentally soft-hearted,&amp;quot;
doing business and generating profit is a very stressful activity.
We have to do what goes against our inner self and take advantage of others.
Telling us that it is perfectly safe to &amp;quot;be nice&amp;quot; in this situation
is not ethical&amp;mdash;this disarms us and makes us vulnerable in front of those
who don&amp;#39;t have the &amp;quot;disease of soft-heartedness.&amp;quot;
Is there a better recipe out there to heal our illness?&lt;/p&gt;

&lt;p&gt;Even though I&amp;#39;m trying to think of myself as not a weak person,
I have plenty of soft-heartedness disease symptoms. For example, I feel
guilty when:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;I fire an employee&lt;/li&gt;
&lt;li&gt;I negotiate someone down&lt;/li&gt;
&lt;li&gt;I punish someone&lt;/li&gt;
&lt;li&gt;I don&amp;#39;t pick up the phone&lt;/li&gt;
&lt;li&gt;I say &amp;quot;No&amp;quot; to an offer&lt;/li&gt;
&lt;li&gt;I don&amp;#39;t trust people&lt;/li&gt;
&lt;li&gt;I break up with a girl&lt;/li&gt;
&lt;li&gt;I don&amp;#39;t return my mom&amp;#39;s calls&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Any successful business person, including Paul Graham, who deals with hundreds
of startups every year, would tell you that in order to achieve something
you have to take many steps that will make many people around you &lt;em&gt;unhappy&lt;/em&gt;.
You have to fire people, say &amp;quot;No&amp;quot; to them, punish them, never return their phone calls, and
rarely trust anyone. But we&amp;#39;re &amp;quot;fundamentally soft-hearted&amp;quot; and simply
can&amp;#39;t do that every day&amp;mdash;it&amp;#39;s too stressful for us. However, we also
want to be successful in business! We don&amp;#39;t want to be mathematicians, or
composers, or just Java programmers. We want to move up in business.
What do we do?&lt;/p&gt;

&lt;p&gt;Let me share the recipe I found for myself.&lt;/p&gt;

&lt;aside class=&#39;quote&#39;&gt;The only possible way to get rid of guilt is to replace it with a greater guilt.&lt;/aside&gt;

&lt;p&gt;Obviously, we develop soft-heartedness when we grow up, mostly
under the influence of our parents. As kids we quickly learn that in
order to survive and have something to eat we must make those grown-ups
happy, or at least not disappoint them. Later on we call this
&lt;a href=&quot;https://www.forbes.com/sites/stevenberglas/2012/06/07/6-signs-you-are-suffering-from-guilt-and-probably-dont-know-it/#2920e0b67a24&quot;&gt;guilt-driven behavior&lt;/a&gt;
&amp;quot;soft-heartedness&amp;quot; and become &lt;a href=&quot;http://www.lifehack.org/articles/communication/8-problems-you-face-when-you-have-soft-heart.html&quot;&gt;proud of it&lt;/a&gt;.
But I believe it&amp;#39;s unfixable. Those who were traumatized by guilt in their childhood
will never be able to offend somebody and walk away without any negative
feelings. They are scarred forever.&lt;/p&gt;

&lt;p&gt;The only possible way to get rid of guilt is to replace it with a greater guilt.
For example, you just bought two ice cream cups and a friend asks you to give him one.
You can&amp;#39;t say &amp;quot;No&amp;quot; because you would feel guilty for making him unhappy.
But you remember that your mom told you to buy two cups and
bring both of them home. You would feel even more guilt if you made your mom
unhappy. So you say &amp;quot;No&amp;quot; to your friend and run home. Of course, you also can&amp;#39;t
eat the ice cream yourself, even though you want it&amp;mdash;you are afraid to make
your mother unhappy.&lt;/p&gt;

&lt;p&gt;The same principle may be applied to business. But instead of having a controlling
parent you can define your own &amp;quot;rules of doing business.&amp;quot; Those rules will
be stronger than any particular situation you&amp;#39;re facing at any particular moment.
For example, you can decide when and why you answer your emails and phone calls,
what &lt;a href=&quot;/2015/09/16/how-to-fire-someone-right.html&quot;&gt;should happen&lt;/a&gt;
for your employee to be discharged, how exactly you
&lt;a href=&quot;/2016/01/05/how-to-punish-employees.html&quot;&gt;punish&lt;/a&gt;
your employees, how your relationship with partners are
&lt;a href=&quot;/2016/05/17/convertible-notes.html&quot;&gt;structured&lt;/a&gt;, etc.
This document, or set of documents, will be more important for you than
any particular person or situation. You will feel much more guilt for
disobeying the rules than for making someone unhappy.&lt;/p&gt;

&lt;p&gt;At least this is what works for me. Call it self-discipline or a systematic
approach to doing business, but in reality it&amp;#39;s just a countermeasure against
guilt.&lt;/p&gt;

&lt;p&gt;To summarize, and to answer the question whether it is safe for a business person
to be nice, I would say that it is very unsafe. But &lt;em&gt;not&lt;/em&gt; being nice is obviously not
a solution either, because anyone asking this question clearly wants to be nice.
Thus, the only solution I managed to find is a personal
code of conduct, which helps me be effective and not stressed at the same time.&lt;/p&gt;</content><author><name>Yegor Bugayenko</name><email>yegor256@gmail.com</email></author><category term="management" /><summary type="html">I stumbled upon this two-year-old article
Why It&amp;#39;s Safe for Founders to Be Nice,
written by Paul Graham
(a co-founder or Y Combinator), whom I honestly respect,
and I decided to explain why I disagree. Not that I think we shouldn&amp;#39;t
be nice. Not at all. But I do think that &amp;quot;being nice&amp;quot; is not a solution for organizational,
management, marketing, sales, or business development problems. Moreover,
in most cases it is actually not safe for founders to be nice.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://www.yegor256.com/images/2017/08/scarecrow.jpg" /></entry><entry><title type="html">Bitcoin Is Not a Pyramid. Coinbase Is.</title><link href="http://www.yegor256.com/2017/08/15/bitcoin-pyramid.html" rel="alternate" type="text/html" title="Bitcoin Is Not a Pyramid. Coinbase&amp;nbsp;Is." /><published>2017-08-15T00:00:00+00:00</published><updated>2017-08-15T00:00:00+00:00</updated><id>http://www.yegor256.com/2017/08/15/bitcoin-pyramid</id><content type="html" xml:base="http://www.yegor256.com/2017/08/15/bitcoin-pyramid.html">&lt;p&gt;In September 2016 I paid &lt;a href=&quot;http://www.coinbase.com&quot;&gt;Coinbase&lt;/a&gt;
$1,222 for two BTCs, $611 each. Seven months later, in April 2017,
they paid me back $2,490, which was $1,245 for each BTC. My profit before
tax was $1,268, over 100% of the investment, in just seven months.
Moreover, if I had waited until today, I would have made
$6,800 profit instead. Actually, I still have a few BTCs in my Coinbase account
and I can make that 750% profit, if I sell now. Should I? The
BTC price is
&lt;a href=&quot;https://www.cnbc.com/2017/08/12/bitcoin-vaults-to-new-record-above-4k-boosted-by-japan-and-multiplying-its-value-fourfold.html&quot;&gt;over $4,000&lt;/a&gt;.
Will it go up? Or down? What would you do?&lt;/p&gt;

&lt;!--more--&gt;

&lt;figure class=&#39;jb_picture&#39;&gt;&lt;img itemprop=&#39;image&#39; alt=&#39;Two and a Half Men (2011) by Chuck Lorre&#39; src=&#39;/images/2017/08/two-and-a-half-men.jpg&#39; longdesc=&#39;#e9d79173&#39;/&gt;&lt;figcaption id=&#39;e9d79173&#39;&gt;Two and a Half Men (2011) by Chuck Lorre&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;Where did that profit come from?
How can Coinbase pay me eight times more now than I paid them less than a year ago?
Where did they get that cash?&lt;/p&gt;

&lt;figure class=&#39;badge&#39;&gt;&lt;img src=&#39;http://www.yegor256.com/images/2017/08/coinbase-1.jpg&#39; style=&#39;width:200px;max-width:100%;&#39; alt=&#39;badge&#39;/&gt;&lt;/figure&gt;

&lt;p&gt;Obviously you know what a &lt;a href=&quot;https://en.wikipedia.org/wiki/Ponzi_scheme&quot;&gt;Ponzi scheme&lt;/a&gt; is, right?
If you don&amp;#39;t, watch
&lt;a href=&quot;http://www.imdb.com/title/tt1811261/&quot;&gt;Episode 16&lt;/a&gt;
of the 8th Season of
&lt;a href=&quot;http://www.imdb.com/title/tt0369179/&quot;&gt;Two and a Half Men&lt;/a&gt;.
In a nutshell, I&amp;#39;m getting my investment and my profit from other people, who are
paying Coinbase for my BTCs. If there were no demand,
my entire investment would disappear and I would only have the BTC bits
and bytes in my virtual wallet. I would lose my $1,222.&lt;/p&gt;

&lt;p&gt;Some recent articles call &lt;a href=&quot;https://en.wikipedia.org/wiki/Bitcoin&quot;&gt;Bitcoin&lt;/a&gt; and other
&lt;a href=&quot;https://en.wikipedia.org/wiki/Cryptocurrency&quot;&gt;altcoins&lt;/a&gt;,
like
&lt;a href=&quot;https://en.wikipedia.org/wiki/Ethereum&quot;&gt;Etherium&lt;/a&gt; or
&lt;a href=&quot;https://en.wikipedia.org/wiki/Litecoin&quot;&gt;Litecoin&lt;/a&gt;, Ponzi schemes,
for example,
&lt;a href=&quot;https://www.theatlantic.com/technology/archive/2017/05/cryptocurrency-ponzi-schemes/528624/&quot;&gt;&lt;em&gt;The Rise of Cryptocurrency Ponzi Schemes&lt;/em&gt;&lt;/a&gt;
in The Atlantic
and
&lt;a href=&quot;https://www.ft.com/content/b5d66ed8-d1b3-11e6-b06b-680c49b4b4c0&quot;&gt;&lt;em&gt;Bitcoin passes $1,000 but only number that matters is zero&lt;/em&gt;&lt;/a&gt;
in the Financial Times.&lt;/p&gt;

&lt;p&gt;Indeed, the key attribute of a pyramid scheme is right there:
the product being sold has no value aside from the demand-generated one,
just like &lt;a href=&quot;https://www.google.com/finance?q=TWTR&quot;&gt;Twitter stocks&lt;/a&gt;.
Should we blame Bitcoin for that? I don&amp;#39;t think so.&lt;/p&gt;

&lt;p&gt;I think that what Coinbase (and similar traders like
&lt;a href=&quot;http://www.coinmama.com&quot;&gt;CoinMama&lt;/a&gt; or &lt;a href=&quot;http://www.cex.io&quot;&gt;CEX.io&lt;/a&gt;) are doing is definitely
a pyramid and must be stopped by the government, sooner rather than later.&lt;/p&gt;

&lt;p&gt;Imagine, I start a company tomorrow. I call it YegorBase.
It will buy and sell YegorCoins, which I will also create.
The price will be $100 a piece. Some of you
may buy that, especially because it will be possible to sell them the next day,
when the price will be $101. Initially I will create some fuss to promote
the product and the trading will begin. I will make my commission.&lt;/p&gt;

&lt;p&gt;Will this be legal? I seriously doubt that &lt;a href=&quot;http://www.stripe.com&quot;&gt;Stripe&lt;/a&gt;,
for example, would approve my account if I told them my business plan.&lt;/p&gt;

&lt;p&gt;And the problem is not the YegorCoin itself&amp;mdash;there is nothing wrong in
creating your own crypto-electronic-whatever-product. The problem is that I&amp;#39;ll
be trading something that has a very questionable value, being completely
unregulated by the government. The trading of my YegorCoin,
just like shares of stocks, bonds, options, gold, and Bitcoin, must be
regulated by the people we&amp;#39;re paying our taxes to&amp;mdash;the police.&lt;/p&gt;

&lt;p&gt;You may say that Coinbase is not issuing those Bitcoins and only trading
them&amp;mdash;and that&amp;#39;s why it&amp;#39;s not a pyramid. Not true. In my YegorBase shop
I won&amp;#39;t need to issue my YegorCoins for very long. As soon as the total volume
of YegorCoins is big enough, the situation will control itself
and the price will jump and fall somehow. I will make profit on the trading
commission and the owners of YegorCoin will hope that they can manage
to sell everything before my shop gets busted.&lt;/p&gt;

&lt;p&gt;Why the police are still closing their eyes to what Coinbase is doing,
I simply can&amp;#39;t understand. Maybe because NYSE and A16Z are among their
&lt;a href=&quot;https://www.crunchbase.com/organization/coinbase/investors&quot;&gt;long list&lt;/a&gt;
of investors?&lt;/p&gt;</content><author><name>Yegor Bugayenko</name><email>yegor256@gmail.com</email></author><category term="economics" /><summary type="html">In September 2016 I paid Coinbase
$1,222 for two BTCs, $611 each. Seven months later, in April 2017,
they paid me back $2,490, which was $1,245 for each BTC. My profit before
tax was $1,268, over 100% of the investment, in just seven months.
Moreover, if I had waited until today, I would have made
$6,800 profit instead. Actually, I still have a few BTCs in my Coinbase account
and I can make that 750% profit, if I sell now. Should I? The
BTC price is
over $4,000.
Will it go up? Or down? What would you do?</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://www.yegor256.com/images/2017/08/two-and-a-half-men.jpg" /></entry><entry><title type="html">RAII in Java</title><link href="http://www.yegor256.com/2017/08/08/raii-in-java.html" rel="alternate" type="text/html" title="RAII in Java" /><published>2017-08-08T00:00:00+00:00</published><updated>2017-08-08T00:00:00+00:00</updated><id>http://www.yegor256.com/2017/08/08/raii-in-java</id><content type="html" xml:base="http://www.yegor256.com/2017/08/08/raii-in-java.html">&lt;p&gt;Resource Acquisition Is Initialization
(&lt;a href=&quot;https://en.wikipedia.org/wiki/Resource_acquisition_is_initialization&quot;&gt;RAII&lt;/a&gt;)
is a design idea introduced in C++ by
&lt;a href=&quot;http://amzn.to/2uMlANB&quot;&gt;Bjarne Stroustrup&lt;/a&gt;
for exception-safe resource management.
Thanks to garbage collection Java
&lt;a href=&quot;https://stackoverflow.com/questions/477399&quot;&gt;doesn&amp;#39;t have&lt;/a&gt; this feature,
but we can implement something similar, using
&lt;a href=&quot;https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html&quot;&gt;try-with-resources&lt;/a&gt;.&lt;/p&gt;

&lt;!--more--&gt;

&lt;figure class=&#39;jb_picture&#39;&gt;&lt;img itemprop=&#39;image&#39; alt=&#39;At Sachem Farm (1998) by John Huddles&#39; src=&#39;/images/2017/08/at-sachem-farm.jpg&#39; longdesc=&#39;#7aef3b5b&#39;/&gt;&lt;figcaption id=&#39;7aef3b5b&#39;&gt;At Sachem Farm (1998) by John Huddles&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;The problem RAII is solving is obvious; have a look at this code
(I&amp;#39;m sure you know what
&lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html&quot;&gt;&lt;code&gt;Semaphore&lt;/code&gt;&lt;/a&gt;
is and how it works in Java):&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Foo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Semaphore&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Semaphore&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;acquire&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Too large!&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;x = %d&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;release&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;The code is rather primitive and doesn&amp;#39;t do anything useful, but you
most probably get the idea: the method &lt;code&gt;print()&lt;/code&gt;, if being called from
multiple parallel threads, will allow only five of them to print
in parallel. Sometimes it will not allow some of them to print and will
throw an exception if &lt;code&gt;x&lt;/code&gt; is bigger than &lt;code&gt;1000&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The problem with this code is&amp;mdash;&lt;a href=&quot;https://en.wikipedia.org/wiki/Resource_leak&quot;&gt;resource leakage&lt;/a&gt;.
Each &lt;code&gt;print()&lt;/code&gt; call
with &lt;code&gt;x&lt;/code&gt; larger than &lt;code&gt;1000&lt;/code&gt; will take one permit from the semaphore and
won&amp;#39;t return it. In five calls with exceptions
the semaphore will be empty and all other threads won&amp;#39;t print anything.&lt;/p&gt;

&lt;p&gt;What is the solution? Here it is:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Foo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Semaphore&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Semaphore&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;acquire&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;release&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Too large!&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;x = %d&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;release&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;We must release the permit before we throw the exception.&lt;/p&gt;

&lt;p&gt;However, there is another problem that shows up: code duplication. We release
the permit in two places. If we add more &lt;code&gt;throw&lt;/code&gt; instructions we will
also have to add more &lt;code&gt;sem.release()&lt;/code&gt; calls.&lt;/p&gt;

&lt;p&gt;A very elegant solution was introduced in C++ and is called RAII. This
is how it would look in Java:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Permit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Semaphore&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;Permit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Semaphore&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;acquire&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;finalize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;release&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Foo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Semaphore&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Semaphore&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Permit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Too large!&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;x = %d&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;See how beautiful the code is inside method &lt;code&gt;Foo.print()&lt;/code&gt;. We just create
an instance of class &lt;code&gt;Permit&lt;/code&gt; and it immediately acquires a new permit
at the semaphore. Then we exit the method &lt;code&gt;print()&lt;/code&gt;, either by exception
or in the normal way, and the method &lt;code&gt;Permit.finalize()&lt;/code&gt; releases the permit.&lt;/p&gt;

&lt;p&gt;Elegant, isn&amp;#39;t it? Yes, it is, but it won&amp;#39;t work in Java.&lt;/p&gt;

&lt;p&gt;It won&amp;#39;t work because, unlike C++, Java doesn&amp;#39;t destroy objects when
their scope of visibility is closed. The object of class &lt;code&gt;Permit&lt;/code&gt; won&amp;#39;t
be destroyed when we exit the method &lt;code&gt;print()&lt;/code&gt;. It will be destroyed
&lt;em&gt;eventually&lt;/em&gt; but we don&amp;#39;t know when exactly. Most likely it will be
destroyed way after all permits in the semaphore got acquired and we
get blocked.&lt;/p&gt;

&lt;p&gt;There is a solution in Java too. It is not as elegant as the one from
C++, but it does work. Here it is:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Permit&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Closeable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Semaphore&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;Permit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Semaphore&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;release&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Permit&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;acquire&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;acquire&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Foo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Semaphore&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Semaphore&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Permit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Permit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;acquire&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Too large!&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;x = %d&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Pay attention to the &lt;code&gt;try&lt;/code&gt; block and to the
&lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html&quot;&gt;&lt;code&gt;Closeable&lt;/code&gt;&lt;/a&gt; interface
that the class &lt;code&gt;Permit&lt;/code&gt; now implements. The object &lt;code&gt;p&lt;/code&gt; will be &amp;quot;closed&amp;quot;
when the &lt;code&gt;try&lt;/code&gt; block exits. It may exit either at the end, or
by the &lt;code&gt;return&lt;/code&gt; or &lt;code&gt;throw&lt;/code&gt; statements. In either case &lt;code&gt;Permit.close()&lt;/code&gt;
will be called: this is how
&lt;a href=&quot;https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html&quot;&gt;try-with-resources&lt;/a&gt;
works in Java.&lt;/p&gt;

&lt;p&gt;I introduced method &lt;code&gt;acquire()&lt;/code&gt; and moved &lt;code&gt;sem.acquire()&lt;/code&gt; out of the &lt;code&gt;Permit&lt;/code&gt; constructor because I
&lt;a href=&quot;/2015/05/07/ctors-must-be-code-free.html&quot;&gt;believe&lt;/a&gt;
that constructors must be code-free.&lt;/p&gt;

&lt;p&gt;To summarize, RAII is a perfect design &lt;del&gt;pattern&lt;/del&gt; approach when you
deal with resources that may &lt;a href=&quot;https://en.wikipedia.org/wiki/Resource_leak&quot;&gt;leak&lt;/a&gt;.
Even though Java doesn&amp;#39;t have it out of the box we can implement it
via &lt;a href=&quot;https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html&quot;&gt;try-with-resources&lt;/a&gt; and
&lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html&quot;&gt;&lt;code&gt;Closeable&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;</content><author><name>Yegor Bugayenko</name><email>yegor256@gmail.com</email></author><category term="oop" /><category term="java" /><summary type="html">Resource Acquisition Is Initialization
(RAII)
is a design idea introduced in C++ by
Bjarne Stroustrup
for exception-safe resource management.
Thanks to garbage collection Java
doesn&amp;#39;t have this feature,
but we can implement something similar, using
try-with-resources.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://www.yegor256.com/images/2017/08/at-sachem-farm.jpg" /></entry><entry><title type="html">How to Manage a Manager?</title><link href="http://www.yegor256.com/2017/08/01/how-to-manage-a-manager.html" rel="alternate" type="text/html" title="How to Manage a Manager?" /><published>2017-08-01T00:00:00+00:00</published><updated>2017-08-01T00:00:00+00:00</updated><id>http://www.yegor256.com/2017/08/01/how-to-manage-a-manager</id><content type="html" xml:base="http://www.yegor256.com/2017/08/01/how-to-manage-a-manager.html">&lt;p&gt;No secret, &lt;del&gt;we&lt;/del&gt; you all have managers. Some of them are
great, while many are simply idiots. What do you do if you happen
to have a boss that fits perfectly into this dominating category?
Quit and try to find a better place? This may sound like good
advice, but you know as well as I do that a new boss most likely won&amp;#39;t
be any better. Don&amp;#39;t quit. Stay. Manage the manager. Most of them are
manageable.&lt;/p&gt;

&lt;!--more--&gt;

&lt;figure class=&#39;jb_picture&#39;&gt;&lt;img itemprop=&#39;image&#39; alt=&#39;The Intouchables (2011) by  Olivier Nakache&#39; src=&#39;/images/2017/07/intouchables.jpg&#39; longdesc=&#39;#ae07a826&#39;/&gt;&lt;figcaption id=&#39;ae07a826&#39;&gt;The Intouchables (2011) by  Olivier Nakache&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;First of all, remember your goal: do &lt;em&gt;nothing&lt;/em&gt; and &lt;em&gt;get paid&lt;/em&gt;. It&amp;#39;s hardly
achievable to its full extent, but you can get very close.
Doing something useful two hours a week and collecting a paycheck
for forty hours is what a professional engineer must aim for. The other
38 hours you will spend on your own projects, your open source
ideas, your education, your dreams.&lt;/p&gt;

&lt;p&gt;The biggest problem on the road to this success is the manager, who
is hired exactly to prevent this from happening. Managers use multiple
instruments to catch you and force you to give them your &lt;em&gt;time&lt;/em&gt;. Here
is what I did in these situations against a really annoying
manager I once had:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Tasks&lt;/strong&gt;.
Believe it or not he would assign some coding tasks to me.
I would do them very slowly or not do them at all. With a serious
shortage of programmers on the market and my relatively good profile
he wasn&amp;#39;t able to fire me. So he had to put up with the fact that I
simply didn&amp;#39;t write any code, no matter how many tasks were assigned. Very
soon he gave up this idea and stopped giving me anything. I basically
created an image of a very skilled engineer who didn&amp;#39;t write code. No matter
how much you asked.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Meetings&lt;/strong&gt;.
At the beginning he was calling me to all possible meetings,
because he thought that I was very smart. I was even smarter than he thought:
in each meeting I expressed my opinions in a very aggressive and conflict-provoking
way. And I always had enough opinions to express. Very soon he stopped
calling me to those hours-long meetings because I was simply ruining them,
making strong points, and never &amp;quot;being nice.&amp;quot; Then, when he stopped
calling, I pretended to be offended, as if I really wanted to
contribute and yet they were all ignoring me. Guilt is a very powerful management
instrument you know.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Reports&lt;/strong&gt;.
From time to time he was interested to know what was going on, mostly
by email or in Slack chat. I always had a very long list of things I was
&amp;quot;working on,&amp;quot; which were absolutely cryptic to him. He was not a programmer
and didn&amp;#39;t have enough courage to verify my claims. Any time he asked
what I was busy with, I sent him something like
&amp;quot;HDFS reconfig for Docker image&amp;quot; or &amp;quot;Integration tests for JAX-RS endpoints.&amp;quot;
He was happy to see that I was very busy and he left me alone for another
week or two. Actually, I would recommend you send such reports to your managers
pro-actively, before they even ask. This will make them feel even more comfortable.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Morning Stand-ups&lt;/strong&gt;.
These are annoying and very dangerous, because
other programmers may catch your lies about &amp;quot;HDFS and Docker.&amp;quot; The best
defense is offense: I always acted very interested in what other
people were working on. I always asked additional questions too, making
them afraid of me. It worked. They never bothered me with their suspicions.
Try not to avoid the stand-up meetings&amp;mdash;if a manager sees you there
they assume that you&amp;#39;re actually working.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Advice&lt;/strong&gt;.
He would ask me for technical advice, to help him make his decisions. This is
rather risky, because eventually you have to be responsible for the
advice you give, especially if you are a lead developer or an architect.
The best way to avoid this risk is to transfer responsibility to someone else.
I was always trying to ask somebody in the team to help me: to analyze the
problem and create a short email/report with pros and cons. Junior programmers
are usually very interested in doing such a favor for someone more senior.
Then, I just forwarded that email to the manager. Very soon he stopped
coming to me for the analysis and asked the junior guys directly.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Emails&lt;/strong&gt;.
Long email threads are very annoying especially in big teams. I never read
them. You should not read them either, if you value your time. However,
you can&amp;#39;t just ignore them because everybody will feel that you are either
lazy or a sociopath. Neither of which is in your favor. What I always did
was pick up on any message from the thread and reply to it, with a question.
It&amp;#39;s called &lt;em&gt;trolling&lt;/em&gt;. You provoke others to keep the conversation going,
even though you&amp;#39;re not interested in it at all. A few emails like that a day and
people will think that you&amp;#39;re on top of everything in the team.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Coaching&lt;/strong&gt;.
My manager would ask me every now and then to train new programmers and to help them out. This
too was very risky, since the new guys usually decided that I was their friend and
would talk to me about everything, consuming my time. To prevent this
from happening I would always try to introduce them to somebody else&amp;mdash;their
new friend. Everybody, if they don&amp;#39;t understand the consequences,
is happy to talk to junior programmers and to patronize them. I just had to forward
those juniors immediately to the right person.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Personal meetings&lt;/strong&gt;.
This was the most annoying part of all: face-to-face meetings with the manager. He
asked me how happy I was in the team, what my plans were, what problems
I saw, etc. I was not able to say &amp;quot;Well, I&amp;#39;m happy that you guys are
still paying me and my biggest problem is that you annoy me far too often.&amp;quot;
Instead I had to invent plans, ideas, problems, and things that I wasn&amp;#39;t happy about.
I always kept a list of such things ready, in case a manager ever called
me for a meeting.&lt;/p&gt;

&lt;p&gt;That was my strategy. How do you manage your managers?&lt;/p&gt;</content><author><name>Yegor Bugayenko</name><email>yegor256@gmail.com</email></author><category term="management" /><summary type="html">No secret, we you all have managers. Some of them are
great, while many are simply idiots. What do you do if you happen
to have a boss that fits perfectly into this dominating category?
Quit and try to find a better place? This may sound like good
advice, but you know as well as I do that a new boss most likely won&amp;#39;t
be any better. Don&amp;#39;t quit. Stay. Manage the manager. Most of them are
manageable.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://www.yegor256.com/images/2017/07/intouchables.jpg" /></entry><entry><title type="html">My Favorite Websites</title><link href="http://www.yegor256.com/2017/07/25/my-favorite-websites.html" rel="alternate" type="text/html" title="My Favorite Websites" /><published>2017-07-25T00:00:00+00:00</published><updated>2017-07-25T00:00:00+00:00</updated><id>http://www.yegor256.com/2017/07/25/my-favorite-websites</id><content type="html" xml:base="http://www.yegor256.com/2017/07/25/my-favorite-websites.html">&lt;p&gt;I recently &lt;a href=&quot;/2017/06/27/my-environment.html&quot;&gt;published&lt;/a&gt;
a summary of the software and hardware I&amp;#39;m using every day. Now I&amp;#39;ll
list my most favorite websites and online services, which help me do my
daily job: write code and manage projects.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/07/sites-gmail.jpg&quot; class=&quot;env-ico&quot;/&gt;
&lt;img src=&quot;/images/2017/07/sites-google-calendar.jpg&quot; class=&quot;env-ico&quot;/&gt;
&lt;img src=&quot;/images/2017/07/sites-google-drive.jpg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;https://www.gmail.com&quot;&gt;Gmail&lt;/a&gt;
is the best email system. It aggregates all my accounts
in one place: all emails are coming to the &lt;code&gt;@gmail.com&lt;/code&gt; address
and I have a few aliases for sending responses.
&lt;a href=&quot;https://calendar.google.com&quot;&gt;Google Calendar&lt;/a&gt; helps me keep my plans in sync,
and &lt;a href=&quot;https://drive.google.com/drive/my-drive&quot;&gt;Google Drive&lt;/a&gt; helps me
share documents with friends sometimes.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/07/sites-github.jpg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/yegor256&quot;&gt;GitHub&lt;/a&gt;
is where we keep our source code repositories. I was also using
&lt;a href=&quot;https://bitbucket.com&quot;&gt;Bitbucket&lt;/a&gt;
a few years ago, but didn&amp;#39;t really like it.
GitHub is simply the best, no doubts.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/07/sites-stackoverflow.jpg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;http://stackoverflow.com/users/187141/yegor256&quot;&gt;StackOverflow&lt;/a&gt;
is where I learn new technologies, ask questions, answer them sometimes
and really enjoy working with the community. When I have some free time
I just search by
&lt;a href=&quot;https://stackoverflow.com/questions/tagged/design-patterns&quot;&gt;&amp;quot;design-patterns&amp;quot;&lt;/a&gt; or
&lt;a href=&quot;https://stackoverflow.com/questions/tagged/oop&quot;&gt;&amp;quot;oop&amp;quot;&lt;/a&gt;
tags in order to find relevant questions and answer them if I can.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://www.wring.io/images/logo.svg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;http://www.wring.io&quot;&gt;Wring&lt;/a&gt; aggregates my GitHub notifications
and helps me stay on top of all events that are happening there.
It&amp;#39;s my own project and I use it every day.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/07/sites-rultor.jpg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor&lt;/a&gt; is helping me
&lt;a href=&quot;/2014/07/24/rultor-automated-merging.html&quot;&gt;merge&lt;/a&gt; pull requests,
&lt;a href=&quot;/2014/09/11/deployment-script-vs-rultor.html&quot;&gt;deploy&lt;/a&gt; my projects to production and
&lt;a href=&quot;/2014/08/19/how-to-release-to-maven-central.html&quot;&gt;release&lt;/a&gt;
their new versions. It&amp;#39;s one of my
&lt;a href=&quot;/pets.html&quot;&gt;pet projects&lt;/a&gt; and I&amp;#39;m using it every day.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/07/sites-heroku.jpg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;https://www.heroku.com&quot;&gt;Heroku&lt;/a&gt; is where I host almost all my
Java and Ruby projects.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/07/sites-travis-ci.jpg&quot; class=&quot;env-ico&quot;/&gt;
&lt;img src=&quot;/images/2017/07/sites-shippable.jpg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;https://travis-ci.org&quot;&gt;Travis&lt;/a&gt; for open source and
&lt;a href=&quot;https://shippable.com&quot;&gt;Shippable&lt;/a&gt; for commercial projects, as
continuous integration platforms. There are
&lt;a href=&quot;/2014/10/05/ten-hosted-continuous-integration-services.html&quot;&gt;many alternatives&lt;/a&gt;,
but I like these guys.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/07/sites-godaddy.jpg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;http://www.godaddy.com&quot;&gt;Godaddy&lt;/a&gt; is where I register all domain
names. Their user interface is terrible, but their
prices are the lowest. So, I&amp;#39;m with them for at least eight years already.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/07/sites-google-analytics.jpg&quot; class=&quot;env-ico&quot;/&gt;
&lt;img src=&quot;/images/2017/07/sites-google-webmasters.jpg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;http://analytics.google.com&quot;&gt;Google Analytics&lt;/a&gt;
and &lt;a href=&quot;https://www.google.com/webmasters/tools/home&quot;&gt;Google Webmasters&lt;/a&gt;
are two systems where I track
my entire web traffic of all my websites. Both systems are terrible, performance
and interface wise. But since it&amp;#39;s Google, we have to stay with them,
to see how they understand web statistics. I&amp;#39;m also using
&lt;a href=&quot;https://hit.ua&quot;&gt;hit.ua&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/07/sites-hacker-news.jpg&quot; class=&quot;env-ico&quot;/&gt;
&lt;img src=&quot;/images/2017/07/sites-reddit.jpg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;https://news.ycombinator.com/&quot;&gt;Hacker News&lt;/a&gt;
and &lt;a href=&quot;https://www.reddit.com/r/programming/&quot;&gt;/r/programming&lt;/a&gt; at Reddit
seem to be the best sources of news for me. I open them a few times a week.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/07/sites-facebook.jpg&quot; class=&quot;env-ico&quot;/&gt;
&lt;img src=&quot;/images/2017/07/sites-twitter.jpg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;http://www.facebook.com&quot;&gt;Facebook&lt;/a&gt;
and &lt;a href=&quot;http://www.twitter.com&quot;&gt;Twitter&lt;/a&gt;
are the social networks I&amp;#39;m spamming regularly. They are far from being
perfect, but they totally dominate the market.
I was using these guys, but they seem to be &lt;del&gt;dead&lt;/del&gt; less popular now:
LinkedIn, Google+.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/07/sites-amazon.jpg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;http://amzn.to/2ufwBbw&quot;&gt;Amazon&lt;/a&gt;
is where I buy everything that is not food or clothes.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/07/sites-aws.jpg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;https://aws.amazon.com/&quot;&gt;AWS&lt;/a&gt;
is where I keep all
&lt;a href=&quot;https://aws.amazon.com/s3/&quot;&gt;my data&lt;/a&gt;,
&lt;a href=&quot;https://aws.amazon.com/route53/&quot;&gt;my DNS&lt;/a&gt;,
&lt;a href=&quot;https://aws.amazon.com/ec2/&quot;&gt;my servers&lt;/a&gt;,
and some other things. I&amp;#39;m with them since they
launched S3 (in 2006).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/07/sites-contabo.jpg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;https://contabo.com/&quot;&gt;Contabo&lt;/a&gt;
is where I host servers, which I need 24x7. Their prices are great
and the service is pretty decent. I&amp;#39;m with them for at least five years.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/07/sites-papertrail.jpg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;https://papertrailapp.com/?thank=9e5dc6&quot;&gt;Papertrail&lt;/a&gt;
is where all my logs are being aggregated. I tried a few other
systems, but these guys seem to be the best. I even was paying them something
some time ago, but stopped&amp;mdash;their free package seems to be sufficient
enough for my volumes.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/07/sites-statuscake.jpg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;https://www.statuscake.com/&quot;&gt;StatusCake&lt;/a&gt;
is a website monitoring system that keeps an eye on all my web
sites and web apps and notifies me by email and through
&lt;a href=&quot;https://pushover.net/&quot;&gt;Pushover&lt;/a&gt; ($5).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/07/sites-sentry.jpg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;https://www.sentry.io&quot;&gt;Sentry&lt;/a&gt;
is where all my errors are being sent to, from production systems.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/07/sites-buffer.jpg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;https://www.buffer.com&quot;&gt;Buffer&lt;/a&gt;
is helping me to spam Twitter and Facebook more effectively. I pay
them for the premium package and have no regrets. The service really
helps me deliver content to the social networks on schedule.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/07/sites-youtube.jpg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;http://www.youtube.com&quot;&gt;YouTube&lt;/a&gt;
is where I keep my video content. I also stream
&lt;a href=&quot;/webinars.html&quot;&gt;my webinars&lt;/a&gt; there.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/07/sites-soundcloud.jpg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;http://www.soundcloud.com&quot;&gt;SoundCloud&lt;/a&gt;
is where I&amp;#39;m listening to music and keep my own channel with
&lt;a href=&quot;/shift-m.html&quot;&gt;Shift-M&lt;/a&gt; podcast and other audio content.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017/07/sites-quickbooks.jpg&quot; class=&quot;env-ico&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;https://qdc.qbo.intuit.com/qbo30/login&quot;&gt;QuickBooks&lt;/a&gt;
is where I keep all my bookkeeping accounts, for all my companies.&lt;/p&gt;

&lt;p&gt;Did I forget anything?&lt;/p&gt;</content><author><name>Yegor Bugayenko</name><email>yegor256@gmail.com</email></author><category term="tools" /><summary type="html">I recently published
a summary of the software and hardware I&amp;#39;m using every day. Now I&amp;#39;ll
list my most favorite websites and online services, which help me do my
daily job: write code and manage projects.</summary></entry><entry><title type="html">The Bigger Victim of Sexual Harassment</title><link href="http://www.yegor256.com/2017/07/18/sexual-harassment.html" rel="alternate" type="text/html" title="The Bigger Victim of Sexual Harassment" /><published>2017-07-18T00:00:00+00:00</published><updated>2017-07-18T00:00:00+00:00</updated><id>http://www.yegor256.com/2017/07/18/sexual-harassment</id><content type="html" xml:base="http://www.yegor256.com/2017/07/18/sexual-harassment.html">&lt;p&gt;You most probably are aware of the recent sexual harassment
&lt;a href=&quot;https://www.nytimes.com/2017/06/30/technology/women-entrepreneurs-speak-out-sexual-harassment.html?_r=0&quot;&gt;scandals&lt;/a&gt;
in Silicon Valley, which led to serious career problems for
&lt;a href=&quot;https://500hats.com/im-a-creep-i-m-sorry-d2c13e996ea0&quot;&gt;Dave McClure&lt;/a&gt; (former CEO of &lt;a href=&quot;https://500.co/&quot;&gt;500 Startups&lt;/a&gt;),
&lt;a href=&quot;https://www.nytimes.com/2017/02/19/business/uber-sexual-harassment-investigation.html&quot;&gt;Travis Kalanick&lt;/a&gt; (former CEO of &lt;a href=&quot;http://www.uber.com&quot;&gt;Uber&lt;/a&gt;),
&lt;a href=&quot;https://medium.com/@sacca/i-have-more-work-to-do-c775c5d56ca1&quot;&gt;Chris Sacca&lt;/a&gt;,
and
&lt;a href=&quot;https://www.usatoday.com/story/tech/news/2017/06/30/venture-capital-sexual-harassment-scandal/103336512/&quot;&gt;a few others&lt;/a&gt;.
Let&amp;#39;s try to put emotions aside and analyze what&amp;#39;s happening
and what long-term consequences this panic may have for our
male-dominated engineering environment.&lt;/p&gt;

&lt;!--more--&gt;

&lt;figure class=&#39;jb_picture&#39;&gt;&lt;img itemprop=&#39;image&#39; alt=&#39;Twentynine Palms (2003) by Bruno Dumont&#39; src=&#39;/images/2017/07/twentynine-palms.jpg&#39; longdesc=&#39;#c014ddd9&#39;/&gt;&lt;figcaption id=&#39;c014ddd9&#39;&gt;Twentynine Palms (2003) by Bruno Dumont&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;We will never know what really happened between those male investors and
female entrepreneurs behind closed doors, but the gist of the accusation
is that the former were &lt;em&gt;making advances&lt;/em&gt; towards the latter,
where it was clearly &lt;em&gt;inappropriate&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;What does that mean exactly? What, for example, did Dave McClure do in order
to be kicked out of the company he founded?&lt;/p&gt;

&lt;p&gt;Let&amp;#39;s see. According to Katie Benner from The New York Times,
he sent &lt;a href=&quot;https://www.nytimes.com/2017/06/30/technology/women-entrepreneurs-speak-out-sexual-harassment.html&quot;&gt;this message&lt;/a&gt;
to &lt;a href=&quot;https://twitter.com/sarahkunst&quot;&gt;Sarah Kunst&lt;/a&gt;,
who was an applicant at his incubator in 2014 (other &amp;quot;harassers&amp;quot; were accused of
doing something very similar):&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I was getting confused figuring out whether to hire you or hit on you.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Obviously he was flirting. And what&amp;#39;s wrong with that? Can&amp;#39;t we flirt any more?
Is it a crime all of a sudden? One thing is wrong though. It was a &lt;em&gt;threat&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Even though this message didn&amp;#39;t say it explicitly, it actually &lt;em&gt;implied&lt;/em&gt;
that &amp;quot;you either go along and we go out, or you won&amp;#39;t be hired.&amp;quot; Of course,
&amp;quot;no hire&amp;quot; may not hurt as much as a knife or a fist in the face, but it
does hurt. Especially if you are a woman, a member of a minority group.&lt;/p&gt;

&lt;p&gt;I&amp;#39;m a &lt;del&gt;sexist&lt;/del&gt; &lt;a href=&quot;/2017/07/04/sexism.html&quot;&gt;gentleman&lt;/a&gt;,
I feel bad when I see women being threatened. I want to protect them
and I expect our system of justice to help me, just
like it helps when we deal with physical violence.
These threats or attempts to threaten must be punished.&lt;/p&gt;

&lt;p&gt;However!&lt;/p&gt;

&lt;p&gt;There is nothing wrong with the game between the sexes by itself. Just
like we don&amp;#39;t prohibit sex because we are afraid of rapists, we must not
stop asking women out because of our fear of a possible harassment accusation.
However, it seems that this is what is happening now: men are becoming &lt;em&gt;afraid&lt;/em&gt; of women.
Especially powerful men with money and status. They realize
that a small incautious step may help them become the next Dave or Travis.&lt;/p&gt;

&lt;p&gt;This fear is destroying us.&lt;/p&gt;

&lt;p&gt;Thanks to this fear our &lt;em&gt;masculine&lt;/em&gt; characteristics become a victim of this dangerous game
that society is playing right now, with a noble intent to protect women against
verbal and psychological abuse. We men are losing our self-confidence,
our self-esteem, our &lt;del&gt;balls&lt;/del&gt; courage.&lt;/p&gt;

&lt;p&gt;This fear mentally castrates us.&lt;/p&gt;

&lt;p&gt;We must be absolutely clear that those harassers are guilty not because
they &amp;quot;made advances&amp;quot; towards women who work with them or for them, but because
they were &lt;em&gt;threatening&lt;/em&gt; those ladies. There is nothing wrong in being
attracted to a woman, no matter who she is: your boss, your employee, your
schoolmate, or the founder of the business you&amp;#39;re investing in. Moreover,
there is nothing wrong in making advances, falling in love, having sex
and marrying them. Threatening them in order to get all that is very wrong.&lt;/p&gt;

&lt;p&gt;Not every flirtation is harassment. Not every man with a sexual
instinct is a rapist.&lt;/p&gt;

&lt;p&gt;How would I re-phrase that message to Sarah if I had been Dave and had fallen
in love with her at first sight? I would probably say:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I was getting confused, figuring out how to isolate my hiring process
from my desire to hit on you. How about dinner? I promise,
no matter how it ends, it will not affect our hiring decision at all.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;I realize that it&amp;#39;s not perfect, since she wouldn&amp;#39;t be completely
comfortable, and still might expect Dave&amp;#39;s feelings to affect his hiring decision
if it turns out she doesn&amp;#39;t like him or simply already has a partner. However,
this would seem like a respectful attempt to put the weapon down.&lt;/p&gt;

&lt;p&gt;It is difficult to not threaten a woman if you&amp;#39;re holding a gun in your hand
while asking her out. Money and power is the gun.&lt;/p&gt;

&lt;p&gt;Guys, let&amp;#39;s be very careful. However, let&amp;#39;s not forget how to seduce women
and fall in love with them. We have to stay men, especially when
some of those among us are weak abusers deserving no respect.&lt;/p&gt;</content><author><name>Yegor Bugayenko</name><email>yegor256@gmail.com</email></author><category term="mood" /><category term="genders" /><summary type="html">You most probably are aware of the recent sexual harassment
scandals
in Silicon Valley, which led to serious career problems for
Dave McClure (former CEO of 500 Startups),
Travis Kalanick (former CEO of Uber),
Chris Sacca,
and
a few others.
Let&amp;#39;s try to put emotions aside and analyze what&amp;#39;s happening
and what long-term consequences this panic may have for our
male-dominated engineering environment.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://www.yegor256.com/images/2017/07/twentynine-palms.jpg" /></entry><entry><title type="html">How I Would Re-design equals()</title><link href="http://www.yegor256.com/2017/07/11/how-to-redesign-equals.html" rel="alternate" type="text/html" title="How I Would Re-design equals()" /><published>2017-07-11T00:00:00+00:00</published><updated>2017-07-11T00:00:00+00:00</updated><id>http://www.yegor256.com/2017/07/11/how-to-redesign-equals</id><content type="html" xml:base="http://www.yegor256.com/2017/07/11/how-to-redesign-equals.html">&lt;p&gt;I want to rant a bit about Java design, in particular about the methods
&lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29&quot;&gt;&lt;code&gt;Object.equals()&lt;/code&gt;&lt;/a&gt;
and
&lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html#compareTo%28T%29&quot;&gt;&lt;code&gt;Comparable.compareTo()&lt;/code&gt;&lt;/a&gt;.
I&amp;#39;ve hated them for years, because, no matter how hard
I try to like them, the code inside looks ugly. Now I know what exactly
is wrong and how I would design this &amp;quot;object-to-object comparing&amp;quot; mechanism
&lt;em&gt;better&lt;/em&gt;.&lt;/p&gt;

&lt;!--more--&gt;

&lt;figure class=&#39;jb_picture&#39;&gt;&lt;img itemprop=&#39;image&#39; alt=&#39;L&amp;#39;ultimo capodanno (1998) by Marco Risi&#39; src=&#39;/images/2017/07/lultimo-capodanno.jpg&#39; longdesc=&#39;#4900028f&#39;/&gt;&lt;figcaption id=&#39;4900028f&#39;&gt;L&amp;#39;ultimo capodanno (1998) by Marco Risi&lt;/figcaption&gt;&lt;/figure&gt;

&lt;p&gt;Say we have a &lt;del&gt;simple&lt;/del&gt; primitive class &lt;code&gt;Weight&lt;/code&gt;, objects of which
represent the weight of something in kilos:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Weight&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kilos&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;Weight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;kilos&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Next, we want two objects of the same weight to be equal to each other:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Weight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Weight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Here is how such a method may look:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Weight&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kilos&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;Weight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;kilos&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(!(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Weight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Weight&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weight&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Weight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;cast&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;kilos&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;kilos&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;The ugly part here is, first of all, the
&lt;a href=&quot;/2015/04/02/class-casting-is-anti-pattern.html&quot;&gt;type casting&lt;/a&gt;
with &lt;code&gt;instanceof&lt;/code&gt;. The second problem
is that we touch the internals of the incoming object. This design makes
polymorphic behavior of the &lt;code&gt;Weight&lt;/code&gt; impossible. We simply can&amp;#39;t pass
anything else to the &lt;code&gt;equals()&lt;/code&gt; method, besides an instance of the
class &lt;code&gt;Weight&lt;/code&gt;. We can&amp;#39;t turn it into an interface and introduce
multiple implementations of it:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Weight&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;This code will not work:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DefaultWeight&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Weight&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// attribute and ctor skipped&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(!(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Weight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Weight&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weight&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Weight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;cast&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;kilos&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;kilos&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// error here!&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;The problem is that one object decides for the other whether they are
equal. This inevitably leads to a necessity to touch private attributes in order
to do the actual comparison.&lt;/p&gt;

&lt;p&gt;What is the solution?&lt;/p&gt;

&lt;p&gt;This is what I&amp;#39;m offering. Any comparison, no matter what types we
are talking about, is about comparing two digital values. Either we
compare a weight with a weight, text with text, or a user with a user&amp;mdash;our
CPUs can only compare numbers. Thus, we introduce a new interface
&lt;code&gt;Digitizable&lt;/code&gt;:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Digitizable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;digits&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Next, we introduce a new class &lt;code&gt;Comparison&lt;/code&gt;, which &lt;em&gt;is&lt;/em&gt; the comparison of
two streams of bytes (I&amp;#39;m not sure the code is perfect, I tested it
&lt;a href=&quot;https://github.com/yegor256/blog/tree/master/_samples/2017/07/equals&quot;&gt;here&lt;/a&gt;,
feel free to improve and contribute with a pull request):&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Comparison&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Digitizable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;Comparison&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;lt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;rt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;lt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;digits&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;rt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;digits&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lft&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;lft&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rht&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;rht&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lft&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rht&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;signum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Now, we need &lt;code&gt;Weight&lt;/code&gt; to implement &lt;code&gt;Digitizable&lt;/code&gt;:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Weight&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Digitizable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kilos&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;Weight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;kilos&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;digits&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ByteBuffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;allocate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;putInt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;kilos&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Finally, this is how we compare them:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Comparison&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Weight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;(&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Weight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;400&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Weight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;This &lt;code&gt;v&lt;/code&gt; will either be &lt;code&gt;-1&lt;/code&gt;, &lt;code&gt;0&lt;/code&gt;, or &lt;code&gt;1&lt;/code&gt;. In this particular case it will be &lt;code&gt;-1&lt;/code&gt;,
because &lt;code&gt;400&lt;/code&gt; is less than &lt;code&gt;500&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;No more violation of encapsulation, no more type casting, no more
ugly code inside those &lt;code&gt;equals()&lt;/code&gt; and &lt;code&gt;compareTo()&lt;/code&gt; methods.
The class &lt;code&gt;Comparison&lt;/code&gt; will work with all possible types. All our objects
need to do in order to become comparable is to implement &lt;code&gt;Digitizable&lt;/code&gt; and
&amp;quot;provide&amp;quot; their bytes for inspection/comparison.&lt;/p&gt;

&lt;p&gt;This approach is actually very close to the
&lt;a href=&quot;/2016/04/05/printers-instead-of-getters.html&quot;&gt;printers&lt;/a&gt;
I described earlier.&lt;/p&gt;</content><author><name>Yegor Bugayenko</name><email>yegor256@gmail.com</email></author><category term="java" /><category term="oop" /><summary type="html">I want to rant a bit about Java design, in particular about the methods
Object.equals()
and
Comparable.compareTo().
I&amp;#39;ve hated them for years, because, no matter how hard
I try to like them, the code inside looks ugly. Now I know what exactly
is wrong and how I would design this &amp;quot;object-to-object comparing&amp;quot; mechanism
better.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://www.yegor256.com/images/2017/07/lultimo-capodanno.jpg" /></entry></feed>
