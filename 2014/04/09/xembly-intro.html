<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US"
  itemscope="" itemtype="http://schema.org/WebPage">
  <head>
    <base href="http://www.yegor256.com/2014/04/09/xembly-intro.html"/>
    <meta charset="utf-8"/>
    <meta itemprop="name" content="Xembly, an Assembly for XML" />
    <meta itemprop="author" content="Yegor Bugayenko" />
    <meta itemprop="breadcrumb" content="http://www.yegor256.com" />
    <meta itemprop="keywords" content="assembly for xml, xembly, xml, xml manipulation, xml modification, xpath, xsl" />
    <meta itemprop="description" content="Xembly is an imperative language for XML data and schema manipulations that makes XML building much easier and convenient" />
    <meta name="description" content="Xembly is an imperative language for XML data and schema manipulations that makes XML building much easier and convenient" />
    <meta name="keywords" content="assembly for xml, xembly, xml, xml manipulation, xml modification, xpath, xsl" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/>
    <meta name="twitter:creator" content="@yegor256"/>
    <meta property="twitter:account_id" content="4503599630178231" />
    <meta property="og:url" content="http://www.yegor256.com/2014/04/09/xembly-intro.html"/>
    
    <meta property="og:site_name" content="yegor256"/>
    <meta property="og:title" content="Xembly, an Assembly for XML"/>
    <meta property="og:description" content="Xembly is an imperative language for XML data and schema manipulations that makes XML building much easier and convenient"/>
    <meta property="og:type" content="article" />
    <meta property="og:locale" content="en_US" />
    <meta property="fb:admins" content="10203747823006002"/>
    <meta name="twitter:site" content="@yegor256"/>
    <meta name="twitter:creator" content="@yegor256"/>
    <meta name="twitter:url" content="http://www.yegor256.com/2014/04/09/xembly-intro.html"/>
    <meta property="article:author" content="https://www.facebook.com/yegor256"/>
    <meta name="p:domain_verify" content="61f09f0ef5db665328827225a3fc11bd"/>
    <link rel="search" type="application/opensearchdescription+xml" href="opensearch.xml" title="yegor256" />
    <link rel="shortcut icon" href="/favicon.ico?9e18fc6"/>
    <link rel="apple-touch-icon" href="/favicon.ico?9e18fc6"/>
    <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="http://www.yegor256.com/rss.xml"/>
    <link rel="author" href="http://plus.google.com/u/0/114792568016408327418?rel=author" />
    <link rel="publisher" href="http://plus.google.com/u/0/114792568016408327418" />
    <link rel="stylesheet" href="/css/layout.css?9e18fc6"/>
    <link rel="stylesheet" href="/css/icons.css?9e18fc6"/>
    <link rel="canonical" href="http://www.yegor256.com/2014/04/09/xembly-intro.html" />
    <title>Xembly, an Assembly for XML - Yegor Bugayenko
      </title>
    <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
    <script src="/js/global.js?9e18fc6"></script>
  </head>
  <body>
    <div class="wrapper">
      <aside class="header-toggle unprintable" id="header-toggle" title="show head menu"
        onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside>
      <header class="header" id="header">
        <div class="face">
          <a href="/about-me.html" class="sub"><span>subscribe</span></a>
          <a href="/about-me.html">
            <img src="/images/yegor-bugayenko-192x192.png" class="photo"
              alt="photo of Yegor Bugayenko"/>
          </a>
          <a href="/about-me.html" class="hire"><span>hire me</span></a>
        </div>
        <nav>
          <ul class="menu social notranslate">
            <li><a href="http://www.twitter.com/yegor256" title="follow me in Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li>
            <li><a href="/rss" title="RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li>
            <li><a href="https://github.com/yegor256" title="my GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li>
            <li><a href="http://stackoverflow.com/users/187141/yegor256" title="my StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li>
            <li><a href="https://www.facebook.com/yegor256" title="follow me in Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li>
            <li><a href="https://plus.google.com/+YegorBugayenko/posts" title="follow me in Google+"><i class="icon icon-googleplus notranslate" aria-hidden="true"></i></a></li>
            <li><a href="https://www.linkedin.com/in/yegor256" title="my LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li>
            <li><a href="https://www.youtube.com/channel/UCr9qCdqXLm2SU0BIs6d_68Q" title="my Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li>
            <li><a href="https://www.pinterest.com/yegor256/" title="my Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li>
            <li><a href="mailto:yegor@teamed.io" title="yegor@teamed.io"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li>
          </ul>
          <ul class="menu">
            <li><a href="/" title="home page">home</a></li>
            <li><a href="/best.html" title="best articles to read">12&nbsp;best</a></li>
            <li><a href="/contents.html" title="blog contents">all&nbsp;169</a></li>
            <li><a href="/webinars.html" title="webinars">webinars</a></li>
            <li><a href="/talks.html" title="talks">talks</a></li>
            <li><a href="/books.html" title="books">books</a></li>
            <li><a href="/award.html" title="software quality award">award</a></li>
          </ul>
        </nav>
        <div id="search">
          <form method="get" action="https://www.google.com/search" style="position:relative">
            <input name="sitesearch" value="yegor256.com" type="hidden"/>
            <input id="search-query" class="field field-text"
              onfocus="$('#google').css('display', 'inline-block');"
              name="q" placeholder="Search" autocomplete="off"/>
            <span class="desktop-only">
              <input type="image" src="/images/google-search-icon.png" id="google" title="search via Google"
                style="width:3em;height:3em;display:none;position:absolute;margin-left:1em;" alt="search via Google"/>
            </span>
          </form>
          <div id="search-results" style="display: none;">
            <div class="entries"></div>
          </div>
        </div>
        
        <script id="search-results-template" type="text/mustache">
          {{#entries}}
            <div>
              <a href="{{url}}">{{title}}</a>
            </div>
          {{/entries}}
        </script>
        
        <div class="hot">
          <a href="http://goo.gl/5Yfx1i">
            <img src="/images/books/elegant-objects/cover.png"
              alt="Elegant Objects"
              style="width:100px;float:right;margin-left:1em;"/>
          </a>
          <ul>
            <li>
              <strong>Elegant Objects</strong>, my book about
              object-oriented programming, is published! Buy it
              <a href="http://goo.gl/5Yfx1i">on Amazon</a>
              and give me your feedback, please.
            </li>
            <li>
              Meet me in Seattle, on Mar 12, at
              <a href="http://casitconf.org/casitconf16/talks/">CascadiaIT</a>,
              I'll be speaking about chat bots
            </li>
            <li>
              Meet me in Washington DC, on Mar 31, at
              <a href="http://www.sedcconference.org/">SEDC</a>,
              I'll be speaking about XDSD and meeting-free work
            </li>
            <!--
            <li>
              <a href="https://plus.google.com/events/ch54gu0ddhb5sj2v9v1hhrfc71s">Webinar #12</a>
              will be very practical, with a lot of
              Java coding, using <strong>Takes Framework</strong>;
              join us on Mar 2, at 11am PST
            </li>
            -->
          </ul>
        </div>
      </header>
    </div>
    <section itemscope="" itemtype="http://schema.org/BlogPosting">

  <div class="wrapper">
    <header>
      <p class="printable">
        <img src="https://api.qrserver.com/v1/create-qr-code/?data=http://www.yegor256.com/2014/04/09/xembly-intro.html&amp;format=svg"
          style="width:125px;height:125px;" alt="QR code"/>
      </p>
      <p class="printable">
        <code>http://www.yegor256.com/2014/04/09/xembly-intro.html</code>
      </p>
      <h1 itemprop="name">Xembly, an Assembly for XML</h1>
      
      <ul class="subline">
        <li>
          <time itemprop="datePublished" datetime="2014-04-09T00:00:00+00:00">
            9 April 2014
          </time>
        </li>
        
        <li class='unprintable desktop-only'><a href='https://github.com/yegor256/blog/commits/master/_posts/2014/apr/2014-04-09-xembly-intro.md'>modified</a>          on <time itemprop='dateModified' datetime='2016-02-05T03:25:13+0000'>5 February 2016</time></li>
        <li class="printable">Yegor Bugayenko</li>
        <li class="unprintable">
          <i class="icon icon-comments"></i>
          <a href="http://www.yegor256.com/2014/04/09/xembly-intro.html#disqus_thread">comments</a>
        </li>
      </ul>
      <p class="unprintable"><a href='/tag/xembly.html' class='tag notranslate'>xembly</a> <a href='/tag/xml.html' class='tag notranslate'>xml</a> <a href='/tag/xsl.html' class='tag notranslate'>xsl</a> <a href='/tag/xsd.html' class='tag notranslate'>xsd</a></p>
      <div class="buttons notranslate desktop-only">
        <nav class="share" role="navigation">
          <a href="http://www.facebook.com/sharer/sharer.php?u=http://www.yegor256.com/2014/04/09/xembly-intro.html"
            title="Share on Facebook" class="button">
            <span class="count count-facebook">0</span>
            <i class="icon icon-facebook notranslate" aria-hidden="true"></i>
          </a>
          <a href="https://twitter.com/share?url=http://www.yegor256.com/2014/04/09/xembly-intro.html&amp;text=Xembly%2C+an+Assembly+for+XML"
            title="Share on Twitter" class="button">
            <span class="count count-twitter">0</span>
            <i class="icon icon-twitter notranslate" aria-hidden="true"></i>
          </a>
          <a href="https://plus.google.com/share?url=http://www.yegor256.com/2014/04/09/xembly-intro.html"
            title="Share on Google+" class="button">
            <span class="count count-googleplus">0</span>
            <i class="icon icon-googleplus notranslate" aria-hidden="true"></i>
          </a>
          <a href="https://www.linkedin.com/cws/share?url=http://www.yegor256.com/2014/04/09/xembly-intro.html"
            title="Share on LinkedIn" class="button">
            <span class="count count-linkedin">0</span>
            <i class="icon icon-linkedin notranslate" aria-hidden="true"></i>
          </a>
          <a href="http://www.stumbleupon.com/submit?url=http://www.yegor256.com/2014/04/09/xembly-intro.html&amp;title=Xembly%2C+an+Assembly+for+XML"
            title="Share on StumbleUpon" class="button">
            <span class="count count-stumbleupon">0</span>
            <i class="icon icon-stumbleupon notranslate" aria-hidden="true"></i>
          </a>
          <a href="http://reddit.com/submit?url=http://www.yegor256.com/2014/04/09/xembly-intro.html%3F2014-14&amp;title=Xembly%2C+an+Assembly+for+XML"
            title="Share on Reddit" class="button">
            <span class="count count-reddit">0</span>
            <i class="icon icon-reddit notranslate" aria-hidden="true"></i>
          </a>
          <a href="http://news.ycombinator.com/submitlink?u=http://www.yegor256.com/2014/04/09/xembly-intro.html%3F2014-14&amp;t=Xembly%2C+an+Assembly+for+XML"
            title="Share on Hacker News" class="button">
            <i class="icon icon-hackernews notranslate" aria-hidden="true"></i>
          </a>
        </nav>
      </div>
    </header>
    <main>
      <article class="main" itemprop="articleBody">
        <figure class='badge'><a href='http://www.xembly.org'><img src='http://img.xembly.org/logo-256x256.png' style='width:64px;' alt='badge'/></a></figure>

<p>I use XML in almost every one of my projects. And, despite all the fuss about
JSON/YAML, I honestly
<a href="/2015/11/16/json-vs-xml.html">believe</a>
that XML is one of the greatest languages ever
invented. Also, I believe that the beauty of XML reveals itself when used in
combination with related technologies.</p>

<p>For example, you can expose your data in XML and render it for the end-user
using <a href="http://www.w3.org/Style/XSL/">XSL stylesheet</a>.</p>

<!--more-->

<p>Another example would be when you validate the same data, before rendering, to
ensure that the structure is correct. You can do this with the
<a href="http://www.w3.org/TR/xmlschema11-1/">XSD</a> schema. Alternatively, you can pick
specific data elements from the entire document by using
<a href="http://www.w3.org/TR/xpath/">XPath</a> queries.</p>

<p>Essentially, these three technologies, XSL, XSD schema and XPath, are what makes
XML so powerful.</p>

<p>However, there can be times when XML falls short. For instance, imagine you have
an existing document that needs to be modified just slightly. For example, let&#39;s
use the following:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;accounts&gt;</span>
  [...]
  <span class="nt">&lt;acc</span> <span class="na">id=</span><span class="s">&#39;34&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>Jeffrey<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;balance&gt;</span>305<span class="nt">&lt;/balance&gt;</span>
  <span class="nt">&lt;/acc&gt;</span>
  <span class="nt">&lt;acc</span> <span class="na">id=</span><span class="s">&#39;35&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>Walter<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;balance&gt;</span>50090<span class="nt">&lt;/balance&gt;</span>
  <span class="nt">&lt;/acc&gt;</span>
  [...]
<span class="nt">&lt;/accounts&gt;</span></code></pre></figure>

<p>The above code represents a list of accounts. Each account has its own <code>id</code> and several
child elements. In our example, we need to find the account belonging to <code>Jeffrey</code>
and increase its balance by <code>500</code>. How would we do this?</p>

<p>Well, there are a few possible solutions:</p>

<ul>
<li>SAX-parse the document, change the balance and save the stream;</li>
<li>DOM-parse it, find the element with XPath, change the value and then print it;</li>
<li>apply a parametrized XSL stylesheet;</li>
<li>apply XQuery small script to make changes</li>
</ul>

<p>All of these methods have their own drawbacks. However, all of them have one particular problem in common &mdash; they are very verbose. With each of the above methods, you need at least a page of code to perform this rather simple operation. Furthermore,  if the logic of the operation becomes more complex, the amount of needed code grows much faster than you may expect.</p>

<p>Simply put, XML lacks a tool for primitive data manipulations within
a document. Perhaps, it is this shortcoming that makes XML unpopular with some.</p>

<p>Anyway, here is a tool I created a few month ago: <a href="http://www.xembly.org">Xembly</a>.
It is an imperative language with a few simple directives and resembles <a href="http://en.wikipedia.org/wiki/Assembly_language">Assembly</a>
in style. Thus, the name - Xembly. With Xembly, there are no loops, conditions or variables - just a sequence of directives with arguments.</p>

<p>Let&#39;s create a simple example. Say, for instance, we want to add a new account number <code>36</code>
to our list document. The code would look like:</p>

<figure class="highlight"><pre><code class="language-asm" data-lang="asm"><span class="nf">XPATH</span> <span class="err">&#39;/</span><span class="no">accounts</span><span class="err">&#39;;</span>
<span class="nf">ADD</span> <span class="err">&#39;</span><span class="no">account</span><span class="err">&#39;;</span>
<span class="nf">ATTR</span> <span class="err">&#39;</span><span class="no">id</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="mi">36</span><span class="err">&#39;;</span>
<span class="nf">ADD</span> <span class="err">&#39;</span><span class="no">name</span><span class="err">&#39;;</span>
<span class="nf">SET</span> <span class="err">&#39;</span><span class="no">Donny</span><span class="err">&#39;;</span>
<span class="nf">UP</span><span class="err">;</span>
<span class="nf">ADD</span> <span class="err">&#39;</span><span class="no">balance</span><span class="err">&#39;;</span>
<span class="nf">SET</span> <span class="err">&#39;</span><span class="mi">3400</span><span class="err">&#39;;</span></code></pre></figure>

<p>The above should be intuitively clear, but I&#39;ll explain just in case. First, the <code>XPATH</code> directive points us
to the element found by the &quot;/accounts&quot; XPath query. This will be our root element. We assume here that
it exists in the document. Therefore, if it is absent, our Xembly script will
fail with a runtime exception.</p>

<p>Next, the <code>ADD</code> directive on line 2 creates a new XML element without any children
or attributes. Then, the <code>ATTR</code> directive sets an attribute for this element. The code then adds
the new child element <code>name</code> and sets its text value to <code>&quot;Donny&quot;</code> using the <code>SET</code> directive. Finally, we move our pointer back to <code>account</code> element using <code>UP</code>, add the <code>balance</code> child element and set its value to <code>&quot;3400&quot;</code>.</p>

<p>Our balance changing task can be expressed in Xembly with the following code:</p>

<figure class="highlight"><pre><code class="language-asm" data-lang="asm"><span class="nf">XPATH</span> <span class="err">&#39;/</span><span class="no">accounts</span><span class="err">/</span><span class="no">account</span><span class="err">[</span><span class="no">name</span><span class="err">=&quot;</span><span class="no">Jeffrey</span><span class="err">&quot;]/</span><span class="no">balance</span><span class="err">&#39;;</span>
<span class="nf">XSET</span> <span class="err">&#39;</span><span class="p">.</span> <span class="err">+</span> <span class="mi">500</span><span class="err">&#39;;</span></code></pre></figure>

<p>The <code>XSET</code> directive sets the element text value, similar to <code>SET</code>, but
calculates it beforehand using the provided XPath expression <code>. + 500</code>.</p>

<p>Xembly performs all manipulations through DOM. Consequently, Xembly can be
implemented inside any language that has a built-in DOM implementation.</p>

<p>In the meantime, there is only one implementation of Xembly language
&mdash; in Java. Here is how
<a href="/2015/03/26/jaxb-vs-xembly.html">it works</a>:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Directive</span><span class="o">&gt;</span> <span class="n">directives</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Directives</span><span class="o">()</span>
  <span class="o">.</span><span class="na">xpath</span><span class="o">(</span><span class="s">&quot;/accounts&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;account&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="na">attr</span><span class="o">(</span><span class="s">&quot;id&quot;</span><span class="o">,</span> <span class="s">&quot;36&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">).</span><span class="na">set</span><span class="o">(</span><span class="s">&quot;Donny&quot;</span><span class="o">).</span><span class="na">up</span><span class="o">()</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;balance&quot;</span><span class="o">).</span><span class="na">set</span><span class="o">(</span><span class="s">&quot;3400&quot;</span><span class="o">);</span>
<span class="k">new</span> <span class="nf">Xembler</span><span class="o">(</span><span class="n">directives</span><span class="o">).</span><span class="na">apply</span><span class="o">(</span><span class="n">document</span><span class="o">);</span></code></pre></figure>

<p>In this snippet, I&#39;m using a supplementary script builder, <code>Directives</code>, which
enables generation of directives in a fluent way. Then, I use <code>Xembler</code> class,
which is similar to &quot;assembler&quot;, to apply all specified directives
to the <code>document</code> object of class <code>org.w3c.dom.Document</code>.</p>

<p>Additionally, Xembly can be used to build XML documents from scratch and as a replacement for traditional DOM building. A quick example:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span>
  <span class="k">new</span> <span class="nf">Xembler</span><span class="o">(</span>
    <span class="k">new</span> <span class="nf">Directives</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;html&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;head&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="s">&quot;Hello, world!&quot;</span><span class="o">)</span>
  <span class="o">).</span><span class="na">xml</span><span class="o">()</span>
<span class="o">);</span></code></pre></figure>

<p>The above snippet produces the following output:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Hello, world!<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<p>For me, this appears to be more simple and compact.</p>

<p>As usual, your bug reports and suggestions are always welcomed. Please send to
<a href="https://github.com/yegor256/xembly/issues">GitHub issues</a> :)</p>

      </article>
    </main>
    
  <div class="unprintable">
    <h2>Related Posts</h2>
    <p>You may also find these posts interesting:</p>
    <ul>
      
        <li>
          <a href="/2016/02/03/design-patterns-and-anti-patterns.html" data-score="1.958861191935958">Design Patterns and Anti-Patterns, Love and Hate</a>
        </li>
      
        <li>
          <a href="/2015/04/16/award.html" data-score="1.7351548548964002">Software Quality Award, 2015</a>
        </li>
      
        <li>
          <a href="/2015/06/25/xml-data-xsl-views-takes-framework.html" data-score="1.5296657888689855">XML Data and XSL Views in Takes Framework</a>
        </li>
      
        <li>
          <a href="/2015/11/16/json-vs-xml.html" data-score="1.3547006101019228">Stop Comparing JSON and XML</a>
        </li>
      
        <li>
          <a href="/2015/11/10/ten-mistakes-in-specs.html" data-score="1.2463883963587101">10 Typical Mistakes in Specs</a>
        </li>
      
    </ul>
  </div>


    <div class="teamed-banner">
      <a href="http://www.teamed.io">
        <img src="/images/teamed-banner.jpg" alt="teamed banner"/>
      </a>
    </div>
  </div>

  <div class="disqus" role="complementary">
    <div id="disqus_thread" class="disqus-thread"></div>
    <a href="http://disqus.com" class="dsq-brlink">
      comments powered by
      <span class="logo-disqus">Disqus</span>
    </a>
  </div>

  <div class="wrapper">
    <footer class="footer">
      <p>
        &copy;
        <span itemprop="author">Yegor Bugayenko</span>,
        2014-2016
      </p>
    </footer>
  </div>

</section>

<script src="/js/post.js?9e18fc6"></script>
<script src="//a.disquscdn.com/embed.js?9e18fc6"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-1963507-32', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>
