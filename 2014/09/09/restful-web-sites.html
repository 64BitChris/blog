<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US"
  itemscope="" itemtype="http://schema.org/WebPage">
  <head>
    <meta charset="utf-8"/>
    <meta itemprop="name" content="RESTful API and a Web Site in the Same URL" />
    <meta itemprop="author" content="Yegor Bugayenko" />
    <meta itemprop="breadcrumb" content="http://www.yegor256.com" />
    <meta itemprop="keywords" content="browsable restful api, how to build restful api, restful api, restful api in browser, restful web browsing" />
    <meta itemprop="description" content="The way RESTful API-s are designed perfectly fits into the concept of web browsing, with a few minimal alterations " />
    <meta name="description" content="The way RESTful API-s are designed perfectly fits into the concept of web browsing, with a few minimal alterations " />
    <meta name="keywords" content="browsable restful api, how to build restful api, restful api, restful api in browser, restful web browsing" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/>
    <meta name="twitter:creator" content="@yegor256"/>
    <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" />
    <meta property="twitter:account_id" content="4503599630178231" />
    <meta property="og:url" content="http://www.yegor256.com/2014/09/09/restful-web-sites.html"/>
    
    <meta property="og:site_name" content="yegor256"/>
    <meta property="og:title" content="RESTful API and a Web Site in the Same URL"/>
    <meta property="og:description" content="The way RESTful API-s are designed perfectly fits into the concept of web browsing, with a few minimal alterations "/>
    <meta property="og:type" content="article" />
    <meta property="og:locale" content="en_US" />
    <meta property="fb:admins" content="10203747823006002"/>
    <meta name="twitter:site" content="@yegor256"/>
    <meta name="twitter:creator" content="@yegor256"/>
    <meta name="twitter:url" content="http://www.yegor256.com/2014/09/09/restful-web-sites.html"/>
    <meta property="article:author" content="https://www.facebook.com/yegor256"/>
    <meta name="p:domain_verify" content="61f09f0ef5db665328827225a3fc11bd"/>
    <link rel="search" type="application/opensearchdescription+xml" href="opensearch.xml" title="yegor256" />
    <link rel="shortcut icon" href="/favicon.ico?0d32282"/>
    <link rel="apple-touch-icon" href="/favicon.ico?0d32282"/>
    <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="http://www.yegor256.com/rss.xml"/>
    <link rel="author" href="http://plus.google.com/u/0/114792568016408327418?rel=author" />
    <link rel="publisher" href="http://plus.google.com/u/0/114792568016408327418" />
    <link rel="stylesheet" href="/css/layout.css?0d32282"/>
    <link rel="stylesheet" href="/css/icons.css?0d32282"/>
    <link rel="canonical" href="http://www.yegor256.com/2014/09/09/restful-web-sites.html" />
    <link rel="amphtml" href="http://www.yegor256.com/2014/09/09/restful-web-sites.amp.html" />
    <title>RESTful API and a Web Site in the Same URL - Yegor Bugayenko
      </title>
    <script src="//code.jquery.com/jquery-2.1.0.min.js"></script>
    <script src="/js/global.js?0d32282"></script>
  </head>
  <body>
    <div class="wrapper">
      <aside class="header-toggle unprintable" id="header-toggle" title="show head menu"
        onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside>
      <header class="header" id="header">
        <div class="face">
          <a href="/about-me.html#form" class="sub"><span>subscribe</span></a>
          <a href="/about-me.html">
            <img src="/images/yegor-bugayenko-192x192.png" class="photo"
              alt="photo of Yegor Bugayenko"/>
          </a>
        </div>
        <nav>
          <ul class="menu social notranslate">
            <li><a href="http://www.twitter.com/yegor256" title="follow me in Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li>
            <li><a href="/rss" title="RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li>
            <li><a href="https://github.com/yegor256" title="my GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li>
            <li><a href="http://stackoverflow.com/users/187141/yegor256" title="my StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li>
            <li><a href="https://www.facebook.com/yegor256" title="follow me in Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li>
            <li><a href="https://instagram.com/yegor256" title="follow me in Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li>
            <li><a href="https://www.linkedin.com/in/yegor256" title="my LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li>
            <li><a href="https://www.youtube.com/channel/UCr9qCdqXLm2SU0BIs6d_68Q" title="my Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li>
            <li><a href="https://www.pinterest.com/yegor256/" title="my Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li>
            <li><a href="mailto:blog@yegor256.com" title="blog@yegor256.com"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li>
          </ul>
          <ul class="menu">
            <li><a href="/" title="home page">home</a></li>
            <li><a href="/best.html" title="best articles to read">12&#160;best</a></li>
            <li><a href="/contents.html" title="blog contents">all&#160;186</a></li>
            <li><a href="/webinars.html" title="webinars">webinars</a></li>
            <li><a href="/talks.html" title="talks">talks</a></li>
            <li><a href="/books.html" title="books">books</a></li>
            <li><a href="/pets.html" title="pets">pets</a></li>
            <li><a href="/award.html" title="software quality award">award</a></li>
          </ul>
        </nav>
        <div id="search">
          <form method="get" action="https://www.google.com/search" style="position:relative">
            <input name="sitesearch" value="yegor256.com" type="hidden"/>
            <input id="search-query" class="field field-text"
              onfocus="$('#google').css('display', 'inline-block');"
              name="q" placeholder="Search" autocomplete="off"/>
            <span class="desktop-only">
              <input type="image" src="/images/google-search-icon.svg" id="google" title="search via Google"
                style="height:2.4em;display:none;position:absolute;top:.3em;margin-left:1em;" alt="search via Google"/>
            </span>
          </form>
          <div id="search-results" style="display: none;">
            <div class="entries"></div>
          </div>
        </div>
        <div class="hot">
          <ul>
            <li>
              Join my new chatroom on Gitter to discuss
              object-oriented programming in real time:
              <a href="https://gitter.im/yegor256/elegantobjects">yegor256/elegantobjects</a>!
            </li>
            <li>
              At <a href="/webinars.html">Webinar #16</a>
              we'll discuss why interfaces in OOP must be small and functionality-poor,
              join us on July 6, at 11am PST.
            </li>
            <!--
            <li>
              Meet me at
              <a href="http://slcdevopsdays.org/2016-speaker-proposals-continuous-integration-may-have-negative-effects/">SLC DevOpsDays</a> (Salt Lake City/June-14),
              and later
              <a href="/talks.html">somewhere else</a>.
            </li>
            -->
          </ul>
        </div>
      </header>
    </div>
    <section itemscope="" itemtype="http://schema.org/BlogPosting">

  <div class="wrapper">
    <header>
      <p class="printable">
        <img src="https://api.qrserver.com/v1/create-qr-code/?data=http://www.yegor256.com/2014/09/09/restful-web-sites.html&amp;format=svg"
          style="width:125px;height:125px;" alt="QR code"/>
      </p>
      <p class="printable">
        <code>http://www.yegor256.com/2014/09/09/restful-web-sites.html</code>
      </p>
      <h1 itemprop="name">RESTful API and a Web Site in the Same URL</h1>
      
      <ul class="subline">
        <li>
          <time itemprop="datePublished" datetime="2014-09-09T00:00:00+00:00">
            9 September 2014
          </time>
        </li>
        
        <li class='unprintable desktop-only'><a href='https://github.com/yegor256/blog/commits/master/_posts/2014/sep/2014-09-09-restful-web-sites.md'>modified</a>          on <time itemprop='dateModified' datetime='2015-11-17T17:22:42+0000'>17 November 2015</time></li>
        <li class="printable">Yegor Bugayenko</li>
        <li class="unprintable">
          <i class="icon icon-comments"></i>
          <a href="http://www.yegor256.com/2014/09/09/restful-web-sites.html#disqus_thread">comments</a>
        </li>
      </ul>
      
      <p class="unprintable"><a href='/tag/restful.html' class='tag notranslate'>restful</a> <a href='/tag/xslt.html' class='tag notranslate'>xslt</a> <a href='/tag/xml.html' class='tag notranslate'>xml</a></p>
      <div class="buttons notranslate desktop-only">
        <nav class="share" role="navigation">
          <a href="http://www.facebook.com/sharer/sharer.php?u=http://www.yegor256.com/2014/09/09/restful-web-sites.html"
            title="Share on Facebook" class="button">
            <span class="count count-facebook">0</span>
            <i class="icon icon-facebook notranslate" aria-hidden="true"></i>
          </a>
          <a href="https://twitter.com/share?url=http://www.yegor256.com/2014/09/09/restful-web-sites.html&amp;text=RESTful+API+and+a+Web+Site+in+the+Same+URL"
            title="Share on Twitter" class="button">
            <span class="count count-twitter">0</span>
            <i class="icon icon-twitter notranslate" aria-hidden="true"></i>
          </a>
          <a href="https://plus.google.com/share?url=http://www.yegor256.com/2014/09/09/restful-web-sites.html"
            title="Share on Google+" class="button">
            <span class="count count-googleplus">0</span>
            <i class="icon icon-googleplus notranslate" aria-hidden="true"></i>
          </a>
          <a href="https://www.linkedin.com/cws/share?url=http://www.yegor256.com/2014/09/09/restful-web-sites.html"
            title="Share on LinkedIn" class="button">
            <span class="count count-linkedin">0</span>
            <i class="icon icon-linkedin notranslate" aria-hidden="true"></i>
          </a>
          <a href="http://www.stumbleupon.com/submit?url=http://www.yegor256.com/2014/09/09/restful-web-sites.html&amp;title=RESTful+API+and+a+Web+Site+in+the+Same+URL"
            title="Share on StumbleUpon" class="button">
            <span class="count count-stumbleupon">0</span>
            <i class="icon icon-stumbleupon notranslate" aria-hidden="true"></i>
          </a>
          <a href="http://reddit.com/submit?url=http://www.yegor256.com/2014/09/09/restful-web-sites.html%3F2014-36&amp;title=RESTful+API+and+a+Web+Site+in+the+Same+URL"
            title="Share on Reddit" class="button">
            <span class="count count-reddit">0</span>
            <i class="icon icon-reddit notranslate" aria-hidden="true"></i>
          </a>
          <a href="http://news.ycombinator.com/submitlink?u=http://www.yegor256.com/2014/09/09/restful-web-sites.html%3F2014-36&amp;t=RESTful+API+and+a+Web+Site+in+the+Same+URL"
            title="Share on Hacker News" class="button">
            <i class="icon icon-hackernews notranslate" aria-hidden="true"></i>
          </a>
        </nav>
      </div>
    </header>
    <main>
      <article class="main" itemprop="articleBody">
        <p>Look at GitHub RESTful API, for example. To get information
about a repository you should make a GET request to
<a href="https://api.github.com/repos/yegor256/rultor">api.github.com/repos/yegor256/rultor</a>.
In response, you will get a JSON document with all the details of the
<code>yegor256/rultor</code> repository. Try it, the URL doesn&#39;t require any authentication.</p>

<p>To open the same repository in a nice HTML+CSS page, you should use
a different URL: <a href="https://github.com/yegor256/rultor">github.com/yegor256/rultor</a>.
The URL is different, the server-side is definitely different, but the
nature of the data is exactly the same. The only thing that changes is
a representation layer.</p>

<p>In the first case, we get JSON; in the second &mdash; HTML.</p>

<p>How about combining them? How about using the same URL and the same
server-side processing mechanism for both of them? How about shifting the whole rendering task
to the client-side (the browser) and letting the server work solely with
the data?</p>

<!--more-->

<figure><img src='http://cf.jare.io/?u=http%3A%2F%2Fwww.yegor256.com%2Fimages%2F2014%2F09%2Fgood_bad_weird.png' style='width:600px;max-width:100%;' alt='The Good, the Bad, The Wierd (2008) by Kim Jee-woon'/><figcaption>The Good, the Bad, The Wierd (2008) by Kim Jee-woon</figcaption></figure>

<p><a href="/2015/02/02/xsl-transformations-in-java.html">XSLT</a>
is the technology that can help us do this.
In <a href="/2014/06/25/xml-and-xslt-in-browser.html">&quot;XML+XSLT in a Browser&quot;</a>
I explained briefly how it works in a browser. In a nutshell, the
server returns an XML with some data and a link to the XSL stylesheet. The
stylesheet, being executed in a browser, converts XML to HTML. XSL language
is as powerful as any other rendering engine, like JSP, JSF, Tiles, or what have you.
Actually, it is much more powerful.</p>

<p>Using this approach we literally remove the entire rendering layer
(&quot;View&quot; in the MVC paradigm) from the server and move it to the browser.</p>

<p>If we can make it possible, the web server will expose just a RESTful API,
and every response page will have an XSL stylesheet attached. What do
we gain? We&#39;ll discuss later, at the end of the post. Now, let&#39;s see
what problems we will face:</p>

<ol>
<li><p>JSON doesn&#39;t have a rendering layer. There is no such thing
as <a href="/2015/11/16/json-vs-xml.html">XSLT</a> for JSON.
So, we will have to forget about JSON and stay
with XML only. For me, this sounds perfectly all right. Others
don&#39;t like XML and prefer to work with JSON only.
Never understood them :)</p></li>
<li><p>XSLT 2.0 is not supported by all browsers. Even XSLT 1.0 is
only supported by some of them. For example, Internet Explorer 8 doesn&#39;t
support XSLT at all.</p></li>
<li><p>Browsers support only <code>GET</code> and <code>POST</code> HTTP methods, while
traditional RESTful API-s exploit also, at least, <code>PUT</code> and <code>DELETE</code>.</p></li>
</ol>

<p>The first problem is not really a problem. It&#39;s just a matter
of taste (and level of education). The last two problems are much
more serious. Let&#39;s discuss them.</p>

<h2 id="xsl-transformation-on-the-server">XSL Transformation on the Server</h2>

<p>XSLT is not supported by some browsers. How do we solve this?</p>

<p>I think that the best approach is to parse the <code>User-Agent</code> HTTP header
in every request and make a guess, whether this particular version
of the browser supports XSLT or not. It&#39;s not so difficult to do,
since this compatibility information is public.</p>

<p>If the browser doesn&#39;t support XSLT, we can do the transformation
on the server side. We already have the XML with data, generated by the server,
and we already have the XSL attached to it. All we need to do is to apply
the latter to the former and obtain an HTML page. Then, we return the HTML to
the browser.</p>

<p>Besides that, we can also pay attention to the <code>Accept</code> header. If it is
set to <code>application/xml</code> or <code>text/xml</code>, we return XML, no matter what
<code>User-Agent</code> is saying. This means, basically, that some API client
is talking to us, not a browser. And this client is not interested in HTML,
but in pure data in XML format.</p>

<h2 id="post-instead-of-put">POST Instead of PUT</h2>

<p>There is no workaround for this. Browsers don&#39;t know anything about <code>PUT</code> or <code>DELETE</code>.
So, we should also forget them in our RESTful API-s. We should design
our API using only two methods: <code>GET</code> and <code>POST</code>. Is this even possible?
Yes. Why not? It won&#39;t look as fancy as with all six methods (some API-s
also use <code>OPTIONS</code> and <code>HEAD</code>), but it will work.</p>

<h2 id="what-do-we-gain">What Do We Gain?</h2>

<p>OK, here is the question &mdash; why do we need this? What&#39;s wrong with
the way most people work now? Why can&#39;t we make a web site separate from the API?
What benefits do we get if we combine them?</p>

<p>I&#39;ve been combining them in all web applications I&#39;ve worked with since 2011.
And the biggest advantage I&#39;m experiencing is avoiding code duplication.</p>

<p>It is obvious that in the server we don&#39;t
duplicate controllers (in the case of MVC). We have one layer of controllers,
and they control both the API and the web site (since they are one thing now).</p>

<p>Avoiding code duplication is a very important achievement. Moreover,
I believe that it is the most important target for any software project.</p>

<p>These small web apps work exactly as explained above:
<a href="http://www.s3auth.com">s3auth.com</a>,
<a href="http://www.stateful.co">stateful.co</a>,
<a href="http://www.bibrarian.com">bibrarian.com</a>.
They are all open source, and you can see their source code in GitHub.</p>

      </article>
    </main>
    
    
  <div class="unprintable">
    <h2>Related Posts</h2>
    <p>You may also find these posts interesting:</p>
    <ul>
      
        <li>
          <a href="/2016/03/30/jare-instant-free-cdn.html" data-score="1.9597553291866883">Jare.io, an Instant and Free CDN</a>
        </li>
      
        <li>
          <a href="/2016/02/03/design-patterns-and-anti-patterns.html" data-score="1.6965984703398682">Design Patterns and Anti-Patterns, Love and Hate</a>
        </li>
      
        <li>
          <a href="/2015/04/16/award.html" data-score="1.629685275194691">Software Quality Award, 2015</a>
        </li>
      
        <li>
          <a href="/2015/06/25/xml-data-xsl-views-takes-framework.html" data-score="1.51359586191533">XML Data and XSL Views in Takes Framework</a>
        </li>
      
        <li>
          <a href="/2015/10/17/award-2016.html" data-score="1.2175111054415915">Software Quality Award, 2016</a>
        </li>
      
    </ul>
  </div>


    <div class="teamed-banner">
      <a href="http://www.teamed.io">
        <img src="/images/teamed-banner.jpg" alt="teamed banner"/>
      </a>
    </div>
  </div>

  <div class="disqus" role="complementary">
    <div id="disqus_thread" class="disqus-thread"></div>
    <a href="http://disqus.com" class="dsq-brlink">
      comments powered by
      <span class="logo-disqus">Disqus</span>
    </a>
  </div>

  <div class="wrapper">
    <footer class="footer">
      <p>
        &copy;
        <span itemprop="author">Yegor Bugayenko</span>,
        2014-2016
      </p>
    </footer>
  </div>

</section>

<script src="/js/post.js?0d32282"></script>
<script src="//a.disquscdn.com/embed.js?0d32282"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-1963507-32', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>
