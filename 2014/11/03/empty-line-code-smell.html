<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta charset="utf-8"/><meta name="description" content="An empty line inside your method body is an indicator of a lack of cohesion in its design and a good motivator for immediate refactoring."/><meta name="keywords" content="avoid empty lines in method body, empty line in function body, empty line in method body, empty line is bad, empty line is evil"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="twitter:account_id" content="4503599630178231"/><link rel="shortcut icon" href="/favicon.ico?c42bff8"/><link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="http://www.yegor256.com/rss.xml"/><link rel="author" href="//plus.google.com/u/0/114792568016408327418?rel=author"/><link rel="stylesheet" href="/css/layout.css?c42bff8"/><link rel="canonical" href="http://www.yegor256.com/2014/11/03/empty-line-code-smell.html"/> <script src="//code.jquery.com/jquery-2.1.0.min.js"></script><title>An Empty Line is a Code Smell</title></head><body><div class="wrapper"> <header class="header"><div> <a href="/about-me.html"> <img src="/images/yegor-bugayenko.png" class="photo" alt="photo"/> </a></div> <nav role="navigation"><ul class="menu social notranslate"><li><a href="http://www.twitter.com/yegor256" title="follow me in Twitter"><i class="icon icon-twitter notranslate"></i></a></li><li><a href="/rss" title="RSS feed"><i class="icon icon-rss notranslate"></i></a></li><li><a href="https://github.com/yegor256" title="my Github profile"><i class="icon icon-github notranslate"></i></a></li><li><a href="http://stackoverflow.com/users/187141/yegor256" title="my StackOverflow profile"><i class="icon icon-stackoverflow notranslate"></i></a></li><li><a href="https://www.facebook.com/yegor.bugayenko" title="follow me in Facebook"><i class="icon icon-facebook notranslate"></i></a></li><li><a href="https://plus.google.com/+YegorBugayenko/posts" title="follow me in Google+"><i class="icon icon-googleplus notranslate"></i></a></li><li><a href="https://www.linkedin.com/in/yegor256" title="my LinkedIn profile"><i class="icon icon-linkedin notranslate"></i></a></li><li><a href="http://www.youtube.com/user/yegor256a" title="my Youtube video channel"><i class="icon icon-youtube notranslate"></i></a></li><li><a href="mailto:yegor@teamed.io" title="yegor@teamed.io"><i class="icon icon-mail notranslate"></i></a></li></ul><ul class="menu"><li> <a href="/best.html" title="best articles to read">12 best articles</a> · <a href="/contents.html" title="blog contents">all 81</a> · <a href="/" title="home page">home page</a></li></ul> </nav><div id="search"> <input id="search-query" class="field field-text" name="q" placeholder="Search" autocomplete="off"/><div id="search-results" style="display:none"><div class="entries"></div></div></div> <script id="search-results-template" type="text/mustache">
          {{#entries}}
            <div>
              <a href="{{url}}">{{title}}</a>
            </div>
          {{/entries}}
        </script></header></div> <section itemscope itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <code>http://www.yegor256.com/2014/11/03/empty-line-code-smell.html</code></p><h1 itemprop="name">An Empty Line is a Code Smell</h1><ul class="subline"><li> <time itemprop="datePublished" datetime="2014-11-03T00:00:00+00:00"> 3 November 2014 </time></li><li class="printable">Yegor Bugayenko</li><li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/11/03/empty-line-code-smell.html#disqus_thread">comments</a></li></ul><p class="unprintable"><a href='/tag/design.html' class='tag notranslate'>design</a></p><div class="buttons notranslate"> <nav class="share" role="navigation"> <a href="http://www.facebook.com/sharer/sharer.php?u=http://www.yegor256.com/2014/11/03/empty-line-code-smell.html" title="Share on Facebook" class="button"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate"></i> </a> <a href="https://twitter.com/share?url=http://www.yegor256.com/2014/11/03/empty-line-code-smell.html&amp;text=An+Empty+Line+is+a+Code+Smell" title="Share on Twitter" class="button"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate"></i> </a> <a href="https://plus.google.com/share?url=http://www.yegor256.com/2014/11/03/empty-line-code-smell.html" title="Share on Google+" class="button"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate"></i> </a> <a href="https://www.linkedin.com/cws/share?url=http://www.yegor256.com/2014/11/03/empty-line-code-smell.html" title="Share on LinkedIn" class="button"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate"></i> </a> <a href="http://www.stumbleupon.com/submit?url=http://www.yegor256.com/2014/11/03/empty-line-code-smell.html&amp;title=An+Empty+Line+is+a+Code+Smell" title="Share on StumbleUpon" class="button"> <span class="count count-stumbleupon">0</span> <i class="icon icon-stumbleupon notranslate"></i> </a> <a href="http://del.icio.us/post?url=http://www.yegor256.com/2014/11/03/empty-line-code-smell.html&amp;title=An+Empty+Line+is+a+Code+Smell" title="Share on Delicious" class="button"> <span class="count count-delicious">0</span> <i class="icon icon-delicious notranslate"></i> </a> <a href="http://digg.com/submit?phase=2&amp;url=http://www.yegor256.com/2014/11/03/empty-line-code-smell.html&amp;title=An+Empty+Line+is+a+Code+Smell" title="Share on Digg" class="button"> <span class="count count-digg">0</span> <i class="icon icon-digg notranslate"></i> </a> <a href="http://reddit.com/submit?url=http://www.yegor256.com/2014/11/03/empty-line-code-smell.html%3F2014-44&amp;title=An+Empty+Line+is+a+Code+Smell" title="Share on Reddit" class="button"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=http://www.yegor256.com/2014/11/03/empty-line-code-smell.html%3F2014-44&amp;t=An+Empty+Line+is+a+Code+Smell" title="Share on Hacker News" class="button"> <i class="icon icon-hackernews notranslate"></i> </a> </nav></div> </header> <main role="main"> <article class="main" role="article" itemprop="articleBody"><p>The subject may sound like a joke, but it is not. An empty line, used as a separator of instructions in an object method, is a <a href="https://en.wikipedia.org/wiki/Code_smell">code smell</a>. Why? In short, because a method should <strong>not</strong> contain "parts". A method should always <a href="https://en.wikipedia.org/wiki/Single_responsibility_principle">do one thing</a> and its functional decomposition should be done by language constructs (for example, new methods), and <strong>never</strong> by empty lines.</p><p>Look at this Java class (it does smell, doesn't it?):</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">final</span> <span class="kd">class</span> <span class="nc">TextFile</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">File</span> <span class="n">file</span><span class="o">;</span>
  <span class="n">TextFile</span><span class="o">(</span><span class="n">File</span> <span class="n">src</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">file</span> <span class="o">=</span> <span class="n">src</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">grep</span><span class="o">(</span><span class="n">Pattern</span> <span class="n">regex</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">lines</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">&lt;&gt;();</span>
    <span class="k">try</span> <span class="o">(</span><span class="n">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nf">FileReader</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">file</span><span class="o">)))</span> <span class="o">{</span>
      <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">line</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">break</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">lines</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">}</span>

    <span class="kt">int</span> <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">line</span> <span class="o">:</span> <span class="n">lines</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">regex</span><span class="o">.</span><span class="na">matcher</span><span class="o">(</span><span class="n">line</span><span class="o">).</span><span class="na">matches</span><span class="o">())</span> <span class="o">{</span>
        <span class="o">++</span><span class="n">total</span><span class="o">;</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">total</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></div><p>This method first loads the content of the file. Second, it counts how many lines match the regular expression provided. So why does method <code>grep</code> smell? Because it does two things instead of one — it loads and it greps.</p><p>If we make a rule, to avoid empty lines in method bodies, the method will have to be refactored in order to preserve the "separation of concerns" introduced by that empty line:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">final</span> <span class="kd">class</span> <span class="nc">TextFile</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">File</span> <span class="n">file</span><span class="o">;</span>
  <span class="n">TextFile</span><span class="o">(</span><span class="n">File</span> <span class="n">src</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">file</span> <span class="o">=</span> <span class="n">src</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">grep</span><span class="o">(</span><span class="n">Pattern</span> <span class="n">regex</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">count</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">lines</span><span class="o">(),</span> <span class="n">regex</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="nf">count</span><span class="o">(</span><span class="n">Iterable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">lines</span><span class="o">,</span> <span class="n">Pattern</span> <span class="n">regex</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">line</span> <span class="o">:</span> <span class="n">lines</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">regex</span><span class="o">.</span><span class="na">matcher</span><span class="o">(</span><span class="n">line</span><span class="o">).</span><span class="na">matches</span><span class="o">())</span> <span class="o">{</span>
        <span class="o">++</span><span class="n">total</span><span class="o">;</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">total</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">private</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">lines</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">lines</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">&lt;&gt;();</span>
    <span class="k">try</span> <span class="o">(</span><span class="n">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nf">FileReader</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">file</span><span class="o">)))</span> <span class="o">{</span>
      <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">line</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">break</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">lines</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="k">return</span> <span class="n">lines</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></div><p>I believe it is obvious that this new class has methods that are much more cohesive and readable. Now every method is doing exactly one thing, and it's easy to understand which thing it is.</p><p>This idea about avoiding empty lines is also applicable to other languages, not just Java/C++/Ruby, etc. For example, this CSS code is definitely begging for refactoring:</p><div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.container</span> <span class="p">{</span>
  <span class="k">width</span><span class="o">:</span> <span class="m">80%</span><span class="p">;</span>
  <span class="k">margin-left</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
  <span class="k">margin-right</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>

  <span class="k">font-size</span><span class="o">:</span> <span class="m">2em</span><span class="p">;</span>
  <span class="k">font-weight</span><span class="o">:</span> <span class="k">bold</span><span class="p">;</span>
<span class="p">}</span></code></pre></div><p>The empty line here is telling us (screaming at us, actually) that this <code>.container</code> class is too complex and has to be decomposed into two classes:</p><div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.wide</span> <span class="p">{</span>
  <span class="k">width</span><span class="o">:</span> <span class="m">80%</span><span class="p">;</span>
  <span class="k">margin-left</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
  <span class="k">margin-right</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.important</span> <span class="p">{</span>
  <span class="k">font-size</span><span class="o">:</span> <span class="m">2em</span><span class="p">;</span>
  <span class="k">font-weight</span><span class="o">:</span> <span class="k">bold</span><span class="p">;</span>
<span class="p">}</span></code></pre></div><p>Unfortunately, using empty lines to separate blocks of code is a very common habit. Moreover, very often I see empty blocks of two or even three lines, which are all playing this evil role of a separator of concerns.</p><p>Needless to say, a properly designed class must have just a few public methods and a properly designed method must have up to ten instructions (according to Bob Martin). Empty lines inside methods encourage us to break this awesome rule and turn them into multi-page poems.</p><p>Of course, it's easier to just click <code>enter</code> a few times and continue to code right in the same method, instead of thinking and refactoring first. This laziness will eventually lead to code that is hardly maintainable at all.</p><p>To prevent this from happening in your projects, stop using empty lines inside methods, completely. Ideally, prohibit them in your automated build. In <a href="/2014/08/13/strict-code-quality-control.html">qulice.com</a>, a static analysis tool we're using in all Java projects, we created a custom Checkstyle check that prohibits empty lines in every method.</p></article> </main></div><div class="disqus" role="complementary"><div id="disqus_thread"></div> <a href="http://disqus.com" class="dsq-brlink"> comments powered by <span class="logo-disqus">Disqus</span> </a> <script src="//yegor256.disqus.com/embed.js" async></script></div><div class="wrapper"> <footer class="footer"><p> © <span itemprop="author">Yegor Bugayenko</span>, 2014</p> </footer></div></section><script src="/js/post.js?c42bff8"></script><script src="/js/global.js?c42bff8"></script><script src="//yegor256.disqus.com/count.js" async></script><script src="/js/ext/search.min.js?c42bff8"></script><script src="//stats.g.doubleclick.net/dc.js" async></script></body></html>