<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US"><head><meta charset="utf-8"/><meta name="description" content="String concatenation in Java is a bad practice; this article explains why and how to avoid it to create cleaner code"/><meta name="keywords" content="alternative of string concatenation, avoid string concatenation, bad practice java, best practice string concatenation, formatter vs concatenation, how to avoid string concatenation, java string concatenation, replacement of string concatenation, string concatenation is a bad practice, string concatenation is evil, string.format vs concatenation"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="twitter:account_id" content="4503599630178231"/><link rel="search" type="application/opensearchdescription+xml" href="opensearch.xml" title="yegor256"/><link rel="shortcut icon" href="/favicon.ico?47be2b4"/><link rel="apple-touch-icon" href="/favicon.ico?47be2b4"/><link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="http://www.yegor256.com/rss.xml"/><link rel="author" href="http://plus.google.com/u/0/114792568016408327418?rel=author"/><link rel="publisher" href="http://plus.google.com/u/0/114792568016408327418"/><link rel="stylesheet" href="/css/layout.css?47be2b4"/><link rel="stylesheet" href="//img.teamed.io/yegor256/icons.css?47be2b4"/><link rel="canonical" href="http://www.yegor256.com/2014/06/19/avoid-string-concatenation.html"/><title>Avoid String Concatenation - Yegor Bugayenko</title></head><body><div class="wrapper"> <header class="header"><div> <a href="/about-me.html"> <img src="/images/yegor-bugayenko.png" class="photo" alt="photo of Yegor Bugayenko"/> </a></div> <nav role="navigation"><ul class="menu social notranslate"><li><a href="http://www.twitter.com/yegor256" title="follow me in Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li><li><a href="/rss" title="RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li><li><a href="https://github.com/yegor256" title="my Github profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li><li><a href="http://stackoverflow.com/users/187141/yegor256" title="my StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li><li><a href="https://www.facebook.com/yegor.bugayenko" title="follow me in Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li><li><a href="https://plus.google.com/+YegorBugayenko/posts" title="follow me in Google+"><i class="icon icon-googleplus notranslate" aria-hidden="true"></i></a></li><li><a href="https://www.linkedin.com/in/yegor256" title="my LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li><li><a href="http://www.youtube.com/user/technoparkcorp" title="my Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li><li><a href="mailto:yegor@teamed.io" title="yegor@teamed.io"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"><li> <a href="/best.html" title="best articles to read">12 best articles</a> · <a href="/contents.html" title="blog contents">all 120</a> · <a href="/" title="home page">home page</a></li></ul><ul class="menu"><li> Win <strong style="font-size:2em;color:#81b341"> <a href="/award.html" title="software quality award">$4,096</a> </strong> for Your Open Source Project!</li></ul> </nav><div id="search"> <input id="search-query" class="field field-text" name="q" placeholder="Search" autocomplete="off"/><div id="search-results" style="display:none"><div class="entries"></div></div></div><div style="color:#033404;text-align:left;margin:2em 0"> <img src="/images/2015/06/webinar-3.gif" style="width:64px;height:64px;float:left;margin-right:1em" alt="webinar logo"/> The <a href="https://plus.google.com/events/cnt6o73pqehec7dqqeuvlev7ff4"><strong>3rd webinar</strong></a> will happen on the 3rd of June, at 11am PST; one hour we'll discuss why <a href="https://plus.google.com/events/cnt6o73pqehec7dqqeuvlev7ff4">NULL is a terrible idea in object-oriented programming</a>.</div> <script id="search-results-template" type="text/mustache">
          {{#entries}}
            <div>
              <a href="{{url}}">{{title}}</a>
            </div>
          {{/entries}}
        </script></header></div> <section itemscope itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <code>http://www.yegor256.com/2014/06/19/avoid-string-concatenation.html</code></p><h1 itemprop="name">Avoid String Concatenation</h1><ul class="subline"><li> <time itemprop="datePublished" datetime="2014-06-19T00:00:00+00:00"> 19 June 2014 </time></li><li><a href='https://github.com/yegor256/blog/commits/master/_posts/2014/jun/2014-06-19-avoid-string-concatenation.md'>modified</a> on <time itemprop='dateModified' datetime='2014-10-24T13:09:54+0000'>24 October 2014</time></li><li class="printable">Yegor Bugayenko</li><li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/06/19/avoid-string-concatenation.html#disqus_thread">comments</a></li></ul><p class="unprintable"><a href='/tag/java.html' class='tag notranslate'>java</a> <a href='/tag/oop.html' class='tag notranslate'>oop</a> <a href='/tag/anti-pattern.html' class='tag notranslate'>anti-pattern</a></p><div class="buttons notranslate desktop-only"> <nav class="share" role="navigation"> <a href="http://www.facebook.com/sharer/sharer.php?u=http://www.yegor256.com/2014/06/19/avoid-string-concatenation.html" title="Share on Facebook" class="button"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=http://www.yegor256.com/2014/06/19/avoid-string-concatenation.html&amp;text=Avoid+String+Concatenation" title="Share on Twitter" class="button"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=http://www.yegor256.com/2014/06/19/avoid-string-concatenation.html" title="Share on Google+" class="button"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=http://www.yegor256.com/2014/06/19/avoid-string-concatenation.html" title="Share on LinkedIn" class="button"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://www.stumbleupon.com/submit?url=http://www.yegor256.com/2014/06/19/avoid-string-concatenation.html&amp;title=Avoid+String+Concatenation" title="Share on StumbleUpon" class="button"> <span class="count count-stumbleupon">0</span> <i class="icon icon-stumbleupon notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=http://www.yegor256.com/2014/06/19/avoid-string-concatenation.html%3F2014-24&amp;title=Avoid+String+Concatenation" title="Share on Reddit" class="button"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=http://www.yegor256.com/2014/06/19/avoid-string-concatenation.html%3F2014-24&amp;t=Avoid+String+Concatenation" title="Share on Hacker News" class="button"> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav></div> </header> <main role="main"> <article class="main" role="article" itemprop="articleBody"><p>This is "string concatentation", and it is a bad practice:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// bad practice, don't reuse!</span>
<span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="s">"Hello, "</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s">"!"</span><span class="o">;</span></code></pre></div><p>Why? Some may say that it is slow, mostly because parts of the resulting string are copied multiple times. Indeed, on every <code>+</code> operator, <code>String</code> class allocates a new block in memory and copies everything it has into it; plus a suffix being concatenated. This is true, but this is not the point here.</p><p>Actually, I don't think performance in this case is a big issue. Moreover, there were <a href="http://stackoverflow.com/questions/925423">multiple experiments</a> showing that concatenation is not that slow when compared to other string building methods and sometimes is even faster.</p><p>Some say that concatenated strings are not localizable because in different languages text blocks in a phrase may be positioned in a different order. The example above can't be translated to, say, Russian, where we would want to put a name in front of "привет". We will need to localize the entire block of code, instead of just translating a phrase.</p><p>However, my point here is different. I strongly recommend avoiding string concatenation because it is <strong>less readable</strong> than other methods of joining texts together.</p><p>Let's see these alternative methods. I'd recommend three of them (in order of preference): <code>String.format()</code>, Apache <code>StringUtils</code> and Guava <code>Joiner</code>.</p><p>There is also a <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html"><code>StringBuilder</code></a>, but I don't find it as attractive as <code>StringUtils</code>. It is a useful builder of strings, but not a proper replacer or string concatenation tool when readability is important.</p><h2 id="string.format()">String.format()</h2><p><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29"><code>String.format()</code></a> is my favorite option. It makes text phrases easy to understand and modify. It is a static utility method that mirrors <a href="http://www.cplusplus.com/reference/cstdio/sprintf/"><code>sprintf()</code></a> from C. It allows you to build a string using a pattern and substitutors:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"Hello, %s!"</span><span class="o">,</span> <span class="n">name</span><span class="o">);</span></code></pre></div><p>When the text is longer, the advantages of the formatter become much more obvious. Look at this ugly code:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">String</span> <span class="n">msg</span> <span class="o">=</span> <span class="s">"Dear "</span> <span class="o">+</span> <span class="n">customer</span><span class="o">.</span><span class="na">name</span><span class="o">()</span>
  <span class="o">+</span> <span class="s">", your order #"</span> <span class="o">+</span> <span class="n">order</span><span class="o">.</span><span class="na">number</span><span class="o">()</span>
  <span class="o">+</span> <span class="s">" has been shipped at "</span> <span class="o">+</span> <span class="n">shipment</span><span class="o">.</span><span class="na">date</span><span class="o">()</span>
  <span class="o">+</span> <span class="s">"!"</span><span class="o">;</span></code></pre></div><p>This one looks much more beautiful doesn’t it:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">String</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
  <span class="s">"Dear %1$s, your order #%2$d has been shipped at %3$tR!"</span><span class="o">,</span>
  <span class="n">customer</span><span class="o">.</span><span class="na">name</span><span class="o">(),</span> <span class="n">order</span><span class="o">.</span><span class="na">number</span><span class="o">(),</span> <span class="n">shipment</span><span class="o">.</span><span class="na">date</span><span class="o">()</span>
<span class="o">);</span></code></pre></div><p>Please note that I'm using argument indexes in order to make the pattern even more localizable. Let's say, I want to translate it to Greek. This is how will it look:</p><div class="highlight"><pre><code class="language-text" data-lang="text">Αγαπητέ %1$s, στις %3$tR στείλαμε την παραγγελία σου με αριθμό #%2$d!</code></pre></div><p>I'm changing the order of substitutions in the pattern, but not in the actual list of methods arguments.</p><h2 id="apache-stringutils.join()">Apache StringUtils.join()</h2><p>When the text is rather long (longer than your screen width), I would recommend that you use the utility class <a href="http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html"><code>StringUtils</code></a> from Apache <a href="http://commons.apache.org/proper/commons-lang/">commons-lang3</a>:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">org.apache.commons.lang3.StringUtils</span><span class="o">;</span>
<span class="n">String</span> <span class="n">xml</span> <span class="o">=</span> <span class="n">StringUtils</span><span class="o">.</span><span class="na">join</span><span class="o">(</span>
  <span class="s">"&lt;?xml version='1.0'?&gt;"</span><span class="o">,</span>
  <span class="s">"&lt;html&gt;&lt;body&gt;"</span><span class="o">,</span>
  <span class="s">"&lt;p&gt;This is a test XHTML document,"</span><span class="o">,</span>
  <span class="s">" which would look ugly,"</span><span class="o">,</span>
  <span class="s">" if we would use a single line,"</span>
  <span class="s">" or string concatenation or String format().&lt;/p&gt;"</span>
  <span class="s">"&lt;/body&gt;&lt;/html&gt;"</span>
<span class="o">);</span></code></pre></div><p>The need to include an additional JAR dependency to your classpath may be considered a downside with this method (get its latest versions in <a href="http://search.maven.org/">Maven Central</a>):</p><div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.apache.commons<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>commons-lang3<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre></div><h2 id="guava-joiner">Guava Joiner</h2><p>Similar functionality is provided by <a href="http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Joiner.html"><code>Joiner</code></a> from Google <a href="https://code.google.com/p/guava-libraries/">Guava</a>:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">com.google.common.base.Joiner</span><span class="o">;</span>
<span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="n">Joiner</span><span class="o">.</span><span class="na">on</span><span class="o">(</span><span class="err">''</span><span class="o">).</span><span class="na">join</span><span class="o">(</span>
  <span class="s">"WE HAVE BUNNY.\n"</span><span class="o">,</span>
  <span class="s">"GATHER ONE MILLION DOLLARS IN UNMARKED "</span><span class="o">,</span>
  <span class="s">"NON-CONSECUTIVE TWENTIES.\n"</span><span class="o">,</span>
  <span class="s">"AWAIT INSTRUCTIONS.\n"</span><span class="o">,</span>
  <span class="s">"NO FUNNY STUFF"</span>
<span class="o">);</span></code></pre></div><p>It is a bit less convenient than <code>StringUtils</code> since you always have to provide a joiner (character or a string placed between text blocks).</p><p>Again, a dependency is required in this case:</p><div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.google.guava<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>guava<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre></div><p>Yes, in most cases, all of these methods work slower than a plain simple concatenation. However, I strongly believe that <strong>computers are cheaper than people</strong>. What I mean is that the time spent by programmers understanding and modifying ugly code is much more expensive than a cost of an additional server that will make beautifully written code work faster.</p><p>If you know any other methods of avoiding string concatenation, please comment below.</p></article> </main><div class="unprintable"><h2>Related Posts</h2><p>You may also find these posts interesting:</p><ul><li><a href="/2014/04/27/typical-mistakes-in-java-code.html">Typical Mistakes in Java Code</a></li><li><a href="/2014/10/03/di-containers-are-evil.html">DI Containers are Code Polluters</a></li><li><a href="/2014/09/16/getters-and-setters-are-evil.html">Getters/Setters. Evil. Period.</a></li><li><a href="/2014/09/10/anti-patterns-in-oop.html">Anti-Patterns in OOP</a></li><li><a href="/2014/06/09/objects-should-be-immutable.html">Objects Should Be Immutable</a></li></ul></div></div><div class="disqus" role="complementary"><div id="disqus_thread"></div> <a href="http://disqus.com" class="dsq-brlink"> comments powered by <span class="logo-disqus">Disqus</span> </a></div><div class="wrapper"> <footer class="footer"><p> © <span itemprop="author">Yegor Bugayenko</span>, 2014-2015</p> </footer></div></section><script src="http://code.jquery.com/jquery-2.1.0.min.js"></script><script src="/js/ext/search.min.js?47be2b4"></script><script src="/js/global.js?47be2b4" async defer></script><script src="/js/post.js?47be2b4" async defer></script></body></html>