<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta charset="utf-8"/><meta name="description" content="XML+XSLT is a useful combination for web interfaces and RESTful APIs at the same time. This article explains how it works and argues in favor of its use."/><meta name="keywords" content="java web framework, rexsl framework, web framework, xml xsl html web, xml xsl web page, xml xslt java web framework, xml xslt web framework, xsl web framework, xsl web framework java, xsl web java, xslt java web framework"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="twitter:account_id" content="4503599630178231"/><link rel="search" type="application/opensearchdescription+xml" href="opensearch.xml" title="yegor256"/><link rel="shortcut icon" href="/favicon.ico?0ae5880"/><link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="http://www.yegor256.com/rss.xml"/><link rel="author" href="http://plus.google.com/u/0/114792568016408327418?rel=author"/><link rel="stylesheet" href="/css/layout.css?0ae5880"/><link rel="stylesheet" href="//img.teamed.io/yegor256/icons.css?0ae5880"/><link rel="canonical" href="http://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html"/><title>XML+XSLT in a Browser - Yegor Bugayenko</title></head><body><div class="wrapper"> <header class="header"><div> <a href="/about-me.html"> <img src="/images/yegor-bugayenko.png" class="photo" alt="photo"/> </a></div> <nav role="navigation"><ul class="menu social notranslate"><li><a href="http://www.twitter.com/yegor256" title="follow me in Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li><li><a href="/rss" title="RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li><li><a href="https://github.com/yegor256" title="my Github profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li><li><a href="http://stackoverflow.com/users/187141/yegor256" title="my StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li><li><a href="https://www.facebook.com/yegor.bugayenko" title="follow me in Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li><li><a href="https://plus.google.com/+YegorBugayenko/posts" title="follow me in Google+"><i class="icon icon-googleplus notranslate" aria-hidden="true"></i></a></li><li><a href="https://www.linkedin.com/in/yegor256" title="my LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li><li><a href="http://www.youtube.com/user/yegor256a" title="my Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li><li><a href="mailto:yegor@teamed.io" title="yegor@teamed.io"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"><li> <a href="/best.html" title="best articles to read">12 best articles</a> · <a href="/contents.html" title="blog contents">all 101</a> · <a href="/" title="home page">home page</a></li></ul> </nav><div id="search"> <input id="search-query" class="field field-text" name="q" placeholder="Search" autocomplete="off"/><div id="search-results" style="display:none"><div class="entries"></div></div></div> <script id="search-results-template" type="text/mustache">
          {{#entries}}
            <div>
              <a href="{{url}}">{{title}}</a>
            </div>
          {{/entries}}
        </script></header></div> <section itemscope itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <code>http://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html</code></p><h1 itemprop="name">XML+XSLT in a Browser</h1><ul class="subline"><li> <time itemprop="datePublished" datetime="2014-06-25T00:00:00+00:00"> 25 June 2014 </time></li><li><a href='https://github.com/yegor256/blog/commits/master/_posts/2014/jun/2014-06-25-xml-and-xslt-in-browser.md'>modified</a> on <time itemprop='dateModified' datetime='2014-10-20T08:48:38+0000'>20 October 2014</time></li><li class="printable">Yegor Bugayenko</li><li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html#disqus_thread">comments</a></li></ul><p class="unprintable"><a href='/tag/xslt.html' class='tag notranslate'>xslt</a> <a href='/tag/java.html' class='tag notranslate'>java</a> <a href='/tag/restful.html' class='tag notranslate'>restful</a></p><div class="buttons notranslate desktop-only"> <nav class="share" role="navigation"> <a href="http://www.facebook.com/sharer/sharer.php?u=http://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html" title="Share on Facebook" class="button"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=http://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html&amp;text=XML%2BXSLT+in+a+Browser" title="Share on Twitter" class="button"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=http://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html" title="Share on Google+" class="button"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=http://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html" title="Share on LinkedIn" class="button"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://www.stumbleupon.com/submit?url=http://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html&amp;title=XML%2BXSLT+in+a+Browser" title="Share on StumbleUpon" class="button"> <span class="count count-stumbleupon">0</span> <i class="icon icon-stumbleupon notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=http://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html%3F2014-25&amp;title=XML%2BXSLT+in+a+Browser" title="Share on Reddit" class="button"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=http://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html%3F2014-25&amp;t=XML%2BXSLT+in+a+Browser" title="Share on Hacker News" class="button"> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav></div> </header> <main role="main"> <article class="main" role="article" itemprop="articleBody"><p><a href="http://en.wikipedia.org/wiki/Separation_of_presentation_and_content">Separating data and their presentation</a> is a great concept. Take HTML and CSS for example. HTML is supposed to have pure data and CSS is supposed to format that data in order to make it readable by a human. Years ago, that was probably the intention of HTML/CSS, but in reality it doesn't work like that. Mostly because CSS is not powerful enough.</p><p>We still have to format our data using HTML tags, while CSS can help slightly with positioning and decorating.</p><p>On the other hand, XML with <a href="http://en.wikipedia.org/wiki/XSLT">XSLT</a> implements perfectly the idea of separating data and presentation. XML documents, like HTML, are supposed to contain data only without any information about positioning or formatting. XSL stylesheets position and decorate the data. XSL is a much more powerful language. That's why it's possible to avoid any formatting inside XML.</p><p>The latest versions of Chrome, Safari, FireFox and IE all support this mechanism. When a browser retrieves an XML document from a server, and the document has an XSL stylesheet <a href="http://www.w3.org/TR/xml-stylesheet/">associated</a> with it — the browser transforms XML into HTML on-fly.</p><h2 id="working-example">Working Example</h2><p>Let's review a simple Java web application that works this way. It is using <a href="http://www.rexsl.com">ReXSL framework</a> that makes this mechanism possible. In the next post, I'll explain how ReXSL works. For now, though, let's focus on the idea of delivering bare data in XML and formatting it with an XSL stylesheet.</p><p>Open <a href="http://www.stateful.co">http://www.stateful.co</a> — it is a collection of stateful web primitives, explained in the <a href="/2014/05/18/cloud-autoincrement-counters.html">Atomic Counters at Stateful.co</a> article.</p><p>Open it in Chrome or Safari. When you do, you should see a normal web page with a logo, some text, some links, a footer, etc. Now check its sources (I assume you know how to do this).</p><p>This is approximately what you will see (I assume you understand XML, if not, start learning it immediately):</p><div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml-stylesheet type='text/xsl' href='/xsl/index.xsl'?&gt;</span>
<span class="nt">&lt;page</span> <span class="na">date=</span><span class="s">"2014-06-15T15:30:49.521Z"</span> <span class="na">ip=</span><span class="s">"10.168.29.135"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;menu&gt;</span>home<span class="nt">&lt;/menu&gt;</span>
  <span class="nt">&lt;documentation&gt;</span>.. some text here ..<span class="nt">&lt;/documentation&gt;</span>
  <span class="nt">&lt;version&gt;</span>
    <span class="nt">&lt;name&gt;</span>1.4<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;revision&gt;</span>5c7b5af<span class="nt">&lt;/revision&gt;</span>
    <span class="nt">&lt;date&gt;</span>2014-05-29 07:58<span class="nt">&lt;/date&gt;</span>
  <span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;links&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"..."</span> <span class="na">rel=</span><span class="s">"rexsl:google"</span> <span class="na">type=</span><span class="s">"text/xml"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"..."</span> <span class="na">rel=</span><span class="s">"rexsl:github"</span> <span class="na">type=</span><span class="s">"text/xml"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"..."</span> <span class="na">rel=</span><span class="s">"rexsl:facebook"</span> <span class="na">type=</span><span class="s">"text/xml"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/links&gt;</span>
  <span class="nt">&lt;millis&gt;</span>70<span class="nt">&lt;/millis&gt;</span>
<span class="nt">&lt;/page&gt;</span></code></pre></div><p>As you see, it is a proper XML document with attributes, elements and data. It contains absolutely no information about how its elements have to be presented to an end-user. Actually, this document is more suitable for machine parsing instead of reading by a human.</p><p>The document contains data, which is important for its requestor. It's up to the requestor on how to render the data or to not render it at all.</p><p>Its second line <a href="http://www.w3.org/TR/xml-stylesheet/">associates</a> the document with the XSL stylesheet <code>/xsl/index.xsl</code> that is loaded by the browser separately:</p><div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml-stylesheet type='text/xsl' href='/xsl/index.xsl'?&gt;</span></code></pre></div><p>Open developer tools in Chrome and you will see that right after the page is loaded, the browser loads the XSL stylesheet and then all other resources including a few CSS stylesheets, jQuery and an SVG logo:</p><figure><img src='http://www.yegor256.com/images/2014/06/xslt-loading-order-in-chrome.png' style='width:600px' alt='figure'/></figure><p><code>index.xsl</code> includes <code>layout.xsl</code>, that's why it is loaded right after.</p><p>Let's consider an example of <code>index.xsl</code> (in reality it is much more complex, check <a href="https://github.com/sttc/stateful/blob/master/src/main/webapp/xsl/layout.xsl"><code>layout.xsl</code></a>. For example:</p><div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;xsl:stylesheet</span> <span class="na">version=</span><span class="s">"2.0"</span>
  <span class="na">xmlns:xsl=</span><span class="s">"http://www.w3.org/1999/XSL/Transform"</span>
  <span class="na">xmlns=</span><span class="s">"http://www.w3.org/1999/xhtml"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsl:template</span> <span class="na">match=</span><span class="s">"page"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;html&gt;</span>
      <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;p&gt;</span>
          Current version of the application is
          <span class="nt">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">"version/name"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/html&gt;</span>
  <span class="nt">&lt;/xsl:template&gt;</span>
<span class="nt">&lt;/xsl:stylesheet&gt;</span></code></pre></div><p>I think it's obvious how the HTML page will look like after applying this XSL stylesheet to our XML document.</p><p>For me, this XSL looks clean and easy to understand. However, I often hear people say that XSLT is a hard-to-understand programming language. I don't find it hard to understand at all. Of course, I'm not using all of its features. But, for simple page rendering, all I need to know are a few simple commands and the principle of XML transformation.</p><h2 id="why-not-a-templating-engine?">Why Not a Templating Engine?</h2><p>Now, why is this approach better than all that widely use Java templating engines, including <a href="http://en.wikipedia.org/wiki/JavaServer_Pages">JSP</a>, <a href="http://en.wikipedia.org/wiki/JavaServer_Faces">JSF</a>, <a href="http://velocity.apache.org/engine/devel/">Velocity</a>, <a href="http://freemarker.org/">FreeMarker</a>, <a href="http://tiles.apache.org/">Tiles</a>, etc?</p><p>Well, I see a number of reasons. But, the most important are:</p><ol><li><p><strong>Web UI and API are same pages</strong>. There is no need to develop separate pages for RESTful API — Web user interface, being accessed by a computer, is an API. In my experience, this leads to massive avoidance of code duplication.</p></li><li><p><strong>XSL is testable by itself without a server</strong>. In order to test how our web site will look with certain data, we just create a new XML document with necessary test data, associate it with an XSL and open it in a browser. We can also modify XML and refresh the page in browser. This makes the work of HTML/CSS designer much easier and independent of programmers.</p></li><li><p><strong>XSL is a powerful functional language</strong>. Compared with all other templating engines, which look mostly like workarounds, XSL is a complete and well-designed environment. Writing XSL (after you get used to its syntax and programming concepts) is a pleasure in itself. You're not injecting instructions into a HTML document (like in JSP and all others). Instead, you are programming transformation of data into presentation — a different mindset and much better feeling.</p></li><li><p><strong>XML output is perfectly testable</strong>. A controller in MVC that generates an XML document with all data required for the XSL stylesheet can easily be tested in a single unit test using simple XPath expressions. Testing of a controller that injects data into a templating engine is a much more complex operation — even impossible sometimes. I'm also writing in PHP and Ruby. They have exactly the same problems — even though their templating engines are much more powerful due to the interpretation nature of the languages.</p></li></ol><h2 id="is-it-fully-supported?">Is It Fully Supported?</h2><p>Everything would be great if all browsers would support XML+XSL rendering. However, this is far from being true. Only the latest versions of modern browsers support XSL. Check <a href="http://greenbytes.de/tech/tc/xslt/">this comparison</a> done by Julian Reschke. Besides that, XSLT 2.0 is <a href="http://stackoverflow.com/questions/6282340/which-browsers-support-xslt-2-0-already">not supported</a> at all.</p><p>There is a workaround, though. We can understand which browser is making a request (via its <a href="http://en.wikipedia.org/wiki/User_agent"><code>User-Agent</code></a> HTTP header) and transform XML into HTML on the server side. Thus, for modern browsers that support XSL, we will deliver XML and for all others — HTML.</p><p>This is exactly how <a href="http://www.rexsl.com">ReXSL framework</a> works. Open <a href="http://www.stateful.co">http://www.stateful.co</a> in Internet Explorer and you will see an HTML document, not an XML document as is the case with Chrome.</p><p>In one of the next posts, I'll explain <a href="http://www.rexsl.com">ReXSL framework</a>.</p><p>Read this one, it continues the discussion of this subject: <a href="/2014/09/09/restful-web-sites.html">RESTful API and a Web Site in the Same URL</a></p></article> </main><div class="unprintable"><h2>Related Posts</h2><p>You may also find these posts interesting:</p><ul><li><a href="/2014/09/09/restful-web-sites.html">RESTful API and a Web Site in the Same URL</a></li><li><a href="/2015/02/02/xsl-transformations-in-java.html">XSL Transformation in Java: An Easy Way</a></li><li><a href="/2015/02/05/jcabi-parent-maven-pom.html">Don't Repeat Yourself in Maven POMs; Use Jcabi-Parent</a></li><li><a href="/2015/01/21/if-then-throw-else.html">If. Then. Throw. Else. WTF?</a></li><li><a href="/2014/11/07/how-immutability-helps.html">How Immutability Helps</a></li></ul></div></div><div class="disqus" role="complementary"><div id="disqus_thread"></div> <a href="http://disqus.com" class="dsq-brlink"> comments powered by <span class="logo-disqus">Disqus</span> </a></div><div class="wrapper"> <footer class="footer"><p> © <span itemprop="author">Yegor Bugayenko</span>, 2014</p> </footer></div></section><script src="http://code.jquery.com/jquery-2.1.0.min.js"></script><script src="/js/ext/search.min.js?0ae5880"></script><script src="/js/global.js?0ae5880" async defer></script><script src="/js/post.js?0ae5880" async defer></script></body></html>