<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta charset="utf-8"/><meta name="description" content="This tutorial explains how a Java web application can be deployed to CloudBees in just one click and zero maintenance efforts, using Rultor.com, DevOps assistant"/><meta name="keywords" content="continuous delivery cloudbees, deploy in cloudbees, deploy to cloudbees, deploying to cloudbees, how to deploy a java app to cloudbees, how to host java web app, publish java web app to cloudbees"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="twitter:account_id" content="4503599630178231"/><link rel="shortcut icon" href="/favicon.ico?036e0d0"><link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="http://www.yegor256.com/rss.xml"/><link rel="author" href="//plus.google.com/u/0/114792568016408327418?rel=author"/><link rel="stylesheet" href="/css/layout.css?036e0d0"/><link rel="canonical" href="http://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html"/> <script src="//code.jquery.com/jquery-2.1.0.min.js"></script><title>How to Deploy to CloudBees, in One Click</title></head><body><div class="wrapper"> <header class="header"><div> <a href="/about-me.html"> <img src="/images/yegor-bugayenko.png" class="photo" alt="photo"/> </a></div> <nav role="navigation"><ul class="menu social"><li><a href="http://www.twitter.com/yegor256" title="follow me in Twitter"><i class="icon icon-twitter"></i></a></li><li><a href="/rss" title="RSS feed"><i class="icon icon-rss"></i></a></li><li><a href="https://github.com/yegor256" title="my Github profile"><i class="icon icon-github"></i></a></li><li><a href="http://stackoverflow.com/users/187141/yegor256" title="my StackOverflow profile"><i class="icon icon-stackoverflow"></i></a></li><li><a href="https://www.facebook.com/yegor.bugayenko" title="follow me in Facebook"><i class="icon icon-facebook"></i></a></li><li><a href="https://plus.google.com/+YegorBugayenko/posts" title="follow me in Google+"><i class="icon icon-googleplus"></i></a></li><li><a href="https://www.linkedin.com/in/yegor256" title="my LinkedIn profile"><i class="icon icon-linkedin"></i></a></li><li><a href="http://www.youtube.com/user/yegor256a" title="my Youtube video channel"><i class="icon icon-youtube"></i></a></li><li><a href="mailto:yegor@teamed.io" title="yegor@teamed.io"><i class="icon icon-mail"></i></a></li></ul><ul class="menu"><li> <a href="/best.html" title="best articles to read">12 best articles</a> (out of <a href="/contents.html" title="blog contents">73</a>) <a href="/" title="home page">home</a></li></ul> </nav><div id="search"> <input id="search-query" class="field field-text" name="q" placeholder="Search" autocomplete="off"/><div id="search-results" style="display:none"><div class="entries"></div></div></div> <script id="search-results-template" type="text/mustache">
          {{#entries}}
            <div>
              <a href="{{url}}">{{title}}</a>
            </div>
          {{/entries}}
        </script></header></div> <section itemscope itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><h1 itemprop="name">How to Deploy to CloudBees, in One Click</h1><ul class="subline"><li> <time itemprop="datePublished" datetime="2014-08-25T00:00:00+00:00"> 25 August 2014 </time></li><li> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html#disqus_thread">comments</a></li></ul><p><a href='/tag/java.html' class='tag'>java</a> <a href='/tag/rultor.html' class='tag'>rultor</a> <a href='/tag/devops.html' class='tag'>devops</a></p><div class="buttons"> <nav class="share" role="navigation"> <a href="http://www.facebook.com/sharer/sharer.php?u=http://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html" title="Share on Facebook" class="button"> <span class="count count-facebook">0</span> <i class="icon icon-facebook"></i> </a> <a href="https://twitter.com/share?url=http://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html&amp;text=How+to+Deploy+to+CloudBees%2C+in+One+Click" title="Share on Twitter" class="button"> <span class="count count-twitter">0</span> <i class="icon icon-twitter"></i> </a> <a href="https://plus.google.com/share?url=http://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html" title="Share on Google+" class="button"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus"></i> </a> <a href="https://www.linkedin.com/cws/share?url=http://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html" title="Share on LinkedIn" class="button"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin"></i> </a> <a href="http://www.stumbleupon.com/submit?url=http://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html&amp;title=How+to+Deploy+to+CloudBees%2C+in+One+Click" title="Share on StumbleUpon" class="button"> <span class="count count-stumbleupon">0</span> <i class="icon icon-stumbleupon"></i> </a> <a href="http://del.icio.us/post?url=http://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html&amp;title=How+to+Deploy+to+CloudBees%2C+in+One+Click" title="Share on Delicious" class="button"> <span class="count count-delicious">0</span> <i class="icon icon-delicious"></i> </a> <a href="http://digg.com/submit?phase=2&amp;url=http://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html&amp;title=How+to+Deploy+to+CloudBees%2C+in+One+Click" title="Share on Digg" class="button"> <span class="count count-digg">0</span> <i class="icon icon-digg"></i> </a> <a href="http://reddit.com/submit?url=http://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html%3F2014-34&amp;title=How+to+Deploy+to+CloudBees%2C+in+One+Click" title="Share on Reddit" class="button"> <span class="count count-reddit">0</span> <i class="icon icon-reddit"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=http://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html%3F2014-34&amp;t=How+to+Deploy+to+CloudBees%2C+in+One+Click" title="Share on Hacker News" class="button"> <i class="icon icon-hackernews"></i> </a> </nav></div> </header> <main role="main"> <article class="main" role="article" itemprop="articleBody"><p>When I deploy a new version of <a href="http://www.stateful.co">stateful.co</a>, a Java web application, to CloudBees, it takes 30 seconds of my time. Maybe even less. Recently, I deployed version 1.6.5. You can see how it all happened, in <a href="https://github.com/sttc/stateful/issues/6">Github issue #6</a>:</p><figure><img src='http://www.yegor256.com/images/2014/08/github-sttc-issue-6.png' style='width:600px' alt='figure'/></figure><p>As you see, I gave a command to <a href="http://www.rultor.com">Rultor</a>, and it packaged, tested and deployed a new version to CloudBees. I didn't do anything else.</p><p>Now let's see how you can do the same. How you can configure your project so that the deployment of its new version to CloudBees takes just a few seconds of your time.</p><p style="border:1px solid gray;padding:1em"> Since CloudBees is [shutting down its PaaS service](http://www.cloudbees.com/press/cloudbees-becomes-enterprise-jenkins-company) by the end of December, 2014, this article will have no sense after that.</p><h2 id="configure-the-cloudbees-maven-plugin">Configure the CloudBees Maven Plugin</h2><p>Add this profile to your <code>pom.xml</code>:</p><div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;project&gt;</span>
  [..]
  <span class="nt">&lt;profiles&gt;</span>
    <span class="nt">&lt;profile&gt;</span>
      <span class="nt">&lt;id&gt;</span>cloudbees<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;activation&gt;</span>
        <span class="nt">&lt;property&gt;&lt;name&gt;</span>bees.appId<span class="nt">&lt;/name&gt;&lt;/property&gt;</span>
      <span class="nt">&lt;/activation&gt;</span>
      <span class="nt">&lt;pluginRepositories&gt;</span>
        <span class="nt">&lt;pluginRepository&gt;</span>
          <span class="nt">&lt;id&gt;</span>cloudbees-public-release<span class="nt">&lt;/id&gt;</span>
          <span class="nt">&lt;url&gt;</span>http://repository-cloudbees.forge.cloudbees.com/public-release<span class="nt">&lt;/url&gt;</span>
        <span class="nt">&lt;/pluginRepository&gt;</span>
      <span class="nt">&lt;/pluginRepositories&gt;</span>
      <span class="nt">&lt;build&gt;</span>
        <span class="nt">&lt;pluginManagement&gt;</span>
          <span class="nt">&lt;plugins&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
              <span class="nt">&lt;artifactId&gt;</span>maven-deploy-plugin<span class="nt">&lt;/artifactId&gt;</span>
              <span class="nt">&lt;configuration&gt;</span>
                  <span class="nt">&lt;skip&gt;</span>true<span class="nt">&lt;/skip&gt;</span>
              <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
          <span class="nt">&lt;/plugins&gt;</span>
        <span class="nt">&lt;/pluginManagement&gt;</span>
        <span class="nt">&lt;plugins&gt;</span>
          <span class="nt">&lt;plugin&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>com.cloudbees<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>bees-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>1.3.2<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
              <span class="nt">&lt;appid&gt;</span>${bees.id}<span class="nt">&lt;/appid&gt;</span>
              <span class="nt">&lt;apikey&gt;</span>${bees.key}<span class="nt">&lt;/apikey&gt;</span>
              <span class="nt">&lt;secret&gt;</span>${bees.secret}<span class="nt">&lt;/secret&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;executions&gt;</span>
              <span class="nt">&lt;execution&gt;</span>
                <span class="nt">&lt;id&gt;</span>deploy-to-production<span class="nt">&lt;/id&gt;</span>
                <span class="nt">&lt;phase&gt;</span>deploy<span class="nt">&lt;/phase&gt;</span>
                <span class="nt">&lt;goals&gt;</span>
                  <span class="nt">&lt;goal&gt;</span>deploy<span class="nt">&lt;/goal&gt;</span>
                <span class="nt">&lt;/goals&gt;</span>
              <span class="nt">&lt;/execution&gt;</span>
            <span class="nt">&lt;/executions&gt;</span>
          <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;/plugins&gt;</span>
      <span class="nt">&lt;/build&gt;</span>
    <span class="nt">&lt;/profile&gt;</span>
  <span class="nt">&lt;/profiles&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></div><p>This plugin is not in Maven Central (unfortunately). That's why we have to specify that <code>&lt;pluginRepository&gt;</code>.</p><p>Pay attention to the fact that we're also disabling <code>maven-deploy-plugin</code>, since it would try to deploy your WAR package to the repository from the <code>&lt;distributionManagement&gt;</code> section. We want to avoid this.</p><p>The profile gets activated only when the <code>bees.id</code> property is defined. This won't happen during your normal development and testing, but it will occur during the deployment cycle initiated by Rultor, because we will define this property in <code>settings.xml</code> (discussed below).</p><h2 id="secure-access-to-cloudbees">Secure Access to CloudBees</h2><p>Create an account in CloudBees and register your web application there. CloudBees is free, as long as you don't need too much computing power. I believe that web applications should be light-weight by definition, so CloudBees' free layer is an ideal choice.</p><p>Create a <code>settings.xml</code> file (but don't commit it to your repo!):</p><div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;settings&gt;</span>
  <span class="nt">&lt;profiles&gt;</span>
    <span class="nt">&lt;profile&gt;</span>
      <span class="nt">&lt;id&gt;</span>cloudbees<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;properties&gt;</span>
        <span class="nt">&lt;bees.id&gt;</span>stateful/web<span class="nt">&lt;/bees.id&gt;</span>
        <span class="nt">&lt;bees.key&gt;</span><span class="c">&lt;!-- your key --&gt;</span><span class="nt">&lt;/bees.key&gt;</span>
        <span class="nt">&lt;bees.secret&gt;</span><span class="c">&lt;!-- your secret --&gt;</span><span class="nt">&lt;/bees.secret&gt;</span>
      <span class="nt">&lt;/properties&gt;</span>
    <span class="nt">&lt;/profile&gt;</span>
  <span class="nt">&lt;/profiles&gt;</span>
<span class="nt">&lt;/settings&gt;</span></code></pre></div><p>Encrypt this file using <a href="https://github.com/yegor256/rultor-remote">rultor remote</a>:</p><div class="highlight"><pre><code class="language-xml" data-lang="xml">$ gem install rultor
$ rultor encrypt -p me/test settings.xml</code></pre></div><p>Instead of <code>me/test</code> use the name of your Github project.</p><p>You should get a <code>settings.xml.asc</code> file; add it to the root directory of your project, commit and push. This file contains your CloudBees credentials, but in an encrypted format. Nobody can read it, except the Rultor server.</p><h2 id="configure-versions-plugin">Configure Versions Plugin</h2><p>I recommend using <a href="jcabi-parent">http://parent.jcabi.com</a>. It configures the required plugin out-of-the-box. If you're using it, skip this step.</p><p>Otherwise, add this plugin to your <code>pom.xml</code>:</p><div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;project&gt;</span>
  [..]
  <span class="nt">&lt;build&gt;</span>
    [..]
    <span class="nt">&lt;plugins&gt;</span>
      [..]
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>versions-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>2.1<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;generateBackupPoms&gt;</span>false<span class="nt">&lt;/generateBackupPoms&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></div><h2 id="configure-rultor">Configure Rultor</h2><p>Create a <code>.rultor.yml</code> file in the root directory of your project (this <a href="http://doc.rultor.com/reference.html">reference page</a> explains this format in detail):</p><div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">decrypt</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">settings.xml</span><span class="p-Indicator">:</span> <span class="s">"repo/settings.xml.asc"</span>
<span class="l-Scalar-Plain">release</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">script</span><span class="p-Indicator">:</span> <span class="p-Indicator">|</span>
    <span class="no">mvn versions:set "-DnewVersion=${tag}"</span>
    <span class="no">git commit -am "${tag}"</span>
    <span class="no">mvn clean deploy --settings /home/r/settings.xml</span></code></pre></div><p>You can compare your file with live Rultor <a href="https://github.com/sttc/stateful/blob/master/.rultor.yml">configuration of stateful.co</a>.</p><h2 id="run-it!">Run It!</h2><figure class='badge'><a href='http://www.rultor.com'><img src='http://doc.rultor.com/images/logo.svg' style='width:100px' alt='badge'/></a></figure><p>Now it's time to see how it all works. Create a new ticket in the Github issue tracker, and post something like that into it (read more about <a href="http://doc.rultor.com/basics.html">Rultor commands</a>):</p><div class="highlight"><pre><code class="language-text" data-lang="text">@rultor release, tag is `0.1`</code></pre></div><p>You will get a response in a few seconds. The rest will be done by Rultor.</p><p>Enjoy :)</p><p>BTW, if something doesn't work as I've explained, don't hesitate to submit a ticket to the <a href="https://github.com/yegor256/rultor/issues">Rultor issue tracker</a>. I will try to help you.</p><p>Also, a similar configuration can be performed for Heroku (using <a href="http://heroku.jcabi.com">jcabi-heroku-maven-plugin</a>) and for AWS Elastic Beanstalk (using <a href="http://beanstalk.jcabi.com">jcabi-beanstalk-maven-plugin</a>). I'll probably dedicate individual posts to them, as well.</p></article> </main><h2>Related Posts</h2><p>You may also find these posts interesting:</p><ul><li><a href="/2014/09/13/deploying-to-heroku.html">Deploying to Heroku, in One Click</a></li><li><a href="/2014/08/19/how-to-release-to-maven-central.html">How to Release to Maven Central, in One Click</a></li><li><a href="/2014/09/11/deployment-script-vs-rultor.html">Deployment Script vs. Rultor</a></li><li><a href="/2014/08/26/publish-to-rubygems.html">How to Publish to Rubygems, in One Click</a></li><li><a href="/2014/07/31/travis-and-rultor.html">Rultor + Travis</a></li></ul></div><div class="disqus" role="complementary"><div id="disqus_thread"></div> <a href="http://disqus.com" class="dsq-brlink"> comments powered by <span class="logo-disqus">Disqus</span> </a> <script src="//yegor256.disqus.com/embed.js" async></script></div><div class="wrapper"> <footer class="footer"><p> © <span itemprop="author">Yegor Bugayenko</span>, 2014</p> </footer></div></section><script src="/js/post.js?036e0d0"></script><script src="/js/global.js?036e0d0"></script><script src="//yegor256.disqus.com/count.js" async></script><script src="/js/ext/search.min.js?036e0d0"></script><script src="//stats.g.doubleclick.net/dc.js" async></script></body></html>