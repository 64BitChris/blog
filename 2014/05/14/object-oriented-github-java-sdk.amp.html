<!DOCTYPE html>
<html âš¡ lang="en">
  <head>
    <meta charset="utf-8">
    <title>Object-Oriented GitHub API</title>
    <link rel="canonical" href="http://www.yegor256.com/2014/05/14/object-oriented-github-java-sdk.html" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <script type='application/ld+json'>
      {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "mainEntityOfPage":{
          "@type": "WebPage",
          "@id": "http://www.yegor256.com/2014/05/14/object-oriented-github-java-sdk.html"
        },
        "headline": "Object-Oriented GitHub API",
        "image": {
          "@type": "ImageObject",
          "url": "http://img.teamed.io/face-1400x1400.jpg",
          "height": 1400,
          "width": 1400
        },
        "datePublished": "2014-05-14",
        "dateModified": "2014-05-14",
        "author": {
          "@type": "Person",
          "name": "Yegor Bugayenko"
        },
        "publisher": {
          "@type": "Organization",
          "name": "yegor256.com",
          "logo": {
            "@type": "ImageObject",
            "url": "http://img.teamed.io/face-512x512.jpg",
            "width": 512,
            "height": 512
          }
        },
        "description": "Since none of the existing Java API-s are truly object-oriented
or elegant enough for our quality standards, we
decided to create a new one with the best principles of OOP in mind.
",
        "keywords": ["github api", "github java api", "github object oriented java api", "best github java api", "java api github", "java github api", "object oriented github java api", "java api design"]
      }
    </script>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom="amp-custom">
      body { padding: 2em; }
      article { width: 600px; max-width: 100%; margin-left: auto; margin-right: auto; }
    </style>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
  </head>
  <body>
    <article>
      <h1>Object-Oriented GitHub API</h1>
      <figure class='badge'><amp-img src='http://cf.jare.io/?u=http%3A%2F%2Fwww.yegor256.com%2Fimages%2F2014%2F05%2Fgithub-logo.png' style='width:128px;max-width:100%;' alt='badge'></figure>

<p><a href="http://www.github.com">GitHub</a> is an awesome platform for maintaining Git sources and
tracking project issues. I moved all my projects (both private and public)
to GitHub about three years ago and have no regrets. Moreover,
GitHub gives access to almost all of its features through RESTful JSON API.</p>

<p>There are <a href="https://developer.github.com/libraries/">a few</a>
Java SDK-s that wrap and expose the API. I tried to use them,
but faced a number of issues:</p>

<ul>
<li>They are not really object-oriented (even though one of them has a description that says it is)</li>
<li>They are not based on JSR-353 (JSON Java API)</li>
<li>They provide no mocking instruments</li>
<li>They don&#39;t cover the entire API and can&#39;t be extended</li>
</ul>

<figure class='badge'><amp-img src='http://img.jcabi.com/logo-square.svg' style='width:64px;max-width:100%;' alt='badge'></figure>

<p>Keeping in mind all those drawbacks, I created my
own library &mdash; <a href="http://github.jcabi.com">jcabi-github</a>.
Let&#39;s look at its most important advantages.</p>

<!--more-->

<h2 id="object-oriented-for-real">Object Oriented for Real</h2>

<p>GitHub server is an object. A collection of issues is an object,
an individual issue is an object, its author is an author, etc.
For example, to retrieve the name of the author we use:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">GitHub</span> <span class="n">github</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">RtGitHub</span><span class="o">(</span><span class="cm">/* credentials */</span><span class="o">);</span>
<span class="n">Repos</span> <span class="n">repos</span> <span class="o">=</span> <span class="n">github</span><span class="o">.</span><span class="na">repos</span><span class="o">();</span>
<span class="n">Repo</span> <span class="n">repo</span> <span class="o">=</span> <span class="n">repos</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="k">new</span> <span class="n">Coordinates</span><span class="o">.</span><span class="na">Simple</span><span class="o">(</span><span class="s">&quot;jcabi/jcabi-github&quot;</span><span class="o">));</span>
<span class="n">Issues</span> <span class="n">issues</span> <span class="o">=</span> <span class="n">github</span><span class="o">.</span><span class="na">issues</span><span class="o">();</span>
<span class="n">Issue</span> <span class="n">issue</span> <span class="o">=</span> <span class="n">issues</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">123</span><span class="o">);</span>
<span class="n">User</span> <span class="n">author</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Issue</span><span class="o">.</span><span class="na">Smart</span><span class="o">(</span><span class="n">issue</span><span class="o">).</span><span class="na">author</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">author</span><span class="o">.</span><span class="na">name</span><span class="o">());</span></code></pre></figure>

<p>Needless to say, <code>GitHub</code>, <code>Repos</code>, <code>Repo</code>, <code>Issues</code>, <code>Issue</code>,
and <code>User</code> are interfaces. Classes that implement them are not visible in the library.</p>

<h2 id="mock-engine">Mock Engine</h2>

<p><code>MkGitHub</code> class is a mock version of a GitHub server. It behaves
almost exactly the same as a real server and is the perfect
instrument for unit testing. For example, say that you&#39;re
testing a method that is supposed to post a new issue to GitHub
and add a message into it. Here is how the unit test would look:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FooTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createsIssueAndPostsMessage</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">GitHub</span> <span class="n">github</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">MkGitHub</span><span class="o">(</span><span class="s">&quot;jeff&quot;</span><span class="o">);</span>
    <span class="n">github</span><span class="o">.</span><span class="na">repos</span><span class="o">().</span><span class="na">create</span><span class="o">(</span>
      <span class="n">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">,</span> <span class="n">owner</span><span class="o">).</span><span class="na">build</span><span class="o">()</span>
    <span class="o">);</span>
    <span class="k">new</span> <span class="nf">Foo</span><span class="o">().</span><span class="na">doTheThing</span><span class="o">(</span><span class="n">github</span><span class="o">);</span>
    <span class="n">MatcherAssert</span><span class="o">.</span><span class="na">assertThat</span><span class="o">(</span>
      <span class="n">github</span><span class="o">.</span><span class="na">issues</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">comments</span><span class="o">().</span><span class="na">iterate</span><span class="o">(),</span>
      <span class="n">Matchers</span><span class="o">.</span><span class="na">not</span><span class="o">(</span><span class="n">Matchers</span><span class="o">.</span><span class="na">emptyIterable</span><span class="o">())</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>This is much more convenient and compact than traditional
mocking via <a href="https://code.google.com/p/mockito/">Mockito</a> or a similar framework.</p>

<h2 id="extendable">Extendable</h2>

<p>It is based on JSR-353 and uses <code>jcabi-http</code> for HTTP request
processing. This combination makes it highly customizable and extendable,
when some GitHub feature is not covered by the library (and there are many of them).</p>

<p>For example, you want to get the value of <code>hireable</code> attribute of a <code>User</code>.
Class <code>User.Smart</code> doesn&#39;t have a method for it. So, here is how you would get it:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="c1">// get it somewhere</span>
<span class="c1">// name() method exists in User.Smart, let&#39;s use it</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">User</span><span class="o">.</span><span class="na">Smart</span><span class="o">(</span><span class="n">user</span><span class="o">).</span><span class="na">name</span><span class="o">());</span>
<span class="c1">// there is no hireable() method there</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">json</span><span class="o">().</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;hireable&quot;</span><span class="o">));</span></code></pre></figure>

<p>We&#39;re using method <code>json()</code> that returns an instance of
<a href="http://docs.oracle.com/javaee/7/api/javax/json/JsonObject.html"><code>JsonObject</code></a>
from JSR-353 (part of Java7).</p>

<p>No other library allows such direct access to JSON objects
returned by the GitHub server.</p>

<p>Let&#39;s see another example. Say, you want to use some feature
from GitHub that is not covered by the API. You get a <code>Request</code>
object from <code>GitHub</code> interface and directly access the HTTP entry point of the server:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">GitHub</span> <span class="n">github</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">RtGitHub</span><span class="o">(</span><span class="n">oauthKey</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">found</span> <span class="o">=</span> <span class="n">github</span><span class="o">.</span><span class="na">entry</span><span class="o">()</span>
  <span class="o">.</span><span class="na">uri</span><span class="o">().</span><span class="na">path</span><span class="o">(</span><span class="s">&quot;/search/repositories&quot;</span><span class="o">).</span><span class="na">back</span><span class="o">()</span>
  <span class="o">.</span><span class="na">method</span><span class="o">(</span><span class="n">Request</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
  <span class="o">.</span><span class="na">as</span><span class="o">(</span><span class="n">JsonResponse</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="o">.</span><span class="na">getJsonObject</span><span class="o">()</span>
  <span class="o">.</span><span class="na">getNumber</span><span class="o">(</span><span class="s">&quot;total_count&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="na">intValue</span><span class="o">();</span></code></pre></figure>

<p><a href="http://http.jcabi.com">jcabi-http</a> HTTP client is used by <a href="http://github.jcabi.com">jcabi-github</a>.</p>

<h2 id="immutable">Immutable</h2>

<p>All classes are truly immutable and annotated with
<a href="http://aspects.jcabi.com/annotation-immutable.html"><code>@Immutable</code></a>.
This may sound like a minor benefit, but it was very important for me.
I&#39;m using this annotation in all my projects to ensure my classes are truly immutable.</p>

<h2 id="version-0-8">Version 0.8</h2>

<p>A few days ago we released the latest <a href="https://github.com/jcabi/jcabi-github/releases/tag/jcabi-0.8">version 0.8</a>.
It is a major release, that included over 1200 commits. It covers the entire GitHub API and is
supposed to be very stable.
The library ships as a JAR dependency in <a href="http://repo1.maven.org/maven2/com/jcabi/jcabi-github">Maven Central</a>
(get its latest versions in <a href="http://search.maven.org/">Maven Central</a>):</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.jcabi<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>jcabi-github<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre></figure>

    </article>
  </body>
</html>
