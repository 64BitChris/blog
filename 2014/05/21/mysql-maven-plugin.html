<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebPage"> <head> <script> (function(_,e,rr,s){_errs=[s];var c=_.onerror;_.onerror=function(){var a=arguments;_errs.push(a); c&&c.apply(this,a)};var b=function(){var c=e.createElement(rr),b=e.getElementsByTagName(rr)[0]; c.src="//beacon.errorception.com/"+s+".js";c.async=!0;b.parentNode.insertBefore(c,b)}; _.addEventListener?_.addEventListener("load",b,!1):_.attachEvent("onload",b)}) (window,document,"script","57c3846b0929bf2b09000494"); </script> <meta charset="utf-8"/> <meta itemprop="name" content="MySQL Maven Plugin" /> <meta itemprop="author" content="Yegor Bugayenko" /> <meta itemprop="breadcrumb" content="http://www.yegor256.com" /> <meta itemprop="keywords" content="mariadb maven plugin, maven linux mysql, maven mysql java test, maven plugin for mysql, mysql integration testing java, mysql java test, mysql maven, mysql maven plugin" /> <meta itemprop="description" content="jcabi-mysql-maven-plugin starts a fresh instance of MySQL server before integration tests and shuts it down when tests are finished. " /> <meta name="description" content="jcabi-mysql-maven-plugin starts a fresh instance of MySQL server before integration tests and shuts it down when tests are finished. " /> <meta name="keywords" content="mariadb maven plugin, maven linux mysql, maven mysql java test, maven plugin for mysql, mysql integration testing java, mysql java test, mysql maven, mysql maven plugin" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta property="twitter:account_id" content="4503599630178231" /> <meta property="og:url" content="http://www.yegor256.com/2014/05/21/mysql-maven-plugin.html"/> <meta property="og:site_name" content="yegor256"/> <meta property="og:title" content="MySQL Maven Plugin"/> <meta property="og:description" content="jcabi-mysql-maven-plugin starts a fresh instance of MySQL server before integration tests and shuts it down when tests are finished. "/> <meta property="og:type" content="article" /> <meta property="og:locale" content="en_US" /> <meta property="fb:admins" content="10203747823006002"/> <meta name="twitter:site" content="www.yegor256.com"/> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:url" content="http://www.yegor256.com/2014/05/21/mysql-maven-plugin.html"/> <meta property="article:author" content="https://www.facebook.com/yegor256"/> <meta name="p:domain_verify" content="61f09f0ef5db665328827225a3fc11bd"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?1722681"/> <link rel="apple-touch-icon" href="/favicon.ico?1722681"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="http://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?1722681"/> <link rel="stylesheet" href="/css/icons.css?1722681"/> <link rel="canonical" href="http://www.yegor256.com/2014/05/21/mysql-maven-plugin.html" /> <link rel="amphtml" href="http://www.yegor256.com/2014/05/21/mysql-maven-plugin.amp.html" /> <title>MySQL Maven Plugin - Yegor Bugayenko </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="show head menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub"><span>subscribe</span></a> <a href="/about-me.html"> <img src="//cf.jare.io/?u=http://www.yegor256.com/images/yegor-bugayenko-192x192.png" class="photo" alt="photo of Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="follow me in Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss" title="RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a href="https://github.com/yegor256" rel="nofollow" title="my GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="my StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a href="https://www.facebook.com/yegor256" rel="nofollow" title="follow me in Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a href="https://instagram.com/yegor256" rel="nofollow" title="follow me in Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="my LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a href="https://www.youtube.com/c/yegor256" rel="nofollow" title="my Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a href="https://www.pinterest.com/yegor256/" rel="nofollow" title="my Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a href="https://angel.co/yegor256" rel="nofollow" title="my AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://gitter.im/yegor256/elegantobjects" rel="nofollow" title="Gitter chat"><i class="icon icon-gitter notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="Podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="blog@yegor256.com"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="home page">home</a></li> <li><a href="/best.html" title="best articles to read">12&#160;best</a></li> <li><a href="/contents.html" title="blog contents">all&#160;202</a></li> <li><a href="/webinars.html" title="webinars">webinars</a></li> <li><a href="/talks.html" title="talks">talks</a></li> <li><a href="/books.html" title="books">books</a></li> <li><a href="/papers.html" title="papers">papers</a></li> <li><a href="/pets.html" title="pets">pets</a></li> <li><a href="/award.html" title="software quality award">award</a></li> <li><a href="/testimonials.html" title="what people say about me">testimonials</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search"> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input type="text" id="search-query" class="field field-text" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search" autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="search via Google" alt="search via Google"/> </form></div><div class="hot"><ul> <li> At <a href="/webinars.html">Webinar #19</a> we'll discuss the role of a <strong>project manager</strong> in a software project, join us on <b>October 5</b>, at 11am PST. </li> <li> Meet me at <a href="http://javaday.org.ua/kyiv/">JavaDay</a> (Kyiv/Oct-14), <a href="http://2016.geecon.cz/">GeeCON</a> (Prague/Oct-20), <a href="http://2016.secr.ru/">SECR</a> (Moscow/Oct-28), <a href="http://www.oredev.org/2016/speakers/yegor-bugayenko">Oredev</a> (Malm√∂/Nov-7), <a href="http://xpdays.com.ua/">XP Days</a> (Kiev/Nov-11), <a href="http://topconf.com/tallinn-2016/speaker/yegor-bugayenko/">TopConf</a> (Tallinn/Nov-16), <a href="http://devternity.com/#/11">DevTernity</a> (Riga/Dec-1), <a href="https://appdevtrends.com/ECG/live360events/Events/Orlando-2016/Information/AppDevTrends.aspx">AppDevTrends</a> (Orlando/Dec-7), and later <a href="/talks.html">somewhere else</a>. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div><div itemscope="" itemprop="publisher" itemtype="http://schema.org/Organization"> <meta itemprop="name" content="yegor256.com"/><div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="http://www.yegor256.com/images/yegor-bugayenko-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/></div></div><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=http://www.yegor256.com/2014/05/21/mysql-maven-plugin.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">http://www.yegor256.com/2014/05/21/mysql-maven-plugin.html</code></p><h1 itemprop="name headline mainEntityOfPage">MySQL Maven Plugin</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-05-21T00:00:00+00:00"> 21 May 2014 </time> </li> <li class='unprintable desktop-only'><a href='https://github.com/yegor256/blog/commits/master/_posts/2014/may/2014-05-21-mysql-maven-plugin.md'>modified</a> on <time itemprop='dateModified' datetime='2016-09-19T19:16:20-0700'>19 September 2016</time></li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/05/21/mysql-maven-plugin.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><a href='/tag/mysql.html' class='tag notranslate'>mysql</a> <a href='/tag/maven.html' class='tag notranslate'>maven</a> <a href='/tag/java.html' class='tag notranslate'>java</a></p><div class="buttons notranslate desktop-only"> <nav class="share"> <a href="http://www.facebook.com/sharer/sharer.php?u=http://www.yegor256.com/2014/05/21/mysql-maven-plugin.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=http://www.yegor256.com/2014/05/21/mysql-maven-plugin.html&amp;text=MySQL+Maven+Plugin" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=http://www.yegor256.com/2014/05/21/mysql-maven-plugin.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=http://www.yegor256.com/2014/05/21/mysql-maven-plugin.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://www.stumbleupon.com/submit?url=http://www.yegor256.com/2014/05/21/mysql-maven-plugin.html&amp;title=MySQL+Maven+Plugin" title="Share on StumbleUpon" class="button" rel="nofollow"> <span class="count count-stumbleupon">0</span> <i class="icon icon-stumbleupon notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=http://www.yegor256.com/2014/05/21/mysql-maven-plugin.html%3F2014-20&amp;title=MySQL+Maven+Plugin" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=http://www.yegor256.com/2014/05/21/mysql-maven-plugin.html%3F2014-20&amp;t=MySQL+Maven+Plugin" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav></div></header> <main> <article class="main" itemprop="articleBody"><p>I was using MySQL in a few Java web projects and found out there was no Maven plugin that would help me to test my DAO classes against a real MySQL server. There are plenty of mechanisms to mock a database persistence layer both in memory and on disc. However, it is always good to make sure that your classes are tested against a database identical to the one you have in production environment.</p><figure class='badge'><a href='http://mysql.jcabi.com'><img src='http://img.jcabi.com/logo-square.svg' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p>I&#39;ve created my own Maven plugin, <a href="http://mysql.jcabi.com">jcabi-mysql-maven-plugin</a>, that does exactly two things: starts a MySQL server on <code>pre-integration-test</code> phase and shuts it down on <code>post-integration-test</code>.</p><p>This is how you configure it in <code>pom.xml</code> (see also its full <a href="http://mysql.jcabi.com/usage.html">usage instructions</a>):</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;project&gt;</span>
  <span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>build-helper-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>reserve-network-port<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
              <span class="nt">&lt;portNames&gt;</span>
                <span class="nt">&lt;portName&gt;</span>mysql.port<span class="nt">&lt;/portName&gt;</span>
              <span class="nt">&lt;/portNames&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-dependency-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>unpack<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
              <span class="nt">&lt;artifactItems&gt;</span>
                <span class="nt">&lt;artifactItem&gt;</span>
                  <span class="nt">&lt;groupId&gt;</span>com.jcabi<span class="nt">&lt;/groupId&gt;</span>
                  <span class="nt">&lt;artifactId&gt;</span>mysql-dist<span class="nt">&lt;/artifactId&gt;</span>
                  <span class="nt">&lt;version&gt;</span>5.6.14<span class="nt">&lt;/version&gt;</span>
                  <span class="nt">&lt;classifier&gt;</span>${mysql.classifier}<span class="nt">&lt;/classifier&gt;</span>
                  <span class="nt">&lt;type&gt;</span>zip<span class="nt">&lt;/type&gt;</span>
                  <span class="nt">&lt;overWrite&gt;</span>false<span class="nt">&lt;/overWrite&gt;</span>
                  <span class="nt">&lt;outputDirectory&gt;</span>
                    ${project.build.directory}/mysql-dist
                  <span class="nt">&lt;/outputDirectory&gt;</span>
                <span class="nt">&lt;/artifactItem&gt;</span>
              <span class="nt">&lt;/artifactItems&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>com.jcabi<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>jcabi-mysql-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>mysql-test<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>classify<span class="nt">&lt;/goal&gt;</span>
              <span class="nt">&lt;goal&gt;</span>start<span class="nt">&lt;/goal&gt;</span>
              <span class="nt">&lt;goal&gt;</span>stop<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
              <span class="nt">&lt;port&gt;</span>${mysql.port}<span class="nt">&lt;/port&gt;</span>
              <span class="nt">&lt;data&gt;</span>${project.build.directory}/mysql-data<span class="nt">&lt;/data&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-failsafe-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;systemPropertyVariables&gt;</span>
            <span class="nt">&lt;mysql.port&gt;</span>${mysql.port}<span class="nt">&lt;/mysql.port&gt;</span>
          <span class="nt">&lt;/systemPropertyVariables&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>integration-test<span class="nt">&lt;/goal&gt;</span>
              <span class="nt">&lt;goal&gt;</span>verify<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
  [...]
<span class="nt">&lt;/project&gt;</span></code></pre></figure><p>There are two plugins configured above. Let&#39;s take a look at what each does.</p><ol> <li><p><a href="http://mojo.codehaus.org/build-helper-maven-plugin/reserve-network-port-mojo.html"><strong><code>build-helper-maven-plugin</code></strong></a> is reserving a temporary random TCP port, which will be used by MySQL server. We don&#39;t want to start a server on its default 3306 port, because there could be another server already running there. Besides that, if we use a hard-coded TCP port, we won&#39;t be able to run multiple builds in parallel. Maybe not a big deal when you&#39;re developing locally, but in <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> environment this can be a problem. That&#39;s why we&#39;re reserving a TCP port first.</p></li> <li><p><a href="http://maven.apache.org/plugins/maven-dependency-plugin/unpack-mojo.html"><strong><code>maven-dependency-plugin</code></strong></a> is downloading a MySQL distribution in a zip archive (rather big file, over 300Mb for Linux), and unpacks it. This archive contains exactly the same files as you would use for a traditional MySQL installation. When the archive is unpacked, it is ready to start serving SQL requests as a normal MySQL server.</p></li> <li><p><a href="http://mysql.jcabi.com"><strong><code>jcabi-mysql-maven-plugin</code></strong></a> starts a server, binding it to a TCP port reserved randomly. The main responsibility of my Maven plugin is to make sure that MySQL server starts correctly on every platform (Mac OS, Linux, Windows) and stops when it&#39;s not needed any more. All the rest is done by the MySQL distribution itself.</p></li> <li><p><a href="http://mojo.codehaus.org/build-helper-maven-plugin/reserve-network-port-mojo.html"><strong><code>maven-failsafe-plugin</code></strong></a> is running unit tests on <code>integration-test</code> phase. Its main difference from maven-surefire-plugin is that it doesn&#39;t fail a build when some tests fail. Instead, it saves all failures into supplementary files in <code>target</code> directory and allows the build continue. Later, when we call its <code>verify</code> goal, it will fail a build if there were any errors during its <code>integration-test</code> goal execution.</p></li> </ol><p>To be precise, this is the order in which Maven will execute configured goals:</p><figure class="highlight"><pre><code class="language-text" data-lang="text">jcabi-mysql-maven-plugin:classify
maven-dependency-plugin:unpack
build-helper-maven-plugin:reserve-network-port
jcabi-mysql-maven-plugin:start
maven-failsafe-plugin:integration-test
jcabi-mysql-maven-plugin:stop
maven-failsafe-plugin:verify</code></pre></figure><p>Run <code>mvn clean install</code> and see how it works. If it doesn&#39;t work for some reason, don&#39;t hesitate <a href="https://github.com/jcabi/jcabi-mysql-maven-plugin/issues">to report an issue to GitHub</a>.</p><p>Now it&#39;s time to create an integration test, which will connect to the temporary MySQL server, create a table there and insert some data into it. This is just an example to show that MySQL server is running and is capable of serving transactions (I&#39;m using <a href="http://jdbc.jcabi.com">jcabi-jdbc</a>):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FooITCase</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">PORT</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&quot;mysql.port&quot;</span><span class="o">);</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">worksWithMysqlServer</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Connection</span> <span class="n">conn</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span>
      <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
        <span class="s">&quot;jdbc:mysql://localhost:%s/root?user=root&amp;password=root&quot;</span><span class="o">,</span>
        <span class="n">FooITCase</span><span class="o">.</span><span class="na">PORT</span>
      <span class="o">)</span>
    <span class="o">);</span>
    <span class="k">new</span> <span class="nf">JdbcSession</span><span class="o">(</span><span class="n">conn</span><span class="o">)</span>
      <span class="o">.</span><span class="na">sql</span><span class="o">(</span><span class="s">&quot;CREATE TABLE foo (id INT PRIMARY KEY)&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">execute</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>If you&#39;re using Hibernate, just create a <code>db.properties</code> file in <code>src/test/resources</code> directory. In that file you would do something like:</p><figure class="highlight"><pre><code class="language-properties" data-lang="properties"><span class="na">hibernate.connection.url</span><span class="o">=</span><span class="s">jdbc:mysql://localhost:${mysql.port}/root</span>
<span class="na">hibernate.connection.username</span><span class="o">=</span><span class="s">root</span>
<span class="na">hibernate.connection.password</span><span class="o">=</span><span class="s">root</span></code></pre></figure><p>Maven will replace that <code>${mysql.port}</code> with the number of reserved TCP port, during resources copying. This operation is called &quot;resources filtering&quot;, and you can read about it <a href="http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html">here</a>.</p><p>That&#39;s pretty much it. I&#39;m using <a href="http://mysql.jcabi.com">jcabi-mysql-maven-plugin</a> in a few projects, and it helps me to stay confident that my code works with a real MySQL server. I&#39;m also using the <a href="/2014/07/20/liquibase-in-maven.html">Liquibase</a> Maven plugin in order to populate an empty server with tables required for the application. Nevertheless, that is a story for the next post :)</p></article> </main> 
  <div class="unprintable">
    <h2>Related Posts</h2>
    <p>You may also find these posts interesting:</p>
    <ul>
      
        <li>
          <a href="/2015/04/16/award.html" data-score="2.239202326462968">Software Quality Award, 2015</a>
        </li>
      
        <li>
          <a href="/2016/02/03/design-patterns-and-anti-patterns.html" data-score="2.0616251987962104">Design Patterns and Anti-Patterns, Love and Hate</a>
        </li>
      
        <li>
          <a href="/2015/10/17/award-2016.html" data-score="2.0525834471636686">Software Quality Award, 2016</a>
        </li>
      
        <li>
          <a href="/2014/08/19/how-to-release-to-maven-central.html" data-score="1.7642830922907942">How to Release to Maven Central, in One Click</a>
        </li>
      
        <li>
          <a href="/2016/08/15/what-is-wrong-object-oriented-programming.html" data-score="1.3998902481270181">What's Wrong With Object-Oriented Programming?</a>
        </li>
      
    </ul>
  </div>

</div><div class="disqus" role="complementary"><div id="disqus_thread" class="disqus-thread"></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0]; this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span>, 2014-<span itemprop="copyrightYear">2016</span></p></footer></div></section> <script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?1722681"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> </body> </html>
