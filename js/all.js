function valid_email(e){"use strict";var t=/^(([^<>()\[\]\\.,;:\s@\"]+(\.[^<>()\[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}function send_email(e,t,a,o,n,i){"use strict";$.ajax({type:"POST",url:"https://mandrillapp.com/api/1.0/messages/send.json",data:{key:"GMfq6HmqFFR4HGCVfIu6Zw",message:{from_email:t,to:[{email:"blog@yegor256.com",name:"Yegor Bugayenko",type:"to"}],text:"Hi,\n\n"+a+"\n\nEmail: "+t+"\n\nThanks\n\n--\nsent through the form",subject:o,auto_html:!0,important:!0}},success:n,error:i})}$(function(){"use strict";var e=encodeURIComponent(document.location.href);$.getJSON("http://free.sharedcount.com/?apikey=d730c518430eabcabc46ab79528c744067afa17e&url="+e,function(e){0!==e.Facebook.total_count&&$(".count-facebook").html(e.Facebook.total_count).fadeIn(),0!==e.Twitter&&$(".count-twitter").html(e.Twitter).fadeIn(),0!==e.GooglePlusOne&&$(".count-googleplus").html(e.GooglePlusOne).fadeIn(),0!==e.LinkedIn&&$(".count-linkedin").html(e.LinkedIn).fadeIn(),0!==e.StumbleUpon&&$(".count-stumbleupon").html(e.StumbleUpon).fadeIn()}),$.getJSON("http://www.reddit.com/api/info.json?jsonp=?&url="+e,function(e){var t=e.data.children.length;t>0&&$(".count-reddit").html(t).fadeIn()}),$.getJSON("http://feeds.delicious.com/v2/json/urlinfo/data?url="+e+"&callback=?",function(e){var t=0;e.length>0&&(t=e[0].total_posts),0!==t&&$(".count-delicious").html(e[0].total_posts).fadeIn()})}),$(function(){"use strict";$("#search-query").lunrSearch({indexUrl:"/search.json",results:"#search-results",entries:".entries",template:"#search-results-template"}),$(".main p a, .main ul a, .main ol a").each(function(){var e=$(this),t=new URL(this.href).hostname;t&&t!==window.location.hostname&&e.append('<i class="icon icon-exit foreign"></i>')}),$(".button").click(function(e){e.preventDefault();var t=$(this);window.open(t.attr("href"),t.attr("title"),"width=640,height=300")}),$("h2").each(function(e,t){var a=$(t),o=a.attr("id");o&&a.append($("<a/>").addClass("link").attr("href","#"+o).append('<i class="icon icon-link"></i>'))}),$("#subscribe").click(function(e){var t=$(this),a=$("#error"),o=$("#email").val(),n=$("#reason").val();o?valid_email(o)?n?(a.text(""),t.attr("disabled","disabled"),t.html("Please, wait..."),e.preventDefault(),send_email(t,o,"I'd like to receive monthly updates from yegor256.com, please add me to the list of subscribers.\n\n"+n,"I would like to receive monthly updates",function(){$("#form").html('<p class="green"><b>Many thanks!</b> Your request was sent. I\'ll reply by email to <code>'+o+"</code>.</p>")},function(){t.attr("disabled",""),t.html("Oops :( Try again...")})):a.text("I really want to know who you are"):a.text("Email address doesn't look correct"):a.text("No email... What do you mean?")}),$("#unsubscribe").click(function(e){var t=$(this),a=$("#error"),o=$("#email").val();o?valid_email(o)?(a.text(""),t.attr("disabled","disabled"),t.html("Please, wait..."),e.preventDefault(),send_email(t,o,"I'd like to opt-out from your monthly updates from yegor256.com, please remove me from the list of subscribers.","I would like to OPT-OUT from your monthly updates",function(){$("#form").html('<p class="green"><b>Thanks</b>, your request was sent. You will <strong>not</strong> receive any more emails from me to this address: <code>'+o+"</code>.</p>")},function(){t.attr("disabled",""),t.html("Oops :( Try again...")})):a.text("Email address doesn't look correct"):a.text("No email... Please provide your address")}),$("#email").ready(function(){var e=window.location.search,t=e.match(/email=([^&]+)/);null!==t&&$("#email").val(t[1])})}),window.yandex_metrika_callbacks=[],window.yandex_metrika_callbacks.push(function(){"use strict";window.yaCounter26361360=new Ya.Metrika({id:26361360,webvisor:!0,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0})});var _gaq=[];_gaq.push(["_setAccount","UA-1963507-32"]),_gaq.push(["_trackPageview"]);