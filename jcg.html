<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="These articles are re-published by JavaCodeGeeks with my permission, it is a great resource for Java developers, I highly recommend to read me there " /> <meta name="keywords" content="java, java blog, programming blog, quality of software, software blog, software development blog, yegor bugayenko blog" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="My Articles On JavaCodeGeeks"/> <meta name="twitter:description" property="og:description" content="These articles are re-published by JavaCodeGeeks with my permission, it is a great resource for Java developers, I highly recommend to read me there "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/jcg.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/jcg.html" /> <link rel="amphtml" href="https://www.yegor256.com/jcg.amp.html" /> <title>My Articles On JavaCodeGeeks </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header itemprop="name"><h1>My Articles On JavaCodeGeeks</h1></header> <article class="main" itemprop="articleBody"><div ><p>These articles are re-published by <a href="http://www.javacodegeeks.com/author/yegor-bugayenko/">JavaCodeGeeks.com</a>. It&#39;s a awesome resource for Java developers, I highly recommend to read me there :)</p><figure class='badge'><a href='http://www.javacodegeeks.com'><img src='https://www.javacodegeeks.com/wp-content/uploads/2012/12/JavaCodeGeeks-logo.png' style='width:128px;max-width:100%;' alt='badge'/></a></figure><p><a href="/rss-jcg.xml" title="RSS feed"><i class="icon icon-rss"></i></a></p><p>&lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Assertions are an outdated and flawed feature in Java (and some other languages) that I would not recommend you use. " /> <meta name="keywords" content="assertion or exception, assertions java, assertions or exceptions, exceptions over assertions, throw exception not assertion" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2016-06-17 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Don't Use Java Assertions"/> <meta name="twitter:description" property="og:description" content="Assertions are an outdated and flawed feature in Java (and some other languages) that I would not recommend you use. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2016/06/17/dont-use-java-assertions.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2016/06/17/dont-use-java-assertions.html" /> <link rel="amphtml" href="https://www.yegor256.com/2016/06/17/dont-use-java-assertions.amp.html" /> <title>Don&#39;t Use Java Assertions </title> <meta name='og:image' content='https://www.yegor256.com/images/2016/06/natural-born-killers.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2016/06/natural-born-killers.jpg'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='672'/> <meta name='twitter:image:height' content='672'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Natural Born Killers (1994) by Oliver Stone'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2016/06/17/dont-use-java-assertions.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2016/06/17/dont-use-java-assertions.html">https://www.yegor256.com/2016/06/17/dont-use-java-assertions.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Don&#39;t Use Java Assertions</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2016-06-17T00:00:00+00:00"> 17 June 2016 </time> </li> <li class="desktop-only" itemprop="locationCreated">Los Angeles, CA</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2016/06/17/dont-use-java-assertions.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>There are basically two ways to validate a situation in Java and complain when something unexpected happens. It&#39;s either an exception or an assertion. Technically, they are almost the same, but there are some small differences. I believe that exceptions are the right way to go in all situations and assertions should never be used. Here&#39;s why.</p><figure class='jb_picture'><img itemprop='image' alt='Natural Born Killers (1994) by Oliver Stone' src='/images/2016/06/natural-born-killers.jpg' longdesc='#44ce340c'/><figcaption id='44ce340c'>Natural Born Killers (1994) by Oliver Stone</figcaption></figure><p>Let&#39;s see what happens when an assertion is triggered. Say that this is our code:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">assert</span> <span class="kc">true</span> <span class="o">==</span> <span class="kc">false</span> <span class="o">:</span> <span class="s">&quot;There is a problem&quot;</span><span class="o">;</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Hello, world!&quot;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Save this code to <code>Main.java</code> and compile:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ javac Main.java</code></pre></figure><p>Then run it:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ java Main
Hello, world!</code></pre></figure><p>The assertion wasn&#39;t triggered. It was ignored. Now run it with an <code>-enableassertions</code> flag:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ java -enableassertions Main
Exception in thread <span class="s2">&quot;main&quot;</span> java.lang.AssertionError: There is a problem
  at Main.main<span class="o">(</span>Main.java:3<span class="o">)</span></code></pre></figure><p>This is the first difference between exceptions and assertions. Exceptions will always be thrown, while assertions are not enabled by default. They are supposed to be turned on during testing and turned off in production. The assertion caused the runtime exception <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/AssertionError.html"><code>AssertionError</code></a>. But hold on; it&#39;s not a <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/RuntimeException.html"><code>RuntimeException</code></a>. It extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Error.html"><code>Error</code></a> class, which extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html"><code>Throwable</code></a>. This is the second difference. I don&#39;t know of any other differences.</p><p>I would recommend <strong>not</strong> to use assertions ... ever. Simply because I strongly believe in the <a href="/2015/08/25/fail-fast.html">Fail Fast</a> approach. I think bugs must be visible not only during testing but also in production. Moreover, I believe making bugs visible in production is very important if you want to achieve a high-quality product.</p><p>Thus, no assertions. They are simply a flawed and outdated feature in Java (and some other languages).</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2016/06/17/dont-use-java-assertions.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2016/06/17/dont-use-java-assertions.html&amp;text=Don%27t+Use+Java+Assertions" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2016/06/17/dont-use-java-assertions.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2016/06/17/dont-use-java-assertions.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2016/06/17/dont-use-java-assertions.html%3F2016-24&amp;title=Don%27t+Use+Java+Assertions" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2016/06/17/dont-use-java-assertions.html%3F2016-24&amp;t=Don%27t+Use+Java+Assertions" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>There are basically two ways to validate a situation in Java and complain when something unexpected happens. It&#39;s either an exception or an assertion. Technically, they are almost the same, but there are some small differences. I believe that exceptions are the right way to go in all situations and assertions should never be used. Here&#39;s why.</p><figure class='jb_picture'><img itemprop='image' alt='Natural Born Killers (1994) by Oliver Stone' src='/images/2016/06/natural-born-killers.jpg' longdesc='#44ce340c'/><figcaption id='44ce340c'>Natural Born Killers (1994) by Oliver Stone</figcaption></figure><p>Let&#39;s see what happens when an assertion is triggered. Say that this is our code:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">assert</span> <span class="kc">true</span> <span class="o">==</span> <span class="kc">false</span> <span class="o">:</span> <span class="s">&quot;There is a problem&quot;</span><span class="o">;</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Hello, world!&quot;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Save this code to <code>Main.java</code> and compile:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ javac Main.java</code></pre></figure><p>Then run it:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ java Main
Hello, world!</code></pre></figure><p>The assertion wasn&#39;t triggered. It was ignored. Now run it with an <code>-enableassertions</code> flag:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ java -enableassertions Main
Exception in thread <span class="s2">&quot;main&quot;</span> java.lang.AssertionError: There is a problem
  at Main.main<span class="o">(</span>Main.java:3<span class="o">)</span></code></pre></figure><p>This is the first difference between exceptions and assertions. Exceptions will always be thrown, while assertions are not enabled by default. They are supposed to be turned on during testing and turned off in production. The assertion caused the runtime exception <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/AssertionError.html"><code>AssertionError</code></a>. But hold on; it&#39;s not a <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/RuntimeException.html"><code>RuntimeException</code></a>. It extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Error.html"><code>Error</code></a> class, which extends <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html"><code>Throwable</code></a>. This is the second difference. I don&#39;t know of any other differences.</p><p>I would recommend <strong>not</strong> to use assertions ... ever. Simply because I strongly believe in the <a href="/2015/08/25/fail-fast.html">Fail Fast</a> approach. I think bugs must be visible not only during testing but also in production. Moreover, I believe making bugs visible in production is very important if you want to achieve a high-quality product.</p><p>Thus, no assertions. They are simply a flawed and outdated feature in Java (and some other languages).</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="When we use private static literals to get rid of value duplication, unnecessary coupling between test methods serously affects maintainability. " /> <meta name="keywords" content="code duplication, coupling and cohesion, java private static final, private static final, private static final java" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2016-05-03 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Test Methods Must Share Nothing"/> <meta name="twitter:description" property="og:description" content="When we use private static literals to get rid of value duplication, unnecessary coupling between test methods serously affects maintainability. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2016/05/03/test-methods-must-share-nothing.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2016/05/03/test-methods-must-share-nothing.html" /> <link rel="amphtml" href="https://www.yegor256.com/2016/05/03/test-methods-must-share-nothing.amp.html" /> <title>Test Methods Must Share Nothing </title> <meta name='og:image' content='https://www.yegor256.com/images/2016/05/old-boy.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2016/05/old-boy.jpg'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='675'/> <meta name='twitter:image:height' content='675'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Oldeuboi (2003) by Chan-wook Park'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2016/05/03/test-methods-must-share-nothing.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2016/05/03/test-methods-must-share-nothing.html">https://www.yegor256.com/2016/05/03/test-methods-must-share-nothing.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Test Methods Must Share Nothing</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2016-05-03T00:00:00+00:00"> 3 May 2016 </time> </li> <li class="desktop-only" itemprop="locationCreated">Palo Alto, CA</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2016/05/03/test-methods-must-share-nothing.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>Constants... I wrote about them <a href="/2015/07/06/public-static-literals.html">some time ago</a>, mostly saying that they are a bad thing, if being public. They reduce duplication, but introduce coupling. A much better way to get rid of duplication is by creating new classes or methods---a traditional OOP method. This seems to make sense and in our projects I see less and less public constants. In some projects we don&#39;t have them at all. But one thing still bothers me: unit tests. Most programmers seem to think that when static analysis says that there are too many similar literals in the same file, the best way to get rid of them is via a private static literal. This is just wrong.</p><figure class='jb_picture'><img itemprop='image' alt='Oldeuboi (2003) by Chan-wook Park' src='/images/2016/05/old-boy.jpg' longdesc='#934a9853'/><figcaption id='934a9853'>Oldeuboi (2003) by Chan-wook Park</figcaption></figure><p>Unit tests, naturally, duplicate a lot of code. Test methods contain similar or almost identical functionality and this is almost inevitable. Well, we can use more of that <a href="http://junit.sourceforge.net/javadoc/org/junit/Before.html"><code>@Before</code></a> and <a href="http://junit.sourceforge.net/javadoc/org/junit/Before.html"><code>@BeforeClass</code></a> features, but sometimes it&#39;s just not possible. We may have, say, 20 test methods in one <code>FooTest.java</code> file. Preparing all objects in one &quot;before&quot; is not possible. So we have to do certain things again and again in our test methods.</p><p>Let&#39;s take a look at one of the classes in our <a href="http://www.takes.org">Takes Framework</a>: <a href="https://github.com/yegor256/takes/blob/0.32.7/src/test/java/org/takes/misc/VerboseListTest.java"><code>VerboseListTest</code></a>. It&#39;s a unit test and it has a problem, which I&#39;m trying to tell you about. Look at that <a href="https://github.com/yegor256/takes/blob/0.32.7/src/test/java/org/takes/misc/VerboseListTest.java#L54"><code>MSG</code></a> private literal. It is used for the first time in <a href="https://github.com/yegor256/takes/blob/0.32.7/src/test/java/org/takes/misc/VerboseListTest.java#L77-L80"><code>setUp()</code></a> method as an argument of an object constructor and then in a few test methods to check how that object behaves. Let me simplify that code:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">FooTest</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">MSG</span> <span class="o">=</span> <span class="s">&quot;something&quot;</span><span class="o">;</span>
  <span class="nd">@Before</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="kt">void</span> <span class="nf">setUp</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">foo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Foo</span><span class="o">(</span><span class="n">FooTest</span><span class="o">.</span><span class="na">MSG</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">simplyWorks</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span>
      <span class="n">foo</span><span class="o">.</span><span class="na">doSomething</span><span class="o">(),</span>
      <span class="n">containsString</span><span class="o">(</span><span class="n">FooTest</span><span class="o">.</span><span class="na">MSG</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">simplyWorksAgain</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span>
      <span class="n">foo</span><span class="o">.</span><span class="na">doSomethingElse</span><span class="o">(),</span>
      <span class="n">containsString</span><span class="o">(</span><span class="n">FooTest</span><span class="o">.</span><span class="na">MSG</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This is basically what is happening in <a href="https://github.com/yegor256/takes/blob/0.32.7/src/test/java/org/takes/misc/VerboseListTest.java"><code>VerboseListTest</code></a> and it&#39;s very wrong. Why? Because this shared literal <code>MSG</code> introduced an unnatural coupling between these two test methods. They have nothing in common, because they test different behaviors of class <code>Foo</code>. But this private constant ties them together. Now they are somehow related.</p><p>If and when I want to modify one of the test methods, I may need to modify the other one too. Say I want to see how <code>doSomethingElse()</code> behaves if the encapsulated message is an empty string. What do I do? I change the value of the constant <code>FooTest.MSG</code>, which is used by another test method. This is called coupling. And it&#39;s a bad thing.</p><p>What do we do? Well, we can use that <code>&quot;something&quot;</code> string literal in both test methods:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">FooTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">simplyWorks</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Foo</span><span class="o">(</span><span class="s">&quot;something&quot;</span><span class="o">).</span><span class="na">doSomething</span><span class="o">(),</span>
      <span class="n">containsString</span><span class="o">(</span><span class="s">&quot;something&quot;</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">simplyWorksAgain</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Foo</span><span class="o">(</span><span class="s">&quot;something&quot;</span><span class="o">).</span><span class="na">doSomethingElse</span><span class="o">(),</span>
      <span class="n">containsString</span><span class="o">(</span><span class="s">&quot;something&quot;</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>As you see, I got rid of that <code>setUp()</code> method and the private static literal <code>MSG</code>. What do we have now? Code duplication. String <code>&quot;something&quot;</code> shows up four times in the test class. No static analyzers will tolerate that. Moreover, there are seven (!) test methods in <a href="https://github.com/yegor256/takes/blob/0.32.7/src/test/java/org/takes/misc/VerboseListTest.java"><code>VerboseListTest</code></a>, which are using <code>MSG</code>. Thus, we will have 14 occurrences of <code>&quot;something&quot;</code>, right? Yes, that&#39;s right and that&#39;s most likely why one of authors of this test case introduced the constant---to get rid of duplication. BTW, <a href="https://github.com/Happy-Neko">@Happy-Neko</a> did that in pull request <a href="https://github.com/yegor256/takes/pull/513">#513</a>, <a href="https://github.com/carlosmiranda"><code>@carlosmiranda</code></a> reviewed the code and I approved the changes. So, three people made/approved that mistake, including myself.</p><p>So what is the right approach that will avoid code duplication and at the same time won&#39;t introduce coupling? Here it is:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">FooTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">simplyWorks</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">String</span> <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;something&quot;</span><span class="o">;</span>
    <span class="n">assertThat</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Foo</span><span class="o">(</span><span class="n">msg</span><span class="o">).</span><span class="na">doSomething</span><span class="o">(),</span>
      <span class="n">containsString</span><span class="o">(</span><span class="n">msg</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">simplyWorksAgain</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">String</span> <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;something else&quot;</span><span class="o">;</span>
    <span class="n">assertThat</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Foo</span><span class="o">(</span><span class="n">msg</span><span class="o">).</span><span class="na">doSomethingElse</span><span class="o">(),</span>
      <span class="n">containsString</span><span class="o">(</span><span class="n">msg</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>These literals must be different. This is what any static analyzer is saying when it sees <code>&quot;something&quot;</code> in so many places. It questions us---why are they the same? Is it really so important to use <code>&quot;something&quot;</code> everywhere? Why can&#39;t you use different literals? Of course we can. And we should.</p><p>The bottom line is that each test method must have its own set of data and objects. They must not be shared between test methods ever. Test methods must always be independent, having nothing in common.</p><p>Having that in mind, we can easily conclude that methods like <code>setUp()</code> or any shared variables in test classes are <strong>evil</strong>. They must not be used and simply must not exist. I think that their invention in JUnit caused a lot of harm to Java code.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2016/05/03/test-methods-must-share-nothing.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2016/05/03/test-methods-must-share-nothing.html&amp;text=Test+Methods+Must+Share+Nothing" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2016/05/03/test-methods-must-share-nothing.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2016/05/03/test-methods-must-share-nothing.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2016/05/03/test-methods-must-share-nothing.html%3F2016-18&amp;title=Test+Methods+Must+Share+Nothing" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2016/05/03/test-methods-must-share-nothing.html%3F2016-18&amp;t=Test+Methods+Must+Share+Nothing" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>Constants... I wrote about them <a href="/2015/07/06/public-static-literals.html">some time ago</a>, mostly saying that they are a bad thing, if being public. They reduce duplication, but introduce coupling. A much better way to get rid of duplication is by creating new classes or methods---a traditional OOP method. This seems to make sense and in our projects I see less and less public constants. In some projects we don&#39;t have them at all. But one thing still bothers me: unit tests. Most programmers seem to think that when static analysis says that there are too many similar literals in the same file, the best way to get rid of them is via a private static literal. This is just wrong.</p><figure class='jb_picture'><img itemprop='image' alt='Oldeuboi (2003) by Chan-wook Park' src='/images/2016/05/old-boy.jpg' longdesc='#934a9853'/><figcaption id='934a9853'>Oldeuboi (2003) by Chan-wook Park</figcaption></figure><p>Unit tests, naturally, duplicate a lot of code. Test methods contain similar or almost identical functionality and this is almost inevitable. Well, we can use more of that <a href="http://junit.sourceforge.net/javadoc/org/junit/Before.html"><code>@Before</code></a> and <a href="http://junit.sourceforge.net/javadoc/org/junit/Before.html"><code>@BeforeClass</code></a> features, but sometimes it&#39;s just not possible. We may have, say, 20 test methods in one <code>FooTest.java</code> file. Preparing all objects in one &quot;before&quot; is not possible. So we have to do certain things again and again in our test methods.</p><p>Let&#39;s take a look at one of the classes in our <a href="http://www.takes.org">Takes Framework</a>: <a href="https://github.com/yegor256/takes/blob/0.32.7/src/test/java/org/takes/misc/VerboseListTest.java"><code>VerboseListTest</code></a>. It&#39;s a unit test and it has a problem, which I&#39;m trying to tell you about. Look at that <a href="https://github.com/yegor256/takes/blob/0.32.7/src/test/java/org/takes/misc/VerboseListTest.java#L54"><code>MSG</code></a> private literal. It is used for the first time in <a href="https://github.com/yegor256/takes/blob/0.32.7/src/test/java/org/takes/misc/VerboseListTest.java#L77-L80"><code>setUp()</code></a> method as an argument of an object constructor and then in a few test methods to check how that object behaves. Let me simplify that code:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">FooTest</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">MSG</span> <span class="o">=</span> <span class="s">&quot;something&quot;</span><span class="o">;</span>
  <span class="nd">@Before</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="kt">void</span> <span class="nf">setUp</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">foo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Foo</span><span class="o">(</span><span class="n">FooTest</span><span class="o">.</span><span class="na">MSG</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">simplyWorks</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span>
      <span class="n">foo</span><span class="o">.</span><span class="na">doSomething</span><span class="o">(),</span>
      <span class="n">containsString</span><span class="o">(</span><span class="n">FooTest</span><span class="o">.</span><span class="na">MSG</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">simplyWorksAgain</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span>
      <span class="n">foo</span><span class="o">.</span><span class="na">doSomethingElse</span><span class="o">(),</span>
      <span class="n">containsString</span><span class="o">(</span><span class="n">FooTest</span><span class="o">.</span><span class="na">MSG</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This is basically what is happening in <a href="https://github.com/yegor256/takes/blob/0.32.7/src/test/java/org/takes/misc/VerboseListTest.java"><code>VerboseListTest</code></a> and it&#39;s very wrong. Why? Because this shared literal <code>MSG</code> introduced an unnatural coupling between these two test methods. They have nothing in common, because they test different behaviors of class <code>Foo</code>. But this private constant ties them together. Now they are somehow related.</p><p>If and when I want to modify one of the test methods, I may need to modify the other one too. Say I want to see how <code>doSomethingElse()</code> behaves if the encapsulated message is an empty string. What do I do? I change the value of the constant <code>FooTest.MSG</code>, which is used by another test method. This is called coupling. And it&#39;s a bad thing.</p><p>What do we do? Well, we can use that <code>&quot;something&quot;</code> string literal in both test methods:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">FooTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">simplyWorks</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Foo</span><span class="o">(</span><span class="s">&quot;something&quot;</span><span class="o">).</span><span class="na">doSomething</span><span class="o">(),</span>
      <span class="n">containsString</span><span class="o">(</span><span class="s">&quot;something&quot;</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">simplyWorksAgain</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Foo</span><span class="o">(</span><span class="s">&quot;something&quot;</span><span class="o">).</span><span class="na">doSomethingElse</span><span class="o">(),</span>
      <span class="n">containsString</span><span class="o">(</span><span class="s">&quot;something&quot;</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>As you see, I got rid of that <code>setUp()</code> method and the private static literal <code>MSG</code>. What do we have now? Code duplication. String <code>&quot;something&quot;</code> shows up four times in the test class. No static analyzers will tolerate that. Moreover, there are seven (!) test methods in <a href="https://github.com/yegor256/takes/blob/0.32.7/src/test/java/org/takes/misc/VerboseListTest.java"><code>VerboseListTest</code></a>, which are using <code>MSG</code>. Thus, we will have 14 occurrences of <code>&quot;something&quot;</code>, right? Yes, that&#39;s right and that&#39;s most likely why one of authors of this test case introduced the constant---to get rid of duplication. BTW, <a href="https://github.com/Happy-Neko">@Happy-Neko</a> did that in pull request <a href="https://github.com/yegor256/takes/pull/513">#513</a>, <a href="https://github.com/carlosmiranda"><code>@carlosmiranda</code></a> reviewed the code and I approved the changes. So, three people made/approved that mistake, including myself.</p><p>So what is the right approach that will avoid code duplication and at the same time won&#39;t introduce coupling? Here it is:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">FooTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">simplyWorks</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">String</span> <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;something&quot;</span><span class="o">;</span>
    <span class="n">assertThat</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Foo</span><span class="o">(</span><span class="n">msg</span><span class="o">).</span><span class="na">doSomething</span><span class="o">(),</span>
      <span class="n">containsString</span><span class="o">(</span><span class="n">msg</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">simplyWorksAgain</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">String</span> <span class="n">msg</span> <span class="o">=</span> <span class="s">&quot;something else&quot;</span><span class="o">;</span>
    <span class="n">assertThat</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Foo</span><span class="o">(</span><span class="n">msg</span><span class="o">).</span><span class="na">doSomethingElse</span><span class="o">(),</span>
      <span class="n">containsString</span><span class="o">(</span><span class="n">msg</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>These literals must be different. This is what any static analyzer is saying when it sees <code>&quot;something&quot;</code> in so many places. It questions us---why are they the same? Is it really so important to use <code>&quot;something&quot;</code> everywhere? Why can&#39;t you use different literals? Of course we can. And we should.</p><p>The bottom line is that each test method must have its own set of data and objects. They must not be shared between test methods ever. Test methods must always be independent, having nothing in common.</p><p>Having that in mind, we can easily conclude that methods like <code>setUp()</code> or any shared variables in test classes are <strong>evil</strong>. They must not be used and simply must not exist. I think that their invention in JUnit caused a lot of harm to Java code.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Class InputStream in Java has three methods read(), this is what I think is very wrong. Not only in this class, but in general in OOP. " /> <meta name="keywords" content="InputStream, InputStream java, method overloading, method overloading java, why InputStream is a class" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2016-04-26 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Why InputStream Design Is Wrong"/> <meta name="twitter:description" property="og:description" content="Class InputStream in Java has three methods read(), this is what I think is very wrong. Not only in this class, but in general in OOP. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2016/04/26/why-inputstream-design-is-wrong.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2016/04/26/why-inputstream-design-is-wrong.html" /> <link rel="amphtml" href="https://www.yegor256.com/2016/04/26/why-inputstream-design-is-wrong.amp.html" /> <title>Why InputStream Design Is Wrong </title> <meta name='og:image' content='https://www.yegor256.com/images/2016/04/a-serious-man.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2016/04/a-serious-man.jpg'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='656'/> <meta name='twitter:image:height' content='656'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='A Serious Man (2009) by Coen Brothers'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2016/04/26/why-inputstream-design-is-wrong.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2016/04/26/why-inputstream-design-is-wrong.html">https://www.yegor256.com/2016/04/26/why-inputstream-design-is-wrong.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Why InputStream Design Is Wrong</h1><aside class='book'><a href='http://amzn.to/2qFt4Tn'><img src='/images/books/elegant-objects/cover.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='http://amzn.to/2qFt4Tn'>Section&nbsp;2.9</a><br/> of my book<a href='http://amzn.to/2qFt4Tn'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2016-04-26T00:00:00+00:00"> 26 April 2016 </time> </li> <li class="desktop-only" itemprop="locationCreated">Washington, D.C.</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2016/04/26/why-inputstream-design-is-wrong.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>It&#39;s not just about <code>InputSteam</code>, this class is a good example of a bad design. I&#39;m talking about three overloaded methods <code>read()</code>. I&#39;ve mentioned this problem in Section 2.9 of <a href="/elegant-objects.html">Elegant Objects</a>. In a few words, I strongly believe that interfaces must be &quot;functionality poor.&quot; <code>InputStream</code> should have been an interface in the first place and it should have had a single method <code>read(byte[])</code>. Then if its authors wanted to give us extra functionality, they should have created supplementary &quot;smart&quot; classes.</p><figure class='jb_picture'><img itemprop='image' alt='A Serious Man (2009) by Coen Brothers' src='/images/2016/04/a-serious-man.jpg' longdesc='#490f983a'/><figcaption id='490f983a'>A Serious Man (2009) by Coen Brothers</figcaption></figure><p>This is how it looks now:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">InputStream</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="nf">read</span><span class="o">();</span>
  <span class="kt">int</span> <span class="nf">read</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">buffer</span><span class="o">,</span> <span class="kt">int</span> <span class="n">offset</span><span class="o">,</span> <span class="kt">int</span> <span class="n">length</span><span class="o">);</span>
  <span class="kt">int</span> <span class="nf">read</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">buffer</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>What&#39;s wrong? It&#39;s very convenient to have the ability to read a single byte, an array of bytes or even an array of bytes with a direct positioning into a specific place in the buffer!</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=Xk9tIqwca3k'><div class='box'> <img src='https://i.ytimg.com/vi/Xk9tIqwca3k/mqdefault.jpg' alt='YouTube video #Xk9tIqwca3k'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Smart Classes and Functionality-Poor Interfaces (webinar #16); 7 July 2016.</div></aside><p>However, we are still lacking a few methods: for reading the bytes and immediately saving into a file, converting to a text with a selected encoding, sending them by email and posting on Twitter. It would be great to have the features too, right in the poor <code>InputStream</code>. I hope the Oracle Java team is working on them now.</p><p>In the mean time, let&#39;s see what exactly is wrong with what these bright engineers designed for us already. Or maybe let me show how I would design <code>InputStream</code> and we&#39;ll compare:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">interface</span> <span class="nc">InputStream</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="nf">read</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">buffer</span><span class="o">,</span> <span class="kt">int</span> <span class="n">offset</span><span class="o">,</span> <span class="kt">int</span> <span class="n">length</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>This is my design. The <code>InputStream</code> is responsible for reading bytes from the stream. There is one single method for this feature. Is it convenient for everybody? Does it read and post on Twitter? Not yet. Do we need that functionality? Of course we do, but it doesn&#39;t mean that we will add it to the interface. Instead, we will create supplementary &quot;smart&quot; class:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">interface</span> <span class="nc">InputStream</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="nf">read</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">buffer</span><span class="o">,</span> <span class="kt">int</span> <span class="n">offset</span><span class="o">,</span> <span class="kt">int</span> <span class="n">length</span><span class="o">);</span>
  <span class="kd">class</span> <span class="nc">Smart</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">InputStream</span> <span class="n">origin</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">Smart</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">stream</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">stream</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">read</span><span class="o">()</span> <span class="o">{</span>
      <span class="kd">final</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">buffer</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
      <span class="kd">final</span> <span class="kt">int</span> <span class="n">read</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buffer</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
      <span class="kd">final</span> <span class="kt">int</span> <span class="n">result</span><span class="o">;</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">read</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">result</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
      <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">buffer</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
      <span class="o">}</span>
      <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Now, we want to read a single byte from the stream. Here is how:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">InputStream</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="s">&quot;/tmp/a.txt&quot;</span><span class="o">);</span>
<span class="kd">final</span> <span class="kt">byte</span> <span class="n">b</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InputStream</span><span class="o">.</span><span class="na">Smart</span><span class="o">(</span><span class="n">input</span><span class="o">).</span><span class="na">read</span><span class="o">();</span></code></pre></figure><p>The functionality of reading a single byte is outside of <code>InputStream</code>, because this is not its business. The stream doesn&#39;t need to know how to manage the data after it is read. All the stream is <strong>responsible</strong> for is reading, not parsing or manipulating afterwards.</p><p>Interfaces must be small.</p><p>Obviously, method overloading in interfaces is a code smell. An interface with more than <strong>three methods</strong> is a good candidate for refactoring. If methods overload each other---it&#39;s serious trouble.</p><p>Interfaces must be small!</p><p>You may say that the creators of <code>InputStream</code> cared about performance, that&#39;s why allowed us to implement <code>read()</code> in three different forms. Then I have to ask again, why not create a method for reading and immediately post it on Twitter? That would be fantastically fast. Isn&#39;t it what we all want? A fast software which nobody has any desire to read or maintain.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2016/04/26/why-inputstream-design-is-wrong.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2016/04/26/why-inputstream-design-is-wrong.html&amp;text=Why+InputStream+Design+Is+Wrong" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2016/04/26/why-inputstream-design-is-wrong.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2016/04/26/why-inputstream-design-is-wrong.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2016/04/26/why-inputstream-design-is-wrong.html%3F2016-17&amp;title=Why+InputStream+Design+Is+Wrong" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2016/04/26/why-inputstream-design-is-wrong.html%3F2016-17&amp;t=Why+InputStream+Design+Is+Wrong" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>It&#39;s not just about <code>InputSteam</code>, this class is a good example of a bad design. I&#39;m talking about three overloaded methods <code>read()</code>. I&#39;ve mentioned this problem in Section 2.9 of <a href="/elegant-objects.html">Elegant Objects</a>. In a few words, I strongly believe that interfaces must be &quot;functionality poor.&quot; <code>InputStream</code> should have been an interface in the first place and it should have had a single method <code>read(byte[])</code>. Then if its authors wanted to give us extra functionality, they should have created supplementary &quot;smart&quot; classes.</p><figure class='jb_picture'><img itemprop='image' alt='A Serious Man (2009) by Coen Brothers' src='/images/2016/04/a-serious-man.jpg' longdesc='#490f983a'/><figcaption id='490f983a'>A Serious Man (2009) by Coen Brothers</figcaption></figure><p>This is how it looks now:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">InputStream</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="nf">read</span><span class="o">();</span>
  <span class="kt">int</span> <span class="nf">read</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">buffer</span><span class="o">,</span> <span class="kt">int</span> <span class="n">offset</span><span class="o">,</span> <span class="kt">int</span> <span class="n">length</span><span class="o">);</span>
  <span class="kt">int</span> <span class="nf">read</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">buffer</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>What&#39;s wrong? It&#39;s very convenient to have the ability to read a single byte, an array of bytes or even an array of bytes with a direct positioning into a specific place in the buffer!</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=Xk9tIqwca3k'><div class='box'> <img src='https://i.ytimg.com/vi/Xk9tIqwca3k/mqdefault.jpg' alt='YouTube video #Xk9tIqwca3k'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Smart Classes and Functionality-Poor Interfaces (webinar #16); 7 July 2016.</div></aside><p>However, we are still lacking a few methods: for reading the bytes and immediately saving into a file, converting to a text with a selected encoding, sending them by email and posting on Twitter. It would be great to have the features too, right in the poor <code>InputStream</code>. I hope the Oracle Java team is working on them now.</p><p>In the mean time, let&#39;s see what exactly is wrong with what these bright engineers designed for us already. Or maybe let me show how I would design <code>InputStream</code> and we&#39;ll compare:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">interface</span> <span class="nc">InputStream</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="nf">read</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">buffer</span><span class="o">,</span> <span class="kt">int</span> <span class="n">offset</span><span class="o">,</span> <span class="kt">int</span> <span class="n">length</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>This is my design. The <code>InputStream</code> is responsible for reading bytes from the stream. There is one single method for this feature. Is it convenient for everybody? Does it read and post on Twitter? Not yet. Do we need that functionality? Of course we do, but it doesn&#39;t mean that we will add it to the interface. Instead, we will create supplementary &quot;smart&quot; class:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">interface</span> <span class="nc">InputStream</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="nf">read</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">buffer</span><span class="o">,</span> <span class="kt">int</span> <span class="n">offset</span><span class="o">,</span> <span class="kt">int</span> <span class="n">length</span><span class="o">);</span>
  <span class="kd">class</span> <span class="nc">Smart</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">InputStream</span> <span class="n">origin</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">Smart</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">stream</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">stream</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">read</span><span class="o">()</span> <span class="o">{</span>
      <span class="kd">final</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">buffer</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
      <span class="kd">final</span> <span class="kt">int</span> <span class="n">read</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buffer</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
      <span class="kd">final</span> <span class="kt">int</span> <span class="n">result</span><span class="o">;</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">read</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">result</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
      <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">buffer</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
      <span class="o">}</span>
      <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Now, we want to read a single byte from the stream. Here is how:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">InputStream</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="s">&quot;/tmp/a.txt&quot;</span><span class="o">);</span>
<span class="kd">final</span> <span class="kt">byte</span> <span class="n">b</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InputStream</span><span class="o">.</span><span class="na">Smart</span><span class="o">(</span><span class="n">input</span><span class="o">).</span><span class="na">read</span><span class="o">();</span></code></pre></figure><p>The functionality of reading a single byte is outside of <code>InputStream</code>, because this is not its business. The stream doesn&#39;t need to know how to manage the data after it is read. All the stream is <strong>responsible</strong> for is reading, not parsing or manipulating afterwards.</p><p>Interfaces must be small.</p><p>Obviously, method overloading in interfaces is a code smell. An interface with more than <strong>three methods</strong> is a good candidate for refactoring. If methods overload each other---it&#39;s serious trouble.</p><p>Interfaces must be small!</p><p>You may say that the creators of <code>InputStream</code> cared about performance, that&#39;s why allowed us to implement <code>read()</code> in three different forms. Then I have to ask again, why not create a method for reading and immediately post it on Twitter? That would be fantastically fast. Isn&#39;t it what we all want? A fast software which nobody has any desire to read or maintain.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Using object properties as configuration parameters for object behavior is a bad practice that leads to bigger and less cohesive objects. " /> <meta name="keywords" content="decorator pattern, decorator pattern java, object configuration, parameters object, settings object" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2016-04-19 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Object Behavior Must Not Be Configurable"/> <meta name="twitter:description" property="og:description" content="Using object properties as configuration parameters for object behavior is a bad practice that leads to bigger and less cohesive objects. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2016/04/19/object-must-not-be-configurable.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2016/04/19/object-must-not-be-configurable.html" /> <link rel="amphtml" href="https://www.yegor256.com/2016/04/19/object-must-not-be-configurable.amp.html" /> <title>Object Behavior Must Not Be Configurable </title> <meta name='og:image' content='https://www.yegor256.com/images/2016/04/the-take.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2016/04/the-take.jpg'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='677'/> <meta name='twitter:image:height' content='677'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='The Take (2009) by David Drury'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2016/04/19/object-must-not-be-configurable.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2016/04/19/object-must-not-be-configurable.html">https://www.yegor256.com/2016/04/19/object-must-not-be-configurable.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Object Behavior Must Not Be Configurable</h1><aside class='book'><a href='http://amzn.to/2pyceWc'><img src='/images/books/elegant-objects/cover.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='http://amzn.to/2pyceWc'>Section&nbsp;5.5</a><br/> of my book<a href='http://amzn.to/2pyceWc'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2016-04-19T00:00:00+00:00"> 19 April 2016 </time> </li> <li class="desktop-only" itemprop="locationCreated">New York, NY</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2016/04/19/object-must-not-be-configurable.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>Using object properties as configuration parameters is a very common mistake we keep making mostly because our objects are mutable---we <strong>configure</strong> them. We change their behavior by injecting parameters or even entire settings/configuration objects into them. Do I have to say that it&#39;s abusive and disrespectful from a <a href="/2014/11/20/seven-virtues-of-good-object.html">philosophical</a> point of view? I can, but let&#39;s take a look at it from a practical perspective.</p><figure class='jb_picture'><img itemprop='image' alt='The Take (2009) by David Drury' src='/images/2016/04/the-take.jpg' longdesc='#b28b6a76'/><figcaption id='b28b6a76'>The Take (2009) by David Drury</figcaption></figure><p>Let&#39;s say there is a class that is supposed to read a web page and return its content:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Page</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">uri</span><span class="o">;</span>
  <span class="n">Page</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">uri</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">html</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">IOUtils</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">uri</span><span class="o">).</span><span class="na">openStream</span><span class="o">(),</span>
      <span class="s">&quot;UTF-8&quot;</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Looks simple and straight-forward, right? Yes, it&#39;s a rather cohesive and solid class. Here is how we use it to read the content of Google front page:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">String</span> <span class="n">html</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Page</span><span class="o">(</span><span class="s">&quot;<a href="http://www.google.com">http://www.google.com</a>&quot;</span><span class="o">).</span><span class="na">html</span><span class="o">();</span></code></pre></figure><p>Everything is fine until we start making this class more powerful. Let&#39;s say we want to configure the encoding. We don&#39;t always want to use <code>&quot;UTF-8&quot;</code>. We want it to be configurable. Here is what we do:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Page</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">uri</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">encoding</span><span class="o">;</span>
  <span class="n">Page</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">address</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">enc</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">uri</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">encoding</span> <span class="o">=</span> <span class="n">enc</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">html</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">IOUtils</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">uri</span><span class="o">).</span><span class="na">openStream</span><span class="o">(),</span>
      <span class="k">this</span><span class="o">.</span><span class="na">encoding</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Done, the encoding is encapsulated and configurable. Now, let&#39;s say we want to change the behavior of the class for the situation of an empty page. If an empty page is loaded, we want to return <code>&quot;&lt;html/&gt;&quot;</code>. But not always. We want this to be configurable. Here is what we do:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Page</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">uri</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">encoding</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">alwaysHtml</span><span class="o">;</span>
  <span class="n">Page</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">address</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">enc</span><span class="o">,</span>
    <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">always</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">uri</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">encoding</span> <span class="o">=</span> <span class="n">enc</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">alwaysHtml</span> <span class="o">=</span> <span class="n">always</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">html</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">html</span> <span class="o">=</span> <span class="n">IOUtils</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">uri</span><span class="o">).</span><span class="na">openStream</span><span class="o">(),</span>
      <span class="k">this</span><span class="o">.</span><span class="na">encoding</span>
    <span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">html</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">alwaysHtml</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">html</span> <span class="o">=</span> <span class="s">&quot;&lt;html/&gt;&quot;</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">html</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>The class is getting bigger, huh? It&#39;s great, we&#39;re good programmers and our code must be complex, right? The more complex it is, the better programmers we are! I&#39;m being sarcastic. Definitely <a href="/2015/06/29/simple-diagrams.html">not</a>! But let&#39;s move on. Now we want our class to proceed anyway, even if the encoding is not supported on the current platform:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Page</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">uri</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">encoding</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">alwaysHtml</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">encodeAnyway</span><span class="o">;</span>
  <span class="n">Page</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">address</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">enc</span><span class="o">,</span>
    <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">always</span><span class="o">,</span> <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">encode</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">uri</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">encoding</span> <span class="o">=</span> <span class="n">enc</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">alwaysHtml</span> <span class="o">=</span> <span class="n">always</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">encodeAnyway</span> <span class="o">=</span> <span class="n">encode</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">html</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span>
  <span class="n">UnsupportedEncodingException</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="n">IOUtils</span><span class="o">.</span><span class="na">toByteArray</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">uri</span><span class="o">).</span><span class="na">openStream</span><span class="o">()</span>
    <span class="o">);</span>
    <span class="n">String</span> <span class="n">html</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">html</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">bytes</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">encoding</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="na">encodeAnyway</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="n">ex</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="n">html</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">bytes</span><span class="o">,</span> <span class="s">&quot;UTF-8&quot;</span><span class="o">)</span>
    <span class="o">}</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">html</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">alwaysHtml</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">html</span> <span class="o">=</span> <span class="s">&quot;&lt;html/&gt;&quot;</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">html</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>The class is growing and becoming more and more powerful! Now it&#39;s time to introduce a new class, which we will call <code>PageSettings</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Page</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">uri</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">PageSettings</span> <span class="n">settings</span><span class="o">;</span>
  <span class="n">Page</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">address</span><span class="o">,</span> <span class="kd">final</span> <span class="n">PageSettings</span> <span class="n">stts</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">uri</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">settings</span> <span class="o">=</span> <span class="n">stts</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">html</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="n">IOUtils</span><span class="o">.</span><span class="na">toByteArray</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">uri</span><span class="o">).</span><span class="na">openStream</span><span class="o">()</span>
    <span class="o">);</span>
    <span class="n">String</span> <span class="n">html</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">html</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">bytes</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">settings</span><span class="o">.</span><span class="na">getEncoding</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="na">settings</span><span class="o">.</span><span class="na">isEncodeAnyway</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="n">ex</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="n">html</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">bytes</span><span class="o">,</span> <span class="s">&quot;UTF-8&quot;</span><span class="o">)</span>
    <span class="o">}</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">html</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">settings</span><span class="o">.</span><span class="na">isAlwaysHtml</span><span class="o">())</span> <span class="o">{</span>
      <span class="n">html</span> <span class="o">=</span> <span class="s">&quot;&lt;html/&gt;&quot;</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">html</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Class <code>PageSettings</code> is basically a holder of parameters, without any behavior. It has getters, which give us access to the parameters: <code>isEncodeAnyway()</code>, <code>isAlwaysHtml()</code>, and <code>getEncoding()</code>. If we keep going in this direction, there could be a few dozen configuration settings in that class. This may look very convenient and is a very typical pattern in Java world. For example, look at <a href="https://hadoop.apache.org/docs/r2.4.1/api/org/apache/hadoop/mapred/JobConf.html"><code>JobConf</code></a> from Hadoop. This is how we will call our highly configurable <code>Page</code> (I&#39;m assuming <code>PageSettings</code> is immutable):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">String</span> <span class="n">html</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Page</span><span class="o">(</span>
  <span class="s">&quot;<a href="http://www.google.com">http://www.google.com</a>&quot;</span><span class="o">,</span>
  <span class="k">new</span> <span class="n">PageSettings</span><span class="o">()</span>
    <span class="o">.</span><span class="na">withEncoding</span><span class="o">(</span><span class="s">&quot;ISO_8859_1&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">withAlwaysHtml</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
    <span class="o">.</span><span class="na">withEncodeAnyway</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span>
<span class="o">).</span><span class="na">html</span><span class="o">();</span></code></pre></figure><p>However, no matter how convenient it may look at first glance, this approach is <strong>very wrong</strong>. Mostly because it encourages us to make big and non-cohesive objects. They grow in size and become less testable, less maintainable and less readable.</p><aside class='quote'>Encapsulated properties must not be used to change the behavior of an object</aside><p>To prevent that from happening, I would suggest a simple rule here: object behavior should not be configurable. Or, more technically, encapsulated properties must not be used to change the behavior of an object.</p><p>Object properties are there only to coordinate the location of a real-world entity, which the object is representing. The <code>uri</code> is the coordinate, while the <code>alwaysHtml</code> boolean property is a behavior changing trigger. See the difference?</p><p>So, what should we do instead? What is the right design? We must use <a href="/2015/02/26/composable-decorators.html">composable decorators</a>. Here is how:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Page</span> <span class="n">page</span> <span class="o">=</span> <span class="k">new</span> <span class="n">NeverEmptyPage</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">DefaultPage</span><span class="o">(</span><span class="s">&quot;<a href="http://www.google.com">http://www.google.com</a>&quot;</span><span class="o">)</span>
<span class="o">)</span>
<span class="n">String</span> <span class="n">html</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AlwaysTextPage</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">TextPage</span><span class="o">(</span><span class="n">page</span><span class="o">,</span> <span class="s">&quot;ISO_8859_1&quot;</span><span class="o">)</span>
  <span class="n">page</span>
<span class="o">).</span><span class="na">html</span><span class="o">();</span></code></pre></figure><p>Here is how our <code>DefaultPage</code> would look (yes, I had to change its design a bit):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">DefaultPage</span> <span class="kd">implements</span> <span class="n">Page</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">uri</span><span class="o">;</span>
  <span class="n">DefaultPage</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">uri</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">byte</span><span class="o">[]</span> <span class="nf">html</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">IOUtils</span><span class="o">.</span><span class="na">toByteArray</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">uri</span><span class="o">).</span><span class="na">openStream</span><span class="o">()</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>As you see, I&#39;m making it implement interface <code>Page</code>. Now <code>TextPage</code> decorator, which converts an array of bytes to a text using provided encoding:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">TextPage</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Page</span> <span class="n">origin</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">encoding</span><span class="o">;</span>
  <span class="n">TextPage</span><span class="o">(</span><span class="kd">final</span> <span class="n">Page</span> <span class="n">page</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">enc</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">page</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">encoding</span> <span class="o">=</span> <span class="n">enc</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">html</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span>
      <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">html</span><span class="o">(),</span>
      <span class="k">this</span><span class="o">.</span><span class="na">encoding</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Now the <code>NeverEmptyPage</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">NeverEmptyPage</span> <span class="kd">implements</span> <span class="n">Page</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Page</span> <span class="n">origin</span><span class="o">;</span>
  <span class="n">NeverEmptyPage</span><span class="o">(</span><span class="kd">final</span> <span class="n">Page</span> <span class="n">page</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">page</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">byte</span><span class="o">[]</span> <span class="nf">html</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">html</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">bytes</span><span class="o">.</span><span class="na">length</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">bytes</span> <span class="o">=</span> <span class="s">&quot;&lt;html/&gt;&quot;</span><span class="o">.</span><span class="na">getBytes</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">bytes</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>And finally the <code>AlwaysTextPage</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">AlwaysTextPage</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">TextPage</span> <span class="n">origin</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Page</span> <span class="n">source</span><span class="o">;</span>
  <span class="n">AlwaysTextPage</span><span class="o">(</span><span class="kd">final</span> <span class="n">TextPage</span> <span class="n">page</span><span class="o">,</span> <span class="kd">final</span> <span class="n">Page</span> <span class="n">src</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">page</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">source</span> <span class="o">=</span> <span class="n">src</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">html</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">html</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">html</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">html</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">html</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TextPage</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">source</span><span class="o">,</span> <span class="s">&quot;UTF-8&quot;</span><span class="o">).</span><span class="na">html</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">html</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>You may say that <code>AlwaysTextPage</code> will make two calls to the encapsulated <code>origin</code>, in case of an unsupported encoding, which will lead to a duplicated HTTP request. That&#39;s true and this is by design. We don&#39;t want this duplicated HTTP roundtrip to happen. Let&#39;s introduce one more class, which will cache the page fetched ( <a href="/2017/01/17/synchronized-decorators.html">not thread-safe</a>, but it&#39;s not important now):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">OncePage</span> <span class="kd">implements</span> <span class="n">Page</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Page</span> <span class="n">origin</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">AtomicReference</span><span class="o">&lt;</span><span class="kt">byte</span><span class="o">[]&gt;</span> <span class="n">cache</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">AtomicReference</span><span class="o">&lt;&gt;;</span>
  <span class="n">OncePage</span><span class="o">(</span><span class="kd">final</span> <span class="n">Page</span> <span class="n">page</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">page</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">byte</span><span class="o">[]</span> <span class="nf">html</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">cache</span><span class="o">.</span><span class="na">get</span><span class="o">()</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">cache</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">html</span><span class="o">());</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">cache</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Now, our code should look like this (pay attention, I&#39;m now using <code>OncePage</code>):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Page</span> <span class="n">page</span> <span class="o">=</span> <span class="k">new</span> <span class="n">NeverEmptyPage</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">OncePage</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">DefaultPage</span><span class="o">(</span><span class="s">&quot;<a href="http://www.google.com">http://www.google.com</a>&quot;</span><span class="o">)</span>
  <span class="o">)</span>
<span class="o">)</span>
<span class="n">String</span> <span class="n">html</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AlwaysTextPage</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">TextPage</span><span class="o">(</span><span class="n">page</span><span class="o">,</span> <span class="s">&quot;ISO_8859_1&quot;</span><span class="o">)</span>
  <span class="s">&quot;UTF-8&quot;</span>
<span class="o">).</span><span class="na">html</span><span class="o">();</span></code></pre></figure><p>This is probably the most code-intensive post on this site so far, but I hope it&#39;s readable and I managed to convey the idea. Now we have five classes, each of which is rather small, easy to read and easy to reuse.</p><p>Just follow the rule: never make classes configurable!</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2016/04/19/object-must-not-be-configurable.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2016/04/19/object-must-not-be-configurable.html&amp;text=Object+Behavior+Must+Not+Be+Configurable" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2016/04/19/object-must-not-be-configurable.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2016/04/19/object-must-not-be-configurable.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2016/04/19/object-must-not-be-configurable.html%3F2016-16&amp;title=Object+Behavior+Must+Not+Be+Configurable" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2016/04/19/object-must-not-be-configurable.html%3F2016-16&amp;t=Object+Behavior+Must+Not+Be+Configurable" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>Using object properties as configuration parameters is a very common mistake we keep making mostly because our objects are mutable---we <strong>configure</strong> them. We change their behavior by injecting parameters or even entire settings/configuration objects into them. Do I have to say that it&#39;s abusive and disrespectful from a <a href="/2014/11/20/seven-virtues-of-good-object.html">philosophical</a> point of view? I can, but let&#39;s take a look at it from a practical perspective.</p><figure class='jb_picture'><img itemprop='image' alt='The Take (2009) by David Drury' src='/images/2016/04/the-take.jpg' longdesc='#b28b6a76'/><figcaption id='b28b6a76'>The Take (2009) by David Drury</figcaption></figure><p>Let&#39;s say there is a class that is supposed to read a web page and return its content:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Page</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">uri</span><span class="o">;</span>
  <span class="n">Page</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">uri</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">html</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">IOUtils</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">uri</span><span class="o">).</span><span class="na">openStream</span><span class="o">(),</span>
      <span class="s">&quot;UTF-8&quot;</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Looks simple and straight-forward, right? Yes, it&#39;s a rather cohesive and solid class. Here is how we use it to read the content of Google front page:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">String</span> <span class="n">html</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Page</span><span class="o">(</span><span class="s">&quot;<a href="http://www.google.com">http://www.google.com</a>&quot;</span><span class="o">).</span><span class="na">html</span><span class="o">();</span></code></pre></figure><p>Everything is fine until we start making this class more powerful. Let&#39;s say we want to configure the encoding. We don&#39;t always want to use <code>&quot;UTF-8&quot;</code>. We want it to be configurable. Here is what we do:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Page</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">uri</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">encoding</span><span class="o">;</span>
  <span class="n">Page</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">address</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">enc</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">uri</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">encoding</span> <span class="o">=</span> <span class="n">enc</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">html</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">IOUtils</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">uri</span><span class="o">).</span><span class="na">openStream</span><span class="o">(),</span>
      <span class="k">this</span><span class="o">.</span><span class="na">encoding</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Done, the encoding is encapsulated and configurable. Now, let&#39;s say we want to change the behavior of the class for the situation of an empty page. If an empty page is loaded, we want to return <code>&quot;&lt;html/&gt;&quot;</code>. But not always. We want this to be configurable. Here is what we do:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Page</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">uri</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">encoding</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">alwaysHtml</span><span class="o">;</span>
  <span class="n">Page</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">address</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">enc</span><span class="o">,</span>
    <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">always</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">uri</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">encoding</span> <span class="o">=</span> <span class="n">enc</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">alwaysHtml</span> <span class="o">=</span> <span class="n">always</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">html</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">html</span> <span class="o">=</span> <span class="n">IOUtils</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">uri</span><span class="o">).</span><span class="na">openStream</span><span class="o">(),</span>
      <span class="k">this</span><span class="o">.</span><span class="na">encoding</span>
    <span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">html</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">alwaysHtml</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">html</span> <span class="o">=</span> <span class="s">&quot;&lt;html/&gt;&quot;</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">html</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>The class is getting bigger, huh? It&#39;s great, we&#39;re good programmers and our code must be complex, right? The more complex it is, the better programmers we are! I&#39;m being sarcastic. Definitely <a href="/2015/06/29/simple-diagrams.html">not</a>! But let&#39;s move on. Now we want our class to proceed anyway, even if the encoding is not supported on the current platform:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Page</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">uri</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">encoding</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">alwaysHtml</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">encodeAnyway</span><span class="o">;</span>
  <span class="n">Page</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">address</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">enc</span><span class="o">,</span>
    <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">always</span><span class="o">,</span> <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">encode</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">uri</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">encoding</span> <span class="o">=</span> <span class="n">enc</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">alwaysHtml</span> <span class="o">=</span> <span class="n">always</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">encodeAnyway</span> <span class="o">=</span> <span class="n">encode</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">html</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span>
  <span class="n">UnsupportedEncodingException</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="n">IOUtils</span><span class="o">.</span><span class="na">toByteArray</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">uri</span><span class="o">).</span><span class="na">openStream</span><span class="o">()</span>
    <span class="o">);</span>
    <span class="n">String</span> <span class="n">html</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">html</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">bytes</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">encoding</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="na">encodeAnyway</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="n">ex</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="n">html</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">bytes</span><span class="o">,</span> <span class="s">&quot;UTF-8&quot;</span><span class="o">)</span>
    <span class="o">}</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">html</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">alwaysHtml</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">html</span> <span class="o">=</span> <span class="s">&quot;&lt;html/&gt;&quot;</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">html</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>The class is growing and becoming more and more powerful! Now it&#39;s time to introduce a new class, which we will call <code>PageSettings</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Page</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">uri</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">PageSettings</span> <span class="n">settings</span><span class="o">;</span>
  <span class="n">Page</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">address</span><span class="o">,</span> <span class="kd">final</span> <span class="n">PageSettings</span> <span class="n">stts</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">uri</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">settings</span> <span class="o">=</span> <span class="n">stts</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">html</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="n">IOUtils</span><span class="o">.</span><span class="na">toByteArray</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">uri</span><span class="o">).</span><span class="na">openStream</span><span class="o">()</span>
    <span class="o">);</span>
    <span class="n">String</span> <span class="n">html</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">html</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">bytes</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">settings</span><span class="o">.</span><span class="na">getEncoding</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="na">settings</span><span class="o">.</span><span class="na">isEncodeAnyway</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="n">ex</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="n">html</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">bytes</span><span class="o">,</span> <span class="s">&quot;UTF-8&quot;</span><span class="o">)</span>
    <span class="o">}</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">html</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">settings</span><span class="o">.</span><span class="na">isAlwaysHtml</span><span class="o">())</span> <span class="o">{</span>
      <span class="n">html</span> <span class="o">=</span> <span class="s">&quot;&lt;html/&gt;&quot;</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">html</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Class <code>PageSettings</code> is basically a holder of parameters, without any behavior. It has getters, which give us access to the parameters: <code>isEncodeAnyway()</code>, <code>isAlwaysHtml()</code>, and <code>getEncoding()</code>. If we keep going in this direction, there could be a few dozen configuration settings in that class. This may look very convenient and is a very typical pattern in Java world. For example, look at <a href="https://hadoop.apache.org/docs/r2.4.1/api/org/apache/hadoop/mapred/JobConf.html"><code>JobConf</code></a> from Hadoop. This is how we will call our highly configurable <code>Page</code> (I&#39;m assuming <code>PageSettings</code> is immutable):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">String</span> <span class="n">html</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Page</span><span class="o">(</span>
  <span class="s">&quot;<a href="http://www.google.com">http://www.google.com</a>&quot;</span><span class="o">,</span>
  <span class="k">new</span> <span class="n">PageSettings</span><span class="o">()</span>
    <span class="o">.</span><span class="na">withEncoding</span><span class="o">(</span><span class="s">&quot;ISO_8859_1&quot;</span><span class="o">)</span>
    <span class="o">.</span><span class="na">withAlwaysHtml</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
    <span class="o">.</span><span class="na">withEncodeAnyway</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span>
<span class="o">).</span><span class="na">html</span><span class="o">();</span></code></pre></figure><p>However, no matter how convenient it may look at first glance, this approach is <strong>very wrong</strong>. Mostly because it encourages us to make big and non-cohesive objects. They grow in size and become less testable, less maintainable and less readable.</p><aside class='quote'>Encapsulated properties must not be used to change the behavior of an object</aside><p>To prevent that from happening, I would suggest a simple rule here: object behavior should not be configurable. Or, more technically, encapsulated properties must not be used to change the behavior of an object.</p><p>Object properties are there only to coordinate the location of a real-world entity, which the object is representing. The <code>uri</code> is the coordinate, while the <code>alwaysHtml</code> boolean property is a behavior changing trigger. See the difference?</p><p>So, what should we do instead? What is the right design? We must use <a href="/2015/02/26/composable-decorators.html">composable decorators</a>. Here is how:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Page</span> <span class="n">page</span> <span class="o">=</span> <span class="k">new</span> <span class="n">NeverEmptyPage</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">DefaultPage</span><span class="o">(</span><span class="s">&quot;<a href="http://www.google.com">http://www.google.com</a>&quot;</span><span class="o">)</span>
<span class="o">)</span>
<span class="n">String</span> <span class="n">html</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AlwaysTextPage</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">TextPage</span><span class="o">(</span><span class="n">page</span><span class="o">,</span> <span class="s">&quot;ISO_8859_1&quot;</span><span class="o">)</span>
  <span class="n">page</span>
<span class="o">).</span><span class="na">html</span><span class="o">();</span></code></pre></figure><p>Here is how our <code>DefaultPage</code> would look (yes, I had to change its design a bit):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">DefaultPage</span> <span class="kd">implements</span> <span class="n">Page</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">uri</span><span class="o">;</span>
  <span class="n">DefaultPage</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">uri</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">byte</span><span class="o">[]</span> <span class="nf">html</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">IOUtils</span><span class="o">.</span><span class="na">toByteArray</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">uri</span><span class="o">).</span><span class="na">openStream</span><span class="o">()</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>As you see, I&#39;m making it implement interface <code>Page</code>. Now <code>TextPage</code> decorator, which converts an array of bytes to a text using provided encoding:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">TextPage</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Page</span> <span class="n">origin</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">encoding</span><span class="o">;</span>
  <span class="n">TextPage</span><span class="o">(</span><span class="kd">final</span> <span class="n">Page</span> <span class="n">page</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">enc</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">page</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">encoding</span> <span class="o">=</span> <span class="n">enc</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">html</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span>
      <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">html</span><span class="o">(),</span>
      <span class="k">this</span><span class="o">.</span><span class="na">encoding</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Now the <code>NeverEmptyPage</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">NeverEmptyPage</span> <span class="kd">implements</span> <span class="n">Page</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Page</span> <span class="n">origin</span><span class="o">;</span>
  <span class="n">NeverEmptyPage</span><span class="o">(</span><span class="kd">final</span> <span class="n">Page</span> <span class="n">page</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">page</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">byte</span><span class="o">[]</span> <span class="nf">html</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">html</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">bytes</span><span class="o">.</span><span class="na">length</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">bytes</span> <span class="o">=</span> <span class="s">&quot;&lt;html/&gt;&quot;</span><span class="o">.</span><span class="na">getBytes</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">bytes</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>And finally the <code>AlwaysTextPage</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">AlwaysTextPage</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">TextPage</span> <span class="n">origin</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Page</span> <span class="n">source</span><span class="o">;</span>
  <span class="n">AlwaysTextPage</span><span class="o">(</span><span class="kd">final</span> <span class="n">TextPage</span> <span class="n">page</span><span class="o">,</span> <span class="kd">final</span> <span class="n">Page</span> <span class="n">src</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">page</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">source</span> <span class="o">=</span> <span class="n">src</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">html</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">html</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">html</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">html</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">html</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TextPage</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">source</span><span class="o">,</span> <span class="s">&quot;UTF-8&quot;</span><span class="o">).</span><span class="na">html</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">html</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>You may say that <code>AlwaysTextPage</code> will make two calls to the encapsulated <code>origin</code>, in case of an unsupported encoding, which will lead to a duplicated HTTP request. That&#39;s true and this is by design. We don&#39;t want this duplicated HTTP roundtrip to happen. Let&#39;s introduce one more class, which will cache the page fetched ( <a href="/2017/01/17/synchronized-decorators.html">not thread-safe</a>, but it&#39;s not important now):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">OncePage</span> <span class="kd">implements</span> <span class="n">Page</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Page</span> <span class="n">origin</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">AtomicReference</span><span class="o">&lt;</span><span class="kt">byte</span><span class="o">[]&gt;</span> <span class="n">cache</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">AtomicReference</span><span class="o">&lt;&gt;;</span>
  <span class="n">OncePage</span><span class="o">(</span><span class="kd">final</span> <span class="n">Page</span> <span class="n">page</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">page</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">byte</span><span class="o">[]</span> <span class="nf">html</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">cache</span><span class="o">.</span><span class="na">get</span><span class="o">()</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">cache</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">html</span><span class="o">());</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">cache</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Now, our code should look like this (pay attention, I&#39;m now using <code>OncePage</code>):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Page</span> <span class="n">page</span> <span class="o">=</span> <span class="k">new</span> <span class="n">NeverEmptyPage</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">OncePage</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">DefaultPage</span><span class="o">(</span><span class="s">&quot;<a href="http://www.google.com">http://www.google.com</a>&quot;</span><span class="o">)</span>
  <span class="o">)</span>
<span class="o">)</span>
<span class="n">String</span> <span class="n">html</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AlwaysTextPage</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">TextPage</span><span class="o">(</span><span class="n">page</span><span class="o">,</span> <span class="s">&quot;ISO_8859_1&quot;</span><span class="o">)</span>
  <span class="s">&quot;UTF-8&quot;</span>
<span class="o">).</span><span class="na">html</span><span class="o">();</span></code></pre></figure><p>This is probably the most code-intensive post on this site so far, but I hope it&#39;s readable and I managed to convey the idea. Now we have five classes, each of which is rather small, easy to read and easy to reuse.</p><p>Just follow the rule: never make classes configurable!</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Even though Java annotations are very popular and convenient, they are making Java code less object-oriented and more messy. " /> <meta name="keywords" content="java annotations, java annotations example, java annotations list, java annotations runtime, java annotations tutorial" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2016-04-12 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Java Annotations Are a Big Mistake"/> <meta name="twitter:description" property="og:description" content="Even though Java annotations are very popular and convenient, they are making Java code less object-oriented and more messy. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2016/04/12/java-annotations-are-evil.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2016/04/12/java-annotations-are-evil.html" /> <link rel="amphtml" href="https://www.yegor256.com/2016/04/12/java-annotations-are-evil.amp.html" /> <title>Java Annotations Are a Big Mistake </title> <meta name='og:image' content='https://www.yegor256.com/images/2016/04/gomorrah.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2016/04/gomorrah.jpg'/><meta name='og:image:width' content='1280'/> <meta name='twitter:image:width' content='1280'/><meta name='og:image:height' content='852'/> <meta name='twitter:image:height' content='852'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Gomorra (2008) by Matteo Garrone)'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2016/04/12/java-annotations-are-evil.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2016/04/12/java-annotations-are-evil.html">https://www.yegor256.com/2016/04/12/java-annotations-are-evil.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Java Annotations Are a Big Mistake</h1><aside class='book'><a href='http://amzn.to/2pyceWc'><img src='/images/books/elegant-objects/cover.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='http://amzn.to/2pyceWc'>Section&nbsp;6.1</a><br/> of my book<a href='http://amzn.to/2pyceWc'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2016-04-12T00:00:00+00:00"> 12 April 2016 </time> </li> <li class="desktop-only" itemprop="locationCreated">Seattle, WA</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2016/04/12/java-annotations-are-evil.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p><a href="https://en.wikipedia.org/wiki/Java_annotation">Annotations</a> were introduced in Java 5, and we all got excited. Such a great instrument to make code shorter! No more Hibernate/Spring XML configuration files! Just annotations, right there in the code where we need them. No more <a href="https://en.wikipedia.org/wiki/Marker_interface_pattern">marker interfaces</a>, just a <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Retention.html">runtime-retained</a> <a href="http://stackoverflow.com/questions/4296910/">reflection-discoverable</a> annotation! I was excited too. Moreover, I&#39;ve made a few open source libraries which use annotations heavily. Take <a href="https://github.com/jcabi/jcabi-aspects">jcabi-aspects</a>, for example. However, I&#39;m not excited any more. Moreover, I believe that annotations are a big mistake in Java design.</p><figure class='jb_picture'><img itemprop='image' alt='Gomorra (2008) by Matteo Garrone)' src='/images/2016/04/gomorrah.jpg' longdesc='#8ef9c86b'/><figcaption id='8ef9c86b'>Gomorra (2008) by Matteo Garrone)</figcaption></figure> <aside class='youtube'> <a href='https://www.youtube.com/watch?v=g1ctRcW214w'><div class='box'> <img src='https://i.ytimg.com/vi/g1ctRcW214w/mqdefault.jpg' alt='YouTube video #g1ctRcW214w'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Java Annotations Are a Big Mistake (webinar #14); 4 May 2016.</div></aside><p>Long story short, there is one big problem with annotations---they encourage us to implement <a href="/2014/11/20/seven-virtues-of-good-object.html">object</a> functionality <strong>outside</strong> of an object, which is against the very principle of <a href="/2016/11/21/naked-data.html">encapsulation</a>. The object is not solid any more, since its behavior is not defined entirely by its own methods---some of its functionality stays elsewhere. Why is it bad? Let&#39;s see in a few examples.</p><h2 id="inject"><code>@Inject</code></h2><p>Say we annotate a property with <code>@Inject</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">javax.inject.Inject</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Books</span> <span class="o">{</span>
  <span class="nd">@Inject</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">DB</span> <span class="n">db</span><span class="o">;</span>
  <span class="c1">// some methods here, which use this.db</span>
<span class="o">}</span></code></pre></figure><p>Then we have an injector that knows what to inject:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Injector</span> <span class="n">injector</span> <span class="o">=</span> <span class="n">Guice</span><span class="o">.</span><span class="na">createInjector</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">AbstractModule</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">bind</span><span class="o">(</span><span class="n">DB</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">toInstance</span><span class="o">(</span>
        <span class="k">new</span> <span class="n">Postgres</span><span class="o">(</span><span class="s">&quot;jdbc:postgresql:5740/main&quot;</span><span class="o">)</span>
      <span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">);</span></code></pre></figure><p>Now we&#39;re making an instance of class <code>Books</code> via the container:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Books</span> <span class="n">books</span> <span class="o">=</span> <span class="n">injector</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">Books</span><span class="o">.</span><span class="na">class</span><span class="o">);</span></code></pre></figure><p>The class <code>Books</code> has no idea how and who will inject an instance of class <code>DB</code> into it. This will happen behind the scenes and outside of its control. The injection will do it. It may look convenient, but this attitude causes a lot of damage to the entire code base. The control is lost (not inverted, but lost!). The object is not in charge any more. It can&#39;t be responsible for what&#39;s happening to it.</p><p>Instead, here is how this should be done:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Books</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">DB</span> <span class="n">db</span><span class="o">;</span>
  <span class="n">Books</span><span class="o">(</span><span class="kd">final</span> <span class="n">DB</span> <span class="n">base</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">db</span> <span class="o">=</span> <span class="n">base</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="c1">// some methods here, which use this.db</span>
<span class="o">}</span></code></pre></figure><p>This article explains why Dependency Injection containers are a wrong idea in the first place: <a href="/2014/10/03/di-containers-are-evil.html">Dependency Injection Containers are Code Polluters</a>. Annotations basically provoke us to make the containers and use them. We move functionality outside of our objects and put it into containers, or somewhere else. That&#39;s because we don&#39;t want to duplicate the same code over and over again, right? That&#39;s correct, duplication is bad, but tearing an object apart is even worse. Way worse. The same is true about ORM (JPA/Hibernate), where annotations are being actively used. Check this post, it explains what is wrong about ORM: <a href="/2014/12/01/orm-offensive-anti-pattern.html">ORM Is an Offensive Anti-Pattern</a>. Annotations by themselves are not the key motivator, but they help us and encourage us by tearing objects apart and keeping parts in different places. They are containers, sessions, managers, controllers, etc.</p><h2 id="xmlelement"><code>@XmlElement</code></h2><aside class='youtube'> <a href='https://www.youtube.com/watch?v=oV6Utb5Jows'><div class='box'> <img src='https://i.ytimg.com/vi/oV6Utb5Jows/mqdefault.jpg' alt='YouTube video #oV6Utb5Jows'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Dependency Injection Container is a Bad Idea (webinar #9); 1 December 2015.</div></aside><p>This is how JAXB <a href="/2015/03/26/jaxb-vs-xembly.html">works</a>, when you want to convert your <a href="https://en.wikipedia.org/wiki/Plain_Old_Java_Object">POJO</a> to XML. First, you attach the <code>@XmlElement</code> annotation to the getter:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">javax.xml.bind.annotation.XmlElement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.xml.bind.annotation.XmlRootElement</span><span class="o">;</span>
<span class="nd">@XmlRootElement</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Book</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@XmlElement</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTitle</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">title</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Then, you create a marshaller and ask it to convert an instance of class <code>Book</code> into XML:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">Book</span> <span class="n">book</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Book</span><span class="o">(</span><span class="s">&quot;0132350882&quot;</span><span class="o">,</span> <span class="s">&quot;Clean Code&quot;</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">JAXBContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="n">JAXBContext</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="n">Book</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">Marshaller</span> <span class="n">marshaller</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">createMarshaller</span><span class="o">();</span>
<span class="n">marshaller</span><span class="o">.</span><span class="na">marshal</span><span class="o">(</span><span class="n">book</span><span class="o">,</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">);</span></code></pre></figure> <aside class='youtube'> <a href='https://www.youtube.com/watch?v=cv23Z6xpwDw'><div class='box'> <img src='https://i.ytimg.com/vi/cv23Z6xpwDw/mqdefault.jpg' alt='YouTube video #cv23Z6xpwDw'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Java Annotations Are a Bad Idea; 20 June 2017.</div></aside><p>Who is creating the XML? Not the <code>book</code>. Someone else, outside of the class <code>Book</code>. This is very wrong. Instead, this is how this should have been done. First, the class that has no idea about XML:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">DefaultBook</span> <span class="kd">implements</span> <span class="n">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>
  <span class="n">DefaultBook</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTitle</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">title</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Then, the <a href="/2015/02/26/composable-decorators.html">decorator</a> that prints it to the XML:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">XmlBook</span> <span class="kd">implements</span> <span class="n">Book</span><span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Book</span> <span class="n">origin</span><span class="o">;</span>
  <span class="n">XmlBook</span><span class="o">(</span><span class="kd">final</span> <span class="n">Book</span> <span class="n">book</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">book</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTitle</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">getTitle</span><span class="o">();</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toXML</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
      <span class="s">&quot;&lt;book&gt;&lt;title&gt;%s&lt;/title&gt;&lt;/book&gt;&quot;</span><span class="o">,</span>
      <span class="k">this</span><span class="o">.</span><span class="na">getTitle</span><span class="o">()</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Now, in order to <a href="/2016/04/05/printers-instead-of-getters.html">print</a> the book in XML we do the following:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">String</span> <span class="n">xml</span> <span class="o">=</span> <span class="k">new</span> <span class="n">XmlBook</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">DefaultBook</span><span class="o">(</span><span class="s">&quot;Elegant Objects&quot;</span><span class="o">)</span>
<span class="o">).</span><span class="na">toXML</span><span class="o">();</span></code></pre></figure><p>The XML printing functionality is inside <code>XmlBook</code>. If you don&#39;t like the decorator idea, you can move the <code>toXML()</code> method to the <code>DefaultBook</code> class. It&#39;s not important. What is important is that the functionality always stays where it belongs---inside the object. Only the object knows how to <a href="/2016/04/05/printers-instead-of-getters.html">print itself</a> to the XML. Nobody else!</p><h2 id="retryonfailure"><code>@RetryOnFailure</code></h2><p>Here is an example (from <a href="/2014/08/15/retry-java-method-on-exception.html">my own library</a>):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">com.jcabi.aspects.RetryOnFailure</span><span class="o">;</span>
<span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="nd">@RetryOnFailure</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">load</span><span class="o">(</span><span class="n">URL</span> <span class="n">url</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">().</span><span class="na">getContent</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>After compilation, we run a so called <a href="/2014/06/01/aop-aspectj-java-method-logging.html">AOP weaver</a> that technically turns our code into something like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">load</span><span class="o">(</span><span class="n">URL</span> <span class="n">url</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">try</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n"><em>Foo</span><span class="o">.</span><span class="na">load</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
      <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// ignore it</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="kd">class</span> <span class="nc">_Foo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">load</span><span class="o">(</span><span class="n">URL</span> <span class="n">url</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">().</span><span class="na">getContent</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>I simplified the actual algorithm of retrying a method call on failure, but I&#39;m sure you get the idea. <a href="http://www.eclipse.org/aspectj/">AspectJ</a>, the <a href="http://en.wikipedia.org/wiki/Aspect-oriented_programming">AOP</a> engine, uses <a href="http://aspects.jcabi.com/annotation-retryonfailure.html"><code>@RetryOnFailure</code></a> annotation as a signal, informing us that the class has to be wrapped into another one. This is happening behind the scenes. We don&#39;t see that supplementary class, which implements the retrying algorithm. But the bytecode produced by the AspectJ weaver contains a modified version of class <code>Foo</code>.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=WSgP85kr6eU'><div class='box'> <img src='https://i.ytimg.com/vi/WSgP85kr6eU/mqdefault.jpg' alt='YouTube video #WSgP85kr6eU'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Why Getters-and-Setters Is An Anti-Pattern? (webinar #4); 1 July 2015.</div></aside><p>That is exactly what is wrong with this approach---we don&#39;t see and don&#39;t control the instantiation of that supplementary object. Object composition, which is the most important process in object design, is hidden somewhere behind the scenes. You may say that we don&#39;t need to see it since it&#39;s supplementary. I disagree. We must see how our objects are composed. We may not care about how they work, but we must see the entire composition process.</p><p>A much better design would look like this (instead of annotations):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Foo</span> <span class="n">foo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FooThatRetries</span><span class="o">(</span><span class="k">new</span> <span class="n">Foo</span><span class="o">());</span></code></pre></figure><p>And then, the implementation of <code>FooThatRetries</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">FooThatRetries</span> <span class="kd">implements</span> <span class="n">Foo</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Foo</span> <span class="n">origin</span><span class="o">;</span>
  <span class="n">FooThatRetries</span><span class="o">(</span><span class="n">Foo</span> <span class="n">foo</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">foo</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">load</span><span class="o">(</span><span class="n">URL</span> <span class="n">url</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Retry</span><span class="o">().</span><span class="na">eval</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Retry</span><span class="o">.</span><span class="na">Algorithm</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">eval</span><span class="o">()</span> <span class="o">{</span>
          <span class="k">return</span> <span class="n">FooThatRetries</span><span class="o">.</span><span class="na">this</span><span class="o">.</span><span class="na">load</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>And now, the implementation of <code>Retry</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Retry</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">T</span> <span class="nf">eval</span><span class="o">(</span><span class="n">Retry</span><span class="o">.</span><span class="na">Algorithm</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">algo</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">try</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">algo</span><span class="o">.</span><span class="na">eval</span><span class="o">();</span>
      <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// ignore it</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="kd">interface</span> <span class="nc">Algorithm</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="n">T</span> <span class="nf">eval</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Is the code longer? Yes. Is it cleaner? A lot more. I regret that I didn&#39;t understand it two years ago, when I started to work with <a href="https://github.com/jcabi/jcabi-aspects">jcabi-aspects</a>.</p><hr/><p>The bottom line is that annotations are bad. Don&#39;t use them. What should be used instead? Object <a href="/2015/02/26/composable-decorators.html">composition</a>.</p><p>What could be worse than annotations? <a href="/2016/04/19/object-must-not-be-configurable.html">Configurations</a>. For example, XML configurations. Spring XML configuration mechanisms is a perfect example of terrible design. I&#39;ve said it many times before. Let me repeat it again---Spring Framework is one of the worst software products in the Java world. If you can stay away from it, you will do yourself a big favor.</p><p>There should not be any &quot;configurations&quot; in <a href="/2016/08/15/what-is-wrong-object-oriented-programming.html">OOP</a>. We can&#39;t configure our objects if they are real objects. We can only instantiate them. And the best method of instantiation is operator <code>new</code>. This operator is the key instrument for an OOP developer. Taking it away from us and giving us &quot;configuration mechanisms&quot; is an unforgivable <a href="/2015/11/24/imprisonment-for-irresponsible-coding.html">crime</a>.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2016/04/12/java-annotations-are-evil.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2016/04/12/java-annotations-are-evil.html&amp;text=Java+Annotations+Are+a+Big+Mistake" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2016/04/12/java-annotations-are-evil.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2016/04/12/java-annotations-are-evil.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2016/04/12/java-annotations-are-evil.html%3F2016-15&amp;title=Java+Annotations+Are+a+Big+Mistake" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2016/04/12/java-annotations-are-evil.html%3F2016-15&amp;t=Java+Annotations+Are+a+Big+Mistake" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p><a href="https://en.wikipedia.org/wiki/Java_annotation">Annotations</a> were introduced in Java 5, and we all got excited. Such a great instrument to make code shorter! No more Hibernate/Spring XML configuration files! Just annotations, right there in the code where we need them. No more <a href="https://en.wikipedia.org/wiki/Marker_interface_pattern">marker interfaces</a>, just a <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Retention.html">runtime-retained</a> <a href="http://stackoverflow.com/questions/4296910/">reflection-discoverable</a> annotation! I was excited too. Moreover, I&#39;ve made a few open source libraries which use annotations heavily. Take <a href="https://github.com/jcabi/jcabi-aspects">jcabi-aspects</a>, for example. However, I&#39;m not excited any more. Moreover, I believe that annotations are a big mistake in Java design.</p><figure class='jb_picture'><img itemprop='image' alt='Gomorra (2008) by Matteo Garrone)' src='/images/2016/04/gomorrah.jpg' longdesc='#8ef9c86b'/><figcaption id='8ef9c86b'>Gomorra (2008) by Matteo Garrone)</figcaption></figure> <aside class='youtube'> <a href='https://www.youtube.com/watch?v=g1ctRcW214w'><div class='box'> <img src='https://i.ytimg.com/vi/g1ctRcW214w/mqdefault.jpg' alt='YouTube video #g1ctRcW214w'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Java Annotations Are a Big Mistake (webinar #14); 4 May 2016.</div></aside><p>Long story short, there is one big problem with annotations---they encourage us to implement <a href="/2014/11/20/seven-virtues-of-good-object.html">object</a> functionality <strong>outside</strong> of an object, which is against the very principle of <a href="/2016/11/21/naked-data.html">encapsulation</a>. The object is not solid any more, since its behavior is not defined entirely by its own methods---some of its functionality stays elsewhere. Why is it bad? Let&#39;s see in a few examples.</p><h2 id="inject"><code>@Inject</code></h2><p>Say we annotate a property with <code>@Inject</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">javax.inject.Inject</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Books</span> <span class="o">{</span>
  <span class="nd">@Inject</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">DB</span> <span class="n">db</span><span class="o">;</span>
  <span class="c1">// some methods here, which use this.db</span>
<span class="o">}</span></code></pre></figure><p>Then we have an injector that knows what to inject:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Injector</span> <span class="n">injector</span> <span class="o">=</span> <span class="n">Guice</span><span class="o">.</span><span class="na">createInjector</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">AbstractModule</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">bind</span><span class="o">(</span><span class="n">DB</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">toInstance</span><span class="o">(</span>
        <span class="k">new</span> <span class="n">Postgres</span><span class="o">(</span><span class="s">&quot;jdbc:postgresql:5740/main&quot;</span><span class="o">)</span>
      <span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">);</span></code></pre></figure><p>Now we&#39;re making an instance of class <code>Books</code> via the container:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Books</span> <span class="n">books</span> <span class="o">=</span> <span class="n">injector</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">Books</span><span class="o">.</span><span class="na">class</span><span class="o">);</span></code></pre></figure><p>The class <code>Books</code> has no idea how and who will inject an instance of class <code>DB</code> into it. This will happen behind the scenes and outside of its control. The injection will do it. It may look convenient, but this attitude causes a lot of damage to the entire code base. The control is lost (not inverted, but lost!). The object is not in charge any more. It can&#39;t be responsible for what&#39;s happening to it.</p><p>Instead, here is how this should be done:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Books</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">DB</span> <span class="n">db</span><span class="o">;</span>
  <span class="n">Books</span><span class="o">(</span><span class="kd">final</span> <span class="n">DB</span> <span class="n">base</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">db</span> <span class="o">=</span> <span class="n">base</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="c1">// some methods here, which use this.db</span>
<span class="o">}</span></code></pre></figure><p>This article explains why Dependency Injection containers are a wrong idea in the first place: <a href="/2014/10/03/di-containers-are-evil.html">Dependency Injection Containers are Code Polluters</a>. Annotations basically provoke us to make the containers and use them. We move functionality outside of our objects and put it into containers, or somewhere else. That&#39;s because we don&#39;t want to duplicate the same code over and over again, right? That&#39;s correct, duplication is bad, but tearing an object apart is even worse. Way worse. The same is true about ORM (JPA/Hibernate), where annotations are being actively used. Check this post, it explains what is wrong about ORM: <a href="/2014/12/01/orm-offensive-anti-pattern.html">ORM Is an Offensive Anti-Pattern</a>. Annotations by themselves are not the key motivator, but they help us and encourage us by tearing objects apart and keeping parts in different places. They are containers, sessions, managers, controllers, etc.</p><h2 id="xmlelement"><code>@XmlElement</code></h2><aside class='youtube'> <a href='https://www.youtube.com/watch?v=oV6Utb5Jows'><div class='box'> <img src='https://i.ytimg.com/vi/oV6Utb5Jows/mqdefault.jpg' alt='YouTube video #oV6Utb5Jows'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Dependency Injection Container is a Bad Idea (webinar #9); 1 December 2015.</div></aside><p>This is how JAXB <a href="/2015/03/26/jaxb-vs-xembly.html">works</a>, when you want to convert your <a href="https://en.wikipedia.org/wiki/Plain_Old_Java_Object">POJO</a> to XML. First, you attach the <code>@XmlElement</code> annotation to the getter:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">javax.xml.bind.annotation.XmlElement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.xml.bind.annotation.XmlRootElement</span><span class="o">;</span>
<span class="nd">@XmlRootElement</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Book</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@XmlElement</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTitle</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">title</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Then, you create a marshaller and ask it to convert an instance of class <code>Book</code> into XML:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">Book</span> <span class="n">book</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Book</span><span class="o">(</span><span class="s">&quot;0132350882&quot;</span><span class="o">,</span> <span class="s">&quot;Clean Code&quot;</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">JAXBContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="n">JAXBContext</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="n">Book</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">Marshaller</span> <span class="n">marshaller</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">createMarshaller</span><span class="o">();</span>
<span class="n">marshaller</span><span class="o">.</span><span class="na">marshal</span><span class="o">(</span><span class="n">book</span><span class="o">,</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">);</span></code></pre></figure> <aside class='youtube'> <a href='https://www.youtube.com/watch?v=cv23Z6xpwDw'><div class='box'> <img src='https://i.ytimg.com/vi/cv23Z6xpwDw/mqdefault.jpg' alt='YouTube video #cv23Z6xpwDw'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Java Annotations Are a Bad Idea; 20 June 2017.</div></aside><p>Who is creating the XML? Not the <code>book</code>. Someone else, outside of the class <code>Book</code>. This is very wrong. Instead, this is how this should have been done. First, the class that has no idea about XML:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">DefaultBook</span> <span class="kd">implements</span> <span class="n">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>
  <span class="n">DefaultBook</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTitle</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">title</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Then, the <a href="/2015/02/26/composable-decorators.html">decorator</a> that prints it to the XML:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">XmlBook</span> <span class="kd">implements</span> <span class="n">Book</span><span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Book</span> <span class="n">origin</span><span class="o">;</span>
  <span class="n">XmlBook</span><span class="o">(</span><span class="kd">final</span> <span class="n">Book</span> <span class="n">book</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">book</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTitle</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">getTitle</span><span class="o">();</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toXML</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
      <span class="s">&quot;&lt;book&gt;&lt;title&gt;%s&lt;/title&gt;&lt;/book&gt;&quot;</span><span class="o">,</span>
      <span class="k">this</span><span class="o">.</span><span class="na">getTitle</span><span class="o">()</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Now, in order to <a href="/2016/04/05/printers-instead-of-getters.html">print</a> the book in XML we do the following:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">String</span> <span class="n">xml</span> <span class="o">=</span> <span class="k">new</span> <span class="n">XmlBook</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">DefaultBook</span><span class="o">(</span><span class="s">&quot;Elegant Objects&quot;</span><span class="o">)</span>
<span class="o">).</span><span class="na">toXML</span><span class="o">();</span></code></pre></figure><p>The XML printing functionality is inside <code>XmlBook</code>. If you don&#39;t like the decorator idea, you can move the <code>toXML()</code> method to the <code>DefaultBook</code> class. It&#39;s not important. What is important is that the functionality always stays where it belongs---inside the object. Only the object knows how to <a href="/2016/04/05/printers-instead-of-getters.html">print itself</a> to the XML. Nobody else!</p><h2 id="retryonfailure"><code>@RetryOnFailure</code></h2><p>Here is an example (from <a href="/2014/08/15/retry-java-method-on-exception.html">my own library</a>):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">com.jcabi.aspects.RetryOnFailure</span><span class="o">;</span>
<span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="nd">@RetryOnFailure</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">load</span><span class="o">(</span><span class="n">URL</span> <span class="n">url</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">().</span><span class="na">getContent</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>After compilation, we run a so called <a href="/2014/06/01/aop-aspectj-java-method-logging.html">AOP weaver</a> that technically turns our code into something like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">load</span><span class="o">(</span><span class="n">URL</span> <span class="n">url</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">try</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">_Foo</span><span class="o">.</span><span class="na">load</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
      <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// ignore it</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="kd">class</span> <span class="nc">_Foo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">load</span><span class="o">(</span><span class="n">URL</span> <span class="n">url</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">().</span><span class="na">getContent</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>I simplified the actual algorithm of retrying a method call on failure, but I&#39;m sure you get the idea. <a href="http://www.eclipse.org/aspectj/">AspectJ</a>, the <a href="http://en.wikipedia.org/wiki/Aspect-oriented_programming">AOP</a> engine, uses <a href="http://aspects.jcabi.com/annotation-retryonfailure.html"><code>@RetryOnFailure</code></a> annotation as a signal, informing us that the class has to be wrapped into another one. This is happening behind the scenes. We don&#39;t see that supplementary class, which implements the retrying algorithm. But the bytecode produced by the AspectJ weaver contains a modified version of class <code>Foo</code>.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=WSgP85kr6eU'><div class='box'> <img src='https://i.ytimg.com/vi/WSgP85kr6eU/mqdefault.jpg' alt='YouTube video #WSgP85kr6eU'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Why Getters-and-Setters Is An Anti-Pattern? (webinar #4); 1 July 2015.</div></aside><p>That is exactly what is wrong with this approach---we don&#39;t see and don&#39;t control the instantiation of that supplementary object. Object composition, which is the most important process in object design, is hidden somewhere behind the scenes. You may say that we don&#39;t need to see it since it&#39;s supplementary. I disagree. We must see how our objects are composed. We may not care about how they work, but we must see the entire composition process.</p><p>A much better design would look like this (instead of annotations):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Foo</span> <span class="n">foo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FooThatRetries</span><span class="o">(</span><span class="k">new</span> <span class="n">Foo</span><span class="o">());</span></code></pre></figure><p>And then, the implementation of <code>FooThatRetries</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">FooThatRetries</span> <span class="kd">implements</span> <span class="n">Foo</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Foo</span> <span class="n">origin</span><span class="o">;</span>
  <span class="n">FooThatRetries</span><span class="o">(</span><span class="n">Foo</span> <span class="n">foo</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">foo</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">load</span><span class="o">(</span><span class="n">URL</span> <span class="n">url</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Retry</span><span class="o">().</span><span class="na">eval</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Retry</span><span class="o">.</span><span class="na">Algorithm</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">eval</span><span class="o">()</span> <span class="o">{</span>
          <span class="k">return</span> <span class="n">FooThatRetries</span><span class="o">.</span><span class="na">this</span><span class="o">.</span><span class="na">load</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>And now, the implementation of <code>Retry</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Retry</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">T</span> <span class="nf">eval</span><span class="o">(</span><span class="n">Retry</span><span class="o">.</span><span class="na">Algorithm</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">algo</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">try</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">algo</span><span class="o">.</span><span class="na">eval</span><span class="o">();</span>
      <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// ignore it</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="kd">interface</span> <span class="nc">Algorithm</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="n">T</span> <span class="nf">eval</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Is the code longer? Yes. Is it cleaner? A lot more. I regret that I didn&#39;t understand it two years ago, when I started to work with <a href="https://github.com/jcabi/jcabi-aspects">jcabi-aspects</a>.</p><hr/><p>The bottom line is that annotations are bad. Don&#39;t use them. What should be used instead? Object <a href="/2015/02/26/composable-decorators.html">composition</a>.</p><p>What could be worse than annotations? <a href="/2016/04/19/object-must-not-be-configurable.html">Configurations</a>. For example, XML configurations. Spring XML configuration mechanisms is a perfect example of terrible design. I&#39;ve said it many times before. Let me repeat it again---Spring Framework is one of the worst software products in the Java world. If you can stay away from it, you will do yourself a big favor.</p><p>There should not be any &quot;configurations&quot; in <a href="/2016/08/15/what-is-wrong-object-oriented-programming.html">OOP</a>. We can&#39;t configure our objects if they are real objects. We can only instantiate them. And the best method of instantiation is operator <code>new</code>. This operator is the key instrument for an OOP developer. Taking it away from us and giving us &quot;configuration mechanisms&quot; is an unforgivable <a href="/2015/11/24/imprisonment-for-irresponsible-coding.html">crime</a>.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Since getters are an anti-pattern, how are we supposed to convert an object to, say, JSON or plain text? I&apos;m suggesting to use printers. " /> <meta name="keywords" content="alternative to getters, getters and setters, getters and setters java, getters java, how to avoid getters" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2016-04-05 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Printers Instead of Getters"/> <meta name="twitter:description" property="og:description" content="Since getters are an anti-pattern, how are we supposed to convert an object to, say, JSON or plain text? I&apos;m suggesting to use printers. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2016/04/05/printers-instead-of-getters.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2016/04/05/printers-instead-of-getters.html" /> <link rel="amphtml" href="https://www.yegor256.com/2016/04/05/printers-instead-of-getters.amp.html" /> <title>Printers Instead of Getters </title> <meta name='og:image' content='https://www.yegor256.com/images/2016/04/amelie.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2016/04/amelie.jpg'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='675'/> <meta name='twitter:image:height' content='675'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Le fabuleux destin d&#39;Amélie Poulain (2001) by Jean-Pierre Jeunet'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2016/04/05/printers-instead-of-getters.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2016/04/05/printers-instead-of-getters.html">https://www.yegor256.com/2016/04/05/printers-instead-of-getters.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Printers Instead of Getters</h1><aside class='book'><a href='http://amzn.to/2pyceWc'><img src='/images/books/elegant-objects/cover.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='http://amzn.to/2pyceWc'>Section&nbsp;5.3</a><br/> of my book<a href='http://amzn.to/2pyceWc'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2016-04-05T00:00:00+00:00"> 5 April 2016 </time> </li> <li class="desktop-only" itemprop="locationCreated">Palo Alto, CA</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2016/04/05/printers-instead-of-getters.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>Getters and setters <a href="/2014/09/16/getters-and-setters-are-evil.html">are evil</a>. No need to argue about this, it&#39;s settled. You disagree? Let&#39;s discuss that later. For now, let&#39;s say, we want to get rid of getters. The key question is how is it possible at all? We do need to get the data out of an object, right? Nope. Wrong.</p><figure class='jb_picture'><img itemprop='image' alt='Le fabuleux destin d&#39;Amélie Poulain (2001) by Jean-Pierre Jeunet' src='/images/2016/04/amelie.jpg' longdesc='#a123a2ca'/><figcaption id='a123a2ca'>Le fabuleux destin d&#39;Amélie Poulain (2001) by Jean-Pierre Jeunet</figcaption></figure><p>I&#39;m suggesting to use &quot;printers&quot; instead. Instead of exposing data via getters, an object will have a functionality of <strong>printing</strong> itself to some media.</p><p>Let&#39;s say this is our class:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span> <span class="o">=</span>
    <span class="s">&quot;0735619654&quot;</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span> <span class="o">=</span>
    <span class="s">&quot;Object Thinking&quot;</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure><p>We need it to be transferred into XML format. A more or less traditional way to do it is via getters and <a href="/2015/03/26/jaxb-vs-xembly.html">JAXB</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">javax.xml.bind.annotation.XmlElement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.xml.bind.annotation.XmlRootElement</span><span class="o">;</span>
<span class="nd">@XmlRootElement</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span> <span class="o">=</span>
    <span class="s">&quot;0735619654&quot;</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span> <span class="o">=</span>
    <span class="s">&quot;Object Thinking&quot;</span><span class="o">;</span>
  <span class="nd">@XmlElement</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getIsbn</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">isbn</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@XmlElement</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTitle</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">title</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This is a very <a href="/2014/12/01/orm-offensive-anti-pattern.html">offensive</a> way of treating the <a href="/2014/11/20/seven-virtues-of-good-object.html">object</a>. We&#39;re basically exposing everything that&#39;s inside to the public. It was a nice little self-sufficient solid object and we turned it into a <a href="/2016/07/06/data-transfer-object.html">bag of data</a>, which anyone can access in many possible ways. We can access it for reading, of course.</p><p>It is convenient to have these getters, you may say. We are all used to them. If we want to convert it into <a href="/2015/11/16/json-vs-xml.html">JSON</a>, they will be very helpful. If we want to use this poor object as a data object in JSP, getters will help us. There are many examples in Java, where getters are being actively used.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=_Q0cNykXB04'><div class='box'> <img src='https://i.ytimg.com/vi/_Q0cNykXB04/mqdefault.jpg' alt='YouTube video #_Q0cNykXB04'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Printers Instead of Getters in OOP (webinar #18); 7 September 2016.</div></aside><p>This is <strong>not</strong> because they are so effective. This is because we&#39;re so <a href="/2015/02/20/utility-classes-vs-functional-programming.html"><strong>procedural</strong></a> in our way of thinking. We <strong>don&#39;t trust</strong> our objects. We only trust the data they store. We don&#39;t want this <code>Book</code> object to generate the XML. We want it to give us the data. We will build the XML. The <code>Book</code> is too stupid to do that job. We&#39;re way smarter!</p><p>I&#39;m suggesting to stop thinking this way. Instead, let&#39;s try to give this poor <code>Book</code> a chance, and equip it with a &quot;printer&quot;:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span> <span class="o">=</span>
    <span class="s">&quot;0735619654&quot;</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span> <span class="o">=</span>
    <span class="s">&quot;Object Thinking&quot;</span><span class="o">;</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toXML</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
      <span class="s">&quot;&lt;book&gt;&lt;isbn&gt;%s&lt;/isbn&gt;&lt;title&gt;%s&lt;/title&gt;&lt;/book&gt;&quot;</span><span class="o">,</span>
      <span class="k">this</span><span class="o">.</span><span class="na">isbn</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">title</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This isn&#39;t the <a href="/2015/03/26/jaxb-vs-xembly.html">best</a> implementation, but you got the idea. The object is not exposing its internals any more. We can&#39;t get its ISBN and its title. We can only ask it to print itself in XML format.</p><p>We can add an additional printer, if another format is required:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span> <span class="o">=</span>
    <span class="s">&quot;0735619654&quot;</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span> <span class="o">=</span>
    <span class="s">&quot;Object Thinking&quot;</span><span class="o">;</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toJSON</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
      <span class="s">&quot;{&amp;quot;isbn&amp;quot;:&amp;quot;%s&amp;quot;, &amp;quot;title&amp;quot;:&amp;quot;%s&amp;quot;}&quot;</span><span class="o">,</span>
      <span class="k">this</span><span class="o">.</span><span class="na">isbn</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">title</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Again, not the best implementation, but you see what I&#39;m trying to show. Each time we need a new format, we create a new printer.</p><p>You may say that the object will be rather big if there will be many formats. That&#39;s true, but a big object is a bad design in the first place. I would say that if there is more than one printer---it&#39;s a problem.</p><p>So, what to do if we need multiple formats? Use &quot;media,&quot; where that printers will be able to print to. Say, we have an object that represents a record in MySQL. We want it to be printable to XML, HTML, JSON, some binary format and God knows what else. We can add that many printers to it, but the object will be big and ugly. To avoid that, introduce a new object, that represents the media where the data will be printed to:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span> <span class="o">=</span>
    <span class="s">&quot;0735619654&quot;</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span> <span class="o">=</span>
    <span class="s">&quot;Object Thinking&quot;</span><span class="o">;</span>
  <span class="kd">public</span> <span class="n">Media</span> <span class="nf">print</span><span class="o">(</span><span class="n">Media</span> <span class="n">media</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">media</span>
      <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="s">&quot;isbn&quot;</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">isbn</span><span class="o">)</span>
      <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">title</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Again, it&#39;s a very primitive design of that <a href="/2014/06/09/objects-should-be-immutable.html">immutable</a> <code>Media</code> class, but you got the idea---the <code>media</code> accepts the data. Now, we want to print our object to JSON (this design is not really perfect, since <code>JsonObjectBuilder</code> is not immutable, even though it looks like one...):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">JsonMedia</span> <span class="kd">implements</span> <span class="n">Media</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">JsonObjectBuilder</span> <span class="n">builder</span><span class="o">;</span>
  <span class="n">JsonMedia</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">(</span><span class="s">&quot;book&quot;</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="n">JsonMedia</span><span class="o">(</span><span class="n">String</span> <span class="n">head</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">(</span><span class="n">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="n">head</span><span class="o">));</span>
  <span class="o">}</span>
  <span class="n">JsonMedia</span><span class="o">(</span><span class="n">JsonObjectBuilder</span> <span class="n">bdr</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">builder</span> <span class="o">=</span> <span class="n">bdr</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Media</span> <span class="nf">with</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">JsonMedia</span><span class="o">(</span>
      <span class="k">this</span><span class="o">.</span><span class="na">builder</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">value</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">JsonObject</span> <span class="nf">json</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">builder</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Now, we make an instance of <code>JsonMedia</code> and ask our book to print itself there:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">JsonMedia</span> <span class="n">media</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JsonMedia</span><span class="o">(</span><span class="s">&quot;book&quot;</span><span class="o">);</span>
<span class="n">book</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">media</span><span class="o">);</span>
<span class="n">JsonObject</span> <span class="n">json</span> <span class="o">=</span> <span class="n">media</span><span class="o">.</span><span class="na">json</span><span class="o">();</span></code></pre></figure><p>Voilà! The JSON object is ready and the book has no idea about what exactly what printed just now. We need to print the book to XML? We create <code>XmlMedia</code>, which will print the book to XML. The <code>Book</code> class stays small, while the complexity of &quot;media&quot; objects is unlimited.</p><p>My point here is simple---no <a href="/2014/09/16/getters-and-setters-are-evil.html">getters</a>, just printers!</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2016/04/05/printers-instead-of-getters.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2016/04/05/printers-instead-of-getters.html&amp;text=Printers+Instead+of+Getters" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2016/04/05/printers-instead-of-getters.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2016/04/05/printers-instead-of-getters.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2016/04/05/printers-instead-of-getters.html%3F2016-14&amp;title=Printers+Instead+of+Getters" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2016/04/05/printers-instead-of-getters.html%3F2016-14&amp;t=Printers+Instead+of+Getters" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>Getters and setters <a href="/2014/09/16/getters-and-setters-are-evil.html">are evil</a>. No need to argue about this, it&#39;s settled. You disagree? Let&#39;s discuss that later. For now, let&#39;s say, we want to get rid of getters. The key question is how is it possible at all? We do need to get the data out of an object, right? Nope. Wrong.</p><figure class='jb_picture'><img itemprop='image' alt='Le fabuleux destin d&#39;Amélie Poulain (2001) by Jean-Pierre Jeunet' src='/images/2016/04/amelie.jpg' longdesc='#a123a2ca'/><figcaption id='a123a2ca'>Le fabuleux destin d&#39;Amélie Poulain (2001) by Jean-Pierre Jeunet</figcaption></figure><p>I&#39;m suggesting to use &quot;printers&quot; instead. Instead of exposing data via getters, an object will have a functionality of <strong>printing</strong> itself to some media.</p><p>Let&#39;s say this is our class:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span> <span class="o">=</span>
    <span class="s">&quot;0735619654&quot;</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span> <span class="o">=</span>
    <span class="s">&quot;Object Thinking&quot;</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure><p>We need it to be transferred into XML format. A more or less traditional way to do it is via getters and <a href="/2015/03/26/jaxb-vs-xembly.html">JAXB</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">javax.xml.bind.annotation.XmlElement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.xml.bind.annotation.XmlRootElement</span><span class="o">;</span>
<span class="nd">@XmlRootElement</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span> <span class="o">=</span>
    <span class="s">&quot;0735619654&quot;</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span> <span class="o">=</span>
    <span class="s">&quot;Object Thinking&quot;</span><span class="o">;</span>
  <span class="nd">@XmlElement</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getIsbn</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">isbn</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@XmlElement</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTitle</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">title</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This is a very <a href="/2014/12/01/orm-offensive-anti-pattern.html">offensive</a> way of treating the <a href="/2014/11/20/seven-virtues-of-good-object.html">object</a>. We&#39;re basically exposing everything that&#39;s inside to the public. It was a nice little self-sufficient solid object and we turned it into a <a href="/2016/07/06/data-transfer-object.html">bag of data</a>, which anyone can access in many possible ways. We can access it for reading, of course.</p><p>It is convenient to have these getters, you may say. We are all used to them. If we want to convert it into <a href="/2015/11/16/json-vs-xml.html">JSON</a>, they will be very helpful. If we want to use this poor object as a data object in JSP, getters will help us. There are many examples in Java, where getters are being actively used.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=_Q0cNykXB04'><div class='box'> <img src='https://i.ytimg.com/vi/_Q0cNykXB04/mqdefault.jpg' alt='YouTube video #_Q0cNykXB04'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Printers Instead of Getters in OOP (webinar #18); 7 September 2016.</div></aside><p>This is <strong>not</strong> because they are so effective. This is because we&#39;re so <a href="/2015/02/20/utility-classes-vs-functional-programming.html"><strong>procedural</strong></a> in our way of thinking. We <strong>don&#39;t trust</strong> our objects. We only trust the data they store. We don&#39;t want this <code>Book</code> object to generate the XML. We want it to give us the data. We will build the XML. The <code>Book</code> is too stupid to do that job. We&#39;re way smarter!</p><p>I&#39;m suggesting to stop thinking this way. Instead, let&#39;s try to give this poor <code>Book</code> a chance, and equip it with a &quot;printer&quot;:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span> <span class="o">=</span>
    <span class="s">&quot;0735619654&quot;</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span> <span class="o">=</span>
    <span class="s">&quot;Object Thinking&quot;</span><span class="o">;</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toXML</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
      <span class="s">&quot;&lt;book&gt;&lt;isbn&gt;%s&lt;/isbn&gt;&lt;title&gt;%s&lt;/title&gt;&lt;/book&gt;&quot;</span><span class="o">,</span>
      <span class="k">this</span><span class="o">.</span><span class="na">isbn</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">title</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This isn&#39;t the <a href="/2015/03/26/jaxb-vs-xembly.html">best</a> implementation, but you got the idea. The object is not exposing its internals any more. We can&#39;t get its ISBN and its title. We can only ask it to print itself in XML format.</p><p>We can add an additional printer, if another format is required:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span> <span class="o">=</span>
    <span class="s">&quot;0735619654&quot;</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span> <span class="o">=</span>
    <span class="s">&quot;Object Thinking&quot;</span><span class="o">;</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toJSON</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
      <span class="s">&quot;{&amp;quot;isbn&amp;quot;:&amp;quot;%s&amp;quot;, &amp;quot;title&amp;quot;:&amp;quot;%s&amp;quot;}&quot;</span><span class="o">,</span>
      <span class="k">this</span><span class="o">.</span><span class="na">isbn</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">title</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Again, not the best implementation, but you see what I&#39;m trying to show. Each time we need a new format, we create a new printer.</p><p>You may say that the object will be rather big if there will be many formats. That&#39;s true, but a big object is a bad design in the first place. I would say that if there is more than one printer---it&#39;s a problem.</p><p>So, what to do if we need multiple formats? Use &quot;media,&quot; where that printers will be able to print to. Say, we have an object that represents a record in MySQL. We want it to be printable to XML, HTML, JSON, some binary format and God knows what else. We can add that many printers to it, but the object will be big and ugly. To avoid that, introduce a new object, that represents the media where the data will be printed to:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span> <span class="o">=</span>
    <span class="s">&quot;0735619654&quot;</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span> <span class="o">=</span>
    <span class="s">&quot;Object Thinking&quot;</span><span class="o">;</span>
  <span class="kd">public</span> <span class="n">Media</span> <span class="nf">print</span><span class="o">(</span><span class="n">Media</span> <span class="n">media</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">media</span>
      <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="s">&quot;isbn&quot;</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">isbn</span><span class="o">)</span>
      <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">title</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Again, it&#39;s a very primitive design of that <a href="/2014/06/09/objects-should-be-immutable.html">immutable</a> <code>Media</code> class, but you got the idea---the <code>media</code> accepts the data. Now, we want to print our object to JSON (this design is not really perfect, since <code>JsonObjectBuilder</code> is not immutable, even though it looks like one...):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">JsonMedia</span> <span class="kd">implements</span> <span class="n">Media</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">JsonObjectBuilder</span> <span class="n">builder</span><span class="o">;</span>
  <span class="n">JsonMedia</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">(</span><span class="s">&quot;book&quot;</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="n">JsonMedia</span><span class="o">(</span><span class="n">String</span> <span class="n">head</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">(</span><span class="n">Json</span><span class="o">.</span><span class="na">createObjectBuilder</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="n">head</span><span class="o">));</span>
  <span class="o">}</span>
  <span class="n">JsonMedia</span><span class="o">(</span><span class="n">JsonObjectBuilder</span> <span class="n">bdr</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">builder</span> <span class="o">=</span> <span class="n">bdr</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Media</span> <span class="nf">with</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">JsonMedia</span><span class="o">(</span>
      <span class="k">this</span><span class="o">.</span><span class="na">builder</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">value</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">JsonObject</span> <span class="nf">json</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">builder</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Now, we make an instance of <code>JsonMedia</code> and ask our book to print itself there:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">JsonMedia</span> <span class="n">media</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JsonMedia</span><span class="o">(</span><span class="s">&quot;book&quot;</span><span class="o">);</span>
<span class="n">book</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">media</span><span class="o">);</span>
<span class="n">JsonObject</span> <span class="n">json</span> <span class="o">=</span> <span class="n">media</span><span class="o">.</span><span class="na">json</span><span class="o">();</span></code></pre></figure><p>Voilà! The JSON object is ready and the book has no idea about what exactly what printed just now. We need to print the book to XML? We create <code>XmlMedia</code>, which will print the book to XML. The <code>Book</code> class stays small, while the complexity of &quot;media&quot; objects is unlimited.</p><p>My point here is simple---no <a href="/2014/09/16/getters-and-setters-are-evil.html">getters</a>, just printers!</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Opening a resource inside a try/catch block and then finally checking for null is such a typical and annoying mistake. " /> <meta name="keywords" content="close stream java, java close stream in finally, java close stream try catch, java finally, java try catch" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2016-03-22 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Try. Finally. If. Not. Null."/> <meta name="twitter:description" property="og:description" content="Opening a resource inside a try/catch block and then finally checking for null is such a typical and annoying mistake. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2016/03/22/try-finally-if-not-null.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2016/03/22/try-finally-if-not-null.html" /> <link rel="amphtml" href="https://www.yegor256.com/2016/03/22/try-finally-if-not-null.amp.html" /> <title>Try. Finally. If. Not. Null. </title> <meta name='og:image' content='https://www.yegor256.com/images/2016/03/lock-stock-two-smoking-barrels.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2016/03/lock-stock-two-smoking-barrels.jpg'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='675'/> <meta name='twitter:image:height' content='675'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Lock, Stock and Two Smoking Barrels (1998) by Guy Ritchie'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2016/03/22/try-finally-if-not-null.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2016/03/22/try-finally-if-not-null.html">https://www.yegor256.com/2016/03/22/try-finally-if-not-null.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Try. Finally. If. Not. Null.</h1><aside class='book'><a href='http://amzn.to/2qFt4Tn'><img src='/images/books/elegant-objects/cover.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='http://amzn.to/2qFt4Tn'>Section&nbsp;2.6</a><br/> of my book<a href='http://amzn.to/2qFt4Tn'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2016-03-22T00:00:00+00:00"> 22 March 2016 </time> </li> <li class="desktop-only" itemprop="locationCreated">Palo Alto, CA</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2016/03/22/try-finally-if-not-null.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>There is a very typical mistake in pre-Java7 &quot;try/finally&quot; scenario, which I keep seeing in so many code reviews. I just have to write about it. Java7 introduced a solution, but it doesn&#39;t cover all situations. Sometimes we need to deal with non-<code>AutoCloseable</code> resources. Let&#39;s open and close them correctly, please.</p><figure class='jb_picture'><img itemprop='image' alt='Lock, Stock and Two Smoking Barrels (1998) by Guy Ritchie' src='/images/2016/03/lock-stock-two-smoking-barrels.jpg' longdesc='#118d4d8e'/><figcaption id='118d4d8e'>Lock, Stock and Two Smoking Barrels (1998) by Guy Ritchie</figcaption></figure><p>This is how it looks (assuming we are in Java 6):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">InputStream</span> <span class="n">input</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="k">try</span> <span class="o">{</span>
  <span class="n">input</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="na">openStream</span><span class="o">();</span>
  <span class="c1">// reads the stream, throws IOException</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span>
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">input</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">input</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure> <aside class='youtube'> <a href='https://www.youtube.com/watch?v=o3aNJX7AP3M'><div class='box'> <img src='https://i.ytimg.com/vi/o3aNJX7AP3M/mqdefault.jpg' alt='YouTube video #o3aNJX7AP3M'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>What is Wrong About NULL in OOP? (webinar #3); 3 June 2015.</div></aside><p>I already wrote about <a href="/2014/05/13/why-null-is-bad.html"><code>null</code></a> and its evil nature. Here it comes again. If you just follow the rule of &quot;not using NULL anywhere ever,&quot; this code would need an immediate refactoring. Its correct version will look like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">InputStream</span> <span class="n">input</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="na">openStream</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
  <span class="c1">// reads the stream, throws IOException</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span>
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
  <span class="n">input</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>There is no <code>null</code> anymore and it&#39;s very clean. Isn&#39;t it?</p><p>There are situations when opening the resource itself throws <code>IOException</code> and we can&#39;t put it outside of <code>try/catch</code>. In that case, we have to have <strong>two</strong> <code>try/catch</code> blocks:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">InputStream</span> <span class="n">input</span><span class="o">;</span>
<span class="k">try</span> <span class="o">{</span>
  <span class="n">input</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="na">openStream</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span>
<span class="o">}</span>
<span class="k">try</span> <span class="o">{</span>
  <span class="c1">// reads the stream, throws IOException</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span>
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
  <span class="n">input</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>But there should be no <code>null</code>, never!</p><p>The presence of <code>null</code> in Java code is a clear indicator of code smell. Something is not right if you have to use <code>null</code>. The only place where the presence of <code>null</code> is justified is where we&#39;re using third-party APIs or JDK. They may return <code>null</code> sometimes because... well, their design is bad. We have no other option but to do <code>if(x==null)</code>. But that&#39;s it. No other places are good for <code>null</code>.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2016/03/22/try-finally-if-not-null.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2016/03/22/try-finally-if-not-null.html&amp;text=Try.+Finally.+If.+Not.+Null." title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2016/03/22/try-finally-if-not-null.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2016/03/22/try-finally-if-not-null.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2016/03/22/try-finally-if-not-null.html%3F2016-12&amp;title=Try.+Finally.+If.+Not.+Null." title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2016/03/22/try-finally-if-not-null.html%3F2016-12&amp;t=Try.+Finally.+If.+Not.+Null." title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>There is a very typical mistake in pre-Java7 &quot;try/finally&quot; scenario, which I keep seeing in so many code reviews. I just have to write about it. Java7 introduced a solution, but it doesn&#39;t cover all situations. Sometimes we need to deal with non-<code>AutoCloseable</code> resources. Let&#39;s open and close them correctly, please.</p><figure class='jb_picture'><img itemprop='image' alt='Lock, Stock and Two Smoking Barrels (1998) by Guy Ritchie' src='/images/2016/03/lock-stock-two-smoking-barrels.jpg' longdesc='#118d4d8e'/><figcaption id='118d4d8e'>Lock, Stock and Two Smoking Barrels (1998) by Guy Ritchie</figcaption></figure><p>This is how it looks (assuming we are in Java 6):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">InputStream</span> <span class="n">input</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="k">try</span> <span class="o">{</span>
  <span class="n">input</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="na">openStream</span><span class="o">();</span>
  <span class="c1">// reads the stream, throws IOException</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span>
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">input</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">input</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure> <aside class='youtube'> <a href='https://www.youtube.com/watch?v=o3aNJX7AP3M'><div class='box'> <img src='https://i.ytimg.com/vi/o3aNJX7AP3M/mqdefault.jpg' alt='YouTube video #o3aNJX7AP3M'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>What is Wrong About NULL in OOP? (webinar #3); 3 June 2015.</div></aside><p>I already wrote about <a href="/2014/05/13/why-null-is-bad.html"><code>null</code></a> and its evil nature. Here it comes again. If you just follow the rule of &quot;not using NULL anywhere ever,&quot; this code would need an immediate refactoring. Its correct version will look like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">InputStream</span> <span class="n">input</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="na">openStream</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
  <span class="c1">// reads the stream, throws IOException</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span>
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
  <span class="n">input</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>There is no <code>null</code> anymore and it&#39;s very clean. Isn&#39;t it?</p><p>There are situations when opening the resource itself throws <code>IOException</code> and we can&#39;t put it outside of <code>try/catch</code>. In that case, we have to have <strong>two</strong> <code>try/catch</code> blocks:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">InputStream</span> <span class="n">input</span><span class="o">;</span>
<span class="k">try</span> <span class="o">{</span>
  <span class="n">input</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="na">openStream</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span>
<span class="o">}</span>
<span class="k">try</span> <span class="o">{</span>
  <span class="c1">// reads the stream, throws IOException</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span>
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
  <span class="n">input</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>But there should be no <code>null</code>, never!</p><p>The presence of <code>null</code> in Java code is a clear indicator of code smell. Something is not right if you have to use <code>null</code>. The only place where the presence of <code>null</code> is justified is where we&#39;re using third-party APIs or JDK. They may return <code>null</code> sometimes because... well, their design is bad. We have no other option but to do <code>if(x==null)</code>. But that&#39;s it. No other places are good for <code>null</code>.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="The necessity of debugging is an indicator of code problems and a great motivator for immediate refactoring and unit testing. " /> <meta name="keywords" content="debugging, debugging is evil, debugging vs testing, debugging vs unit testing, stop debugging" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2016-02-09 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Are You Still Debugging?"/> <meta name="twitter:description" property="og:description" content="The necessity of debugging is an indicator of code problems and a great motivator for immediate refactoring and unit testing. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2016/02/09/are-you-still-debugging.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2016/02/09/are-you-still-debugging.html" /> <link rel="amphtml" href="https://www.yegor256.com/2016/02/09/are-you-still-debugging.amp.html" /> <title>Are You Still Debugging? </title> <meta name='og:image' content='https://www.yegor256.com/images/2016/02/the-revenant.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2016/02/the-revenant.jpg'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='675'/> <meta name='twitter:image:height' content='675'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='The Revenant (2015) by Alejandro G. Iñárritu'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2016/02/09/are-you-still-debugging.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2016/02/09/are-you-still-debugging.html">https://www.yegor256.com/2016/02/09/are-you-still-debugging.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Are You Still Debugging?</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2016-02-09T00:00:00+00:00"> 9 February 2016 </time> </li> <li class="desktop-only" itemprop="locationCreated">Palo Alto, CA</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2016/02/09/are-you-still-debugging.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><ul class="unprintable subline"> <li>Translated:</li> <li><a href="https://habrahabr.ru/company/piter/blog/278567/">Russian</a></li> <li><a href="mailto:translate@yegor256.com">add yours!</a></li></ul><p class="unprintable"><p><a href="https://en.wikipedia.org/wiki/Debugging">Debugging</a> is &quot;a process of running a program/method interactively, breaking execution flow after each statement and showing...&quot; In a nutshell, it is a very useful technique ... for a bad programmer. Or an old programmer who is still writing procedural code in C. Object-oriented programmers never debug their code---they write unit tests. My point here is that unit testing is a technique that completely replaces debugging. If debugging is required, the <strong>design is bad</strong>.</p><figure class='jb_picture'><img itemprop='image' alt='The Revenant (2015) by Alejandro G. Iñárritu' src='/images/2016/02/the-revenant.jpg' longdesc='#867738b9'/><figcaption id='867738b9'>The Revenant (2015) by Alejandro G. Iñárritu</figcaption></figure><p>Let&#39;s say I&#39;m a <a href="/2014/05/05/oop-alternative-to-utility-classes.html">bad</a> imperative procedural programmer, and this is my Java code:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">FileUtils</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">readWords</span><span class="o">(</span><span class="n">File</span> <span class="n">f</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span>
      <span class="n">Files</span><span class="o">.</span><span class="na">readAllBytes</span><span class="o">(</span><span class="n">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">f</span><span class="o">)),</span>
      <span class="s">&quot;UTF-8&quot;</span>
    <span class="o">);</span>
    <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">words</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;&gt;();</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">word</span> <span class="o">:</span> <span class="n">text</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">words</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">word</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">words</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This static <a href="/2014/05/05/oop-alternative-to-utility-classes.html">utility</a> method reads file content and then finds all the unique words in it. Pretty simple. However, if it doesn&#39;t work, what do we do? Let&#39;s say this is the file:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>We know what we are,
but know not what we may be.</code></pre></figure><p>From it, we get this list of words:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>&quot;We&quot;
&quot;know&quot;
&quot;what&quot;
&quot;we&quot;
&quot;are,\n&quot;
&quot;but&quot;
&quot;not&quot;
&quot;may&quot;
&quot;be\n&quot;</code></pre></figure><p>Now that doesn&#39;t look right to me ... so what is the next step? Either the file reading doesn&#39;t work correctly or the split is broken. Let&#39;s <strong>debug</strong>, right? Let&#39;s give it a file through an input and go step by step, tracing and watching the variables. We&#39;ll find the bug and fix it. But when a similar problem shows up, we&#39;ll have to debug again! And that&#39;s what unit testing is supposed to <strong>prevent</strong>.</p><p>We&#39;re supposed to create a unit test once, in which the problem is reproduced. Then we fix the problem and make sure the test passes. That&#39;s how we save our investments in problem solving. We won&#39;t fix it again, because it won&#39;t happen again. Our <strong>test</strong> will prevent it from happening.</p><aside class='quote'>If you perceive debugging to be faster and easier, think about the quality of your code</aside><p>However, all this will work only if it&#39;s easy to create a unit test. If it&#39;s difficult, I&#39;ll be too lazy to do it. I will just debug and fix the problem. In this particular example, creating a test is a rather expensive procedure. What I mean is the complexity of the unit test will be rather high. We have to create a temporary file, fill it with data, run the method, and check the results. To find out what&#39;s going on and where the bug is, I&#39;ll have to create a number of tests. To avoid code duplication, I&#39;ll also have to create some supplementary utilities to help me create that temporary file and fill it with data. That&#39;s a lot of work. Well, maybe not &quot;a lot,&quot; but way more than a few minutes of debugging.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=Mj1gA5mEk68'><div class='box'> <img src='https://i.ytimg.com/vi/Mj1gA5mEk68/mqdefault.jpg' alt='YouTube video #Mj1gA5mEk68'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Unit Testing vs Debugging (webinar #26); 12 July 2017.</div></aside><p>Thus, if you perceive debugging to be faster and easier, think about the quality of your code. I bet it has a lot of opportunities for refactoring, just like the code from the example above. Here is how I would modify it. First of all, I would turn it into a class, because utility static methods are a <a href="/2014/05/05/oop-alternative-to-utility-classes.html">bad practice</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Words</span> <span class="kd">implements</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">File</span> <span class="n">file</span><span class="o">;</span>
  <span class="n">Words</span><span class="o">(</span><span class="n">File</span> <span class="n">src</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">file</span> <span class="o">=</span> <span class="n">src</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">iterator</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span>
      <span class="n">Files</span><span class="o">.</span><span class="na">readAllBytes</span><span class="o">(</span><span class="n">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">file</span><span class="o">)),</span>
      <span class="s">&quot;UTF-8&quot;</span>
    <span class="o">);</span>
    <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">words</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;&gt;();</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">word</span> <span class="o">:</span> <span class="n">text</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">words</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">word</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">words</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>It looks better already, but the complexity is still there. Next, I would break it down into smaller classes:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Text</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">File</span> <span class="n">file</span><span class="o">;</span>
  <span class="n">Text</span><span class="o">(</span><span class="n">File</span> <span class="n">src</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">file</span> <span class="o">=</span> <span class="n">src</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span>
      <span class="n">Files</span><span class="o">.</span><span class="na">readAllBytes</span><span class="o">(</span><span class="n">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">file</span><span class="o">)),</span>
      <span class="s">&quot;UTF-8&quot;</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">Words</span> <span class="kd">implements</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">text</span><span class="o">;</span>
  <span class="n">Words</span><span class="o">(</span><span class="n">String</span> <span class="n">txt</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">text</span> <span class="o">=</span> <span class="n">txt</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">iterator</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">words</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;&gt;();</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">word</span> <span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="na">text</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">words</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">word</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">words</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>What do you think now? Writing a test for the <code>Words</code> class is a pretty trivial task:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">org.hamcrest.MatcherAssert.<em></span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">org.hamcrest.Matchers.</em></span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WordsTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">parsesSimpleText</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Words</span><span class="o">(</span><span class="s">&quot;How are you?&quot;</span><span class="o">),</span>
      <span class="n">hasItems</span><span class="o">(</span><span class="s">&quot;How&quot;</span><span class="o">,</span> <span class="s">&quot;are&quot;</span><span class="o">,</span> <span class="s">&quot;you&quot;</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>How much time did that take? Less than a minute. We don&#39;t need to create a temporary file and load it with data, because class <code>Words</code> doesn&#39;t do anything with files. It just parses the incoming string and finds the unique words in it. Now it&#39;s easy to fix, since the test is small and we can easily create more tests; for example:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">org.hamcrest.MatcherAssert.<em></span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">org.hamcrest.Matchers.</em></span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WordsTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">parsesSimpleText</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Words</span><span class="o">(</span><span class="s">&quot;How are you?&quot;</span><span class="o">),</span>
      <span class="n">hasItems</span><span class="o">(</span><span class="s">&quot;How&quot;</span><span class="o">,</span> <span class="s">&quot;are&quot;</span><span class="o">,</span> <span class="s">&quot;you&quot;</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">parsesMultipleLines</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Words</span><span class="o">(</span><span class="s">&quot;first line\nsecond line\n&quot;</span><span class="o">),</span>
      <span class="n">hasItems</span><span class="o">(</span><span class="s">&quot;first&quot;</span><span class="o">,</span> <span class="s">&quot;second&quot;</span><span class="o">,</span> <span class="s">&quot;line&quot;</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>My point is that debugging is necessary when the amount of time to write a unit test is significantly more than the time it takes to click those Trace-In/Trace-Out buttons. And it&#39;s logical. We all are lazy and want fast and easy solutions. But debugging burns time and wastes energy. It helps us find problems but doesn&#39;t help prevent them from reappearing.</p><p>Debugging is needed when our code is <a href="/2015/02/20/utility-classes-vs-functional-programming.html">procedural</a> and algorithmic---when the code is all about <strong>how</strong> the goal should be achieved instead of <strong>what</strong> the goal is. See the examples above again. The first static method is all about how we read the file, parse it, and find words. It&#39;s even named <code>readWords()</code> (a <strong>verb</strong>). To the contrary, the second example is about what will be achieved. It&#39;s either the <code>Text</code> of the file or <code>Words</code> of the text (both are <strong>nouns</strong>).</p><p>I believe there is no place for debugging in clean object-oriented programming. Only unit testing!</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2016/02/09/are-you-still-debugging.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2016/02/09/are-you-still-debugging.html&amp;text=Are+You+Still+Debugging%3F" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2016/02/09/are-you-still-debugging.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2016/02/09/are-you-still-debugging.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2016/02/09/are-you-still-debugging.html%3F2016-06&amp;title=Are+You+Still+Debugging%3F" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2016/02/09/are-you-still-debugging.html%3F2016-06&amp;t=Are+You+Still+Debugging%3F" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p><a href="https://en.wikipedia.org/wiki/Debugging">Debugging</a> is &quot;a process of running a program/method interactively, breaking execution flow after each statement and showing...&quot; In a nutshell, it is a very useful technique ... for a bad programmer. Or an old programmer who is still writing procedural code in C. Object-oriented programmers never debug their code---they write unit tests. My point here is that unit testing is a technique that completely replaces debugging. If debugging is required, the <strong>design is bad</strong>.</p><figure class='jb_picture'><img itemprop='image' alt='The Revenant (2015) by Alejandro G. Iñárritu' src='/images/2016/02/the-revenant.jpg' longdesc='#867738b9'/><figcaption id='867738b9'>The Revenant (2015) by Alejandro G. Iñárritu</figcaption></figure><p>Let&#39;s say I&#39;m a <a href="/2014/05/05/oop-alternative-to-utility-classes.html">bad</a> imperative procedural programmer, and this is my Java code:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">FileUtils</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">readWords</span><span class="o">(</span><span class="n">File</span> <span class="n">f</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span>
      <span class="n">Files</span><span class="o">.</span><span class="na">readAllBytes</span><span class="o">(</span><span class="n">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">f</span><span class="o">)),</span>
      <span class="s">&quot;UTF-8&quot;</span>
    <span class="o">);</span>
    <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">words</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;&gt;();</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">word</span> <span class="o">:</span> <span class="n">text</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">words</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">word</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">words</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This static <a href="/2014/05/05/oop-alternative-to-utility-classes.html">utility</a> method reads file content and then finds all the unique words in it. Pretty simple. However, if it doesn&#39;t work, what do we do? Let&#39;s say this is the file:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>We know what we are,
but know not what we may be.</code></pre></figure><p>From it, we get this list of words:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>&quot;We&quot;
&quot;know&quot;
&quot;what&quot;
&quot;we&quot;
&quot;are,\n&quot;
&quot;but&quot;
&quot;not&quot;
&quot;may&quot;
&quot;be\n&quot;</code></pre></figure><p>Now that doesn&#39;t look right to me ... so what is the next step? Either the file reading doesn&#39;t work correctly or the split is broken. Let&#39;s <strong>debug</strong>, right? Let&#39;s give it a file through an input and go step by step, tracing and watching the variables. We&#39;ll find the bug and fix it. But when a similar problem shows up, we&#39;ll have to debug again! And that&#39;s what unit testing is supposed to <strong>prevent</strong>.</p><p>We&#39;re supposed to create a unit test once, in which the problem is reproduced. Then we fix the problem and make sure the test passes. That&#39;s how we save our investments in problem solving. We won&#39;t fix it again, because it won&#39;t happen again. Our <strong>test</strong> will prevent it from happening.</p><aside class='quote'>If you perceive debugging to be faster and easier, think about the quality of your code</aside><p>However, all this will work only if it&#39;s easy to create a unit test. If it&#39;s difficult, I&#39;ll be too lazy to do it. I will just debug and fix the problem. In this particular example, creating a test is a rather expensive procedure. What I mean is the complexity of the unit test will be rather high. We have to create a temporary file, fill it with data, run the method, and check the results. To find out what&#39;s going on and where the bug is, I&#39;ll have to create a number of tests. To avoid code duplication, I&#39;ll also have to create some supplementary utilities to help me create that temporary file and fill it with data. That&#39;s a lot of work. Well, maybe not &quot;a lot,&quot; but way more than a few minutes of debugging.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=Mj1gA5mEk68'><div class='box'> <img src='https://i.ytimg.com/vi/Mj1gA5mEk68/mqdefault.jpg' alt='YouTube video #Mj1gA5mEk68'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Unit Testing vs Debugging (webinar #26); 12 July 2017.</div></aside><p>Thus, if you perceive debugging to be faster and easier, think about the quality of your code. I bet it has a lot of opportunities for refactoring, just like the code from the example above. Here is how I would modify it. First of all, I would turn it into a class, because utility static methods are a <a href="/2014/05/05/oop-alternative-to-utility-classes.html">bad practice</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Words</span> <span class="kd">implements</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">File</span> <span class="n">file</span><span class="o">;</span>
  <span class="n">Words</span><span class="o">(</span><span class="n">File</span> <span class="n">src</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">file</span> <span class="o">=</span> <span class="n">src</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">iterator</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span>
      <span class="n">Files</span><span class="o">.</span><span class="na">readAllBytes</span><span class="o">(</span><span class="n">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">file</span><span class="o">)),</span>
      <span class="s">&quot;UTF-8&quot;</span>
    <span class="o">);</span>
    <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">words</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;&gt;();</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">word</span> <span class="o">:</span> <span class="n">text</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">words</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">word</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">words</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>It looks better already, but the complexity is still there. Next, I would break it down into smaller classes:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Text</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">File</span> <span class="n">file</span><span class="o">;</span>
  <span class="n">Text</span><span class="o">(</span><span class="n">File</span> <span class="n">src</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">file</span> <span class="o">=</span> <span class="n">src</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span>
      <span class="n">Files</span><span class="o">.</span><span class="na">readAllBytes</span><span class="o">(</span><span class="n">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">file</span><span class="o">)),</span>
      <span class="s">&quot;UTF-8&quot;</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">Words</span> <span class="kd">implements</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">text</span><span class="o">;</span>
  <span class="n">Words</span><span class="o">(</span><span class="n">String</span> <span class="n">txt</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">text</span> <span class="o">=</span> <span class="n">txt</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">iterator</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">words</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;&gt;();</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">word</span> <span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="na">text</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">words</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">word</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">words</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>What do you think now? Writing a test for the <code>Words</code> class is a pretty trivial task:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">org.hamcrest.MatcherAssert.<em></span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">org.hamcrest.Matchers.</em></span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WordsTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">parsesSimpleText</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Words</span><span class="o">(</span><span class="s">&quot;How are you?&quot;</span><span class="o">),</span>
      <span class="n">hasItems</span><span class="o">(</span><span class="s">&quot;How&quot;</span><span class="o">,</span> <span class="s">&quot;are&quot;</span><span class="o">,</span> <span class="s">&quot;you&quot;</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>How much time did that take? Less than a minute. We don&#39;t need to create a temporary file and load it with data, because class <code>Words</code> doesn&#39;t do anything with files. It just parses the incoming string and finds the unique words in it. Now it&#39;s easy to fix, since the test is small and we can easily create more tests; for example:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">org.hamcrest.MatcherAssert.<em></span><span class="o">;</span>
<span class="kn">import static</span> <span class="nn">org.hamcrest.Matchers.</em></span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WordsTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">parsesSimpleText</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Words</span><span class="o">(</span><span class="s">&quot;How are you?&quot;</span><span class="o">),</span>
      <span class="n">hasItems</span><span class="o">(</span><span class="s">&quot;How&quot;</span><span class="o">,</span> <span class="s">&quot;are&quot;</span><span class="o">,</span> <span class="s">&quot;you&quot;</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">parsesMultipleLines</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Words</span><span class="o">(</span><span class="s">&quot;first line\nsecond line\n&quot;</span><span class="o">),</span>
      <span class="n">hasItems</span><span class="o">(</span><span class="s">&quot;first&quot;</span><span class="o">,</span> <span class="s">&quot;second&quot;</span><span class="o">,</span> <span class="s">&quot;line&quot;</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>My point is that debugging is necessary when the amount of time to write a unit test is significantly more than the time it takes to click those Trace-In/Trace-Out buttons. And it&#39;s logical. We all are lazy and want fast and easy solutions. But debugging burns time and wastes energy. It helps us find problems but doesn&#39;t help prevent them from reappearing.</p><p>Debugging is needed when our code is <a href="/2015/02/20/utility-classes-vs-functional-programming.html">procedural</a> and algorithmic---when the code is all about <strong>how</strong> the goal should be achieved instead of <strong>what</strong> the goal is. See the examples above again. The first static method is all about how we read the file, parse it, and find words. It&#39;s even named <code>readWords()</code> (a <strong>verb</strong>). To the contrary, the second example is about what will be achieved. It&#39;s either the <code>Text</code> of the file or <code>Words</code> of the text (both are <strong>nouns</strong>).</p><p>I believe there is no place for debugging in clean object-oriented programming. Only unit testing!</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="These are the most popular design patterns in object-oriented programming, though some of them are actually anti-patterns, in my opinion. " /> <meta name="keywords" content="anti patterns, clean code, design pattern, java design pattern, oop design pattern" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2016-02-03 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Design Patterns and Anti-Patterns, Love and Hate"/> <meta name="twitter:description" property="og:description" content="These are the most popular design patterns in object-oriented programming, though some of them are actually anti-patterns, in my opinion. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2016/02/03/design-patterns-and-anti-patterns.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2016/02/03/design-patterns-and-anti-patterns.html" /> <link rel="amphtml" href="https://www.yegor256.com/2016/02/03/design-patterns-and-anti-patterns.amp.html" /> <title>Design Patterns and Anti-Patterns, Love and Hate </title> <meta name='og:image' content='https://www.yegor256.com/images/2016/02/the-shining.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2016/02/the-shining.jpg'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='675'/> <meta name='twitter:image:height' content='675'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='The Shining (1980) by Stanley Kubrick'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2016/02/03/design-patterns-and-anti-patterns.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2016/02/03/design-patterns-and-anti-patterns.html">https://www.yegor256.com/2016/02/03/design-patterns-and-anti-patterns.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Design Patterns and Anti-Patterns, Love and Hate</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2016-02-03T00:00:00+00:00"> 3 February 2016 </time> </li> <li class="desktop-only" itemprop="locationCreated">Palo Alto, CA</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2016/02/03/design-patterns-and-anti-patterns.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p><a href="https://en.wikipedia.org/wiki/Software_design_pattern">Design Patterns</a> are ... Come on, you know what they are. They are something we <strong>love</strong> and <strong>hate</strong>. We love them because they let us write code without thinking. We hate them when we see the code of someone who is used to writing code without thinking. Am I wrong? Now, let me try to go through all of them and show you how much I love or hate each one. Follow me, in alphabetic order.</p><figure class='jb_picture'><img itemprop='image' alt='The Shining (1980) by Stanley Kubrick' src='/images/2016/02/the-shining.jpg' longdesc='#27f582ec'/><figcaption id='27f582ec'>The Shining (1980) by Stanley Kubrick</figcaption></figure> <aside class='youtube'> <a href='https://www.youtube.com/watch?v=WSgP85kr6eU'><div class='box'> <img src='https://i.ytimg.com/vi/WSgP85kr6eU/mqdefault.jpg' alt='YouTube video #WSgP85kr6eU'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Why Getters-and-Setters Is An Anti-Pattern? (webinar #4); 1 July 2015.</div></aside><p><a href="https://en.wikipedia.org/wiki/Abstract_factory_pattern"><span class='green'>Abstract Factory</span></a>. It&#39;s OK.</p><p><a href="https://en.wikipedia.org/wiki/Adapter_pattern"><span class='green'>Adapter</span></a>. Good one!</p><p><a href="https://en.wikipedia.org/wiki/Bridge_pattern"><span class='green'>Bridge</span></a>. Good one!</p><p><a href="https://en.wikipedia.org/wiki/Builder_pattern"><span class='red'>Builder</span></a>. Terrible concept, since it encourages us to create and use big, complex objects. If you need a builder, there is already something wrong in your code. Refactor it so any object is easy to create through its constructors.</p><p><a href="https://en.wikipedia.org/wiki/Chain_of_responsibility_pattern"><span class='green'>Chain of Responsibility</span></a>. Seems fine.</p><p><a href="https://en.wikipedia.org/wiki/Command_pattern"><span class='green'>Command</span></a>. It&#39;s OK.</p><p><a href="https://en.wikipedia.org/wiki/Composite_pattern"><span class='green'>Composite</span></a>. Good one; check out <a href="/2015/10/01/vertical-horizontal-decorating.html">this</a> too.</p><p><a href="https://en.wikipedia.org/wiki/Data_transfer_object"><span class='red'>Data Transfer Object</span></a>. It&#39;s just <a href="/2016/07/06/data-transfer-object.html">a shame</a>.</p><p><a href="https://en.wikipedia.org/wiki/Decorator_pattern"><span class='green'>Decorator</span></a>. My <a href="/2015/02/26/composable-decorators.html">favorite</a> one. I highly recommend you use it.</p><p><a href="https://en.wikipedia.org/wiki/Facade_pattern"><span class='red'>Facade</span></a>. Bad idea. In OOP, we need objects and only objects, not facades for them. This design pattern is very procedural in its spirit, since a facade is nothing more than a collection of <a href="/2015/02/20/utility-classes-vs-functional-programming.html">procedures</a>.</p><p><a href="https://en.wikipedia.org/wiki/Factory_method_pattern"><span class='orange'>Factory Method</span></a>. This one seems OK.</p><p><a href="https://en.wikipedia.org/wiki/Flyweight_pattern"><span class='red'>Flyweight</span></a>. It&#39;s a workaround, as I see it, so it&#39;s not a good design pattern. I would recommend you not use it unless there is a really critical performance issue. But calling it a design pattern ... no way. A fix for a performance problem in Java? Yes.</p><p><a href="https://en.wikipedia.org/wiki/Front_controller"><span class='red'>Front Controller</span></a>. Terrible idea, as well as the entire <a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">MVC</a>. It&#39;s very <a href="/2016/12/13/mvc-vs-oop.html">procedural</a>, that&#39;s why.</p><p><a href="https://en.wikipedia.org/wiki/Interpreter_pattern"><span class='orange'>Interpreter</span></a>. It&#39;s OK, but I <a href="/2015/03/09/objects-end-with-er.html">don&#39;t like</a> the name. &quot;Expression&quot; would be a much better alternative.</p><p><a href="https://en.wikipedia.org/wiki/Iterator_pattern"><span class='red'>Iterator</span></a>. Bad idea, since it is mutable. It would be much better to have <a href="/2014/06/09/objects-should-be-immutable.html">immutable</a> &quot;cursors.&quot;</p><p><a href="https://en.wikipedia.org/wiki/Lazy_initialization"><span class='green'>Lazy Initialization</span></a>. It&#39;s OK.</p><p><a href="https://en.wikipedia.org/wiki/Marker_interface_pattern"><span class='red'>Marker</span></a>. It&#39;s a terrible idea, along with reflection and <a href="/2015/04/02/class-casting-is-anti-pattern.html">type casting</a>.</p><p><a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller"><span class='red'>MVC</span></a>. Bad idea, since it&#39;s very procedural. <a href="/2015/03/09/objects-end-with-er.html">Controllers</a> are the key broken element in this concept. We need real objects, not procedural controllers.</p><p><a href="https://en.wikipedia.org/wiki/Mediator_pattern"><span class='red'>Mediator</span></a>. I don&#39;t like it. Even though it sounds like a technique for decreasing complexity and coupling, it is not really object-oriented. Who is this mediator? Just a &quot;channel&quot; between objects? Why shouldn&#39;t objects communicate directly? Because they are too complex? Make them smaller and simpler, rather than inventing these mediators.</p><p><a href="https://en.wikipedia.org/wiki/Memento_pattern"><span class='red'>Memento</span></a>. This idea implies that objects are <a href="/2014/06/09/objects-should-be-immutable.html">mutable</a>, which I&#39;m against in general.</p><p><a href="https://en.wikipedia.org/wiki/Module_pattern"><span class='red'>Module</span></a>. If Wikipedia is right about this pattern, it&#39;s something even more terrible than the Singleton.</p><p><a href="https://en.wikipedia.org/wiki/Multiton_pattern"><span class='red'>Multiton</span></a>. Really bad idea. Same as Singleton.</p><p><a href="https://en.wikipedia.org/wiki/Null_Object_pattern"><span class='green'>Null Object</span></a>. Good one. By the way, see <a href="/2014/05/13/why-null-is-bad.html">Why NULL Is Bad</a></p><p><a href="https://en.wikipedia.org/wiki/Object_pool_pattern"><span class='green'>Object Pool</span></a>. Good one.</p><p><a href="https://en.wikipedia.org/wiki/Observer_pattern"><span class='orange'>Observer</span></a>. The idea is good, but the name is bad, since it <a href="/2015/03/09/objects-end-with-er.html">ends with -ER</a>. A much better one would be &quot;Source&quot; and &quot;Target.&quot; The Source generates events and the Target listens to them.</p><p><a href="https://en.wikipedia.org/wiki/Object-relational_mapping"><span class='red'>ORM</span></a>. It&#39;s terrible and &quot;offensive&quot;; check <a href="/2014/12/01/orm-offensive-anti-pattern.html">this</a> out.</p><p><a href="https://en.wikipedia.org/wiki/Prototype_pattern"><span class='orange'>Prototype</span></a>. Good idea, but what does it have to do with OOP?</p><p><a href="https://en.wikipedia.org/wiki/Proxy_pattern"><span class='green'>Proxy</span></a>. Good one.</p><p><a href="https://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization"><span class='green'>RAII</span></a>. This is a really good one, and I <a href="/2017/08/08/raii-in-java.html">highly recommend</a> you use it.</p><p><a href="https://en.wikipedia.org/wiki/Design_pattern_Servant"><span class='red'>Servant</span></a>. A very bad idea, because it&#39;s highly <a href="/2015/02/20/utility-classes-vs-functional-programming.html">procedural</a>.</p><p><a href="https://en.wikipedia.org/wiki/Singleton_pattern"><span class='red'>Singleton</span></a>. It&#39;s the king of all anti-patterns. Stay away from it at all costs.</p><p><a href="https://en.wikipedia.org/wiki/Specification_pattern"><span class='green'>Specification</span></a>. It&#39;s OK.</p><p><a href="https://en.wikipedia.org/wiki/State_pattern"><span class='orange'>State</span></a>. Although it&#39;s not implied, I feel that in most cases the use of this pattern results in mutability, a code characteristic that I&#39;m generally <a href="/2014/06/09/objects-should-be-immutable.html">against</a>.</p><p><a href="https://en.wikipedia.org/wiki/Strategy_pattern"><span class='green'>Strategy</span></a>. A good one.</p><p><a href="https://en.wikipedia.org/wiki/Template_method_pattern"><span class='red'>Template Method</span></a>. is wrong, since implementation inheritance <a href="/2016/09/13/inheritance-is-procedural.html">is procedural</a>.</p><p><a href="https://en.wikipedia.org/wiki/Visitor_pattern"><span class='red'>Visitor</span></a>. A rather <a href="/2015/02/20/utility-classes-vs-functional-programming.html">procedural</a> concept that treats objects as data structures, which we can manipulate.</p><hr/><p>I have nothing against <a href="https://en.wikipedia.org/wiki/Concurrency_pattern">concurrency patterns</a> either; they are all <span class="green">good</span>, since they have almost nothing to do with object-oriented programming.</p><p>If you know some other design (anti-)patterns, let me know in the comments below. I&#39;ll add them here.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2016/02/03/design-patterns-and-anti-patterns.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2016/02/03/design-patterns-and-anti-patterns.html&amp;text=Design+Patterns+and+Anti-Patterns%2C+Love+and+Hate" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2016/02/03/design-patterns-and-anti-patterns.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2016/02/03/design-patterns-and-anti-patterns.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2016/02/03/design-patterns-and-anti-patterns.html%3F2016-05&amp;title=Design+Patterns+and+Anti-Patterns%2C+Love+and+Hate" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2016/02/03/design-patterns-and-anti-patterns.html%3F2016-05&amp;t=Design+Patterns+and+Anti-Patterns%2C+Love+and+Hate" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p><a href="https://en.wikipedia.org/wiki/Software_design_pattern">Design Patterns</a> are ... Come on, you know what they are. They are something we <strong>love</strong> and <strong>hate</strong>. We love them because they let us write code without thinking. We hate them when we see the code of someone who is used to writing code without thinking. Am I wrong? Now, let me try to go through all of them and show you how much I love or hate each one. Follow me, in alphabetic order.</p><figure class='jb_picture'><img itemprop='image' alt='The Shining (1980) by Stanley Kubrick' src='/images/2016/02/the-shining.jpg' longdesc='#27f582ec'/><figcaption id='27f582ec'>The Shining (1980) by Stanley Kubrick</figcaption></figure> <aside class='youtube'> <a href='https://www.youtube.com/watch?v=WSgP85kr6eU'><div class='box'> <img src='https://i.ytimg.com/vi/WSgP85kr6eU/mqdefault.jpg' alt='YouTube video #WSgP85kr6eU'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Why Getters-and-Setters Is An Anti-Pattern? (webinar #4); 1 July 2015.</div></aside><p><a href="https://en.wikipedia.org/wiki/Abstract_factory_pattern"><span class='green'>Abstract Factory</span></a>. It&#39;s OK.</p><p><a href="https://en.wikipedia.org/wiki/Adapter_pattern"><span class='green'>Adapter</span></a>. Good one!</p><p><a href="https://en.wikipedia.org/wiki/Bridge_pattern"><span class='green'>Bridge</span></a>. Good one!</p><p><a href="https://en.wikipedia.org/wiki/Builder_pattern"><span class='red'>Builder</span></a>. Terrible concept, since it encourages us to create and use big, complex objects. If you need a builder, there is already something wrong in your code. Refactor it so any object is easy to create through its constructors.</p><p><a href="https://en.wikipedia.org/wiki/Chain_of_responsibility_pattern"><span class='green'>Chain of Responsibility</span></a>. Seems fine.</p><p><a href="https://en.wikipedia.org/wiki/Command_pattern"><span class='green'>Command</span></a>. It&#39;s OK.</p><p><a href="https://en.wikipedia.org/wiki/Composite_pattern"><span class='green'>Composite</span></a>. Good one; check out <a href="/2015/10/01/vertical-horizontal-decorating.html">this</a> too.</p><p><a href="https://en.wikipedia.org/wiki/Data_transfer_object"><span class='red'>Data Transfer Object</span></a>. It&#39;s just <a href="/2016/07/06/data-transfer-object.html">a shame</a>.</p><p><a href="https://en.wikipedia.org/wiki/Decorator_pattern"><span class='green'>Decorator</span></a>. My <a href="/2015/02/26/composable-decorators.html">favorite</a> one. I highly recommend you use it.</p><p><a href="https://en.wikipedia.org/wiki/Facade_pattern"><span class='red'>Facade</span></a>. Bad idea. In OOP, we need objects and only objects, not facades for them. This design pattern is very procedural in its spirit, since a facade is nothing more than a collection of <a href="/2015/02/20/utility-classes-vs-functional-programming.html">procedures</a>.</p><p><a href="https://en.wikipedia.org/wiki/Factory_method_pattern"><span class='orange'>Factory Method</span></a>. This one seems OK.</p><p><a href="https://en.wikipedia.org/wiki/Flyweight_pattern"><span class='red'>Flyweight</span></a>. It&#39;s a workaround, as I see it, so it&#39;s not a good design pattern. I would recommend you not use it unless there is a really critical performance issue. But calling it a design pattern ... no way. A fix for a performance problem in Java? Yes.</p><p><a href="https://en.wikipedia.org/wiki/Front_controller"><span class='red'>Front Controller</span></a>. Terrible idea, as well as the entire <a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">MVC</a>. It&#39;s very <a href="/2016/12/13/mvc-vs-oop.html">procedural</a>, that&#39;s why.</p><p><a href="https://en.wikipedia.org/wiki/Interpreter_pattern"><span class='orange'>Interpreter</span></a>. It&#39;s OK, but I <a href="/2015/03/09/objects-end-with-er.html">don&#39;t like</a> the name. &quot;Expression&quot; would be a much better alternative.</p><p><a href="https://en.wikipedia.org/wiki/Iterator_pattern"><span class='red'>Iterator</span></a>. Bad idea, since it is mutable. It would be much better to have <a href="/2014/06/09/objects-should-be-immutable.html">immutable</a> &quot;cursors.&quot;</p><p><a href="https://en.wikipedia.org/wiki/Lazy_initialization"><span class='green'>Lazy Initialization</span></a>. It&#39;s OK.</p><p><a href="https://en.wikipedia.org/wiki/Marker_interface_pattern"><span class='red'>Marker</span></a>. It&#39;s a terrible idea, along with reflection and <a href="/2015/04/02/class-casting-is-anti-pattern.html">type casting</a>.</p><p><a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller"><span class='red'>MVC</span></a>. Bad idea, since it&#39;s very procedural. <a href="/2015/03/09/objects-end-with-er.html">Controllers</a> are the key broken element in this concept. We need real objects, not procedural controllers.</p><p><a href="https://en.wikipedia.org/wiki/Mediator_pattern"><span class='red'>Mediator</span></a>. I don&#39;t like it. Even though it sounds like a technique for decreasing complexity and coupling, it is not really object-oriented. Who is this mediator? Just a &quot;channel&quot; between objects? Why shouldn&#39;t objects communicate directly? Because they are too complex? Make them smaller and simpler, rather than inventing these mediators.</p><p><a href="https://en.wikipedia.org/wiki/Memento_pattern"><span class='red'>Memento</span></a>. This idea implies that objects are <a href="/2014/06/09/objects-should-be-immutable.html">mutable</a>, which I&#39;m against in general.</p><p><a href="https://en.wikipedia.org/wiki/Module_pattern"><span class='red'>Module</span></a>. If Wikipedia is right about this pattern, it&#39;s something even more terrible than the Singleton.</p><p><a href="https://en.wikipedia.org/wiki/Multiton_pattern"><span class='red'>Multiton</span></a>. Really bad idea. Same as Singleton.</p><p><a href="https://en.wikipedia.org/wiki/Null_Object_pattern"><span class='green'>Null Object</span></a>. Good one. By the way, see <a href="/2014/05/13/why-null-is-bad.html">Why NULL Is Bad</a></p><p><a href="https://en.wikipedia.org/wiki/Object_pool_pattern"><span class='green'>Object Pool</span></a>. Good one.</p><p><a href="https://en.wikipedia.org/wiki/Observer_pattern"><span class='orange'>Observer</span></a>. The idea is good, but the name is bad, since it <a href="/2015/03/09/objects-end-with-er.html">ends with -ER</a>. A much better one would be &quot;Source&quot; and &quot;Target.&quot; The Source generates events and the Target listens to them.</p><p><a href="https://en.wikipedia.org/wiki/Object-relational_mapping"><span class='red'>ORM</span></a>. It&#39;s terrible and &quot;offensive&quot;; check <a href="/2014/12/01/orm-offensive-anti-pattern.html">this</a> out.</p><p><a href="https://en.wikipedia.org/wiki/Prototype_pattern"><span class='orange'>Prototype</span></a>. Good idea, but what does it have to do with OOP?</p><p><a href="https://en.wikipedia.org/wiki/Proxy_pattern"><span class='green'>Proxy</span></a>. Good one.</p><p><a href="https://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization"><span class='green'>RAII</span></a>. This is a really good one, and I <a href="/2017/08/08/raii-in-java.html">highly recommend</a> you use it.</p><p><a href="https://en.wikipedia.org/wiki/Design_pattern_Servant"><span class='red'>Servant</span></a>. A very bad idea, because it&#39;s highly <a href="/2015/02/20/utility-classes-vs-functional-programming.html">procedural</a>.</p><p><a href="https://en.wikipedia.org/wiki/Singleton_pattern"><span class='red'>Singleton</span></a>. It&#39;s the king of all anti-patterns. Stay away from it at all costs.</p><p><a href="https://en.wikipedia.org/wiki/Specification_pattern"><span class='green'>Specification</span></a>. It&#39;s OK.</p><p><a href="https://en.wikipedia.org/wiki/State_pattern"><span class='orange'>State</span></a>. Although it&#39;s not implied, I feel that in most cases the use of this pattern results in mutability, a code characteristic that I&#39;m generally <a href="/2014/06/09/objects-should-be-immutable.html">against</a>.</p><p><a href="https://en.wikipedia.org/wiki/Strategy_pattern"><span class='green'>Strategy</span></a>. A good one.</p><p><a href="https://en.wikipedia.org/wiki/Template_method_pattern"><span class='red'>Template Method</span></a>. is wrong, since implementation inheritance <a href="/2016/09/13/inheritance-is-procedural.html">is procedural</a>.</p><p><a href="https://en.wikipedia.org/wiki/Visitor_pattern"><span class='red'>Visitor</span></a>. A rather <a href="/2015/02/20/utility-classes-vs-functional-programming.html">procedural</a> concept that treats objects as data structures, which we can manipulate.</p><hr/><p>I have nothing against <a href="https://en.wikipedia.org/wiki/Concurrency_pattern">concurrency patterns</a> either; they are all <span class="green">good</span>, since they have almost nothing to do with object-oriented programming.</p><p>If you know some other design (anti-)patterns, let me know in the comments below. I&#39;ll add them here.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Defensive programming is a good idea, but the way it gets implemented is, in most cases, very wrong; here is what I&apos;m suggesting instead. " /> <meta name="keywords" content="check for null, defensive programming, startup failure stories, validate method arguments, validators in oop" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2016-01-26 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Defensive Programming via Validating Decorators"/> <meta name="twitter:description" property="og:description" content="Defensive programming is a good idea, but the way it gets implemented is, in most cases, very wrong; here is what I&apos;m suggesting instead. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2016/01/26/defensive-programming.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2016/01/26/defensive-programming.html" /> <link rel="amphtml" href="https://www.yegor256.com/2016/01/26/defensive-programming.amp.html" /> <title>Defensive Programming via Validating Decorators </title> <meta name='og:image' content='https://www.yegor256.com/images/2016/01/shi-mian-mai-fu.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2016/01/shi-mian-mai-fu.jpg'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='508'/> <meta name='twitter:image:height' content='508'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Shi mian mai fu (2004) by Yimou Zhang'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2016/01/26/defensive-programming.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2016/01/26/defensive-programming.html">https://www.yegor256.com/2016/01/26/defensive-programming.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Defensive Programming via Validating Decorators</h1><aside class='book'><a href='http://amzn.to/2pyceWc'><img src='/images/books/elegant-objects/cover.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='http://amzn.to/2pyceWc'>Section&nbsp;5.2</a><br/> of my book<a href='http://amzn.to/2pyceWc'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2016-01-26T00:00:00+00:00"> 26 January 2016 </time> </li> <li class="desktop-only" itemprop="locationCreated">Palo Alto, CA</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2016/01/26/defensive-programming.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>Do you check the input parameters of your methods for validity? I don&#39;t. I used to, but not anymore. I just let my methods crash with a null pointer and other exceptions when parameters are not valid. This may sound illogical, but only in the beginning. I&#39;m suggesting you use <strong>validating decorators</strong> instead.</p><figure class='jb_picture'><img itemprop='image' alt='Shi mian mai fu (2004) by Yimou Zhang' src='/images/2016/01/shi-mian-mai-fu.jpg' longdesc='#7c52eb30'/><figcaption id='7c52eb30'>Shi mian mai fu (2004) by Yimou Zhang</figcaption></figure><p>Let&#39;s take a look at this rather typical Java example:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Report</span> <span class="o">{</span>
  <span class="kt">void</span> <span class="nf">export</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">file</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span>
        <span class="s">&quot;File is NULL; can&#39;t export.&quot;</span>
      <span class="o">);</span>
    <span class="o">}</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span>
        <span class="s">&quot;File already exists.&quot;</span>
      <span class="o">);</span>
    <span class="o">}</span>
    <span class="c1">// Export the report to the file</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Pretty <a href="https://en.wikipedia.org/wiki/Defensive_programming">defensive</a>, right? If we remove these validations, the code will be much shorter, but it will crash with rather confusing messages if <code>NULL</code> is provided by the client. Moreover, if the file already exists, our <code>Report</code> will silently overwrite it. Pretty dangerous, right?</p><p>Yes, we must protect ourselves, and we must be defensive.</p><p>But not this way, not by bloating the class with validations that have nothing to do with its core functionality. Instead, we should use decorators to do the validation. Here is how. First, there must be an interface <code>Report</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">interface</span> <span class="nc">Report</span> <span class="o">{</span>
  <span class="kt">void</span> <span class="nf">export</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>Then, a class that implements the core functionality:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">DefaultReport</span> <span class="kd">implements</span> <span class="n">Report</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kt">void</span> <span class="nf">export</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Export the report to the file</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>And, finally, a number of decorators that will protect us:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">NoWriteOverReport</span> <span class="kd">implements</span> <span class="n">Report</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Report</span> <span class="n">origin</span><span class="o">;</span>
  <span class="n">NoWriteOverReport</span><span class="o">(</span><span class="n">Report</span> <span class="n">rep</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">rep</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kt">void</span> <span class="nf">export</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span>
        <span class="s">&quot;File already exists.&quot;</span>
      <span class="o">);</span>
    <span class="o">}</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">export</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Now, the client has the flexibility of composing a complex object from decorators that perform their specific tasks. The core object will do the reporting, while the decorators will validate parameters:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Report</span> <span class="n">report</span> <span class="o">=</span> <span class="k">new</span> <span class="n">NoNullReport</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">NoWriteOverReport</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">DefaultReport</span><span class="o">()</span>
  <span class="o">)</span>
<span class="o">);</span>
<span class="n">report</span><span class="o">.</span><span class="na">export</span><span class="o">(</span><span class="n">file</span><span class="o">);</span></code></pre></figure><p>What do we achieve with this approach? First and foremost: smaller objects. And smaller objects always mean higher <strong>maintainability</strong>. Our <code>DefaultReport</code> class will always remain small, no matter how many validations we may invent in the future. The more things we need to validate, the more validating decorators we will create. All of them will be small and cohesive. And we&#39;ll be able to put them together in different variations.</p><p>Besides that, this approach makes our code much more <strong>reusable</strong>, as classes perform very few operations and don&#39;t defend themselves by default. While being defensive is an important feature, we&#39;ll use validating decorators. But this will not always be the case. Sometimes validation is just too expensive in terms of time and memory, and we may want to work directly with objects that don&#39;t defend themselves.</p><p>I also decided not to use the Java Validation API anymore for the same reason. Its annotations make classes much more verbose and less cohesive. I&#39;m using validating decorators instead.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2016/01/26/defensive-programming.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2016/01/26/defensive-programming.html&amp;text=Defensive+Programming+via+Validating+Decorators" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2016/01/26/defensive-programming.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2016/01/26/defensive-programming.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2016/01/26/defensive-programming.html%3F2016-04&amp;title=Defensive+Programming+via+Validating+Decorators" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2016/01/26/defensive-programming.html%3F2016-04&amp;t=Defensive+Programming+via+Validating+Decorators" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>Do you check the input parameters of your methods for validity? I don&#39;t. I used to, but not anymore. I just let my methods crash with a null pointer and other exceptions when parameters are not valid. This may sound illogical, but only in the beginning. I&#39;m suggesting you use <strong>validating decorators</strong> instead.</p><figure class='jb_picture'><img itemprop='image' alt='Shi mian mai fu (2004) by Yimou Zhang' src='/images/2016/01/shi-mian-mai-fu.jpg' longdesc='#7c52eb30'/><figcaption id='7c52eb30'>Shi mian mai fu (2004) by Yimou Zhang</figcaption></figure><p>Let&#39;s take a look at this rather typical Java example:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Report</span> <span class="o">{</span>
  <span class="kt">void</span> <span class="nf">export</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">file</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span>
        <span class="s">&quot;File is NULL; can&#39;t export.&quot;</span>
      <span class="o">);</span>
    <span class="o">}</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span>
        <span class="s">&quot;File already exists.&quot;</span>
      <span class="o">);</span>
    <span class="o">}</span>
    <span class="c1">// Export the report to the file</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Pretty <a href="https://en.wikipedia.org/wiki/Defensive_programming">defensive</a>, right? If we remove these validations, the code will be much shorter, but it will crash with rather confusing messages if <code>NULL</code> is provided by the client. Moreover, if the file already exists, our <code>Report</code> will silently overwrite it. Pretty dangerous, right?</p><p>Yes, we must protect ourselves, and we must be defensive.</p><p>But not this way, not by bloating the class with validations that have nothing to do with its core functionality. Instead, we should use decorators to do the validation. Here is how. First, there must be an interface <code>Report</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">interface</span> <span class="nc">Report</span> <span class="o">{</span>
  <span class="kt">void</span> <span class="nf">export</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>Then, a class that implements the core functionality:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">DefaultReport</span> <span class="kd">implements</span> <span class="n">Report</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kt">void</span> <span class="nf">export</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Export the report to the file</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>And, finally, a number of decorators that will protect us:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">NoWriteOverReport</span> <span class="kd">implements</span> <span class="n">Report</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Report</span> <span class="n">origin</span><span class="o">;</span>
  <span class="n">NoWriteOverReport</span><span class="o">(</span><span class="n">Report</span> <span class="n">rep</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">rep</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kt">void</span> <span class="nf">export</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span>
        <span class="s">&quot;File already exists.&quot;</span>
      <span class="o">);</span>
    <span class="o">}</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">export</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Now, the client has the flexibility of composing a complex object from decorators that perform their specific tasks. The core object will do the reporting, while the decorators will validate parameters:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Report</span> <span class="n">report</span> <span class="o">=</span> <span class="k">new</span> <span class="n">NoNullReport</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">NoWriteOverReport</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">DefaultReport</span><span class="o">()</span>
  <span class="o">)</span>
<span class="o">);</span>
<span class="n">report</span><span class="o">.</span><span class="na">export</span><span class="o">(</span><span class="n">file</span><span class="o">);</span></code></pre></figure><p>What do we achieve with this approach? First and foremost: smaller objects. And smaller objects always mean higher <strong>maintainability</strong>. Our <code>DefaultReport</code> class will always remain small, no matter how many validations we may invent in the future. The more things we need to validate, the more validating decorators we will create. All of them will be small and cohesive. And we&#39;ll be able to put them together in different variations.</p><p>Besides that, this approach makes our code much more <strong>reusable</strong>, as classes perform very few operations and don&#39;t defend themselves by default. While being defensive is an important feature, we&#39;ll use validating decorators. But this will not always be the case. Sometimes validation is just too expensive in terms of time and memory, and we may want to work directly with objects that don&#39;t defend themselves.</p><p>I also decided not to use the Java Validation API anymore for the same reason. Its annotations make classes much more verbose and less cohesive. I&#39;m using validating decorators instead.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Equity or cash? These days, it seems that working for equity is the way to become a millionaire. I don&apos;t think it&apos;s true. " /> <meta name="keywords" content="cash or equity, equity instead of cash, equity instead of salary, equity salary, equity salary adjustment" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2016-01-12 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Good Programmers Don't Work for Equity"/> <meta name="twitter:description" property="og:description" content="Equity or cash? These days, it seems that working for equity is the way to become a millionaire. I don&apos;t think it&apos;s true. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2016/01/12/good-programmers-dont-work-for-equity.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2016/01/12/good-programmers-dont-work-for-equity.html" /> <link rel="amphtml" href="https://www.yegor256.com/2016/01/12/good-programmers-dont-work-for-equity.amp.html" /> <title>Good Programmers Don&#39;t Work for Equity </title> <meta name='og:image' content='https://www.yegor256.com/images/2016/01/how-much-do-you-love-me.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2016/01/how-much-do-you-love-me.jpg'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='739'/> <meta name='twitter:image:height' content='739'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Combien tu m&#39;aimes? (2005) by Bertrand Blier'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2016/01/12/good-programmers-dont-work-for-equity.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2016/01/12/good-programmers-dont-work-for-equity.html">https://www.yegor256.com/2016/01/12/good-programmers-dont-work-for-equity.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Good Programmers Don&#39;t Work for Equity</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2016-01-12T00:00:00+00:00"> 12 January 2016 </time> </li> <li class="desktop-only" itemprop="locationCreated">Los Angeles, CA</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2016/01/12/good-programmers-dont-work-for-equity.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>&quot;You&#39;re a good programmer. I&#39;m a great entrepreneur. This is a breakthrough idea. Help me build it. I don&#39;t have cash, but I will give you equity. Deal?&quot; I hear this at least once a month, and I always say no. Not because I don&#39;t like your idea. Indeed, it is really interesting. And not because I&#39;m too busy. I would definitely find time for a good idea. It&#39;s not that. I say no because I don&#39;t think you&#39;re a good entrepreneur.</p><figure class='jb_picture'><img itemprop='image' alt='Combien tu m&#39;aimes? (2005) by Bertrand Blier' src='/images/2016/01/how-much-do-you-love-me.jpg' longdesc='#74a39f1f'/><figcaption id='74a39f1f'>Combien tu m&#39;aimes? (2005) by Bertrand Blier</figcaption></figure><p>So you want a good programmer to build your product. Or maybe a group of good programmers. And you are ready to give me some equity in exchange. That&#39;s reasonable.</p><aside class='quote'>You&#39;re a good entrepreneur, right? How come you don&#39;t have money, then?</aside><p>But what is your part of the deal?</p><p>How much are you putting on the table?</p><p>You say that you&#39;re a good entrepreneur, right? How come you don&#39;t have money, then? How come you can&#39;t find someone to pay for the work of a good programmer?</p><p>I will create a product for you, but you will most certainly fail. You <strong>already</strong> failed. You failed to find initial investment to cover the startup expenses of the business. Why do you think you will succeed after the product is ready?</p><p>The point is that a good programmer will <strong>never</strong> work for equity. Not because a good programmer is greedy, or doesn&#39;t want to risk, or doesn&#39;t believe in new ideas. Not at all.</p><p>A good programmer wants to work with a <strong>good</strong> entrepreneur. And a good entrepreneur knows how to find money. That&#39;s the definition of a decent entrepreneur.</p><p>Period.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2016/01/12/good-programmers-dont-work-for-equity.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2016/01/12/good-programmers-dont-work-for-equity.html&amp;text=Good+Programmers+Don%27t+Work+for+Equity" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2016/01/12/good-programmers-dont-work-for-equity.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2016/01/12/good-programmers-dont-work-for-equity.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2016/01/12/good-programmers-dont-work-for-equity.html%3F2016-02&amp;title=Good+Programmers+Don%27t+Work+for+Equity" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2016/01/12/good-programmers-dont-work-for-equity.html%3F2016-02&amp;t=Good+Programmers+Don%27t+Work+for+Equity" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>&quot;You&#39;re a good programmer. I&#39;m a great entrepreneur. This is a breakthrough idea. Help me build it. I don&#39;t have cash, but I will give you equity. Deal?&quot; I hear this at least once a month, and I always say no. Not because I don&#39;t like your idea. Indeed, it is really interesting. And not because I&#39;m too busy. I would definitely find time for a good idea. It&#39;s not that. I say no because I don&#39;t think you&#39;re a good entrepreneur.</p><figure class='jb_picture'><img itemprop='image' alt='Combien tu m&#39;aimes? (2005) by Bertrand Blier' src='/images/2016/01/how-much-do-you-love-me.jpg' longdesc='#74a39f1f'/><figcaption id='74a39f1f'>Combien tu m&#39;aimes? (2005) by Bertrand Blier</figcaption></figure><p>So you want a good programmer to build your product. Or maybe a group of good programmers. And you are ready to give me some equity in exchange. That&#39;s reasonable.</p><aside class='quote'>You&#39;re a good entrepreneur, right? How come you don&#39;t have money, then?</aside><p>But what is your part of the deal?</p><p>How much are you putting on the table?</p><p>You say that you&#39;re a good entrepreneur, right? How come you don&#39;t have money, then? How come you can&#39;t find someone to pay for the work of a good programmer?</p><p>I will create a product for you, but you will most certainly fail. You <strong>already</strong> failed. You failed to find initial investment to cover the startup expenses of the business. Why do you think you will succeed after the product is ready?</p><p>The point is that a good programmer will <strong>never</strong> work for equity. Not because a good programmer is greedy, or doesn&#39;t want to risk, or doesn&#39;t believe in new ideas. Not at all.</p><p>A good programmer wants to work with a <strong>good</strong> entrepreneur. And a good entrepreneur knows how to find money. That&#39;s the definition of a decent entrepreneur.</p><p>Period.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Sequential method calls inevitably mean temporal coupling, which is a bottleneck for effective refactoring; avoid them. " /> <meta name="keywords" content="temporal coupling, temporal coupling definition, temporal coupling hidden, temporal coupling in oop, temporal coupling java" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-12-08 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Temporal Coupling Between Method Calls"/> <meta name="twitter:description" property="og:description" content="Sequential method calls inevitably mean temporal coupling, which is a bottleneck for effective refactoring; avoid them. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/12/08/temporal-coupling-between-method-calls.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/12/08/temporal-coupling-between-method-calls.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/12/08/temporal-coupling-between-method-calls.amp.html" /> <title>Temporal Coupling Between Method Calls </title> <meta name='og:image' content='https://www.yegor256.com/images/2015/12/blueberry.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2015/12/blueberry.jpg'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='675'/> <meta name='twitter:image:height' content='675'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Blueberry (2004) by Jan Kounen'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/12/08/temporal-coupling-between-method-calls.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/12/08/temporal-coupling-between-method-calls.html">https://www.yegor256.com/2015/12/08/temporal-coupling-between-method-calls.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Temporal Coupling Between Method Calls</h1><aside class='book'><a href='http://amzn.to/2pyceWc'><img src='/images/books/elegant-objects/cover.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='http://amzn.to/2pyceWc'>Section&nbsp;5.6</a><br/> of my book<a href='http://amzn.to/2pyceWc'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-12-08T00:00:00+00:00"> 8 December 2015 </time> </li> <li class="desktop-only" itemprop="locationCreated">Kiev, Ukraine</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/12/08/temporal-coupling-between-method-calls.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>Temporal coupling happens between sequential method calls when they must stay in a particular order. This is inevitable in imperative programming, but we can reduce the negative effect of it just by turning those static procedures into functions. Take a look at this example.</p><figure class='jb_picture'><img itemprop='image' alt='Blueberry (2004) by Jan Kounen' src='/images/2015/12/blueberry.jpg' longdesc='#17ff3e16'/><figcaption id='17ff3e16'>Blueberry (2004) by Jan Kounen</figcaption></figure><p>Here is the code:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">names</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">();</span>
    <span class="n">Foo</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="s">&quot;Jeff&quot;</span><span class="o">);</span>
    <span class="n">Foo</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="s">&quot;Walter&quot;</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">list</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">append</span><span class="o">(</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">,</span> <span class="n">String</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">toLowerCase</span><span class="o">());</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>What do you think about that? I believe it&#39;s clear what <code>names()</code> is doing---creating a list of names. In order to avoid duplication, there is a supplementary <em>procedure</em>, <code>append()</code>, which converts an item to lowercase and adds it to the list.</p><p>This is poor design.</p><p>It is a <strong>procedural</strong> design, and there is <strong>temporal coupling</strong> between lines in method <code>names()</code>.</p><p>Let me first show you a better (though not the best!) design, then I will try to explain its benefits:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">names</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Foo</span><span class="o">.</span><span class="na">with</span><span class="o">(</span>
      <span class="n">Foo</span><span class="o">.</span><span class="na">with</span><span class="o">(</span>
        <span class="k">new</span> <span class="n">LinkedList</span><span class="o">(),</span>
        <span class="s">&quot;Jeff&quot;</span>
      <span class="o">),</span>
      <span class="s">&quot;Walter&quot;</span>
    <span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">with</span><span class="o">(</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">,</span> <span class="n">String</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">toLowerCase</span><span class="o">());</span>
    <span class="k">return</span> <span class="n">list</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>An ideal design for method <code>with()</code> would create a new instance of <code>List</code>, populate it through <code>addAll(list)</code>, then <code>add(item)</code> to it, and finally return. That would be perfectly <a href="http://www.yegor256.com/2014/06/09/objects-should-be-immutable.html">immutable</a>, but slow.</p><p>So, what is wrong with this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">();</span>
<span class="n">Foo</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="s">&quot;Jeff&quot;</span><span class="o">);</span>
<span class="n">Foo</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="s">&quot;Walter&quot;</span><span class="o">);</span>
<span class="k">return</span> <span class="n">list</span><span class="o">;</span></code></pre></figure><p>It looks perfectly clean, doesn&#39;t it? Instantiate a list, append two items to it, and return it. Yes, it is clean---for now. Because we remember what <code>append()</code> is doing. In a few months, we&#39;ll get back to this code, and it will look like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">();</span>
<span class="c1">// 10 more lines here</span>
<span class="n">Foo</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="s">&quot;Jeff&quot;</span><span class="o">);</span>
<span class="n">Foo</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="s">&quot;Walter&quot;</span><span class="o">);</span>
<span class="c1">// 10 more lines here</span>
<span class="k">return</span> <span class="n">list</span><span class="o">;</span></code></pre></figure><p>Is it so clear now that <code>append()</code> is actually adding <code>&quot;Jeff&quot;</code> to <code>list</code>? What will happen if I remove that line? Will it affect the result being returned in the last line? I don&#39;t know. I need to <strong>check</strong> the body of method <code>append()</code> to make sure.</p><p>Also, how about returning <code>list</code> first and calling <code>append()</code> afterwards? This is what possible &quot;refactoring&quot; may do to our code:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">();</span>
<span class="k">if</span> <span class="o">(</span><span class="cm">/* something <em>/</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">list</span><span class="o">;</span>
<span class="o">}</span>
<span class="c1">// 10 more lines here</span>
<span class="n">Foo</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="s">&quot;Walter&quot;</span><span class="o">);</span>
<span class="n">Foo</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="s">&quot;Jeff&quot;</span><span class="o">);</span>
<span class="c1">// 10 more lines here</span>
<span class="k">return</span> <span class="n">list</span><span class="o">;</span></code></pre></figure><p>First of all, we return <code>list</code> too early, when it is not ready. But did anyone tell me that these two calls to <code>append()</code> must happen before <code>return list</code>? Second, we changed the order of <code>append()</code> calls. Again, did anyone tell me that it&#39;s important to call them in that particular order?</p><p>Nobody. Nowhere. This is called <strong>temporal coupling</strong>.</p><p>Our lines are <strong>coupled</strong> together. They must stay in this particular order, but the knowledge about that order is hidden. It&#39;s easy to destroy the order, and our compiler won&#39;t be able to catch us.</p><p>To the contrary, this design doesn&#39;t have any &quot;order&quot;:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">return</span> <span class="n">Foo</span><span class="o">.</span><span class="na">with</span><span class="o">(</span>
  <span class="n">Foo</span><span class="o">.</span><span class="na">with</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">LinkedList</span><span class="o">(),</span>
    <span class="s">&quot;Jeff&quot;</span>
  <span class="o">),</span>
  <span class="s">&quot;Walter&quot;</span>
<span class="o">);</span></code></pre></figure><p>It just <strong>returns</strong> a list, which is constructed by a few calls to the <code>with()</code> method. It is a single line instead of four.</p><p>As <a href="/2015/08/18/multiple-return-statements-in-oop.html">discussed before</a>, an ideal method in OOP must have just a single statement, and this statement is <code>return</code>.</p><p>The same is true about validation. For example, this code is bad:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;Jeff&quot;</span><span class="o">);</span>
<span class="n">Foo</span><span class="o">.</span><span class="na">checkIfListStillHasSpace</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
<span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;Walter&quot;</span><span class="o">);</span></code></pre></figure><p>While this one is much better:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;Jeff&quot;</span><span class="o">);</span>
<span class="n">Foo</span><span class="o">.</span><span class="na">withEnoughSpace</span><span class="o">(</span><span class="n">list</span><span class="o">).</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;Walter&quot;</span><span class="o">);</span></code></pre></figure><p>See the difference?</p><p>And, of course, an ideal approach would be to use <a href="/2015/02/26/composable-decorators.html">composable decorators</a> instead of these ugly static methods. But if it&#39;s not possible for some reason, just don&#39;t make those static methods look like procedures. Make sure they always return results, which become arguments to further calls.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/12/08/temporal-coupling-between-method-calls.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/12/08/temporal-coupling-between-method-calls.html&amp;text=Temporal+Coupling+Between+Method+Calls" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/12/08/temporal-coupling-between-method-calls.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/12/08/temporal-coupling-between-method-calls.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/12/08/temporal-coupling-between-method-calls.html%3F2015-49&amp;title=Temporal+Coupling+Between+Method+Calls" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/12/08/temporal-coupling-between-method-calls.html%3F2015-49&amp;t=Temporal+Coupling+Between+Method+Calls" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>Temporal coupling happens between sequential method calls when they must stay in a particular order. This is inevitable in imperative programming, but we can reduce the negative effect of it just by turning those static procedures into functions. Take a look at this example.</p><figure class='jb_picture'><img itemprop='image' alt='Blueberry (2004) by Jan Kounen' src='/images/2015/12/blueberry.jpg' longdesc='#17ff3e16'/><figcaption id='17ff3e16'>Blueberry (2004) by Jan Kounen</figcaption></figure><p>Here is the code:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">names</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">();</span>
    <span class="n">Foo</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="s">&quot;Jeff&quot;</span><span class="o">);</span>
    <span class="n">Foo</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="s">&quot;Walter&quot;</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">list</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">append</span><span class="o">(</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">,</span> <span class="n">String</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">toLowerCase</span><span class="o">());</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>What do you think about that? I believe it&#39;s clear what <code>names()</code> is doing---creating a list of names. In order to avoid duplication, there is a supplementary <em>procedure</em>, <code>append()</code>, which converts an item to lowercase and adds it to the list.</p><p>This is poor design.</p><p>It is a <strong>procedural</strong> design, and there is <strong>temporal coupling</strong> between lines in method <code>names()</code>.</p><p>Let me first show you a better (though not the best!) design, then I will try to explain its benefits:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">names</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Foo</span><span class="o">.</span><span class="na">with</span><span class="o">(</span>
      <span class="n">Foo</span><span class="o">.</span><span class="na">with</span><span class="o">(</span>
        <span class="k">new</span> <span class="n">LinkedList</span><span class="o">(),</span>
        <span class="s">&quot;Jeff&quot;</span>
      <span class="o">),</span>
      <span class="s">&quot;Walter&quot;</span>
    <span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">with</span><span class="o">(</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">,</span> <span class="n">String</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">toLowerCase</span><span class="o">());</span>
    <span class="k">return</span> <span class="n">list</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>An ideal design for method <code>with()</code> would create a new instance of <code>List</code>, populate it through <code>addAll(list)</code>, then <code>add(item)</code> to it, and finally return. That would be perfectly <a href="http://www.yegor256.com/2014/06/09/objects-should-be-immutable.html">immutable</a>, but slow.</p><p>So, what is wrong with this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">();</span>
<span class="n">Foo</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="s">&quot;Jeff&quot;</span><span class="o">);</span>
<span class="n">Foo</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="s">&quot;Walter&quot;</span><span class="o">);</span>
<span class="k">return</span> <span class="n">list</span><span class="o">;</span></code></pre></figure><p>It looks perfectly clean, doesn&#39;t it? Instantiate a list, append two items to it, and return it. Yes, it is clean---for now. Because we remember what <code>append()</code> is doing. In a few months, we&#39;ll get back to this code, and it will look like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">();</span>
<span class="c1">// 10 more lines here</span>
<span class="n">Foo</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="s">&quot;Jeff&quot;</span><span class="o">);</span>
<span class="n">Foo</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="s">&quot;Walter&quot;</span><span class="o">);</span>
<span class="c1">// 10 more lines here</span>
<span class="k">return</span> <span class="n">list</span><span class="o">;</span></code></pre></figure><p>Is it so clear now that <code>append()</code> is actually adding <code>&quot;Jeff&quot;</code> to <code>list</code>? What will happen if I remove that line? Will it affect the result being returned in the last line? I don&#39;t know. I need to <strong>check</strong> the body of method <code>append()</code> to make sure.</p><p>Also, how about returning <code>list</code> first and calling <code>append()</code> afterwards? This is what possible &quot;refactoring&quot; may do to our code:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">();</span>
<span class="k">if</span> <span class="o">(</span><span class="cm">/</em> something */</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">list</span><span class="o">;</span>
<span class="o">}</span>
<span class="c1">// 10 more lines here</span>
<span class="n">Foo</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="s">&quot;Walter&quot;</span><span class="o">);</span>
<span class="n">Foo</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="s">&quot;Jeff&quot;</span><span class="o">);</span>
<span class="c1">// 10 more lines here</span>
<span class="k">return</span> <span class="n">list</span><span class="o">;</span></code></pre></figure><p>First of all, we return <code>list</code> too early, when it is not ready. But did anyone tell me that these two calls to <code>append()</code> must happen before <code>return list</code>? Second, we changed the order of <code>append()</code> calls. Again, did anyone tell me that it&#39;s important to call them in that particular order?</p><p>Nobody. Nowhere. This is called <strong>temporal coupling</strong>.</p><p>Our lines are <strong>coupled</strong> together. They must stay in this particular order, but the knowledge about that order is hidden. It&#39;s easy to destroy the order, and our compiler won&#39;t be able to catch us.</p><p>To the contrary, this design doesn&#39;t have any &quot;order&quot;:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">return</span> <span class="n">Foo</span><span class="o">.</span><span class="na">with</span><span class="o">(</span>
  <span class="n">Foo</span><span class="o">.</span><span class="na">with</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">LinkedList</span><span class="o">(),</span>
    <span class="s">&quot;Jeff&quot;</span>
  <span class="o">),</span>
  <span class="s">&quot;Walter&quot;</span>
<span class="o">);</span></code></pre></figure><p>It just <strong>returns</strong> a list, which is constructed by a few calls to the <code>with()</code> method. It is a single line instead of four.</p><p>As <a href="/2015/08/18/multiple-return-statements-in-oop.html">discussed before</a>, an ideal method in OOP must have just a single statement, and this statement is <code>return</code>.</p><p>The same is true about validation. For example, this code is bad:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;Jeff&quot;</span><span class="o">);</span>
<span class="n">Foo</span><span class="o">.</span><span class="na">checkIfListStillHasSpace</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
<span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;Walter&quot;</span><span class="o">);</span></code></pre></figure><p>While this one is much better:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;Jeff&quot;</span><span class="o">);</span>
<span class="n">Foo</span><span class="o">.</span><span class="na">withEnoughSpace</span><span class="o">(</span><span class="n">list</span><span class="o">).</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;Walter&quot;</span><span class="o">);</span></code></pre></figure><p>See the difference?</p><p>And, of course, an ideal approach would be to use <a href="/2015/02/26/composable-decorators.html">composable decorators</a> instead of these ugly static methods. But if it&#39;s not possible for some reason, just don&#39;t make those static methods look like procedures. Make sure they always return results, which become arguments to further calls.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="One of the most helpful things you can do is add a contextual message to an exception on each re-throw &amp;dash; and actually, in all other situations. " /> <meta name="keywords" content="rethrow exception, rethrow exception c++, rethrow exception java, rethrow exception scala, rethrow exception with new message" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-12-01 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Throwing an Exception Without Proper Context Is a Bad Habit"/> <meta name="twitter:description" property="og:description" content="One of the most helpful things you can do is add a contextual message to an exception on each re-throw &amp;dash; and actually, in all other situations. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/12/01/rethrow-exceptions.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/12/01/rethrow-exceptions.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/12/01/rethrow-exceptions.amp.html" /> <title>Throwing an Exception Without Proper Context Is a Bad Habit </title> <meta name='og:image' content='https://www.yegor256.com/images/2015/12/four-rooms.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2015/12/four-rooms.jpg'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='649'/> <meta name='twitter:image:height' content='649'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Four Rooms (1995) by Allison Anders et al.'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/12/01/rethrow-exceptions.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/12/01/rethrow-exceptions.html">https://www.yegor256.com/2015/12/01/rethrow-exceptions.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Throwing an Exception Without Proper Context Is a Bad Habit</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-12-01T00:00:00+00:00"> 1 December 2015 </time> </li> <li class="desktop-only" itemprop="locationCreated">San Jose, CA</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/12/01/rethrow-exceptions.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>I keep repeating the same mistake again and again. So it&#39;s time to stop and make a rule to prevent this from happening anymore. The mistake is not fatal, but it&#39;s very annoying. When I look at production logs, I often see something like <code>&quot;File doesn&#39;t exist&quot;</code>, and I ask myself: What file? Where is it supposed to exist? What did the server try to do with it? What was going on a second before it crashed? There is no answer in the log, and it&#39;s totally my fault. I either 1) don&#39;t re-throw or 2) re-throw without providing context. Both are wrong.</p><figure class='jb_picture'><img itemprop='image' alt='Four Rooms (1995) by Allison Anders et al.' src='/images/2015/12/four-rooms.jpg' longdesc='#ddf945c0'/><figcaption id='ddf945c0'>Four Rooms (1995) by Allison Anders et al.</figcaption></figure><p>This is how the code may look:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span>
    <span class="s">&quot;File doesn&#39;t exist&quot;</span>
  <span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>It may also look like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">try</span> <span class="o">{</span>
  <span class="n">Files</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>Both examples demonstrate an inadequate style of handling situations that involve exceptions and reporting them. What&#39;s wrong here? The exception messages are not thorough enough. They simply don&#39;t contain any information from the place where they originated from.</p><p>This is how they should look instead:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span>
    <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
      <span class="s">&quot;User profile file %s doesn&#39;t exist&quot;</span><span class="o">,</span>
      <span class="n">file</span><span class="o">.</span><span class="na">getAbsolutePath</span><span class="o">()</span>
    <span class="o">)</span>
  <span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>And the second example should look like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">try</span> <span class="o">{</span>
  <span class="n">Files</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span>
    <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
      <span class="s">&quot;Can&#39;t delete user profile data file %s&quot;</span><span class="o">,</span>
      <span class="n">file</span><span class="o">.</span><span class="na">getAbsolutePath</span><span class="o">()</span>
    <span class="o">),</span>
    <span class="n">ex</span>
  <span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>See the difference? This may look like redundant code, but it&#39;s not. Of course, when I&#39;m writing all this, I don&#39;t really care about logs and exceptions. I&#39;m not really expecting this file to be absent.</p><p>But I should.</p><p>There should be a rule: Every time we throw or re-throw, an exception message must describe the problem with as much detail as possible.</p><p>Of course, we can&#39;t forget about security and risk putting any sensitive information into the exception message, like passwords, credit card numbers, etc. Besides that, as much as possible must be exposed to the exception catcher at a higher level.</p><p>Throwing an exception is literally an escalation of a problem to a higher level of management. Imagine that my boss is asking me to install a new server. I come back to him in a few hours and say, &quot;I failed; sorry.&quot; That would sound strange. He would ask for more details. Why did I fail? What exactly went wrong? Is it possible to do it differently? Etc.</p><p>Such code is literally a sign of disrespect to the client:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span>
  <span class="s">&quot;File doesn&#39;t exist&quot;</span>
<span class="o">);</span></code></pre></figure><p>I have to be more verbose and give more details.</p><p>And I&#39;m not alone in this mistake. I see it everywhere, and it really makes <a href="/2016/02/09/are-you-still-debugging.html">debugging</a> difficult, especially in production, where it&#39;s almost impossible to reproduce the problem right away.</p><p>Thus, please be more verbose in your exception messages. I will do the same in my code :)</p><p>And one more thing before you go. In most OOP languages, exceptions are unchecked, which means that catching them is not a mandatory operation, <a href="/2015/07/28/checked-vs-unchecked-exceptions.html">unfortunately</a>. Nevertheless, I recommend you catch, add context, and re-throw them all, <strong>always</strong>. This may seem like pure noise, but it&#39;s not! Just make your methods smaller and ensure all exceptions sent out of them have enough information about their origins. You will do yourself and everybody else a big favor.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/12/01/rethrow-exceptions.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/12/01/rethrow-exceptions.html&amp;text=Throwing+an+Exception+Without+Proper+Context+Is+a+Bad+Habit" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/12/01/rethrow-exceptions.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/12/01/rethrow-exceptions.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/12/01/rethrow-exceptions.html%3F2015-48&amp;title=Throwing+an+Exception+Without+Proper+Context+Is+a+Bad+Habit" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/12/01/rethrow-exceptions.html%3F2015-48&amp;t=Throwing+an+Exception+Without+Proper+Context+Is+a+Bad+Habit" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>I keep repeating the same mistake again and again. So it&#39;s time to stop and make a rule to prevent this from happening anymore. The mistake is not fatal, but it&#39;s very annoying. When I look at production logs, I often see something like <code>&quot;File doesn&#39;t exist&quot;</code>, and I ask myself: What file? Where is it supposed to exist? What did the server try to do with it? What was going on a second before it crashed? There is no answer in the log, and it&#39;s totally my fault. I either 1) don&#39;t re-throw or 2) re-throw without providing context. Both are wrong.</p><figure class='jb_picture'><img itemprop='image' alt='Four Rooms (1995) by Allison Anders et al.' src='/images/2015/12/four-rooms.jpg' longdesc='#ddf945c0'/><figcaption id='ddf945c0'>Four Rooms (1995) by Allison Anders et al.</figcaption></figure><p>This is how the code may look:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span>
    <span class="s">&quot;File doesn&#39;t exist&quot;</span>
  <span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>It may also look like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">try</span> <span class="o">{</span>
  <span class="n">Files</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>Both examples demonstrate an inadequate style of handling situations that involve exceptions and reporting them. What&#39;s wrong here? The exception messages are not thorough enough. They simply don&#39;t contain any information from the place where they originated from.</p><p>This is how they should look instead:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span>
    <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
      <span class="s">&quot;User profile file %s doesn&#39;t exist&quot;</span><span class="o">,</span>
      <span class="n">file</span><span class="o">.</span><span class="na">getAbsolutePath</span><span class="o">()</span>
    <span class="o">)</span>
  <span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>And the second example should look like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">try</span> <span class="o">{</span>
  <span class="n">Files</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span>
    <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
      <span class="s">&quot;Can&#39;t delete user profile data file %s&quot;</span><span class="o">,</span>
      <span class="n">file</span><span class="o">.</span><span class="na">getAbsolutePath</span><span class="o">()</span>
    <span class="o">),</span>
    <span class="n">ex</span>
  <span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>See the difference? This may look like redundant code, but it&#39;s not. Of course, when I&#39;m writing all this, I don&#39;t really care about logs and exceptions. I&#39;m not really expecting this file to be absent.</p><p>But I should.</p><p>There should be a rule: Every time we throw or re-throw, an exception message must describe the problem with as much detail as possible.</p><p>Of course, we can&#39;t forget about security and risk putting any sensitive information into the exception message, like passwords, credit card numbers, etc. Besides that, as much as possible must be exposed to the exception catcher at a higher level.</p><p>Throwing an exception is literally an escalation of a problem to a higher level of management. Imagine that my boss is asking me to install a new server. I come back to him in a few hours and say, &quot;I failed; sorry.&quot; That would sound strange. He would ask for more details. Why did I fail? What exactly went wrong? Is it possible to do it differently? Etc.</p><p>Such code is literally a sign of disrespect to the client:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span>
  <span class="s">&quot;File doesn&#39;t exist&quot;</span>
<span class="o">);</span></code></pre></figure><p>I have to be more verbose and give more details.</p><p>And I&#39;m not alone in this mistake. I see it everywhere, and it really makes <a href="/2016/02/09/are-you-still-debugging.html">debugging</a> difficult, especially in production, where it&#39;s almost impossible to reproduce the problem right away.</p><p>Thus, please be more verbose in your exception messages. I will do the same in my code :)</p><p>And one more thing before you go. In most OOP languages, exceptions are unchecked, which means that catching them is not a mandatory operation, <a href="/2015/07/28/checked-vs-unchecked-exceptions.html">unfortunately</a>. Nevertheless, I recommend you catch, add context, and re-throw them all, <strong>always</strong>. This may seem like pure noise, but it&#39;s not! Just make your methods smaller and ensure all exceptions sent out of them have enough information about their origins. You will do yourself and everybody else a big favor.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Decorators are used to extend object functionality without changing their interfaces, and there are two approaches: horizontal and vertical. " /> <meta name="keywords" content="composable decorators, decorator java, decorator pattern, decorator pattern java, encapsulation" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-10-01 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Vertical and Horizontal Decorating"/> <meta name="twitter:description" property="og:description" content="Decorators are used to extend object functionality without changing their interfaces, and there are two approaches: horizontal and vertical. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.amp.html" /> <title>Vertical and Horizontal Decorating </title> <meta name='og:image' content='https://www.yegor256.com/images/2015/10/the-apartment.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2015/10/the-apartment.jpg'/><meta name='og:image:width' content='1107'/> <meta name='twitter:image:width' content='1107'/><meta name='og:image:height' content='727'/> <meta name='twitter:image:height' content='727'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='The Apartment (1960) by Billy Wilder'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html">https://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Vertical and Horizontal Decorating</h1><aside class='book'><a href='http://amzn.to/2qFt4Tn'><img src='/images/books/elegant-objects/cover.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='http://amzn.to/2qFt4Tn'>Section&nbsp;3.2.6</a><br/> of my book<a href='http://amzn.to/2qFt4Tn'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-10-01T00:00:00+00:00"> 1 October 2015 </time> </li> <li class="desktop-only" itemprop="locationCreated">Moscow, Russia</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>A <a href="http://en.wikipedia.org/wiki/Decorator_pattern">decorator pattern</a> is one of the best ways to add features to an object without changing its interface. I use <a href="/2015/02/26/composable-decorators.html">composable decorators</a> quite often and always question myself as to how to design them right when the list of features must be configurable. I&#39;m not sure I have the right answer, but here is some food for thought.</p><figure class='jb_picture'><img itemprop='image' alt='The Apartment (1960) by Billy Wilder' src='/images/2015/10/the-apartment.jpg' longdesc='#3406debc'/><figcaption id='3406debc'>The Apartment (1960) by Billy Wilder</figcaption></figure><p>Let&#39;s say I have a list of numbers:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">interface</span> <span class="nc">Numbers</span> <span class="o">{</span>
  <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">iterate</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>Now I want to create a list that will only have odd, unique, positive, and sorted numbers. The first approach is <strong>vertical</strong> (I just made this name up):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Numbers</span> <span class="n">numbers</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Sorted</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">Unique</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">Odds</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Positive</span><span class="o">(</span>
        <span class="k">new</span> <span class="n">ArrayNumbers</span><span class="o">(</span>
          <span class="k">new</span> <span class="n">Integer</span><span class="o">[]</span> <span class="o">{</span>
            <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">78</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="o">-</span><span class="mi">34</span><span class="o">,</span> <span class="mi">98</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span>
          <span class="o">}</span>
        <span class="o">)</span>
      <span class="o">)</span>
    <span class="o">)</span>
  <span class="o">)</span>
<span class="o">);</span></code></pre></figure><p>The second approach is <strong>horizontal</strong> (again, a name I made up):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Numbers</span> <span class="n">numbers</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Modified</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">ArrayNumbers</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">Integer</span><span class="o">[]</span> <span class="o">{</span>
      <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">78</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="o">-</span><span class="mi">34</span><span class="o">,</span> <span class="mi">98</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span>
    <span class="o">}</span>
  <span class="o">),</span>
  <span class="k">new</span> <span class="n">Diff</span><span class="o">[]</span> <span class="o">{</span>
    <span class="k">new</span> <span class="n">Positive</span><span class="o">(),</span>
    <span class="k">new</span> <span class="n">Odds</span><span class="o">(),</span>
    <span class="k">new</span> <span class="n">Unique</span><span class="o">(),</span>
    <span class="k">new</span> <span class="n">Sorted</span><span class="o">(),</span>
  <span class="o">}</span>
<span class="o">);</span></code></pre></figure><p>See the difference? The first approach decorates <code>ArrayNumbers</code> &quot;vertically,&quot; adding functionality through the composable decorators <code>Positive</code>, <code>Odds</code>, <code>Unique</code>, and <code>Sorted</code>.</p><p>The second approach introduces the new interface <code>Diff</code>, which implements the core functionality of iterating numbers through instances of <code>Positive</code>, <code>Odds</code>, <code>Unique</code>, and <code>Sorted</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">interface</span> <span class="nc">Diff</span> <span class="o">{</span>
  <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">apply</span><span class="o">(</span><span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">origin</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>For the user of <code>numbers</code>, both approaches are the same. The difference is only in the design. Which one is better and when? It seems that vertical decorating is easier to implement and is more suitable for smaller objects that expose just a few methods.</p><p>As for my experience, I always tend to start with vertical decorating since it&#39;s easier to implement but eventually migrate to a horizontal one when the number of decorators starts to grow.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html&amp;text=Vertical+and+Horizontal+Decorating" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html%3F2015-39&amp;title=Vertical+and+Horizontal+Decorating" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/10/01/vertical-horizontal-decorating.html%3F2015-39&amp;t=Vertical+and+Horizontal+Decorating" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>A <a href="http://en.wikipedia.org/wiki/Decorator_pattern">decorator pattern</a> is one of the best ways to add features to an object without changing its interface. I use <a href="/2015/02/26/composable-decorators.html">composable decorators</a> quite often and always question myself as to how to design them right when the list of features must be configurable. I&#39;m not sure I have the right answer, but here is some food for thought.</p><figure class='jb_picture'><img itemprop='image' alt='The Apartment (1960) by Billy Wilder' src='/images/2015/10/the-apartment.jpg' longdesc='#3406debc'/><figcaption id='3406debc'>The Apartment (1960) by Billy Wilder</figcaption></figure><p>Let&#39;s say I have a list of numbers:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">interface</span> <span class="nc">Numbers</span> <span class="o">{</span>
  <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">iterate</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>Now I want to create a list that will only have odd, unique, positive, and sorted numbers. The first approach is <strong>vertical</strong> (I just made this name up):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Numbers</span> <span class="n">numbers</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Sorted</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">Unique</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">Odds</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Positive</span><span class="o">(</span>
        <span class="k">new</span> <span class="n">ArrayNumbers</span><span class="o">(</span>
          <span class="k">new</span> <span class="n">Integer</span><span class="o">[]</span> <span class="o">{</span>
            <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">78</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="o">-</span><span class="mi">34</span><span class="o">,</span> <span class="mi">98</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span>
          <span class="o">}</span>
        <span class="o">)</span>
      <span class="o">)</span>
    <span class="o">)</span>
  <span class="o">)</span>
<span class="o">);</span></code></pre></figure><p>The second approach is <strong>horizontal</strong> (again, a name I made up):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Numbers</span> <span class="n">numbers</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Modified</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">ArrayNumbers</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">Integer</span><span class="o">[]</span> <span class="o">{</span>
      <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">78</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="o">-</span><span class="mi">34</span><span class="o">,</span> <span class="mi">98</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span>
    <span class="o">}</span>
  <span class="o">),</span>
  <span class="k">new</span> <span class="n">Diff</span><span class="o">[]</span> <span class="o">{</span>
    <span class="k">new</span> <span class="n">Positive</span><span class="o">(),</span>
    <span class="k">new</span> <span class="n">Odds</span><span class="o">(),</span>
    <span class="k">new</span> <span class="n">Unique</span><span class="o">(),</span>
    <span class="k">new</span> <span class="n">Sorted</span><span class="o">(),</span>
  <span class="o">}</span>
<span class="o">);</span></code></pre></figure><p>See the difference? The first approach decorates <code>ArrayNumbers</code> &quot;vertically,&quot; adding functionality through the composable decorators <code>Positive</code>, <code>Odds</code>, <code>Unique</code>, and <code>Sorted</code>.</p><p>The second approach introduces the new interface <code>Diff</code>, which implements the core functionality of iterating numbers through instances of <code>Positive</code>, <code>Odds</code>, <code>Unique</code>, and <code>Sorted</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">interface</span> <span class="nc">Diff</span> <span class="o">{</span>
  <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">apply</span><span class="o">(</span><span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">origin</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>For the user of <code>numbers</code>, both approaches are the same. The difference is only in the design. Which one is better and when? It seems that vertical decorating is easier to implement and is more suitable for smaller objects that expose just a few methods.</p><p>As for my experience, I always tend to start with vertical decorating since it&#39;s easier to implement but eventually migrate to a horizontal one when the number of decorators starts to grow.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="How do you know when testing is enough? When there are no bugs? That is a very wrong approach! Instead, stop when certain amount of bugs is found. " /> <meta name="keywords" content="defining exit criteria for testing, entry and exit criteria, software testing, test planning, testing exit criteria" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-09-10 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="When Do You Stop Testing?"/> <meta name="twitter:description" property="og:description" content="How do you know when testing is enough? When there are no bugs? That is a very wrong approach! Instead, stop when certain amount of bugs is found. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/09/10/testing-exit-criteria.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/09/10/testing-exit-criteria.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/09/10/testing-exit-criteria.amp.html" /> <title>When Do You Stop Testing? </title> <meta name='og:image' content='https://www.yegor256.com/images/2015/09/la-fille-sur-le-pont.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2015/09/la-fille-sur-le-pont.jpg'/><meta name='og:image:width' content='1280'/> <meta name='twitter:image:width' content='1280'/><meta name='og:image:height' content='720'/> <meta name='twitter:image:height' content='720'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='La fille sur le pont (1999) by Patrice Leconte'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/09/10/testing-exit-criteria.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/09/10/testing-exit-criteria.html">https://www.yegor256.com/2015/09/10/testing-exit-criteria.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">When Do You Stop Testing?</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-09-10T00:00:00+00:00"> 10 September 2015 </time> </li> <li class="desktop-only" itemprop="locationCreated">Moscow, Russia</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/09/10/testing-exit-criteria.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>There is a software to be tested. There is a team of testers. There is some money in the budget. There is some time in the schedule. We start right now. Testers are trying to break the product, finding bugs, reporting bugs, communicating with programmers when necessary, doing their best to find what&#39;s wrong. Eventually they stop and say &quot;we&#39;re done.&quot; How do they know when to stop? When there is enough testing? It&#39;s obvious---when there are <em>no more bugs left</em> and the product can be shipped! If you think like this, I have bad news for you. You&#39;re <em>fundamentally wrong</em>.</p><figure class='jb_picture'><img itemprop='image' alt='La fille sur le pont (1999) by Patrice Leconte' src='/images/2015/09/la-fille-sur-le-pont.jpg' longdesc='#3e0b5dd3'/><figcaption id='3e0b5dd3'>La fille sur le pont (1999) by Patrice Leconte</figcaption></figure><p>All this is perfectly explained by Glenford Myers in his <a href="http://amzn.to/1Y3qAbN">great book</a> <a href="/2014/08/22/art-of-software-testing.html">The Art of Software Testing</a>. I will just summarize it here again.</p><figure class='badge'><a href='http://amzn.to/1Y3qAbN'><img src='https://www.yegor256.com/images/2015/04/book-art-of-testing.jpg' style='width:96px;max-width:100%;' alt='badge'/></a></figure><p>First, &quot;testing is the process of executing a program with the intent of <em>finding errors</em>&quot; (page 6). Pay attention, the intent is to find errors. Not to prove that the product works fine, but to prove that it <em>doesn&#39;t work</em> as intended. The goal of any tester is to show how the product can be broken, how it fails on different inputs, how it crashes under stress, how it misunderstands the user, how it doesn&#39;t satisfy the requirements. This is why Dr. Myers is calling testing &quot;a destructive, even sadistic, process&quot; (page 6). This is what most testers don&#39;t understand.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=wd-SA1HVmLg'><div class='box'> <img src='https://i.ytimg.com/vi/wd-SA1HVmLg/mqdefault.jpg' alt='YouTube video #wd-SA1HVmLg'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>How Do You Know When Your Product is Ready to be Shipped?; 18 November 2016.</div></aside><p>Second, any software <a href="/2017/05/23/unlimited-number-of-bugs.html">has</a> an <em>unlimited amount of bugs</em>. Dr. Myers says that &quot;you cannot test a program to guarantee that it is error free&quot; (page 10) and that &quot;it is impractical, often impossible, to find all the errors in a program&quot; (page 8). This is also what most testers don&#39;t understand. They believe that there is a <a href="/2015/06/18/good-programmers-bug-free.html">limited number</a> of bugs, which they have to find and call it a day. There literally <a href="/2017/05/23/unlimited-number-of-bugs.html">no limit</a>! The amount of bugs is unlimited, in any software product. No matter how small or big, complex or simple, new or old is the product.</p><aside class='quote'>They can&#39;t find all bugs, no matter how much time we give them</aside><p>Having these axioms in mind, let&#39;s try to decide when testers have to stop. According to Dr. Myers, &quot;one of the most difficult questions to answer when testing a program is determining when to stop, since there is no way of knowing if the error just detected is the last remaining error&quot; (page 135).</p><p>They can&#39;t find all bugs, no matter how much time we give them. And they are motivated to find more and more of them. But at some point of time we must make a decision and release the product. Looks like we will release it with bugs inside? Yes, indeed! We will release a product <em>full of bugs</em>. The only question is how many of them were found already and how critical they were.</p><p>Let&#39;s put it all together. There are too many bugs to be able to find all of them in a reasonable amount of time. However, we have to release a new version, sooner or later. At the same time, testers will always tell us that there are more bugs there and they can find more, just need more time. What to do?</p><p>Dr. Myers says that &quot;since the goal of testing is to find errors, why not make the completion criterion the detection of some predefined number of errors?&quot; (page 136). Indeed, we should predict how many bugs are just enough to find, in order to have a desirable level of <em>confidence</em> that the product is ready to be shipped. Then, ship it, consciously understanding that it still has an unlimited amount of not yet discovered bugs.</p><figure class='badge'><a href='http://amzn.to/266oJr4'><img src='https://www.yegor256.com/images/2015/04/book-object-thinking.jpg' style='width:96px;max-width:100%;' alt='badge'/></a></figure><p>David West in <a href="http://amzn.to/266oJr4">Object Thinking</a> says that &quot;software is released for use, not when it is known to be correct, but when the rate of discovering errors slows down to one that management considers acceptable&quot; (page 13).</p><p>Thus, the only valid criteria for exiting a testing process is the discovery of a <em>forecast</em> amount of bugs.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/09/10/testing-exit-criteria.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/09/10/testing-exit-criteria.html&amp;text=When+Do+You+Stop+Testing%3F" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/09/10/testing-exit-criteria.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/09/10/testing-exit-criteria.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/09/10/testing-exit-criteria.html%3F2015-36&amp;title=When+Do+You+Stop+Testing%3F" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/09/10/testing-exit-criteria.html%3F2015-36&amp;t=When+Do+You+Stop+Testing%3F" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>There is a software to be tested. There is a team of testers. There is some money in the budget. There is some time in the schedule. We start right now. Testers are trying to break the product, finding bugs, reporting bugs, communicating with programmers when necessary, doing their best to find what&#39;s wrong. Eventually they stop and say &quot;we&#39;re done.&quot; How do they know when to stop? When there is enough testing? It&#39;s obvious---when there are <em>no more bugs left</em> and the product can be shipped! If you think like this, I have bad news for you. You&#39;re <em>fundamentally wrong</em>.</p><figure class='jb_picture'><img itemprop='image' alt='La fille sur le pont (1999) by Patrice Leconte' src='/images/2015/09/la-fille-sur-le-pont.jpg' longdesc='#3e0b5dd3'/><figcaption id='3e0b5dd3'>La fille sur le pont (1999) by Patrice Leconte</figcaption></figure><p>All this is perfectly explained by Glenford Myers in his <a href="http://amzn.to/1Y3qAbN">great book</a> <a href="/2014/08/22/art-of-software-testing.html">The Art of Software Testing</a>. I will just summarize it here again.</p><figure class='badge'><a href='http://amzn.to/1Y3qAbN'><img src='https://www.yegor256.com/images/2015/04/book-art-of-testing.jpg' style='width:96px;max-width:100%;' alt='badge'/></a></figure><p>First, &quot;testing is the process of executing a program with the intent of <em>finding errors</em>&quot; (page 6). Pay attention, the intent is to find errors. Not to prove that the product works fine, but to prove that it <em>doesn&#39;t work</em> as intended. The goal of any tester is to show how the product can be broken, how it fails on different inputs, how it crashes under stress, how it misunderstands the user, how it doesn&#39;t satisfy the requirements. This is why Dr. Myers is calling testing &quot;a destructive, even sadistic, process&quot; (page 6). This is what most testers don&#39;t understand.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=wd-SA1HVmLg'><div class='box'> <img src='https://i.ytimg.com/vi/wd-SA1HVmLg/mqdefault.jpg' alt='YouTube video #wd-SA1HVmLg'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>How Do You Know When Your Product is Ready to be Shipped?; 18 November 2016.</div></aside><p>Second, any software <a href="/2017/05/23/unlimited-number-of-bugs.html">has</a> an <em>unlimited amount of bugs</em>. Dr. Myers says that &quot;you cannot test a program to guarantee that it is error free&quot; (page 10) and that &quot;it is impractical, often impossible, to find all the errors in a program&quot; (page 8). This is also what most testers don&#39;t understand. They believe that there is a <a href="/2015/06/18/good-programmers-bug-free.html">limited number</a> of bugs, which they have to find and call it a day. There literally <a href="/2017/05/23/unlimited-number-of-bugs.html">no limit</a>! The amount of bugs is unlimited, in any software product. No matter how small or big, complex or simple, new or old is the product.</p><aside class='quote'>They can&#39;t find all bugs, no matter how much time we give them</aside><p>Having these axioms in mind, let&#39;s try to decide when testers have to stop. According to Dr. Myers, &quot;one of the most difficult questions to answer when testing a program is determining when to stop, since there is no way of knowing if the error just detected is the last remaining error&quot; (page 135).</p><p>They can&#39;t find all bugs, no matter how much time we give them. And they are motivated to find more and more of them. But at some point of time we must make a decision and release the product. Looks like we will release it with bugs inside? Yes, indeed! We will release a product <em>full of bugs</em>. The only question is how many of them were found already and how critical they were.</p><p>Let&#39;s put it all together. There are too many bugs to be able to find all of them in a reasonable amount of time. However, we have to release a new version, sooner or later. At the same time, testers will always tell us that there are more bugs there and they can find more, just need more time. What to do?</p><p>Dr. Myers says that &quot;since the goal of testing is to find errors, why not make the completion criterion the detection of some predefined number of errors?&quot; (page 136). Indeed, we should predict how many bugs are just enough to find, in order to have a desirable level of <em>confidence</em> that the product is ready to be shipped. Then, ship it, consciously understanding that it still has an unlimited amount of not yet discovered bugs.</p><figure class='badge'><a href='http://amzn.to/266oJr4'><img src='https://www.yegor256.com/images/2015/04/book-object-thinking.jpg' style='width:96px;max-width:100%;' alt='badge'/></a></figure><p>David West in <a href="http://amzn.to/266oJr4">Object Thinking</a> says that &quot;software is released for use, not when it is known to be correct, but when the rate of discovering errors slows down to one that management considers acceptable&quot; (page 13).</p><p>Thus, the only valid criteria for exiting a testing process is the discovery of a <em>forecast</em> amount of bugs.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="How to create robust and failure-resistant software---by making it fragile and fail fast, despite intuitive desire to make it fail safe. " /> <meta name="keywords" content="fail fast, fail fast vs fail safe, fail safe, failure resilience, robust architecture" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-08-25 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Need Robust Software? Make It Fragile"/> <meta name="twitter:description" property="og:description" content="How to create robust and failure-resistant software---by making it fragile and fail fast, despite intuitive desire to make it fail safe. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/08/25/fail-fast.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/08/25/fail-fast.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/08/25/fail-fast.amp.html" /> <title>Need Robust Software? Make It Fragile </title> <meta name='og:image' content='https://www.yegor256.com/images/2015/08/black-cat-white-cat.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2015/08/black-cat-white-cat.jpg'/><meta name='og:image:width' content='640'/> <meta name='twitter:image:width' content='640'/><meta name='og:image:height' content='352'/> <meta name='twitter:image:height' content='352'/><meta name='twitter:card' content='summary'/><meta name='twitter:image:alt' content='Black Cat, White Cat (1998) by Emir Kusturica'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/08/25/fail-fast.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/08/25/fail-fast.html">https://www.yegor256.com/2015/08/25/fail-fast.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Need Robust Software? Make It Fragile</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-08-25T00:00:00+00:00"> 25 August 2015 </time> </li> <li class="desktop-only" itemprop="locationCreated">Dnipro, Ukraine</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/08/25/fail-fast.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><ul class="subline"> <li>Discussed at:</li> <li><a href="https://www.reddit.com/r/programming/comments/3ibvnr/need_robust_software_make_it_fragile/">reddit</a></li></ul><p class="unprintable"><p>In any software project, the goal is to create something stable. We don&#39;t want it to break in front of a user. We also don&#39;t want our website to show an &quot;internal application error&quot; instead of a web page. We want our software to work, not fail. That&#39;s a perfectly valid and logical desire, but in order to achieve that, we have to make our software as fragile as possible. This may sound counter-intuitive, but that&#39;s the way it is. The more <strong>fragile</strong> your app is in development, the more <strong>robust</strong> it is in production.</p><figure class='jb_picture'><img itemprop='image' alt='Black Cat, White Cat (1998) by Emir Kusturica' src='/images/2015/08/black-cat-white-cat.jpg' longdesc='#28b040eb'/><figcaption id='28b040eb'>Black Cat, White Cat (1998) by Emir Kusturica</figcaption></figure><p>By fragile, I&#39;m referring to the <a href="http://martinfowler.com/ieeeSoftware/failFast.pdf">Fail Fast</a> philosophy, which is the opposite of Fail Safe. I believe you know the difference, but let me remind you anyway, by example. This is Fail Safe:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kt">int</span> <span class="nf">size</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
    <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure> <aside class='youtube'> <a href='https://www.youtube.com/watch?v=QMcDa2eyRBY'><div class='box'> <img src='https://i.ytimg.com/vi/QMcDa2eyRBY/mqdefault.jpg' alt='YouTube video #QMcDa2eyRBY'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Need Robust Software? Make It Fragile; 29 February 2016.</div></aside><p>This method is supposed to calculate and return a file size. It first checks whether the file exists. If it doesn&#39;t exist, the method returns zero. Indeed, the file is absent, so there is no size. We could complain that the file is absent, but what for? Why make noise? Let&#39;s keep it quiet and return zero. We don&#39;t fail because we&#39;re trying to keep the app running. This is called Fail Safe.</p><p>To the contrary, this is how Fail Fast looks:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kt">int</span> <span class="nf">size</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span>
      <span class="s">&quot;There is no such file; I can&#39;t get its length.&quot;</span>
    <span class="o">);</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>We can&#39;t find a file? We don&#39;t hide this fact. We make this situation public and visible. We scream and cry. We <a href="/2015/12/01/rethrow-exceptions.html">throw</a> an exception. We <strong>want</strong> the app to crash, break, and fail, because someone gave us a file that doesn&#39;t exist. We complain and protest. This is called Fail Fast.</p><aside class='quote'>Fail Safe approach conceals problems and makes code less maintainable, and that&#39;s why it&#39;s difficult to stabilize</aside><p>Which philosophy, if we follow it everywhere, will make our software robust and failure-resilient? Only the second one---the Fail Fast.</p><p>Why? Because the quicker and easier the failure is, the faster it will be fixed. And the fix will be simpler and also more visible. Fail Fast is a much better approach for maintainability. The code becomes cleaner. It is much easier to track a failure. All methods are ready to break and throw an exception on even the tiniest problem.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=nCGBgI1MNwE'><div class='box'> <img src='https://i.ytimg.com/vi/nCGBgI1MNwE/mqdefault.jpg' alt='YouTube video #nCGBgI1MNwE'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Need It Robust? Make It Fragile!; 21 May 2016.</div></aside><p>In this example, if the method returns zero, it&#39;s not obvious whether the file exists and its size is actually zero or if its name is wrong and it is just not found. The Fail Safe approach <strong>conceals</strong> problems and makes code less maintainable, and that&#39;s why it&#39;s difficult to stabilize.</p><p>In the beginning, during production, we will have many crashes and errors. But all of them will be visible and easy to understand. We will fix them and cover them with unit tests. Each fix will make our software more <strong>stable</strong> and better covered by tests.</p><p>Software designed with the Fail Safe approach in mind will look more stable at the beginning, but it will degrade quickly and inevitably turn into an unmaintainable mess.</p><p>Software designed with the Fail Fast approach in mind will crash frequently at the beginning but will improve its stability with every fix and eventually become very stable and robust.</p><p>That&#39;s why fragility is the key success factor for robustness.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/08/25/fail-fast.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/08/25/fail-fast.html&amp;text=Need+Robust+Software%3F+Make+It+Fragile" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/08/25/fail-fast.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/08/25/fail-fast.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/08/25/fail-fast.html%3F2015-34&amp;title=Need+Robust+Software%3F+Make+It+Fragile" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/08/25/fail-fast.html%3F2015-34&amp;t=Need+Robust+Software%3F+Make+It+Fragile" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>In any software project, the goal is to create something stable. We don&#39;t want it to break in front of a user. We also don&#39;t want our website to show an &quot;internal application error&quot; instead of a web page. We want our software to work, not fail. That&#39;s a perfectly valid and logical desire, but in order to achieve that, we have to make our software as fragile as possible. This may sound counter-intuitive, but that&#39;s the way it is. The more <strong>fragile</strong> your app is in development, the more <strong>robust</strong> it is in production.</p><figure class='jb_picture'><img itemprop='image' alt='Black Cat, White Cat (1998) by Emir Kusturica' src='/images/2015/08/black-cat-white-cat.jpg' longdesc='#28b040eb'/><figcaption id='28b040eb'>Black Cat, White Cat (1998) by Emir Kusturica</figcaption></figure><p>By fragile, I&#39;m referring to the <a href="http://martinfowler.com/ieeeSoftware/failFast.pdf">Fail Fast</a> philosophy, which is the opposite of Fail Safe. I believe you know the difference, but let me remind you anyway, by example. This is Fail Safe:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kt">int</span> <span class="nf">size</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
    <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure> <aside class='youtube'> <a href='https://www.youtube.com/watch?v=QMcDa2eyRBY'><div class='box'> <img src='https://i.ytimg.com/vi/QMcDa2eyRBY/mqdefault.jpg' alt='YouTube video #QMcDa2eyRBY'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Need Robust Software? Make It Fragile; 29 February 2016.</div></aside><p>This method is supposed to calculate and return a file size. It first checks whether the file exists. If it doesn&#39;t exist, the method returns zero. Indeed, the file is absent, so there is no size. We could complain that the file is absent, but what for? Why make noise? Let&#39;s keep it quiet and return zero. We don&#39;t fail because we&#39;re trying to keep the app running. This is called Fail Safe.</p><p>To the contrary, this is how Fail Fast looks:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kt">int</span> <span class="nf">size</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(!</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span>
      <span class="s">&quot;There is no such file; I can&#39;t get its length.&quot;</span>
    <span class="o">);</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>We can&#39;t find a file? We don&#39;t hide this fact. We make this situation public and visible. We scream and cry. We <a href="/2015/12/01/rethrow-exceptions.html">throw</a> an exception. We <strong>want</strong> the app to crash, break, and fail, because someone gave us a file that doesn&#39;t exist. We complain and protest. This is called Fail Fast.</p><aside class='quote'>Fail Safe approach conceals problems and makes code less maintainable, and that&#39;s why it&#39;s difficult to stabilize</aside><p>Which philosophy, if we follow it everywhere, will make our software robust and failure-resilient? Only the second one---the Fail Fast.</p><p>Why? Because the quicker and easier the failure is, the faster it will be fixed. And the fix will be simpler and also more visible. Fail Fast is a much better approach for maintainability. The code becomes cleaner. It is much easier to track a failure. All methods are ready to break and throw an exception on even the tiniest problem.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=nCGBgI1MNwE'><div class='box'> <img src='https://i.ytimg.com/vi/nCGBgI1MNwE/mqdefault.jpg' alt='YouTube video #nCGBgI1MNwE'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Need It Robust? Make It Fragile!; 21 May 2016.</div></aside><p>In this example, if the method returns zero, it&#39;s not obvious whether the file exists and its size is actually zero or if its name is wrong and it is just not found. The Fail Safe approach <strong>conceals</strong> problems and makes code less maintainable, and that&#39;s why it&#39;s difficult to stabilize.</p><p>In the beginning, during production, we will have many crashes and errors. But all of them will be visible and easy to understand. We will fix them and cover them with unit tests. Each fix will make our software more <strong>stable</strong> and better covered by tests.</p><p>Software designed with the Fail Safe approach in mind will look more stable at the beginning, but it will degrade quickly and inevitably turn into an unmaintainable mess.</p><p>Software designed with the Fail Fast approach in mind will crash frequently at the beginning but will improve its stability with every fix and eventually become very stable and robust.</p><p>That&#39;s why fragility is the key success factor for robustness.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="While most programmers think checked exceptions in Java are a mistake, I&apos;m of the opposite opinion---unchecked ones are a mistake. " /> <meta name="keywords" content="checked vs unchecked exceptions, checked vs unchecked exceptions c#, checked vs unchecked exceptions debate, checked vs unchecked exceptions example, checked vs unchecked exceptions java" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-07-28 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Checked vs. Unchecked Exceptions: The Debate Is Not Over"/> <meta name="twitter:description" property="og:description" content="While most programmers think checked exceptions in Java are a mistake, I&apos;m of the opposite opinion---unchecked ones are a mistake. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/07/28/checked-vs-unchecked-exceptions.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/07/28/checked-vs-unchecked-exceptions.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/07/28/checked-vs-unchecked-exceptions.amp.html" /> <title>Checked vs. Unchecked Exceptions: The Debate Is Not Over </title> <meta name='og:image' content='https://www.yegor256.com/images/2015/07/true-romance.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2015/07/true-romance.jpg'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='496'/> <meta name='twitter:image:height' content='496'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='True Romance (1993) by Tony Scott'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/07/28/checked-vs-unchecked-exceptions.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/07/28/checked-vs-unchecked-exceptions.html">https://www.yegor256.com/2015/07/28/checked-vs-unchecked-exceptions.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Checked vs. Unchecked Exceptions: The Debate Is Not Over</h1><aside class='book'><a href='http://amzn.to/2qFt4Tn'><img src='/images/books/elegant-objects/cover.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='http://amzn.to/2qFt4Tn'>Section&nbsp;4.2</a><br/> of my book<a href='http://amzn.to/2qFt4Tn'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-07-28T00:00:00+00:00"> 28 July 2015 </time> </li> <li class="desktop-only" itemprop="locationCreated">Sunnyvale, CA</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/07/28/checked-vs-unchecked-exceptions.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>Do we need checked exceptions at all? The <a href="http://stackoverflow.com/questions/6115896/java-checked-vs-unchecked-exception-explanation">debate</a> is over, isn&#39;t it? Not for me. While most object-oriented languages don&#39;t have them, and most programmers think checked exceptions are a Java mistake, I believe in the opposite---unchecked exceptions are the <strong>mistake</strong>. Moreover, I believe multiple exception types are a bad idea too.</p><figure class='jb_picture'><img itemprop='image' alt='True Romance (1993) by Tony Scott' src='/images/2015/07/true-romance.jpg' longdesc='#443dfa82'/><figcaption id='443dfa82'>True Romance (1993) by Tony Scott</figcaption></figure><p>Let me first explain how I understand exceptions in object-oriented programming. Then I&#39;ll compare my understanding with a &quot;traditional&quot; approach, and we&#39;ll discuss the differences. So, my understanding first.</p><p>Say there is a method that saves some binary data to a file:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">,</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span><span class="o">)</span>
  <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
  <span class="c1">// save data to the file</span>
<span class="o">}</span></code></pre></figure><p>When everything goes right, the method just saves the data and returns control. When something is wrong, it <a href="/2015/12/01/rethrow-exceptions.html">throws</a> <code>Exception</code> and we have to do something about it:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">try</span> <span class="o">{</span>
  <span class="n">save</span><span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="n">data</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Sorry, we can&#39;t save right now.&quot;</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>When a method says it <code>throws</code> an exception, I understand that the method is not <strong>safe</strong>. It may fail sometimes, and it&#39;s my responsibility to either 1) handle this failure or 2) declare myself as <strong>unsafe</strong> too.</p><p>I know each method is designed with a <a href="https://en.wikipedia.org/wiki/Single_responsibility_principle">single responsibility principle</a> in mind. This is a guarantee to me that if method <code>save()</code> fails, it means the entire saving operation can&#39;t be completed. If I need to know what the cause of this failure was, I will <a href="https://en.wikipedia.org/wiki/Exception_chaining">un-chain</a> the exception---traverse the stack of chained exceptions and stack traces encapsulated in <code>ex</code>.</p><p>I never use exceptions for flow control, which means I <strong>never recover</strong> situations where exceptions are thrown. When an exception occurs, I let it float up to the highest level of the application. Sometimes I <a href="/2015/12/01/rethrow-exceptions.html">rethrow</a> it in order to add more semantic information to the chain. That&#39;s why it doesn&#39;t matter to me what the cause of the exception thrown by <code>save()</code> was. I just know the method failed. That&#39;s enough for me. Always.</p><p>For the same reason, I don&#39;t need to differentiate between different exception types. I just don&#39;t need that type of hierarchy. <code>Exception</code> is enough for me. Again, that&#39;s because I don&#39;t use exceptions for flow control.</p><p>That&#39;s how I understand exceptions.</p><p>According to this paradigm, I would say we must:</p><ul> <li><p>always use checked exceptions.</p></li> <li><p>never throw/use unchecked exceptions.</p></li> <li><p>use only <code>Exception</code>, without any sub-types.</p></li> <li><p>always declare one exception type in the <code>throws</code> block.</p></li> <li><p>never catch without rethrowing; read <a href="/2015/07/09/catch-if-cant-otherwise.html">more about that here</a>.</p></li></ul><p>This paradigm diverges from many other articles I&#39;ve found on this subject. Let&#39;s compare and discuss.</p><h2 id="runtime-vs-api-exceptions">Runtime vs. API Exceptions</h2><p><a href="http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html">Oracle says</a> some exceptions should be part of API (checked ones) while some are runtime exceptions and should not be part of it (unchecked). They will be documented in JavaDoc but not in the method signature.</p><p>I don&#39;t understand the logic here, and I&#39;m sure Java designers don&#39;t understand it either. How and why are some exceptions important while others are not? Why do some of them deserve a proper API position in the <code>throws</code> block of the method signature while others don&#39;t? What is the criteria?</p><p>I have an answer here, though. By introducing checked and unchecked exceptions, Java developers tried to solve the problem of methods that are too complex and messy. When a method is too big and does too many things at the same time (violates the single responsibility principle), it&#39;s definitely better to let us keep some exceptions &quot;hidden&quot; (a.k.a. unchecked). But it&#39;s not a real solution. It is only a temporary patch that does all of us more harm than good---methods keep growing in size and complexity.</p><p>Unchecked exceptions are a mistake in Java design, not <a href="/2015/10/20/interrupted-exception.html">checked</a> ones.</p><p>Hiding the fact that a method may fail at some point is a mistake. That&#39;s exactly what unchecked exceptions do.</p><p>Instead, we should make this fact visible. When a method does too many things, there will be too many points of failure, and the author of the method will realize that something is wrong---a method should not throw exceptions in so many situations. This will lead to refactoring. The existence of unchecked exceptions leads to a mess. By the way, checked exceptions don&#39;t exist at all in Ruby, C#, Python, PHP, etc. This means that creators of these languages understand <a href="/2016/08/15/what-is-wrong-object-oriented-programming.html">OOP</a> even less than Java authors.</p><h2 id="checked-exceptions-are-too-noisy">Checked Exceptions Are Too Noisy</h2><p>Another common argument against checked exceptions is that they make our code more verbose. We have to put <code>try/catch</code> everywhere instead of staying focused on the main logic. Bozhidar Bozhanov even <a href="http://techblog.bozho.net/checked-and-unchecked-exceptions-in-java/">suggests</a> a technical solution for this verbosity problem.</p><p>Again, I don&#39;t understand this logic. If I want to do something when method <code>save()</code> fails, I catch the exception and handle the situation somehow. If I don&#39;t want to do that, I just say my method also <code>throws</code> and pay no attention to exception handling. What is the problem? Where is the verbosity coming from?</p><p>I have an answer here, too. It&#39;s coming from the existence of unchecked exceptions. We simply can&#39;t always ignore failure, because the interfaces we&#39;re using don&#39;t allow us to do this. That&#39;s all. For example, class <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html"><code>Runnable</code></a>, which is widely used for multi-thread programming, has method <code>run()</code> that is not supposed to throw anything. That&#39;s why we always have to catch everything inside the method and rethrow checked exceptions as unchecked.</p><p>If all methods in all Java <a href="/2016/04/26/why-inputstream-design-is-wrong.html">interfaces</a> would be declared either as &quot;safe&quot; (<code>throws</code> nothing) or &quot;unsafe&quot; (<code>throws Exception</code>), everything would become logical and clear. If you want to stay &quot;safe,&quot; take responsibility for failure handling. Otherwise, be &quot;unsafe&quot; and let your users worry about safety.</p><p>No noise, very clean code, and obvious logic.</p><h2 id="inappropriately-exposed-implementation-details">Inappropriately Exposed Implementation Details</h2><p><a href="http://www.ibm.com/developerworks/library/j-jtp05254/">Some say</a> the ability to put a checked exception into <code>throws</code> in the method signature instead of catching it here and rethrowing a new type encourages us to have too many irrelevant exception types in method signatures. For example, our method <code>save()</code> may declare that it may throw <code>OutOfMemoryException</code>, even though it seems to have nothing to do with memory allocation. But it does allocate some memory, right? So such a memory overflow may happen during a file saving operation.</p><p>Yet again, I don&#39;t get the logic of this argument. If all exceptions are checked, and we don&#39;t have multiple exception types, we just throw <code>Exception</code> everywhere, and that&#39;s it. Why do we need to care about the exception type in the first place? If we don&#39;t use exceptions to control flow, we won&#39;t do this.</p><p>If we really want to make our application memory overflow-resistant, we will introduce some memory manager, which will have something like the <code>bigEnough()</code> method, which will tell us whether our heap is big enough for the next operation. Using exceptions in such situations is a totally inappropriate approach to exception management in OOP.</p><h2 id="recoverable-exceptions">Recoverable Exceptions</h2><p>Joshua Bloch, in <a href="http://amzn.to/2crH5tW">Effective Java</a>, says to &quot;use checked exceptions for recoverable conditions and runtime exceptions for programming errors.&quot; He means something like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">try</span> <span class="o">{</span>
  <span class="n">save</span><span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="n">data</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// We can&#39;t save the file, but it&#39;s OK</span>
  <span class="c1">// Let&#39;s move on and do something else</span>
<span class="o">}</span></code></pre></figure><p>How is that any different from a famous anti-pattern called <a href="http://c2.com/cgi/wiki?DontUseExceptionsForFlowControl">Don&#39;t Use Exceptions for Flow Control</a>? Joshua, with all due respect, you&#39;re wrong. There are no such things as recoverable conditions in OOP. An exception indicates that the execution of a chain of calls from method to method is broken, and it&#39;s time to go up through the chain and stop somewhere. But we never go back again after the exception:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>App#run()
  Data#update()
    Data#write()
      File#save() &lt;-- Boom, there&#39;s a failure here, so we go up</code></pre></figure><p>We can start this chain again, but we don&#39;t go back after <code>throw</code>. In other words, we don&#39;t <strong>do</strong> anything in the <code>catch</code> block. We only report the problem and wrap up execution. We never &quot;recover!&quot;</p><hr/><p>All arguments against checked exceptions demonstrate nothing but a serious misunderstanding of object-oriented programming by their authors. The mistake in Java and in many other languages is the existence of unchecked exceptions, not checked ones.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/07/28/checked-vs-unchecked-exceptions.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/07/28/checked-vs-unchecked-exceptions.html&amp;text=Checked+vs.+Unchecked+Exceptions%3A+The+Debate+Is+Not+Over" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/07/28/checked-vs-unchecked-exceptions.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/07/28/checked-vs-unchecked-exceptions.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/07/28/checked-vs-unchecked-exceptions.html%3F2015-30&amp;title=Checked+vs.+Unchecked+Exceptions%3A+The+Debate+Is+Not+Over" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/07/28/checked-vs-unchecked-exceptions.html%3F2015-30&amp;t=Checked+vs.+Unchecked+Exceptions%3A+The+Debate+Is+Not+Over" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>Do we need checked exceptions at all? The <a href="http://stackoverflow.com/questions/6115896/java-checked-vs-unchecked-exception-explanation">debate</a> is over, isn&#39;t it? Not for me. While most object-oriented languages don&#39;t have them, and most programmers think checked exceptions are a Java mistake, I believe in the opposite---unchecked exceptions are the <strong>mistake</strong>. Moreover, I believe multiple exception types are a bad idea too.</p><figure class='jb_picture'><img itemprop='image' alt='True Romance (1993) by Tony Scott' src='/images/2015/07/true-romance.jpg' longdesc='#443dfa82'/><figcaption id='443dfa82'>True Romance (1993) by Tony Scott</figcaption></figure><p>Let me first explain how I understand exceptions in object-oriented programming. Then I&#39;ll compare my understanding with a &quot;traditional&quot; approach, and we&#39;ll discuss the differences. So, my understanding first.</p><p>Say there is a method that saves some binary data to a file:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">,</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span><span class="o">)</span>
  <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
  <span class="c1">// save data to the file</span>
<span class="o">}</span></code></pre></figure><p>When everything goes right, the method just saves the data and returns control. When something is wrong, it <a href="/2015/12/01/rethrow-exceptions.html">throws</a> <code>Exception</code> and we have to do something about it:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">try</span> <span class="o">{</span>
  <span class="n">save</span><span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="n">data</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Sorry, we can&#39;t save right now.&quot;</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>When a method says it <code>throws</code> an exception, I understand that the method is not <strong>safe</strong>. It may fail sometimes, and it&#39;s my responsibility to either 1) handle this failure or 2) declare myself as <strong>unsafe</strong> too.</p><p>I know each method is designed with a <a href="https://en.wikipedia.org/wiki/Single_responsibility_principle">single responsibility principle</a> in mind. This is a guarantee to me that if method <code>save()</code> fails, it means the entire saving operation can&#39;t be completed. If I need to know what the cause of this failure was, I will <a href="https://en.wikipedia.org/wiki/Exception_chaining">un-chain</a> the exception---traverse the stack of chained exceptions and stack traces encapsulated in <code>ex</code>.</p><p>I never use exceptions for flow control, which means I <strong>never recover</strong> situations where exceptions are thrown. When an exception occurs, I let it float up to the highest level of the application. Sometimes I <a href="/2015/12/01/rethrow-exceptions.html">rethrow</a> it in order to add more semantic information to the chain. That&#39;s why it doesn&#39;t matter to me what the cause of the exception thrown by <code>save()</code> was. I just know the method failed. That&#39;s enough for me. Always.</p><p>For the same reason, I don&#39;t need to differentiate between different exception types. I just don&#39;t need that type of hierarchy. <code>Exception</code> is enough for me. Again, that&#39;s because I don&#39;t use exceptions for flow control.</p><p>That&#39;s how I understand exceptions.</p><p>According to this paradigm, I would say we must:</p><ul> <li><p>always use checked exceptions.</p></li> <li><p>never throw/use unchecked exceptions.</p></li> <li><p>use only <code>Exception</code>, without any sub-types.</p></li> <li><p>always declare one exception type in the <code>throws</code> block.</p></li> <li><p>never catch without rethrowing; read <a href="/2015/07/09/catch-if-cant-otherwise.html">more about that here</a>.</p></li></ul><p>This paradigm diverges from many other articles I&#39;ve found on this subject. Let&#39;s compare and discuss.</p><h2 id="runtime-vs-api-exceptions">Runtime vs. API Exceptions</h2><p><a href="http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html">Oracle says</a> some exceptions should be part of API (checked ones) while some are runtime exceptions and should not be part of it (unchecked). They will be documented in JavaDoc but not in the method signature.</p><p>I don&#39;t understand the logic here, and I&#39;m sure Java designers don&#39;t understand it either. How and why are some exceptions important while others are not? Why do some of them deserve a proper API position in the <code>throws</code> block of the method signature while others don&#39;t? What is the criteria?</p><p>I have an answer here, though. By introducing checked and unchecked exceptions, Java developers tried to solve the problem of methods that are too complex and messy. When a method is too big and does too many things at the same time (violates the single responsibility principle), it&#39;s definitely better to let us keep some exceptions &quot;hidden&quot; (a.k.a. unchecked). But it&#39;s not a real solution. It is only a temporary patch that does all of us more harm than good---methods keep growing in size and complexity.</p><p>Unchecked exceptions are a mistake in Java design, not <a href="/2015/10/20/interrupted-exception.html">checked</a> ones.</p><p>Hiding the fact that a method may fail at some point is a mistake. That&#39;s exactly what unchecked exceptions do.</p><p>Instead, we should make this fact visible. When a method does too many things, there will be too many points of failure, and the author of the method will realize that something is wrong---a method should not throw exceptions in so many situations. This will lead to refactoring. The existence of unchecked exceptions leads to a mess. By the way, checked exceptions don&#39;t exist at all in Ruby, C#, Python, PHP, etc. This means that creators of these languages understand <a href="/2016/08/15/what-is-wrong-object-oriented-programming.html">OOP</a> even less than Java authors.</p><h2 id="checked-exceptions-are-too-noisy">Checked Exceptions Are Too Noisy</h2><p>Another common argument against checked exceptions is that they make our code more verbose. We have to put <code>try/catch</code> everywhere instead of staying focused on the main logic. Bozhidar Bozhanov even <a href="http://techblog.bozho.net/checked-and-unchecked-exceptions-in-java/">suggests</a> a technical solution for this verbosity problem.</p><p>Again, I don&#39;t understand this logic. If I want to do something when method <code>save()</code> fails, I catch the exception and handle the situation somehow. If I don&#39;t want to do that, I just say my method also <code>throws</code> and pay no attention to exception handling. What is the problem? Where is the verbosity coming from?</p><p>I have an answer here, too. It&#39;s coming from the existence of unchecked exceptions. We simply can&#39;t always ignore failure, because the interfaces we&#39;re using don&#39;t allow us to do this. That&#39;s all. For example, class <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html"><code>Runnable</code></a>, which is widely used for multi-thread programming, has method <code>run()</code> that is not supposed to throw anything. That&#39;s why we always have to catch everything inside the method and rethrow checked exceptions as unchecked.</p><p>If all methods in all Java <a href="/2016/04/26/why-inputstream-design-is-wrong.html">interfaces</a> would be declared either as &quot;safe&quot; (<code>throws</code> nothing) or &quot;unsafe&quot; (<code>throws Exception</code>), everything would become logical and clear. If you want to stay &quot;safe,&quot; take responsibility for failure handling. Otherwise, be &quot;unsafe&quot; and let your users worry about safety.</p><p>No noise, very clean code, and obvious logic.</p><h2 id="inappropriately-exposed-implementation-details">Inappropriately Exposed Implementation Details</h2><p><a href="http://www.ibm.com/developerworks/library/j-jtp05254/">Some say</a> the ability to put a checked exception into <code>throws</code> in the method signature instead of catching it here and rethrowing a new type encourages us to have too many irrelevant exception types in method signatures. For example, our method <code>save()</code> may declare that it may throw <code>OutOfMemoryException</code>, even though it seems to have nothing to do with memory allocation. But it does allocate some memory, right? So such a memory overflow may happen during a file saving operation.</p><p>Yet again, I don&#39;t get the logic of this argument. If all exceptions are checked, and we don&#39;t have multiple exception types, we just throw <code>Exception</code> everywhere, and that&#39;s it. Why do we need to care about the exception type in the first place? If we don&#39;t use exceptions to control flow, we won&#39;t do this.</p><p>If we really want to make our application memory overflow-resistant, we will introduce some memory manager, which will have something like the <code>bigEnough()</code> method, which will tell us whether our heap is big enough for the next operation. Using exceptions in such situations is a totally inappropriate approach to exception management in OOP.</p><h2 id="recoverable-exceptions">Recoverable Exceptions</h2><p>Joshua Bloch, in <a href="http://amzn.to/2crH5tW">Effective Java</a>, says to &quot;use checked exceptions for recoverable conditions and runtime exceptions for programming errors.&quot; He means something like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">try</span> <span class="o">{</span>
  <span class="n">save</span><span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="n">data</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// We can&#39;t save the file, but it&#39;s OK</span>
  <span class="c1">// Let&#39;s move on and do something else</span>
<span class="o">}</span></code></pre></figure><p>How is that any different from a famous anti-pattern called <a href="http://c2.com/cgi/wiki?DontUseExceptionsForFlowControl">Don&#39;t Use Exceptions for Flow Control</a>? Joshua, with all due respect, you&#39;re wrong. There are no such things as recoverable conditions in OOP. An exception indicates that the execution of a chain of calls from method to method is broken, and it&#39;s time to go up through the chain and stop somewhere. But we never go back again after the exception:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>App#run()
  Data#update()
    Data#write()
      File#save() &lt;-- Boom, there&#39;s a failure here, so we go up</code></pre></figure><p>We can start this chain again, but we don&#39;t go back after <code>throw</code>. In other words, we don&#39;t <strong>do</strong> anything in the <code>catch</code> block. We only report the problem and wrap up execution. We never &quot;recover!&quot;</p><hr/><p>All arguments against checked exceptions demonstrate nothing but a serious misunderstanding of object-oriented programming by their authors. The mistake in Java and in many other languages is the existence of unchecked exceptions, not checked ones.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="A unit test is a tool, not a product; the absence of unit testing can&apos;t be excused due to a lack of time or budget. " /> <meta name="keywords" content="unit testing, unit testing best practices, unit testing cost benefit analysis, unit testing definition, unit testing tools" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-07-16 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Fools Don't Write Unit Tests"/> <meta name="twitter:description" property="og:description" content="A unit test is a tool, not a product; the absence of unit testing can&apos;t be excused due to a lack of time or budget. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/07/16/fools-dont-write-unit-tests.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/07/16/fools-dont-write-unit-tests.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/07/16/fools-dont-write-unit-tests.amp.html" /> <title>Fools Don&#39;t Write Unit Tests </title> <meta name='og:image' content='https://www.yegor256.com/images/2015/07/ex-machina.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2015/07/ex-machina.jpg'/><meta name='og:image:width' content='1201'/> <meta name='twitter:image:width' content='1201'/><meta name='og:image:height' content='799'/> <meta name='twitter:image:height' content='799'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Ex Machina (2015) by Alex Garland'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/07/16/fools-dont-write-unit-tests.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/07/16/fools-dont-write-unit-tests.html">https://www.yegor256.com/2015/07/16/fools-dont-write-unit-tests.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Fools Don&#39;t Write Unit Tests</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-07-16T00:00:00+00:00"> 16 July 2015 </time> </li> <li class="desktop-only" itemprop="locationCreated">Palo Alto, CA</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/07/16/fools-dont-write-unit-tests.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>&quot;We don&#39;t have time to write unit tests&quot; or &quot;We don&#39;t have the budget for unit testing&quot; are complaints I hear very often. Sometimes it may sound like, &quot;We don&#39;t use <a href="/2017/03/24/tdd-that-works.html">TDD</a>, so that&#39;s why there are no unit tests,&quot; or even &quot;TDD is too expensive for us now.&quot; I&#39;m sure you&#39;ve heard this or even said it yourself. It doesn&#39;t make any sense to me. I don&#39;t get the logic. In my understanding, unit testing is not a product; it&#39;s a <em>tool</em>. You use tests to develop a product faster and better. How can you say you don&#39;t have time to use the tool that makes your work faster? Let me show you how.</p><figure class='jb_picture'><img itemprop='image' alt='Ex Machina (2015) by Alex Garland' src='/images/2015/07/ex-machina.jpg' longdesc='#2b57602a'/><figcaption id='2b57602a'>Ex Machina (2015) by Alex Garland</figcaption></figure><p><a href="/2017/03/24/tdd-that-works.html">TDD or not</a>, a unit test is a unit test. Either you create it before the main piece of code or after it.</p><p>A unit test is a <em>tool</em> that helps you, a developer of software, &quot;run&quot; your stuff and see how it works. How else can you check if it works? When I hear, &quot;I don&#39;t have time for unit tests,&quot; my next question is: &quot;How did you test your code?&quot;</p><p>I seriously can&#39;t understand how it is possible to write something and then not test it. Well, unless you&#39;re <a href="/2015/07/21/hourly-pay-modern-slavery.html">paid monthly</a> and nobody really cares about your deliverables. If you do care about the software you produce, you&#39;re interested in seeing it in action, right?</p><p>So, how do you do this?</p><p>If it&#39;s a one-page PHP website, you can probably run it locally on Apache, modify it on disk, and then <code>Cmd</code>+<code>R</code> many times. That will work for a primitive piece of code and only for you, a single developer of it. But I hear this &quot;I don&#39;t have time&quot; argument from programmers working on <em>enterprise</em> systems. How do you guys test your code?</p><aside class='quote'>Not because you didn&#39;t have time, you just didn&#39;t know how</aside><p>I would compare unit tests with OOP classes. You can design the entire application in a single class with a few thousand methods. You will save time on creating other classes, structuring them, thinking about connections between them, etc. It will be a single 20,000-line <code>.java</code> file. And you&#39;ll say that &quot;you didn&#39;t have time to create classes,&quot; right? What would we say about such a product and the author of it? Right, we&#39;d say he or she is just <em>stupid</em>. And it has nothing to do with time or budget. Such a programmer just doesn&#39;t know how to use object-oriented programming tools, like <a href="/2016/11/21/naked-data.html">encapsulation</a>, <a href="/2016/09/13/inheritance-is-procedural.html">inheritance</a>, polymorphism, interfaces, method overloading, etc. It&#39;s not about time or budget; it&#39;s about skills and discipline.</p><p>The same is true for unit tests. If you create code without unit tests, it may work, just like that monster class with 20,000 lines, but the quality of your product will be very low. And not because you didn&#39;t have time to write unit tests, but because you <em>didn&#39;t know</em> how to do it.</p><p>So every time I hear, &quot;I didn&#39;t have time for unit testing,&quot; I understand that you just didn&#39;t know how and are trying to conceal that fact behind false excuses. It&#39;s not professional, to say the least.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/07/16/fools-dont-write-unit-tests.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/07/16/fools-dont-write-unit-tests.html&amp;text=Fools+Don%27t+Write+Unit+Tests" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/07/16/fools-dont-write-unit-tests.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/07/16/fools-dont-write-unit-tests.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/07/16/fools-dont-write-unit-tests.html%3F2015-28&amp;title=Fools+Don%27t+Write+Unit+Tests" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/07/16/fools-dont-write-unit-tests.html%3F2015-28&amp;t=Fools+Don%27t+Write+Unit+Tests" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>&quot;We don&#39;t have time to write unit tests&quot; or &quot;We don&#39;t have the budget for unit testing&quot; are complaints I hear very often. Sometimes it may sound like, &quot;We don&#39;t use <a href="/2017/03/24/tdd-that-works.html">TDD</a>, so that&#39;s why there are no unit tests,&quot; or even &quot;TDD is too expensive for us now.&quot; I&#39;m sure you&#39;ve heard this or even said it yourself. It doesn&#39;t make any sense to me. I don&#39;t get the logic. In my understanding, unit testing is not a product; it&#39;s a <em>tool</em>. You use tests to develop a product faster and better. How can you say you don&#39;t have time to use the tool that makes your work faster? Let me show you how.</p><figure class='jb_picture'><img itemprop='image' alt='Ex Machina (2015) by Alex Garland' src='/images/2015/07/ex-machina.jpg' longdesc='#2b57602a'/><figcaption id='2b57602a'>Ex Machina (2015) by Alex Garland</figcaption></figure><p><a href="/2017/03/24/tdd-that-works.html">TDD or not</a>, a unit test is a unit test. Either you create it before the main piece of code or after it.</p><p>A unit test is a <em>tool</em> that helps you, a developer of software, &quot;run&quot; your stuff and see how it works. How else can you check if it works? When I hear, &quot;I don&#39;t have time for unit tests,&quot; my next question is: &quot;How did you test your code?&quot;</p><p>I seriously can&#39;t understand how it is possible to write something and then not test it. Well, unless you&#39;re <a href="/2015/07/21/hourly-pay-modern-slavery.html">paid monthly</a> and nobody really cares about your deliverables. If you do care about the software you produce, you&#39;re interested in seeing it in action, right?</p><p>So, how do you do this?</p><p>If it&#39;s a one-page PHP website, you can probably run it locally on Apache, modify it on disk, and then <code>Cmd</code>+<code>R</code> many times. That will work for a primitive piece of code and only for you, a single developer of it. But I hear this &quot;I don&#39;t have time&quot; argument from programmers working on <em>enterprise</em> systems. How do you guys test your code?</p><aside class='quote'>Not because you didn&#39;t have time, you just didn&#39;t know how</aside><p>I would compare unit tests with OOP classes. You can design the entire application in a single class with a few thousand methods. You will save time on creating other classes, structuring them, thinking about connections between them, etc. It will be a single 20,000-line <code>.java</code> file. And you&#39;ll say that &quot;you didn&#39;t have time to create classes,&quot; right? What would we say about such a product and the author of it? Right, we&#39;d say he or she is just <em>stupid</em>. And it has nothing to do with time or budget. Such a programmer just doesn&#39;t know how to use object-oriented programming tools, like <a href="/2016/11/21/naked-data.html">encapsulation</a>, <a href="/2016/09/13/inheritance-is-procedural.html">inheritance</a>, polymorphism, interfaces, method overloading, etc. It&#39;s not about time or budget; it&#39;s about skills and discipline.</p><p>The same is true for unit tests. If you create code without unit tests, it may work, just like that monster class with 20,000 lines, but the quality of your product will be very low. And not because you didn&#39;t have time to write unit tests, but because you <em>didn&#39;t know</em> how to do it.</p><p>So every time I hear, &quot;I didn&#39;t have time for unit testing,&quot; I understand that you just didn&#39;t know how and are trying to conceal that fact behind false excuses. It&#39;s not professional, to say the least.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="A bug fix is supposed to improve the quality of the software, but very often the effect of it is actually negative; here is why and how to avoid that. " /> <meta name="keywords" content="bug code review, bug fix, pull request code review, pull request rules, review pull request" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-06-22 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="A Few Valid Reasons to Reject a Bug Fix"/> <meta name="twitter:description" property="og:description" content="A bug fix is supposed to improve the quality of the software, but very often the effect of it is actually negative; here is why and how to avoid that. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.amp.html" /> <title>A Few Valid Reasons to Reject a Bug Fix </title> <meta name='og:image' content='https://www.yegor256.com/images/2015/06/crimen-ferpecto.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2015/06/crimen-ferpecto.jpg'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='616'/> <meta name='twitter:image:height' content='616'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='El Crimen Perfecto (2004) by Álex de la Iglesia'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html">https://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">A Few Valid Reasons to Reject a Bug Fix</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-06-22T00:00:00+00:00"> 22 June 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>A bug exists when something doesn&#39;t work as expected. A <em>bug fix</em> is basically a patch (a pull request) to the existing code base that is supposed to solve the problem and make sure that &quot;something&quot; works as expected. Very often, such a patch fixes one thing and breaks many others. I believe that sometimes it&#39;s necessary to <em>reject</em> a bug fix and ask its author to re-do the patch in order to protect the project from bigger problems. There are a few valid reasons for such a rejection, according to my experience.</p><figure class='jb_picture'><img itemprop='image' alt='El Crimen Perfecto (2004) by Álex de la Iglesia' src='/images/2015/06/crimen-ferpecto.jpg' longdesc='#3827b7b3'/><figcaption id='3827b7b3'>El Crimen Perfecto (2004) by Álex de la Iglesia</figcaption></figure><h2 id="it-degrades-code-coverage">It Degrades Code Coverage</h2><p>This is a very common situation: After the changes are made in one place, unit tests fail in some other place. The bug is fixed, but some possibly unrelated unit tests start to report failure. Under pressure or simply because we&#39;re lazy, we don&#39;t fix them; we simply remove the tests or mark them as temporarily &quot;skipped.&quot; The problem is solved, the build is clean, so let&#39;s merge the patch and call it a day, right? Wrong!</p><p>Even though I&#39;m in favor of <a href="/2015/01/15/how-to-cut-corners.html">cutting corners</a> as much as possible, this is the corner I don&#39;t recommend you cut.</p><p>The unit tests are there precisely to prevent us from breaking the product when under pressure.</p><p>Obviously, there are situations when the unit tests are wrong and we have to delete them. In those cases, don&#39;t forget to create new ones.</p><figure class='badge'><a href='http://amzn.to/1SdcZ8M'><img src='https://www.yegor256.com/images/2015/04/book-legacy.jpg' style='width:96px;max-width:100%;' alt='badge'/></a></figure><p>There are also situations when the bug must be fixed in a few minutes to put the system back online and fixing all unit tests will take an hour. Such a situation is a strong indicator that you&#39;ve got a terrible underlying situation with test coverage in the product. There&#39;s no doubt that we have to make a fix and ask our tests to shut up for some time. But in this case, make sure the next task your team is working on after the bug fix is released is correcting those disabled unit tests. I would recommend reading <a href="http://amzn.to/1SdcZ8M">Working Effectively With Legacy Code</a> by Michael Feathers, which tackles this very subject.</p><h2 id="it-doesnt-reproduce-the-issue">It Doesn&#39;t Reproduce the Issue</h2><p>Sometimes the entire system may be down simply because of a small typo in one line of code. An obvious bug fix is to remove the typo, but that&#39;s not what a good project is expecting from us if we care about its quality. The problem is not the typo but rather the absence of unit tests that would catch the typo at the deployment phase.</p><aside class='quote'>The problem is not the typo but rather the absence of unit tests that would catch the typo at the deployment phase</aside><p>The real problem is the lack of test code coverage in this particular section of the code. By removing the typo, we&#39;re not helping the project in any way. Moreover, we&#39;re doing it a disservice---we&#39;re <em>concealing</em> the real problem.</p><p>Thus, no matter how small or cosmetic the issue is, its bug fix must contain an extra test that first reproduces the bug. Without such a test, a bug fix is a waste of the project&#39;s money.</p><p>Furthermore, without a unit test reproducing the issue, there is no guarantee that our bug fix doesn&#39;t introduce more bugs. I would even say that the more bug fixes we have, the higher the &lt;a href=&quot;<a href="http://en.wikipedia.org/wiki/Entropy">http://en.wikipedia.org/wiki/Entropy</a></em>%28information_theory%29&quot;&gt;entropy</a>. And the only way to decrease this uncertainty is by covering the code with unit tests. Without a test, a bug fix brings more disorder to the code base.</p><h2 id="it-is-too-big">It Is Too Big</h2><p>Bug fixes are <em>not features</em>; they must be small and focused. It&#39;s a very typical mistake for programmers to get carried away while fixing a bug and introduce some refactoring together with a fix. The result is that the patch gets rather big and difficult to understand. I&#39;m not against refactoring; it&#39;s a very important and positive thing for a project, but do it separately <em>after</em> the bug is fixed and merged.</p><p>No refactoring while fixing a bug!</p><p>Create a new unit test, reproduce the bug, and commit it. Fix the bug in the existing code base, no matter how ugly it is. Create new bugs, asking the team to improve the situation with the ugly code base. If interested, assign those bugs to yourself. Or maybe somebody else will be interested in fixing them and refactoring the code. But all that will happen later in other pull requests with new <a href="/2015/02/09/serious-code-reviewer.html">code reviews</a> and new merges.</p><p>It&#39;s not about being <a href="/2018/04/17/how-to-be-lazy.html">lazy</a> and unwilling to fix what looks bad. It&#39;s about a discipline, which is <a href="/2015/01/15/how-to-cut-corners.html">much more important</a> than good intentions.</p><h2 id="it-solves-more-than-one-issue">It Solves More Than One Issue</h2><p>Always fix one issue at a time---simple as that. No exceptions. When a bug fix patch contains code changes that fix multiple issues, it is very difficult to understand which issue is tested, which one is reproduced, and how they relate to each other. Combining several bug fixes into a single pull request is a very bad practice.</p><p>No matter how simple the fix is, keep it separate from others. Review, test, and merge it individually. This will also increase the traceability of changes. It will always be easy to understand who made that fix, who reviewed the code, and when it was merged (and deployed).</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html&amp;text=A+Few+Valid+Reasons+to+Reject+a+Bug+Fix" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html%3F2015-25&amp;title=A+Few+Valid+Reasons+to+Reject+a+Bug+Fix" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/06/22/valid-reasons-to-reject-bug-fix.html%3F2015-25&amp;t=A+Few+Valid+Reasons+to+Reject+a+Bug+Fix" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>A bug exists when something doesn&#39;t work as expected. A <em>bug fix</em> is basically a patch (a pull request) to the existing code base that is supposed to solve the problem and make sure that &quot;something&quot; works as expected. Very often, such a patch fixes one thing and breaks many others. I believe that sometimes it&#39;s necessary to <em>reject</em> a bug fix and ask its author to re-do the patch in order to protect the project from bigger problems. There are a few valid reasons for such a rejection, according to my experience.</p><figure class='jb_picture'><img itemprop='image' alt='El Crimen Perfecto (2004) by Álex de la Iglesia' src='/images/2015/06/crimen-ferpecto.jpg' longdesc='#3827b7b3'/><figcaption id='3827b7b3'>El Crimen Perfecto (2004) by Álex de la Iglesia</figcaption></figure><h2 id="it-degrades-code-coverage">It Degrades Code Coverage</h2><p>This is a very common situation: After the changes are made in one place, unit tests fail in some other place. The bug is fixed, but some possibly unrelated unit tests start to report failure. Under pressure or simply because we&#39;re lazy, we don&#39;t fix them; we simply remove the tests or mark them as temporarily &quot;skipped.&quot; The problem is solved, the build is clean, so let&#39;s merge the patch and call it a day, right? Wrong!</p><p>Even though I&#39;m in favor of <a href="/2015/01/15/how-to-cut-corners.html">cutting corners</a> as much as possible, this is the corner I don&#39;t recommend you cut.</p><p>The unit tests are there precisely to prevent us from breaking the product when under pressure.</p><p>Obviously, there are situations when the unit tests are wrong and we have to delete them. In those cases, don&#39;t forget to create new ones.</p><figure class='badge'><a href='http://amzn.to/1SdcZ8M'><img src='https://www.yegor256.com/images/2015/04/book-legacy.jpg' style='width:96px;max-width:100%;' alt='badge'/></a></figure><p>There are also situations when the bug must be fixed in a few minutes to put the system back online and fixing all unit tests will take an hour. Such a situation is a strong indicator that you&#39;ve got a terrible underlying situation with test coverage in the product. There&#39;s no doubt that we have to make a fix and ask our tests to shut up for some time. But in this case, make sure the next task your team is working on after the bug fix is released is correcting those disabled unit tests. I would recommend reading <a href="http://amzn.to/1SdcZ8M">Working Effectively With Legacy Code</a> by Michael Feathers, which tackles this very subject.</p><h2 id="it-doesnt-reproduce-the-issue">It Doesn&#39;t Reproduce the Issue</h2><p>Sometimes the entire system may be down simply because of a small typo in one line of code. An obvious bug fix is to remove the typo, but that&#39;s not what a good project is expecting from us if we care about its quality. The problem is not the typo but rather the absence of unit tests that would catch the typo at the deployment phase.</p><aside class='quote'>The problem is not the typo but rather the absence of unit tests that would catch the typo at the deployment phase</aside><p>The real problem is the lack of test code coverage in this particular section of the code. By removing the typo, we&#39;re not helping the project in any way. Moreover, we&#39;re doing it a disservice---we&#39;re <em>concealing</em> the real problem.</p><p>Thus, no matter how small or cosmetic the issue is, its bug fix must contain an extra test that first reproduces the bug. Without such a test, a bug fix is a waste of the project&#39;s money.</p><p>Furthermore, without a unit test reproducing the issue, there is no guarantee that our bug fix doesn&#39;t introduce more bugs. I would even say that the more bug fixes we have, the higher the <a href="http://en.wikipedia.org/wiki/Entropy_%28information_theory%29">entropy</a>. And the only way to decrease this uncertainty is by covering the code with unit tests. Without a test, a bug fix brings more disorder to the code base.</p><h2 id="it-is-too-big">It Is Too Big</h2><p>Bug fixes are <em>not features</em>; they must be small and focused. It&#39;s a very typical mistake for programmers to get carried away while fixing a bug and introduce some refactoring together with a fix. The result is that the patch gets rather big and difficult to understand. I&#39;m not against refactoring; it&#39;s a very important and positive thing for a project, but do it separately <em>after</em> the bug is fixed and merged.</p><p>No refactoring while fixing a bug!</p><p>Create a new unit test, reproduce the bug, and commit it. Fix the bug in the existing code base, no matter how ugly it is. Create new bugs, asking the team to improve the situation with the ugly code base. If interested, assign those bugs to yourself. Or maybe somebody else will be interested in fixing them and refactoring the code. But all that will happen later in other pull requests with new <a href="/2015/02/09/serious-code-reviewer.html">code reviews</a> and new merges.</p><p>It&#39;s not about being <a href="/2018/04/17/how-to-be-lazy.html">lazy</a> and unwilling to fix what looks bad. It&#39;s about a discipline, which is <a href="/2015/01/15/how-to-cut-corners.html">much more important</a> than good intentions.</p><h2 id="it-solves-more-than-one-issue">It Solves More Than One Issue</h2><p>Always fix one issue at a time---simple as that. No exceptions. When a bug fix patch contains code changes that fix multiple issues, it is very difficult to understand which issue is tested, which one is reproduced, and how they relate to each other. Combining several bug fixes into a single pull request is a very bad practice.</p><p>No matter how simple the fix is, keep it separate from others. Review, test, and merge it individually. This will also increase the traceability of changes. It will always be easy to understand who made that fix, who reviewed the code, and when it was merged (and deployed).</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="It&apos;s a very common misconception that good programmers write code that&apos;s always bug-free. However, I think I agree with it. " /> <meta name="keywords" content="bad programmers, bug-free programmers, good programmers, zero-bug, zero-bug programmers" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-06-18 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Good Programmers Write Bug-Free Code, Don't They?"/> <meta name="twitter:description" property="og:description" content="It&apos;s a very common misconception that good programmers write code that&apos;s always bug-free. However, I think I agree with it. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/06/18/good-programmers-bug-free.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/06/18/good-programmers-bug-free.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/06/18/good-programmers-bug-free.amp.html" /> <title>Good Programmers Write Bug-Free Code, Don&#39;t They? </title> <meta name='og:image' content='https://www.yegor256.com/images/2015/06/sabotage.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2015/06/sabotage.jpg'/><meta name='og:image:width' content='640'/> <meta name='twitter:image:width' content='640'/><meta name='og:image:height' content='336'/> <meta name='twitter:image:height' content='336'/><meta name='twitter:card' content='summary'/><meta name='twitter:image:alt' content='Sabotage! (2000) by Esteban and Jose Miguel Ibarretxe'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/06/18/good-programmers-bug-free.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/06/18/good-programmers-bug-free.html">https://www.yegor256.com/2015/06/18/good-programmers-bug-free.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Good Programmers Write Bug-Free Code, Don&#39;t They?</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-06-18T00:00:00+00:00"> 18 June 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/06/18/good-programmers-bug-free.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><ul class="subline"> <li>Discussed at:</li> <li><a href="https://www.reddit.com/r/programming/comments/3aftim/good_programmers_write_bugfree_code_dont_they/">reddit</a></li></ul><p class="unprintable"><p>Good programmers create fewer <a href="/2015/06/11/wikipedia-bug-definition.html">bugs</a> while bad programmers cause more. Sounds logical, doesn&#39;t it? However, there is a lot of criticism of this way of thinking. Take this one, for example: Bugs are inevitable, and instead of expecting fewer bugs from us, let us focus on the right design and let testers find and report bugs; then we&#39;ll fix them. Or this one: Being afraid to make a mistake makes me write slower and experiment less, which translates into lower-quality software. Read more about that <a href="http://programmers.stackexchange.com/questions/41248">here</a> and <a href="http://www.joelonsoftware.com/articles/fog0000000067.html">here</a>. But allow me to look at this from a different perspective and assert that yes, indeed, good programmers create <em>fewer</em> bugs.</p><figure class='jb_picture'><img itemprop='image' alt='Sabotage! (2000) by Esteban and Jose Miguel Ibarretxe' src='/images/2015/06/sabotage.jpg' longdesc='#8a4f6549'/><figcaption id='8a4f6549'>Sabotage! (2000) by Esteban and Jose Miguel Ibarretxe</figcaption></figure><p>I think this is all about how we define <em>quality</em> and what a <em>bug</em> is.</p><p>If we look at a traditional and very &quot;intuitive&quot; definition of a bug, it is something that causes our software to produce an incorrect or unexpected result. However, if we think more about how the software is actually used and by whom, we&#39;ll see that there are many other types of bugs, including scalability, reliability, and even maintainability ones.</p><p>If we put all those &quot;-ilities&quot; in a list and prioritize them by their severity and importance to the business, we&#39;ll see that functionality-related bugs are rather far from the top. I would actually put <a href="/2014/10/26/hacker-vs-programmer-mentality.html">maintainability</a> at the top.</p><p>My point is that mistakes are not all equal. If I&#39;m writing a PDF report generated by a piece of Java code and my report misses the footer, that&#39;s one type of bug, and its fix will cost the business X dollars. On the other hand, if my PDF generation code is so difficult to modify that in order to change its format from <a href="http://en.wikipedia.org/wiki/Paper_size">A4</a> to <a href="http://en.wikipedia.org/wiki/Letter_%28paper_size%29">US Letter</a> we have to rewrite it from scratch, that&#39;s a completely different type of bug. Needless to say, its fixing will be many times more expensive.</p><aside class='quote'>Good programmers make cheaper mistakes in order to avoid making more expensive ones.</aside><p>So yes, mistakes are inevitable. We should not be afraid of them and be ready to make them. However, good programmers make <em>cheaper</em> mistakes in order to avoid making more expensive ones.</p><p>Good programmers understand that in the limited amount of time we usually have to implement the software, we have to sacrifice functionality in order to gain maintainability. Ideally, you want to achieve both, but in reality, it&#39;s next to impossible.</p><p>We all work under pressure, and we have time and money constraints. Within these constraints, good programmers prefer to make functionality buggy and incomplete while keeping the design clean and easy to maintain. There are exceptions, of course, where the business prioritizes functionality above everything else, but such situations happen very rarely (if the business is smart).</p><p>To summarize, I think that a good programmer makes more functional bugs than a bad programmer, though the bugs made by a bad programmer are more expensive than bugs made by a good programmer.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/06/18/good-programmers-bug-free.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/06/18/good-programmers-bug-free.html&amp;text=Good+Programmers+Write+Bug-Free+Code%2C+Don%27t+They%3F" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/06/18/good-programmers-bug-free.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/06/18/good-programmers-bug-free.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/06/18/good-programmers-bug-free.html%3F2015-24&amp;title=Good+Programmers+Write+Bug-Free+Code%2C+Don%27t+They%3F" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/06/18/good-programmers-bug-free.html%3F2015-24&amp;t=Good+Programmers+Write+Bug-Free+Code%2C+Don%27t+They%3F" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>Good programmers create fewer <a href="/2015/06/11/wikipedia-bug-definition.html">bugs</a> while bad programmers cause more. Sounds logical, doesn&#39;t it? However, there is a lot of criticism of this way of thinking. Take this one, for example: Bugs are inevitable, and instead of expecting fewer bugs from us, let us focus on the right design and let testers find and report bugs; then we&#39;ll fix them. Or this one: Being afraid to make a mistake makes me write slower and experiment less, which translates into lower-quality software. Read more about that <a href="http://programmers.stackexchange.com/questions/41248">here</a> and <a href="http://www.joelonsoftware.com/articles/fog0000000067.html">here</a>. But allow me to look at this from a different perspective and assert that yes, indeed, good programmers create <em>fewer</em> bugs.</p><figure class='jb_picture'><img itemprop='image' alt='Sabotage! (2000) by Esteban and Jose Miguel Ibarretxe' src='/images/2015/06/sabotage.jpg' longdesc='#8a4f6549'/><figcaption id='8a4f6549'>Sabotage! (2000) by Esteban and Jose Miguel Ibarretxe</figcaption></figure><p>I think this is all about how we define <em>quality</em> and what a <em>bug</em> is.</p><p>If we look at a traditional and very &quot;intuitive&quot; definition of a bug, it is something that causes our software to produce an incorrect or unexpected result. However, if we think more about how the software is actually used and by whom, we&#39;ll see that there are many other types of bugs, including scalability, reliability, and even maintainability ones.</p><p>If we put all those &quot;-ilities&quot; in a list and prioritize them by their severity and importance to the business, we&#39;ll see that functionality-related bugs are rather far from the top. I would actually put <a href="/2014/10/26/hacker-vs-programmer-mentality.html">maintainability</a> at the top.</p><p>My point is that mistakes are not all equal. If I&#39;m writing a PDF report generated by a piece of Java code and my report misses the footer, that&#39;s one type of bug, and its fix will cost the business X dollars. On the other hand, if my PDF generation code is so difficult to modify that in order to change its format from <a href="http://en.wikipedia.org/wiki/Paper_size">A4</a> to <a href="http://en.wikipedia.org/wiki/Letter_%28paper_size%29">US Letter</a> we have to rewrite it from scratch, that&#39;s a completely different type of bug. Needless to say, its fixing will be many times more expensive.</p><aside class='quote'>Good programmers make cheaper mistakes in order to avoid making more expensive ones.</aside><p>So yes, mistakes are inevitable. We should not be afraid of them and be ready to make them. However, good programmers make <em>cheaper</em> mistakes in order to avoid making more expensive ones.</p><p>Good programmers understand that in the limited amount of time we usually have to implement the software, we have to sacrifice functionality in order to gain maintainability. Ideally, you want to achieve both, but in reality, it&#39;s next to impossible.</p><p>We all work under pressure, and we have time and money constraints. Within these constraints, good programmers prefer to make functionality buggy and incomplete while keeping the design clean and easy to maintain. There are exceptions, of course, where the business prioritizes functionality above everything else, but such situations happen very rarely (if the business is smart).</p><p>To summarize, I think that a good programmer makes more functional bugs than a bad programmer, though the bugs made by a bad programmer are more expensive than bugs made by a good programmer.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Wikipedia defines a software bug in a functional and behavioral way, ignoring maintainability and reusability issues, which are very important too. " /> <meta name="keywords" content="bugs in software, software bug, software defect, software defects, what is software bug" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-06-11 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Wikipedia's Definition of a Software Bug Is Wrong"/> <meta name="twitter:description" property="og:description" content="Wikipedia defines a software bug in a functional and behavioral way, ignoring maintainability and reusability issues, which are very important too. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/06/11/wikipedia-bug-definition.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/06/11/wikipedia-bug-definition.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/06/11/wikipedia-bug-definition.amp.html" /> <title>Wikipedia&#39;s Definition of a Software Bug Is Wrong </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/06/11/wikipedia-bug-definition.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/06/11/wikipedia-bug-definition.html">https://www.yegor256.com/2015/06/11/wikipedia-bug-definition.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Wikipedia&#39;s Definition of a Software Bug Is Wrong</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-06-11T00:00:00+00:00"> 11 June 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/06/11/wikipedia-bug-definition.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>Here is what <a href="https://en.wikipedia.org/wiki/Software_bug">Wikipedia says</a> at the time of this writing:</p><blockquote><p>A software bug is an error, flaw, failure, or fault in a computer program or system that causes it to produce an incorrect or unexpected result or to behave in unintended ways.</p></blockquote><p>I think that&#39;s incomplete. The definition entirely excludes &quot;non-behavioral&quot; defects related to, for example, <em>maintainability</em> and <em>reusability</em>.</p><p>As you know, every piece of software has <a href="https://en.wikipedia.org/wiki/Functional_requirement">functional</a> and <a href="https://en.wikipedia.org/wiki/Non-functional_requirement">non-functional</a> requirements. Functional requirements tell us <em>what</em> the software has to do, and non-functional requirements document <em>how</em> it has to do it. For example, here is a functional requirement:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>The user can generate a PDF report.</code></pre></figure><p>If our software doesn&#39;t generate a PDF report and crashes instead, that&#39;s a functional bug. If instead of a PDF report, it generates an empty page or a plain text document, that&#39;s a functional bug. If there is no &quot;generate PDF report&quot; button at all and the user simply can&#39;t start the PDF generation process, that&#39;s a functional bug.</p><p>Here is an example of a non-functional requirement:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>PDF report generation must take less than 100ms.</code></pre></figure><p>If our software generates a perfectly correct PDF report but it takes a minute, that&#39;s a non-functional bug.</p><p>So far so good, since the bug definition given by Wikipedia perfectly covers both of them---if they happen, they will cause our software &quot;to <em>produce</em> an incorrect or unexpected result or to <em>behave</em> in an unintended way.&quot; The emphasis here is on the words &quot;produce&quot; and &quot;behave.&quot; They presume the software is doing something and we&#39;re observing its behavior.</p><p>However, that&#39;s not all of it.</p><p>What about maintainability? I may have this kind of non-functional requirement:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>The source code of the PDF generator must be
easy to maintain and extend for an average
Java programmer.</code></pre></figure><p>It&#39;s a rather vague requirement, but you get the idea.</p><p>Maintainability and reusability are very critical non-functional components of any modern software program, especially taking into account a very high cost of labor in the market. Very often, it&#39;s more important to make sure the software is maintainable than fast. If it&#39;s maintainable and slow, we can find new programmers to <em>improve</em> the code. If it is fast but unmaintainable, we won&#39;t be able to do anything with it later and will have to <em>rewrite</em> it from scratch if some new feature is required. Read more about this in <a href="/2014/10/26/hacker-vs-programmer-mentality.html">Are You a Hacker or a Designer?</a>.</p><p>The definition of a software bug given by Wikipedia doesn&#39;t cover maintainability and reusability flaws at all. That makes for a common source of confusion---an inconsistent code style is not a bug (see the discussion under <a href="/2014/08/13/strict-code-quality-control.html">this post</a>).</p><p>That is wrong.</p><p>An inconsistent code style <em>is</em> a software bug, as is incomplete documentation, lack of documentation, code that&#39;s too complex, the lack of a coding style guide, etc.</p><p>I would rewrite the software bug definition paragraph in Wikipedia like this:</p><blockquote><p>A software bug is an error, flaw, failure, or fault in a computer program or system that causes it to violate at least one of its functional or non-functional requirements.</p></blockquote><p>This definition looks more accurate to me.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/06/11/wikipedia-bug-definition.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/06/11/wikipedia-bug-definition.html&amp;text=Wikipedia%27s+Definition+of+a+Software+Bug+Is+Wrong" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/06/11/wikipedia-bug-definition.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/06/11/wikipedia-bug-definition.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/06/11/wikipedia-bug-definition.html%3F2015-23&amp;title=Wikipedia%27s+Definition+of+a+Software+Bug+Is+Wrong" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/06/11/wikipedia-bug-definition.html%3F2015-23&amp;t=Wikipedia%27s+Definition+of+a+Software+Bug+Is+Wrong" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>Here is what <a href="https://en.wikipedia.org/wiki/Software_bug">Wikipedia says</a> at the time of this writing:</p><blockquote><p>A software bug is an error, flaw, failure, or fault in a computer program or system that causes it to produce an incorrect or unexpected result or to behave in unintended ways.</p></blockquote><p>I think that&#39;s incomplete. The definition entirely excludes &quot;non-behavioral&quot; defects related to, for example, <em>maintainability</em> and <em>reusability</em>.</p><p>As you know, every piece of software has <a href="https://en.wikipedia.org/wiki/Functional_requirement">functional</a> and <a href="https://en.wikipedia.org/wiki/Non-functional_requirement">non-functional</a> requirements. Functional requirements tell us <em>what</em> the software has to do, and non-functional requirements document <em>how</em> it has to do it. For example, here is a functional requirement:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>The user can generate a PDF report.</code></pre></figure><p>If our software doesn&#39;t generate a PDF report and crashes instead, that&#39;s a functional bug. If instead of a PDF report, it generates an empty page or a plain text document, that&#39;s a functional bug. If there is no &quot;generate PDF report&quot; button at all and the user simply can&#39;t start the PDF generation process, that&#39;s a functional bug.</p><p>Here is an example of a non-functional requirement:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>PDF report generation must take less than 100ms.</code></pre></figure><p>If our software generates a perfectly correct PDF report but it takes a minute, that&#39;s a non-functional bug.</p><p>So far so good, since the bug definition given by Wikipedia perfectly covers both of them---if they happen, they will cause our software &quot;to <em>produce</em> an incorrect or unexpected result or to <em>behave</em> in an unintended way.&quot; The emphasis here is on the words &quot;produce&quot; and &quot;behave.&quot; They presume the software is doing something and we&#39;re observing its behavior.</p><p>However, that&#39;s not all of it.</p><p>What about maintainability? I may have this kind of non-functional requirement:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>The source code of the PDF generator must be
easy to maintain and extend for an average
Java programmer.</code></pre></figure><p>It&#39;s a rather vague requirement, but you get the idea.</p><p>Maintainability and reusability are very critical non-functional components of any modern software program, especially taking into account a very high cost of labor in the market. Very often, it&#39;s more important to make sure the software is maintainable than fast. If it&#39;s maintainable and slow, we can find new programmers to <em>improve</em> the code. If it is fast but unmaintainable, we won&#39;t be able to do anything with it later and will have to <em>rewrite</em> it from scratch if some new feature is required. Read more about this in <a href="/2014/10/26/hacker-vs-programmer-mentality.html">Are You a Hacker or a Designer?</a>.</p><p>The definition of a software bug given by Wikipedia doesn&#39;t cover maintainability and reusability flaws at all. That makes for a common source of confusion---an inconsistent code style is not a bug (see the discussion under <a href="/2014/08/13/strict-code-quality-control.html">this post</a>).</p><p>That is wrong.</p><p>An inconsistent code style <em>is</em> a software bug, as is incomplete documentation, lack of documentation, code that&#39;s too complex, the lack of a coding style guide, etc.</p><p>I would rewrite the software bug definition paragraph in Wikipedia like this:</p><blockquote><p>A software bug is an error, flaw, failure, or fault in a computer program or system that causes it to violate at least one of its functional or non-functional requirements.</p></blockquote><p>This definition looks more accurate to me.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Most unit tests require mocks, stubs, and the preparation of some other structures before a test can be initiated; here is how I recommend you do that. " /> <meta name="keywords" content="unit test scaffolding, unit testing best practices, unit testing mocks, unit testing of static, unit testing stubs" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-05-25 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="A Few Thoughts on Unit Test Scaffolding"/> <meta name="twitter:description" property="og:description" content="Most unit tests require mocks, stubs, and the preparation of some other structures before a test can be initiated; here is how I recommend you do that. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/05/25/unit-test-scaffolding.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/05/25/unit-test-scaffolding.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/05/25/unit-test-scaffolding.amp.html" /> <title>A Few Thoughts on Unit Test Scaffolding </title> <meta name='og:image' content='https://www.yegor256.com/images/2015/05/leon-the-professional.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2015/05/leon-the-professional.jpg'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='563'/> <meta name='twitter:image:height' content='563'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Léon: The Professional by Luc Besson'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/05/25/unit-test-scaffolding.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/05/25/unit-test-scaffolding.html">https://www.yegor256.com/2015/05/25/unit-test-scaffolding.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">A Few Thoughts on Unit Test Scaffolding</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-05-25T00:00:00+00:00"> 25 May 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/05/25/unit-test-scaffolding.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>When I start to repeat myself in unit test methods by creating the same objects and preparing the data to run the test, I feel disappointed in my design. Long test methods with a lot of code duplication just don&#39;t look right. To simplify and shorten them, there are basically two options, at least in Java: 1) private properties initialized through <code>@Before</code> and <code>@BeforeClass</code>, and 2) <a href="/2017/02/07/private-method-is-new-class.html">private static methods</a>. They both look anti-OOP to me, and I think there is an alternative. Let me explain.</p><figure class='jb_picture'><img itemprop='image' alt='Léon: The Professional by Luc Besson' src='/images/2015/05/leon-the-professional.jpg' longdesc='#6f716aac'/><figcaption id='6f716aac'>Léon: The Professional by Luc Besson</figcaption></figure><p>JUnit officially suggests a <a href="http://junit.org/faq.html#atests_2">test fixture</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">MetricsTest</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">File</span> <span class="n">temp</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">Folder</span> <span class="n">folder</span><span class="o">;</span>
  <span class="nd">@Before</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">prepare</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">temp</span> <span class="o">=</span> <span class="n">Files</span><span class="o">.</span><span class="na">createTempDirectory</span><span class="o">(</span><span class="s">&quot;test&quot;</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">folder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DiscFolder</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">temp</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">folder</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="s">&quot;first.txt&quot;</span><span class="o">,</span> <span class="s">&quot;Hello, world!&quot;</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">folder</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="s">&quot;second.txt&quot;</span><span class="o">,</span> <span class="s">&quot;Goodbye!&quot;</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="nd">@After</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">clean</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">FileUtils</span><span class="o">.</span><span class="na">deleteDirectory</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">temp</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">calculatesTotalSize</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="mi">22</span><span class="o">,</span> <span class="k">new</span> <span class="n">Metrics</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">folder</span><span class="o">).</span><span class="na">size</span><span class="o">());</span>
  <span class="o">}</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">countsWordsInFiles</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="k">new</span> <span class="n">Metrics</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">folder</span><span class="o">).</span><span class="na">wc</span><span class="o">());</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>I think it&#39;s obvious what this test is doing. First, in <code>prepare()</code>, it creates a &quot;test fixture&quot; of type <code>Folder</code>. That is used in all three tests as an argument for the <code>Metrics</code> constructor. The real class being tested here is <code>Metrics</code> while <code>this.folder</code> is something we need in order to test it.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=l6MpCBzwDbg'><div class='box'> <img src='https://i.ytimg.com/vi/l6MpCBzwDbg/mqdefault.jpg' alt='YouTube video #l6MpCBzwDbg'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>What Fake Objects Are For? (webinar #8); 4 November 2015.</div></aside><p>What&#39;s wrong with this test? There is one serious issue: <strong>coupling</strong> between test methods. Test methods (and all tests in general) must be perfectly isolated from each other. This means that changing one test must not affect any others. In this example, that is not the case. When I want to change the <code>countsWords()</code> test, I have to change the internals of <code>before()</code>, which will affect the other method in the test &quot;class.&quot;</p><p>With all due respect to JUnit, the idea of creating test fixtures in <code>@Before</code> and <code>@After</code> is wrong, mostly because it encourages developers to couple test methods.</p><p>Here is how we can improve our test and isolate test methods:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">MetricsTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">calculatesTotalSize</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">File</span> <span class="n">dir</span> <span class="o">=</span> <span class="n">Files</span><span class="o">.</span><span class="na">createTempDirectory</span><span class="o">(</span><span class="s">&quot;test-1&quot;</span><span class="o">);</span>
    <span class="kd">final</span> <span class="n">Folder</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">MetricsTest</span><span class="o">.</span><span class="na">folder</span><span class="o">(</span>
      <span class="n">dir</span><span class="o">,</span>
      <span class="s">&quot;first.txt:Hello, world!&quot;</span><span class="o">,</span>
      <span class="s">&quot;second.txt:Goodbye!&quot;</span>
    <span class="o">);</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="mi">22</span><span class="o">,</span> <span class="k">new</span> <span class="n">Metrics</span><span class="o">(</span><span class="n">folder</span><span class="o">).</span><span class="na">size</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
      <span class="n">FileUtils</span><span class="o">.</span><span class="na">deleteDirectory</span><span class="o">(</span><span class="n">dir</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">countsWordsInFiles</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">File</span> <span class="n">dir</span> <span class="o">=</span> <span class="n">Files</span><span class="o">.</span><span class="na">createTempDirectory</span><span class="o">(</span><span class="s">&quot;test-2&quot;</span><span class="o">);</span>
    <span class="kd">final</span> <span class="n">Folder</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">MetricsTest</span><span class="o">.</span><span class="na">folder</span><span class="o">(</span>
      <span class="n">dir</span><span class="o">,</span>
      <span class="s">&quot;alpha.txt:Three words here&quot;</span><span class="o">,</span>
      <span class="s">&quot;beta.txt:two words&quot;</span>
      <span class="s">&quot;gamma.txt:one!&quot;</span>
    <span class="o">);</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="k">new</span> <span class="n">Metrics</span><span class="o">(</span><span class="n">folder</span><span class="o">).</span><span class="na">wc</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
      <span class="n">FileUtils</span><span class="o">.</span><span class="na">deleteDirectory</span><span class="o">(</span><span class="n">dir</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Folder</span> <span class="nf">folder</span><span class="o">(</span><span class="n">File</span> <span class="n">dir</span><span class="o">,</span> <span class="n">String</span><span class="o">...</span> <span class="n">parts</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Folder</span> <span class="n">folder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DiscFolder</span><span class="o">(</span><span class="n">dir</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">part</span> <span class="o">:</span> <span class="n">parts</span><span class="o">)</span> <span class="o">{</span>
      <span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">pair</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;:&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
      <span class="k">this</span><span class="o">.</span><span class="na">folder</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">pair</span><span class="o">[</span><span class="mi">0</span><span class="o">],</span> <span class="n">pair</span><span class="o">[</span><span class="mi">1</span><span class="o">]);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">folder</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Does it look better now? We&#39;re not there yet, but now our test methods are perfectly isolated. If I want to change one of them, I&#39;m not going to affect the others because I pass all configuration parameters to a private static utility (!) method <code>folder()</code>.</p><p>A utility method, huh? Yes, <a href="/2014/05/05/oop-alternative-to-utility-classes.html">it smells</a>.</p><p>The main issue with this design, even though it is way better than the previous one, is that it doesn&#39;t prevent code duplication between test &quot;classes.&quot; If I need a similar test fixture of type <code>Folder</code> in another test case, I will have to move this static method there. Or even worse, I will have to create a utility class. Yes, there is <a href="/2015/02/20/utility-classes-vs-functional-programming.html">nothing worse</a> in object-oriented programming than utility classes.</p><p>A much better design would be to use &quot;<a href="/2014/09/23/built-in-fake-objects.html">fake</a>&quot; objects instead of private static utilities. Here is how. First, we create a fake class and place it into <code>src/main/java</code>. This class can be used in tests and also in production code, if necessary (<code>Fk</code> for &quot;fake&quot;):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">FkFolder</span> <span class="kd">implements</span> <span class="n">Folder</span><span class="o">,</span> <span class="n">Closeable</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">File</span> <span class="n">dir</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">parts</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">FkFolder</span><span class="o">(</span><span class="n">String</span><span class="o">...</span> <span class="n">prts</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">(</span><span class="n">Files</span><span class="o">.</span><span class="na">createTempDirectory</span><span class="o">(</span><span class="s">&quot;test-1&quot;</span><span class="o">),</span> <span class="n">parts</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="nf">FkFolder</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">,</span> <span class="n">String</span><span class="o">...</span> <span class="n">prts</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">dir</span> <span class="o">=</span> <span class="n">file</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">parts</span> <span class="o">=</span> <span class="n">parts</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">File</span><span class="o">&gt;</span> <span class="nf">files</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">Folder</span> <span class="n">folder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DiscFolder</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">dir</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">part</span> <span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="na">parts</span><span class="o">)</span> <span class="o">{</span>
      <span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">pair</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;:&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
      <span class="n">folder</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">pair</span><span class="o">[</span><span class="mi">0</span><span class="o">],</span> <span class="n">pair</span><span class="o">[</span><span class="mi">1</span><span class="o">]);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">folder</span><span class="o">.</span><span class="na">files</span><span class="o">();</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">FileUtils</span><span class="o">.</span><span class="na">deleteDirectory</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">dir</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Here is how our test will look now:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">MetricsTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">calculatesTotalSize</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">parts</span> <span class="o">=</span> <span class="o">{</span>
      <span class="s">&quot;first.txt:Hello, world!&quot;</span><span class="o">,</span>
      <span class="s">&quot;second.txt:Goodbye!&quot;</span>
    <span class="o">};</span>
    <span class="k">try</span> <span class="o">(</span><span class="kd">final</span> <span class="n">Folder</span> <span class="n">folder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FkFolder</span><span class="o">(</span><span class="n">parts</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="mi">22</span><span class="o">,</span> <span class="k">new</span> <span class="n">Metrics</span><span class="o">(</span><span class="n">folder</span><span class="o">).</span><span class="na">size</span><span class="o">());</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">countsWordsInFiles</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">parts</span> <span class="o">=</span> <span class="o">{</span>
      <span class="s">&quot;alpha.txt:Three words here&quot;</span><span class="o">,</span>
      <span class="s">&quot;beta.txt:two words&quot;</span>
      <span class="s">&quot;gamma.txt:one!&quot;</span>
    <span class="o">};</span>
    <span class="k">try</span> <span class="o">(</span><span class="kd">final</span> <span class="n">Folder</span> <span class="n">folder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FkFolder</span><span class="o">(</span><span class="n">parts</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="k">new</span> <span class="n">Metrics</span><span class="o">(</span><span class="n">folder</span><span class="o">).</span><span class="na">wc</span><span class="o">());</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>What do you think? Isn&#39;t it better than what JUnit offers? Isn&#39;t it more reusable and extensible than utility methods?</p><p>To summarize, I believe scaffolding in unit testing must be done through <a href="/2014/09/23/built-in-fake-objects.html">fake objects</a> that are shipped together with production code.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/05/25/unit-test-scaffolding.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/05/25/unit-test-scaffolding.html&amp;text=A+Few+Thoughts+on+Unit+Test+Scaffolding" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/05/25/unit-test-scaffolding.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/05/25/unit-test-scaffolding.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/05/25/unit-test-scaffolding.html%3F2015-21&amp;title=A+Few+Thoughts+on+Unit+Test+Scaffolding" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/05/25/unit-test-scaffolding.html%3F2015-21&amp;t=A+Few+Thoughts+on+Unit+Test+Scaffolding" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>When I start to repeat myself in unit test methods by creating the same objects and preparing the data to run the test, I feel disappointed in my design. Long test methods with a lot of code duplication just don&#39;t look right. To simplify and shorten them, there are basically two options, at least in Java: 1) private properties initialized through <code>@Before</code> and <code>@BeforeClass</code>, and 2) <a href="/2017/02/07/private-method-is-new-class.html">private static methods</a>. They both look anti-OOP to me, and I think there is an alternative. Let me explain.</p><figure class='jb_picture'><img itemprop='image' alt='Léon: The Professional by Luc Besson' src='/images/2015/05/leon-the-professional.jpg' longdesc='#6f716aac'/><figcaption id='6f716aac'>Léon: The Professional by Luc Besson</figcaption></figure><p>JUnit officially suggests a <a href="http://junit.org/faq.html#atests_2">test fixture</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">MetricsTest</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">File</span> <span class="n">temp</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">Folder</span> <span class="n">folder</span><span class="o">;</span>
  <span class="nd">@Before</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">prepare</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">temp</span> <span class="o">=</span> <span class="n">Files</span><span class="o">.</span><span class="na">createTempDirectory</span><span class="o">(</span><span class="s">&quot;test&quot;</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">folder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DiscFolder</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">temp</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">folder</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="s">&quot;first.txt&quot;</span><span class="o">,</span> <span class="s">&quot;Hello, world!&quot;</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">folder</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="s">&quot;second.txt&quot;</span><span class="o">,</span> <span class="s">&quot;Goodbye!&quot;</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="nd">@After</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">clean</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">FileUtils</span><span class="o">.</span><span class="na">deleteDirectory</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">temp</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">calculatesTotalSize</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="mi">22</span><span class="o">,</span> <span class="k">new</span> <span class="n">Metrics</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">folder</span><span class="o">).</span><span class="na">size</span><span class="o">());</span>
  <span class="o">}</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">countsWordsInFiles</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="k">new</span> <span class="n">Metrics</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">folder</span><span class="o">).</span><span class="na">wc</span><span class="o">());</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>I think it&#39;s obvious what this test is doing. First, in <code>prepare()</code>, it creates a &quot;test fixture&quot; of type <code>Folder</code>. That is used in all three tests as an argument for the <code>Metrics</code> constructor. The real class being tested here is <code>Metrics</code> while <code>this.folder</code> is something we need in order to test it.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=l6MpCBzwDbg'><div class='box'> <img src='https://i.ytimg.com/vi/l6MpCBzwDbg/mqdefault.jpg' alt='YouTube video #l6MpCBzwDbg'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>What Fake Objects Are For? (webinar #8); 4 November 2015.</div></aside><p>What&#39;s wrong with this test? There is one serious issue: <strong>coupling</strong> between test methods. Test methods (and all tests in general) must be perfectly isolated from each other. This means that changing one test must not affect any others. In this example, that is not the case. When I want to change the <code>countsWords()</code> test, I have to change the internals of <code>before()</code>, which will affect the other method in the test &quot;class.&quot;</p><p>With all due respect to JUnit, the idea of creating test fixtures in <code>@Before</code> and <code>@After</code> is wrong, mostly because it encourages developers to couple test methods.</p><p>Here is how we can improve our test and isolate test methods:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">MetricsTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">calculatesTotalSize</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">File</span> <span class="n">dir</span> <span class="o">=</span> <span class="n">Files</span><span class="o">.</span><span class="na">createTempDirectory</span><span class="o">(</span><span class="s">&quot;test-1&quot;</span><span class="o">);</span>
    <span class="kd">final</span> <span class="n">Folder</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">MetricsTest</span><span class="o">.</span><span class="na">folder</span><span class="o">(</span>
      <span class="n">dir</span><span class="o">,</span>
      <span class="s">&quot;first.txt:Hello, world!&quot;</span><span class="o">,</span>
      <span class="s">&quot;second.txt:Goodbye!&quot;</span>
    <span class="o">);</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="mi">22</span><span class="o">,</span> <span class="k">new</span> <span class="n">Metrics</span><span class="o">(</span><span class="n">folder</span><span class="o">).</span><span class="na">size</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
      <span class="n">FileUtils</span><span class="o">.</span><span class="na">deleteDirectory</span><span class="o">(</span><span class="n">dir</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">countsWordsInFiles</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">File</span> <span class="n">dir</span> <span class="o">=</span> <span class="n">Files</span><span class="o">.</span><span class="na">createTempDirectory</span><span class="o">(</span><span class="s">&quot;test-2&quot;</span><span class="o">);</span>
    <span class="kd">final</span> <span class="n">Folder</span> <span class="n">folder</span> <span class="o">=</span> <span class="n">MetricsTest</span><span class="o">.</span><span class="na">folder</span><span class="o">(</span>
      <span class="n">dir</span><span class="o">,</span>
      <span class="s">&quot;alpha.txt:Three words here&quot;</span><span class="o">,</span>
      <span class="s">&quot;beta.txt:two words&quot;</span>
      <span class="s">&quot;gamma.txt:one!&quot;</span>
    <span class="o">);</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="k">new</span> <span class="n">Metrics</span><span class="o">(</span><span class="n">folder</span><span class="o">).</span><span class="na">wc</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
      <span class="n">FileUtils</span><span class="o">.</span><span class="na">deleteDirectory</span><span class="o">(</span><span class="n">dir</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Folder</span> <span class="nf">folder</span><span class="o">(</span><span class="n">File</span> <span class="n">dir</span><span class="o">,</span> <span class="n">String</span><span class="o">...</span> <span class="n">parts</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Folder</span> <span class="n">folder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DiscFolder</span><span class="o">(</span><span class="n">dir</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">part</span> <span class="o">:</span> <span class="n">parts</span><span class="o">)</span> <span class="o">{</span>
      <span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">pair</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;:&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
      <span class="k">this</span><span class="o">.</span><span class="na">folder</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">pair</span><span class="o">[</span><span class="mi">0</span><span class="o">],</span> <span class="n">pair</span><span class="o">[</span><span class="mi">1</span><span class="o">]);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">folder</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Does it look better now? We&#39;re not there yet, but now our test methods are perfectly isolated. If I want to change one of them, I&#39;m not going to affect the others because I pass all configuration parameters to a private static utility (!) method <code>folder()</code>.</p><p>A utility method, huh? Yes, <a href="/2014/05/05/oop-alternative-to-utility-classes.html">it smells</a>.</p><p>The main issue with this design, even though it is way better than the previous one, is that it doesn&#39;t prevent code duplication between test &quot;classes.&quot; If I need a similar test fixture of type <code>Folder</code> in another test case, I will have to move this static method there. Or even worse, I will have to create a utility class. Yes, there is <a href="/2015/02/20/utility-classes-vs-functional-programming.html">nothing worse</a> in object-oriented programming than utility classes.</p><p>A much better design would be to use &quot;<a href="/2014/09/23/built-in-fake-objects.html">fake</a>&quot; objects instead of private static utilities. Here is how. First, we create a fake class and place it into <code>src/main/java</code>. This class can be used in tests and also in production code, if necessary (<code>Fk</code> for &quot;fake&quot;):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">FkFolder</span> <span class="kd">implements</span> <span class="n">Folder</span><span class="o">,</span> <span class="n">Closeable</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">File</span> <span class="n">dir</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">parts</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">FkFolder</span><span class="o">(</span><span class="n">String</span><span class="o">...</span> <span class="n">prts</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">(</span><span class="n">Files</span><span class="o">.</span><span class="na">createTempDirectory</span><span class="o">(</span><span class="s">&quot;test-1&quot;</span><span class="o">),</span> <span class="n">parts</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="nf">FkFolder</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">,</span> <span class="n">String</span><span class="o">...</span> <span class="n">prts</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">dir</span> <span class="o">=</span> <span class="n">file</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">parts</span> <span class="o">=</span> <span class="n">parts</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">File</span><span class="o">&gt;</span> <span class="nf">files</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">Folder</span> <span class="n">folder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DiscFolder</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">dir</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">part</span> <span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="na">parts</span><span class="o">)</span> <span class="o">{</span>
      <span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">pair</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;:&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
      <span class="n">folder</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">pair</span><span class="o">[</span><span class="mi">0</span><span class="o">],</span> <span class="n">pair</span><span class="o">[</span><span class="mi">1</span><span class="o">]);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">folder</span><span class="o">.</span><span class="na">files</span><span class="o">();</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">FileUtils</span><span class="o">.</span><span class="na">deleteDirectory</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">dir</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Here is how our test will look now:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">MetricsTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">calculatesTotalSize</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">parts</span> <span class="o">=</span> <span class="o">{</span>
      <span class="s">&quot;first.txt:Hello, world!&quot;</span><span class="o">,</span>
      <span class="s">&quot;second.txt:Goodbye!&quot;</span>
    <span class="o">};</span>
    <span class="k">try</span> <span class="o">(</span><span class="kd">final</span> <span class="n">Folder</span> <span class="n">folder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FkFolder</span><span class="o">(</span><span class="n">parts</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="mi">22</span><span class="o">,</span> <span class="k">new</span> <span class="n">Metrics</span><span class="o">(</span><span class="n">folder</span><span class="o">).</span><span class="na">size</span><span class="o">());</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">countsWordsInFiles</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">parts</span> <span class="o">=</span> <span class="o">{</span>
      <span class="s">&quot;alpha.txt:Three words here&quot;</span><span class="o">,</span>
      <span class="s">&quot;beta.txt:two words&quot;</span>
      <span class="s">&quot;gamma.txt:one!&quot;</span>
    <span class="o">};</span>
    <span class="k">try</span> <span class="o">(</span><span class="kd">final</span> <span class="n">Folder</span> <span class="n">folder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FkFolder</span><span class="o">(</span><span class="n">parts</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">assertEquals</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="k">new</span> <span class="n">Metrics</span><span class="o">(</span><span class="n">folder</span><span class="o">).</span><span class="na">wc</span><span class="o">());</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>What do you think? Isn&#39;t it better than what JUnit offers? Isn&#39;t it more reusable and extensible than utility methods?</p><p>To summarize, I believe scaffolding in unit testing must be done through <a href="/2014/09/23/built-in-fake-objects.html">fake objects</a> that are shipped together with production code.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="It is a bad idea to put executing statements into class constructors because that leads to side effects and uncontrollable behavior. " /> <meta name="keywords" content="best practices java constructors, constructors in java, how much code in constructors, how much code to put into constructors, oop constructors best practices" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-05-07 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Constructors Must Be Code-Free"/> <meta name="twitter:description" property="og:description" content="It is a bad idea to put executing statements into class constructors because that leads to side effects and uncontrollable behavior. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/05/07/ctors-must-be-code-free.amp.html" /> <title>Constructors Must Be Code-Free </title> <meta name='og:image' content='https://www.yegor256.com/images/2015/05/kill-bill.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2015/05/kill-bill.jpg'/><meta name='og:image:width' content='1694'/> <meta name='twitter:image:width' content='1694'/><meta name='og:image:height' content='718'/> <meta name='twitter:image:height' content='718'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Kill Bill: Vol. 2 (2004) by Quentin Tarantino'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html">https://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Constructors Must Be Code-Free</h1><aside class='book'><a href='http://amzn.to/2qFt4Tn'><img src='/images/books/elegant-objects/cover.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='http://amzn.to/2qFt4Tn'>Section&nbsp;1.3</a><br/> of my book<a href='http://amzn.to/2qFt4Tn'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-05-07T00:00:00+00:00"> 7 May 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>How much work should be done within a constructor? It seems reasonable to do some computations inside a constructor and then encapsulate results. That way, when the results are required by object methods, we&#39;ll have them ready. Sounds like a good approach? No, it&#39;s not. It&#39;s a bad idea for one reason: It prevents composition of objects and makes them un-extensible.</p><figure class='jb_picture'><img itemprop='image' alt='Kill Bill: Vol. 2 (2004) by Quentin Tarantino' src='/images/2015/05/kill-bill.jpg' longdesc='#780fae47'/><figcaption id='780fae47'>Kill Bill: Vol. 2 (2004) by Quentin Tarantino</figcaption></figure><p>Let&#39;s say we&#39;re making an interface that would represent a name of a person:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">interface</span> <span class="nc">Name</span> <span class="o">{</span>
  <span class="n">String</span> <span class="nf">first</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>Pretty easy, right? Now, let&#39;s try to implement it:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">EnglishName</span> <span class="kd">implements</span> <span class="n">Name</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">EnglishName</span><span class="o">(</span><span class="kd">final</span> <span class="n">CharSequence</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">split</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">)[</span><span class="mi">0</span><span class="o">];</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">first</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>What&#39;s wrong with this? It&#39;s faster, right? It splits the name into parts only once and encapsulates them. Then, no matter how many times we call the <code>first()</code> method, it will return the same value and won&#39;t need to do the splitting again. However, this is flawed thinking! Let me show you the right way and explain:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">EnglishName</span> <span class="kd">implements</span> <span class="n">Name</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">CharSequence</span> <span class="n">text</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">EnglishName</span><span class="o">(</span><span class="kd">final</span> <span class="n">CharSequence</span> <span class="n">txt</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">text</span> <span class="o">=</span> <span class="n">txt</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">first</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">text</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">)[</span><span class="mi">0</span><span class="o">];</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This is the right design. I can see you smiling, so let me prove my point.</p><p>Before I start proving, though, let me ask you to read this article: <a href="/2015/02/26/composable-decorators.html">Composable Decorators vs. Imperative Utility Methods</a>. It explains the difference between a static method and composable decorators. The first snippet above is very close to an imperative utility method, even though it looks like an object. The second example is a true object.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=9yjtsCK6Wdk'><div class='box'> <img src='https://i.ytimg.com/vi/9yjtsCK6Wdk/mqdefault.jpg' alt='YouTube video #9yjtsCK6Wdk'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>A Few Thoughts About Constructors in OOP (webinar #7); 7 October 2015.</div></aside><p>In the first example, we are abusing the <code>new</code> operator and turning it into a static method, which does all calculations for us <em>right here and now</em>. This is what <em>imperative</em> programming is about. In imperative programming, we do all calculations right now and return fully ready results. In declarative programming, we are instead trying to delay calculations for as long as possible.</p><p>Let&#39;s try to use our <code>EnglishName</code> class:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">Name</span> <span class="n">name</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EnglishName</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">NameInPostgreSQL</span><span class="o">(</span><span class="cm">/<em>...</em>/</span><span class="o">)</span>
<span class="o">);</span>
<span class="k">if</span> <span class="o">(</span><span class="cm">/* something goes wrong <em>/</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalStateException</span><span class="o">(</span>
    <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
      <span class="s">&quot;Hi, %s, we can&#39;t proceed with your application&quot;</span><span class="o">,</span>
      <span class="n">name</span><span class="o">.</span><span class="na">first</span><span class="o">()</span>
    <span class="o">)</span>
  <span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>In the first line of this snippet, we are just making an instance of an object and labeling it <code>name</code>. We don&#39;t want to go to the database yet and fetch the full name from there, split it into parts, and encapsulate them inside <code>name</code>. We just want to create an instance of an object. Such a parsing behavior would be a side effect for us and, in this case, will slow down the application. As you see, we may only need <code>name.first()</code> if something goes wrong and we need to construct an exception object.</p><p>My point is that having <strong>any</strong> computations done inside a constructor is a bad practice and must be avoided because they are side effects and are not requested by the object owner.</p><p>What about performance during the re-use of <code>name</code>, you may ask. If we make an instance of <code>EnglishName</code> and then call <code>name.first()</code> five times, we&#39;ll end up with five calls to the <code>String.split()</code> method.</p><p>To solve that, we create another class, a <a href="/2015/02/26/composable-decorators.html">composable decorator</a>, which will help us solve this &quot;re-use&quot; problem:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">CachedName</span> <span class="kd">implements</span> <span class="n">Name</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Name</span> <span class="n">origin</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">CachedName</span><span class="o">(</span><span class="kd">final</span> <span class="n">Name</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="nd">@Cacheable</span><span class="o">(</span><span class="n">forever</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">first</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">first</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>I&#39;m using the <a href="http://aspects.jcabi.com/annotation-cacheable.html"><code>Cacheable</code></a> annotation from <a href="http://aspects.jcabi.com/">jcabi-aspects</a>, but you can use any other caching tools available in Java (or other languages), like <a href="https://code.google.com/p/guava-libraries/wiki/CachesExplained">Guava Cache</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">CachedName</span> <span class="kd">implements</span> <span class="n">Name</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Cache</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">cache</span> <span class="o">=</span>
    <span class="n">CacheBuilder</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Name</span> <span class="n">origin</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">CachedName</span><span class="o">(</span><span class="kd">final</span> <span class="n">Name</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">first</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">cache</span><span class="o">.</span><span class="na">get</span><span class="o">(</span>
      <span class="mi">1L</span><span class="o">,</span>
      <span class="k">new</span> <span class="n">Callable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">call</span><span class="o">()</span> <span class="o">{</span>
          <span class="k">return</span> <span class="n">CachedName</span><span class="o">.</span><span class="na">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">first</span><span class="o">();</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>But please don&#39;t make <code>CachedName</code> mutable and lazily loaded---it&#39;s an anti-pattern, which I&#39;ve discussed before in <a href="/2014/06/09/objects-should-be-immutable.html">Objects Should Be Immutable</a>.</p><p>This is how our code will look now:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">Name</span> <span class="n">name</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CachedName</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">EnglishName</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">NameInPostgreSQL</span><span class="o">(</span><span class="cm">/</em>...<em>/</span><span class="o">)</span>
  <span class="o">)</span>
<span class="o">);</span></code></pre></figure><p>It&#39;s a very primitive example, but I hope you get the idea.</p><p>In this design, we&#39;re basically splitting the object into two parts. The first one knows how to get the first name from the English name. The second one knows how to cache the results of this calculation in memory. And now it&#39;s my decision, as a user of these classes, how exactly to use them. I will decide whether I need caching or not. This is what object composition is all about.</p><p>Let me reiterate that the only allowed statement inside a constructor is an assignment. If you need to put something else there, start thinking about refactoring---your class definitely needs a redesign.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html&amp;text=Constructors+Must+Be+Code-Free" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html%3F2015-18&amp;title=Constructors+Must+Be+Code-Free" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/05/07/ctors-must-be-code-free.html%3F2015-18&amp;t=Constructors+Must+Be+Code-Free" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>How much work should be done within a constructor? It seems reasonable to do some computations inside a constructor and then encapsulate results. That way, when the results are required by object methods, we&#39;ll have them ready. Sounds like a good approach? No, it&#39;s not. It&#39;s a bad idea for one reason: It prevents composition of objects and makes them un-extensible.</p><figure class='jb_picture'><img itemprop='image' alt='Kill Bill: Vol. 2 (2004) by Quentin Tarantino' src='/images/2015/05/kill-bill.jpg' longdesc='#780fae47'/><figcaption id='780fae47'>Kill Bill: Vol. 2 (2004) by Quentin Tarantino</figcaption></figure><p>Let&#39;s say we&#39;re making an interface that would represent a name of a person:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">interface</span> <span class="nc">Name</span> <span class="o">{</span>
  <span class="n">String</span> <span class="nf">first</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>Pretty easy, right? Now, let&#39;s try to implement it:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">EnglishName</span> <span class="kd">implements</span> <span class="n">Name</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">EnglishName</span><span class="o">(</span><span class="kd">final</span> <span class="n">CharSequence</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">split</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">)[</span><span class="mi">0</span><span class="o">];</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">first</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>What&#39;s wrong with this? It&#39;s faster, right? It splits the name into parts only once and encapsulates them. Then, no matter how many times we call the <code>first()</code> method, it will return the same value and won&#39;t need to do the splitting again. However, this is flawed thinking! Let me show you the right way and explain:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">EnglishName</span> <span class="kd">implements</span> <span class="n">Name</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">CharSequence</span> <span class="n">text</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">EnglishName</span><span class="o">(</span><span class="kd">final</span> <span class="n">CharSequence</span> <span class="n">txt</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">text</span> <span class="o">=</span> <span class="n">txt</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">first</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">text</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">)[</span><span class="mi">0</span><span class="o">];</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This is the right design. I can see you smiling, so let me prove my point.</p><p>Before I start proving, though, let me ask you to read this article: <a href="/2015/02/26/composable-decorators.html">Composable Decorators vs. Imperative Utility Methods</a>. It explains the difference between a static method and composable decorators. The first snippet above is very close to an imperative utility method, even though it looks like an object. The second example is a true object.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=9yjtsCK6Wdk'><div class='box'> <img src='https://i.ytimg.com/vi/9yjtsCK6Wdk/mqdefault.jpg' alt='YouTube video #9yjtsCK6Wdk'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>A Few Thoughts About Constructors in OOP (webinar #7); 7 October 2015.</div></aside><p>In the first example, we are abusing the <code>new</code> operator and turning it into a static method, which does all calculations for us <em>right here and now</em>. This is what <em>imperative</em> programming is about. In imperative programming, we do all calculations right now and return fully ready results. In declarative programming, we are instead trying to delay calculations for as long as possible.</p><p>Let&#39;s try to use our <code>EnglishName</code> class:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">Name</span> <span class="n">name</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EnglishName</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">NameInPostgreSQL</span><span class="o">(</span><span class="cm">/</em>...<em>/</span><span class="o">)</span>
<span class="o">);</span>
<span class="k">if</span> <span class="o">(</span><span class="cm">/</em> something goes wrong <em>/</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalStateException</span><span class="o">(</span>
    <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
      <span class="s">&quot;Hi, %s, we can&#39;t proceed with your application&quot;</span><span class="o">,</span>
      <span class="n">name</span><span class="o">.</span><span class="na">first</span><span class="o">()</span>
    <span class="o">)</span>
  <span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>In the first line of this snippet, we are just making an instance of an object and labeling it <code>name</code>. We don&#39;t want to go to the database yet and fetch the full name from there, split it into parts, and encapsulate them inside <code>name</code>. We just want to create an instance of an object. Such a parsing behavior would be a side effect for us and, in this case, will slow down the application. As you see, we may only need <code>name.first()</code> if something goes wrong and we need to construct an exception object.</p><p>My point is that having <strong>any</strong> computations done inside a constructor is a bad practice and must be avoided because they are side effects and are not requested by the object owner.</p><p>What about performance during the re-use of <code>name</code>, you may ask. If we make an instance of <code>EnglishName</code> and then call <code>name.first()</code> five times, we&#39;ll end up with five calls to the <code>String.split()</code> method.</p><p>To solve that, we create another class, a <a href="/2015/02/26/composable-decorators.html">composable decorator</a>, which will help us solve this &quot;re-use&quot; problem:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">CachedName</span> <span class="kd">implements</span> <span class="n">Name</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Name</span> <span class="n">origin</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">CachedName</span><span class="o">(</span><span class="kd">final</span> <span class="n">Name</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="nd">@Cacheable</span><span class="o">(</span><span class="n">forever</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">first</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">first</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>I&#39;m using the <a href="http://aspects.jcabi.com/annotation-cacheable.html"><code>Cacheable</code></a> annotation from <a href="http://aspects.jcabi.com/">jcabi-aspects</a>, but you can use any other caching tools available in Java (or other languages), like <a href="https://code.google.com/p/guava-libraries/wiki/CachesExplained">Guava Cache</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">CachedName</span> <span class="kd">implements</span> <span class="n">Name</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Cache</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">cache</span> <span class="o">=</span>
    <span class="n">CacheBuilder</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Name</span> <span class="n">origin</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">CachedName</span><span class="o">(</span><span class="kd">final</span> <span class="n">Name</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">first</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">cache</span><span class="o">.</span><span class="na">get</span><span class="o">(</span>
      <span class="mi">1L</span><span class="o">,</span>
      <span class="k">new</span> <span class="n">Callable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">call</span><span class="o">()</span> <span class="o">{</span>
          <span class="k">return</span> <span class="n">CachedName</span><span class="o">.</span><span class="na">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">first</span><span class="o">();</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>But please don&#39;t make <code>CachedName</code> mutable and lazily loaded---it&#39;s an anti-pattern, which I&#39;ve discussed before in <a href="/2014/06/09/objects-should-be-immutable.html">Objects Should Be Immutable</a>.</p><p>This is how our code will look now:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">Name</span> <span class="n">name</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CachedName</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">EnglishName</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">NameInPostgreSQL</span><span class="o">(</span><span class="cm">/</em>...<em>/</span><span class="o">)</span>
  <span class="o">)</span>
<span class="o">);</span></code></pre></figure><p>It&#39;s a very primitive example, but I hope you get the idea.</p><p>In this design, we&#39;re basically splitting the object into two parts. The first one knows how to get the first name from the English name. The second one knows how to cache the results of this calculation in memory. And now it&#39;s my decision, as a user of these classes, how exactly to use them. I will decide whether I need caching or not. This is what object composition is all about.</p><p>Let me reiterate that the only allowed statement inside a constructor is an assignment. If you need to put something else there, start thinking about refactoring---your class definitely needs a redesign.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="In my experience, very few people understand how to implement an iterating adapter in Java; this article should give a practical example. " /> <meta name="keywords" content="implement java iterator, iterator in java adapter, iterator in java example, java iterator, java iterator example" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-04-30 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="How to Implement an Iterating Adapter"/> <meta name="twitter:description" property="og:description" content="In my experience, very few people understand how to implement an iterating adapter in Java; this article should give a practical example. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/04/30/iterating-adapter.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/04/30/iterating-adapter.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/04/30/iterating-adapter.amp.html" /> <title>How to Implement an Iterating Adapter </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/04/30/iterating-adapter.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/04/30/iterating-adapter.html">https://www.yegor256.com/2015/04/30/iterating-adapter.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">How to Implement an Iterating Adapter</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-04-30T00:00:00+00:00"> 30 April 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/04/30/iterating-adapter.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p><a href="http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html">Iterator</a> is one of the fundamental Java <a href="/2016/04/26/why-inputstream-design-is-wrong.html">interfaces</a>, introduced in Java 1.2. It is supposed to be very simple; however, in my experience, many Java developers don&#39;t understand how to implement a custom one, which should iterate a stream of data coming from some other source. In other words, it becomes an <strong>adapter</strong> of another source of data, in the form of an iterator. I hope this example will help.</p><p>Let&#39;s say we have an object of this class:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">Data</span> <span class="o">{</span>
  <span class="kt">byte</span><span class="o">[]</span> <span class="nf">read</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>When we call <code>read()</code>, it returns a new array of bytes that were retrieved from somewhere. If there is nothing to retrieve, the array will be empty. Now, we want to create an <em>adapter</em> that would consume the bytes and let us iterate them:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">FluentData</span> <span class="kd">implements</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Byte</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kt">boolean</span> <span class="nf">hasNext</span><span class="o">()</span> <span class="o">{</span> <span class="cm">/</em> ... <em>/</span> <span class="o">}</span>
  <span class="n">Byte</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span> <span class="cm">/</em> ... <em>/</span> <span class="o">}</span>
  <span class="kt">void</span> <span class="nf">remove</span><span class="o">()</span>  <span class="o">{</span> <span class="cm">/</em> ... <em>/</span> <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Here is how it should look (it is not thread-safe!):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">FluentData</span> <span class="kd">implements</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Byte</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Data</span> <span class="n">data</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Queue</span><span class="o">&lt;</span><span class="n">Byte</span><span class="o">&gt;</span> <span class="n">buffer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">&lt;&gt;();</span>
  <span class="kd">public</span> <span class="nf">FluentData</span><span class="o">(</span><span class="kd">final</span> <span class="n">Data</span> <span class="n">dat</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">data</span> <span class="o">=</span> <span class="n">dat</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">hasNext</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">buffer</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">for</span> <span class="o">(</span><span class="kd">final</span> <span class="kt">byte</span> <span class="n">item</span> <span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="na">data</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">buffer</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="o">!</span><span class="k">this</span><span class="o">.</span><span class="na">buffer</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">();</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">Byte</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="n">NoSuchElementException</span><span class="o">(</span><span class="s">&quot;Nothing left&quot;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">buffer</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">remove</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="n">UnsupportedOperationException</span><span class="o">(</span><span class="s">&quot;It is read-only&quot;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>There is no way to make it <a href="/2017/01/17/synchronized-decorators.html">thread-safe</a> because the iterating process is outside the scope of the iterator. Even if we declare our methods as <code>synchronized</code>, this won&#39;t guarantee that two threads won&#39;t conflict when they both call <code>hasNext()</code> and <code>next()</code>. So don&#39;t bother with it and just document the iterator as not thread-safe, then let its users synchronize one level higher when necessary.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/04/30/iterating-adapter.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/04/30/iterating-adapter.html&amp;text=How+to+Implement+an+Iterating+Adapter" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/04/30/iterating-adapter.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/04/30/iterating-adapter.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/04/30/iterating-adapter.html%3F2015-17&amp;title=How+to+Implement+an+Iterating+Adapter" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/04/30/iterating-adapter.html%3F2015-17&amp;t=How+to+Implement+an+Iterating+Adapter" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p><a href="http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html">Iterator</a> is one of the fundamental Java <a href="/2016/04/26/why-inputstream-design-is-wrong.html">interfaces</a>, introduced in Java 1.2. It is supposed to be very simple; however, in my experience, many Java developers don&#39;t understand how to implement a custom one, which should iterate a stream of data coming from some other source. In other words, it becomes an <strong>adapter</strong> of another source of data, in the form of an iterator. I hope this example will help.</p><p>Let&#39;s say we have an object of this class:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">Data</span> <span class="o">{</span>
  <span class="kt">byte</span><span class="o">[]</span> <span class="nf">read</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>When we call <code>read()</code>, it returns a new array of bytes that were retrieved from somewhere. If there is nothing to retrieve, the array will be empty. Now, we want to create an <em>adapter</em> that would consume the bytes and let us iterate them:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">FluentData</span> <span class="kd">implements</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Byte</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kt">boolean</span> <span class="nf">hasNext</span><span class="o">()</span> <span class="o">{</span> <span class="cm">/</em> ... <em>/</span> <span class="o">}</span>
  <span class="n">Byte</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span> <span class="cm">/</em> ... <em>/</span> <span class="o">}</span>
  <span class="kt">void</span> <span class="nf">remove</span><span class="o">()</span>  <span class="o">{</span> <span class="cm">/</em> ... <em>/</span> <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Here is how it should look (it is not thread-safe!):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">FluentData</span> <span class="kd">implements</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Byte</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Data</span> <span class="n">data</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Queue</span><span class="o">&lt;</span><span class="n">Byte</span><span class="o">&gt;</span> <span class="n">buffer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">&lt;&gt;();</span>
  <span class="kd">public</span> <span class="nf">FluentData</span><span class="o">(</span><span class="kd">final</span> <span class="n">Data</span> <span class="n">dat</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">data</span> <span class="o">=</span> <span class="n">dat</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">hasNext</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">buffer</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">for</span> <span class="o">(</span><span class="kd">final</span> <span class="kt">byte</span> <span class="n">item</span> <span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="na">data</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">buffer</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="o">!</span><span class="k">this</span><span class="o">.</span><span class="na">buffer</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">();</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">Byte</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="n">NoSuchElementException</span><span class="o">(</span><span class="s">&quot;Nothing left&quot;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">buffer</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">remove</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="n">UnsupportedOperationException</span><span class="o">(</span><span class="s">&quot;It is read-only&quot;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>There is no way to make it <a href="/2017/01/17/synchronized-decorators.html">thread-safe</a> because the iterating process is outside the scope of the iterator. Even if we declare our methods as <code>synchronized</code>, this won&#39;t guarantee that two threads won&#39;t conflict when they both call <code>hasNext()</code> and <code>next()</code>. So don&#39;t bother with it and just document the iterator as not thread-safe, then let its users synchronize one level higher when necessary.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="A software quality award, recognizing the most disciplined and properly organized open source project; year 2015. " /> <meta name="keywords" content="best open source projects, get donation for open source, open source award, open source donation, open source project award" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-04-16 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Software Quality Award, 2015"/> <meta name="twitter:description" property="og:description" content="A software quality award, recognizing the most disciplined and properly organized open source project; year 2015. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/04/16/award.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/04/16/award.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/04/16/award.amp.html" /> <title>Software Quality Award, 2015 </title> <meta name='og:image' content='https://www.yegor256.com/images/andreea/quality-award.png'/><meta name='twitter:image' content='https://www.yegor256.com/images/andreea/quality-award.png'/><meta name='og:image:width' content='1280'/> <meta name='twitter:image:width' content='1280'/><meta name='og:image:height' content='704'/> <meta name='twitter:image:height' content='704'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Main picture'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li class="selected" ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/04/16/award.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/04/16/award.html">https://www.yegor256.com/2015/04/16/award.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Software Quality Award, 2015</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-04-16T00:00:00+00:00"> 16 April 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/04/16/award.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><figure class='badge'><img src='https://www.yegor256.com/images/andreea/quality-award.svg' style='width:300px;max-width:100%;' alt='badge'/></figure><p>I&#39;m a big fan of rules and discipline in software development; as an example, see <a href="/2014/10/26/hacker-vs-programmer-mentality.html">Are You a Hacker or a Designer?</a>. Also, I&#39;m a big fan of object-oriented programming in its purest form; for example, see <a href="/2014/11/20/seven-virtues-of-good-object.html">Seven Virtues of a Good Object</a>. I&#39;m also a co-founder and the CEO of <a href="http://www.zerocracy.com">Zerocracy</a>, a software development company through which I put my admiration of discipline and clean design into practice.</p><p>I want to encourage you to share my passion---not just by reading this blog but through making real <a href="/2015/12/22/why-dont-you-contribute-to-open-source.html">open source software</a> in a disciplined way. This award is for those who are brave enough to swim against the current and value quality above everything else.</p><p><a href="/award.html">Send me</a> your own project for review and participate in the contest.</p><p>Rules:</p><ul> <li><p>One person can submit up to three projects.</p></li> <li><p>Submissions are <strike>accepted until the <strong>September 1, 2015</strong></strike> closed.</p></li> <li><p>Submissions must be sent via email to <a href="mailto:me@yegor256.com"><a href="mailto:me@yegor256.com">me@yegor256.com</a></a>. All I need is your GitHub login and repository name; I will check the commit history to make sure you&#39;re the main contributor to the project.</p></li> <li><p>I reserve the right to reject any submission without explanation.</p></li> <li><p>All submissions will be published on this page (including rejected ones).</p></li> <li><p>Results will be announced <strong>October 15</strong> on this page and by email.</p></li> <li><p>The best project will receive <strong>$4,096</strong>.</p></li> <li><p>The best 8 projects will receive 1-year open source licenses to any <a href="https://www.jetbrains.com/products.html">JetBrains</a> products (one license per project).</p></li> <li><p>Final decisions will be made by me and are not negotiable (although I may invite other people to help me make the right decision).</p></li></ul><figure class='badge'><a href='http://www.jetbrains.com'><img src='https://www.yegor256.com/images/2015/06/jetbrains-logo.gif' style='width:128px;max-width:100%;' alt='badge'/></a></figure><p>Each project must be:</p><ul> <li><p>Open source (in GitHub).</p></li> <li><p>At least 5,000 lines of code.</p></li> <li><p>At least one year old.</p></li> <li><p>Object-oriented (that&#39;s the only thing I understand).</p></li></ul><p>The best projects will feature (<a href="/2015/06/08/deadly-sins-software-project.html">more about it</a>):</p><ul> <li><p>Strict and visible principles of design.</p></li> <li><p>Continuous delivery.</p></li> <li><p>Traceability of changes.</p></li> <li><p>Self-documented source code.</p></li> <li><p>Strict rules of code formatting.</p></li></ul><p>What doesn&#39;t matter:</p><ul> <li><p>Popularity. Even if nobody is using your product, it is still eligible for this award. I don&#39;t care about popularity; quality is the key.</p></li> <li><p>Programming language. I believe that any language, used correctly, can be applied to design a high-quality product.</p></li> <li><p>Buzz and trends. Even if your project is yet another parser of command line arguments, it&#39;s still eligible for the award. I don&#39;t care about your marketing position; quality is all.</p></li></ul><p>By the way, if you want to sponsor this award and increase the bonus, <a href="mailto:me@yegor256.com">email me</a>.</p><hr/><p>158 projects submitted so far (in order of submission):</p><ul> <li><a href="https://github.com/mdbs99/AWS"><code>mdbs99/AWS</code></a></li> <li><a href="https://github.com/FagnerMartinsBrack/WebStories"><code>FagnerMartinsBrack/WebStories</code></a></li> <li><code>robertop/triumph4php</code></li> <li><a href="https://github.com/blambeau/wlang"><code>blambeau/wlang</code></a></li> <li><a href="https://github.com/alf-tool/alf-core"><code>alf-tool/alf-core</code></a> by <a href="https://github.com/blambeau"><code>@blambeau</code></a></li> <li><a href="https://github.com/siom79/japicmp"><code>siom79/japicmp</code></a></li> <li><a href="https://github.com/tunabrain/tungsten"><code>tunabrain/tungsten</code></a></li> <li><a href="https://github.com/AdamsLair/duality"><code>AdamsLair/duality</code></a></li> <li><a href="https://github.com/openra/openra"><code>openra/openra</code></a> by <a href="https://github.com/chrisforbes"><code>@chrisforbes</code></a></li> <li><code>Pacmanfan/UVDLPSlicerController</code></li> <li><a href="https://github.com/openfurther/further-open-core"><code>openfurther/further-open-core</code></a> by <a href="https://github.com/rahuofu"><code>@rahuofu</code></a></li> <li><a href="https://github.com/Bertram25/ValyriaTear"><code>Bertram25/ValyriaTear</code></a></li> <li><a href="https://github.com/odoepner/typepad"><code>odoepner/typepad</code></a></li> <li><a href="https://github.com/vladmihalcea/flexy-pool"><code>vladmihalcea/flexy-pool</code></a></li> <li><a href="https://github.com/js-cookie/js-cookie"><code>js-cookie/js-cookie</code></a> by <a href="https://github.com/FagnerMartinsBrack"><code>@FagnerMartinsBrack</code></a></li> <li><a href="https://github.com/jOOQ/jOOQ"><code>jOOQ/jOOQ</code></a> by <a href="https://github.com/lukaseder"><code>@lukaseder</code></a></li> <li><a href="https://github.com/raphw/byte-buddy"><code>raphw/byte-buddy</code></a></li> <li><a href="https://github.com/uniVocity/univocity-parsers"><code>uniVocity/univocity-parsers</code></a> by <a href="https://github.com/jbax"><code>@jbax</code></a></li> <li><a href="https://github.com/arnaudroger/SimpleFlatMapper/"><code>arnaudroger/SimpleFlatMapper</code></a></li> <li><a href="https://github.com/elBukkit/MagicPlugin"><code>elBukkit/MagicPlugin</code></a> by <a href="https://github.com/NathanWolf"><code>@NathanWolf</code></a></li> <li><a href="https://github.com/trade-manager/trade-manager"><code>trade-manager/trade-manager</code></a></li> <li><a href="https://github.com/ParaPenguin/morphix"><code>ParaPenguin/morphix</code></a></li> <li><a href="https://github.com//tzaeschke/zoodb"><code>tzaeschke/zoodb</code></a></li> <li><a href="https://github.com//tzaeschke/critbit"><code>tzaeschke/critbit</code></a></li> <li><a href="https://github.com/praveendath92/MDroid"><code>praveendath92/MDroid</code></a></li> <li><a href="https://github.com/DeqingSun/ESP8266-Dash-Button"><code>DeqingSun/ESP8266-Dash-Button</code></a></li> <li><a href="https://github.com/javamonkey/beetl2.0"><code>javamonkey/beetl2.0</code></a></li> <li><a href="https://github.com/81813780/HandyTabBar"><code>81813780/HandyTabBar</code></a></li> <li><a href="https://github.com/xionghuiCoder/clearpool"><code>xionghuiCoder/clearpool</code></a></li> <li><a href="https://github.com/android-cjj/ComicReader"><code>android-cjj/ComicReader</code></a></li> <li><a href="https://github.com/Dreampie/icedog"><code>Dreampie/icedog</code></a></li> <li><a href="https://github.com/hujiaweibujidao/TinyWeibo"><code>hujiaweibujidao/TinyWeibo</code></a></li> <li><a href="https://github.com/hujiaweibujidao/XingShan"><code>hujiaweibujidao/XingShan</code></a></li> <li><a href="https://github.com/hujiaweibujidao/WeChat4j"><code>hujiaweibujidao/WeChat4j</code></a></li> <li><a href="https://github.com/beartung/tclip-android"><code>beartung/tclip-android</code></a></li> <li><a href="https://github.com/beartung/insta-filter"><code>beartung/insta-filter</code></a></li> <li><a href="https://github.com/wewoor/ZBLOG"><code>wewoor/ZBLOG</code></a></li> <li><a href="https://github.com/gulpjs/gulp"><code>gulpjs/gulp</code></a> by <a href="https://github.com/contra"><code>@contra</code></a></li> <li><a href="https://github.com/joedayz/titanic-javaee7"><code>joedayz/titanic-javaee7</code></a></li> <li><a href="https://github.com/TheCricket/Chisel-2"><code>TheCricket/Chisel-2</code></a></li> <li><code>ddasilva/scheme-droid</code></li> <li><a href="https://github.com/chenjishi/SlideActivity"><code>chenjishi/SlideActivity</code></a></li> <li><a href="https://github.com/yazeed44/MultiImagePicker"><code>yazeed44/MultiImagePicker</code></a></li> <li><a href="https://github.com/wbotelhos/raty"><code>wbotelhos/raty</code></a></li> <li><a href="https://github.com/miku-nyan/Overchan-Android"><code>miku-nyan/Overchan-Android</code></a></li> <li><a href="https://github.com/chylex/Hardcore-Ender-Expansion"><code>chylex/Hardcore-Ender-Expansion</code></a></li> <li><a href="https://github.com/lionsoul2014/jcseg"><code>lionsoul2014/jcseg</code></a></li> <li><a href="https://github.com/yfpeng/pengyifan-bioc"><code>yfpeng/pengyifan-bioc</code></a></li> <li><a href="https://github.com/daimor/NBStudio"><code>daimor/NBStudio</code></a></li> <li><a href="https://github.com/sytolk/TaxiAndroidOpen"><code>sytolk/TaxiAndroidOpen</code></a></li> <li><a href="https://github.com/yaylas/AndroidFaceRecognizer"><code>yaylas/AndroidFaceRecognizer</code></a></li> <li><a href="https://github.com/omgware/fluid-simulator-v2"><code>omgware/fluid-simulator-v2</code></a></li> <li><a href="https://github.com/wendykierp/JTransforms"><code>wendykierp/JTransforms</code></a></li> <li><a href="https://github.com/zqq90/webit-script"><code>zqq90/webit-script</code></a></li> <li><a href="https://github.com/owasp/SecurityShepherd"><code>owasp/SecurityShepherd</code></a> by <a href="https://github.com/markdenihan"><code>@markdenihan</code></a></li> <li><a href="https://github.com/subchen/jetbrick-template-2x"><code>subchen/jetbrick-template-2x</code></a></li> <li><a href="https://github.com/subchen/snack-string"><code>subchen/snack-string</code></a></li> <li><a href="https://github.com/restorer/gloomy-dungeons-2"><code>restorer/gloomy-dungeons-2</code></a></li> <li><a href="https://github.com/restorer/Gloomy-Dungeons-3D"><code>restorer/Gloomy-Dungeons-3D</code></a></li> <li><a href="https://github.com/restorer/zame-haxe-particles"><code>restorer/zame-haxe-particles</code></a></li> <li><a href="https://github.com/mrzl/LeapMotionP5"><code>mrzl/LeapMotionP5</code></a></li> <li><a href="https://github.com/relu91/niftyeditor"><code>relu91/niftyeditor</code></a></li> <li><a href="https://github.com/bparmentier/OpenBikeSharing"><code>bparmentier/OpenBikeSharing</code></a></li> <li><a href="https://github.com/graphhopper/graphhopper/"><code>graphhopper/graphhopper</code></a> by <a href="https://github.com/karussell"><code>@karussell</code></a></li> <li><a href="https://github.com/t-oster/VisiCut"><code>t-oster/VisiCut</code></a></li> <li><a href="https://github.com/arnaudroger/SimpleFlatMapper"><code>arnaudroger/SimpleFlatMapper</code></a></li> <li><a href="https://github.com/Floens/Clover"><code>Floens/Clover</code></a></li> <li><a href="https://github.com/chrisshayan/TechLooper"><code>chrisshayan/TechLooper</code></a></li> <li><a href="https://github.com/bonigarcia/dualsub"><code>bonigarcia/dualsub</code></a></li> <li><a href="https://github.com/blundell/WoodyFaceDetection"><code>blundell/WoodyFaceDetection</code></a></li> <li><a href="https://github.com/blundell/QuickSand"><code>blundell/QuickSand</code></a></li> <li><a href="https://github.com/blundell/ArrowLogger"><code>blundell/ArrowLogger</code></a></li> <li><a href="https://github.com/pushtorefresh/storio"><code>pushtorefresh/storio</code></a> by <a href="https://github.com/artem-zinnatullin"><code>@artem-zinnatullin</code></a></li> <li><a href="https://github.com/mangstadt/ez-vcard"><code>mangstadt/ez-vcard</code></a></li> <li><a href="https://github.com/jmyrland/DriSMo"><code>jmyrland/DriSMo</code></a></li> <li><a href="https://github.com/pmd/pmd"><code>pmd/pmd</code></a> by <a href="https://github.com/adangel"><code>@adangel</code></a></li> <li><a href="https://github.com/javaslang/javaslang"><code>javaslang/javaslang</code></a></li> <li><a href="https://github.com/thothbot/parallax"><code>thothbot/parallax</code></a></li> <li><a href="https://github.com/jasonycw/MemeCreator"><code>jasonycw/MemeCreator</code></a></li> <li><a href="https://github.com/jasonycw/TyphoonTycoon"><code>jasonycw/TyphoonTycoon</code></a></li> <li><a href="https://github.com/ysc/QuestionAnsweringSystem"><code>ysc/QuestionAnsweringSystem</code></a></li> <li><a href="https://github.com/ysc/word"><code>ysc/word</code></a></li> <li><a href="https://github.com/andot/hprose"><code>andot/hprose</code></a></li> <li><a href="https://github.com/guikeller/jetty-runner"><code>guikeller/jetty-runner</code></a></li> <li><a href="https://github.com/frizbog/gedcom4j"><code>frizbog/gedcom4j</code></a></li> <li><a href="https://github.com/h2oai/h2o-3"><code>h2oai/h2o-3</code></a> by <a href="https://github.com/srisatish"><code>@srisatish</code></a></li> <li><a href="https://github.com/Feng14/MiniWeChat-Server"><code>Feng14/MiniWeChat-Server</code></a></li> <li><a href="https://github.com/tianzhijiexian/ActivityOptionsICS"><code>tianzhijiexian/ActivityOptionsICS</code></a></li> <li><a href="https://github.com/swanson/stringer"><code>swanson/stringer</code></a></li> <li><a href="https://github.com/JayFang1993/DropDownMenu"><code>JayFang1993/DropDownMenu</code></a></li> <li><a href="https://github.com/AizazAZ/Android-Ultra-Photo-Selector"><code>AizazAZ/Android-Ultra-Photo-Selector</code></a></li> <li><a href="https://github.com/patilswapnilv/TerminalIDE"><code>patilswapnilv/TerminalIDE</code></a></li> <li><a href="https://github.com/zhaoqp2010/andbase"><code>zhaoqp2010/andbase</code></a></li> <li><a href="https://github.com/omry/banana"><code>omry/banana</code></a></li> <li><a href="https://github.com/jackrex/AndroidCacheFoundation"><code>jackrex/AndroidCacheFoundation</code></a></li> <li><a href="https://github.com/kaitoy/pcap4j"><code>kaitoy/pcap4j</code></a></li> <li><a href="https://github.com/rgladwell/m2e-android"><code>rgladwell/m2e-android</code></a></li> <li><a href="https://github.com/scireum/parsii"><code>scireum/parsii</code></a></li> <li><a href="https://github.com/scireum/sirius-kernel"><code>scireum/sirius-kernel</code></a></li> <li><a href="https://github.com/yazeed44/GroceryShopping"><code>yazeed44/ResizableView</code></a></li> <li><a href="https://github.com/yazeed44/GroceryShopping"><code>yazeed44/GroceryShopping</code></a></li> <li><a href="https://github.com/MindMac/AndroidAppLog"><code>MindMac/AndroidAppLog</code></a></li> <li><a href="https://github.com/kpbird/chips-edittext-library"><code>kpbird/chips-edittext-library</code></a></li> <li><a href="https://github.com/spiffyui/spiffyui"><code>spiffyui/spiffyui</code></a></li> <li><a href="https://github.com/coala-analyzer/coala"><code>coala-analyzer/coala</code></a> by <a href="https://github.com/sils1297"><code>@sils1297</code></a></li> <li><a href="https://github.com/mgarin/weblaf"><code>mgarin/weblaf</code></a></li> <li><a href="https://github.com/conductor-framework/conductor"><code>conductor-framework/conductor</code></a> by <a href="https://github.com/ddavison"><code>@ddavison</code></a></li> <li><a href="https://github.com/ctron/package-drone"><code>ctron/package-drone</code></a></li> <li><a href="https://github.com/markkerzner/FreeEed"><code>markkerzner/FreeEed</code></a></li> <li><a href="https://github.com/morris/lessql"><code>morris/lessql</code></a></li> <li><a href="https://github.com/jitlogic/zorka"><code>jitlogic/zorka</code></a></li> <li><a href="https://github.com/sdorra/angular-dashboard-framework"><code>sdorra/angular-dashboard-framework</code></a></li> <li><a href="https://github.com/iluwatar/java-design-patterns"><code>iluwatar/java-design-patterns</code></a></li> <li><a href="https://github.com/chesterbr/ruby2600"><code>chesterbr/ruby2600</code></a></li> <li><a href="https://github.com/testinfected/molecule"><code>testinfected/molecule</code></a></li> <li><a href="https://github.com/testinfected/simple-petstore"><code>testinfected/simple-petstore</code></a></li> <li><a href="https://github.com/pchab/AndroidRTC"><code>pchab/AndroidRTC</code></a></li> <li><a href="https://github.com/dolda2000/ashd"><code>dolda2000/ashd</code></a></li> <li><a href="https://github.com/MaigoAkisame/MCPDict"><code>MaigoAkisame/MCPDict</code></a></li> <li><a href="https://github.com/Ph1b/MaterialAudiobookPlayer"><code>Ph1b/MaterialAudiobookPlayer</code></a></li> <li><a href="https://github.com/SVGKit/SVGKit"><code>SVGKit/SVGKit</code></a> by <a href="https://github.com/adamgit"><code>@adamgit</code></a></li> <li><a href="https://github.com/vertigo17/Cerberus"><code>vertigo17/Cerberus</code></a> by <a href="https://github.com/bcivel"><code>@bcivel</code></a></li> <li><a href="https://github.com/jaredsburrows/OpenQuartz"><code>jaredsburrows/OpenQuartz</code></a></li> <li><a href="https://github.com/jaredsburrows/AndroidGradleTemplate"><code>jaredsburrows/AndroidGradleTemplate</code></a></li> <li><a href="https://github.com/vitalidze/traccar-web"><code>vitalidze/traccar-web</code></a></li> <li><a href="https://github.com/ReikaKalseki/ChromatiCraft"><code>ReikaKalseki/ChromatiCraft</code></a></li> <li><a href="https://github.com/ReikaKalseki/RotaryCraft"><code>ReikaKalseki/RotaryCraft</code></a></li> <li><a href="https://github.com/ReikaKalseki/DragonAPI"><code>ReikaKalseki/DragonAPI</code></a></li> <li><a href="https://github.com/jOOQ/jOOX"><code>jOOQ/jOOX</code></a> by <a href="https://github.com/lukaseder"><code>@lukaseder</code></a></li> <li><a href="https://github.com/konsoletyper/teavm"><code>konsoletyper/teavm</code></a></li> <li><a href="https://github.com/citiususc/hipster"><code>citiususc/hipster</code></a></li> <li><a href="https://github.com/katzer/cordova-plugin-local-notifications"><code>katzer/cordova-plugin-local-notifications</code></a></li> <li><a href="https://github.com/katzer/cordova-plugin-background-mode"><code>katzer/cordova-plugin-background-mode</code></a></li> <li><a href="https://github.com/katzer/cordova-plugin-email-composer"><code>katzer/cordova-plugin-email-composer</code></a></li> <li><a href="https://github.com/nivdul/actitracker-cassandra-spark"><code>nivdul/actitracker-cassandra-spark</code></a></li> <li><a href="https://github.com/LuckyJayce/MVCHelper"><code>LuckyJayce/MVCHelper</code></a></li> <li><a href="https://github.com/LuckyJayce/ViewPagerIndicator"><code>LuckyJayce/ViewPagerIndicator</code></a></li> <li><a href="https://github.com/xvik/guice-persist-orient"><code>xvik/guice-persist-orient</code></a></li> <li><a href="https://github.com/xvik/dropwizard-guicey"><code>xvik/dropwizard-guicey</code></a></li> <li><a href="https://github.com/mbosecke/pebble"><code>mbosecke/pebble</code></a></li> <li><a href="https://github.com/inklabs/kommerce-core"><code>inklabs/kommerce-core</code></a> by <a href="https://github.com/pdt256"><code>@pdt256</code></a></li> <li><a href="https://github.com/elchris/easysql"><code>elchris/easysql</code></a></li> <li><a href="https://github.com/checkstyle/checkstyle"><code>checkstyle/checkstyle</code></a> by <a href="https://github.com/romani"><code>@romani</code></a></li> <li><a href="https://github.com/mifmif/mspider"><code>mifmif/mspider</code></a></li> <li><a href="https://github.com/mifmif/Generex"><code>mifmif/Generex</code></a></li> <li><a href="https://github.com/KeldOelykke/FailFast"><code>KeldOelykke/FailFast</code></a></li> <li><a href="https://github.com/erudika/para"><code>erudika/para</code></a> by <a href="https://github.com/albogdano"><code>@albogdano</code></a></li> <li><a href="https://github.com/trautonen/coveralls-maven-plugin"><code>trautonen/coveralls-maven-plugin</code></a></li> <li><a href="https://github.com/mystilleef/eclipse4-smartsave"><code>mystilleef/eclipse4-smartsave</code></a></li> <li><a href="https://github.com/expercise/expercise"><code>expercise/expercise</code></a> by <a href="https://github.com/ufukuzun"><code>@ufukuzun</code></a></li> <li><a href="https://github.com/kbilsted/StatePrinter"><code>kbilsted/StatePrinter</code></a></li> <li><a href="https://github.com/js-cookie/java-cookie"><code>js-cookie/java-cookie</code></a> by <a href="https://github.com/FagnerMartinsBrack"><code>@FagnerMartinsBrack</code></a></li> <li><a href="https://github.com/Suseika/inflectible"><code>Suseika/inflectible</code></a></li> <li><a href="https://github.com/mp911de/lettuce"><code>mp911de/lettuce</code></a></li> <li><a href="https://github.com/hackiftekhar/IQKeyboardManager"><code>hackiftekhar/IQKeyboardManager</code></a></li> <li><a href="https://github.com/mafagafogigante/dungeon"><code>mafagafogigante/dungeon</code></a></li> <li><a href="https://github.com/colonB/Mixer"><code>colonB/Mixer</code></a> by <a href="https://github.com/kkashpur"><code>@kkashpur</code></a></li> <li><a href="https://github.com/colonB/Dorm"><code>colonB/Dorm</code></a> by <a href="https://github.com/kkashpur"><code>@kkashpur</code></a></li></ul><hr/><p><span id="11"></span></p><p>October, 4th: A few weeks ago I asked three guys, who work with me, to check every single project in this list and provide their feedback. I&#39;ve received three plain text files from them. Here they are, combined into one, with almost no corrections: <a href="/txt/2015/award-2015.txt"><code>award-2015.txt</code></a> (you can find your project there). Based on <a href="/txt/2015/award-2015.txt">their opinions</a>, I&#39;ve decided to select the following 12 projects for closer review (in alphabetic order):</p><ul> <li><a href="https://github.com/coala-analyzer/coala"><code>coala-analyzer/coala</code></a></li> <li><a href="https://github.com/checkstyle/checkstyle"><code>checkstyle/checkstyle</code></a></li> <li><a href="https://github.com/citiususc/hipster"><code>citiususc/hipster</code></a></li> <li><a href="https://github.com/gulpjs/gulp"><code>gulpjs/gulp</code></a></li> <li><a href="https://github.com/kaitoy/pcap4j"><code>kaitoy/pcap4j</code></a></li> <li><a href="https://github.com/raphw/byte-buddy"><code>raphw/byte-buddy</code></a> (added on Oct-5)</li> <li><a href="https://github.com/subchen/snack-string"><code>subchen/snack-string</code></a></li> <li><a href="https://github.com/gvlasov/inflectible"><code>gvlasov/inflectible</code></a></li> <li><a href="https://github.com/testinfected/molecule"><code>testinfected/molecule</code></a></li> <li><a href="https://github.com/trautonen/coveralls-maven-plugin"><code>trautonen/coveralls-maven-plugin</code></a></li> <li><a href="https://github.com/wbotelhos/raty"><code>wbotelhos/raty</code></a></li> <li><a href="https://github.com/xvik/guice-persist-orient"><code>xvik/guice-persist-orient</code></a></li></ul><p>I&#39;ll review them soon. The winner will be announced on the 15th of October.</p><p>October, 5th: I received an email from the author of <a href="https://github.com/raphw/byte-buddy"><code>raphw/byte-buddy</code></a>, asking me to reconsider my decision about this project. I took a quick look at why the project was filtered out and decided to include it into the list of finalists. BTW, if any of you think that your project was excluded by mistake, don&#39;t hesitate to <a href="mailto:yegor256@gmail.com">email me</a>.</p><p>October, 11th: I analyzed all 12 projects today. All of them are really good projects, that&#39;s why, in order to find the best one I was focusing on their <a href="/2015/06/08/deadly-sins-software-project.html">sins</a>, not virtues. Here is what I found, preliminary.</p><p><a href="https://github.com/coala-analyzer/coala"><code>coala-analyzer/coala</code></a> (14K Python LoC, 160K HoC)</p><ul> <li><code>None</code> is used in many places (over 400 places I found), which technically is <code>NULL</code>, and it&#39;s a serious <a href="/2014/05/13/why-null-is-bad.html">anti-pattern</a></li> <li>There are global functions, for example <code>get_language_tool_results</code> and <code>DictUtilities</code>. It is definitely a <a href="/2014/05/05/oop-alternative-to-utility-classes.html">bad idea</a> in OOP.</li> <li>Class <a href="https://github.com/coala-analyzer/coala/blob/master/coalib/misc/Constants.py"><code>Constants</code></a> is a <a href="/2015/07/06/public-static-literals.html">terrible</a> idea.</li> <li>Checking object types in runtime is a <a href="/2015/04/02/class-casting-is-anti-pattern.html">bad idea</a>, e.g. <code>ClangCountVectorCreator.py</code></li> <li>What&#39;s wrong with <code>cindex.py</code>? There are almost 3200 lines of code, that&#39;s way too many.</li> <li>Static analysis is not a mandatory step in the build/release pipeline. That&#39;s why, I believe, code formatting is not consistent and sometimes rather ugly. For example, <a href="https://www.logilab.org/857"><code>pylint</code></a> reports hundreds of issues. (update: scrutinizer is used, but I still believe that a local use of pylint would seriously improve the quality of code)</li> <li>Some methods have documentation, others don&#39;t. I didn&#39;t understand the logic. Would be great to have all methods documented. Also, not all classes are documented.</li> <li>Score: 5</li></ul><p><a href="https://github.com/checkstyle/checkstyle"><code>checkstyle/checkstyle</code></a> (83K Java LoC, 553K HoC)</p><ul> <li>There are many ER-ending classes, like <a href="https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/api/SeverityLevelCounter.java"><code>SeverityLevelCounter</code></a>, <a href="https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/api/Filter.java"><code>Filter</code></a>, and <a href="https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/api/AbstractLoader.java"><code>AbstractLoader</code></a> (for example), which are <a href="/2015/03/09/objects-end-with-er.html">anti-patterns</a>.</li> <li>There is a <a href="https://github.com/checkstyle/checkstyle/tree/master/src/main/java/com/puppycrawl/tools/checkstyle/utils">whole bunch</a> of utility classes, which are <a href="/2014/05/05/oop-alternative-to-utility-classes.html">definitely</a> a bad thing in OOP. They are even grouped into a special <code>utils</code> package, such a terrible idea.</li> <li>Setters and getters are everywhere, together with immutable classes, which really are <a href="/2014/09/16/getters-and-setters-are-evil.html">not</a> an OOP thing, for example <a href="https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/checks/regexp/DetectorOptions.java"><code>DetectorOptions</code></a>.</li> <li><code>NULL</code> is actively used, in many places---it&#39;s a serious <a href="/2014/05/13/why-null-is-bad.html">anti-pattern</a></li> <li>I&#39;ve found five <code>.java</code> files with over 1000 lines in each of them, for example 2500+ in <code>ParseTreeBuilder.java</code></li> <li>There are direct commits to master made by different contributors and some of them are not linked back to any tickets. It&#39;s impossible to understand why they were made. Look at this for example: <a href="https://github.com/checkstyle/checkstyle/commit/7c5092271d95f34b5ddcb160e85ea460daaadb5d"><code>7c50922</code></a>. Was there a discussion involved? Who made a decision? Not clear at all.</li> <li><a href="https://github.com/checkstyle/checkstyle/releases">Releases</a> are not documented at all.</li> <li>Release procedure is not automated. At least I didn&#39;t find any release script in the repository.</li> <li>Score: 3</li></ul><p><a href="https://github.com/citiususc/hipster"><code>citiususc/hipster</code></a> (5K Java LoC, 64K HoC)</p><ul> <li><a href="/2014/09/16/getters-and-setters-are-evil.html">Getters and setters</a> are used in many places, for example in <a href="https://github.com/citiususc/hipster/blob/1.0.X/hipster-core/src/main/java/es/usc/citius/hipster/algorithm/DepthFirstSearch.java"><code>DepthFirstSearch</code></a> and <a href="https://github.com/citiususc/hipster/blob/1.0.X/hipster-core/src/main/java/es/usc/citius/hipster/model/Transition.java"><code>Transition</code></a>. Aside from that, almost all classes are mutable and are used as transfer bags for the needs of the algorithm. This is not how OOP should be used, I believe.</li> <li>There are public static methods and even <a href="/2014/05/05/oop-alternative-to-utility-classes.html">utility classes</a>, for example this one, with a funny name <a href="https://github.com/citiususc/hipster/blob/1.0.X/hipster-core/src/main/java/es/usc/citius/hipster/util/F.java"><code>F</code></a></li> <li><code>NULL</code> is used actively, especially in iterators---it&#39;s a <a href="/2014/05/13/why-null-is-bad.html">bad idea</a></li> <li>JavaDoc documentation is not consistent, some methods are documented, others aren&#39;t.</li> <li>Not all commits are linked to tickets, look at this, for example: <a href="https://github.com/citiususc/hipster/commit/8cfa5dec281d6ef6d8e38ff53458d38e83712e48"><code>8cfa5de</code></a>.</li> <li>Changes are committed directly to <code>master</code> branch, pull requests are not used at all.</li> <li>I didn&#39;t find an automated procedure for release. I found one for regular snapshot deployment to Bintray, but what about releases? Are they done manually?</li> <li>There is no static analysis, that&#39;s why the code looks messy sometimes.</li> <li>The amount of unit tests is rather small. Besides that, I didn&#39;t find a real code coverage report published anywhere.</li> <li>Score: 4</li></ul><p><a href="https://github.com/gulpjs/gulp"><code>gulpjs/gulp</code></a> (700 JS LoC)</p><ul> <li>This project is too small for the competition, just 700 lines of code. Disqualified.</li> <li>Score: 0</li></ul><p><a href="https://github.com/kaitoy/pcap4j"><code>kaitoy/pcap4j</code></a> (42K LoC, 122K HoC)</p><ul> <li>There is a <a href="https://github.com/kaitoy/pcap4j/tree/master/pcap4j-core/src/main/java/org/pcap4j/util"><code>util</code></a> package with utility classes, which are a <a href="/2014/05/05/oop-alternative-to-utility-classes.html">bad practice</a></li> <li><code>NULL</code> is used in mutable objects, for example in <a href="https://github.com/kaitoy/pcap4j/blob/master/pcap4j-core/src/main/java/org/pcap4j/core/AbstractPcapAddress.java"><code>AbstractPcapAddress</code></a>; it&#39;s a <a href="/2014/05/13/why-null-is-bad.html">bad idea</a></li> <li>There too many <code>static</code> methods and variables. They are literally everywhere. There is even a module called <code>pcap4j-packetfactory-static</code>, full of &quot;classes&quot; with static methods.</li> <li>JavaDoc documentation is not consistent and sometimes just incomplete, check <a href="https://github.com/kaitoy/pcap4j/blob/master/pcap4j-core/src/main/java/org/pcap4j/core/NotOpenException.java#L21-L23">this</a>, for example</li> <li>There are just a few issues and only six pull requests. Commits are not linked to issues. There is almost zero traceability of changes.</li> <li>Release procedure is not automated, <a href="https://github.com/kaitoy/pcap4j/releases">releases</a> are not documented</li> <li>There is no static analysis, that&#39;s why the code looks messy sometimes</li> <li>Score: 3</li></ul><p><a href="https://github.com/raphw/byte-buddy"><code>raphw/byte-buddy</code></a> (84K LoC, 503K HoC)</p><ul> <li>I found over 20 <code>.java</code> files with over 1000 lines of code. <a href="https://github.com/raphw/byte-buddy/blob/master/byte-buddy-dep/src/main/java/net/bytebuddy/pool/TypePool.java"><code>TypePool.java</code></a> even has 6200 lines!</li> <li>There are many <code>public static</code> <a href="/2014/05/05/oop-alternative-to-utility-classes.html">methods</a> and <a href="/2015/07/06/public-static-literals.html">properties</a>. I realize that maybe that the only way to deal with the problem domain in Java, but still...</li> <li><code>instanceof</code> is used very often, and it&#39;s a <a href="/2015/04/02/class-casting-is-anti-pattern.html">bad practice</a> in OOP. Again, I understand that problem domain may require it sometimes, but still...</li> <li>Most commits are made directly to master, without pull requests or tickets, that&#39;s why traceability of them is broken.</li> <li>Release procedure is not automated (I didn&#39;t find a script).</li> <li>Score: 5</li></ul><p><a href="https://github.com/subchen/snack-string"><code>subchen/snack-string</code></a> (1K LoC, 2K HoC)</p><ul> <li>The project is too small, disqualified.</li> <li>Score: 0</li></ul><p><a href="https://github.com/gvlasov/inflectible"><code>gvlasov/inflectible</code></a> (5K LoC, 36K HoC)</p><ul> <li>The project is rather small, right on the edge of competition requirements and is made by a single developer. Besides that I don&#39;t see any problems here. The code looks object oriented, all changes are traceable back to issues and pull requests, release procedure is automated, static analysis is mandatory, releases are documented. Thumbs up!</li> <li>Score: 10</li></ul><p><a href="https://github.com/testinfected/molecule"><code>testinfected/molecule</code></a> (10K LoC, 43K HoC)</p><ul> <li>There are a few <a href="/2014/05/05/oop-alternative-to-utility-classes.html">utility classes</a>, for example <a href="https://github.com/testinfected/molecule/blob/master/src/main/java/com/vtence/molecule/helpers/Streams.java"><code>Streams</code></a></li> <li>There are setters and getters in some classes, even through they are in a different naming convention, for example <a href="https://github.com/testinfected/molecule/blob/master/src/main/java/com/vtence/molecule/Request.java"><code>Request</code></a> and <a href="https://github.com/testinfected/molecule/blob/master/src/main/java/com/vtence/molecule/Response.java"><code>Response</code></a>.</li> <li>Most of <code>.java</code> files don&#39;t have any JavDoc blocks, and they look consistent, but then, all of a sudden, some files do have documentation, for example <a href="https://github.com/testinfected/molecule/blob/master/src/main/java/com/vtence/molecule/WebServer.java"><code>WebServer</code></a>.</li> <li>There are not so many issues and most of commits are not traceable back to any of them, for example <a href="https://github.com/testinfected/molecule/commit/b4143a0d15023c4fc259678e2f15698c77f3a76f"><code>b4143a0</code></a>---why it was made? Not clear. Also, there are almost no pull request. Looks like the author is just committing to master.</li> <li>Release procedure is not documented/automated. I didn&#39;t find it. Also, <a href="https://github.com/testinfected/molecule/releases">releases</a> are not documented at all.</li> <li>Static analysis is absent.</li> <li>Score: 6</li></ul><p><a href="https://github.com/trautonen/coveralls-maven-plugin"><code>trautonen/coveralls-maven-plugin</code></a> (4.5K LoC)</p><ul> <li>The project is too small for the competition, less than 5K lines of code. Besides that, it&#39;s younger than one year, the first commit was made in May 2015. Disqualified.</li> <li>Score: 0</li></ul><p><a href="https://github.com/wbotelhos/raty"><code>wbotelhos/raty</code></a> (8.7K LoC, 63K HoC)</p><ul> <li>There are utility classes, for example <a href="https://github.com/wbotelhos/raty/blob/master/spec/lib/helper.js"><code>helper.js</code></a></li> <li>There are global functions, for example in <a href="https://github.com/wbotelhos/raty/blob/master/spec/lib/helper.js"><code>helper.js</code></a></li> <li><a href="https://github.com/wbotelhos/raty/blob/master/spec/lib/jasmine.js"><code>jasmine.js</code></a> has 2400 lines of code, which is way too many</li> <li>I didn&#39;t understand why <code>.html</code> files stay together with <code>.js</code> in the same directory, for example <a href="https://github.com/wbotelhos/raty/blob/master/spec/run.html"><code>run.html</code></a></li> <li>Not all changes are traceable to issues, for example <a href="https://github.com/wbotelhos/raty/commit/0a233e80a843afd8579878431235c2cbbd8a453e"><code>0a233e8</code></a>. There are not so many issues in the project and just a few pull requests.</li> <li>Release procedure is not automated (at least I didn&#39;t find any documentation about it)</li> <li>There is no static analysis</li> <li>There are no unit tests</li> <li>Score: 2</li></ul><p><a href="https://github.com/xvik/guice-persist-orient"><code>xvik/guice-persist-orient</code></a> (17K LoC, 54K HoC)</p><ul> <li>There is <a href="/2014/12/01/orm-offensive-anti-pattern.html">ORM</a> and that&#39;s why <a href="/2014/09/16/getters-and-setters-are-evil.html">getters and setters</a>, for example in <a href="https://github.com/xvik/guice-persist-orient/blob/master/src/main/java/ru/vyarus/guice/persist/orient/model/VersionedEntity.java"><code>VersionedEntity</code></a></li> <li>Dependency injection is actively used, which, I believe, is a <a href="/2014/10/03/di-containers-are-evil.html">bad idea</a> in OOP in general. But in this project, I understand, it is required by the problem domain. Anyway...</li> <li>There are just a few issues and almost no pull requests, and commits are not traceable back to issues, for example this one: <a href="https://github.com/xvik/guice-persist-orient/commit/e9c8f79cf666b92f9db40ae5dbfb8678e6721c6f"><code>e9c8f79</code></a></li> <li>~~There is no static analysis~~ (static analysis is there, with a subset of Checkstyle, PMD and FindBugs checks)</li> <li>Score: 5</li></ul><p>I paid most attention to anti-patterns, which is the first and the most terrible sin we should try to avoid. Presence of <code>null</code>, for example, much more seriously affected the score than the absence of an automated release procedure.</p><p>Oct 15: Thus, we have these best projects, out of 158 submitted to the competition:</p><ol> <li><a href="https://github.com/gvlasov/inflectible"><code>gvlasov/inflectible</code></a>: <strong>winner!</strong></li> <li><a href="https://github.com/testinfected/molecule"><code>testinfected/molecule</code></a></li> <li><a href="https://github.com/coala-analyzer/coala"><code>coala-analyzer/coala</code></a></li> <li><a href="https://github.com/xvik/guice-persist-orient"><code>xvik/guice-persist-orient</code></a></li> <li><a href="https://github.com/raphw/byte-buddy"><code>raphw/byte-buddy</code></a></li> <li><a href="https://github.com/citiususc/hipster"><code>citiususc/hipster</code></a></li> <li><a href="https://github.com/checkstyle/checkstyle"><code>checkstyle/checkstyle</code></a></li> <li><a href="https://github.com/kaitoy/pcap4j"><code>kaitoy/pcap4j</code></a></li> </ol><p>Congratulations to <a href="https://github.com/gvlasov"><code>@gvlasov</code></a>, the winner! Here is your badge:</p><p><img src="//img.teamed.io/award/2015/winner.png" style="width:203px;height:45px;" alt='winner'/></p><p>Put this code into GitHub <code>README</code>:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>&lt;a href=&quot;<a href="http://www.yegor256.com/2015/04/16/award.html">http://www.yegor256.com/2015/04/16/award.html</a>&quot;&gt;
  &lt;img src=&quot;//img.teamed.io/award/2015/winner.png&quot;
  style=&quot;width:203px;height:45px;&quot; alt=&#39;winner&#39;/&gt;&lt;/a&gt;</code></pre></figure><p>All eight projects will receive a one-user free one-year license for one JetBrains product. I will email you all and we&#39;ll figure out how to transfer them.</p><p>Thanks to everybody for participation! See you <a href="/2015/10/17/award-2016.html">next year</a>.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/04/16/award.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/04/16/award.html&amp;text=Software+Quality+Award%2C+2015" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/04/16/award.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/04/16/award.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/04/16/award.html%3F2015-15&amp;title=Software+Quality+Award%2C+2015" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/04/16/award.html%3F2015-15&amp;t=Software+Quality+Award%2C+2015" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div > <figure class='badge'><img src='https://www.yegor256.com/images/andreea/quality-award.svg' style='width:300px;max-width:100%;' alt='badge'/></figure><p>I&#39;m a big fan of rules and discipline in software development; as an example, see <a href="/2014/10/26/hacker-vs-programmer-mentality.html">Are You a Hacker or a Designer?</a>. Also, I&#39;m a big fan of object-oriented programming in its purest form; for example, see <a href="/2014/11/20/seven-virtues-of-good-object.html">Seven Virtues of a Good Object</a>. I&#39;m also a co-founder and the CEO of <a href="http://www.zerocracy.com">Zerocracy</a>, a software development company through which I put my admiration of discipline and clean design into practice.</p><p>I want to encourage you to share my passion---not just by reading this blog but through making real <a href="/2015/12/22/why-dont-you-contribute-to-open-source.html">open source software</a> in a disciplined way. This award is for those who are brave enough to swim against the current and value quality above everything else.</p><p><a href="/award.html">Send me</a> your own project for review and participate in the contest.</p><p>Rules:</p><ul> <li><p>One person can submit up to three projects.</p></li> <li><p>Submissions are <strike>accepted until the <strong>September 1, 2015</strong></strike> closed.</p></li> <li><p>Submissions must be sent via email to <a href="mailto:me@yegor256.com"><a href="mailto:me@yegor256.com">me@yegor256.com</a></a>. All I need is your GitHub login and repository name; I will check the commit history to make sure you&#39;re the main contributor to the project.</p></li> <li><p>I reserve the right to reject any submission without explanation.</p></li> <li><p>All submissions will be published on this page (including rejected ones).</p></li> <li><p>Results will be announced <strong>October 15</strong> on this page and by email.</p></li> <li><p>The best project will receive <strong>$4,096</strong>.</p></li> <li><p>The best 8 projects will receive 1-year open source licenses to any <a href="https://www.jetbrains.com/products.html">JetBrains</a> products (one license per project).</p></li> <li><p>Final decisions will be made by me and are not negotiable (although I may invite other people to help me make the right decision).</p></li></ul><figure class='badge'><a href='http://www.jetbrains.com'><img src='https://www.yegor256.com/images/2015/06/jetbrains-logo.gif' style='width:128px;max-width:100%;' alt='badge'/></a></figure><p>Each project must be:</p><ul> <li><p>Open source (in GitHub).</p></li> <li><p>At least 5,000 lines of code.</p></li> <li><p>At least one year old.</p></li> <li><p>Object-oriented (that&#39;s the only thing I understand).</p></li></ul><p>The best projects will feature (<a href="/2015/06/08/deadly-sins-software-project.html">more about it</a>):</p><ul> <li><p>Strict and visible principles of design.</p></li> <li><p>Continuous delivery.</p></li> <li><p>Traceability of changes.</p></li> <li><p>Self-documented source code.</p></li> <li><p>Strict rules of code formatting.</p></li></ul><p>What doesn&#39;t matter:</p><ul> <li><p>Popularity. Even if nobody is using your product, it is still eligible for this award. I don&#39;t care about popularity; quality is the key.</p></li> <li><p>Programming language. I believe that any language, used correctly, can be applied to design a high-quality product.</p></li> <li><p>Buzz and trends. Even if your project is yet another parser of command line arguments, it&#39;s still eligible for the award. I don&#39;t care about your marketing position; quality is all.</p></li></ul><p>By the way, if you want to sponsor this award and increase the bonus, <a href="mailto:me@yegor256.com">email me</a>.</p><hr/><p>158 projects submitted so far (in order of submission):</p><ul> <li><a href="https://github.com/mdbs99/AWS"><code>mdbs99/AWS</code></a></li> <li><a href="https://github.com/FagnerMartinsBrack/WebStories"><code>FagnerMartinsBrack/WebStories</code></a></li> <li><code>robertop/triumph4php</code></li> <li><a href="https://github.com/blambeau/wlang"><code>blambeau/wlang</code></a></li> <li><a href="https://github.com/alf-tool/alf-core"><code>alf-tool/alf-core</code></a> by <a href="https://github.com/blambeau"><code>@blambeau</code></a></li> <li><a href="https://github.com/siom79/japicmp"><code>siom79/japicmp</code></a></li> <li><a href="https://github.com/tunabrain/tungsten"><code>tunabrain/tungsten</code></a></li> <li><a href="https://github.com/AdamsLair/duality"><code>AdamsLair/duality</code></a></li> <li><a href="https://github.com/openra/openra"><code>openra/openra</code></a> by <a href="https://github.com/chrisforbes"><code>@chrisforbes</code></a></li> <li><code>Pacmanfan/UVDLPSlicerController</code></li> <li><a href="https://github.com/openfurther/further-open-core"><code>openfurther/further-open-core</code></a> by <a href="https://github.com/rahuofu"><code>@rahuofu</code></a></li> <li><a href="https://github.com/Bertram25/ValyriaTear"><code>Bertram25/ValyriaTear</code></a></li> <li><a href="https://github.com/odoepner/typepad"><code>odoepner/typepad</code></a></li> <li><a href="https://github.com/vladmihalcea/flexy-pool"><code>vladmihalcea/flexy-pool</code></a></li> <li><a href="https://github.com/js-cookie/js-cookie"><code>js-cookie/js-cookie</code></a> by <a href="https://github.com/FagnerMartinsBrack"><code>@FagnerMartinsBrack</code></a></li> <li><a href="https://github.com/jOOQ/jOOQ"><code>jOOQ/jOOQ</code></a> by <a href="https://github.com/lukaseder"><code>@lukaseder</code></a></li> <li><a href="https://github.com/raphw/byte-buddy"><code>raphw/byte-buddy</code></a></li> <li><a href="https://github.com/uniVocity/univocity-parsers"><code>uniVocity/univocity-parsers</code></a> by <a href="https://github.com/jbax"><code>@jbax</code></a></li> <li><a href="https://github.com/arnaudroger/SimpleFlatMapper/"><code>arnaudroger/SimpleFlatMapper</code></a></li> <li><a href="https://github.com/elBukkit/MagicPlugin"><code>elBukkit/MagicPlugin</code></a> by <a href="https://github.com/NathanWolf"><code>@NathanWolf</code></a></li> <li><a href="https://github.com/trade-manager/trade-manager"><code>trade-manager/trade-manager</code></a></li> <li><a href="https://github.com/ParaPenguin/morphix"><code>ParaPenguin/morphix</code></a></li> <li><a href="https://github.com//tzaeschke/zoodb"><code>tzaeschke/zoodb</code></a></li> <li><a href="https://github.com//tzaeschke/critbit"><code>tzaeschke/critbit</code></a></li> <li><a href="https://github.com/praveendath92/MDroid"><code>praveendath92/MDroid</code></a></li> <li><a href="https://github.com/DeqingSun/ESP8266-Dash-Button"><code>DeqingSun/ESP8266-Dash-Button</code></a></li> <li><a href="https://github.com/javamonkey/beetl2.0"><code>javamonkey/beetl2.0</code></a></li> <li><a href="https://github.com/81813780/HandyTabBar"><code>81813780/HandyTabBar</code></a></li> <li><a href="https://github.com/xionghuiCoder/clearpool"><code>xionghuiCoder/clearpool</code></a></li> <li><a href="https://github.com/android-cjj/ComicReader"><code>android-cjj/ComicReader</code></a></li> <li><a href="https://github.com/Dreampie/icedog"><code>Dreampie/icedog</code></a></li> <li><a href="https://github.com/hujiaweibujidao/TinyWeibo"><code>hujiaweibujidao/TinyWeibo</code></a></li> <li><a href="https://github.com/hujiaweibujidao/XingShan"><code>hujiaweibujidao/XingShan</code></a></li> <li><a href="https://github.com/hujiaweibujidao/WeChat4j"><code>hujiaweibujidao/WeChat4j</code></a></li> <li><a href="https://github.com/beartung/tclip-android"><code>beartung/tclip-android</code></a></li> <li><a href="https://github.com/beartung/insta-filter"><code>beartung/insta-filter</code></a></li> <li><a href="https://github.com/wewoor/ZBLOG"><code>wewoor/ZBLOG</code></a></li> <li><a href="https://github.com/gulpjs/gulp"><code>gulpjs/gulp</code></a> by <a href="https://github.com/contra"><code>@contra</code></a></li> <li><a href="https://github.com/joedayz/titanic-javaee7"><code>joedayz/titanic-javaee7</code></a></li> <li><a href="https://github.com/TheCricket/Chisel-2"><code>TheCricket/Chisel-2</code></a></li> <li><code>ddasilva/scheme-droid</code></li> <li><a href="https://github.com/chenjishi/SlideActivity"><code>chenjishi/SlideActivity</code></a></li> <li><a href="https://github.com/yazeed44/MultiImagePicker"><code>yazeed44/MultiImagePicker</code></a></li> <li><a href="https://github.com/wbotelhos/raty"><code>wbotelhos/raty</code></a></li> <li><a href="https://github.com/miku-nyan/Overchan-Android"><code>miku-nyan/Overchan-Android</code></a></li> <li><a href="https://github.com/chylex/Hardcore-Ender-Expansion"><code>chylex/Hardcore-Ender-Expansion</code></a></li> <li><a href="https://github.com/lionsoul2014/jcseg"><code>lionsoul2014/jcseg</code></a></li> <li><a href="https://github.com/yfpeng/pengyifan-bioc"><code>yfpeng/pengyifan-bioc</code></a></li> <li><a href="https://github.com/daimor/NBStudio"><code>daimor/NBStudio</code></a></li> <li><a href="https://github.com/sytolk/TaxiAndroidOpen"><code>sytolk/TaxiAndroidOpen</code></a></li> <li><a href="https://github.com/yaylas/AndroidFaceRecognizer"><code>yaylas/AndroidFaceRecognizer</code></a></li> <li><a href="https://github.com/omgware/fluid-simulator-v2"><code>omgware/fluid-simulator-v2</code></a></li> <li><a href="https://github.com/wendykierp/JTransforms"><code>wendykierp/JTransforms</code></a></li> <li><a href="https://github.com/zqq90/webit-script"><code>zqq90/webit-script</code></a></li> <li><a href="https://github.com/owasp/SecurityShepherd"><code>owasp/SecurityShepherd</code></a> by <a href="https://github.com/markdenihan"><code>@markdenihan</code></a></li> <li><a href="https://github.com/subchen/jetbrick-template-2x"><code>subchen/jetbrick-template-2x</code></a></li> <li><a href="https://github.com/subchen/snack-string"><code>subchen/snack-string</code></a></li> <li><a href="https://github.com/restorer/gloomy-dungeons-2"><code>restorer/gloomy-dungeons-2</code></a></li> <li><a href="https://github.com/restorer/Gloomy-Dungeons-3D"><code>restorer/Gloomy-Dungeons-3D</code></a></li> <li><a href="https://github.com/restorer/zame-haxe-particles"><code>restorer/zame-haxe-particles</code></a></li> <li><a href="https://github.com/mrzl/LeapMotionP5"><code>mrzl/LeapMotionP5</code></a></li> <li><a href="https://github.com/relu91/niftyeditor"><code>relu91/niftyeditor</code></a></li> <li><a href="https://github.com/bparmentier/OpenBikeSharing"><code>bparmentier/OpenBikeSharing</code></a></li> <li><a href="https://github.com/graphhopper/graphhopper/"><code>graphhopper/graphhopper</code></a> by <a href="https://github.com/karussell"><code>@karussell</code></a></li> <li><a href="https://github.com/t-oster/VisiCut"><code>t-oster/VisiCut</code></a></li> <li><a href="https://github.com/arnaudroger/SimpleFlatMapper"><code>arnaudroger/SimpleFlatMapper</code></a></li> <li><a href="https://github.com/Floens/Clover"><code>Floens/Clover</code></a></li> <li><a href="https://github.com/chrisshayan/TechLooper"><code>chrisshayan/TechLooper</code></a></li> <li><a href="https://github.com/bonigarcia/dualsub"><code>bonigarcia/dualsub</code></a></li> <li><a href="https://github.com/blundell/WoodyFaceDetection"><code>blundell/WoodyFaceDetection</code></a></li> <li><a href="https://github.com/blundell/QuickSand"><code>blundell/QuickSand</code></a></li> <li><a href="https://github.com/blundell/ArrowLogger"><code>blundell/ArrowLogger</code></a></li> <li><a href="https://github.com/pushtorefresh/storio"><code>pushtorefresh/storio</code></a> by <a href="https://github.com/artem-zinnatullin"><code>@artem-zinnatullin</code></a></li> <li><a href="https://github.com/mangstadt/ez-vcard"><code>mangstadt/ez-vcard</code></a></li> <li><a href="https://github.com/jmyrland/DriSMo"><code>jmyrland/DriSMo</code></a></li> <li><a href="https://github.com/pmd/pmd"><code>pmd/pmd</code></a> by <a href="https://github.com/adangel"><code>@adangel</code></a></li> <li><a href="https://github.com/javaslang/javaslang"><code>javaslang/javaslang</code></a></li> <li><a href="https://github.com/thothbot/parallax"><code>thothbot/parallax</code></a></li> <li><a href="https://github.com/jasonycw/MemeCreator"><code>jasonycw/MemeCreator</code></a></li> <li><a href="https://github.com/jasonycw/TyphoonTycoon"><code>jasonycw/TyphoonTycoon</code></a></li> <li><a href="https://github.com/ysc/QuestionAnsweringSystem"><code>ysc/QuestionAnsweringSystem</code></a></li> <li><a href="https://github.com/ysc/word"><code>ysc/word</code></a></li> <li><a href="https://github.com/andot/hprose"><code>andot/hprose</code></a></li> <li><a href="https://github.com/guikeller/jetty-runner"><code>guikeller/jetty-runner</code></a></li> <li><a href="https://github.com/frizbog/gedcom4j"><code>frizbog/gedcom4j</code></a></li> <li><a href="https://github.com/h2oai/h2o-3"><code>h2oai/h2o-3</code></a> by <a href="https://github.com/srisatish"><code>@srisatish</code></a></li> <li><a href="https://github.com/Feng14/MiniWeChat-Server"><code>Feng14/MiniWeChat-Server</code></a></li> <li><a href="https://github.com/tianzhijiexian/ActivityOptionsICS"><code>tianzhijiexian/ActivityOptionsICS</code></a></li> <li><a href="https://github.com/swanson/stringer"><code>swanson/stringer</code></a></li> <li><a href="https://github.com/JayFang1993/DropDownMenu"><code>JayFang1993/DropDownMenu</code></a></li> <li><a href="https://github.com/AizazAZ/Android-Ultra-Photo-Selector"><code>AizazAZ/Android-Ultra-Photo-Selector</code></a></li> <li><a href="https://github.com/patilswapnilv/TerminalIDE"><code>patilswapnilv/TerminalIDE</code></a></li> <li><a href="https://github.com/zhaoqp2010/andbase"><code>zhaoqp2010/andbase</code></a></li> <li><a href="https://github.com/omry/banana"><code>omry/banana</code></a></li> <li><a href="https://github.com/jackrex/AndroidCacheFoundation"><code>jackrex/AndroidCacheFoundation</code></a></li> <li><a href="https://github.com/kaitoy/pcap4j"><code>kaitoy/pcap4j</code></a></li> <li><a href="https://github.com/rgladwell/m2e-android"><code>rgladwell/m2e-android</code></a></li> <li><a href="https://github.com/scireum/parsii"><code>scireum/parsii</code></a></li> <li><a href="https://github.com/scireum/sirius-kernel"><code>scireum/sirius-kernel</code></a></li> <li><a href="https://github.com/yazeed44/GroceryShopping"><code>yazeed44/ResizableView</code></a></li> <li><a href="https://github.com/yazeed44/GroceryShopping"><code>yazeed44/GroceryShopping</code></a></li> <li><a href="https://github.com/MindMac/AndroidAppLog"><code>MindMac/AndroidAppLog</code></a></li> <li><a href="https://github.com/kpbird/chips-edittext-library"><code>kpbird/chips-edittext-library</code></a></li> <li><a href="https://github.com/spiffyui/spiffyui"><code>spiffyui/spiffyui</code></a></li> <li><a href="https://github.com/coala-analyzer/coala"><code>coala-analyzer/coala</code></a> by <a href="https://github.com/sils1297"><code>@sils1297</code></a></li> <li><a href="https://github.com/mgarin/weblaf"><code>mgarin/weblaf</code></a></li> <li><a href="https://github.com/conductor-framework/conductor"><code>conductor-framework/conductor</code></a> by <a href="https://github.com/ddavison"><code>@ddavison</code></a></li> <li><a href="https://github.com/ctron/package-drone"><code>ctron/package-drone</code></a></li> <li><a href="https://github.com/markkerzner/FreeEed"><code>markkerzner/FreeEed</code></a></li> <li><a href="https://github.com/morris/lessql"><code>morris/lessql</code></a></li> <li><a href="https://github.com/jitlogic/zorka"><code>jitlogic/zorka</code></a></li> <li><a href="https://github.com/sdorra/angular-dashboard-framework"><code>sdorra/angular-dashboard-framework</code></a></li> <li><a href="https://github.com/iluwatar/java-design-patterns"><code>iluwatar/java-design-patterns</code></a></li> <li><a href="https://github.com/chesterbr/ruby2600"><code>chesterbr/ruby2600</code></a></li> <li><a href="https://github.com/testinfected/molecule"><code>testinfected/molecule</code></a></li> <li><a href="https://github.com/testinfected/simple-petstore"><code>testinfected/simple-petstore</code></a></li> <li><a href="https://github.com/pchab/AndroidRTC"><code>pchab/AndroidRTC</code></a></li> <li><a href="https://github.com/dolda2000/ashd"><code>dolda2000/ashd</code></a></li> <li><a href="https://github.com/MaigoAkisame/MCPDict"><code>MaigoAkisame/MCPDict</code></a></li> <li><a href="https://github.com/Ph1b/MaterialAudiobookPlayer"><code>Ph1b/MaterialAudiobookPlayer</code></a></li> <li><a href="https://github.com/SVGKit/SVGKit"><code>SVGKit/SVGKit</code></a> by <a href="https://github.com/adamgit"><code>@adamgit</code></a></li> <li><a href="https://github.com/vertigo17/Cerberus"><code>vertigo17/Cerberus</code></a> by <a href="https://github.com/bcivel"><code>@bcivel</code></a></li> <li><a href="https://github.com/jaredsburrows/OpenQuartz"><code>jaredsburrows/OpenQuartz</code></a></li> <li><a href="https://github.com/jaredsburrows/AndroidGradleTemplate"><code>jaredsburrows/AndroidGradleTemplate</code></a></li> <li><a href="https://github.com/vitalidze/traccar-web"><code>vitalidze/traccar-web</code></a></li> <li><a href="https://github.com/ReikaKalseki/ChromatiCraft"><code>ReikaKalseki/ChromatiCraft</code></a></li> <li><a href="https://github.com/ReikaKalseki/RotaryCraft"><code>ReikaKalseki/RotaryCraft</code></a></li> <li><a href="https://github.com/ReikaKalseki/DragonAPI"><code>ReikaKalseki/DragonAPI</code></a></li> <li><a href="https://github.com/jOOQ/jOOX"><code>jOOQ/jOOX</code></a> by <a href="https://github.com/lukaseder"><code>@lukaseder</code></a></li> <li><a href="https://github.com/konsoletyper/teavm"><code>konsoletyper/teavm</code></a></li> <li><a href="https://github.com/citiususc/hipster"><code>citiususc/hipster</code></a></li> <li><a href="https://github.com/katzer/cordova-plugin-local-notifications"><code>katzer/cordova-plugin-local-notifications</code></a></li> <li><a href="https://github.com/katzer/cordova-plugin-background-mode"><code>katzer/cordova-plugin-background-mode</code></a></li> <li><a href="https://github.com/katzer/cordova-plugin-email-composer"><code>katzer/cordova-plugin-email-composer</code></a></li> <li><a href="https://github.com/nivdul/actitracker-cassandra-spark"><code>nivdul/actitracker-cassandra-spark</code></a></li> <li><a href="https://github.com/LuckyJayce/MVCHelper"><code>LuckyJayce/MVCHelper</code></a></li> <li><a href="https://github.com/LuckyJayce/ViewPagerIndicator"><code>LuckyJayce/ViewPagerIndicator</code></a></li> <li><a href="https://github.com/xvik/guice-persist-orient"><code>xvik/guice-persist-orient</code></a></li> <li><a href="https://github.com/xvik/dropwizard-guicey"><code>xvik/dropwizard-guicey</code></a></li> <li><a href="https://github.com/mbosecke/pebble"><code>mbosecke/pebble</code></a></li> <li><a href="https://github.com/inklabs/kommerce-core"><code>inklabs/kommerce-core</code></a> by <a href="https://github.com/pdt256"><code>@pdt256</code></a></li> <li><a href="https://github.com/elchris/easysql"><code>elchris/easysql</code></a></li> <li><a href="https://github.com/checkstyle/checkstyle"><code>checkstyle/checkstyle</code></a> by <a href="https://github.com/romani"><code>@romani</code></a></li> <li><a href="https://github.com/mifmif/mspider"><code>mifmif/mspider</code></a></li> <li><a href="https://github.com/mifmif/Generex"><code>mifmif/Generex</code></a></li> <li><a href="https://github.com/KeldOelykke/FailFast"><code>KeldOelykke/FailFast</code></a></li> <li><a href="https://github.com/erudika/para"><code>erudika/para</code></a> by <a href="https://github.com/albogdano"><code>@albogdano</code></a></li> <li><a href="https://github.com/trautonen/coveralls-maven-plugin"><code>trautonen/coveralls-maven-plugin</code></a></li> <li><a href="https://github.com/mystilleef/eclipse4-smartsave"><code>mystilleef/eclipse4-smartsave</code></a></li> <li><a href="https://github.com/expercise/expercise"><code>expercise/expercise</code></a> by <a href="https://github.com/ufukuzun"><code>@ufukuzun</code></a></li> <li><a href="https://github.com/kbilsted/StatePrinter"><code>kbilsted/StatePrinter</code></a></li> <li><a href="https://github.com/js-cookie/java-cookie"><code>js-cookie/java-cookie</code></a> by <a href="https://github.com/FagnerMartinsBrack"><code>@FagnerMartinsBrack</code></a></li> <li><a href="https://github.com/Suseika/inflectible"><code>Suseika/inflectible</code></a></li> <li><a href="https://github.com/mp911de/lettuce"><code>mp911de/lettuce</code></a></li> <li><a href="https://github.com/hackiftekhar/IQKeyboardManager"><code>hackiftekhar/IQKeyboardManager</code></a></li> <li><a href="https://github.com/mafagafogigante/dungeon"><code>mafagafogigante/dungeon</code></a></li> <li><a href="https://github.com/colonB/Mixer"><code>colonB/Mixer</code></a> by <a href="https://github.com/kkashpur"><code>@kkashpur</code></a></li> <li><a href="https://github.com/colonB/Dorm"><code>colonB/Dorm</code></a> by <a href="https://github.com/kkashpur"><code>@kkashpur</code></a></li></ul><hr/><p><span id="11"></span></p><p>October, 4th: A few weeks ago I asked three guys, who work with me, to check every single project in this list and provide their feedback. I&#39;ve received three plain text files from them. Here they are, combined into one, with almost no corrections: <a href="/txt/2015/award-2015.txt"><code>award-2015.txt</code></a> (you can find your project there). Based on <a href="/txt/2015/award-2015.txt">their opinions</a>, I&#39;ve decided to select the following 12 projects for closer review (in alphabetic order):</p><ul> <li><a href="https://github.com/coala-analyzer/coala"><code>coala-analyzer/coala</code></a></li> <li><a href="https://github.com/checkstyle/checkstyle"><code>checkstyle/checkstyle</code></a></li> <li><a href="https://github.com/citiususc/hipster"><code>citiususc/hipster</code></a></li> <li><a href="https://github.com/gulpjs/gulp"><code>gulpjs/gulp</code></a></li> <li><a href="https://github.com/kaitoy/pcap4j"><code>kaitoy/pcap4j</code></a></li> <li><a href="https://github.com/raphw/byte-buddy"><code>raphw/byte-buddy</code></a> (added on Oct-5)</li> <li><a href="https://github.com/subchen/snack-string"><code>subchen/snack-string</code></a></li> <li><a href="https://github.com/gvlasov/inflectible"><code>gvlasov/inflectible</code></a></li> <li><a href="https://github.com/testinfected/molecule"><code>testinfected/molecule</code></a></li> <li><a href="https://github.com/trautonen/coveralls-maven-plugin"><code>trautonen/coveralls-maven-plugin</code></a></li> <li><a href="https://github.com/wbotelhos/raty"><code>wbotelhos/raty</code></a></li> <li><a href="https://github.com/xvik/guice-persist-orient"><code>xvik/guice-persist-orient</code></a></li></ul><p>I&#39;ll review them soon. The winner will be announced on the 15th of October.</p><p>October, 5th: I received an email from the author of <a href="https://github.com/raphw/byte-buddy"><code>raphw/byte-buddy</code></a>, asking me to reconsider my decision about this project. I took a quick look at why the project was filtered out and decided to include it into the list of finalists. BTW, if any of you think that your project was excluded by mistake, don&#39;t hesitate to <a href="mailto:yegor256@gmail.com">email me</a>.</p><p>October, 11th: I analyzed all 12 projects today. All of them are really good projects, that&#39;s why, in order to find the best one I was focusing on their <a href="/2015/06/08/deadly-sins-software-project.html">sins</a>, not virtues. Here is what I found, preliminary.</p><p><a href="https://github.com/coala-analyzer/coala"><code>coala-analyzer/coala</code></a> (14K Python LoC, 160K HoC)</p><ul> <li><code>None</code> is used in many places (over 400 places I found), which technically is <code>NULL</code>, and it&#39;s a serious <a href="/2014/05/13/why-null-is-bad.html">anti-pattern</a></li> <li>There are global functions, for example <code>get_language_tool_results</code> and <code>DictUtilities</code>. It is definitely a <a href="/2014/05/05/oop-alternative-to-utility-classes.html">bad idea</a> in OOP.</li> <li>Class <a href="https://github.com/coala-analyzer/coala/blob/master/coalib/misc/Constants.py"><code>Constants</code></a> is a <a href="/2015/07/06/public-static-literals.html">terrible</a> idea.</li> <li>Checking object types in runtime is a <a href="/2015/04/02/class-casting-is-anti-pattern.html">bad idea</a>, e.g. <code>ClangCountVectorCreator.py</code></li> <li>What&#39;s wrong with <code>cindex.py</code>? There are almost 3200 lines of code, that&#39;s way too many.</li> <li>Static analysis is not a mandatory step in the build/release pipeline. That&#39;s why, I believe, code formatting is not consistent and sometimes rather ugly. For example, <a href="https://www.logilab.org/857"><code>pylint</code></a> reports hundreds of issues. (update: scrutinizer is used, but I still believe that a local use of pylint would seriously improve the quality of code)</li> <li>Some methods have documentation, others don&#39;t. I didn&#39;t understand the logic. Would be great to have all methods documented. Also, not all classes are documented.</li> <li>Score: 5</li></ul><p><a href="https://github.com/checkstyle/checkstyle"><code>checkstyle/checkstyle</code></a> (83K Java LoC, 553K HoC)</p><ul> <li>There are many ER-ending classes, like <a href="https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/api/SeverityLevelCounter.java"><code>SeverityLevelCounter</code></a>, <a href="https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/api/Filter.java"><code>Filter</code></a>, and <a href="https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/api/AbstractLoader.java"><code>AbstractLoader</code></a> (for example), which are <a href="/2015/03/09/objects-end-with-er.html">anti-patterns</a>.</li> <li>There is a <a href="https://github.com/checkstyle/checkstyle/tree/master/src/main/java/com/puppycrawl/tools/checkstyle/utils">whole bunch</a> of utility classes, which are <a href="/2014/05/05/oop-alternative-to-utility-classes.html">definitely</a> a bad thing in OOP. They are even grouped into a special <code>utils</code> package, such a terrible idea.</li> <li>Setters and getters are everywhere, together with immutable classes, which really are <a href="/2014/09/16/getters-and-setters-are-evil.html">not</a> an OOP thing, for example <a href="https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/checks/regexp/DetectorOptions.java"><code>DetectorOptions</code></a>.</li> <li><code>NULL</code> is actively used, in many places---it&#39;s a serious <a href="/2014/05/13/why-null-is-bad.html">anti-pattern</a></li> <li>I&#39;ve found five <code>.java</code> files with over 1000 lines in each of them, for example 2500+ in <code>ParseTreeBuilder.java</code></li> <li>There are direct commits to master made by different contributors and some of them are not linked back to any tickets. It&#39;s impossible to understand why they were made. Look at this for example: <a href="https://github.com/checkstyle/checkstyle/commit/7c5092271d95f34b5ddcb160e85ea460daaadb5d"><code>7c50922</code></a>. Was there a discussion involved? Who made a decision? Not clear at all.</li> <li><a href="https://github.com/checkstyle/checkstyle/releases">Releases</a> are not documented at all.</li> <li>Release procedure is not automated. At least I didn&#39;t find any release script in the repository.</li> <li>Score: 3</li></ul><p><a href="https://github.com/citiususc/hipster"><code>citiususc/hipster</code></a> (5K Java LoC, 64K HoC)</p><ul> <li><a href="/2014/09/16/getters-and-setters-are-evil.html">Getters and setters</a> are used in many places, for example in <a href="https://github.com/citiususc/hipster/blob/1.0.X/hipster-core/src/main/java/es/usc/citius/hipster/algorithm/DepthFirstSearch.java"><code>DepthFirstSearch</code></a> and <a href="https://github.com/citiususc/hipster/blob/1.0.X/hipster-core/src/main/java/es/usc/citius/hipster/model/Transition.java"><code>Transition</code></a>. Aside from that, almost all classes are mutable and are used as transfer bags for the needs of the algorithm. This is not how OOP should be used, I believe.</li> <li>There are public static methods and even <a href="/2014/05/05/oop-alternative-to-utility-classes.html">utility classes</a>, for example this one, with a funny name <a href="https://github.com/citiususc/hipster/blob/1.0.X/hipster-core/src/main/java/es/usc/citius/hipster/util/F.java"><code>F</code></a></li> <li><code>NULL</code> is used actively, especially in iterators---it&#39;s a <a href="/2014/05/13/why-null-is-bad.html">bad idea</a></li> <li>JavaDoc documentation is not consistent, some methods are documented, others aren&#39;t.</li> <li>Not all commits are linked to tickets, look at this, for example: <a href="https://github.com/citiususc/hipster/commit/8cfa5dec281d6ef6d8e38ff53458d38e83712e48"><code>8cfa5de</code></a>.</li> <li>Changes are committed directly to <code>master</code> branch, pull requests are not used at all.</li> <li>I didn&#39;t find an automated procedure for release. I found one for regular snapshot deployment to Bintray, but what about releases? Are they done manually?</li> <li>There is no static analysis, that&#39;s why the code looks messy sometimes.</li> <li>The amount of unit tests is rather small. Besides that, I didn&#39;t find a real code coverage report published anywhere.</li> <li>Score: 4</li></ul><p><a href="https://github.com/gulpjs/gulp"><code>gulpjs/gulp</code></a> (700 JS LoC)</p><ul> <li>This project is too small for the competition, just 700 lines of code. Disqualified.</li> <li>Score: 0</li></ul><p><a href="https://github.com/kaitoy/pcap4j"><code>kaitoy/pcap4j</code></a> (42K LoC, 122K HoC)</p><ul> <li>There is a <a href="https://github.com/kaitoy/pcap4j/tree/master/pcap4j-core/src/main/java/org/pcap4j/util"><code>util</code></a> package with utility classes, which are a <a href="/2014/05/05/oop-alternative-to-utility-classes.html">bad practice</a></li> <li><code>NULL</code> is used in mutable objects, for example in <a href="https://github.com/kaitoy/pcap4j/blob/master/pcap4j-core/src/main/java/org/pcap4j/core/AbstractPcapAddress.java"><code>AbstractPcapAddress</code></a>; it&#39;s a <a href="/2014/05/13/why-null-is-bad.html">bad idea</a></li> <li>There too many <code>static</code> methods and variables. They are literally everywhere. There is even a module called <code>pcap4j-packetfactory-static</code>, full of &quot;classes&quot; with static methods.</li> <li>JavaDoc documentation is not consistent and sometimes just incomplete, check <a href="https://github.com/kaitoy/pcap4j/blob/master/pcap4j-core/src/main/java/org/pcap4j/core/NotOpenException.java#L21-L23">this</a>, for example</li> <li>There are just a few issues and only six pull requests. Commits are not linked to issues. There is almost zero traceability of changes.</li> <li>Release procedure is not automated, <a href="https://github.com/kaitoy/pcap4j/releases">releases</a> are not documented</li> <li>There is no static analysis, that&#39;s why the code looks messy sometimes</li> <li>Score: 3</li></ul><p><a href="https://github.com/raphw/byte-buddy"><code>raphw/byte-buddy</code></a> (84K LoC, 503K HoC)</p><ul> <li>I found over 20 <code>.java</code> files with over 1000 lines of code. <a href="https://github.com/raphw/byte-buddy/blob/master/byte-buddy-dep/src/main/java/net/bytebuddy/pool/TypePool.java"><code>TypePool.java</code></a> even has 6200 lines!</li> <li>There are many <code>public static</code> <a href="/2014/05/05/oop-alternative-to-utility-classes.html">methods</a> and <a href="/2015/07/06/public-static-literals.html">properties</a>. I realize that maybe that the only way to deal with the problem domain in Java, but still...</li> <li><code>instanceof</code> is used very often, and it&#39;s a <a href="/2015/04/02/class-casting-is-anti-pattern.html">bad practice</a> in OOP. Again, I understand that problem domain may require it sometimes, but still...</li> <li>Most commits are made directly to master, without pull requests or tickets, that&#39;s why traceability of them is broken.</li> <li>Release procedure is not automated (I didn&#39;t find a script).</li> <li>Score: 5</li></ul><p><a href="https://github.com/subchen/snack-string"><code>subchen/snack-string</code></a> (1K LoC, 2K HoC)</p><ul> <li>The project is too small, disqualified.</li> <li>Score: 0</li></ul><p><a href="https://github.com/gvlasov/inflectible"><code>gvlasov/inflectible</code></a> (5K LoC, 36K HoC)</p><ul> <li>The project is rather small, right on the edge of competition requirements and is made by a single developer. Besides that I don&#39;t see any problems here. The code looks object oriented, all changes are traceable back to issues and pull requests, release procedure is automated, static analysis is mandatory, releases are documented. Thumbs up!</li> <li>Score: 10</li></ul><p><a href="https://github.com/testinfected/molecule"><code>testinfected/molecule</code></a> (10K LoC, 43K HoC)</p><ul> <li>There are a few <a href="/2014/05/05/oop-alternative-to-utility-classes.html">utility classes</a>, for example <a href="https://github.com/testinfected/molecule/blob/master/src/main/java/com/vtence/molecule/helpers/Streams.java"><code>Streams</code></a></li> <li>There are setters and getters in some classes, even through they are in a different naming convention, for example <a href="https://github.com/testinfected/molecule/blob/master/src/main/java/com/vtence/molecule/Request.java"><code>Request</code></a> and <a href="https://github.com/testinfected/molecule/blob/master/src/main/java/com/vtence/molecule/Response.java"><code>Response</code></a>.</li> <li>Most of <code>.java</code> files don&#39;t have any JavDoc blocks, and they look consistent, but then, all of a sudden, some files do have documentation, for example <a href="https://github.com/testinfected/molecule/blob/master/src/main/java/com/vtence/molecule/WebServer.java"><code>WebServer</code></a>.</li> <li>There are not so many issues and most of commits are not traceable back to any of them, for example <a href="https://github.com/testinfected/molecule/commit/b4143a0d15023c4fc259678e2f15698c77f3a76f"><code>b4143a0</code></a>---why it was made? Not clear. Also, there are almost no pull request. Looks like the author is just committing to master.</li> <li>Release procedure is not documented/automated. I didn&#39;t find it. Also, <a href="https://github.com/testinfected/molecule/releases">releases</a> are not documented at all.</li> <li>Static analysis is absent.</li> <li>Score: 6</li></ul><p><a href="https://github.com/trautonen/coveralls-maven-plugin"><code>trautonen/coveralls-maven-plugin</code></a> (4.5K LoC)</p><ul> <li>The project is too small for the competition, less than 5K lines of code. Besides that, it&#39;s younger than one year, the first commit was made in May 2015. Disqualified.</li> <li>Score: 0</li></ul><p><a href="https://github.com/wbotelhos/raty"><code>wbotelhos/raty</code></a> (8.7K LoC, 63K HoC)</p><ul> <li>There are utility classes, for example <a href="https://github.com/wbotelhos/raty/blob/master/spec/lib/helper.js"><code>helper.js</code></a></li> <li>There are global functions, for example in <a href="https://github.com/wbotelhos/raty/blob/master/spec/lib/helper.js"><code>helper.js</code></a></li> <li><a href="https://github.com/wbotelhos/raty/blob/master/spec/lib/jasmine.js"><code>jasmine.js</code></a> has 2400 lines of code, which is way too many</li> <li>I didn&#39;t understand why <code>.html</code> files stay together with <code>.js</code> in the same directory, for example <a href="https://github.com/wbotelhos/raty/blob/master/spec/run.html"><code>run.html</code></a></li> <li>Not all changes are traceable to issues, for example <a href="https://github.com/wbotelhos/raty/commit/0a233e80a843afd8579878431235c2cbbd8a453e"><code>0a233e8</code></a>. There are not so many issues in the project and just a few pull requests.</li> <li>Release procedure is not automated (at least I didn&#39;t find any documentation about it)</li> <li>There is no static analysis</li> <li>There are no unit tests</li> <li>Score: 2</li></ul><p><a href="https://github.com/xvik/guice-persist-orient"><code>xvik/guice-persist-orient</code></a> (17K LoC, 54K HoC)</p><ul> <li>There is <a href="/2014/12/01/orm-offensive-anti-pattern.html">ORM</a> and that&#39;s why <a href="/2014/09/16/getters-and-setters-are-evil.html">getters and setters</a>, for example in <a href="https://github.com/xvik/guice-persist-orient/blob/master/src/main/java/ru/vyarus/guice/persist/orient/model/VersionedEntity.java"><code>VersionedEntity</code></a></li> <li>Dependency injection is actively used, which, I believe, is a <a href="/2014/10/03/di-containers-are-evil.html">bad idea</a> in OOP in general. But in this project, I understand, it is required by the problem domain. Anyway...</li> <li>There are just a few issues and almost no pull requests, and commits are not traceable back to issues, for example this one: <a href="https://github.com/xvik/guice-persist-orient/commit/e9c8f79cf666b92f9db40ae5dbfb8678e6721c6f"><code>e9c8f79</code></a></li> <li>~~There is no static analysis~~ (static analysis is there, with a subset of Checkstyle, PMD and FindBugs checks)</li> <li>Score: 5</li></ul><p>I paid most attention to anti-patterns, which is the first and the most terrible sin we should try to avoid. Presence of <code>null</code>, for example, much more seriously affected the score than the absence of an automated release procedure.</p><p>Oct 15: Thus, we have these best projects, out of 158 submitted to the competition:</p><ol> <li><a href="https://github.com/gvlasov/inflectible"><code>gvlasov/inflectible</code></a>: <strong>winner!</strong></li> <li><a href="https://github.com/testinfected/molecule"><code>testinfected/molecule</code></a></li> <li><a href="https://github.com/coala-analyzer/coala"><code>coala-analyzer/coala</code></a></li> <li><a href="https://github.com/xvik/guice-persist-orient"><code>xvik/guice-persist-orient</code></a></li> <li><a href="https://github.com/raphw/byte-buddy"><code>raphw/byte-buddy</code></a></li> <li><a href="https://github.com/citiususc/hipster"><code>citiususc/hipster</code></a></li> <li><a href="https://github.com/checkstyle/checkstyle"><code>checkstyle/checkstyle</code></a></li> <li><a href="https://github.com/kaitoy/pcap4j"><code>kaitoy/pcap4j</code></a></li> </ol><p>Congratulations to <a href="https://github.com/gvlasov"><code>@gvlasov</code></a>, the winner! Here is your badge:</p><p><img src="//img.teamed.io/award/2015/winner.png" style="width:203px;height:45px;" alt='winner'/></p><p>Put this code into GitHub <code>README</code>:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>&lt;a href=&quot;<a href="http://www.yegor256.com/2015/04/16/award.html">http://www.yegor256.com/2015/04/16/award.html</a>&quot;&gt;
  &lt;img src=&quot;//img.teamed.io/award/2015/winner.png&quot;
  style=&quot;width:203px;height:45px;&quot; alt=&#39;winner&#39;/&gt;&lt;/a&gt;</code></pre></figure><p>All eight projects will receive a one-user free one-year license for one JetBrains product. I will email you all and we&#39;ll figure out how to transfer them.</p><p>Thanks to everybody for participation! See you <a href="/2015/10/17/award-2016.html">next year</a>.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="JAXB is a 10-year-old anti-pattern that encourages Java developers to turn their objects into dumb, passive data structures. " /> <meta name="keywords" content="jaxb alternatives, jaxb anti-pattern, jaxb is bad, jaxb marshalling, jaxb marshalling example" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-03-26 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="JAXB Is Doing It Wrong; Try Xembly"/> <meta name="twitter:description" property="og:description" content="JAXB is a 10-year-old anti-pattern that encourages Java developers to turn their objects into dumb, passive data structures. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/03/26/jaxb-vs-xembly.amp.html" /> <title>JAXB Is Doing It Wrong; Try Xembly </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html">https://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">JAXB Is Doing It Wrong; Try Xembly</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-03-26T00:00:00+00:00"> 26 March 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><figure class='badge'><a href='http://www.xembly.org'><img src='http://img.xembly.org/logo-256x256.png' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://en.wikipedia.org/wiki/Java_Architecture_for_XML_Binding">JAXB</a> is a 10-year-old Java technology that allows us to convert a Java object into an XML document (marshalling) and back (unmarshalling). This technology is based on <a href="/2014/09/16/getters-and-setters-are-evil.html">setters and getters</a> and, in my opinion, violates key principles of object-oriented programming by turning objects into <strong>passive data structures</strong>. I would recommend you use <a href="http://www.xembly.org">Xembly</a> instead for marshalling Java objects into XML documents.</p><p>This is how JAXB marshalling works. Say you have a <code>Book</code> class that needs to be marshalled into an XML document. You have to create getters and annotate them:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">javax.xml.bind.annotation.XmlElement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.xml.bind.annotation.XmlRootElement</span><span class="o">;</span>
<span class="nd">@XmlRootElement</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Book</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">isbn</span> <span class="o">=</span> <span class="n">isbn</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@XmlElement</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getIsbn</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">isbn</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@XmlElement</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTitle</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">title</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Then you create a marshaller and ask it to convert an instance of class <code>Book</code> into XML:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">Book</span> <span class="n">book</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Book</span><span class="o">(</span><span class="s">&quot;0132350882&quot;</span><span class="o">,</span> <span class="s">&quot;Clean Code&quot;</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">JAXBContext</span> <span class="n">context</span> <span class="o">=</span> <span class="n">JAXBContext</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="n">Book</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">Marshaller</span> <span class="n">marshaller</span> <span class="o">=</span> <span class="n">jaxbContext</span><span class="o">.</span><span class="na">createMarshaller</span><span class="o">();</span>
<span class="n">marshaller</span><span class="o">.</span><span class="na">marshal</span><span class="o">(</span><span class="n">book</span><span class="o">,</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">);</span></code></pre></figure><p>You should be expecting something like this in the output:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;book&gt;</span>
  <span class="nt">&lt;isbn&gt;</span>0132350882<span class="nt">&lt;/isbn&gt;</span>
  <span class="nt">&lt;title&gt;</span>Clean Code<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/book&gt;</span></code></pre></figure><p>So what&#39;s wrong with it? Pretty much the same thing that&#39;s wrong with object-relational mapping, which is explained in <a href="/2014/12/01/orm-offensive-anti-pattern.html">ORM Is an Offensive Anti-Pattern</a>. JAXB is treating an object as a bag of data, extracting the data and converting it into XML the way JAXB wants. The object has no control over this process. Therefore an object is not <a href="/2014/11/20/seven-virtues-of-good-object.html">an object</a> anymore but rather a passive bag of data.</p><p>An ideal approach would be to redesign our class <code>Book</code> this way:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Book</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">isbn</span> <span class="o">=</span> <span class="n">isbn</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toXML</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// create XML document and return</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>However, there are a few problems with this approach. First of all, there&#39;s massive code duplication. Building an XML document is a rather verbose process in Java. If every class had to re-implement it in its <code>toXML()</code> method, we would have a big problem with duplicate code.</p><p>The second problem is that we don&#39;t know exactly what type of wrapping our XML document should be delivered in. It may be a <code>String</code> or an <code>InputStream</code> or maybe an instance of <code>org.w3c.dom.Document</code>. Making many <code>toXML()</code> methods in each object would definitely be a disaster.</p><p><a href="http://www.xembly.org">Xembly</a> provides a solution. As I&#39;ve <a href="/2014/04/09/xembly-intro.html">mentioned before</a>, it is an imperative language for XML constructions and manipulations. Here is how we can implement our <code>Book</code> object with the help of Xembly:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.xembly.Directive</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Book</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">isbn</span> <span class="o">=</span> <span class="n">isbn</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Directive</span><span class="o">&gt;</span> <span class="nf">toXembly</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Directives</span><span class="o">()</span>
      <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;book&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;isbn&quot;</span><span class="o">).</span><span class="na">set</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">isbn</span><span class="o">).</span><span class="na">up</span><span class="o">()</span>
      <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">).</span><span class="na">set</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">title</span><span class="o">).</span><span class="na">up</span><span class="o">()</span>
      <span class="o">.</span><span class="na">up</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Now, in order to build an XML document, we should use this code outside the object:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">Book</span> <span class="n">book</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Book</span><span class="o">(</span><span class="s">&quot;0132350882&quot;</span><span class="o">,</span> <span class="s">&quot;Clean Code&quot;</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">String</span> <span class="n">xml</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Xembler</span><span class="o">(</span><span class="n">book</span><span class="o">.</span><span class="na">toXembly</span><span class="o">()).</span><span class="na">xml</span><span class="o">();</span></code></pre></figure><p>This <a href="http://www.xembly.org/apidocs-0.21/org/xembly/Xembler.html"><code>Xembler</code></a> class will convert Xembly directives into an XML document.</p><p>The beauty of this solution is that the internals of the object are not exposed via getters and the object is fully in charge of the XML marshalling process. In addition, the complexity of these directives may be very high---much higher than the rather cumbersome <a href="/2016/04/12/java-annotations-are-evil.html">annotations</a> of JAXB.</p><p>Xembly is an open source project, so feel free to submit your questions or corrections to <a href="https://github.com/yegor256/xembly">GitHub</a>.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html&amp;text=JAXB+Is+Doing+It+Wrong%3B+Try+Xembly" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html%3F2015-12&amp;title=JAXB+Is+Doing+It+Wrong%3B+Try+Xembly" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/03/26/jaxb-vs-xembly.html%3F2015-12&amp;t=JAXB+Is+Doing+It+Wrong%3B+Try+Xembly" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div > <figure class='badge'><a href='http://www.xembly.org'><img src='http://img.xembly.org/logo-256x256.png' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://en.wikipedia.org/wiki/Java_Architecture_for_XML_Binding">JAXB</a> is a 10-year-old Java technology that allows us to convert a Java object into an XML document (marshalling) and back (unmarshalling). This technology is based on <a href="/2014/09/16/getters-and-setters-are-evil.html">setters and getters</a> and, in my opinion, violates key principles of object-oriented programming by turning objects into <strong>passive data structures</strong>. I would recommend you use <a href="http://www.xembly.org">Xembly</a> instead for marshalling Java objects into XML documents.</p><p>This is how JAXB marshalling works. Say you have a <code>Book</code> class that needs to be marshalled into an XML document. You have to create getters and annotate them:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">javax.xml.bind.annotation.XmlElement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.xml.bind.annotation.XmlRootElement</span><span class="o">;</span>
<span class="nd">@XmlRootElement</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Book</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">isbn</span> <span class="o">=</span> <span class="n">isbn</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@XmlElement</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getIsbn</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">isbn</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@XmlElement</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTitle</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">title</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Then you create a marshaller and ask it to convert an instance of class <code>Book</code> into XML:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">Book</span> <span class="n">book</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Book</span><span class="o">(</span><span class="s">&quot;0132350882&quot;</span><span class="o">,</span> <span class="s">&quot;Clean Code&quot;</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">JAXBContext</span> <span class="n">context</span> <span class="o">=</span> <span class="n">JAXBContext</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="n">Book</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">Marshaller</span> <span class="n">marshaller</span> <span class="o">=</span> <span class="n">jaxbContext</span><span class="o">.</span><span class="na">createMarshaller</span><span class="o">();</span>
<span class="n">marshaller</span><span class="o">.</span><span class="na">marshal</span><span class="o">(</span><span class="n">book</span><span class="o">,</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">);</span></code></pre></figure><p>You should be expecting something like this in the output:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;book&gt;</span>
  <span class="nt">&lt;isbn&gt;</span>0132350882<span class="nt">&lt;/isbn&gt;</span>
  <span class="nt">&lt;title&gt;</span>Clean Code<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/book&gt;</span></code></pre></figure><p>So what&#39;s wrong with it? Pretty much the same thing that&#39;s wrong with object-relational mapping, which is explained in <a href="/2014/12/01/orm-offensive-anti-pattern.html">ORM Is an Offensive Anti-Pattern</a>. JAXB is treating an object as a bag of data, extracting the data and converting it into XML the way JAXB wants. The object has no control over this process. Therefore an object is not <a href="/2014/11/20/seven-virtues-of-good-object.html">an object</a> anymore but rather a passive bag of data.</p><p>An ideal approach would be to redesign our class <code>Book</code> this way:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Book</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">isbn</span> <span class="o">=</span> <span class="n">isbn</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toXML</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// create XML document and return</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>However, there are a few problems with this approach. First of all, there&#39;s massive code duplication. Building an XML document is a rather verbose process in Java. If every class had to re-implement it in its <code>toXML()</code> method, we would have a big problem with duplicate code.</p><p>The second problem is that we don&#39;t know exactly what type of wrapping our XML document should be delivered in. It may be a <code>String</code> or an <code>InputStream</code> or maybe an instance of <code>org.w3c.dom.Document</code>. Making many <code>toXML()</code> methods in each object would definitely be a disaster.</p><p><a href="http://www.xembly.org">Xembly</a> provides a solution. As I&#39;ve <a href="/2014/04/09/xembly-intro.html">mentioned before</a>, it is an imperative language for XML constructions and manipulations. Here is how we can implement our <code>Book</code> object with the help of Xembly:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.xembly.Directive</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Book</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">isbn</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">isbn</span> <span class="o">=</span> <span class="n">isbn</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Directive</span><span class="o">&gt;</span> <span class="nf">toXembly</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Directives</span><span class="o">()</span>
      <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;book&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;isbn&quot;</span><span class="o">).</span><span class="na">set</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">isbn</span><span class="o">).</span><span class="na">up</span><span class="o">()</span>
      <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">).</span><span class="na">set</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">title</span><span class="o">).</span><span class="na">up</span><span class="o">()</span>
      <span class="o">.</span><span class="na">up</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Now, in order to build an XML document, we should use this code outside the object:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">Book</span> <span class="n">book</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Book</span><span class="o">(</span><span class="s">&quot;0132350882&quot;</span><span class="o">,</span> <span class="s">&quot;Clean Code&quot;</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">String</span> <span class="n">xml</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Xembler</span><span class="o">(</span><span class="n">book</span><span class="o">.</span><span class="na">toXembly</span><span class="o">()).</span><span class="na">xml</span><span class="o">();</span></code></pre></figure><p>This <a href="http://www.xembly.org/apidocs-0.21/org/xembly/Xembler.html"><code>Xembler</code></a> class will convert Xembly directives into an XML document.</p><p>The beauty of this solution is that the internals of the object are not exposed via getters and the object is fully in charge of the XML marshalling process. In addition, the complexity of these directives may be very high---much higher than the rather cumbersome <a href="/2016/04/12/java-annotations-are-evil.html">annotations</a> of JAXB.</p><p>Xembly is an open source project, so feel free to submit your questions or corrections to <a href="https://github.com/yegor256/xembly">GitHub</a>.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Takes is a pure object-oriented and immutable Java web framework that turns the design and development of web applications into a pleasant and fun process. " /> <meta name="keywords" content="best java web framework, java web app framework, java web development framework, java web framework, object-oriented java web framework" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-03-22 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Java Web App Architecture In Takes Framework"/> <meta name="twitter:description" property="og:description" content="Takes is a pure object-oriented and immutable Java web framework that turns the design and development of web applications into a pleasant and fun process. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/03/22/takes-java-web-framework.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/03/22/takes-java-web-framework.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/03/22/takes-java-web-framework.amp.html" /> <title>Java Web App Architecture In Takes Framework </title> <meta name='og:image' content='https://www.yegor256.com/images/2015/03/godfather-shooting-scene.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2015/03/godfather-shooting-scene.jpg'/><meta name='og:image:width' content='1000'/> <meta name='twitter:image:width' content='1000'/><meta name='og:image:height' content='583'/> <meta name='twitter:image:height' content='583'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Making of The Godfather (1972) by Francis Ford Coppola'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/03/22/takes-java-web-framework.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/03/22/takes-java-web-framework.html">https://www.yegor256.com/2015/03/22/takes-java-web-framework.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Java Web App Architecture In Takes Framework</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-03-22T00:00:00+00:00"> 22 March 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/03/22/takes-java-web-framework.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>I used to utilize Servlets, JSP, JAX-RS, Spring Framework, Play Framework, JSF with Facelets, and a bit of Spark Framework. All of these solutions, in my humble opinion, are very far from being object-oriented and elegant. They all are full of static methods, un-testable data structures, and dirty hacks. So about a month ago, I decided to create my own Java web framework. I put a few basic principles into its foundation: 1) No <a href="/2014/05/13/why-null-is-bad.html">NULLs</a>, 2) no public <a href="/2014/05/05/oop-alternative-to-utility-classes.html">static</a> methods, 3) no <a href="/2014/06/09/objects-should-be-immutable.html">mutable</a> classes, and 4) no class casting, reflection, and <a href="/2015/04/02/class-casting-is-anti-pattern.html"><code>instanceof</code></a> operators. These four basic principles should guarantee clean code and transparent architecture. That&#39;s how the <a href="http://www.takes.org">Takes</a> framework was born. Let&#39;s see what was created and how it works.</p><figure class='jb_picture'><img itemprop='image' alt='Making of The Godfather (1972) by Francis Ford Coppola' src='/images/2015/03/godfather-shooting-scene.jpg' longdesc='#9fedcf46'/><figcaption id='9fedcf46'>Making of The Godfather (1972) by Francis Ford Coppola</figcaption></figure><h2 id="java-web-architecture-in-a-nutshell">Java Web Architecture in a Nutshell</h2><p>This is how I understand a web application architecture and its components, in simple terms.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=nheD2LNYrpk'><div class='box'> <img src='https://i.ytimg.com/vi/nheD2LNYrpk/mqdefault.jpg' alt='YouTube video #nheD2LNYrpk'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Takes, Java Web Framework, Intro (webinar #12); 2 March 2016.</div></aside><p>First, to create a web server, we should create a new <a href="http://en.wikipedia.org/wiki/Network_socket">network socket</a>, that accepts connections on a certain <a href="http://en.wikipedia.org/wiki/Port_%28computer_networking%29">TCP port</a>. Usually it is 80, but I&#39;m going to use 8080 for testing purposes. This is done in Java with the <a href="http://docs.oracle.com/javase/7/docs/api/java/net/ServerSocket.html"><code>ServerSocket</code></a> class:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">java.net.ServerSocket</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">ServerSocket</span> <span class="n">server</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ServerSocket</span><span class="o">(</span><span class="mi">8080</span><span class="o">);</span>
    <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>That&#39;s enough to start a web server. Now, the socket is ready and listening on port 8080. When someone opens <code><a href="http://localhost:8080">http://localhost:8080</a></code> in their browser, the connection will be established and the browser will spin its waiting wheel forever. Compile this snippet and try. We just built a simple web server without the use of any frameworks. We&#39;re not doing anything with incoming connections yet, but we&#39;re not rejecting them either. All of them are being lined up inside that <code>server</code> object. It&#39;s being done in a background thread; that&#39;s why we need to put that <code>while(true)</code> in afterward. Without this endless pause, the app will finish its execution immediately and the server socket will shut down.</p><p>The next step is to accept the incoming connections. In Java, that&#39;s done through a blocking call to the <code>accept()</code> method:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span></code></pre></figure><p>The method is blocking its thread and waiting until a new connection arrives. As soon as that happens, it returns an instance of <code>Socket</code>. In order to accept the next connection, we should call <code>accept()</code> again. So basically, our web server should work like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">ServerSocket</span> <span class="n">server</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ServerSocket</span><span class="o">(</span><span class="mi">8080</span><span class="o">);</span>
    <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
      <span class="kd">final</span> <span class="n">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span>
      <span class="c1">// 1. Read HTTP request from the socket</span>
      <span class="c1">// 2. Prepare an HTTP response</span>
      <span class="c1">// 3. Send HTTP response to the socket</span>
      <span class="c1">// 4. Close the socket</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>It&#39;s an endless cycle that accepts a new connection, understands it, creates a response, returns the response, and accepts a new connection again. HTTP protocol is stateless, which means the server should not remember what happened in any previous connection. All it cares about is the incoming HTTP request in this particular connection.</p><p>The HTTP request is coming from the input stream of the socket and looks like a multi-line block of text. This is what you would see if you read an input stream of the socket:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())</span>
<span class="o">);</span>
<span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="n">String</span> <span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">line</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
    <span class="k">break</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>You will see something like this:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>GET / HTTP/1.1
Host: localhost:8080
Connection: keep-alive
Cache-Control: max-age=0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,</em>/<em>;q=0.8
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.89 Safari/537.36
Accept-Encoding: gzip, deflate, sdch
Accept-Language: en-US,en;q=0.8,ru;q=0.6,uk;q=0.4</code></pre></figure><p>The client (the Google Chrome browser, for example) passes this text into the connection established. It connects to port 8080 at <code>localhost</code>, and as soon as the connection is ready, it immediately sends this text into it, then waits for a response.</p><p>Our job is to create an HTTP response using the information we get in the request. If our server is very primitive, we can basically ignore all the information in the request and just return &quot;Hello, world!&quot; to all requests (I&#39;m using <a href="https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/IOUtils.html"><code>IOUtils</code></a> for simplicity):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">java.net.Socket</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.ServerSocket</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.commons.io.IOUtils</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">ServerSocket</span> <span class="n">server</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ServerSocket</span><span class="o">(</span><span class="mi">8080</span><span class="o">);</span>
    <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">try</span> <span class="o">(</span><span class="kd">final</span> <span class="n">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="na">accept</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">IOUtils</span><span class="o">.</span><span class="na">copy</span><span class="o">(</span>
          <span class="n">IOUtils</span><span class="o">.</span><span class="na">toInputStream</span><span class="o">(</span><span class="s">&quot;HTTP/1.1 200 OK\r\n\r\nHello, world!&quot;</span><span class="o">),</span>
          <span class="n">socket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">()</span>
        <span class="o">);</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>That&#39;s it. The server is ready. Try to compile and run it. Point your browser to <code><a href="http://localhost:8080">http://localhost:8080</a></code>, and you will see <code>Hello, world!</code>:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ javac -cp commons-io.jar Foo.java
$ java -cp commons-io.jar:. Foo <span class="p">&amp;</span>
$ curl <a href="http://localhost:8080">http://localhost:8080</a> -v
* Rebuilt URL to: <a href="http://localhost:8080/">http://localhost:8080/</a>
* Connected to localhost <span class="o">(</span>::1<span class="o">)</span> port <span class="m">8080</span> <span class="o">(</span><span class="c1">#0)</span>
&gt; GET / HTTP/1.1
&gt; User-Agent: curl/7.37.1
&gt; Host: localhost:8080
&gt; Accept: */</em>
&gt;
&lt; HTTP/1.1 <span class="m">200</span> OK
* no chunk, no close, no size. Assume close to signal end
&lt;
* Closing connection <span class="m">0</span>
Hello, world!</code></pre></figure><p>That&#39;s all you need to build a web server. Now let&#39;s discuss how to make it object-oriented and composable. Let&#39;s try to see how the <a href="http://www.takes.org">Takes</a> framework was built.</p><h2 id="routing-dispatching">Routing/Dispatching</h2><p>Routing/dispatching is combined with response printing in Takes. All you need to do to create a working web application is to create a single class that implements <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/Take.html"><code>Take</code></a> interface:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.takes.Request</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.takes.Take</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkFoo</span> <span class="kd">implements</span> <span class="n">Take</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Response</span> <span class="nf">route</span><span class="o">(</span><span class="kd">final</span> <span class="n">Request</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">RsText</span><span class="o">(</span><span class="s">&quot;Hello, world!&quot;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>And now it&#39;s time to start a server:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.takes.http.Exit</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.takes.http.FtBasic</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="k">new</span> <span class="n">FtBasic</span><span class="o">(</span><span class="k">new</span> <span class="n">TkFoo</span><span class="o">(),</span> <span class="mi">8080</span><span class="o">).</span><span class="na">start</span><span class="o">(</span><span class="n">Exit</span><span class="o">.</span><span class="na">NEVER</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/http/FtBasic.html"><code>FtBasic</code></a> class does the exact same socket manipulations explained above. It starts a server socket on port 8080 and dispatches all incoming connections through an instance of <code>TkFoo</code> that we are giving to its constructor. It does this dispatching in an endless cycle, checking every second whether it&#39;s time to stop with an instance of <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/http/Exit.html"><code>Exit</code></a>. Obviously, <code>Exit.NEVER</code> always responds with, &quot;Don&#39;t stop, please.&quot;</p><h2 id="http-request">HTTP Request</h2><p>Now let&#39;s see what&#39;s inside the HTTP request arriving at <code>TkFoo</code> and what we can get out of it. This is how the <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/Request.html"><code>Request</code></a> interface is defined in <a href="http://www.takes.org">Takes</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Request</span> <span class="o">{</span>
  <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">head</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
  <span class="n">InputStream</span> <span class="nf">body</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure><p>The request is divided into two parts: the head and the body. The head contains all lines that go before the empty line that starts a body, according to HTTP specification in <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html">RFC 2616</a>. There are many useful decorators for <code>Request</code> in the framework. For example, <code>RqMethod</code> will help you get the method name from the first line of the header:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">String</span> <span class="n">method</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RqMethod</span><span class="o">(</span><span class="n">request</span><span class="o">).</span><span class="na">method</span><span class="o">();</span></code></pre></figure><p><code>RqHref</code> will help extract the query part and parse it. For example, this is the request:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">user</span><span class="o">?</span><span class="n">id</span><span class="o">=</span><span class="mi">123</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="nl">Host:</span> <span class="n">www</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">com</span></code></pre></figure><p>This code will extract that <code>123</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">RqHref</span><span class="o">(</span><span class="n">request</span><span class="o">).</span><span class="na">href</span><span class="o">().</span><span class="na">param</span><span class="o">(</span><span class="s">&quot;id&quot;</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
<span class="o">);</span></code></pre></figure><p><code>RqPrint</code> can get the entire request or its body printed as a <code>String</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RqPrint</span><span class="o">(</span><span class="n">request</span><span class="o">).</span><span class="na">printBody</span><span class="o">();</span></code></pre></figure><p>The idea here is to keep the <code>Request</code> interface simple and provide this request parsing functionality to its decorators. This approach helps the framework keep classes small and cohesive. Each decorator is very small and solid, doing exactly one thing. All of these decorators are in the <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/rq/package-summary.html"><code>org.takes.rq</code></a> package. As you already probably understand, the <code>Rq</code> prefix stands for <code>Request</code>.</p><h2 id="first-real-web-app">First Real Web App</h2><p>Let&#39;s create our first real web application, which will do something useful. I would recommend starting with an <code>Entry</code> class, which is required by Java to start an app from the command line:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.takes.http.Exit</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.takes.http.FtCli</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Entry</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="k">new</span> <span class="n">FtCli</span><span class="o">(</span><span class="k">new</span> <span class="n">TkApp</span><span class="o">(),</span> <span class="n">args</span><span class="o">).</span><span class="na">start</span><span class="o">(</span><span class="n">Exit</span><span class="o">.</span><span class="na">NEVER</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This class contains just a single <code>main()</code> static method that will be called by JVM when the app starts from the command line. As you see, it instantiates <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/http/FtCli.html"><code>FtCli</code></a>, giving it an instance of class <code>TkApp</code> and command line arguments. We&#39;ll create the <code>TkApp</code> class in a second. <code>FtCli</code> (translates to &quot;front-end with command line interface&quot;) makes an instance of the same <code>FtBasic</code>, wrapping it into a few useful decorators and configuring it according to command line arguments. For example, <code>--port=8080</code> will be converted into a <code>8080</code> port number and passed as a second argument of the <code>FtBasic</code> constructor.</p><p>The web application itself is called <code>TkApp</code> and extends <code>TsWrap</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.takes.Take</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.takes.facets.fork.FkRegex</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.takes.facets.fork.TkFork</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.takes.tk.TkWrap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.takes.tk.TkClasspath</span><span class="o">;</span>
<span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkApp</span> <span class="kd">extends</span> <span class="n">TkWrap</span> <span class="o">{</span>
  <span class="n">TkApp</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">TkApp</span><span class="o">.</span><span class="na">make</span><span class="o">());</span>
  <span class="o">}</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Take</span> <span class="nf">make</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">TkFork</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">FkRegex</span><span class="o">(</span><span class="s">&quot;/robots.txt&quot;</span><span class="o">,</span> <span class="s">&quot;&quot;</span><span class="o">),</span>
      <span class="k">new</span> <span class="n">FkRegex</span><span class="o">(</span><span class="s">&quot;/css/.<em>&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">TkClasspath</span><span class="o">()),</span>
      <span class="k">new</span> <span class="n">FkRegex</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">TkIndex</span><span class="o">())</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>We&#39;ll discuss this <code>TkFork</code> class in a minute.</p><p>If you&#39;re using Maven, this is the <code>pom.xml</code> you should start with:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&quot;<a href="http://maven.apache.org/POM/4.0.0">http://maven.apache.org/POM/4.0.0</a>&quot;</span>
  <span class="na">xmlns:xsi=</span><span class="s">&quot;<a href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>&quot;</span>
  <span class="na">xsi:schemaLocation=</span><span class="s">&quot;<a href="http://maven.apache.org/POM/4.0.0">http://maven.apache.org/POM/4.0.0</a></span>
<span class="s">    <a href="http://maven.apache.org/xsd/maven-4.0.0.xsd">http://maven.apache.org/xsd/maven-4.0.0.xsd</a>&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>foo<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>foo<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.takes<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>takes<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>0.9<span class="nt">&lt;/version&gt;</span> <span class="c">&lt;!-- check the latest in Maven Central --&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;/dependencies&gt;</span>
  <span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;finalName&gt;</span>foo<span class="nt">&lt;/finalName&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-dependency-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>copy-dependencies<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
              <span class="nt">&lt;outputDirectory&gt;</span>${project.build.directory}/deps<span class="nt">&lt;/outputDirectory&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><p>Running <code>mvn clean package</code> should build a <code>foo.jar</code> file in <code>target</code> directory and a collection of all JAR dependencies in <code>target/deps</code>. Now you can run the app from the command line:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ mvn clean package
$ java -Dfile.encoding<span class="o">=</span>UTF-8 <span class="se">&lt;/span&gt;
  -cp ./target/foo.jar:./target/deps/</em> foo.Entry --port<span class="o">=</span><span class="m">8080</span></code></pre></figure><p>The application is ready, and you can deploy it to, say, Heroku. Just create a <code>Procfile</code> file in the root of the repository and push the repo to Heroku. This is what <code>Procfile</code> should look like:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>web: java -Dfile.encoding=UTF-8 \
  -cp target/foo.jar:target/deps/* \
  foo.Entry --port=${PORT}</code></pre></figure><h2 id="tkfork"><code>TkFork</code></h2><p>This <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/facets/fork/TkFork.html"><code>TkFork</code></a> class seems to be one of the core elements of the framework. It helps route an incoming HTTP request to the right <em>take</em>. Its logic is very simple, and there are just a few lines of code inside it. It encapsulates a collection of &quot;forks,&quot; which are instances of the <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/facets/fork/Fork.html"><code>Fork</code></a> interface:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Fork</span> <span class="o">{</span>
  <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Response</span><span class="o">&gt;</span> <span class="nf">route</span><span class="o">(</span><span class="n">Request</span> <span class="n">req</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure><p>Its only <code>route()</code> method either returns an empty iterator or an iterator with a single <code>Response</code>. <code>TkFork</code> goes through all forks, calling their <code>route()</code> methods until one of them returns a response. Once that happens, <code>TkFork</code> returns this response to the caller, which is <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/http/FtBasic.html"><code>FtBasic</code></a>.</p><p>Let&#39;s create a simple fork ourselves now. For example, we want to show the status of the application when the <code>/status</code> URL is requested. Here is the code:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkApp</span> <span class="kd">extends</span> <span class="n">TkWrap</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Take</span> <span class="nf">make</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">TkFork</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Fork</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Response</span><span class="o">&gt;</span> <span class="nf">route</span><span class="o">(</span><span class="n">Request</span> <span class="n">req</span><span class="o">)</span> <span class="o">{</span>
          <span class="kd">final</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Response</span><span class="o">&gt;</span> <span class="n">responses</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;(</span><span class="mi">1</span><span class="o">);</span>
          <span class="k">if</span> <span class="o">(</span><span class="k">new</span> <span class="n">RqHref</span><span class="o">(</span><span class="n">req</span><span class="o">).</span><span class="na">href</span><span class="o">().</span><span class="na">path</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">&quot;/status&quot;</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">responses</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">TkStatus</span><span class="o">());</span>
          <span class="o">}</span>
          <span class="k">return</span> <span class="n">responses</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>I believe the logic here is clear. We either return an empty iterator or an iterator with an instance of <code>TkStatus</code> inside. If an empty iterator is returned, <code>TkFork</code> will try to find another fork in the collection that actually gets an instance of <code>Response</code>. By the way, if nothing is found and all forks return empty iterators, <code>TkFork</code> will throw a &quot;Page not found&quot; exception.</p><p>This exact logic is implemented by an out-of-the-box fork called <code>FkRegex</code>, which attempts to match a request URI path with the regular expression provided:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkApp</span> <span class="kd">extends</span> <span class="n">TkWrap</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Take</span> <span class="nf">make</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">TkFork</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">FkRegex</span><span class="o">(</span><span class="s">&quot;/status&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">TkStatus</span><span class="o">())</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>We can compose a multi-level structure of <code>TkFork</code> classes; for example:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkApp</span> <span class="kd">extends</span> <span class="n">TsWrap</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Take</span> <span class="nf">make</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">TkFork</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">FkRegex</span><span class="o">(</span>
        <span class="s">&quot;/status&quot;</span><span class="o">,</span>
        <span class="k">new</span> <span class="n">TkFork</span><span class="o">(</span>
          <span class="k">new</span> <span class="n">FkParams</span><span class="o">(</span><span class="s">&quot;f&quot;</span><span class="o">,</span> <span class="s">&quot;json&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">TkStatusJSON</span><span class="o">()),</span>
          <span class="k">new</span> <span class="n">FkParams</span><span class="o">(</span><span class="s">&quot;f&quot;</span><span class="o">,</span> <span class="s">&quot;xml&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">TkStatusXML</span><span class="o">())</span>
        <span class="o">)</span>
      <span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Again, I believe it&#39;s obvious. The instance of <code>FkRegex</code> will ask an encapsulated instance of <code>TkFork</code> to return a response, and it will try to fetch it from one that <code>FkParams</code> encapsulated. If the HTTP query is <code>/status?f=xml</code>, an instance of <code>TkStatusXML</code> will be returned.</p><h2 id="http-response">HTTP Response</h2><p>Now let&#39;s discuss the structure of the HTTP response and its object-oriented abstraction, <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/Response.html"><code>Response</code></a>. This is how the interface looks:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Response</span> <span class="o">{</span>
  <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">head</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
  <span class="n">InputStream</span> <span class="nf">body</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure><p>Looks very similar to the <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/Request.html"><code>Request</code></a>, doesn&#39;t it? Well, it&#39;s identical, mostly because the structure of the HTTP request and response is almost identical. The only difference is the first line.</p><p>There is a collection of useful decorators that help in response building. They are <a href="/2015/02/26/composable-decorators.html">composable</a>, which makes them very convenient. For example, if you want to build a response that contains an HTML page, you compose them like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkIndex</span> <span class="kd">implements</span> <span class="n">Take</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Response</span> <span class="nf">act</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">RsWithStatus</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">RsWithType</span><span class="o">(</span>
        <span class="k">new</span> <span class="n">RsWithBody</span><span class="o">(</span><span class="s">&quot;&lt;html&gt;Hello, world!&lt;/html&gt;&quot;</span><span class="o">),</span>
        <span class="s">&quot;text/html&quot;</span>
      <span class="o">),</span>
      <span class="mi">200</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>In this example, the decorator <code>RsWithBody</code> creates a response with a body but with no headers at all. Then, <code>RsWithType</code> adds the header <code>Content-Type: text/html</code> to it. Then, <code>RsWithStatus</code> makes sure the first line of the response contains <code>HTTP/1.1 200 OK</code>.</p><p>You can create your own decorators that can reuse existing ones. Take a look at how it&#39;s done in <a href="https://github.com/yegor256/rultor/blob/1.50.2/src/main/java/com/rultor/web/RsPage.java"><code>RsPage</code></a> from rultor.com.</p><h2 id="how-about-templates">How About Templates?</h2><p>Returning simple &quot;Hello, world&quot; pages is not a big problem, as we can see. But what about more complex output like HTML pages, <a href="/2015/11/16/json-vs-xml.html">XML</a> documents, JSON data sets, etc? There are a few convenient <code>Response</code> decorators that enable all of that. Let&#39;s start with <a href="http://velocity.apache.org">Velocity</a>, a simple templating engine. Well, it&#39;s not that simple. It&#39;s rather powerful, but I would suggest to use it in simple situations only. Here is how it works:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkIndex</span> <span class="kd">implements</span> <span class="n">Take</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Response</span> <span class="nf">act</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">RsVelocity</span><span class="o">(</span><span class="s">&quot;Hello, ${name}&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">,</span> <span class="s">&quot;Jeffrey&quot;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>The <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/RsVelocity.html"><code>RsVelocity</code></a> constructor accepts a single argument that has to be a Velocity template. Then, you call the <code>with()</code> method, injecting data into the Velocity context. When it&#39;s time to render the HTTP response, <code>RsVelocity</code> will &quot;evaluate&quot; the template against the context configured. Again, I would recommend you use this templating approach only for simple outputs.</p><p>For more complex HTML documents, I would recommend you use XML/XSLT in combination with Xembly. I explained this idea in a few previous posts: <a href="/2014/06/25/xml-and-xslt-in-browser.html">XML+XSLT in a Browser</a> and <a href="/2014/09/09/restful-web-sites.html">RESTful API and a Web Site in the Same URL</a>. It is simple and powerful---Java generates XML output and the XSLT processor transforms it into HTML documents. This is how we separate representation from data. The XSL stylesheet is a &quot;view&quot; and <code>TkIndex</code> is a &quot;controller,&quot; in terms of <a href="/2016/12/13/mvc-vs-oop.html">MVC</a>.</p><p>I&#39;ll write a separate article about templating with Xembly and XSL very soon.</p><p>In the meantime, we&#39;ll create decorators for <a href="http://en.wikipedia.org/wiki/Facelets">JSF/Facelets</a> and <a href="http://en.wikipedia.org/wiki/JavaServer_Pages">JSP</a> rendering in Takes. If you&#39;re interested in helping, please fork the framework and submit your pull requests.</p><h2 id="what-about-persistence">What About Persistence?</h2><p>Now, a question that comes up is what to do with persistent entities, like databases, in-memory structures, network connections, etc. My suggestion is to initialize them inside the <code>Entry</code> class and pass them as arguments into the <code>TkApp</code> constructor. Then, the <code>TkApp</code> will pass them into the constructors of custom <em>takes</em>.</p><p>For example, we have a PostgreSQL database that contains some table data that we need to render. Here is how I would initialize a connection to it in the <code>Entry</code> class (I&#39;m using a <a href="http://www.jolbox.com/">BoneCP</a> connection pool):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Entry</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="k">new</span> <span class="n">FtCli</span><span class="o">(</span><span class="k">new</span> <span class="n">TkApp</span><span class="o">(</span><span class="n">Entry</span><span class="o">.</span><span class="na">postgres</span><span class="o">()),</span> <span class="n">args</span><span class="o">).</span><span class="na">start</span><span class="o">(</span><span class="n">Exit</span><span class="o">.</span><span class="na">NEVER</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Source</span> <span class="nf">postgres</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">BoneCPDataSource</span> <span class="n">src</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BoneCPDataSource</span><span class="o">();</span>
    <span class="n">src</span><span class="o">.</span><span class="na">setDriverClass</span><span class="o">(</span><span class="s">&quot;org.postgresql.Driver&quot;</span><span class="o">);</span>
    <span class="n">src</span><span class="o">.</span><span class="na">setJdbcUrl</span><span class="o">(</span><span class="s">&quot;jdbc:postgresql://localhost/db&quot;</span><span class="o">);</span>
    <span class="n">src</span><span class="o">.</span><span class="na">setUser</span><span class="o">(</span><span class="s">&quot;root&quot;</span><span class="o">);</span>
    <span class="n">src</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">&quot;super-secret-password&quot;</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">src</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Now, the constructor of <code>TkApp</code> must accept a single argument of type <code>java.sql.Source</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkApp</span> <span class="kd">extends</span> <span class="n">TkWrap</span> <span class="o">{</span>
  <span class="n">TkApp</span><span class="o">(</span><span class="kd">final</span> <span class="n">Source</span> <span class="n">source</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">TkApp</span><span class="o">.</span><span class="na">make</span><span class="o">(</span><span class="n">source</span><span class="o">));</span>
  <span class="o">}</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Take</span> <span class="nf">make</span><span class="o">(</span><span class="kd">final</span> <span class="n">Source</span> <span class="n">source</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">TkFork</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">FkRegex</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">TkIndex</span><span class="o">(</span><span class="n">source</span><span class="o">))</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Class <code>TkIndex</code> also accepts a single argument of class <code>Source</code>. I believe you know what to do with it inside <code>TkIndex</code> in order to fetch the SQL table data and convert it into HTML. The point here is that the dependency must be injected into the application (instance of class <code>TkApp</code>) at the moment of its instantiation. This is a pure and clean dependency injection mechanism, which is absolutely container-free. Read more about it in <a href="/2014/10/03/di-containers-are-evil.html">Dependency Injection Containers Are Code Polluters</a>.</p><h2 id="unit-testing">Unit Testing</h2><p>Since every class is immutable and all dependencies are injected only through constructors, unit testing is extremely easy. Let&#39;s say we want to test <code>TkStatus</code>, which is supposed to return an HTML response (I&#39;m using <a href="http://junit.org/">JUnit 4</a> and <a href="https://github.com/hamcrest/JavaHamcrest">Hamcrest</a>):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hamcrest.MatcherAssert</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hamcrest.Matchers</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkIndexTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">returnsHtmlPage</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="n">MatcherAssert</span><span class="o">.</span><span class="na">assertThat</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">RsPrint</span><span class="o">(</span>
        <span class="k">new</span> <span class="n">TkStatus</span><span class="o">().</span><span class="na">act</span><span class="o">(</span><span class="k">new</span> <span class="n">RqFake</span><span class="o">())</span>
      <span class="o">).</span><span class="na">printBody</span><span class="o">(),</span>
      <span class="n">Matchers</span><span class="o">.</span><span class="na">equalsTo</span><span class="o">(</span><span class="s">&quot;&lt;html&gt;Hello, world!&lt;/html&gt;&quot;</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Also, we can start the entire application or any individual <em>take</em> in a test HTTP server and test its behavior via a real TCP socket; for example (I&#39;m using <a href="http://http.jcabi.com">jcabi-http</a> to make an HTTP request and check the output):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkIndexTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">returnsHtmlPage</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="k">new</span> <span class="n">FtRemote</span><span class="o">(</span><span class="k">new</span> <span class="n">TkIndex</span><span class="o">()).</span><span class="na">exec</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">FtRemote</span><span class="o">.</span><span class="na">Script</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">exec</span><span class="o">(</span><span class="kd">final</span> <span class="n">URI</span> <span class="n">home</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
          <span class="k">new</span> <span class="n">JdkRequest</span><span class="o">(</span><span class="n">home</span><span class="o">)</span>
            <span class="o">.</span><span class="na">fetch</span><span class="o">()</span>
            <span class="o">.</span><span class="na">as</span><span class="o">(</span><span class="n">RestResponse</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
            <span class="o">.</span><span class="na">assertStatus</span><span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">.</span><span class="na">HTTP_OK</span><span class="o">)</span>
            <span class="o">.</span><span class="na">assertBody</span><span class="o">(</span><span class="n">Matchers</span><span class="o">.</span><span class="na">containsString</span><span class="o">(</span><span class="s">&quot;Hello, world!&quot;</span><span class="o">));</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p><a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/http/FtRemote.html"><code>FtRemote</code></a> starts a test web server at a random TCP port and calls the <code>exec()</code> method at the provided instance of <code>FtRemote.Script</code>. The first argument of this method is a URI of the just-started web server homepage.</p><p>The architecture of Takes framework is very modular and composable. Any individual <em>take</em> can be tested as a standalone component, absolutely independent from the framework and other <em>takes</em>.</p><h2 id="why-the-name">Why the Name?</h2><p>That&#39;s the question I&#39;ve been hearing rather often. The idea is simple, and it originates from the movie business. When a movie is made, the crew shoots many <em>takes</em> in order to capture the reality and put it on film. Each capture is called a <em>take</em>.</p><p>In other words, a <em>take</em> is like a snapshot of the reality.</p><p>The same applies to this framework. Each instance of <code>Take</code> represents a reality at one particular moment in time. This reality is then sent to the user in the form of a <code>Response</code>.</p><p>PS. There are a few words about authentication: <a href="/2015/05/18/cookie-based-authentication.html">How Cookie-Based Authentication Works in the Takes Framework</a>.</p><p>PPS. There are a few real web systems, which you may be interested to take a look at. They all are using Takes Framework and their code is open: <a href="https://github.com/yegor256/rultor">rultor.com</a>, <a href="/2016/03/30/jare-instant-free-cdn.html">jare.io</a>, <a href="/2016/03/15/wring-dispatcher-github-notifications.html">wring.io</a>.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/03/22/takes-java-web-framework.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/03/22/takes-java-web-framework.html&amp;text=Java+Web+App+Architecture+In+Takes+Framework" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/03/22/takes-java-web-framework.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/03/22/takes-java-web-framework.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/03/22/takes-java-web-framework.html%3F2015-12&amp;title=Java+Web+App+Architecture+In+Takes+Framework" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/03/22/takes-java-web-framework.html%3F2015-12&amp;t=Java+Web+App+Architecture+In+Takes+Framework" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>I used to utilize Servlets, JSP, JAX-RS, Spring Framework, Play Framework, JSF with Facelets, and a bit of Spark Framework. All of these solutions, in my humble opinion, are very far from being object-oriented and elegant. They all are full of static methods, un-testable data structures, and dirty hacks. So about a month ago, I decided to create my own Java web framework. I put a few basic principles into its foundation: 1) No <a href="/2014/05/13/why-null-is-bad.html">NULLs</a>, 2) no public <a href="/2014/05/05/oop-alternative-to-utility-classes.html">static</a> methods, 3) no <a href="/2014/06/09/objects-should-be-immutable.html">mutable</a> classes, and 4) no class casting, reflection, and <a href="/2015/04/02/class-casting-is-anti-pattern.html"><code>instanceof</code></a> operators. These four basic principles should guarantee clean code and transparent architecture. That&#39;s how the <a href="http://www.takes.org">Takes</a> framework was born. Let&#39;s see what was created and how it works.</p><figure class='jb_picture'><img itemprop='image' alt='Making of The Godfather (1972) by Francis Ford Coppola' src='/images/2015/03/godfather-shooting-scene.jpg' longdesc='#9fedcf46'/><figcaption id='9fedcf46'>Making of The Godfather (1972) by Francis Ford Coppola</figcaption></figure><h2 id="java-web-architecture-in-a-nutshell">Java Web Architecture in a Nutshell</h2><p>This is how I understand a web application architecture and its components, in simple terms.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=nheD2LNYrpk'><div class='box'> <img src='https://i.ytimg.com/vi/nheD2LNYrpk/mqdefault.jpg' alt='YouTube video #nheD2LNYrpk'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Takes, Java Web Framework, Intro (webinar #12); 2 March 2016.</div></aside><p>First, to create a web server, we should create a new <a href="http://en.wikipedia.org/wiki/Network_socket">network socket</a>, that accepts connections on a certain <a href="http://en.wikipedia.org/wiki/Port_%28computer_networking%29">TCP port</a>. Usually it is 80, but I&#39;m going to use 8080 for testing purposes. This is done in Java with the <a href="http://docs.oracle.com/javase/7/docs/api/java/net/ServerSocket.html"><code>ServerSocket</code></a> class:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">java.net.ServerSocket</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">ServerSocket</span> <span class="n">server</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ServerSocket</span><span class="o">(</span><span class="mi">8080</span><span class="o">);</span>
    <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>That&#39;s enough to start a web server. Now, the socket is ready and listening on port 8080. When someone opens <code><a href="http://localhost:8080">http://localhost:8080</a></code> in their browser, the connection will be established and the browser will spin its waiting wheel forever. Compile this snippet and try. We just built a simple web server without the use of any frameworks. We&#39;re not doing anything with incoming connections yet, but we&#39;re not rejecting them either. All of them are being lined up inside that <code>server</code> object. It&#39;s being done in a background thread; that&#39;s why we need to put that <code>while(true)</code> in afterward. Without this endless pause, the app will finish its execution immediately and the server socket will shut down.</p><p>The next step is to accept the incoming connections. In Java, that&#39;s done through a blocking call to the <code>accept()</code> method:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span></code></pre></figure><p>The method is blocking its thread and waiting until a new connection arrives. As soon as that happens, it returns an instance of <code>Socket</code>. In order to accept the next connection, we should call <code>accept()</code> again. So basically, our web server should work like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">ServerSocket</span> <span class="n">server</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ServerSocket</span><span class="o">(</span><span class="mi">8080</span><span class="o">);</span>
    <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
      <span class="kd">final</span> <span class="n">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span>
      <span class="c1">// 1. Read HTTP request from the socket</span>
      <span class="c1">// 2. Prepare an HTTP response</span>
      <span class="c1">// 3. Send HTTP response to the socket</span>
      <span class="c1">// 4. Close the socket</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>It&#39;s an endless cycle that accepts a new connection, understands it, creates a response, returns the response, and accepts a new connection again. HTTP protocol is stateless, which means the server should not remember what happened in any previous connection. All it cares about is the incoming HTTP request in this particular connection.</p><p>The HTTP request is coming from the input stream of the socket and looks like a multi-line block of text. This is what you would see if you read an input stream of the socket:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())</span>
<span class="o">);</span>
<span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="n">String</span> <span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">line</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
    <span class="k">break</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>You will see something like this:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>GET / HTTP/1.1
Host: localhost:8080
Connection: keep-alive
Cache-Control: max-age=0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,<em>/</em>;q=0.8
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.89 Safari/537.36
Accept-Encoding: gzip, deflate, sdch
Accept-Language: en-US,en;q=0.8,ru;q=0.6,uk;q=0.4</code></pre></figure><p>The client (the Google Chrome browser, for example) passes this text into the connection established. It connects to port 8080 at <code>localhost</code>, and as soon as the connection is ready, it immediately sends this text into it, then waits for a response.</p><p>Our job is to create an HTTP response using the information we get in the request. If our server is very primitive, we can basically ignore all the information in the request and just return &quot;Hello, world!&quot; to all requests (I&#39;m using <a href="https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/IOUtils.html"><code>IOUtils</code></a> for simplicity):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">java.net.Socket</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.ServerSocket</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.commons.io.IOUtils</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">ServerSocket</span> <span class="n">server</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ServerSocket</span><span class="o">(</span><span class="mi">8080</span><span class="o">);</span>
    <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">try</span> <span class="o">(</span><span class="kd">final</span> <span class="n">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="na">accept</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">IOUtils</span><span class="o">.</span><span class="na">copy</span><span class="o">(</span>
          <span class="n">IOUtils</span><span class="o">.</span><span class="na">toInputStream</span><span class="o">(</span><span class="s">&quot;HTTP/1.1 200 OK\r\n\r\nHello, world!&quot;</span><span class="o">),</span>
          <span class="n">socket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">()</span>
        <span class="o">);</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>That&#39;s it. The server is ready. Try to compile and run it. Point your browser to <code><a href="http://localhost:8080">http://localhost:8080</a></code>, and you will see <code>Hello, world!</code>:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ javac -cp commons-io.jar Foo.java
$ java -cp commons-io.jar:. Foo <span class="p">&amp;</span>
$ curl <a href="http://localhost:8080">http://localhost:8080</a> -v
* Rebuilt URL to: <a href="http://localhost:8080/">http://localhost:8080/</a>
* Connected to localhost <span class="o">(</span>::1<span class="o">)</span> port <span class="m">8080</span> <span class="o">(</span><span class="c1">#0)</span>
&gt; GET / HTTP/1.1
&gt; User-Agent: curl/7.37.1
&gt; Host: localhost:8080
&gt; Accept: <em>/</em>
&gt;
&lt; HTTP/1.1 <span class="m">200</span> OK
* no chunk, no close, no size. Assume close to signal end
&lt;
* Closing connection <span class="m">0</span>
Hello, world!</code></pre></figure><p>That&#39;s all you need to build a web server. Now let&#39;s discuss how to make it object-oriented and composable. Let&#39;s try to see how the <a href="http://www.takes.org">Takes</a> framework was built.</p><h2 id="routing-dispatching">Routing/Dispatching</h2><p>Routing/dispatching is combined with response printing in Takes. All you need to do to create a working web application is to create a single class that implements <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/Take.html"><code>Take</code></a> interface:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.takes.Request</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.takes.Take</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkFoo</span> <span class="kd">implements</span> <span class="n">Take</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Response</span> <span class="nf">route</span><span class="o">(</span><span class="kd">final</span> <span class="n">Request</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">RsText</span><span class="o">(</span><span class="s">&quot;Hello, world!&quot;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>And now it&#39;s time to start a server:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.takes.http.Exit</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.takes.http.FtBasic</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="k">new</span> <span class="n">FtBasic</span><span class="o">(</span><span class="k">new</span> <span class="n">TkFoo</span><span class="o">(),</span> <span class="mi">8080</span><span class="o">).</span><span class="na">start</span><span class="o">(</span><span class="n">Exit</span><span class="o">.</span><span class="na">NEVER</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/http/FtBasic.html"><code>FtBasic</code></a> class does the exact same socket manipulations explained above. It starts a server socket on port 8080 and dispatches all incoming connections through an instance of <code>TkFoo</code> that we are giving to its constructor. It does this dispatching in an endless cycle, checking every second whether it&#39;s time to stop with an instance of <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/http/Exit.html"><code>Exit</code></a>. Obviously, <code>Exit.NEVER</code> always responds with, &quot;Don&#39;t stop, please.&quot;</p><h2 id="http-request">HTTP Request</h2><p>Now let&#39;s see what&#39;s inside the HTTP request arriving at <code>TkFoo</code> and what we can get out of it. This is how the <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/Request.html"><code>Request</code></a> interface is defined in <a href="http://www.takes.org">Takes</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Request</span> <span class="o">{</span>
  <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">head</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
  <span class="n">InputStream</span> <span class="nf">body</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure><p>The request is divided into two parts: the head and the body. The head contains all lines that go before the empty line that starts a body, according to HTTP specification in <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html">RFC 2616</a>. There are many useful decorators for <code>Request</code> in the framework. For example, <code>RqMethod</code> will help you get the method name from the first line of the header:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">String</span> <span class="n">method</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RqMethod</span><span class="o">(</span><span class="n">request</span><span class="o">).</span><span class="na">method</span><span class="o">();</span></code></pre></figure><p><code>RqHref</code> will help extract the query part and parse it. For example, this is the request:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">GET</span> <span class="o">/</span><span class="n">user</span><span class="o">?</span><span class="n">id</span><span class="o">=</span><span class="mi">123</span> <span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="nl">Host:</span> <span class="n">www</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">com</span></code></pre></figure><p>This code will extract that <code>123</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">RqHref</span><span class="o">(</span><span class="n">request</span><span class="o">).</span><span class="na">href</span><span class="o">().</span><span class="na">param</span><span class="o">(</span><span class="s">&quot;id&quot;</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
<span class="o">);</span></code></pre></figure><p><code>RqPrint</code> can get the entire request or its body printed as a <code>String</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RqPrint</span><span class="o">(</span><span class="n">request</span><span class="o">).</span><span class="na">printBody</span><span class="o">();</span></code></pre></figure><p>The idea here is to keep the <code>Request</code> interface simple and provide this request parsing functionality to its decorators. This approach helps the framework keep classes small and cohesive. Each decorator is very small and solid, doing exactly one thing. All of these decorators are in the <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/rq/package-summary.html"><code>org.takes.rq</code></a> package. As you already probably understand, the <code>Rq</code> prefix stands for <code>Request</code>.</p><h2 id="first-real-web-app">First Real Web App</h2><p>Let&#39;s create our first real web application, which will do something useful. I would recommend starting with an <code>Entry</code> class, which is required by Java to start an app from the command line:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.takes.http.Exit</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.takes.http.FtCli</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Entry</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="k">new</span> <span class="n">FtCli</span><span class="o">(</span><span class="k">new</span> <span class="n">TkApp</span><span class="o">(),</span> <span class="n">args</span><span class="o">).</span><span class="na">start</span><span class="o">(</span><span class="n">Exit</span><span class="o">.</span><span class="na">NEVER</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This class contains just a single <code>main()</code> static method that will be called by JVM when the app starts from the command line. As you see, it instantiates <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/http/FtCli.html"><code>FtCli</code></a>, giving it an instance of class <code>TkApp</code> and command line arguments. We&#39;ll create the <code>TkApp</code> class in a second. <code>FtCli</code> (translates to &quot;front-end with command line interface&quot;) makes an instance of the same <code>FtBasic</code>, wrapping it into a few useful decorators and configuring it according to command line arguments. For example, <code>--port=8080</code> will be converted into a <code>8080</code> port number and passed as a second argument of the <code>FtBasic</code> constructor.</p><p>The web application itself is called <code>TkApp</code> and extends <code>TsWrap</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.takes.Take</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.takes.facets.fork.FkRegex</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.takes.facets.fork.TkFork</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.takes.tk.TkWrap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.takes.tk.TkClasspath</span><span class="o">;</span>
<span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkApp</span> <span class="kd">extends</span> <span class="n">TkWrap</span> <span class="o">{</span>
  <span class="n">TkApp</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">TkApp</span><span class="o">.</span><span class="na">make</span><span class="o">());</span>
  <span class="o">}</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Take</span> <span class="nf">make</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">TkFork</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">FkRegex</span><span class="o">(</span><span class="s">&quot;/robots.txt&quot;</span><span class="o">,</span> <span class="s">&quot;&quot;</span><span class="o">),</span>
      <span class="k">new</span> <span class="n">FkRegex</span><span class="o">(</span><span class="s">&quot;/css/.<em>&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">TkClasspath</span><span class="o">()),</span>
      <span class="k">new</span> <span class="n">FkRegex</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">TkIndex</span><span class="o">())</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>We&#39;ll discuss this <code>TkFork</code> class in a minute.</p><p>If you&#39;re using Maven, this is the <code>pom.xml</code> you should start with:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&quot;<a href="http://maven.apache.org/POM/4.0.0">http://maven.apache.org/POM/4.0.0</a>&quot;</span>
  <span class="na">xmlns:xsi=</span><span class="s">&quot;<a href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>&quot;</span>
  <span class="na">xsi:schemaLocation=</span><span class="s">&quot;<a href="http://maven.apache.org/POM/4.0.0">http://maven.apache.org/POM/4.0.0</a></span>
<span class="s">    <a href="http://maven.apache.org/xsd/maven-4.0.0.xsd">http://maven.apache.org/xsd/maven-4.0.0.xsd</a>&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>foo<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>foo<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.takes<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>takes<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>0.9<span class="nt">&lt;/version&gt;</span> <span class="c">&lt;!-- check the latest in Maven Central --&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;/dependencies&gt;</span>
  <span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;finalName&gt;</span>foo<span class="nt">&lt;/finalName&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-dependency-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>copy-dependencies<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
              <span class="nt">&lt;outputDirectory&gt;</span>${project.build.directory}/deps<span class="nt">&lt;/outputDirectory&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><p>Running <code>mvn clean package</code> should build a <code>foo.jar</code> file in <code>target</code> directory and a collection of all JAR dependencies in <code>target/deps</code>. Now you can run the app from the command line:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ mvn clean package
$ java -Dfile.encoding<span class="o">=</span>UTF-8 <span class="se">&lt;/span&gt;
  -cp ./target/foo.jar:./target/deps/</em> foo.Entry --port<span class="o">=</span><span class="m">8080</span></code></pre></figure><p>The application is ready, and you can deploy it to, say, Heroku. Just create a <code>Procfile</code> file in the root of the repository and push the repo to Heroku. This is what <code>Procfile</code> should look like:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>web: java -Dfile.encoding=UTF-8 \
  -cp target/foo.jar:target/deps/* \
  foo.Entry --port=${PORT}</code></pre></figure><h2 id="tkfork"><code>TkFork</code></h2><p>This <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/facets/fork/TkFork.html"><code>TkFork</code></a> class seems to be one of the core elements of the framework. It helps route an incoming HTTP request to the right <em>take</em>. Its logic is very simple, and there are just a few lines of code inside it. It encapsulates a collection of &quot;forks,&quot; which are instances of the <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/facets/fork/Fork.html"><code>Fork</code></a> interface:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Fork</span> <span class="o">{</span>
  <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Response</span><span class="o">&gt;</span> <span class="nf">route</span><span class="o">(</span><span class="n">Request</span> <span class="n">req</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure><p>Its only <code>route()</code> method either returns an empty iterator or an iterator with a single <code>Response</code>. <code>TkFork</code> goes through all forks, calling their <code>route()</code> methods until one of them returns a response. Once that happens, <code>TkFork</code> returns this response to the caller, which is <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/http/FtBasic.html"><code>FtBasic</code></a>.</p><p>Let&#39;s create a simple fork ourselves now. For example, we want to show the status of the application when the <code>/status</code> URL is requested. Here is the code:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkApp</span> <span class="kd">extends</span> <span class="n">TkWrap</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Take</span> <span class="nf">make</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">TkFork</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Fork</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Response</span><span class="o">&gt;</span> <span class="nf">route</span><span class="o">(</span><span class="n">Request</span> <span class="n">req</span><span class="o">)</span> <span class="o">{</span>
          <span class="kd">final</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Response</span><span class="o">&gt;</span> <span class="n">responses</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;(</span><span class="mi">1</span><span class="o">);</span>
          <span class="k">if</span> <span class="o">(</span><span class="k">new</span> <span class="n">RqHref</span><span class="o">(</span><span class="n">req</span><span class="o">).</span><span class="na">href</span><span class="o">().</span><span class="na">path</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">&quot;/status&quot;</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">responses</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">TkStatus</span><span class="o">());</span>
          <span class="o">}</span>
          <span class="k">return</span> <span class="n">responses</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>I believe the logic here is clear. We either return an empty iterator or an iterator with an instance of <code>TkStatus</code> inside. If an empty iterator is returned, <code>TkFork</code> will try to find another fork in the collection that actually gets an instance of <code>Response</code>. By the way, if nothing is found and all forks return empty iterators, <code>TkFork</code> will throw a &quot;Page not found&quot; exception.</p><p>This exact logic is implemented by an out-of-the-box fork called <code>FkRegex</code>, which attempts to match a request URI path with the regular expression provided:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkApp</span> <span class="kd">extends</span> <span class="n">TkWrap</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Take</span> <span class="nf">make</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">TkFork</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">FkRegex</span><span class="o">(</span><span class="s">&quot;/status&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">TkStatus</span><span class="o">())</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>We can compose a multi-level structure of <code>TkFork</code> classes; for example:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkApp</span> <span class="kd">extends</span> <span class="n">TsWrap</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Take</span> <span class="nf">make</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">TkFork</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">FkRegex</span><span class="o">(</span>
        <span class="s">&quot;/status&quot;</span><span class="o">,</span>
        <span class="k">new</span> <span class="n">TkFork</span><span class="o">(</span>
          <span class="k">new</span> <span class="n">FkParams</span><span class="o">(</span><span class="s">&quot;f&quot;</span><span class="o">,</span> <span class="s">&quot;json&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">TkStatusJSON</span><span class="o">()),</span>
          <span class="k">new</span> <span class="n">FkParams</span><span class="o">(</span><span class="s">&quot;f&quot;</span><span class="o">,</span> <span class="s">&quot;xml&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">TkStatusXML</span><span class="o">())</span>
        <span class="o">)</span>
      <span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Again, I believe it&#39;s obvious. The instance of <code>FkRegex</code> will ask an encapsulated instance of <code>TkFork</code> to return a response, and it will try to fetch it from one that <code>FkParams</code> encapsulated. If the HTTP query is <code>/status?f=xml</code>, an instance of <code>TkStatusXML</code> will be returned.</p><h2 id="http-response">HTTP Response</h2><p>Now let&#39;s discuss the structure of the HTTP response and its object-oriented abstraction, <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/Response.html"><code>Response</code></a>. This is how the interface looks:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Response</span> <span class="o">{</span>
  <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">head</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
  <span class="n">InputStream</span> <span class="nf">body</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure><p>Looks very similar to the <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/Request.html"><code>Request</code></a>, doesn&#39;t it? Well, it&#39;s identical, mostly because the structure of the HTTP request and response is almost identical. The only difference is the first line.</p><p>There is a collection of useful decorators that help in response building. They are <a href="/2015/02/26/composable-decorators.html">composable</a>, which makes them very convenient. For example, if you want to build a response that contains an HTML page, you compose them like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkIndex</span> <span class="kd">implements</span> <span class="n">Take</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Response</span> <span class="nf">act</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">RsWithStatus</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">RsWithType</span><span class="o">(</span>
        <span class="k">new</span> <span class="n">RsWithBody</span><span class="o">(</span><span class="s">&quot;&lt;html&gt;Hello, world!&lt;/html&gt;&quot;</span><span class="o">),</span>
        <span class="s">&quot;text/html&quot;</span>
      <span class="o">),</span>
      <span class="mi">200</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>In this example, the decorator <code>RsWithBody</code> creates a response with a body but with no headers at all. Then, <code>RsWithType</code> adds the header <code>Content-Type: text/html</code> to it. Then, <code>RsWithStatus</code> makes sure the first line of the response contains <code>HTTP/1.1 200 OK</code>.</p><p>You can create your own decorators that can reuse existing ones. Take a look at how it&#39;s done in <a href="https://github.com/yegor256/rultor/blob/1.50.2/src/main/java/com/rultor/web/RsPage.java"><code>RsPage</code></a> from rultor.com.</p><h2 id="how-about-templates">How About Templates?</h2><p>Returning simple &quot;Hello, world&quot; pages is not a big problem, as we can see. But what about more complex output like HTML pages, <a href="/2015/11/16/json-vs-xml.html">XML</a> documents, JSON data sets, etc? There are a few convenient <code>Response</code> decorators that enable all of that. Let&#39;s start with <a href="http://velocity.apache.org">Velocity</a>, a simple templating engine. Well, it&#39;s not that simple. It&#39;s rather powerful, but I would suggest to use it in simple situations only. Here is how it works:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkIndex</span> <span class="kd">implements</span> <span class="n">Take</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Response</span> <span class="nf">act</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">RsVelocity</span><span class="o">(</span><span class="s">&quot;Hello, ${name}&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">,</span> <span class="s">&quot;Jeffrey&quot;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>The <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/RsVelocity.html"><code>RsVelocity</code></a> constructor accepts a single argument that has to be a Velocity template. Then, you call the <code>with()</code> method, injecting data into the Velocity context. When it&#39;s time to render the HTTP response, <code>RsVelocity</code> will &quot;evaluate&quot; the template against the context configured. Again, I would recommend you use this templating approach only for simple outputs.</p><p>For more complex HTML documents, I would recommend you use XML/XSLT in combination with Xembly. I explained this idea in a few previous posts: <a href="/2014/06/25/xml-and-xslt-in-browser.html">XML+XSLT in a Browser</a> and <a href="/2014/09/09/restful-web-sites.html">RESTful API and a Web Site in the Same URL</a>. It is simple and powerful---Java generates XML output and the XSLT processor transforms it into HTML documents. This is how we separate representation from data. The XSL stylesheet is a &quot;view&quot; and <code>TkIndex</code> is a &quot;controller,&quot; in terms of <a href="/2016/12/13/mvc-vs-oop.html">MVC</a>.</p><p>I&#39;ll write a separate article about templating with Xembly and XSL very soon.</p><p>In the meantime, we&#39;ll create decorators for <a href="http://en.wikipedia.org/wiki/Facelets">JSF/Facelets</a> and <a href="http://en.wikipedia.org/wiki/JavaServer_Pages">JSP</a> rendering in Takes. If you&#39;re interested in helping, please fork the framework and submit your pull requests.</p><h2 id="what-about-persistence">What About Persistence?</h2><p>Now, a question that comes up is what to do with persistent entities, like databases, in-memory structures, network connections, etc. My suggestion is to initialize them inside the <code>Entry</code> class and pass them as arguments into the <code>TkApp</code> constructor. Then, the <code>TkApp</code> will pass them into the constructors of custom <em>takes</em>.</p><p>For example, we have a PostgreSQL database that contains some table data that we need to render. Here is how I would initialize a connection to it in the <code>Entry</code> class (I&#39;m using a <a href="http://www.jolbox.com/">BoneCP</a> connection pool):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Entry</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="k">new</span> <span class="n">FtCli</span><span class="o">(</span><span class="k">new</span> <span class="n">TkApp</span><span class="o">(</span><span class="n">Entry</span><span class="o">.</span><span class="na">postgres</span><span class="o">()),</span> <span class="n">args</span><span class="o">).</span><span class="na">start</span><span class="o">(</span><span class="n">Exit</span><span class="o">.</span><span class="na">NEVER</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Source</span> <span class="nf">postgres</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">BoneCPDataSource</span> <span class="n">src</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BoneCPDataSource</span><span class="o">();</span>
    <span class="n">src</span><span class="o">.</span><span class="na">setDriverClass</span><span class="o">(</span><span class="s">&quot;org.postgresql.Driver&quot;</span><span class="o">);</span>
    <span class="n">src</span><span class="o">.</span><span class="na">setJdbcUrl</span><span class="o">(</span><span class="s">&quot;jdbc:postgresql://localhost/db&quot;</span><span class="o">);</span>
    <span class="n">src</span><span class="o">.</span><span class="na">setUser</span><span class="o">(</span><span class="s">&quot;root&quot;</span><span class="o">);</span>
    <span class="n">src</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">&quot;super-secret-password&quot;</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">src</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Now, the constructor of <code>TkApp</code> must accept a single argument of type <code>java.sql.Source</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkApp</span> <span class="kd">extends</span> <span class="n">TkWrap</span> <span class="o">{</span>
  <span class="n">TkApp</span><span class="o">(</span><span class="kd">final</span> <span class="n">Source</span> <span class="n">source</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">TkApp</span><span class="o">.</span><span class="na">make</span><span class="o">(</span><span class="n">source</span><span class="o">));</span>
  <span class="o">}</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Take</span> <span class="nf">make</span><span class="o">(</span><span class="kd">final</span> <span class="n">Source</span> <span class="n">source</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">TkFork</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">FkRegex</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">TkIndex</span><span class="o">(</span><span class="n">source</span><span class="o">))</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Class <code>TkIndex</code> also accepts a single argument of class <code>Source</code>. I believe you know what to do with it inside <code>TkIndex</code> in order to fetch the SQL table data and convert it into HTML. The point here is that the dependency must be injected into the application (instance of class <code>TkApp</code>) at the moment of its instantiation. This is a pure and clean dependency injection mechanism, which is absolutely container-free. Read more about it in <a href="/2014/10/03/di-containers-are-evil.html">Dependency Injection Containers Are Code Polluters</a>.</p><h2 id="unit-testing">Unit Testing</h2><p>Since every class is immutable and all dependencies are injected only through constructors, unit testing is extremely easy. Let&#39;s say we want to test <code>TkStatus</code>, which is supposed to return an HTML response (I&#39;m using <a href="http://junit.org/">JUnit 4</a> and <a href="https://github.com/hamcrest/JavaHamcrest">Hamcrest</a>):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hamcrest.MatcherAssert</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hamcrest.Matchers</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkIndexTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">returnsHtmlPage</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="n">MatcherAssert</span><span class="o">.</span><span class="na">assertThat</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">RsPrint</span><span class="o">(</span>
        <span class="k">new</span> <span class="n">TkStatus</span><span class="o">().</span><span class="na">act</span><span class="o">(</span><span class="k">new</span> <span class="n">RqFake</span><span class="o">())</span>
      <span class="o">).</span><span class="na">printBody</span><span class="o">(),</span>
      <span class="n">Matchers</span><span class="o">.</span><span class="na">equalsTo</span><span class="o">(</span><span class="s">&quot;&lt;html&gt;Hello, world!&lt;/html&gt;&quot;</span><span class="o">)</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Also, we can start the entire application or any individual <em>take</em> in a test HTTP server and test its behavior via a real TCP socket; for example (I&#39;m using <a href="http://http.jcabi.com">jcabi-http</a> to make an HTTP request and check the output):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkIndexTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">returnsHtmlPage</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="k">new</span> <span class="n">FtRemote</span><span class="o">(</span><span class="k">new</span> <span class="n">TkIndex</span><span class="o">()).</span><span class="na">exec</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">FtRemote</span><span class="o">.</span><span class="na">Script</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">exec</span><span class="o">(</span><span class="kd">final</span> <span class="n">URI</span> <span class="n">home</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
          <span class="k">new</span> <span class="n">JdkRequest</span><span class="o">(</span><span class="n">home</span><span class="o">)</span>
            <span class="o">.</span><span class="na">fetch</span><span class="o">()</span>
            <span class="o">.</span><span class="na">as</span><span class="o">(</span><span class="n">RestResponse</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
            <span class="o">.</span><span class="na">assertStatus</span><span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">.</span><span class="na">HTTP_OK</span><span class="o">)</span>
            <span class="o">.</span><span class="na">assertBody</span><span class="o">(</span><span class="n">Matchers</span><span class="o">.</span><span class="na">containsString</span><span class="o">(</span><span class="s">&quot;Hello, world!&quot;</span><span class="o">));</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p><a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/http/FtRemote.html"><code>FtRemote</code></a> starts a test web server at a random TCP port and calls the <code>exec()</code> method at the provided instance of <code>FtRemote.Script</code>. The first argument of this method is a URI of the just-started web server homepage.</p><p>The architecture of Takes framework is very modular and composable. Any individual <em>take</em> can be tested as a standalone component, absolutely independent from the framework and other <em>takes</em>.</p><h2 id="why-the-name">Why the Name?</h2><p>That&#39;s the question I&#39;ve been hearing rather often. The idea is simple, and it originates from the movie business. When a movie is made, the crew shoots many <em>takes</em> in order to capture the reality and put it on film. Each capture is called a <em>take</em>.</p><p>In other words, a <em>take</em> is like a snapshot of the reality.</p><p>The same applies to this framework. Each instance of <code>Take</code> represents a reality at one particular moment in time. This reality is then sent to the user in the form of a <code>Response</code>.</p><p>PS. There are a few words about authentication: <a href="/2015/05/18/cookie-based-authentication.html">How Cookie-Based Authentication Works in the Takes Framework</a>.</p><p>PPS. There are a few real web systems, which you may be interested to take a look at. They all are using Takes Framework and their code is open: <a href="https://github.com/yegor256/rultor">rultor.com</a>, <a href="/2016/03/30/jare-instant-free-cdn.html">jare.io</a>, <a href="/2016/03/15/wring-dispatcher-github-notifications.html">wring.io</a>.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="A decorator pattern, while being the best instrument to keep objects highly cohesive, solid, and loosely coupled, is unfortunately not very popular in traditional Java programming. " /> <meta name="keywords" content="composable decorators, decorator design pattern, decorator pattern example, decorator pattern java, decorator pattern real life example" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-02-26 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Composable Decorators vs. Imperative Utility Methods"/> <meta name="twitter:description" property="og:description" content="A decorator pattern, while being the best instrument to keep objects highly cohesive, solid, and loosely coupled, is unfortunately not very popular in traditional Java programming. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/02/26/composable-decorators.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/02/26/composable-decorators.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/02/26/composable-decorators.amp.html" /> <title>Composable Decorators vs. Imperative Utility Methods </title> <meta name='og:image' content='https://www.yegor256.com/images/2015/02/russina-matroshka.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2015/02/russina-matroshka.jpg'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='763'/> <meta name='twitter:image:height' content='763'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Main picture'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/02/26/composable-decorators.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/02/26/composable-decorators.html">https://www.yegor256.com/2015/02/26/composable-decorators.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Composable Decorators vs. Imperative Utility Methods</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-02-26T00:00:00+00:00"> 26 February 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/02/26/composable-decorators.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>The <a href="http://en.wikipedia.org/wiki/Decorator_pattern">decorator pattern</a> is my favorite among all other patterns I&#39;m aware of. It is a very simple and yet very powerful mechanism to make your code <a href="http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29">highly cohesive</a> and <a href="http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29">loosely coupled</a>. However, I believe decorators are not used often enough. They should be everywhere, but they are not. The biggest advantage we get from decorators is that they make our code <em>composable</em>. That&#39;s why the title of this post is composable decorators. Unfortunately, instead of decorators, we often use imperative utility methods, which make our code procedural rather than object-oriented.</p><figure class='jb_picture'><img itemprop='image' alt='Main picture' src='/images/2015/02/russina-matroshka.jpg'/></figure><p>First, a practical example. Here is an interface for an object that is supposed to read a text somewhere and return it:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">interface</span> <span class="nc">Text</span> <span class="o">{</span>
  <span class="n">String</span> <span class="nf">read</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>Here is an implementation that reads the text from a file:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">TextInFile</span> <span class="kd">implements</span> <span class="n">Text</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">File</span> <span class="n">file</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">TextInFile</span><span class="o">(</span><span class="kd">final</span> <span class="n">File</span> <span class="n">src</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">file</span> <span class="o">=</span> <span class="n">src</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">read</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span>
      <span class="n">Files</span><span class="o">.</span><span class="na">readAllBytes</span><span class="o">(),</span> <span class="s">&quot;UTF-8&quot;</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>And now the decorator, which is another implementation of <code>Text</code> that removes all unprintable characters from the text:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">PrintableText</span> <span class="kd">implements</span> <span class="n">Text</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Text</span> <span class="n">origin</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">PrintableText</span><span class="o">(</span><span class="kd">final</span> <span class="n">Text</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">text</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">read</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">read</span><span class="o">()</span>
      <span class="o">.</span><span class="na">replaceAll</span><span class="o">(</span><span class="s">&quot;[^\p{Print}]&quot;</span><span class="o">,</span> <span class="s">&quot;&quot;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Here is how I&#39;m using it:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">Text</span> <span class="n">text</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PrintableText</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">TextInFile</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;/tmp/a.txt&quot;</span><span class="o">))</span>
<span class="o">);</span>
<span class="n">String</span> <span class="n">content</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="na">read</span><span class="o">();</span></code></pre></figure><p>As you can see, the <code>PrintableText</code> doesn&#39;t read the text from the file. It doesn&#39;t really care where the text is coming from. It <em>delegates</em> text reading to the encapsulated instance of <code>Text</code>. How this encapsulated object will deal with the text and where it will get it doesn&#39;t concern <code>PrintableText</code>.</p><p>Let&#39;s <a href="/2016/04/19/object-must-not-be-configurable.html">continue</a> and try to create an implementation of <code>Text</code> that will capitalize all letters in the text:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">AllCapsText</span> <span class="kd">implements</span> <span class="n">Text</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Text</span> <span class="n">origin</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">AllCapsText</span><span class="o">(</span><span class="kd">final</span> <span class="n">Text</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">text</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">read</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">read</span><span class="o">().</span><span class="na">toUpperCase</span><span class="o">(</span><span class="n">Locale</span><span class="o">.</span><span class="na">ENGLISH</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>How about a <code>Text</code> that trims the input:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">TrimmedText</span> <span class="kd">implements</span> <span class="n">Text</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Text</span> <span class="n">origin</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">TrimmedText</span><span class="o">(</span><span class="kd">final</span> <span class="n">Text</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">text</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">read</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">read</span><span class="o">().</span><span class="na">trim</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure> <aside class='youtube'> <a href='https://www.youtube.com/watch?v=D0dqC_3Bch8'><div class='box'> <img src='https://i.ytimg.com/vi/D0dqC_3Bch8/mqdefault.jpg' alt='YouTube video #D0dqC_3Bch8'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Objects vs. Static Methods (webinar #1); 8 April 2015.</div></aside><p>I can go on and on with these <a href="/2015/10/01/vertical-horizontal-decorating.html">decorators</a>. I can create many of them, suitable for their own individual use cases. But let&#39;s see how they all can play together. Let&#39;s say I want to read the text from the file, capitalize it, trim it, and remove all unprintable characters. And I want to be <em>declarative</em>. Here is what I do:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">Text</span> <span class="n">text</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AllCapsText</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">TrimmedText</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">PrintableText</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">TextInFile</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;/tmp/a.txt&quot;</span><span class="o">))</span>
    <span class="o">)</span>
  <span class="o">)</span>
<span class="o">);</span>
<span class="n">String</span> <span class="n">content</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="na">read</span><span class="o">();</span></code></pre></figure><p>First, I create an instance of <code>Text</code>, <em>composing</em> multiple decorators into a single object. I declaratively define the behavior of <code>text</code> without actually executing anything. Until method <code>read()</code> is called, the file is not touched and the processing of the text is not started. The object <code>text</code> is just a composition of decorators, not an executable <em>procedure</em>. Check out this article about declarative and imperative styles of programming: <a href="/2015/02/20/utility-classes-vs-functional-programming.html">Utility Classes Have Nothing to Do With Functional Programming</a>.</p><p>This design is much more flexible and reusable than a more traditional one, where the <code>Text</code> object is smart enough to perform all said operations. For example, class <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html"><code>String</code></a> from Java is a good example of a bad design. It has more than 20 <em>utility methods</em> that should have been provided as decorators instead: <code>trim()</code>, <code>toUpperCase()</code>, <code>substring()</code>, <code>split()</code>, and many others, for example. When I want to trim my string, uppercase it, and then split it into pieces, here is what my code will look like:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">String</span> <span class="n">txt</span> <span class="o">=</span> <span class="s">&quot;hello, world!&quot;</span><span class="o">;</span>
<span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">parts</span> <span class="o">=</span> <span class="n">txt</span><span class="o">.</span><span class="na">trim</span><span class="o">().</span><span class="na">toUpperCase</span><span class="o">().</span><span class="na">split</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">);</span></code></pre></figure><p>This is imperative and procedural programming. Composable decorators, on the other hand, would make this code object-oriented and declarative. Something like this would be great to have in Java instead (pseudo-code):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">parts</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">.</span><span class="na">Split</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">String</span><span class="o">.</span><span class="na">UpperCased</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">String</span><span class="o">.</span><span class="na">Trimmed</span><span class="o">(</span><span class="s">&quot;hello, world!&quot;</span><span class="o">)</span>
  <span class="o">)</span>
<span class="o">);</span></code></pre></figure><p>To conclude, I recommend you think twice every time you add a new utility method to the interface/class. Try to avoid utility methods as much as possible, and use decorators instead. An <a href="/2016/04/26/why-inputstream-design-is-wrong.html">ideal interface</a> should contain only methods that you absolutely cannot remove. Everything else should be done through composable decorators.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/02/26/composable-decorators.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/02/26/composable-decorators.html&amp;text=Composable+Decorators+vs.+Imperative+Utility+Methods" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/02/26/composable-decorators.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/02/26/composable-decorators.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/02/26/composable-decorators.html%3F2015-08&amp;title=Composable+Decorators+vs.+Imperative+Utility+Methods" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/02/26/composable-decorators.html%3F2015-08&amp;t=Composable+Decorators+vs.+Imperative+Utility+Methods" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>The <a href="http://en.wikipedia.org/wiki/Decorator_pattern">decorator pattern</a> is my favorite among all other patterns I&#39;m aware of. It is a very simple and yet very powerful mechanism to make your code <a href="http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29">highly cohesive</a> and <a href="http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29">loosely coupled</a>. However, I believe decorators are not used often enough. They should be everywhere, but they are not. The biggest advantage we get from decorators is that they make our code <em>composable</em>. That&#39;s why the title of this post is composable decorators. Unfortunately, instead of decorators, we often use imperative utility methods, which make our code procedural rather than object-oriented.</p><figure class='jb_picture'><img itemprop='image' alt='Main picture' src='/images/2015/02/russina-matroshka.jpg'/></figure><p>First, a practical example. Here is an interface for an object that is supposed to read a text somewhere and return it:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">interface</span> <span class="nc">Text</span> <span class="o">{</span>
  <span class="n">String</span> <span class="nf">read</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>Here is an implementation that reads the text from a file:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">TextInFile</span> <span class="kd">implements</span> <span class="n">Text</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">File</span> <span class="n">file</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">TextInFile</span><span class="o">(</span><span class="kd">final</span> <span class="n">File</span> <span class="n">src</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">file</span> <span class="o">=</span> <span class="n">src</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">read</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span>
      <span class="n">Files</span><span class="o">.</span><span class="na">readAllBytes</span><span class="o">(),</span> <span class="s">&quot;UTF-8&quot;</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>And now the decorator, which is another implementation of <code>Text</code> that removes all unprintable characters from the text:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">PrintableText</span> <span class="kd">implements</span> <span class="n">Text</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Text</span> <span class="n">origin</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">PrintableText</span><span class="o">(</span><span class="kd">final</span> <span class="n">Text</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">text</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">read</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">read</span><span class="o">()</span>
      <span class="o">.</span><span class="na">replaceAll</span><span class="o">(</span><span class="s">&quot;[^\p{Print}]&quot;</span><span class="o">,</span> <span class="s">&quot;&quot;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Here is how I&#39;m using it:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">Text</span> <span class="n">text</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PrintableText</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">TextInFile</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;/tmp/a.txt&quot;</span><span class="o">))</span>
<span class="o">);</span>
<span class="n">String</span> <span class="n">content</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="na">read</span><span class="o">();</span></code></pre></figure><p>As you can see, the <code>PrintableText</code> doesn&#39;t read the text from the file. It doesn&#39;t really care where the text is coming from. It <em>delegates</em> text reading to the encapsulated instance of <code>Text</code>. How this encapsulated object will deal with the text and where it will get it doesn&#39;t concern <code>PrintableText</code>.</p><p>Let&#39;s <a href="/2016/04/19/object-must-not-be-configurable.html">continue</a> and try to create an implementation of <code>Text</code> that will capitalize all letters in the text:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">AllCapsText</span> <span class="kd">implements</span> <span class="n">Text</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Text</span> <span class="n">origin</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">AllCapsText</span><span class="o">(</span><span class="kd">final</span> <span class="n">Text</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">text</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">read</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">read</span><span class="o">().</span><span class="na">toUpperCase</span><span class="o">(</span><span class="n">Locale</span><span class="o">.</span><span class="na">ENGLISH</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>How about a <code>Text</code> that trims the input:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">TrimmedText</span> <span class="kd">implements</span> <span class="n">Text</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Text</span> <span class="n">origin</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">TrimmedText</span><span class="o">(</span><span class="kd">final</span> <span class="n">Text</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">origin</span> <span class="o">=</span> <span class="n">text</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">read</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">origin</span><span class="o">.</span><span class="na">read</span><span class="o">().</span><span class="na">trim</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure> <aside class='youtube'> <a href='https://www.youtube.com/watch?v=D0dqC_3Bch8'><div class='box'> <img src='https://i.ytimg.com/vi/D0dqC_3Bch8/mqdefault.jpg' alt='YouTube video #D0dqC_3Bch8'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Objects vs. Static Methods (webinar #1); 8 April 2015.</div></aside><p>I can go on and on with these <a href="/2015/10/01/vertical-horizontal-decorating.html">decorators</a>. I can create many of them, suitable for their own individual use cases. But let&#39;s see how they all can play together. Let&#39;s say I want to read the text from the file, capitalize it, trim it, and remove all unprintable characters. And I want to be <em>declarative</em>. Here is what I do:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">Text</span> <span class="n">text</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AllCapsText</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">TrimmedText</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">PrintableText</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">TextInFile</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;/tmp/a.txt&quot;</span><span class="o">))</span>
    <span class="o">)</span>
  <span class="o">)</span>
<span class="o">);</span>
<span class="n">String</span> <span class="n">content</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="na">read</span><span class="o">();</span></code></pre></figure><p>First, I create an instance of <code>Text</code>, <em>composing</em> multiple decorators into a single object. I declaratively define the behavior of <code>text</code> without actually executing anything. Until method <code>read()</code> is called, the file is not touched and the processing of the text is not started. The object <code>text</code> is just a composition of decorators, not an executable <em>procedure</em>. Check out this article about declarative and imperative styles of programming: <a href="/2015/02/20/utility-classes-vs-functional-programming.html">Utility Classes Have Nothing to Do With Functional Programming</a>.</p><p>This design is much more flexible and reusable than a more traditional one, where the <code>Text</code> object is smart enough to perform all said operations. For example, class <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html"><code>String</code></a> from Java is a good example of a bad design. It has more than 20 <em>utility methods</em> that should have been provided as decorators instead: <code>trim()</code>, <code>toUpperCase()</code>, <code>substring()</code>, <code>split()</code>, and many others, for example. When I want to trim my string, uppercase it, and then split it into pieces, here is what my code will look like:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">String</span> <span class="n">txt</span> <span class="o">=</span> <span class="s">&quot;hello, world!&quot;</span><span class="o">;</span>
<span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">parts</span> <span class="o">=</span> <span class="n">txt</span><span class="o">.</span><span class="na">trim</span><span class="o">().</span><span class="na">toUpperCase</span><span class="o">().</span><span class="na">split</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">);</span></code></pre></figure><p>This is imperative and procedural programming. Composable decorators, on the other hand, would make this code object-oriented and declarative. Something like this would be great to have in Java instead (pseudo-code):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">String</span><span class="o">[]</span> <span class="n">parts</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">.</span><span class="na">Split</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">String</span><span class="o">.</span><span class="na">UpperCased</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">String</span><span class="o">.</span><span class="na">Trimmed</span><span class="o">(</span><span class="s">&quot;hello, world!&quot;</span><span class="o">)</span>
  <span class="o">)</span>
<span class="o">);</span></code></pre></figure><p>To conclude, I recommend you think twice every time you add a new utility method to the interface/class. Try to avoid utility methods as much as possible, and use decorators instead. An <a href="/2016/04/26/why-inputstream-design-is-wrong.html">ideal interface</a> should contain only methods that you absolutely cannot remove. Everything else should be done through composable decorators.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="A good software architect is like a good hairdresser, understands what the customer wants and doesn&apos;t ask questions. " /> <meta name="keywords" content="customer satisfaction, good project manager, good software architect, haircut, project objectives" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-02-23 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="A Haircut"/> <meta name="twitter:description" property="og:description" content="A good software architect is like a good hairdresser, understands what the customer wants and doesn&apos;t ask questions. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/02/23/haircut.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/02/23/haircut.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/02/23/haircut.amp.html" /> <title>A Haircut </title> <meta name='og:image' content='https://www.yegor256.com/images/2015/02/the-man-who-wasnt-there.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2015/02/the-man-who-wasnt-there.jpg'/><meta name='og:image:width' content='1280'/> <meta name='twitter:image:width' content='1280'/><meta name='og:image:height' content='688'/> <meta name='twitter:image:height' content='688'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='The Man Who Wasn&#39;t There (2001) by Coen Brothers'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/02/23/haircut.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/02/23/haircut.html">https://www.yegor256.com/2015/02/23/haircut.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">A Haircut</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-02-23T00:00:00+00:00"> 23 February 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/02/23/haircut.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>I received a haircut today, and the niceness of my hairdresser led him to fill the appointment with courteous questions about how I wanted my hair cut, what size of clipper he should use, how long the sides should be, and how much should be removed from the front. He also offered me many types of shampoo and a cup of tea. All this reminded me of the work we do as programmers, and I decided to write a short post about it. I&#39;ve already <a href="/2015/01/26/happy-boss-false-objective.html">mentioned before</a> that trying to make a customer happy is a false objective. This hairdresser was a perfect illustrative example of this very mistake. By the way, in the end, I wasn&#39;t happy, and he got no tip. How could this happen if he was so friendly and nice?</p><figure class='jb_picture'><img itemprop='image' alt='The Man Who Wasn&#39;t There (2001) by Coen Brothers' src='/images/2015/02/the-man-who-wasnt-there.jpg' longdesc='#243d0d7c'/><figcaption id='243d0d7c'>The Man Who Wasn&#39;t There (2001) by Coen Brothers</figcaption></figure><p>I&#39;m not a hairdresser, and I have very little understanding of how to deal with hair. I came to him because I assumed he knew more about this business than I did. I chose him through the assistance of Yelp. I wanted <em>him</em> to tell me how long the hair on the sides should be and how much should be removed on the top. I expected <em>him</em> to give me his professional judgment and stand by it.</p><p>Instead of asking me how much I wanted removed on the sides, he should have told me there should be less on the sides. This is what a true professional would do. A true professional would give me <em>his</em> vision of the haircut that best suits me and would try to convince me that it was the best choice.</p><aside class='quote'>He tried to please me. In the end, he lost.</aside><p>A true professional would not ask me but would <em>tell</em> me instead, because he would understand that my goal was not to boss him around and make him do my hair the way I wanted it. My goal was to get the best out of his professional skill.</p><p>Unfortunately, the guy was either weak or immature. He didn&#39;t argue with me and didn&#39;t try to convince me. He tried to <em>please</em> me. In the end, he lost.</p><p>Exactly the same thing happens when we ask our customers about the technologies they want us to use. I hear this question very often: <em>What language do you want us to use</em> (meaning Java or Ruby or something else)? Or <em>what database should we use?</em> Or <em>how do you want us to design this?</em></p><p>Don&#39;t do that. Don&#39;t lose like that hairdresser. Don&#39;t ask your clients what they want. Instead, <em>learn</em> their business requirements and then <em>suggest</em> the solution you think is the best for them. Then, insist and argue if they don&#39;t agree. <a href="/2016/07/21/convince-me.html">Convince</a> them. Even if they fire you in the end for your stubbornness, it&#39;s better than being that hairdresser who is doomed to please every single client without getting anywhere further.</p><p>Remember, the <a href="/2015/01/26/happy-boss-false-objective.html">client</a> is not the king; his hairs are.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/02/23/haircut.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/02/23/haircut.html&amp;text=A+Haircut" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/02/23/haircut.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/02/23/haircut.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/02/23/haircut.html%3F2015-08&amp;title=A+Haircut" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/02/23/haircut.html%3F2015-08&amp;t=A+Haircut" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>I received a haircut today, and the niceness of my hairdresser led him to fill the appointment with courteous questions about how I wanted my hair cut, what size of clipper he should use, how long the sides should be, and how much should be removed from the front. He also offered me many types of shampoo and a cup of tea. All this reminded me of the work we do as programmers, and I decided to write a short post about it. I&#39;ve already <a href="/2015/01/26/happy-boss-false-objective.html">mentioned before</a> that trying to make a customer happy is a false objective. This hairdresser was a perfect illustrative example of this very mistake. By the way, in the end, I wasn&#39;t happy, and he got no tip. How could this happen if he was so friendly and nice?</p><figure class='jb_picture'><img itemprop='image' alt='The Man Who Wasn&#39;t There (2001) by Coen Brothers' src='/images/2015/02/the-man-who-wasnt-there.jpg' longdesc='#243d0d7c'/><figcaption id='243d0d7c'>The Man Who Wasn&#39;t There (2001) by Coen Brothers</figcaption></figure><p>I&#39;m not a hairdresser, and I have very little understanding of how to deal with hair. I came to him because I assumed he knew more about this business than I did. I chose him through the assistance of Yelp. I wanted <em>him</em> to tell me how long the hair on the sides should be and how much should be removed on the top. I expected <em>him</em> to give me his professional judgment and stand by it.</p><p>Instead of asking me how much I wanted removed on the sides, he should have told me there should be less on the sides. This is what a true professional would do. A true professional would give me <em>his</em> vision of the haircut that best suits me and would try to convince me that it was the best choice.</p><aside class='quote'>He tried to please me. In the end, he lost.</aside><p>A true professional would not ask me but would <em>tell</em> me instead, because he would understand that my goal was not to boss him around and make him do my hair the way I wanted it. My goal was to get the best out of his professional skill.</p><p>Unfortunately, the guy was either weak or immature. He didn&#39;t argue with me and didn&#39;t try to convince me. He tried to <em>please</em> me. In the end, he lost.</p><p>Exactly the same thing happens when we ask our customers about the technologies they want us to use. I hear this question very often: <em>What language do you want us to use</em> (meaning Java or Ruby or something else)? Or <em>what database should we use?</em> Or <em>how do you want us to design this?</em></p><p>Don&#39;t do that. Don&#39;t lose like that hairdresser. Don&#39;t ask your clients what they want. Instead, <em>learn</em> their business requirements and then <em>suggest</em> the solution you think is the best for them. Then, insist and argue if they don&#39;t agree. <a href="/2016/07/21/convince-me.html">Convince</a> them. Even if they fire you in the end for your stubbornness, it&#39;s better than being that hairdresser who is doomed to please every single client without getting anywhere further.</p><p>Remember, the <a href="/2015/01/26/happy-boss-false-objective.html">client</a> is not the king; his hairs are.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Utility classes, even though they look like collections of functions, have nothing to do with functional programming, mostly because they are bags of procedures " /> <meta name="keywords" content="functional programming, utility classes, utility classes are not functional programming, utility classes in java, utility classes vs functional programming" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-02-20 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Utility Classes Have Nothing to Do With Functional Programming"/> <meta name="twitter:description" property="og:description" content="Utility classes, even though they look like collections of functions, have nothing to do with functional programming, mostly because they are bags of procedures "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/02/20/utility-classes-vs-functional-programming.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/02/20/utility-classes-vs-functional-programming.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/02/20/utility-classes-vs-functional-programming.amp.html" /> <title>Utility Classes Have Nothing to Do With Functional Programming </title> <meta name='og:image' content='https://www.yegor256.com/images/2015/02/color-me-kubrick.png'/><meta name='twitter:image' content='https://www.yegor256.com/images/2015/02/color-me-kubrick.png'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='680'/> <meta name='twitter:image:height' content='680'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Color Me Kubrick (2005) by Brian W. Cook'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/02/20/utility-classes-vs-functional-programming.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/02/20/utility-classes-vs-functional-programming.html">https://www.yegor256.com/2015/02/20/utility-classes-vs-functional-programming.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Utility Classes Have Nothing to Do With Functional Programming</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-02-20T00:00:00+00:00"> 20 February 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/02/20/utility-classes-vs-functional-programming.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>I was recently <a href="https://twitter.com/lukaseder/status/564866432790708224">accused</a> of being against <a href="http://en.wikipedia.org/wiki/Functional_programming">functional programming</a> because <a href="/2014/05/05/oop-alternative-to-utility-classes.html">I call utility classes an anti-pattern</a>. That&#39;s absolutely wrong! Well, I do consider them a terrible anti-pattern, but they have nothing to do with functional programming. I believe there are two basic reasons why. First, functional programming is declarative, while utility class methods are imperative. Second, functional programming is based on lambda calculus, where a function can be assigned to a variable. Utility class methods are not functions in this sense. I&#39;ll decode these statements in a minute.</p><p>In Java, there are basically two valid alternatives to these ugly utility classes aggressively promoted by <a href="https://code.google.com/p/guava-libraries/">Guava</a>, <a href="http://commons.apache.org/">Apache Commons</a>, and others. The first one is the use of traditional classes, and the second one is <a href="http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html">Java&nbsp;8 lambda</a>. Now let&#39;s see why utility classes are not even close to functional programming and where this misconception is coming from.</p><figure class='jb_picture'><img itemprop='image' alt='Color Me Kubrick (2005) by Brian W. Cook' src='/images/2015/02/color-me-kubrick.png' longdesc='#56d1f92f'/><figcaption id='56d1f92f'>Color Me Kubrick (2005) by Brian W. Cook</figcaption></figure><p>Here is a typical example of a utility class <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html"><code>Math</code></a> from Java 1.0:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Math</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">double</span> <span class="nf">abs</span><span class="o">(</span><span class="kt">double</span> <span class="n">a</span><span class="o">);</span>
  <span class="c1">// a few dozens of other methods of the same style</span>
<span class="o">}</span></code></pre></figure><p>Here is how you would use it when you want to calculate an absolute value of a floating point number:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">abs</span><span class="o">(</span><span class="mf">3.1415926d</span><span class="o">);</span></code></pre></figure> <aside class='quote'>The code will work, but it is not object-oriented programming</aside><p>What&#39;s wrong with it? We need a function, and we get it from class <code>Math</code>. The class has many useful functions inside it that can be used for many typical mathematical operations, like calculating maximum, minimum, sine, cosine, etc. It is a very popular concept; just look at any commercial or open source product. These utility classes are used everywhere since Java was invented (this <code>Math</code> class was introduced in Java&#39;s first version). Well, technically there is nothing wrong. The code will work. But it is not object-oriented programming. Instead, it is imperative and procedural. Do we care? Well, it&#39;s up to you to decide. Let&#39;s see what the difference is.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=D0dqC_3Bch8'><div class='box'> <img src='https://i.ytimg.com/vi/D0dqC_3Bch8/mqdefault.jpg' alt='YouTube video #D0dqC_3Bch8'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Objects vs. Static Methods (webinar #1); 8 April 2015.</div></aside><p>There are basically two different approaches: declarative and imperative.</p><p><a href="http://en.wikipedia.org/wiki/Imperative_programming">Imperative programming</a> is focused on describing <strong>how</strong> a program operates in terms of statements that change a program state. We just saw an example of imperative programming above. Here is another (this is pure imperative/procedural programming that has nothing to do with <a href="/2016/08/15/what-is-wrong-object-oriented-programming.html">OOP</a>):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyMath</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">double</span> <span class="nf">f</span><span class="o">(</span><span class="kt">double</span> <span class="n">a</span><span class="o">,</span> <span class="kt">double</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="n">max</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">);</span>
    <span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">abs</span><span class="o">(</span><span class="n">max</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p><a href="http://en.wikipedia.org/wiki/Declarative_programming">Declarative programming</a> focuses on <strong>what</strong> the program should accomplish without prescribing how to do it in terms of sequences of actions to be taken. This is how the same code would look in Lisp, a functional programming language:</p><figure class="highlight"><pre><code class="language-lisp" data-lang="lisp"><span></span><span class="p">(</span><span class="nb">defun</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">a</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nb">abs</span> <span class="p">(</span><span class="nb">max</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">)))</span></code></pre></figure><p>What&#39;s the catch? Just a difference in syntax? Not really.</p><p>There are <a href="http://en.wikipedia.org/wiki/Comparison_of_programming_paradigms">many definitions</a> of the difference between imperative and declarative styles, but I will try to give my own. There are basically three roles interacting in the scenario with this <code>f</code> function/method: a <em>buyer</em>, a <em>packager</em> of the result, and a <em>consumer</em> of the result. Let&#39;s say I call this function like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span>
  <span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">calc</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="o">-</span><span class="mi">7</span><span class="o">);</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;max+abs equals to &quot;</span> <span class="o">+</span> <span class="n">x</span><span class="o">);</span>
<span class="o">}</span>
<span class="kd">private</span> <span class="kt">double</span> <span class="nf">calc</span><span class="o">(</span><span class="kt">double</span> <span class="n">a</span><span class="o">,</span> <span class="kt">double</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
  <span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">f</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">);</span>
  <span class="k">return</span> <span class="n">x</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure><p>Here, method <code>calc()</code> is a buyer, method <code>Math.f()</code> is a packager of the result, and method <code>foo()</code> is a consumer. No matter which programming style is used, there are always these three guys participating in the process: the buyer, the packager, and the consumer.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=psrp3TtaYYI'><div class='box'> <img src='https://i.ytimg.com/vi/psrp3TtaYYI/mqdefault.jpg' alt='YouTube video #psrp3TtaYYI'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>What&#39;s Wrong About Utility Classes? (webinar #6); 2 September 2015.</div></aside><p>Imagine you&#39;re a buyer and want to purchase a gift for your (girl|boy)friend. The first option is to visit a shop, pay $50, let them package that perfume for you, and then deliver it to the friend (and get a kiss in return). This is an <strong>imperative</strong> style.</p><p>The second option is to visit a shop, pay $50, and get a gift card. You then present this card to the friend (and get a kiss in return). When he or she decides to convert it to perfume, he or she will visit the shop and get it. This is a <strong>declarative</strong> style.</p><p>See the difference?</p><p>In the first case, which is imperative, you force the packager (a beauty shop) to find that perfume in stock, package it, and present it to you as a ready-to-be-used product. In the second scenario, which is declarative, you&#39;re just getting a <strong>promise</strong> from the shop that eventually, when it&#39;s necessary, the staff will find the perfume in stock, package it, and provide it to those who need it. If your friend never visits the shop with that gift card, the perfume will remain in stock.</p><p>Moreover, your friend can use that gift card as a product itself, never visiting the shop. He or she may instead present it to somebody else as a gift or just exchange it for another card or product. The gift card itself becomes a product!</p><p>So the difference is what the consumer is getting---either a product ready to be used (imperative) or a voucher for the product, which can later be converted into a real product (declarative).</p><p>Utility classes, like <code>Math</code> from JDK or <code>StringUtils</code> from Apache Commons, return products ready to be used immediately, while functions in Lisp and other functional languages return &quot;vouchers.&quot; For example, if you call the <code>max</code> function in Lisp, the actual maximum between two numbers will only be calculated when you actually start using it:</p><figure class="highlight"><pre><code class="language-lisp" data-lang="lisp"><span></span><span class="p">(</span><span class="k">let</span> <span class="p">(</span><span class="nv">x</span> <span class="p">(</span><span class="nb">max</span> <span class="mi">1</span> <span class="mi">5</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">print</span> <span class="s">&quot;X equals to &quot;</span> <span class="nv">x</span><span class="p">))</span></code></pre></figure><p>Until this <code>print</code> actually starts to output characters to the screen, the function <code>max</code> won&#39;t be called. This <code>x</code> is a &quot;voucher&quot; returned to you when you attempted to &quot;buy&quot; a maximum between <code>1</code> and <code>5</code>.</p><p>Note, however, that nesting Java static functions one into another doesn&#39;t make them declarative. The code is still imperative, because its execution delivers the result here and now:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyMath</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">double</span> <span class="nf">f</span><span class="o">(</span><span class="kt">double</span> <span class="n">a</span><span class="o">,</span> <span class="kt">double</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Math</span><span class="o">.</span><span class="na">abs</span><span class="o">(</span><span class="n">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">));</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>&quot;Okay,&quot; you may say, &quot;I got it, but why is declarative style better than imperative? What&#39;s the big deal?&quot; I&#39;m getting to it. Let me first show the difference between functions in functional programming and static methods in OOP. As mentioned above, this is the second big difference between utility classes and functional programming.</p><p>In any functional programming language, you can do this:</p><figure class="highlight"><pre><code class="language-lisp" data-lang="lisp"><span></span><span class="p">(</span><span class="nb">defun</span> <span class="nv">foo</span> <span class="p">(</span><span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nv">x</span> <span class="mi">5</span><span class="p">))</span></code></pre></figure><p>Then, later, you can call that <code>x</code>:</p><figure class="highlight"><pre><code class="language-lisp" data-lang="lisp"><span></span><span class="p">(</span><span class="nb">defun</span> <span class="nv">bar</span> <span class="p">(</span><span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">x</span> <span class="mi">1</span><span class="p">))</span> <span class="nv">//</span> <span class="nv">defining</span> <span class="k">function</span> <span class="nv">bar</span>
<span class="p">(</span><span class="nb">print</span> <span class="p">(</span><span class="nv">foo</span> <span class="nv">bar</span><span class="p">))</span> <span class="nv">//</span> <span class="nv">passing</span> <span class="nv">bar</span> <span class="nv">as</span> <span class="nv">an</span> <span class="nv">argument</span> <span class="nv">to</span> <span class="nv">foo</span></code></pre></figure><p>Static methods in Java are not <em>functions</em> in terms of functional programming. You can&#39;t do anything like this with a static method. You can&#39;t pass a static method as an argument to another method. Basically, static methods are procedures or, simply put, Java statements grouped under a unique name. The only way to access them is to call a procedure and pass all necessary arguments to it. The procedure will calculate something and return a result that is immediately ready for usage.</p><p>And now we&#39;re getting to the final question I can hear you asking: &quot;Okay, utility classes are not functional programming, but they look like functional programming, they work very fast, and they are very easy to use. Why not use them? Why aim for perfection when 20 years of Java history proves that utility classes are the main instrument of each Java developer?&quot;</p><p>Besides <a href="/2016/08/15/what-is-wrong-object-oriented-programming.html">OOP</a> fundamentalism, which I&#39;m very often accused of, there are a few very practical reasons (BTW, I am an OOP fundamentalist):</p><ul> <li><p><strong>Testability</strong>. Calls to static methods in utility classes are hard-coded dependencies that can never be broken for testing purposes. If your class is calling <code>FileUtils.readFile()</code>, I will never be able to test it without using a real file on disk.</p></li> <li><p><strong>Efficiency</strong>. Utility classes, due to their imperative nature, are much less efficient than their <a href="/2014/05/05/oop-alternative-to-utility-classes.html">declarative alternatives</a>. They simply do all calculations right here and now, taking processor resources even when it&#39;s not yet necessary. Instead of returning a promise to break down a string into chunks, <code>StringUtils.split()</code> breaks it down right now. And it breaks it down into all possible chunks, even if only the first one is required by the &quot;buyer.&quot;</p></li> <li><p><strong>Readability</strong>. Utility classes tend to be huge (try to read the source code of <code>StringUtils</code> or <code>FileUtils</code> from Apache Commons). The entire idea of separation of concerns, which makes OOP so beautiful, is absent in utility classes. They just put all possible procedures into one huge <code>.java</code> file, which becomes absolutely unmaintainable when it surpasses a dozen static methods.</p></li></ul><p>To conclude, let me reiterate: Utility classes have nothing to do with functional programming. They are simply bags of static methods, which are imperative procedures. Try to stay as far as possible away from them and use solid, cohesive objects no matter how many of them you have to declare and how small they are.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/02/20/utility-classes-vs-functional-programming.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/02/20/utility-classes-vs-functional-programming.html&amp;text=Utility+Classes+Have+Nothing+to+Do+With+Functional+Programming" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/02/20/utility-classes-vs-functional-programming.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/02/20/utility-classes-vs-functional-programming.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/02/20/utility-classes-vs-functional-programming.html%3F2015-07&amp;title=Utility+Classes+Have+Nothing+to+Do+With+Functional+Programming" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/02/20/utility-classes-vs-functional-programming.html%3F2015-07&amp;t=Utility+Classes+Have+Nothing+to+Do+With+Functional+Programming" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>I was recently <a href="https://twitter.com/lukaseder/status/564866432790708224">accused</a> of being against <a href="http://en.wikipedia.org/wiki/Functional_programming">functional programming</a> because <a href="/2014/05/05/oop-alternative-to-utility-classes.html">I call utility classes an anti-pattern</a>. That&#39;s absolutely wrong! Well, I do consider them a terrible anti-pattern, but they have nothing to do with functional programming. I believe there are two basic reasons why. First, functional programming is declarative, while utility class methods are imperative. Second, functional programming is based on lambda calculus, where a function can be assigned to a variable. Utility class methods are not functions in this sense. I&#39;ll decode these statements in a minute.</p><p>In Java, there are basically two valid alternatives to these ugly utility classes aggressively promoted by <a href="https://code.google.com/p/guava-libraries/">Guava</a>, <a href="http://commons.apache.org/">Apache Commons</a>, and others. The first one is the use of traditional classes, and the second one is <a href="http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html">Java&nbsp;8 lambda</a>. Now let&#39;s see why utility classes are not even close to functional programming and where this misconception is coming from.</p><figure class='jb_picture'><img itemprop='image' alt='Color Me Kubrick (2005) by Brian W. Cook' src='/images/2015/02/color-me-kubrick.png' longdesc='#56d1f92f'/><figcaption id='56d1f92f'>Color Me Kubrick (2005) by Brian W. Cook</figcaption></figure><p>Here is a typical example of a utility class <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html"><code>Math</code></a> from Java 1.0:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Math</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">double</span> <span class="nf">abs</span><span class="o">(</span><span class="kt">double</span> <span class="n">a</span><span class="o">);</span>
  <span class="c1">// a few dozens of other methods of the same style</span>
<span class="o">}</span></code></pre></figure><p>Here is how you would use it when you want to calculate an absolute value of a floating point number:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">abs</span><span class="o">(</span><span class="mf">3.1415926d</span><span class="o">);</span></code></pre></figure> <aside class='quote'>The code will work, but it is not object-oriented programming</aside><p>What&#39;s wrong with it? We need a function, and we get it from class <code>Math</code>. The class has many useful functions inside it that can be used for many typical mathematical operations, like calculating maximum, minimum, sine, cosine, etc. It is a very popular concept; just look at any commercial or open source product. These utility classes are used everywhere since Java was invented (this <code>Math</code> class was introduced in Java&#39;s first version). Well, technically there is nothing wrong. The code will work. But it is not object-oriented programming. Instead, it is imperative and procedural. Do we care? Well, it&#39;s up to you to decide. Let&#39;s see what the difference is.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=D0dqC_3Bch8'><div class='box'> <img src='https://i.ytimg.com/vi/D0dqC_3Bch8/mqdefault.jpg' alt='YouTube video #D0dqC_3Bch8'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Objects vs. Static Methods (webinar #1); 8 April 2015.</div></aside><p>There are basically two different approaches: declarative and imperative.</p><p><a href="http://en.wikipedia.org/wiki/Imperative_programming">Imperative programming</a> is focused on describing <strong>how</strong> a program operates in terms of statements that change a program state. We just saw an example of imperative programming above. Here is another (this is pure imperative/procedural programming that has nothing to do with <a href="/2016/08/15/what-is-wrong-object-oriented-programming.html">OOP</a>):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyMath</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">double</span> <span class="nf">f</span><span class="o">(</span><span class="kt">double</span> <span class="n">a</span><span class="o">,</span> <span class="kt">double</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="n">max</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">);</span>
    <span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">abs</span><span class="o">(</span><span class="n">max</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p><a href="http://en.wikipedia.org/wiki/Declarative_programming">Declarative programming</a> focuses on <strong>what</strong> the program should accomplish without prescribing how to do it in terms of sequences of actions to be taken. This is how the same code would look in Lisp, a functional programming language:</p><figure class="highlight"><pre><code class="language-lisp" data-lang="lisp"><span></span><span class="p">(</span><span class="nb">defun</span> <span class="nv">f</span> <span class="p">(</span><span class="nv">a</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nb">abs</span> <span class="p">(</span><span class="nb">max</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">)))</span></code></pre></figure><p>What&#39;s the catch? Just a difference in syntax? Not really.</p><p>There are <a href="http://en.wikipedia.org/wiki/Comparison_of_programming_paradigms">many definitions</a> of the difference between imperative and declarative styles, but I will try to give my own. There are basically three roles interacting in the scenario with this <code>f</code> function/method: a <em>buyer</em>, a <em>packager</em> of the result, and a <em>consumer</em> of the result. Let&#39;s say I call this function like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span>
  <span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">calc</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="o">-</span><span class="mi">7</span><span class="o">);</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;max+abs equals to &quot;</span> <span class="o">+</span> <span class="n">x</span><span class="o">);</span>
<span class="o">}</span>
<span class="kd">private</span> <span class="kt">double</span> <span class="nf">calc</span><span class="o">(</span><span class="kt">double</span> <span class="n">a</span><span class="o">,</span> <span class="kt">double</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
  <span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">f</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">);</span>
  <span class="k">return</span> <span class="n">x</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure><p>Here, method <code>calc()</code> is a buyer, method <code>Math.f()</code> is a packager of the result, and method <code>foo()</code> is a consumer. No matter which programming style is used, there are always these three guys participating in the process: the buyer, the packager, and the consumer.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=psrp3TtaYYI'><div class='box'> <img src='https://i.ytimg.com/vi/psrp3TtaYYI/mqdefault.jpg' alt='YouTube video #psrp3TtaYYI'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>What&#39;s Wrong About Utility Classes? (webinar #6); 2 September 2015.</div></aside><p>Imagine you&#39;re a buyer and want to purchase a gift for your (girl|boy)friend. The first option is to visit a shop, pay $50, let them package that perfume for you, and then deliver it to the friend (and get a kiss in return). This is an <strong>imperative</strong> style.</p><p>The second option is to visit a shop, pay $50, and get a gift card. You then present this card to the friend (and get a kiss in return). When he or she decides to convert it to perfume, he or she will visit the shop and get it. This is a <strong>declarative</strong> style.</p><p>See the difference?</p><p>In the first case, which is imperative, you force the packager (a beauty shop) to find that perfume in stock, package it, and present it to you as a ready-to-be-used product. In the second scenario, which is declarative, you&#39;re just getting a <strong>promise</strong> from the shop that eventually, when it&#39;s necessary, the staff will find the perfume in stock, package it, and provide it to those who need it. If your friend never visits the shop with that gift card, the perfume will remain in stock.</p><p>Moreover, your friend can use that gift card as a product itself, never visiting the shop. He or she may instead present it to somebody else as a gift or just exchange it for another card or product. The gift card itself becomes a product!</p><p>So the difference is what the consumer is getting---either a product ready to be used (imperative) or a voucher for the product, which can later be converted into a real product (declarative).</p><p>Utility classes, like <code>Math</code> from JDK or <code>StringUtils</code> from Apache Commons, return products ready to be used immediately, while functions in Lisp and other functional languages return &quot;vouchers.&quot; For example, if you call the <code>max</code> function in Lisp, the actual maximum between two numbers will only be calculated when you actually start using it:</p><figure class="highlight"><pre><code class="language-lisp" data-lang="lisp"><span></span><span class="p">(</span><span class="k">let</span> <span class="p">(</span><span class="nv">x</span> <span class="p">(</span><span class="nb">max</span> <span class="mi">1</span> <span class="mi">5</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">print</span> <span class="s">&quot;X equals to &quot;</span> <span class="nv">x</span><span class="p">))</span></code></pre></figure><p>Until this <code>print</code> actually starts to output characters to the screen, the function <code>max</code> won&#39;t be called. This <code>x</code> is a &quot;voucher&quot; returned to you when you attempted to &quot;buy&quot; a maximum between <code>1</code> and <code>5</code>.</p><p>Note, however, that nesting Java static functions one into another doesn&#39;t make them declarative. The code is still imperative, because its execution delivers the result here and now:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyMath</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">double</span> <span class="nf">f</span><span class="o">(</span><span class="kt">double</span> <span class="n">a</span><span class="o">,</span> <span class="kt">double</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Math</span><span class="o">.</span><span class="na">abs</span><span class="o">(</span><span class="n">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">));</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>&quot;Okay,&quot; you may say, &quot;I got it, but why is declarative style better than imperative? What&#39;s the big deal?&quot; I&#39;m getting to it. Let me first show the difference between functions in functional programming and static methods in OOP. As mentioned above, this is the second big difference between utility classes and functional programming.</p><p>In any functional programming language, you can do this:</p><figure class="highlight"><pre><code class="language-lisp" data-lang="lisp"><span></span><span class="p">(</span><span class="nb">defun</span> <span class="nv">foo</span> <span class="p">(</span><span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nv">x</span> <span class="mi">5</span><span class="p">))</span></code></pre></figure><p>Then, later, you can call that <code>x</code>:</p><figure class="highlight"><pre><code class="language-lisp" data-lang="lisp"><span></span><span class="p">(</span><span class="nb">defun</span> <span class="nv">bar</span> <span class="p">(</span><span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">x</span> <span class="mi">1</span><span class="p">))</span> <span class="nv">//</span> <span class="nv">defining</span> <span class="k">function</span> <span class="nv">bar</span>
<span class="p">(</span><span class="nb">print</span> <span class="p">(</span><span class="nv">foo</span> <span class="nv">bar</span><span class="p">))</span> <span class="nv">//</span> <span class="nv">passing</span> <span class="nv">bar</span> <span class="nv">as</span> <span class="nv">an</span> <span class="nv">argument</span> <span class="nv">to</span> <span class="nv">foo</span></code></pre></figure><p>Static methods in Java are not <em>functions</em> in terms of functional programming. You can&#39;t do anything like this with a static method. You can&#39;t pass a static method as an argument to another method. Basically, static methods are procedures or, simply put, Java statements grouped under a unique name. The only way to access them is to call a procedure and pass all necessary arguments to it. The procedure will calculate something and return a result that is immediately ready for usage.</p><p>And now we&#39;re getting to the final question I can hear you asking: &quot;Okay, utility classes are not functional programming, but they look like functional programming, they work very fast, and they are very easy to use. Why not use them? Why aim for perfection when 20 years of Java history proves that utility classes are the main instrument of each Java developer?&quot;</p><p>Besides <a href="/2016/08/15/what-is-wrong-object-oriented-programming.html">OOP</a> fundamentalism, which I&#39;m very often accused of, there are a few very practical reasons (BTW, I am an OOP fundamentalist):</p><ul> <li><p><strong>Testability</strong>. Calls to static methods in utility classes are hard-coded dependencies that can never be broken for testing purposes. If your class is calling <code>FileUtils.readFile()</code>, I will never be able to test it without using a real file on disk.</p></li> <li><p><strong>Efficiency</strong>. Utility classes, due to their imperative nature, are much less efficient than their <a href="/2014/05/05/oop-alternative-to-utility-classes.html">declarative alternatives</a>. They simply do all calculations right here and now, taking processor resources even when it&#39;s not yet necessary. Instead of returning a promise to break down a string into chunks, <code>StringUtils.split()</code> breaks it down right now. And it breaks it down into all possible chunks, even if only the first one is required by the &quot;buyer.&quot;</p></li> <li><p><strong>Readability</strong>. Utility classes tend to be huge (try to read the source code of <code>StringUtils</code> or <code>FileUtils</code> from Apache Commons). The entire idea of separation of concerns, which makes OOP so beautiful, is absent in utility classes. They just put all possible procedures into one huge <code>.java</code> file, which becomes absolutely unmaintainable when it surpasses a dozen static methods.</p></li></ul><p>To conclude, let me reiterate: Utility classes have nothing to do with functional programming. They are simply bags of static methods, which are imperative procedures. Try to stay as far as possible away from them and use solid, cohesive objects no matter how many of them you have to declare and how small they are.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Each change we make to our software has to provide some value to our users and customers; our technical objectives should take a back seat. " /> <meta name="keywords" content="breaking down tasks, incremental delivery, iterative and incremental, iterative programming, tasks breaking down" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-02-12 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Code For the User, Not for Yourself"/> <meta name="twitter:description" property="og:description" content="Each change we make to our software has to provide some value to our users and customers; our technical objectives should take a back seat. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/02/12/top-down-design.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/02/12/top-down-design.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/02/12/top-down-design.amp.html" /> <title>Code For the User, Not for Yourself </title> <meta name='og:image' content='https://www.yegor256.com/images/2015/02/delicatessen.png'/><meta name='twitter:image' content='https://www.yegor256.com/images/2015/02/delicatessen.png'/><meta name='og:image:width' content='1280'/> <meta name='twitter:image:width' content='1280'/><meta name='og:image:height' content='673'/> <meta name='twitter:image:height' content='673'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Delicatessen (1991) by Jean-Pierre Jeunet'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/02/12/top-down-design.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/02/12/top-down-design.html">https://www.yegor256.com/2015/02/12/top-down-design.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Code For the User, Not for Yourself</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-02-12T00:00:00+00:00"> 12 February 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/02/12/top-down-design.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>First, no matter what the methodology is, we all write software for our users (a.k.a. customers, project sponsors, end users, or <a href="/2015/01/26/happy-boss-false-objective.html">clients</a>). Second, no matter what the methodology is, we write incrementally, releasing features and bug fixes one by one. Maybe I&#39;m saying something absolutely obvious here, but it&#39;s important to remember that each new version should first of all satisfy the needs of the user, not of us programmers. In other words, the way we decompose a big task into smaller pieces should be user-targeted, and that&#39;s why you always work <strong>top down</strong>. Let&#39;s see what I mean through a practical example.</p><figure class='jb_picture'><img itemprop='image' alt='Delicatessen (1991) by Jean-Pierre Jeunet' src='/images/2015/02/delicatessen.png' longdesc='#077c7d62'/><figcaption id='077c7d62'>Delicatessen (1991) by Jean-Pierre Jeunet</figcaption></figure><p>Say I&#39;m contracted by a friend of mine to create a word-counting command line tool very similar to <a href="http://en.wikipedia.org/wiki/Wc_%28Unix%29">wc</a>. He promised to pay me $200 for this work, and I promised him I&#39;d deliver the product in two increments---an alpha and beta version. I promised him I&#39;d release the alpha version on Saturday and the beta version on Sunday. He is going to pay me $100 after the first release and the rest after the second release.</p><p>I&#39;ll write in C, and he will pay in cash.</p><p>The tool is very primitive, and it only took me a few minutes to write. Take a look at it:</p><figure class="highlight"><pre><code class="language-c" data-lang="c"><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp"></span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">ch</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">read</span><span class="p">(</span><span class="n">STDIN_FILENO</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ch</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ch</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="o">++</span><span class="n">count</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="o">++</span><span class="n">count</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">count</span><span class="p">);</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure><p>But let&#39;s be professional and not forget about build automation and unit testing. Here is a simple <code>Makefile</code> that does them both:</p><figure class="highlight"><pre><code class="language-makefile" data-lang="makefile"><span></span><span class="nf">all</span><span class="o">:</span> <span class="n">wc</span> <span class="n">test</span>
<span class="nf">wc</span><span class="o">:</span> <span class="n">wc</span>.<span class="n">c</span>
  gcc -o wc wc.c
<span class="nf">test</span><span class="o">:</span> <span class="n">wc</span>
  <span class="nb">echo</span> <span class="s1">&#39;&#39;</span> <span class="p">|</span> ./wc <span class="p">|</span> grep <span class="s1">&#39;0&#39;</span>
  <span class="nb">echo</span> <span class="s1">&#39;Hello, world! How are you?&#39;</span> <span class="p">|</span> ./wc <span class="p">|</span> grep <span class="s1">&#39;5&#39;</span></code></pre></figure><p>Now I run <code>make</code> from a command line and get this output:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>$ make
echo &#39;&#39; | ./wc | grep &#39;0&#39;
0
echo &#39;Hello, world! How are you?&#39; | ./wc | grep &#39;5&#39;
5</code></pre></figure><p>All clean!</p><p>I&#39;m ready to get my $200. Wait, the deal was to deliver two versions and get cash in two installments. Let&#39;s back up a little and think---how can we break this small tool into two parts?</p><p>On first thought, let&#39;s release the tool itself first and build automation and testing next. Is that a good idea? Can we deliver any software without running it first with a test? How can I be sure that it works if I don&#39;t ship tests together with it? What will my friend think about me releasing anything without tests? This would be a total embarrassment.</p><p>Okay, let&#39;s release <code>Makefile</code> first and <code>wc.c</code> next. But what will my friend do with a couple of tests and no product in hand? This first release will be absolutely pointless, and I won&#39;t get my $100.</p><aside class='quote'>Every new increment must add some value to the product as it is perceived by the customer, not by us programmers</aside><p>Now we&#39;re getting to the point of this article. What I&#39;m trying to say is that every new increment must add some value to the product as it is perceived by the customer, not by us programmers. The <code>Makefile</code> is definitely a valuable artifact, but it provides no value to my friend. He doesn&#39;t need it, but I need it.</p><p>Here is what I&#39;m going to do. I&#39;ll release a skeleton of the tool, backed by the tests but with an absolutely dummy implementation. Look at it:</p><figure class="highlight"><pre><code class="language-c" data-lang="c"><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;5</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure><p>And I will modify the <code>Makefile</code> accordingly. I will disable the first test to make sure the build passes.</p><p>Does my tool work? Yes, it does. Does it count words? Yes, it does for some inputs. Does it have value to my friend. Obviously! He can run it from the command line, and he can pass a file as an input. He will always get number &quot;5&quot; as a result of counting, though. That&#39;s a bummer, but it&#39;s an alpha version. He doesn&#39;t expect it to work perfectly.</p><p>However, it works, it is backed by tests, and it is properly packaged.</p><p>What I just did is a top-down approach to design. First of all, I created something that provides value to my customer. I made sure it also satisfies my technical objectives, like proper unit test coverage and build automation. But the most important goal for me was to make sure my friend received something ... and paid me.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/02/12/top-down-design.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/02/12/top-down-design.html&amp;text=Code+For+the+User%2C+Not+for+Yourself" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/02/12/top-down-design.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/02/12/top-down-design.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/02/12/top-down-design.html%3F2015-06&amp;title=Code+For+the+User%2C+Not+for+Yourself" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/02/12/top-down-design.html%3F2015-06&amp;t=Code+For+the+User%2C+Not+for+Yourself" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>First, no matter what the methodology is, we all write software for our users (a.k.a. customers, project sponsors, end users, or <a href="/2015/01/26/happy-boss-false-objective.html">clients</a>). Second, no matter what the methodology is, we write incrementally, releasing features and bug fixes one by one. Maybe I&#39;m saying something absolutely obvious here, but it&#39;s important to remember that each new version should first of all satisfy the needs of the user, not of us programmers. In other words, the way we decompose a big task into smaller pieces should be user-targeted, and that&#39;s why you always work <strong>top down</strong>. Let&#39;s see what I mean through a practical example.</p><figure class='jb_picture'><img itemprop='image' alt='Delicatessen (1991) by Jean-Pierre Jeunet' src='/images/2015/02/delicatessen.png' longdesc='#077c7d62'/><figcaption id='077c7d62'>Delicatessen (1991) by Jean-Pierre Jeunet</figcaption></figure><p>Say I&#39;m contracted by a friend of mine to create a word-counting command line tool very similar to <a href="http://en.wikipedia.org/wiki/Wc_%28Unix%29">wc</a>. He promised to pay me $200 for this work, and I promised him I&#39;d deliver the product in two increments---an alpha and beta version. I promised him I&#39;d release the alpha version on Saturday and the beta version on Sunday. He is going to pay me $100 after the first release and the rest after the second release.</p><p>I&#39;ll write in C, and he will pay in cash.</p><p>The tool is very primitive, and it only took me a few minutes to write. Take a look at it:</p><figure class="highlight"><pre><code class="language-c" data-lang="c"><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp"></span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">ch</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">read</span><span class="p">(</span><span class="n">STDIN_FILENO</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ch</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ch</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="o">++</span><span class="n">count</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="o">++</span><span class="n">count</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">count</span><span class="p">);</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure><p>But let&#39;s be professional and not forget about build automation and unit testing. Here is a simple <code>Makefile</code> that does them both:</p><figure class="highlight"><pre><code class="language-makefile" data-lang="makefile"><span></span><span class="nf">all</span><span class="o">:</span> <span class="n">wc</span> <span class="n">test</span>
<span class="nf">wc</span><span class="o">:</span> <span class="n">wc</span>.<span class="n">c</span>
  gcc -o wc wc.c
<span class="nf">test</span><span class="o">:</span> <span class="n">wc</span>
  <span class="nb">echo</span> <span class="s1">&#39;&#39;</span> <span class="p">|</span> ./wc <span class="p">|</span> grep <span class="s1">&#39;0&#39;</span>
  <span class="nb">echo</span> <span class="s1">&#39;Hello, world! How are you?&#39;</span> <span class="p">|</span> ./wc <span class="p">|</span> grep <span class="s1">&#39;5&#39;</span></code></pre></figure><p>Now I run <code>make</code> from a command line and get this output:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>$ make
echo &#39;&#39; | ./wc | grep &#39;0&#39;
0
echo &#39;Hello, world! How are you?&#39; | ./wc | grep &#39;5&#39;
5</code></pre></figure><p>All clean!</p><p>I&#39;m ready to get my $200. Wait, the deal was to deliver two versions and get cash in two installments. Let&#39;s back up a little and think---how can we break this small tool into two parts?</p><p>On first thought, let&#39;s release the tool itself first and build automation and testing next. Is that a good idea? Can we deliver any software without running it first with a test? How can I be sure that it works if I don&#39;t ship tests together with it? What will my friend think about me releasing anything without tests? This would be a total embarrassment.</p><p>Okay, let&#39;s release <code>Makefile</code> first and <code>wc.c</code> next. But what will my friend do with a couple of tests and no product in hand? This first release will be absolutely pointless, and I won&#39;t get my $100.</p><aside class='quote'>Every new increment must add some value to the product as it is perceived by the customer, not by us programmers</aside><p>Now we&#39;re getting to the point of this article. What I&#39;m trying to say is that every new increment must add some value to the product as it is perceived by the customer, not by us programmers. The <code>Makefile</code> is definitely a valuable artifact, but it provides no value to my friend. He doesn&#39;t need it, but I need it.</p><p>Here is what I&#39;m going to do. I&#39;ll release a skeleton of the tool, backed by the tests but with an absolutely dummy implementation. Look at it:</p><figure class="highlight"><pre><code class="language-c" data-lang="c"><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;5</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure><p>And I will modify the <code>Makefile</code> accordingly. I will disable the first test to make sure the build passes.</p><p>Does my tool work? Yes, it does. Does it count words? Yes, it does for some inputs. Does it have value to my friend. Obviously! He can run it from the command line, and he can pass a file as an input. He will always get number &quot;5&quot; as a result of counting, though. That&#39;s a bummer, but it&#39;s an alpha version. He doesn&#39;t expect it to work perfectly.</p><p>However, it works, it is backed by tests, and it is properly packaged.</p><p>What I just did is a top-down approach to design. First of all, I created something that provides value to my customer. I made sure it also satisfies my technical objectives, like proper unit test coverage and build automation. But the most important goal for me was to make sure my friend received something ... and paid me.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Maven pom.xml files may be repeatedly verbose from project to project; jcabi-parent offers a pre-configured solution. " /> <meta name="keywords" content="maven parent pom, maven pom, maven pom settings, parent pom maven, pom reference" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-02-05 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Don't Repeat Yourself in Maven POMs; Use Jcabi-Parent"/> <meta name="twitter:description" property="og:description" content="Maven pom.xml files may be repeatedly verbose from project to project; jcabi-parent offers a pre-configured solution. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/02/05/jcabi-parent-maven-pom.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/02/05/jcabi-parent-maven-pom.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/02/05/jcabi-parent-maven-pom.amp.html" /> <title>Don&#39;t Repeat Yourself in Maven POMs; Use Jcabi-Parent </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/02/05/jcabi-parent-maven-pom.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/02/05/jcabi-parent-maven-pom.html">https://www.yegor256.com/2015/02/05/jcabi-parent-maven-pom.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Don&#39;t Repeat Yourself in Maven POMs; Use Jcabi-Parent</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-02-05T00:00:00+00:00"> 5 February 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/02/05/jcabi-parent-maven-pom.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><figure class='badge'><a href='http://http.jcabi.com'><img src='http://img.jcabi.com/logo-square.svg' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p>Maven is a build automation tool mostly for Java projects. It&#39;s a great tool, but it has one important drawback that has motivated the creation of similar tools, like Gradle and SBT. That weakness is its verbosity of configuration. Maven gets all project build parameters from <code>pom.xml</code>, an XML file that can get very long. I&#39;ve seen POM files of 3,000-plus lines. Taking into account 1) recent DSL buzz and 2) fear of XML, it&#39;s only logical that many people don&#39;t like Maven because of its <code>pom.xml</code> verbosity.</p><p>But even if you&#39;re an XML fan who enjoys its strictness and elegance (like myself), you won&#39;t like the necessity to repeat yourself in <code>pom.xml</code> for every project. If you&#39;re working on multiple projects, code duplication will be enormous. An average Java web app uses a few dozen standard Maven plugins and almost the same number of pretty common dependencies, like JUnit, Apache Commons, Log4J, Mockito, etc. All of them have their versions and configurations, which have to be specified if you want to keep the project stable and avoid Maven warnings. Thus, once a new version of a plugin is released, you have to go through all <code>pom.xml</code> files in the projects you&#39;re working on and update it there. You obviously understand what code duplication means. It&#39;s a disaster. However, there is a solution.</p><p><a href="http://parent.jcabi.com">jcabi-parent</a> is a very simple Maven dependency with nothing inside it except a large <code>pom.xml</code> with multiple pre-configured dependencies, profiles, and plugins. All you need to do in order to reuse them all in your project is define <code>com.jcabi:parent</code> as your parent POM:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&quot;<a href="http://maven.apache.org/POM/4.0.0">http://maven.apache.org/POM/4.0.0</a>&quot;</span>
  <span class="na">xmlns:xsi=</span><span class="s">&quot;<a href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>&quot;</span>
  <span class="na">xsi:schemaLocation=</span><span class="s">&quot;<a href="http://maven.apache.org/POM/4.0.0">http://maven.apache.org/POM/4.0.0</a></span>
<span class="s">    <a href="http://maven.apache.org/xsd/maven-4.0.0.xsd">http://maven.apache.org/xsd/maven-4.0.0.xsd</a>&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
  <span class="nt">&lt;parent&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.jcabi<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>parent<span class="nt">&lt;/artifactId&gt;</span>
    <span class="c">&lt;!-- check the latest version at <a href="http://parent.jcabi.com">http://parent.jcabi.com</a> --&gt;</span>
    <span class="nt">&lt;version&gt;</span>0.32.1<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;/parent&gt;</span>
  [...]
<span class="nt">&lt;/project&gt;</span></code></pre></figure><p>That&#39;s all you need. Now you can remove most of your custom configurations from <code>pom.xml</code> and rely on defaults provided by jcabi-parent. Its <a href="https://github.com/jcabi/jcabi-parent/blob/master/pom.xml"><code>pom.xml</code></a> is rather large and properly configured. Multiple projects depend on it, so you can be confident that you&#39;re using the best possible configuration of all standard plugins.</p><p>Here are a few examples of <code>pom.xml</code> from projects that are using jcabi-parent (you can see how compact they are): <a href="https://github.com/yegor256/xembly/blob/master/pom.xml">Xembly</a> <a href="https://github.com/yegor256/rexsl/blob/master/pom.xml">ReXSL</a> <a href="https://github.com/jcabi/jcabi-http/blob/master/pom.xml">jcabi-http</a> <a href="https://github.com/teamed/qulice/blob/master/pom.xml">Qulice</a></p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/02/05/jcabi-parent-maven-pom.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/02/05/jcabi-parent-maven-pom.html&amp;text=Don%27t+Repeat+Yourself+in+Maven+POMs%3B+Use+Jcabi-Parent" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/02/05/jcabi-parent-maven-pom.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/02/05/jcabi-parent-maven-pom.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/02/05/jcabi-parent-maven-pom.html%3F2015-05&amp;title=Don%27t+Repeat+Yourself+in+Maven+POMs%3B+Use+Jcabi-Parent" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/02/05/jcabi-parent-maven-pom.html%3F2015-05&amp;t=Don%27t+Repeat+Yourself+in+Maven+POMs%3B+Use+Jcabi-Parent" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div > <figure class='badge'><a href='http://http.jcabi.com'><img src='http://img.jcabi.com/logo-square.svg' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p>Maven is a build automation tool mostly for Java projects. It&#39;s a great tool, but it has one important drawback that has motivated the creation of similar tools, like Gradle and SBT. That weakness is its verbosity of configuration. Maven gets all project build parameters from <code>pom.xml</code>, an XML file that can get very long. I&#39;ve seen POM files of 3,000-plus lines. Taking into account 1) recent DSL buzz and 2) fear of XML, it&#39;s only logical that many people don&#39;t like Maven because of its <code>pom.xml</code> verbosity.</p><p>But even if you&#39;re an XML fan who enjoys its strictness and elegance (like myself), you won&#39;t like the necessity to repeat yourself in <code>pom.xml</code> for every project. If you&#39;re working on multiple projects, code duplication will be enormous. An average Java web app uses a few dozen standard Maven plugins and almost the same number of pretty common dependencies, like JUnit, Apache Commons, Log4J, Mockito, etc. All of them have their versions and configurations, which have to be specified if you want to keep the project stable and avoid Maven warnings. Thus, once a new version of a plugin is released, you have to go through all <code>pom.xml</code> files in the projects you&#39;re working on and update it there. You obviously understand what code duplication means. It&#39;s a disaster. However, there is a solution.</p><p><a href="http://parent.jcabi.com">jcabi-parent</a> is a very simple Maven dependency with nothing inside it except a large <code>pom.xml</code> with multiple pre-configured dependencies, profiles, and plugins. All you need to do in order to reuse them all in your project is define <code>com.jcabi:parent</code> as your parent POM:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&quot;<a href="http://maven.apache.org/POM/4.0.0">http://maven.apache.org/POM/4.0.0</a>&quot;</span>
  <span class="na">xmlns:xsi=</span><span class="s">&quot;<a href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>&quot;</span>
  <span class="na">xsi:schemaLocation=</span><span class="s">&quot;<a href="http://maven.apache.org/POM/4.0.0">http://maven.apache.org/POM/4.0.0</a></span>
<span class="s">    <a href="http://maven.apache.org/xsd/maven-4.0.0.xsd">http://maven.apache.org/xsd/maven-4.0.0.xsd</a>&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
  <span class="nt">&lt;parent&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.jcabi<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>parent<span class="nt">&lt;/artifactId&gt;</span>
    <span class="c">&lt;!-- check the latest version at <a href="http://parent.jcabi.com">http://parent.jcabi.com</a> --&gt;</span>
    <span class="nt">&lt;version&gt;</span>0.32.1<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;/parent&gt;</span>
  [...]
<span class="nt">&lt;/project&gt;</span></code></pre></figure><p>That&#39;s all you need. Now you can remove most of your custom configurations from <code>pom.xml</code> and rely on defaults provided by jcabi-parent. Its <a href="https://github.com/jcabi/jcabi-parent/blob/master/pom.xml"><code>pom.xml</code></a> is rather large and properly configured. Multiple projects depend on it, so you can be confident that you&#39;re using the best possible configuration of all standard plugins.</p><p>Here are a few examples of <code>pom.xml</code> from projects that are using jcabi-parent (you can see how compact they are): <a href="https://github.com/yegor256/xembly/blob/master/pom.xml">Xembly</a> <a href="https://github.com/yegor256/rexsl/blob/master/pom.xml">ReXSL</a> <a href="https://github.com/jcabi/jcabi-http/blob/master/pom.xml">jcabi-http</a> <a href="https://github.com/teamed/qulice/blob/master/pom.xml">Qulice</a></p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="XSL transformations can be accomplished in Java through a single method call with the help of jcabi-xml. " /> <meta name="keywords" content="java xslt code example, java xslt example, transform xml java, xml transformation java, xslt java" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-02-02 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="XSL Transformation in Java: An Easy Way"/> <meta name="twitter:description" property="og:description" content="XSL transformations can be accomplished in Java through a single method call with the help of jcabi-xml. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.amp.html" /> <title>XSL Transformation in Java: An Easy Way </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html">https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">XSL Transformation in Java: An Easy Way</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-02-02T00:00:00+00:00"> 2 February 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><figure class='badge'><a href='http://http.jcabi.com'><img src='http://img.jcabi.com/logo-square.svg' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.w3.org/TR/xslt20/">XSL transformation</a> (XSLT) is a powerful mechanism for converting one XML document into another. However, in Java, XML manipulations are rather verbose and complex. Even for a simple XSL transformation, you have to write a few dozen lines of code---and maybe even more than that if proper exception handling and logging is needed. <a href="/2014/04/24/java-xml-parsing-and-traversing.html">jcabi-xml</a> is a small open source library that makes life much easier by enabling XML parsing and XPath traversing with <a href="/2014/04/24/java-xml-parsing-and-traversing.html">a few simple methods</a>. Let&#39;s see how this library helps in XSL transformations.</p><p>First, take a look at a practical example---<a href="http://www.rultor.com">rultor.com</a>---a hosted DevOps assistant that <a href="/2014/07/24/rultor-automated-merging.html">automates</a> release, merge, and deploy operations. Rultor keeps each conversation session with an end user (a.k.a. &quot;talk&quot;) in a DynamoDB record. There are multiple situations to handle in each talk; that&#39;s why using multiple columns of a record is not really feasible. Instead, we&#39;re keeping only a few parameters of each talk in record columns (like ID and name) and putting all the rest in a single XML column.</p><p>This is approximately how our DynamoDB table looks:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>+----+---------------+--------------------------------------+
| id | name          | xml                                  |
+----+---------------+--------------------------------------+
| 12 | jcabi-xml#54  | &lt;?xml version=&#39;1.0&#39;?&gt;                |
|    |               | &lt;talk public=&quot;true&quot;&gt;                 |
|    |               |   &lt;request id=&quot;e5f4b3&quot;&gt;...&lt;/request&gt; |
|    |               | &lt;/talk&gt;                              |
+----+---------------+--------------------------------------+
| 13 | jcabi-email#2 | &lt;?xml version=&#39;1.0&#39;?&gt;                |
|    |               | &lt;talk public=&quot;true&quot;&gt;                 |
|    |               |   &lt;daemon id=&quot;f787fe&quot;&gt;...&lt;/daemon&gt;   |
|    |               | &lt;/talk&gt;                              |
+----+---------------+--------------------------------------+</code></pre></figure><p>Once a user posts <code>@rultor status</code> into a GitHub ticket, Rultor has to answer with a full status report about the current talk. In order to create such a text answer (a regular user would not appreciate an XML response), we have to fetch that <code>xml</code> column from the necessary DynamoDB record and convert it to plain English text.</p><p>Here is how we&#39;re doing that with the help of <a href="/2014/04/24/java-xml-parsing-and-traversing.html">jcabi-xml</a> and its class, <a href="http://xml.jcabi.com/apidocs-0.15/com/jcabi/xml/XSLDocument.html"><code>XSLDocument</code></a>.</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">String</span> <span class="n">xml</span> <span class="o">=</span> <span class="c1">// comes from DynamoDB</span>
<span class="kd">final</span> <span class="n">XSL</span> <span class="n">xsl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">XSLDocument</span><span class="o">(</span>
  <span class="k">this</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="s">&quot;status.xsl&quot;</span><span class="o">)</span>
<span class="o">);</span>
<span class="kd">final</span> <span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="n">xsl</span><span class="o">.</span><span class="na">applyTo</span><span class="o">(</span><span class="n">xml</span><span class="o">);</span></code></pre></figure><p>That&#39;s it. Now let&#39;s see what&#39;s there in that <code>status.xsl</code> file (this is just a skeleton of it; the full version is <a href="https://github.com/yegor256/rultor/blob/1.48/src/main/resources/com/rultor/agents/github/qtn/status.xsl">here</a>):</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;xsl:stylesheet</span> <span class="na">xmlns:xsl=</span><span class="s">&quot;<a href="http://www.w3.org/1999/XSL/Transform">http://www.w3.org/1999/XSL/Transform</a>&quot;</span>
  <span class="na">version=</span><span class="s">&quot;2.0&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsl:output</span> <span class="na">method=</span><span class="s">&quot;text&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;xsl:template</span> <span class="na">match=</span><span class="s">&quot;/talk&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsl:text&gt;</span>Hi, here is your status report:<span class="nt">&lt;/xsl:text&gt;</span>
    ...
  <span class="nt">&lt;/xsl:template&gt;</span>
  <span class="nt">&lt;xsl:template</span> <span class="na">match=</span><span class="s">&quot;node()|@<em>&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsl:copy&gt;</span>
      <span class="nt">&lt;xsl:apply-templates</span> <span class="na">select=</span><span class="s">&quot;node()|@</em>&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsl:copy&gt;</span>
  <span class="nt">&lt;/xsl:template&gt;</span>
<span class="nt">&lt;/xsl:stylesheet&gt;</span></code></pre></figure><p>It is good practice to create XSL documents only once per application run. We have a static utility method <a href="http://xml.jcabi.com/apidocs-0.15/com/jcabi/xml/XSLDocument.html#make%28java.io.InputStream%29"><code>XSLDocument.make()</code></a> for this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">XSL</span> <span class="n">STYLESHEET</span> <span class="o">=</span> <span class="n">XSLDocument</span><span class="o">.</span><span class="na">make</span><span class="o">(</span>
    <span class="n">Foo</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="s">&quot;stylesheet.xsl&quot;</span><span class="o">)</span>
  <span class="o">);</span>
  <span class="kd">public</span> <span class="n">XML</span> <span class="nf">style</span><span class="o">(</span><span class="kd">final</span> <span class="n">XML</span> <span class="n">xml</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Foo</span><span class="o">.</span><span class="na">STYLESHEET</span><span class="o">.</span><span class="na">transform</span><span class="o">(</span><span class="n">xml</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Pay attention to the fact we&#39;re using XSLT 2.0. Built-in Java implementation of XSLT doesn&#39;t support version 2.0, and in order to make it work, we&#39;re using these two Maven Saxon dependencies:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>net.sourceforge.saxon<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>saxon<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>9.1.0.8<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>net.sourceforge.saxon<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>saxon<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>9.1.0.8<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;classifier&gt;</span>xpath<span class="nt">&lt;/classifier&gt;</span>
  <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre></figure><p>All you need to do to start using <code>jcabi-xml</code> for XSL transformations is add this dependency to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.jcabi<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>jcabi-xml<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre></figure><p>If you have any problems or suggestions, don&#39;t hesitate to submit an issue to the GitHub <a href="https://github.com/jcabi/jcabi-xml/issues">issue tracker</a>.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html&amp;text=XSL+Transformation+in+Java%3A+An+Easy+Way" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html%3F2015-05&amp;title=XSL+Transformation+in+Java%3A+An+Easy+Way" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html%3F2015-05&amp;t=XSL+Transformation+in+Java%3A+An+Easy+Way" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div > <figure class='badge'><a href='http://http.jcabi.com'><img src='http://img.jcabi.com/logo-square.svg' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.w3.org/TR/xslt20/">XSL transformation</a> (XSLT) is a powerful mechanism for converting one XML document into another. However, in Java, XML manipulations are rather verbose and complex. Even for a simple XSL transformation, you have to write a few dozen lines of code---and maybe even more than that if proper exception handling and logging is needed. <a href="/2014/04/24/java-xml-parsing-and-traversing.html">jcabi-xml</a> is a small open source library that makes life much easier by enabling XML parsing and XPath traversing with <a href="/2014/04/24/java-xml-parsing-and-traversing.html">a few simple methods</a>. Let&#39;s see how this library helps in XSL transformations.</p><p>First, take a look at a practical example---<a href="http://www.rultor.com">rultor.com</a>---a hosted DevOps assistant that <a href="/2014/07/24/rultor-automated-merging.html">automates</a> release, merge, and deploy operations. Rultor keeps each conversation session with an end user (a.k.a. &quot;talk&quot;) in a DynamoDB record. There are multiple situations to handle in each talk; that&#39;s why using multiple columns of a record is not really feasible. Instead, we&#39;re keeping only a few parameters of each talk in record columns (like ID and name) and putting all the rest in a single XML column.</p><p>This is approximately how our DynamoDB table looks:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>+----+---------------+--------------------------------------+
| id | name          | xml                                  |
+----+---------------+--------------------------------------+
| 12 | jcabi-xml#54  | &lt;?xml version=&#39;1.0&#39;?&gt;                |
|    |               | &lt;talk public=&quot;true&quot;&gt;                 |
|    |               |   &lt;request id=&quot;e5f4b3&quot;&gt;...&lt;/request&gt; |
|    |               | &lt;/talk&gt;                              |
+----+---------------+--------------------------------------+
| 13 | jcabi-email#2 | &lt;?xml version=&#39;1.0&#39;?&gt;                |
|    |               | &lt;talk public=&quot;true&quot;&gt;                 |
|    |               |   &lt;daemon id=&quot;f787fe&quot;&gt;...&lt;/daemon&gt;   |
|    |               | &lt;/talk&gt;                              |
+----+---------------+--------------------------------------+</code></pre></figure><p>Once a user posts <code>@rultor status</code> into a GitHub ticket, Rultor has to answer with a full status report about the current talk. In order to create such a text answer (a regular user would not appreciate an XML response), we have to fetch that <code>xml</code> column from the necessary DynamoDB record and convert it to plain English text.</p><p>Here is how we&#39;re doing that with the help of <a href="/2014/04/24/java-xml-parsing-and-traversing.html">jcabi-xml</a> and its class, <a href="http://xml.jcabi.com/apidocs-0.15/com/jcabi/xml/XSLDocument.html"><code>XSLDocument</code></a>.</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">String</span> <span class="n">xml</span> <span class="o">=</span> <span class="c1">// comes from DynamoDB</span>
<span class="kd">final</span> <span class="n">XSL</span> <span class="n">xsl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">XSLDocument</span><span class="o">(</span>
  <span class="k">this</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="s">&quot;status.xsl&quot;</span><span class="o">)</span>
<span class="o">);</span>
<span class="kd">final</span> <span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="n">xsl</span><span class="o">.</span><span class="na">applyTo</span><span class="o">(</span><span class="n">xml</span><span class="o">);</span></code></pre></figure><p>That&#39;s it. Now let&#39;s see what&#39;s there in that <code>status.xsl</code> file (this is just a skeleton of it; the full version is <a href="https://github.com/yegor256/rultor/blob/1.48/src/main/resources/com/rultor/agents/github/qtn/status.xsl">here</a>):</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;xsl:stylesheet</span> <span class="na">xmlns:xsl=</span><span class="s">&quot;<a href="http://www.w3.org/1999/XSL/Transform">http://www.w3.org/1999/XSL/Transform</a>&quot;</span>
  <span class="na">version=</span><span class="s">&quot;2.0&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsl:output</span> <span class="na">method=</span><span class="s">&quot;text&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;xsl:template</span> <span class="na">match=</span><span class="s">&quot;/talk&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsl:text&gt;</span>Hi, here is your status report:<span class="nt">&lt;/xsl:text&gt;</span>
    ...
  <span class="nt">&lt;/xsl:template&gt;</span>
  <span class="nt">&lt;xsl:template</span> <span class="na">match=</span><span class="s">&quot;node()|@<em>&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsl:copy&gt;</span>
      <span class="nt">&lt;xsl:apply-templates</span> <span class="na">select=</span><span class="s">&quot;node()|@</em>&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsl:copy&gt;</span>
  <span class="nt">&lt;/xsl:template&gt;</span>
<span class="nt">&lt;/xsl:stylesheet&gt;</span></code></pre></figure><p>It is good practice to create XSL documents only once per application run. We have a static utility method <a href="http://xml.jcabi.com/apidocs-0.15/com/jcabi/xml/XSLDocument.html#make%28java.io.InputStream%29"><code>XSLDocument.make()</code></a> for this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">XSL</span> <span class="n">STYLESHEET</span> <span class="o">=</span> <span class="n">XSLDocument</span><span class="o">.</span><span class="na">make</span><span class="o">(</span>
    <span class="n">Foo</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="s">&quot;stylesheet.xsl&quot;</span><span class="o">)</span>
  <span class="o">);</span>
  <span class="kd">public</span> <span class="n">XML</span> <span class="nf">style</span><span class="o">(</span><span class="kd">final</span> <span class="n">XML</span> <span class="n">xml</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Foo</span><span class="o">.</span><span class="na">STYLESHEET</span><span class="o">.</span><span class="na">transform</span><span class="o">(</span><span class="n">xml</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Pay attention to the fact we&#39;re using XSLT 2.0. Built-in Java implementation of XSLT doesn&#39;t support version 2.0, and in order to make it work, we&#39;re using these two Maven Saxon dependencies:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>net.sourceforge.saxon<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>saxon<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>9.1.0.8<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>net.sourceforge.saxon<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>saxon<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>9.1.0.8<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;classifier&gt;</span>xpath<span class="nt">&lt;/classifier&gt;</span>
  <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre></figure><p>All you need to do to start using <code>jcabi-xml</code> for XSL transformations is add this dependency to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.jcabi<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>jcabi-xml<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre></figure><p>If you have any problems or suggestions, don&#39;t hesitate to submit an issue to the GitHub <a href="https://github.com/jcabi/jcabi-xml/issues">issue tracker</a>.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="It is very important to understand who you work for, the boss/customer who pays you or the project, and the difference between them. " /> <meta name="keywords" content="customer satisfaction, project objectives, project objectives definition, project objectives example, software project objectives" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-01-26 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Making Your Boss Happy Is a False Objective"/> <meta name="twitter:description" property="og:description" content="It is very important to understand who you work for, the boss/customer who pays you or the project, and the difference between them. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/01/26/happy-boss-false-objective.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/01/26/happy-boss-false-objective.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/01/26/happy-boss-false-objective.amp.html" /> <title>Making Your Boss Happy Is a False Objective </title> <meta name='og:image' content='https://www.yegor256.com/images/2015/01/the-million-dollar-hotel.png'/><meta name='twitter:image' content='https://www.yegor256.com/images/2015/01/the-million-dollar-hotel.png'/><meta name='og:image:width' content='761'/> <meta name='twitter:image:width' content='761'/><meta name='og:image:height' content='317'/> <meta name='twitter:image:height' content='317'/><meta name='twitter:card' content='summary'/><meta name='twitter:image:alt' content='The Million Dollar Hotel (2000) by Wim Wenders'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/01/26/happy-boss-false-objective.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/01/26/happy-boss-false-objective.html">https://www.yegor256.com/2015/01/26/happy-boss-false-objective.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Making Your Boss Happy Is a False Objective</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-01-26T00:00:00+00:00"> 26 January 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/01/26/happy-boss-false-objective.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>We all have bosses. We also have customers who pay us for running their software projects. They are my bosses for the time of the contract. I&#39;m also acting as a boss for developers who are working for <a href="http://www.zerocracy.com">Zerocracy</a>. It is obvious that a good employee/contractor is one who makes his boss/customer happy. But only a bad employee works toward this goal. Trying to make your boss happy is a false target that, if pursued, ruins the project. A professional employee works for the project, not for the boss.</p><figure class='jb_picture'><img itemprop='image' alt='The Million Dollar Hotel (2000) by Wim Wenders' src='/images/2015/01/the-million-dollar-hotel.png' longdesc='#a14f03e8'/><figcaption id='a14f03e8'>The Million Dollar Hotel (2000) by Wim Wenders</figcaption></figure><p>We all work on <strong>projects</strong> as developers, designers, programmers, <a href="/2015/09/22/micromanagement.html">managers</a>, testers, you name it. The boss is also a member of the project. More formally, he or she is a <strong>stakeholder</strong>, same as every one of us. Each stakeholder has his own <strong>needs</strong> for the project: 1) Jeff, the developer, wants to learn Scala and collect his paychecks every two weeks; 2) Sally, the product owner, wants to attend an expo in Paris and also collect her paychecks; 3) Bob, the CTO, wants to raise round A funding and collect a big paycheck; etc.</p><p>The project has its own <strong>objectives</strong>, to achieve 1 million downloads in less than six months and under $300,000, for example. This is what the project works for. This is what all of us are here for.</p><p>Our personal needs may be fully satisfied while we&#39;re all working toward this goal, or some of them may be sacrificed. I mean all of us, including the boss, whoever he or she is, either a CTO, a co-founder, a <a href="/2016/05/24/who-is-project-manager.html">project manager</a>, or a team lead.</p><p>The project is the source of our checks. Not the CFO.</p><aside class='quote'>A true professional team player feels himself equal to all other members of the project, no matter how high they are in the hierarchy.</aside><p>The CFO is a stakeholder, like everyone else. The project gives him more power than others because it&#39;s necessary for the whole mechanism to work properly. Every project member has his or her own <strong>roles and responsibilities</strong>. I write code; the CFO writes checks. I eat at McDonald&#39;s; he drives a Jaguar. We have different needs, and we both agreed that the project would satisfy them. Otherwise we wouldn&#39;t be here, right?</p><p>We&#39;re all parts of a mechanism called a &quot;project,&quot; which works according to the rules and principles of <a href="/2016/05/24/who-is-project-manager.html"><strong>project management</strong></a> whether we are aware of them or not. Whether we have a <a href="/2016/05/24/who-is-project-manager.html">project manager</a> or not. Even if we violate all of them and manage ourselves in total chaos, we still have a scope, <a href="/2015/06/02/how-to-estimate-software-cost.html">cost</a>, schedule, and all other attributes of project management.</p><p>A professional and savvy boss understands that his role in the mechanism is to clearly define project objectives and make sure everybody&#39;s needs are aligned with those objectives. In a properly managed and organized project, everybody sees and feels how his or her personal needs are satisfied when the project <a href="/2015/02/12/top-down-design.html">achieves</a> its objectives: Jeff learns Scala, Sally sees Paris, and Bob buys a new house.</p><p>However, if Jeff wants to learn Scala and we&#39;re developing an iOS application, that is a problem for the boss to resolve. Either convince Jeff to fall in love with Swift (I doubt that&#39;s possible) or replace him with someone who is already in love with it. It&#39;s clear that a professional boss will resort to such a tragic act as <a href="/2015/09/16/how-to-fire-someone-right.html">firing</a> Jeff not because of his personal feelings towards Jeff but because they are both working toward the project objectives. Jeff and the boss will both understand that Jeff&#39;s need to learn Scala is not aligned with the objective of the project.</p><p>It is the CTO&#39;s responsibility to do something about Jeff when his personal needs become misaligned with the objectives of the project that is paying his salary. A professional CEO understands that and always acts in the best interest of the project, not of himself or anyone else personally.</p><p>I believe a professional team player does two things: <strong>obeys and resists</strong>.</p><p>First, you have to understand that the boss is here in order to help you organize your time, your tasks, your communications, your plans, etc. He knows more about the project and uses that information to help you do your job. Your real boss is the project; the boss you interact with is just a hired manager who translates project objectives into plans, instructions, schedules, etc.</p><aside class='quote'>Being a professional team player requires a constant readiness to resist each and every instruction.</aside><p>This boss is your colleague who does management while you&#39;re writing code. You&#39;re both equal. You and he are in the same boat. Your functions are different than his; that&#39;s all. You&#39;re not working <em>for</em> him but <em>with</em> him on a project. A true professional team player feels himself equal to all other members of the project, no matter how high they are in the hierarchy.</p><p>At the same time, he strictly follows the process and obeys all project rules and instructions, not because he is afraid of being fired but because he wants the project to succeed.</p><p>Second, being a professional team player requires a constant readiness to resist each and every instruction if you feel it contradicts the project objectives. A true professional doesn&#39;t work for a boss. He doesn&#39;t want to make the boss happy. He actually doesn&#39;t care whether the boss is happy or not. He knows that the real boss is the project and tries to make the project successful and ... happy.</p><p>A true professional always works for himself. Jeff wants to learn Scala and earn a certain amount of cash. He joined the project in order to satisfy these needs. If the project fails, Jeff won&#39;t get the money and won&#39;t fully learn Scala. So if the boss tells Jeff to do something that may jeopardize the project&#39;s success, will Jeff do it? Does he care about disappointing the boss? Absolutely not. All he cares about is the project&#39;s success, which translates to his personal success.</p><p>Thus, making your boss happy is a goal for the immature, fearsome, lazy, and weak. Making your project successful is an objective for professional, strong, mature, and brave team players.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/01/26/happy-boss-false-objective.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/01/26/happy-boss-false-objective.html&amp;text=Making+Your+Boss+Happy+Is+a+False+Objective" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/01/26/happy-boss-false-objective.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/01/26/happy-boss-false-objective.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/01/26/happy-boss-false-objective.html%3F2015-04&amp;title=Making+Your+Boss+Happy+Is+a+False+Objective" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/01/26/happy-boss-false-objective.html%3F2015-04&amp;t=Making+Your+Boss+Happy+Is+a+False+Objective" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>We all have bosses. We also have customers who pay us for running their software projects. They are my bosses for the time of the contract. I&#39;m also acting as a boss for developers who are working for <a href="http://www.zerocracy.com">Zerocracy</a>. It is obvious that a good employee/contractor is one who makes his boss/customer happy. But only a bad employee works toward this goal. Trying to make your boss happy is a false target that, if pursued, ruins the project. A professional employee works for the project, not for the boss.</p><figure class='jb_picture'><img itemprop='image' alt='The Million Dollar Hotel (2000) by Wim Wenders' src='/images/2015/01/the-million-dollar-hotel.png' longdesc='#a14f03e8'/><figcaption id='a14f03e8'>The Million Dollar Hotel (2000) by Wim Wenders</figcaption></figure><p>We all work on <strong>projects</strong> as developers, designers, programmers, <a href="/2015/09/22/micromanagement.html">managers</a>, testers, you name it. The boss is also a member of the project. More formally, he or she is a <strong>stakeholder</strong>, same as every one of us. Each stakeholder has his own <strong>needs</strong> for the project: 1) Jeff, the developer, wants to learn Scala and collect his paychecks every two weeks; 2) Sally, the product owner, wants to attend an expo in Paris and also collect her paychecks; 3) Bob, the CTO, wants to raise round A funding and collect a big paycheck; etc.</p><p>The project has its own <strong>objectives</strong>, to achieve 1 million downloads in less than six months and under $300,000, for example. This is what the project works for. This is what all of us are here for.</p><p>Our personal needs may be fully satisfied while we&#39;re all working toward this goal, or some of them may be sacrificed. I mean all of us, including the boss, whoever he or she is, either a CTO, a co-founder, a <a href="/2016/05/24/who-is-project-manager.html">project manager</a>, or a team lead.</p><p>The project is the source of our checks. Not the CFO.</p><aside class='quote'>A true professional team player feels himself equal to all other members of the project, no matter how high they are in the hierarchy.</aside><p>The CFO is a stakeholder, like everyone else. The project gives him more power than others because it&#39;s necessary for the whole mechanism to work properly. Every project member has his or her own <strong>roles and responsibilities</strong>. I write code; the CFO writes checks. I eat at McDonald&#39;s; he drives a Jaguar. We have different needs, and we both agreed that the project would satisfy them. Otherwise we wouldn&#39;t be here, right?</p><p>We&#39;re all parts of a mechanism called a &quot;project,&quot; which works according to the rules and principles of <a href="/2016/05/24/who-is-project-manager.html"><strong>project management</strong></a> whether we are aware of them or not. Whether we have a <a href="/2016/05/24/who-is-project-manager.html">project manager</a> or not. Even if we violate all of them and manage ourselves in total chaos, we still have a scope, <a href="/2015/06/02/how-to-estimate-software-cost.html">cost</a>, schedule, and all other attributes of project management.</p><p>A professional and savvy boss understands that his role in the mechanism is to clearly define project objectives and make sure everybody&#39;s needs are aligned with those objectives. In a properly managed and organized project, everybody sees and feels how his or her personal needs are satisfied when the project <a href="/2015/02/12/top-down-design.html">achieves</a> its objectives: Jeff learns Scala, Sally sees Paris, and Bob buys a new house.</p><p>However, if Jeff wants to learn Scala and we&#39;re developing an iOS application, that is a problem for the boss to resolve. Either convince Jeff to fall in love with Swift (I doubt that&#39;s possible) or replace him with someone who is already in love with it. It&#39;s clear that a professional boss will resort to such a tragic act as <a href="/2015/09/16/how-to-fire-someone-right.html">firing</a> Jeff not because of his personal feelings towards Jeff but because they are both working toward the project objectives. Jeff and the boss will both understand that Jeff&#39;s need to learn Scala is not aligned with the objective of the project.</p><p>It is the CTO&#39;s responsibility to do something about Jeff when his personal needs become misaligned with the objectives of the project that is paying his salary. A professional CEO understands that and always acts in the best interest of the project, not of himself or anyone else personally.</p><p>I believe a professional team player does two things: <strong>obeys and resists</strong>.</p><p>First, you have to understand that the boss is here in order to help you organize your time, your tasks, your communications, your plans, etc. He knows more about the project and uses that information to help you do your job. Your real boss is the project; the boss you interact with is just a hired manager who translates project objectives into plans, instructions, schedules, etc.</p><aside class='quote'>Being a professional team player requires a constant readiness to resist each and every instruction.</aside><p>This boss is your colleague who does management while you&#39;re writing code. You&#39;re both equal. You and he are in the same boat. Your functions are different than his; that&#39;s all. You&#39;re not working <em>for</em> him but <em>with</em> him on a project. A true professional team player feels himself equal to all other members of the project, no matter how high they are in the hierarchy.</p><p>At the same time, he strictly follows the process and obeys all project rules and instructions, not because he is afraid of being fired but because he wants the project to succeed.</p><p>Second, being a professional team player requires a constant readiness to resist each and every instruction if you feel it contradicts the project objectives. A true professional doesn&#39;t work for a boss. He doesn&#39;t want to make the boss happy. He actually doesn&#39;t care whether the boss is happy or not. He knows that the real boss is the project and tries to make the project successful and ... happy.</p><p>A true professional always works for himself. Jeff wants to learn Scala and earn a certain amount of cash. He joined the project in order to satisfy these needs. If the project fails, Jeff won&#39;t get the money and won&#39;t fully learn Scala. So if the boss tells Jeff to do something that may jeopardize the project&#39;s success, will Jeff do it? Does he care about disappointing the boss? Absolutely not. All he cares about is the project&#39;s success, which translates to his personal success.</p><p>Thus, making your boss happy is a goal for the immature, fearsome, lazy, and weak. Making your project successful is an objective for professional, strong, mature, and brave team players.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="When it comes to an if-then-else statement that throws an exception or exits by break or continue, there is an obvious optimization that is very often overlooked. " /> <meta name="keywords" content="if then else exception, if throw else exception, if throw exception, if throw exception java, if-throw-else" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-01-21 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="If. Then. Throw. Else. WTF?"/> <meta name="twitter:description" property="og:description" content="When it comes to an if-then-else statement that throws an exception or exits by break or continue, there is an obvious optimization that is very often overlooked. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/01/21/if-then-throw-else.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/01/21/if-then-throw-else.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/01/21/if-then-throw-else.amp.html" /> <title>If. Then. Throw. Else. WTF? </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/01/21/if-then-throw-else.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/01/21/if-then-throw-else.html">https://www.yegor256.com/2015/01/21/if-then-throw-else.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">If. Then. Throw. Else. WTF?</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-01-21T00:00:00+00:00"> 21 January 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/01/21/if-then-throw-else.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>This is the code I could never understand:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">Exception</span><span class="o">(</span><span class="s">&quot;X can&#39;t be negative&quot;</span><span class="o">);</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;X is positive or zero&quot;</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>I have been trying to find a proper metaphor to explain its incorrectness. Today I finally found it.</p><p>If-then-else is a <a href="/2016/08/10/if-then-else-code-smell.html">forking</a> mechanism of procedural programming. The CPU either goes to the left and <strong>then</strong> does something or goes to the right and does something <strong>else</strong>. Imagine yourself driving a car and seeing this sign:</p><figure class='unprintable'><img src='https://www.yegor256.com/images/2015/01/if-then-throw-1.png' itemprop='image' style='width:500px;max-width:100%;' alt='The figure'/></figure><p>It looks logical, doesn&#39;t it? You can go in the left lane if you&#39;re not driving a truck. Otherwise you should go in the right lane. Both lanes meet up in a while. No matter which one you choose, you will end up on the same road. This is what this code block does:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;X is negative&quot;</span><span class="o">);</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;X is positive or zero&quot;</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>Now, try to imagine this sign:</p><figure class='unprintable'><img src='https://www.yegor256.com/images/2015/01/if-then-throw-2.png' itemprop='image' style='width:500px;max-width:100%;' alt='The figure'/></figure><p>It looks very strange to me, and you will never see this sign anywhere simply because a dead end means an <em>end</em>, a full stop, a finish. What is the point of drawing a lane after the dead end sign? There is no point.</p><p>This is how a proper sign would look:</p><figure class='unprintable'><img src='https://www.yegor256.com/images/2015/01/if-then-throw-3.png' itemprop='image' style='width:500px;max-width:100%;' alt='The figure'/></figure><p>This is how a proper code block would look:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">Exception</span><span class="o">(</span><span class="s">&quot;X can&#39;t be negative&quot;</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;X is positive or zero&quot;</span><span class="o">);</span></code></pre></figure><p>The same is true for loops. This is wrong:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">:</span> <span class="n">numbers</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">continue</span><span class="o">;</span>
  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;found positive number&quot;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>While this is right:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">:</span> <span class="n">numbers</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">continue</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;found positive number&quot;</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>There is no road after the dead end! If you draw it, your code looks like this very funny snippet I found a few years ago reviewing sources written by some very well-paid developer in one very serious company:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">Exception</span><span class="o">(</span><span class="s">&quot;X is negative&quot;</span><span class="o">);</span>
  <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>Don&#39;t do this.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/01/21/if-then-throw-else.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/01/21/if-then-throw-else.html&amp;text=If.+Then.+Throw.+Else.+WTF%3F" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/01/21/if-then-throw-else.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/01/21/if-then-throw-else.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/01/21/if-then-throw-else.html%3F2015-03&amp;title=If.+Then.+Throw.+Else.+WTF%3F" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/01/21/if-then-throw-else.html%3F2015-03&amp;t=If.+Then.+Throw.+Else.+WTF%3F" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>This is the code I could never understand:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">Exception</span><span class="o">(</span><span class="s">&quot;X can&#39;t be negative&quot;</span><span class="o">);</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;X is positive or zero&quot;</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>I have been trying to find a proper metaphor to explain its incorrectness. Today I finally found it.</p><p>If-then-else is a <a href="/2016/08/10/if-then-else-code-smell.html">forking</a> mechanism of procedural programming. The CPU either goes to the left and <strong>then</strong> does something or goes to the right and does something <strong>else</strong>. Imagine yourself driving a car and seeing this sign:</p><figure class='unprintable'><img src='https://www.yegor256.com/images/2015/01/if-then-throw-1.png' itemprop='image' style='width:500px;max-width:100%;' alt='The figure'/></figure><p>It looks logical, doesn&#39;t it? You can go in the left lane if you&#39;re not driving a truck. Otherwise you should go in the right lane. Both lanes meet up in a while. No matter which one you choose, you will end up on the same road. This is what this code block does:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;X is negative&quot;</span><span class="o">);</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;X is positive or zero&quot;</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>Now, try to imagine this sign:</p><figure class='unprintable'><img src='https://www.yegor256.com/images/2015/01/if-then-throw-2.png' itemprop='image' style='width:500px;max-width:100%;' alt='The figure'/></figure><p>It looks very strange to me, and you will never see this sign anywhere simply because a dead end means an <em>end</em>, a full stop, a finish. What is the point of drawing a lane after the dead end sign? There is no point.</p><p>This is how a proper sign would look:</p><figure class='unprintable'><img src='https://www.yegor256.com/images/2015/01/if-then-throw-3.png' itemprop='image' style='width:500px;max-width:100%;' alt='The figure'/></figure><p>This is how a proper code block would look:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">Exception</span><span class="o">(</span><span class="s">&quot;X can&#39;t be negative&quot;</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;X is positive or zero&quot;</span><span class="o">);</span></code></pre></figure><p>The same is true for loops. This is wrong:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">:</span> <span class="n">numbers</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">continue</span><span class="o">;</span>
  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;found positive number&quot;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>While this is right:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">:</span> <span class="n">numbers</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">continue</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;found positive number&quot;</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>There is no road after the dead end! If you draw it, your code looks like this very funny snippet I found a few years ago reviewing sources written by some very well-paid developer in one very serious company:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">Exception</span><span class="o">(</span><span class="s">&quot;X is negative&quot;</span><span class="o">);</span>
  <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>Don&#39;t do this.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="When a task you&apos;re working on is too big or you simply don&apos;t want to do it, you cut corners; here is how you can do it professionally. " /> <meta name="keywords" content="agile planning, agile task management, agile task management open source, agile task planning, how to manage tasks agile, time management agile" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-01-15 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="How to Cut Corners and Stay Cool"/> <meta name="twitter:description" property="og:description" content="When a task you&apos;re working on is too big or you simply don&apos;t want to do it, you cut corners; here is how you can do it professionally. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/01/15/how-to-cut-corners.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/01/15/how-to-cut-corners.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/01/15/how-to-cut-corners.amp.html" /> <title>How to Cut Corners and Stay Cool </title> <meta name='og:image' content='https://www.yegor256.com/images/2015/01/regarding-henry.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2015/01/regarding-henry.jpg'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='675'/> <meta name='twitter:image:height' content='675'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Regarding Henry (1991) by Mike Nichols'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/01/15/how-to-cut-corners.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/01/15/how-to-cut-corners.html">https://www.yegor256.com/2015/01/15/how-to-cut-corners.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">How to Cut Corners and Stay Cool</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-01-15T00:00:00+00:00"> 15 January 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/01/15/how-to-cut-corners.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><ul class="unprintable subline"> <li>Translated:</li> <li><a href="https://medium.com/@izarodsos/c%C3%B3mo-tomar-atajos-y-quedarte-tranquilo-ddfc680c97e8">Spanish</a></li> <li><a href="mailto:translate@yegor256.com">add yours!</a></li></ul><p class="unprintable"><p>You have a task assigned to you, and you don&#39;t like it. You are simply not in the mood. You don&#39;t know how to fix that damn bug. You have no idea how that bloody module was designed, and you don&#39;t know how it works. But you have to fix the issue, which was reported by someone who has no clue how this software works. You get frustrated and blame that <a href="/2015/09/22/micromanagement.html">stupid project manager</a> and programmers who were fired two years ago. You spend hours just to find out how the code works. Then even more hours trying to fix it. In the end, you miss the deadline and <em>everybody blames you</em>. Been there, done that?</p><figure class='jb_picture'><img itemprop='image' alt='Regarding Henry (1991) by Mike Nichols' src='/images/2015/01/regarding-henry.jpg' longdesc='#34ee5620'/><figcaption id='34ee5620'>Regarding Henry (1991) by Mike Nichols</figcaption></figure><p>There is, however, an alternative approach that provides a professional exit from this situation. Here are some tips I recommend to my peers who code with me in <a href="http://www.zerocracy.com">Zerocracy</a> projects. In a nutshell, I&#39;m going to explain how you can <em>cut corners</em> and remain professional, 1) protecting your nerves, 2) optimizing your project&#39;s expenses, and 3) increasing the quality of the source code.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=b6r2W3P9vgY'><div class='box'> <img src='https://i.ytimg.com/vi/b6r2W3P9vgY/mqdefault.jpg' alt='YouTube video #b6r2W3P9vgY'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Blame the Project; 16 April 2016.</div></aside><p>Here is a list of options you have, in order of preference. I would recommend you start with the first one on the list and proceed down when you have to.</p><h2 id="create-dependencies-blame-them-and-wait">Create Dependencies, Blame Them, and Wait</h2><p>This is the first and most preferable option. If you can&#39;t figure out how to fix an issue or how to implement a new feature, it&#39;s a fault of the project, not you. Even if you can&#39;t figure it out because you don&#39;t know anything about Ruby and they hired you to fix bugs in a Ruby on Rails code base---it&#39;s their fault. Why did they hire you when you know nothing about Ruby?</p><p>So be positive; don&#39;t blame yourself. If you don&#39;t know how this damn code works, it&#39;s a fault of the code, not you. Good code is easy to understand and maintain.</p><figure class='badge'><img src='https://www.yegor256.com/images/2015/01/cut-corners-1.png' style='width:250px;max-width:100%;' alt='badge'/></figure><p>Don&#39;t try to eat spaghetti code; complain to the chef and ask him or her to cook something better (BTW, I love spaghetti).</p><p>How can you do that? Create dependencies---new bugs complaining about unclear design, lack of unit tests, absence of necessary classes, or whatever. Be creative and offensive---in a constructive and professional way, of course. Don&#39;t get personal. No matter who cooked that spaghetti, you have nothing against him or her personally. You just want another dish, that&#39;s all.</p><aside class='quote'>If you don&#39;t know how this damn code works, it&#39;s a fault of the code, not you.</aside><p>Once you have those dependencies reported, explain in the main ticket that you can&#39;t continue until all of them are resolved. You will legally stop working, and someone else will improve the code you need. Later, when all dependencies are resolved and the code looks better, try to get back to it again. If you still see issues, create new dependencies. Keep doing this until the code in front of you is clean and easy to fix.</p><p>Don&#39;t be <a href="/2015/12/29/turnover-is-good-for-maintainability.html">a hero</a>---don&#39;t rush into fixing the <a href="/2015/11/24/imprisonment-for-irresponsible-coding.html">bad code</a> you inherited. Think <a href="/2014/10/26/hacker-vs-programmer-mentality.html">like a developer, not a hacker</a>. Remember that your first and most important responsibility as a disciplined engineer is to help the project <em>reveal</em> maintainability issues. Who will fix them and how is the responsibility of a <a href="/2016/05/24/who-is-project-manager.html">project manager</a>. Your job is to reveal, not to hide. By being a hero and trying to fix everything in the scope of a single task, you&#39;re not doing the project a favor---you&#39;re concealing the problem(s).</p><p>Edit: Another good example of a dependency may be a question raised at, for example, <a href="/2017/02/14/stackoverflow-is-your-tool.html">StackOverflow</a> or a user list of a third-party library. If you can&#39;t find a solution yourself and the problem is outside of the scope of your project---submit a question to SO and put its link to the source code (in JavaDoc block, for example).</p><h2 id="demand-better-documentation-and-wait">Demand Better Documentation and Wait</h2><p>All dependencies are resolved and the code looks clean, but you still don&#39;t understand how to fix the problem or implement a new feature. It&#39;s too complex. Or maybe you just don&#39;t know how this library works. Or you&#39;ve never done anything like that before. Anyhow, you can&#39;t continue because you don&#39;t understand. And in order to understand, you will need a lot of time---much more than you have from your project manager or your Scrum board. What do you do?</p><figure class='badge'><img src='https://www.yegor256.com/images/2015/01/cut-corners-2.png' style='width:250px;max-width:100%;' alt='badge'/></figure><p>Again, think positively and don&#39;t blame yourself. If the software is not clear enough for a total stranger, it&#39;s &quot;their&quot; fault, not yours. They created the software in a way that&#39;s difficult to digest and modify. But the code is clean; it&#39;s not spaghetti anymore. It&#39;s a perfectly cooked lobster, but you don&#39;t know how to eat lobster! You&#39;ve never ate it before.</p><p>The chef did a good job; he cooked it well, but the restaurant didn&#39;t give you any instructions on how to eat such a sophisticated dish. What do you do?</p><p>You ask for a manual. You ask for documentation. Properly designed and written source code must be properly documented. Once you see that something is not clear for you, create new dependencies that ask for better documentation of certain aspects of the code.</p><p>Again, don&#39;t be a hero and try to understand everything yourself. Of course you&#39;re a smart guy, but the project doesn&#39;t need a single smart guy. The project needs <a href="/2015/12/29/turnover-is-good-for-maintainability.html">maintainable code</a> that is easy to modify, even by someone who is not as smart as yourself. So do your project a favor: reveal the documentation issue, and ask someone to fix it for you. Not just for you, for everybody. The entire team will benefit from such a request. Once the documentation is fixed, you will continue with your task, and everybody will get source code that is a bit better than it was before. Win-win, isn&#39;t it?</p><h2 id="reproduce-the-bug-and-call-it-a-day">Reproduce the Bug and Call It a Day</h2><p>Now the code is clean, the documentation is good enough, but you&#39;re stuck anyway. What to do? Well, I&#39;m a big fan of test-driven development, so my next suggestion would be to create a test that reproduces the bug. Basically, this is what you should start every ticket with, be it a bug or a feature. Catch the bug with a unit test! Prove that the bug exists by failing the build with a new test.</p><figure class='badge'><a href='http://amzn.to/1SdcZ8M'><img src='https://www.yegor256.com/images/2015/01/working-effectively-with-legacy-code.png' style='width:96px;max-width:100%;' alt='badge'/></a></figure><p>This may be rather difficult to achieve, especially when the software you&#39;re trying to fix or modify was written by <span class="strike">idiots</span> someone who had no idea about unit testing. There are plenty of techniques that may help you find a way to make such software more testable. I would highly recommend you read <a href="http://amzn.to/1SdcZ8M">Working Effectively with Legacy Code</a> by Michael Feathers. There are many different patterns, and most of them work.</p><aside class='quote'>Catching a bug with a unit test is, in most cases, more than 80% of success.</aside><p>Once you manage to reproduce the bug and the build fails, stop right there. That&#39;s more than enough for a single piece of work. Skip the test (for example, using <code>@Ignore</code> annotation in JUnit 4) and commit your changes. Then add documentation to the unit test you just created, preferably in the form of a <code>@todo</code>. Explain there that you managed to reproduce the problem but didn&#39;t have enough time to fix it. Or maybe you just don&#39;t know how to fix it. Be honest and give all possible details.</p><p>I believe that catching a bug with a unit test is, in most cases, more than 80% of success. The rest is way more simple: just fix the code and make the test pass. Leave this job to someone else.</p><h2 id="prove-a-bugs-absence">Prove a Bug&#39;s Absence</h2><p>Very often you simply can&#39;t reproduce a bug. That&#39;s not because the code is not testable and can&#39;t be used in a unit test but because you can&#39;t reproduce an error situation. You know that the code crashes in production, but you can&#39;t crash it in a test. The error stack trace reported by the end user or your production logging system is not reproducible. It&#39;s a very common situation. What do you do?</p><figure class='badge'><img src='https://www.yegor256.com/images/2015/01/cut-corners-3.png' style='width:250px;max-width:100%;' alt='badge'/></figure><p>I think the best option here is to create a test that will prove that the code works as intended. The test won&#39;t fail, and the build will remain clean. You will commit it to the repository and ... report that the problem is solved. You will say that the reported bug doesn&#39;t really exist in real life. You will state that there is no bug---&quot;our software works correctly; here is the proof: see my new unit test.&quot;</p><p>Will they believe you? I don&#39;t think so, but they don&#39;t have a choice. They can&#39;t push you any further. You&#39;ve already done something---created a new test that proves everything is fine. The ticket will be closed and the project will move on.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=YBQoTZ-1X-o'><div class='box'> <img src='https://i.ytimg.com/vi/YBQoTZ-1X-o/mqdefault.jpg' alt='YouTube video #YBQoTZ-1X-o'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>How to Cut Corners and Stay Cool (webinar #15); 1 June 2016.</div></aside><p>If, later on, the same problem occurs in production, a new bug will be reported. It will be linked to your ticket. Your experience will help someone investigate the bug further. Maybe that guy will also fail to catch the bug with a test and will also create a new, successful and &quot;useless&quot; test. And this may happen again and again. Eventually, this cumulative group experience will help the last guy catch the bug and fix it.</p><p>Thus, a new passing test is a good response to a bug that you can&#39;t catch with a unit test.</p><h2 id="disable-the-feature">Disable the Feature</h2><p>Sometimes the unit test technique won&#39;t work, mostly because a bug will be too important to be ignored. They won&#39;t agree with you when you show them a unit test that proves the bug doesn&#39;t exist. They will tell you that &quot;when our users are trying to download a PDF, they get a blank page.&quot; And they will also say they don&#39;t really care about your bloody unit tests. All they care about is that PDF document that should be downloadable. So the trick with a unit test won&#39;t work. What do you do?</p><aside class='quote'>Production errors are not programmers&#39; mistakes, though delayed tickets are.</aside><p>It depends on many factors, and most of these factors are not technical. They are political, organizational, managerial, social, you name it. However, in most cases, I would recommend you disable that toxic feature, release a new version, and close the ticket.</p><p>You will take the problem off your shoulders and everybody will be pleased. Well, except that poor end user. But this is not your problem. This is the fault of management, which didn&#39;t organize pre-production testing properly. Again, don&#39;t take this blame on yourself. Your job is to keep the code clean and finish your tickets in a reasonable amount of time. Their job is to make sure that developers, testers, DevOps, marketers, product managers, and designers work together to deliver the product with an acceptable number of errors.</p><p>Production errors are not programmers&#39; mistakes, though delayed tickets are. If you keep a ticket in your hands for too long, you become an unmanageable unit of work. They simply can&#39;t manage you anymore. You&#39;re doing something, trying to fix the bug, saying &quot;I&#39;m trying, I&#39;m trying ...&quot; How can they manage such a guy? Instead, you should deliver quickly, even if it comes at the cost of a temporarily disabled feature.</p><h2 id="say-no">Say No</h2><p>OK, let&#39;s say none of the above works. The code is clean, the documentation is acceptable, but you can&#39;t catch the bug, and they don&#39;t accept a unit test from you as proof of the bug&#39;s absence. They also don&#39;t allow you to disable a feature, because it is critical to the user experience. What choices do you have? Just one.</p><figure class='badge'><img src='https://www.yegor256.com/images/2015/01/cut-corners-4.png' style='width:250px;max-width:100%;' alt='badge'/></figure><p>Be professional and say &quot;No, I can&#39;t do this; find someone else.&quot; Being a professional developer doesn&#39;t mean being able to fix any problem. Instead, it means honesty. If you see that you can&#39;t fix the problem, say so as soon as possible. Let them decide what to do. If they eventually decide to fire you because of that, you will remain a professional. They will remember you as a guy who was honest and took his reputation seriously. In the end, you will win.</p><p>Don&#39;t hold the task in your hands. The minute you realize you&#39;re not the best guy for it or you simply can&#39;t fix it---notify your manager. Make it his problem. Actually, it is his problem in the first place. He hired you. He <a href="/2016/03/01/how-we-interview-programmers.html">interviewed</a> you. He decided to give you this task. He estimated your abilities and your skills. So it&#39;s payback time.</p><aside class='quote'>Being a professional developer doesn&#39;t mean being able to fix any problem.</aside><p>Your &quot;No!&quot; will be very valuable feedback for him. It will help him make his next important management decisions.</p><p>On the other hand, if you lie just to give the impression you&#39;re a guy who can fix anything and yet fail in the end, you will damage not only your reputation but also the project&#39;s performance and objectives.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/01/15/how-to-cut-corners.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/01/15/how-to-cut-corners.html&amp;text=How+to+Cut+Corners+and+Stay+Cool" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/01/15/how-to-cut-corners.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/01/15/how-to-cut-corners.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/01/15/how-to-cut-corners.html%3F2015-02&amp;title=How+to+Cut+Corners+and+Stay+Cool" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/01/15/how-to-cut-corners.html%3F2015-02&amp;t=How+to+Cut+Corners+and+Stay+Cool" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>You have a task assigned to you, and you don&#39;t like it. You are simply not in the mood. You don&#39;t know how to fix that damn bug. You have no idea how that bloody module was designed, and you don&#39;t know how it works. But you have to fix the issue, which was reported by someone who has no clue how this software works. You get frustrated and blame that <a href="/2015/09/22/micromanagement.html">stupid project manager</a> and programmers who were fired two years ago. You spend hours just to find out how the code works. Then even more hours trying to fix it. In the end, you miss the deadline and <em>everybody blames you</em>. Been there, done that?</p><figure class='jb_picture'><img itemprop='image' alt='Regarding Henry (1991) by Mike Nichols' src='/images/2015/01/regarding-henry.jpg' longdesc='#34ee5620'/><figcaption id='34ee5620'>Regarding Henry (1991) by Mike Nichols</figcaption></figure><p>There is, however, an alternative approach that provides a professional exit from this situation. Here are some tips I recommend to my peers who code with me in <a href="http://www.zerocracy.com">Zerocracy</a> projects. In a nutshell, I&#39;m going to explain how you can <em>cut corners</em> and remain professional, 1) protecting your nerves, 2) optimizing your project&#39;s expenses, and 3) increasing the quality of the source code.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=b6r2W3P9vgY'><div class='box'> <img src='https://i.ytimg.com/vi/b6r2W3P9vgY/mqdefault.jpg' alt='YouTube video #b6r2W3P9vgY'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Blame the Project; 16 April 2016.</div></aside><p>Here is a list of options you have, in order of preference. I would recommend you start with the first one on the list and proceed down when you have to.</p><h2 id="create-dependencies-blame-them-and-wait">Create Dependencies, Blame Them, and Wait</h2><p>This is the first and most preferable option. If you can&#39;t figure out how to fix an issue or how to implement a new feature, it&#39;s a fault of the project, not you. Even if you can&#39;t figure it out because you don&#39;t know anything about Ruby and they hired you to fix bugs in a Ruby on Rails code base---it&#39;s their fault. Why did they hire you when you know nothing about Ruby?</p><p>So be positive; don&#39;t blame yourself. If you don&#39;t know how this damn code works, it&#39;s a fault of the code, not you. Good code is easy to understand and maintain.</p><figure class='badge'><img src='https://www.yegor256.com/images/2015/01/cut-corners-1.png' style='width:250px;max-width:100%;' alt='badge'/></figure><p>Don&#39;t try to eat spaghetti code; complain to the chef and ask him or her to cook something better (BTW, I love spaghetti).</p><p>How can you do that? Create dependencies---new bugs complaining about unclear design, lack of unit tests, absence of necessary classes, or whatever. Be creative and offensive---in a constructive and professional way, of course. Don&#39;t get personal. No matter who cooked that spaghetti, you have nothing against him or her personally. You just want another dish, that&#39;s all.</p><aside class='quote'>If you don&#39;t know how this damn code works, it&#39;s a fault of the code, not you.</aside><p>Once you have those dependencies reported, explain in the main ticket that you can&#39;t continue until all of them are resolved. You will legally stop working, and someone else will improve the code you need. Later, when all dependencies are resolved and the code looks better, try to get back to it again. If you still see issues, create new dependencies. Keep doing this until the code in front of you is clean and easy to fix.</p><p>Don&#39;t be <a href="/2015/12/29/turnover-is-good-for-maintainability.html">a hero</a>---don&#39;t rush into fixing the <a href="/2015/11/24/imprisonment-for-irresponsible-coding.html">bad code</a> you inherited. Think <a href="/2014/10/26/hacker-vs-programmer-mentality.html">like a developer, not a hacker</a>. Remember that your first and most important responsibility as a disciplined engineer is to help the project <em>reveal</em> maintainability issues. Who will fix them and how is the responsibility of a <a href="/2016/05/24/who-is-project-manager.html">project manager</a>. Your job is to reveal, not to hide. By being a hero and trying to fix everything in the scope of a single task, you&#39;re not doing the project a favor---you&#39;re concealing the problem(s).</p><p>Edit: Another good example of a dependency may be a question raised at, for example, <a href="/2017/02/14/stackoverflow-is-your-tool.html">StackOverflow</a> or a user list of a third-party library. If you can&#39;t find a solution yourself and the problem is outside of the scope of your project---submit a question to SO and put its link to the source code (in JavaDoc block, for example).</p><h2 id="demand-better-documentation-and-wait">Demand Better Documentation and Wait</h2><p>All dependencies are resolved and the code looks clean, but you still don&#39;t understand how to fix the problem or implement a new feature. It&#39;s too complex. Or maybe you just don&#39;t know how this library works. Or you&#39;ve never done anything like that before. Anyhow, you can&#39;t continue because you don&#39;t understand. And in order to understand, you will need a lot of time---much more than you have from your project manager or your Scrum board. What do you do?</p><figure class='badge'><img src='https://www.yegor256.com/images/2015/01/cut-corners-2.png' style='width:250px;max-width:100%;' alt='badge'/></figure><p>Again, think positively and don&#39;t blame yourself. If the software is not clear enough for a total stranger, it&#39;s &quot;their&quot; fault, not yours. They created the software in a way that&#39;s difficult to digest and modify. But the code is clean; it&#39;s not spaghetti anymore. It&#39;s a perfectly cooked lobster, but you don&#39;t know how to eat lobster! You&#39;ve never ate it before.</p><p>The chef did a good job; he cooked it well, but the restaurant didn&#39;t give you any instructions on how to eat such a sophisticated dish. What do you do?</p><p>You ask for a manual. You ask for documentation. Properly designed and written source code must be properly documented. Once you see that something is not clear for you, create new dependencies that ask for better documentation of certain aspects of the code.</p><p>Again, don&#39;t be a hero and try to understand everything yourself. Of course you&#39;re a smart guy, but the project doesn&#39;t need a single smart guy. The project needs <a href="/2015/12/29/turnover-is-good-for-maintainability.html">maintainable code</a> that is easy to modify, even by someone who is not as smart as yourself. So do your project a favor: reveal the documentation issue, and ask someone to fix it for you. Not just for you, for everybody. The entire team will benefit from such a request. Once the documentation is fixed, you will continue with your task, and everybody will get source code that is a bit better than it was before. Win-win, isn&#39;t it?</p><h2 id="reproduce-the-bug-and-call-it-a-day">Reproduce the Bug and Call It a Day</h2><p>Now the code is clean, the documentation is good enough, but you&#39;re stuck anyway. What to do? Well, I&#39;m a big fan of test-driven development, so my next suggestion would be to create a test that reproduces the bug. Basically, this is what you should start every ticket with, be it a bug or a feature. Catch the bug with a unit test! Prove that the bug exists by failing the build with a new test.</p><figure class='badge'><a href='http://amzn.to/1SdcZ8M'><img src='https://www.yegor256.com/images/2015/01/working-effectively-with-legacy-code.png' style='width:96px;max-width:100%;' alt='badge'/></a></figure><p>This may be rather difficult to achieve, especially when the software you&#39;re trying to fix or modify was written by <span class="strike">idiots</span> someone who had no idea about unit testing. There are plenty of techniques that may help you find a way to make such software more testable. I would highly recommend you read <a href="http://amzn.to/1SdcZ8M">Working Effectively with Legacy Code</a> by Michael Feathers. There are many different patterns, and most of them work.</p><aside class='quote'>Catching a bug with a unit test is, in most cases, more than 80% of success.</aside><p>Once you manage to reproduce the bug and the build fails, stop right there. That&#39;s more than enough for a single piece of work. Skip the test (for example, using <code>@Ignore</code> annotation in JUnit 4) and commit your changes. Then add documentation to the unit test you just created, preferably in the form of a <code>@todo</code>. Explain there that you managed to reproduce the problem but didn&#39;t have enough time to fix it. Or maybe you just don&#39;t know how to fix it. Be honest and give all possible details.</p><p>I believe that catching a bug with a unit test is, in most cases, more than 80% of success. The rest is way more simple: just fix the code and make the test pass. Leave this job to someone else.</p><h2 id="prove-a-bugs-absence">Prove a Bug&#39;s Absence</h2><p>Very often you simply can&#39;t reproduce a bug. That&#39;s not because the code is not testable and can&#39;t be used in a unit test but because you can&#39;t reproduce an error situation. You know that the code crashes in production, but you can&#39;t crash it in a test. The error stack trace reported by the end user or your production logging system is not reproducible. It&#39;s a very common situation. What do you do?</p><figure class='badge'><img src='https://www.yegor256.com/images/2015/01/cut-corners-3.png' style='width:250px;max-width:100%;' alt='badge'/></figure><p>I think the best option here is to create a test that will prove that the code works as intended. The test won&#39;t fail, and the build will remain clean. You will commit it to the repository and ... report that the problem is solved. You will say that the reported bug doesn&#39;t really exist in real life. You will state that there is no bug---&quot;our software works correctly; here is the proof: see my new unit test.&quot;</p><p>Will they believe you? I don&#39;t think so, but they don&#39;t have a choice. They can&#39;t push you any further. You&#39;ve already done something---created a new test that proves everything is fine. The ticket will be closed and the project will move on.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=YBQoTZ-1X-o'><div class='box'> <img src='https://i.ytimg.com/vi/YBQoTZ-1X-o/mqdefault.jpg' alt='YouTube video #YBQoTZ-1X-o'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>How to Cut Corners and Stay Cool (webinar #15); 1 June 2016.</div></aside><p>If, later on, the same problem occurs in production, a new bug will be reported. It will be linked to your ticket. Your experience will help someone investigate the bug further. Maybe that guy will also fail to catch the bug with a test and will also create a new, successful and &quot;useless&quot; test. And this may happen again and again. Eventually, this cumulative group experience will help the last guy catch the bug and fix it.</p><p>Thus, a new passing test is a good response to a bug that you can&#39;t catch with a unit test.</p><h2 id="disable-the-feature">Disable the Feature</h2><p>Sometimes the unit test technique won&#39;t work, mostly because a bug will be too important to be ignored. They won&#39;t agree with you when you show them a unit test that proves the bug doesn&#39;t exist. They will tell you that &quot;when our users are trying to download a PDF, they get a blank page.&quot; And they will also say they don&#39;t really care about your bloody unit tests. All they care about is that PDF document that should be downloadable. So the trick with a unit test won&#39;t work. What do you do?</p><aside class='quote'>Production errors are not programmers&#39; mistakes, though delayed tickets are.</aside><p>It depends on many factors, and most of these factors are not technical. They are political, organizational, managerial, social, you name it. However, in most cases, I would recommend you disable that toxic feature, release a new version, and close the ticket.</p><p>You will take the problem off your shoulders and everybody will be pleased. Well, except that poor end user. But this is not your problem. This is the fault of management, which didn&#39;t organize pre-production testing properly. Again, don&#39;t take this blame on yourself. Your job is to keep the code clean and finish your tickets in a reasonable amount of time. Their job is to make sure that developers, testers, DevOps, marketers, product managers, and designers work together to deliver the product with an acceptable number of errors.</p><p>Production errors are not programmers&#39; mistakes, though delayed tickets are. If you keep a ticket in your hands for too long, you become an unmanageable unit of work. They simply can&#39;t manage you anymore. You&#39;re doing something, trying to fix the bug, saying &quot;I&#39;m trying, I&#39;m trying ...&quot; How can they manage such a guy? Instead, you should deliver quickly, even if it comes at the cost of a temporarily disabled feature.</p><h2 id="say-no">Say No</h2><p>OK, let&#39;s say none of the above works. The code is clean, the documentation is acceptable, but you can&#39;t catch the bug, and they don&#39;t accept a unit test from you as proof of the bug&#39;s absence. They also don&#39;t allow you to disable a feature, because it is critical to the user experience. What choices do you have? Just one.</p><figure class='badge'><img src='https://www.yegor256.com/images/2015/01/cut-corners-4.png' style='width:250px;max-width:100%;' alt='badge'/></figure><p>Be professional and say &quot;No, I can&#39;t do this; find someone else.&quot; Being a professional developer doesn&#39;t mean being able to fix any problem. Instead, it means honesty. If you see that you can&#39;t fix the problem, say so as soon as possible. Let them decide what to do. If they eventually decide to fire you because of that, you will remain a professional. They will remember you as a guy who was honest and took his reputation seriously. In the end, you will win.</p><p>Don&#39;t hold the task in your hands. The minute you realize you&#39;re not the best guy for it or you simply can&#39;t fix it---notify your manager. Make it his problem. Actually, it is his problem in the first place. He hired you. He <a href="/2016/03/01/how-we-interview-programmers.html">interviewed</a> you. He decided to give you this task. He estimated your abilities and your skills. So it&#39;s payback time.</p><aside class='quote'>Being a professional developer doesn&#39;t mean being able to fix any problem.</aside><p>Your &quot;No!&quot; will be very valuable feedback for him. It will help him make his next important management decisions.</p><p>On the other hand, if you lie just to give the impression you&#39;re a guy who can fix anything and yet fail in the end, you will damage not only your reputation but also the project&#39;s performance and objectives.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="A variable name that consists of several words is a code smell because it indicates a variable scope that&apos;s too big. " /> <meta name="keywords" content="composite variable name, long variable name, naming convention, variable name, variable naming convention" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-01-12 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="A Compound Name Is a Code Smell"/> <meta name="twitter:description" property="og:description" content="A variable name that consists of several words is a code smell because it indicates a variable scope that&apos;s too big. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/01/12/compound-name-is-code-smell.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/01/12/compound-name-is-code-smell.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/01/12/compound-name-is-code-smell.amp.html" /> <title>A Compound Name Is a Code Smell </title> <meta name='og:image' content='https://www.yegor256.com/images/2015/01/meaning-of-life-every-sperm.png'/><meta name='twitter:image' content='https://www.yegor256.com/images/2015/01/meaning-of-life-every-sperm.png'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='675'/> <meta name='twitter:image:height' content='675'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='The Meaning of Life (1983) by Terry Jones and Terry Gilliam'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/01/12/compound-name-is-code-smell.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/01/12/compound-name-is-code-smell.html">https://www.yegor256.com/2015/01/12/compound-name-is-code-smell.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">A Compound Name Is a Code Smell</h1><aside class='book'><a href='http://amzn.to/2pyceWc'><img src='/images/books/elegant-objects/cover.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='http://amzn.to/2pyceWc'>Section&nbsp;5.1</a><br/> of my book<a href='http://amzn.to/2pyceWc'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-01-12T00:00:00+00:00"> 12 January 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/01/12/compound-name-is-code-smell.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><ul class="unprintable subline"> <li>Translated:</li> <li><a href="http://blog.csdn.net/LvShuiLanTian/article/details/52349054">Chinese</a></li> <li><a href="mailto:translate@yegor256.com">add yours!</a></li></ul><p class="unprintable"><p>Do you name variables like <code>textLength</code>, <code>table_name</code>, or <code>current-user-email</code>? All three are compound names that consist of more than one word. Even though they look more descriptive than <code>name</code>, <code>length</code>, or <code>email</code>, I would strongly recommend avoiding them. I believe a variable name that is more complex than a noun is a code smell. Why? Because we usually give a variable a compound name when its scope is so big and complex that a simple noun would sound ambiguous. And a big, complex scope is an obvious code smell.</p><figure class='jb_picture'><img itemprop='image' alt='The Meaning of Life (1983) by Terry Jones and Terry Gilliam' src='/images/2015/01/meaning-of-life-every-sperm.png' longdesc='#6b72f309'/><figcaption id='6b72f309'>The Meaning of Life (1983) by Terry Jones and Terry Gilliam</figcaption></figure><p>The scope of a variable is the place where it is visible, like a method, for example. Look at this Ruby class:</p><figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span></span><span class="k">class</span> <span class="nc">CSV</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">csvFileName</span><span class="p">)</span>
    <span class="vi">@fileName</span> <span class="o">=</span> <span class="n">csvFileName</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">readRecords</span><span class="p">()</span>
    <span class="no">File</span><span class="o">.</span><span class="n">readLines</span><span class="p">(</span><span class="vi">@fileName</span><span class="p">)</span><span class="o">.</span><span class="n">map</span> <span class="o">|</span><span class="n">csvLine</span><span class="o">|</span>
      <span class="n">csvLine</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure><p>The visible scope of variable <code>csvFileName</code> is method <code>initialize()</code>, which is a constructor of the class <code>CSV</code>. Why does it need a compound name that consists of three words? Isn&#39;t it already clear that a single-argument constructor of class <code>CSV</code> expects the name of a file with comma-separated values? I would rename it to <code>file</code>.</p><p>Next, the scope of <code>@fileName</code> is the entire <code>CSV</code> class. Renaming a single variable in the class to just <code>@file</code> won&#39;t introduce any confusion. It&#39;s still clear what file we&#39;re dealing with. The same situation exists with the <code>csvLine</code> variable. It is clear that we&#39;re dealing with CSV lines here. The <code>csv</code> prefix is just a redundancy. Here is how I would refactor the class:</p><figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span></span><span class="k">class</span> <span class="nc">CSV</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
    <span class="vi">@file</span> <span class="o">=</span> <span class="n">file</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">records</span><span class="p">()</span>
    <span class="no">File</span><span class="o">.</span><span class="n">readLines</span><span class="p">(</span><span class="vi">@file</span><span class="p">)</span><span class="o">.</span><span class="n">map</span> <span class="o">|</span><span class="n">line</span><span class="o">|</span>
      <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure><p>Now it looks clear and concise.</p><p>If you can&#39;t perform such a refactoring, it means your scope is too big and/or too complex. An ideal method should deal with up to five variables, and an ideal class should encapsulate up to five properties.</p><p>If we have five variables, can&#39;t we find five nouns to name them?</p><p>Adam and Eve didn&#39;t have second names. They were unique in Eden, as were many other characters in the Old Testament. Second and middle names were invented later in order to resolve ambiguity. To keep your methods and classes clean and solid, and to prevent ambiguity, try to give your variables and methods unique single-word names, just like Adam and Eve were named by you know who :)</p><p>PS. Also, <a href="/2015/09/01/redundant-variables-are-evil.html">redundant variables</a> are evil as well.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/01/12/compound-name-is-code-smell.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/01/12/compound-name-is-code-smell.html&amp;text=A+Compound+Name+Is+a+Code+Smell" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/01/12/compound-name-is-code-smell.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/01/12/compound-name-is-code-smell.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/01/12/compound-name-is-code-smell.html%3F2015-02&amp;title=A+Compound+Name+Is+a+Code+Smell" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/01/12/compound-name-is-code-smell.html%3F2015-02&amp;t=A+Compound+Name+Is+a+Code+Smell" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>Do you name variables like <code>textLength</code>, <code>table_name</code>, or <code>current-user-email</code>? All three are compound names that consist of more than one word. Even though they look more descriptive than <code>name</code>, <code>length</code>, or <code>email</code>, I would strongly recommend avoiding them. I believe a variable name that is more complex than a noun is a code smell. Why? Because we usually give a variable a compound name when its scope is so big and complex that a simple noun would sound ambiguous. And a big, complex scope is an obvious code smell.</p><figure class='jb_picture'><img itemprop='image' alt='The Meaning of Life (1983) by Terry Jones and Terry Gilliam' src='/images/2015/01/meaning-of-life-every-sperm.png' longdesc='#6b72f309'/><figcaption id='6b72f309'>The Meaning of Life (1983) by Terry Jones and Terry Gilliam</figcaption></figure><p>The scope of a variable is the place where it is visible, like a method, for example. Look at this Ruby class:</p><figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span></span><span class="k">class</span> <span class="nc">CSV</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">csvFileName</span><span class="p">)</span>
    <span class="vi">@fileName</span> <span class="o">=</span> <span class="n">csvFileName</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">readRecords</span><span class="p">()</span>
    <span class="no">File</span><span class="o">.</span><span class="n">readLines</span><span class="p">(</span><span class="vi">@fileName</span><span class="p">)</span><span class="o">.</span><span class="n">map</span> <span class="o">|</span><span class="n">csvLine</span><span class="o">|</span>
      <span class="n">csvLine</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure><p>The visible scope of variable <code>csvFileName</code> is method <code>initialize()</code>, which is a constructor of the class <code>CSV</code>. Why does it need a compound name that consists of three words? Isn&#39;t it already clear that a single-argument constructor of class <code>CSV</code> expects the name of a file with comma-separated values? I would rename it to <code>file</code>.</p><p>Next, the scope of <code>@fileName</code> is the entire <code>CSV</code> class. Renaming a single variable in the class to just <code>@file</code> won&#39;t introduce any confusion. It&#39;s still clear what file we&#39;re dealing with. The same situation exists with the <code>csvLine</code> variable. It is clear that we&#39;re dealing with CSV lines here. The <code>csv</code> prefix is just a redundancy. Here is how I would refactor the class:</p><figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span></span><span class="k">class</span> <span class="nc">CSV</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
    <span class="vi">@file</span> <span class="o">=</span> <span class="n">file</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">records</span><span class="p">()</span>
    <span class="no">File</span><span class="o">.</span><span class="n">readLines</span><span class="p">(</span><span class="vi">@file</span><span class="p">)</span><span class="o">.</span><span class="n">map</span> <span class="o">|</span><span class="n">line</span><span class="o">|</span>
      <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure><p>Now it looks clear and concise.</p><p>If you can&#39;t perform such a refactoring, it means your scope is too big and/or too complex. An ideal method should deal with up to five variables, and an ideal class should encapsulate up to five properties.</p><p>If we have five variables, can&#39;t we find five nouns to name them?</p><p>Adam and Eve didn&#39;t have second names. They were unique in Eden, as were many other characters in the Old Testament. Second and middle names were invented later in order to resolve ambiguity. To keep your methods and classes clean and solid, and to prevent ambiguity, try to give your variables and methods unique single-word names, just like Adam and Eve were named by you know who :)</p><p>PS. Also, <a href="/2015/09/01/redundant-variables-are-evil.html">redundant variables</a> are evil as well.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Most software outsourcing companies don&apos;t show their source code until the product is ready, keeping their customers in the dark and increasing the risk of project failure; it&apos;s a bad practice. " /> <meta name="keywords" content="how to outsource software development, software demonstration, software development outsourcing, source code" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-01-05 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="How to Be Honest and Keep a Customer"/> <meta name="twitter:description" property="og:description" content="Most software outsourcing companies don&apos;t show their source code until the product is ready, keeping their customers in the dark and increasing the risk of project failure; it&apos;s a bad practice. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/01/05/how-to-be-honest-and-keep-customer.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2015/01/05/how-to-be-honest-and-keep-customer.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/01/05/how-to-be-honest-and-keep-customer.amp.html" /> <title>How to Be Honest and Keep a Customer </title> <meta name='og:image' content='https://www.yegor256.com/images/2014/12/99-francs.png'/><meta name='twitter:image' content='https://www.yegor256.com/images/2014/12/99-francs.png'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='675'/> <meta name='twitter:image:height' content='675'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='99 francs (2007) by Jan Kounen'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/01/05/how-to-be-honest-and-keep-customer.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2015/01/05/how-to-be-honest-and-keep-customer.html">https://www.yegor256.com/2015/01/05/how-to-be-honest-and-keep-customer.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">How to Be Honest and Keep a Customer</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-01-05T00:00:00+00:00"> 5 January 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2015/01/05/how-to-be-honest-and-keep-customer.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><ul class="subline"> <li>Discussed at:</li> <li><a href="https://www.reddit.com/r/programming/comments/2rekrb/how_to_be_honest_and_keep_a_customer/">reddit</a></li></ul><p class="unprintable"><p>Most of our <a href="/2015/01/26/happy-boss-false-objective.html">clients</a> are rather surprised when we explain to them that they will have full access to the source code from the first day of the project. We let them see everything that is happening in the project, including the Git repository, <a href="/2018/04/24/right-way-to-report-bugs.html">bug reports</a>, discussions between programmers, <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> fails, etc. They often tell me that other software development <a href="/2015/10/27/outsourcing-doesnt-work.html">outsourcing teams</a> keep this information in-house and deliver only final releases, rarely together with the source code.</p><p>I understand why other developers are trying to hide as much as possible. Giving a project sponsor full access to the development environment is <a href="/2015/05/21/avoid-software-outsourcing-disaster.html">not easy</a> at all. Here is a summary of problems we&#39;ve been having and our solutions. I hope they help you honestly show your clients all project internals and still keep them on board.</p><figure class='jb_picture'><img itemprop='image' alt='99 francs (2007) by Jan Kounen' src='/images/2014/12/99-francs.png' longdesc='#822a28fd'/><figcaption id='822a28fd'>99 francs (2007) by Jan Kounen</figcaption></figure><h2 id="he-is-breaking-our-process">He Is Breaking Our Process</h2><p>This is the most popular problem we face with our new clients. Once they gain access to the development environment, they try to give instructions directly to programmers, walking around <a href="/2014/10/06/software-project-lifecycle.html">our existing process</a>. &quot;I&#39;m paying these guys; why can&#39;t I tell them what to do?&quot; is a very typical mindset. Instead of submitting requests through our standard change management mechanism, such a client goes directly to one of the programmers and tells him what should be fixed, how, and when. It&#39;s <a href="/2015/09/22/micromanagement.html">micro-management</a> in its worst form. We see it very often. What do we do?</p><aside class='quote'>The simplest answer is that the client is a moron. Sometimes this is exactly the case, but it&#39;s a rare one.</aside><p>First, we try to understand why it&#39;s happening. The simplest answer is that the client is a moron. Sometimes this is exactly the case, but it&#39;s a rare one. Much more often, our clients are not that bad. What is it, then? Why can&#39;t they follow the process and abide by the rules? There are a few possible reasons.</p><p>Maybe the <strong>rules are not explained well</strong>. This is the most popular root cause---the rules of work are not clear enough for the client. He just doesn&#39;t know what he is supposed to do in order to submit a request and get it implemented. To prevent this, we try to educate our clients at the beginning of a new project. We even write guidance manuals for clients. Most of them are happy to read them and learn the way we work, because they understand that this is the best way to achieve success while working with us.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=Rip_04Bv3Jk'><div class='box'> <img src='https://i.ytimg.com/vi/Rip_04Bv3Jk/mqdefault.jpg' alt='YouTube video #Rip_04Bv3Jk'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>How to be Honest and Keep a Client?; 11 June 2017.</div></aside><p>Maybe our <strong>management is chaotic</strong>, and the client is trying to &quot;organize&quot; us by giving explicit instructions regarding the most important tasks. We&#39;ve seen it before, and we are always trying to learn from this. As soon as we see that the client is trying to <a href="/2015/09/22/micromanagement.html">micro-manage</a> us, we ask ourselves: &quot;Is our process transparent enough? Do we give enough information to the client about milestones, risks, plans, <a href="/2015/06/02/how-to-estimate-software-cost.html">costs</a>, etc.?&quot; In most cases, it&#39;s our own fault, and we&#39;re trying to learn and improve. If so, it&#39;s important to react fast, before the client becomes too aggressive in his orders and instructions. It will be very difficult to escort him back to the normal process once he gets &quot;micro-management&quot; in his blood.</p><p>Maybe the client is not busy enough and has <strong>a lot of free time</strong>, which he is happy to spend by giving orders and distracting your team. I&#39;ve seen this many times. A solution? Keep him busy. Turn him into a member of the team and assign him some tasks related to documentation and research. In my experience, most clients would be happy to do this work and help the project.</p><h2 id="he-is-asking-too-much">He Is Asking Too Much</h2><p>A technically-savvy client can turn the life of <a href="/2014/10/12/who-is-software-architect.html">an architect</a> into a nightmare by constantly asking him to explain every single technical decision made, from &quot;Why PostgreSQL instead of MySQL?&quot; to &quot;Why doesn&#39;t this method throw a checked exception?&quot; Constantly answering such questions can turn a project into a school of programming. Even though he is paying for our time, that doesn&#39;t mean we should teach him how to develop software, right? On the other hand, he is interested in knowing how <em>his</em> software is developed and how it works. It&#39;s a fair request, isn&#39;t it?</p><aside class='quote'>He is interested in knowing how his software is developed and how it works. It&#39;s a fair request, isn&#39;t it?</aside><p>I believe there is a <em>win-win</em> solution to this problem. Here is how we manage it. First of all, we make all his requests formal. We ask a client to create a new ticket for each request, properly explaining what is not clear and how much detail is expected in the explanation.</p><p>Second, we look at such requests positively---they are good indicators of certain inconsistencies in the software. If it&#39;s not clear for the client why PostgreSQL is used and not MySQL, it&#39;s a fault of <a href="/2014/10/12/who-is-software-architect.html">our architect</a>. He didn&#39;t document his decision and didn&#39;t explain how it was made, what other options were considered, what selection criteria were applied, etc. Thus, a request from a client is <a href="/2014/04/13/bugs-are-welcome.html">a bug</a> we get for free. So, we look at it positively.</p><p>Finally, we charge our clients for the answers given. Every question, submitted as a ticket, goes through the full flow and <a href="/2014/10/21/incremental-billing.html">gets billed</a> just as any other ticket. This approach prevents the client from asking for too much. He realizes that we&#39;re ready to explain anything he wants, but he will pay for it.</p><h2 id="he-is-telling-too-much">He Is Telling Too Much</h2><p>This problem is even bigger than the previous one. Some clients believe they are savvy enough to argue with <a href="/2014/10/12/who-is-software-architect.html">our architect</a> and our programmers about how the software should be developed. They don&#39;t just ask why PostgreSQL is used, they tell us that we should use MySQL, because &quot;I know that it&#39;s a great database; my friend is using it, and his business is growing!&quot; Sometimes it gets even worse, when suggestions are directed at every class or even a method, like &quot;You should use a Singleton pattern here!&quot;</p><p>Our first choice is to agree and do what he wants. But it&#39;s a road to nowhere. Once you do it, your project is ruined, and you should start thinking about a divorce with this client. Your entire team will quickly turn into a group of coding monkeys, <a href="/2015/09/22/micromanagement.html">micro-managed</a> by someone with some cash. It&#39;s a very wrong direction; don&#39;t even think about going there.</p><p>The second choice is to tell the client to mind his own business and let us do ours. He <a href="/2016/06/21/how-to-hire-programmer.html">hired</a> us because we&#39;re professional enough to develop the software according to his requirements. If he questions our capabilities, he is free to <strong>change</strong> the contractor. But until then, he has to <a href="/2017/11/21/trust-pay-lose.html">trust</a> our decisions. Will this work? I doubt it. It&#39;s the same as giving him the finger. He will get offended, and you won&#39;t get anything.</p><p>The solution here is to turn the client&#39;s demands into project requirements. Most of them will be lost in the process, because they won&#39;t be sane enough to form a good requirement. Others will be documented, estimated, and crossed-out by the client himself, because he will realize they are pointless or too expensive. Only a few of them will survive, since they will be reasonable enough. And they will help the project. So it is also a <em>win-win</em> solution.</p><aside class='quote'>Never take a client&#39;s demands directly to execution, but rather use them first to amend the requirements documentation.</aside><p>For example, he says that &quot;you should use MySQL because it&#39;s great.&quot; You tell him that the project requirements document doesn&#39;t limit you to choose whichever database you like. Should it? He says yes, of course! OK, let&#39;s try to document such a requirement. How will it sound? How about, &quot;We should only use great databases?&quot; Sound correct? If so, then PostgreSQL satisfies this requirement. Problem solved; let us continue to do our work. He will have a hard time figuring out how to write a requirement in a way that disallows PostgreSQL but allows MySQL. It is simply not possible in most cases.</p><p>Sometimes, though, it will make sense; for example, &quot;We should use a database server that understands our legacy data in MySQL format.&quot; This is a perfectly sane requirement, and the only way to satisfy it is to use MySQL.</p><p>Thus, my recommendation is to never take a client&#39;s demands directly to execution, but rather use them first to amend the requirements documentation. Even if you don&#39;t have such documentation, create a simple one-page document. Agree with the client that you work against this document, and when anyone wants to change something, you first have to amend the document and then have your team ensure the software satisfies it. This kind of discipline will be accepted by any client and will protect you against sudden and distracting corrections.</p><h2 id="he-is-questioning-our-skills">He Is Questioning Our Skills</h2><p>When source code is open to the client, and he is technically capable of reading it, it is very possible that one day he will tell us that our code is crap and we have to learn how to program better. It has not happened in our projects for many years, but it has happened before, when we weren&#39;t using static analysis as a <a href="/2014/08/13/strict-code-quality-control.html">mandatory step</a> in our <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> pipeline.</p><p>Another funny possibility is when the client shows the source code to a &quot;friend,&quot; and he gives a &quot;professional&quot; opinion, which sounds like, &quot;They don&#39;t know what they are doing.&quot; Once such an opinion hits your client&#39;s ears, the project is at a significant risk of closure. It&#39;ll be very difficult, almost impossible, to convince the client not to listen to the &quot;friend&quot; and continue to work with you. That&#39;s why most <a href="/2015/10/27/outsourcing-doesnt-work.html">outsourcers</a> prefer to keep their sources private until the very end of the project, when the final invoice is paid.</p><aside class='quote'>No matter how beautiful your architecture and your source code is, the &quot;friend&quot; will always be right.</aside><p>I think that an accidental appearance of a &quot;friend&quot; with a negative opinion is un-preventable. If it happens, it happens. You can&#39;t avoid it. On the other hand, if you think your code is perfect and your team has only talented programmers writing beautiful software, this is not going to protect you either. An opinion coming from a &quot;friend&quot; won&#39;t be objective; it will just be very personal, and that&#39;s why it&#39;s very credible. He is a friend of a client, and he doesn&#39;t send him bills every week. Why would he lie? Of course, he is speaking from the heart! (I&#39;m being sarcastic.) So, no matter how beautiful your architecture and your source code is, the &quot;friend&quot; will always be right.</p><p>In my opinion, the only way to prevent such a situation or minimize its consequences is to organize regular and systematic <a href="/2014/12/18/independent-technical-reviews.html">independent technical reviews</a>. They will give confidence to the client that the team is not lying to him about the quality of the product and key technical decisions made internally.</p><hr/><p>To conclude, I strongly believe it is important to be honest and open with each client, no matter how difficult it is. Try to learn from every <a href="/2017/01/03/how-much-you-love-conflicts.html">conflict</a> with each client, and improve your management process and your principles of work. Hiding source code is not professional and makes you look bad in the eyes of your clients and the entire industry.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/01/05/how-to-be-honest-and-keep-customer.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/01/05/how-to-be-honest-and-keep-customer.html&amp;text=How+to+Be+Honest+and+Keep+a+Customer" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/01/05/how-to-be-honest-and-keep-customer.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/01/05/how-to-be-honest-and-keep-customer.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/01/05/how-to-be-honest-and-keep-customer.html%3F2015-01&amp;title=How+to+Be+Honest+and+Keep+a+Customer" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/01/05/how-to-be-honest-and-keep-customer.html%3F2015-01&amp;t=How+to+Be+Honest+and+Keep+a+Customer" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>Most of our <a href="/2015/01/26/happy-boss-false-objective.html">clients</a> are rather surprised when we explain to them that they will have full access to the source code from the first day of the project. We let them see everything that is happening in the project, including the Git repository, <a href="/2018/04/24/right-way-to-report-bugs.html">bug reports</a>, discussions between programmers, <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> fails, etc. They often tell me that other software development <a href="/2015/10/27/outsourcing-doesnt-work.html">outsourcing teams</a> keep this information in-house and deliver only final releases, rarely together with the source code.</p><p>I understand why other developers are trying to hide as much as possible. Giving a project sponsor full access to the development environment is <a href="/2015/05/21/avoid-software-outsourcing-disaster.html">not easy</a> at all. Here is a summary of problems we&#39;ve been having and our solutions. I hope they help you honestly show your clients all project internals and still keep them on board.</p><figure class='jb_picture'><img itemprop='image' alt='99 francs (2007) by Jan Kounen' src='/images/2014/12/99-francs.png' longdesc='#822a28fd'/><figcaption id='822a28fd'>99 francs (2007) by Jan Kounen</figcaption></figure><h2 id="he-is-breaking-our-process">He Is Breaking Our Process</h2><p>This is the most popular problem we face with our new clients. Once they gain access to the development environment, they try to give instructions directly to programmers, walking around <a href="/2014/10/06/software-project-lifecycle.html">our existing process</a>. &quot;I&#39;m paying these guys; why can&#39;t I tell them what to do?&quot; is a very typical mindset. Instead of submitting requests through our standard change management mechanism, such a client goes directly to one of the programmers and tells him what should be fixed, how, and when. It&#39;s <a href="/2015/09/22/micromanagement.html">micro-management</a> in its worst form. We see it very often. What do we do?</p><aside class='quote'>The simplest answer is that the client is a moron. Sometimes this is exactly the case, but it&#39;s a rare one.</aside><p>First, we try to understand why it&#39;s happening. The simplest answer is that the client is a moron. Sometimes this is exactly the case, but it&#39;s a rare one. Much more often, our clients are not that bad. What is it, then? Why can&#39;t they follow the process and abide by the rules? There are a few possible reasons.</p><p>Maybe the <strong>rules are not explained well</strong>. This is the most popular root cause---the rules of work are not clear enough for the client. He just doesn&#39;t know what he is supposed to do in order to submit a request and get it implemented. To prevent this, we try to educate our clients at the beginning of a new project. We even write guidance manuals for clients. Most of them are happy to read them and learn the way we work, because they understand that this is the best way to achieve success while working with us.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=Rip_04Bv3Jk'><div class='box'> <img src='https://i.ytimg.com/vi/Rip_04Bv3Jk/mqdefault.jpg' alt='YouTube video #Rip_04Bv3Jk'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>How to be Honest and Keep a Client?; 11 June 2017.</div></aside><p>Maybe our <strong>management is chaotic</strong>, and the client is trying to &quot;organize&quot; us by giving explicit instructions regarding the most important tasks. We&#39;ve seen it before, and we are always trying to learn from this. As soon as we see that the client is trying to <a href="/2015/09/22/micromanagement.html">micro-manage</a> us, we ask ourselves: &quot;Is our process transparent enough? Do we give enough information to the client about milestones, risks, plans, <a href="/2015/06/02/how-to-estimate-software-cost.html">costs</a>, etc.?&quot; In most cases, it&#39;s our own fault, and we&#39;re trying to learn and improve. If so, it&#39;s important to react fast, before the client becomes too aggressive in his orders and instructions. It will be very difficult to escort him back to the normal process once he gets &quot;micro-management&quot; in his blood.</p><p>Maybe the client is not busy enough and has <strong>a lot of free time</strong>, which he is happy to spend by giving orders and distracting your team. I&#39;ve seen this many times. A solution? Keep him busy. Turn him into a member of the team and assign him some tasks related to documentation and research. In my experience, most clients would be happy to do this work and help the project.</p><h2 id="he-is-asking-too-much">He Is Asking Too Much</h2><p>A technically-savvy client can turn the life of <a href="/2014/10/12/who-is-software-architect.html">an architect</a> into a nightmare by constantly asking him to explain every single technical decision made, from &quot;Why PostgreSQL instead of MySQL?&quot; to &quot;Why doesn&#39;t this method throw a checked exception?&quot; Constantly answering such questions can turn a project into a school of programming. Even though he is paying for our time, that doesn&#39;t mean we should teach him how to develop software, right? On the other hand, he is interested in knowing how <em>his</em> software is developed and how it works. It&#39;s a fair request, isn&#39;t it?</p><aside class='quote'>He is interested in knowing how his software is developed and how it works. It&#39;s a fair request, isn&#39;t it?</aside><p>I believe there is a <em>win-win</em> solution to this problem. Here is how we manage it. First of all, we make all his requests formal. We ask a client to create a new ticket for each request, properly explaining what is not clear and how much detail is expected in the explanation.</p><p>Second, we look at such requests positively---they are good indicators of certain inconsistencies in the software. If it&#39;s not clear for the client why PostgreSQL is used and not MySQL, it&#39;s a fault of <a href="/2014/10/12/who-is-software-architect.html">our architect</a>. He didn&#39;t document his decision and didn&#39;t explain how it was made, what other options were considered, what selection criteria were applied, etc. Thus, a request from a client is <a href="/2014/04/13/bugs-are-welcome.html">a bug</a> we get for free. So, we look at it positively.</p><p>Finally, we charge our clients for the answers given. Every question, submitted as a ticket, goes through the full flow and <a href="/2014/10/21/incremental-billing.html">gets billed</a> just as any other ticket. This approach prevents the client from asking for too much. He realizes that we&#39;re ready to explain anything he wants, but he will pay for it.</p><h2 id="he-is-telling-too-much">He Is Telling Too Much</h2><p>This problem is even bigger than the previous one. Some clients believe they are savvy enough to argue with <a href="/2014/10/12/who-is-software-architect.html">our architect</a> and our programmers about how the software should be developed. They don&#39;t just ask why PostgreSQL is used, they tell us that we should use MySQL, because &quot;I know that it&#39;s a great database; my friend is using it, and his business is growing!&quot; Sometimes it gets even worse, when suggestions are directed at every class or even a method, like &quot;You should use a Singleton pattern here!&quot;</p><p>Our first choice is to agree and do what he wants. But it&#39;s a road to nowhere. Once you do it, your project is ruined, and you should start thinking about a divorce with this client. Your entire team will quickly turn into a group of coding monkeys, <a href="/2015/09/22/micromanagement.html">micro-managed</a> by someone with some cash. It&#39;s a very wrong direction; don&#39;t even think about going there.</p><p>The second choice is to tell the client to mind his own business and let us do ours. He <a href="/2016/06/21/how-to-hire-programmer.html">hired</a> us because we&#39;re professional enough to develop the software according to his requirements. If he questions our capabilities, he is free to <strong>change</strong> the contractor. But until then, he has to <a href="/2017/11/21/trust-pay-lose.html">trust</a> our decisions. Will this work? I doubt it. It&#39;s the same as giving him the finger. He will get offended, and you won&#39;t get anything.</p><p>The solution here is to turn the client&#39;s demands into project requirements. Most of them will be lost in the process, because they won&#39;t be sane enough to form a good requirement. Others will be documented, estimated, and crossed-out by the client himself, because he will realize they are pointless or too expensive. Only a few of them will survive, since they will be reasonable enough. And they will help the project. So it is also a <em>win-win</em> solution.</p><aside class='quote'>Never take a client&#39;s demands directly to execution, but rather use them first to amend the requirements documentation.</aside><p>For example, he says that &quot;you should use MySQL because it&#39;s great.&quot; You tell him that the project requirements document doesn&#39;t limit you to choose whichever database you like. Should it? He says yes, of course! OK, let&#39;s try to document such a requirement. How will it sound? How about, &quot;We should only use great databases?&quot; Sound correct? If so, then PostgreSQL satisfies this requirement. Problem solved; let us continue to do our work. He will have a hard time figuring out how to write a requirement in a way that disallows PostgreSQL but allows MySQL. It is simply not possible in most cases.</p><p>Sometimes, though, it will make sense; for example, &quot;We should use a database server that understands our legacy data in MySQL format.&quot; This is a perfectly sane requirement, and the only way to satisfy it is to use MySQL.</p><p>Thus, my recommendation is to never take a client&#39;s demands directly to execution, but rather use them first to amend the requirements documentation. Even if you don&#39;t have such documentation, create a simple one-page document. Agree with the client that you work against this document, and when anyone wants to change something, you first have to amend the document and then have your team ensure the software satisfies it. This kind of discipline will be accepted by any client and will protect you against sudden and distracting corrections.</p><h2 id="he-is-questioning-our-skills">He Is Questioning Our Skills</h2><p>When source code is open to the client, and he is technically capable of reading it, it is very possible that one day he will tell us that our code is crap and we have to learn how to program better. It has not happened in our projects for many years, but it has happened before, when we weren&#39;t using static analysis as a <a href="/2014/08/13/strict-code-quality-control.html">mandatory step</a> in our <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> pipeline.</p><p>Another funny possibility is when the client shows the source code to a &quot;friend,&quot; and he gives a &quot;professional&quot; opinion, which sounds like, &quot;They don&#39;t know what they are doing.&quot; Once such an opinion hits your client&#39;s ears, the project is at a significant risk of closure. It&#39;ll be very difficult, almost impossible, to convince the client not to listen to the &quot;friend&quot; and continue to work with you. That&#39;s why most <a href="/2015/10/27/outsourcing-doesnt-work.html">outsourcers</a> prefer to keep their sources private until the very end of the project, when the final invoice is paid.</p><aside class='quote'>No matter how beautiful your architecture and your source code is, the &quot;friend&quot; will always be right.</aside><p>I think that an accidental appearance of a &quot;friend&quot; with a negative opinion is un-preventable. If it happens, it happens. You can&#39;t avoid it. On the other hand, if you think your code is perfect and your team has only talented programmers writing beautiful software, this is not going to protect you either. An opinion coming from a &quot;friend&quot; won&#39;t be objective; it will just be very personal, and that&#39;s why it&#39;s very credible. He is a friend of a client, and he doesn&#39;t send him bills every week. Why would he lie? Of course, he is speaking from the heart! (I&#39;m being sarcastic.) So, no matter how beautiful your architecture and your source code is, the &quot;friend&quot; will always be right.</p><p>In my opinion, the only way to prevent such a situation or minimize its consequences is to organize regular and systematic <a href="/2014/12/18/independent-technical-reviews.html">independent technical reviews</a>. They will give confidence to the client that the team is not lying to him about the quality of the product and key technical decisions made internally.</p><hr/><p>To conclude, I strongly believe it is important to be honest and open with each client, no matter how difficult it is. Try to learn from every <a href="/2017/01/03/how-much-you-love-conflicts.html">conflict</a> with each client, and improve your management process and your principles of work. Hiding source code is not professional and makes you look bad in the eyes of your clients and the entire industry.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Regularly and systematically having your programmers&apos; technical deliverables reviewed by an independent engineer will greatly improve your quality and team motivation. " /> <meta name="keywords" content="how to control programmers, how to monitor programmers, independent code review, independent review of source code, independent source code review, independent technical review" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-12-18 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="You Do Need Independent Technical Reviews!"/> <meta name="twitter:description" property="og:description" content="Regularly and systematically having your programmers&apos; technical deliverables reviewed by an independent engineer will greatly improve your quality and team motivation. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/12/18/independent-technical-reviews.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2014/12/18/independent-technical-reviews.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/12/18/independent-technical-reviews.amp.html" /> <title>You Do Need Independent Technical Reviews! </title> <meta name='og:image' content='https://www.yegor256.com/images/2014/12/arizona-dream-car-shop.png'/><meta name='twitter:image' content='https://www.yegor256.com/images/2014/12/arizona-dream-car-shop.png'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='653'/> <meta name='twitter:image:height' content='653'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Arizona Dream (1992) by Emir Kusturica'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/12/18/independent-technical-reviews.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2014/12/18/independent-technical-reviews.html">https://www.yegor256.com/2014/12/18/independent-technical-reviews.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">You Do Need Independent Technical Reviews!</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-12-18T00:00:00+00:00"> 18 December 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/12/18/independent-technical-reviews.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>Do you have a team of brilliant and enthusiastic programmers? Of course! You&#39;ve carefully chosen them from a hundred candidates! Are they passionate about the product? Absolutely! They use cutting-edge technologies, never sleep, and hardly eat or drink anything except coffee! Do they believe in your business success? No doubts about it; they live and breathe all those features, releases, continuous delivery, user experience, etc. Are you sure they are developing the product <em>correctly</em>? Well, yes, you&#39;re pretty sure; why wouldn&#39;t they? ...</p><figure class='jb_picture'><img itemprop='image' alt='Arizona Dream (1992) by Emir Kusturica' src='/images/2014/12/arizona-dream-car-shop.png' longdesc='#4382e3b5'/><figcaption id='4382e3b5'>Arizona Dream (1992) by Emir Kusturica</figcaption></figure><p>Does this sound <a href="/2017/11/21/trust-pay-lose.html">familiar</a>? I can&#39;t count how many times I&#39;ve heard these stories told by startup founders. Most of them are in love with their teams ... until that day when it&#39;s time to <a href="/2016/06/21/how-to-hire-programmer.html">hire</a> <em>a new one</em>. There could be many possible reasons for such a fiasco, but one of them is a lack of regular, systematic, and independent <em>technical reviews</em>. Nothing demotivates a development team more than a lack of attention to their deliverables. On the other hand, a regular reconciliation of their results and your quality expectations is one of the key factors that will guarantee technical success for your startup. Below I summarize my experience with organizing such technical reviews.</p><p>An independent review is when you ask someone outside of your team to look at your source code and other technical resources and give you an objective opinion about them. Every modern software team should also use internal code reviews, which is is something else entirely. An internal review occurs when one programmer shows his code to other peers on the team and asks their opinion. This usually happens as a daily activity and has nothing to do with independent reviews.</p><p>An independent review is performed by a programmer who knows nothing about your team. He comes on board, checks out the code from your repository, spends a few hours (or days) looking at it and trying to understand what it does. Then, he tells you what is wrong and where. He explains how he would do it better, where he would change it, and what he would do instead. Then, you pay him and he leaves. You may never see him again, but his conclusions and suggestions help you <em>check the reality</em> of your code and evaluate how your team is really doing.</p><figure class='badge'><a href='http://www.zerocracy.com'><img src='http://www.0crat.com/svg/logo.svg' style='width:100px;max-width:100%;' alt='badge'/></a></figure><p>We, at <a href="http://www.zerocracy.com">Zerocracy</a>, do independent reviews with every project of ours, and this is a list of principles we use:</p><p><strong>Make Independent Reviews Systematic</strong>. This is the first and most important rule---organize such technical reviews regularly. Moreover, inform your team about the schedule, and let them be prepared for the reviews. Once a month is a good practice, according to my experience. Depending on your source code size, a full review should take from <em>two to eight hours</em>. Don&#39;t spend more than eight hours; there is no point in going too deep into the code during independent reviews.</p><p><strong>Pay for Bugs Found</strong>. We <a href="/2014/04/13/bugs-are-welcome.html">always</a> pay for bugs, not for the time spent finding them. We ask our reviewers to look at the code and report as many bugs as we think we need. For each bug, we pay 15 minutes for their time. In other words, we assume that a good reviewer can find and report approximately four problems in one hour. For example, a reviewer charges $150 per hour. We hire him and ask him to find and report the 20 most critical issues he can discover. Our estimate is that he should spend five hours on this work. Thus, he will get $750 when we have 20 bugs in our tracking system reported by him. If he finds fewer, he gets proportionally less money. This payment schedule will help you focus your reviewer on the main objective of the review process---finding and reporting issues. There are no other goals. The only thing you&#39;re interested in is knowing what the issues with your current technical solution are. That&#39;s what you&#39;re paying for.</p><p><strong>Hire the Best and Pay Well</strong>. My experience tells me that the position of an independent reviewer is a very important one. He is not just a programmer but more of <a href="/2014/10/12/who-is-software-architect.html">an architect</a> who is capable of looking at the solution from a very high level of abstraction, while at the same time paying a lot of attention to details; he should be very good at designing similar systems; he should know how to report a bug correctly and with enough detail; he should understand your business domain; etc. Besides all that, he should be well motivated to help you. You&#39;re not hiring him for full-time work but rather just for a few-hour gig. My advice is to try to get <a href="/2014/10/29/how-much-do-you-cost.html">the best guys</a>, and pay them as much as they ask, usually over $100 per hour. Don&#39;t negotiate, just pay. It&#39;s just a few hundred dollars for you, but the effect of their contribution will be huge.</p><p><strong>Ask For and Expect Criticism</strong>. It is a very common mistake to ask a reviewer, &quot;Do you like our code?&quot; Don&#39;t expect him to tell you how great your code is. This is not what you&#39;re paying him for! You already have a full team of programmers for cheering you up; they can tell you a lot about the code they are creating and how awesome it is. You don&#39;t want to hear this again from the reviewer. Instead, you want to know what is wrong and needs to be fixed. So your questions should sound like, &quot;What problems do you think we should fix first?&quot; Some reviewers will try to please you with positive comments, but ignore that flattery and bring them back to the main goal---bugs. The payment schedule explained above should help.</p><p><strong>Regularly Change Reviewers</strong>. Try not to use the same reviewer more than once on the same project (I mean the same code base). I believe the reason here is obvious, but let me re-iterate: You don&#39;t need your reviewer to be nice to you and tell you how great your code is. You want him to be objective and focused on problems, not on bright sides. If you hire the same person again and again, psychologically you make him engaged to the source code. He&#39;s seen it once; now he has to see it again. He already told you about some problem, and now he has to repeat it again. He won&#39;t feel comfortable doing it. Instead, he will start feeling like a member of the team and will feel <em>responsible</em> for the source code and its mistakes. He, as any other team member, will start hiding issues instead of revealing them. Thus, for every independent technical review, get a new person.</p><p><strong>Be Polite and Honest With Your Team</strong>. Independent reviews can be rather offensive to your programmers. They may think that you don&#39;t trust them. They may feel that you don&#39;t respect them as technical specialists. They may even decide that you&#39;re getting ready to fire them all and are currently looking for new people. This is a very possible and very destructive side effect of an independent review. How do you avoid it? I can&#39;t give you universal advice, but the best suggestion I can give is this: be honest with them. Tell them that the <a href="/2017/12/26/software-quality-formula.html">quality of the product</a> is critical for you and your business. Explain to them that the business is paying them for their work and that in order to keep paychecks coming, you have to stress quality control---regularly, objectively, independently, and honestly. In the end, if you manage to organize reviews as this article explains, the team will be very thankful to you. They will gain a lot of new ideas and thoughts from every review and will ask you to repeat them regularly.</p><p><strong>Review From Day One</strong>. Don&#39;t wait until the end of the project! I&#39;ve seen this mistake many times. Very often startup founders think that until the product is done and ready for the market, they shouldn&#39;t distract their team. They think they should let the team work toward project milestones and take care of quality later, &quot;when we have a million visitors per day.&quot; This day will never come if you let your team run without control! Start conducting independent reviews from the moment your Git repository has its first file. Until the repository is big enough, you may only spend $300 once a month to receive an objective, independent opinion about its quality. Will this ruin your budget?</p><p><strong>Prohibit Discussions, and Ask for Formal Reporting</strong>. Don&#39;t let your reviewers talk to the team. If you do, the entire idea of a review being independent falls apart. If a reviewer is able to ask informal questions and discuss your system design with your programmers, their answers will satisfy him, and he will move on. But you, the owner of the business, will stay exactly where you were before the review. The point of the review is not to make the reviewer happy. It is exactly the opposite. You want to make him confused! If he is confused, your design is wrong and he feels the need to report a bug. The source code should speak for itself, and it should be easy enough for a stranger (the reviewer) to understand how it works. If this is not the case, there is something wrong that should be fixed.</p><p><strong>Treat Any Question as a Bug</strong>. Don&#39;t expect a review to produce any bugs in functionality, like &quot;I click this button and the system crashes.&quot; This will happen rarely, if ever. Your team is very good at discovering these issues and fixing them. Independent reviews are not about that kind of bugs. The main goal of an independent review is to <a href="/2014/11/24/principles-of-bug-tracking.html">discover bugs</a> in the architecture and design. Your product may work, but its architecture may have serious design flaws that won&#39;t allow you, for example, to handle exponential growth in web traffic. An independent reviewer will help you find those <a href="/2015/08/25/fail-fast.html">flaws</a> and address them sooner than later. In order to get bugs of that kind from the reviewer, you should encourage him to report <em>anything</em> he doesn&#39;t like---unmotivated use of a technology, lack of documentation, unclear purpose of a file, absence of a unit test, etc. Remember, the reviewer is not a member of your team and has his own ideas about the technologies you&#39;re using and software development in general. You&#39;re interested in matching his vision with your team&#39;s. Then, you&#39;re interested in fixing all critical mismatches.</p><p><strong>Review Everything, Not Just Source Code</strong>. Let your reviewer look at all technical resources you have, not just source code files (<code>.java</code>, <code>.rb</code>, <code>.php</code>, etc.) Give him access to the database schema, <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> panel, build environment, issue tracking system, plans and schedules, work agendas, up-time reports, deployment pipeline, production logs, customer <a href="/2018/04/24/right-way-to-report-bugs.html">bug reports</a>, statistics, etc. Everything that could help him understand how your system works, and more importantly, where and how it breaks, is very useful. Don&#39;t limit the reviewer to the source code only---this is simply not enough! Let him see the big picture, and you will get a much more detailed and professional report.</p><p><strong>Track How Inconsistencies Are Resolved</strong>. Once you get a report from the reviewer, make sure that the most important issues immediately get into your team&#39;s backlog. Then, make sure they are addressed and closed. That doesn&#39;t mean you should fix them all and listen to everything said by the reviewer. Definitely not! Your <a href="/2014/10/12/who-is-software-architect.html">architect</a> runs the show, not the reviewer. Your <a href="/2016/07/21/convince-me.html">architect</a> should decide what is right and what is wrong in the technical implementation of the product. But it&#39;s important to make him resolve all concerns raised by the reviewer. Very often you will get answers like these from him: &quot;We don&#39;t care about it now,&quot; &quot;we won&#39;t fix it until the next release,&quot; or &quot;he is wrong; we&#39;re doing it better.&quot; These answers are perfectly valid, but they have to be given (reviewers are people and they also make mistakes). The answers will help you, the founder, understand what your team is doing and how well they understand their business.</p><hr/><p>If you can offer more suggestions, based on your experience, please post them below in the comments, and I&#39;ll add them to the list. I&#39;m still thinking that I may have forgotten something important :)</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/12/18/independent-technical-reviews.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/12/18/independent-technical-reviews.html&amp;text=You+Do+Need+Independent+Technical+Reviews%21" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/12/18/independent-technical-reviews.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/12/18/independent-technical-reviews.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/12/18/independent-technical-reviews.html%3F2014-50&amp;title=You+Do+Need+Independent+Technical+Reviews%21" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/12/18/independent-technical-reviews.html%3F2014-50&amp;t=You+Do+Need+Independent+Technical+Reviews%21" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>Do you have a team of brilliant and enthusiastic programmers? Of course! You&#39;ve carefully chosen them from a hundred candidates! Are they passionate about the product? Absolutely! They use cutting-edge technologies, never sleep, and hardly eat or drink anything except coffee! Do they believe in your business success? No doubts about it; they live and breathe all those features, releases, continuous delivery, user experience, etc. Are you sure they are developing the product <em>correctly</em>? Well, yes, you&#39;re pretty sure; why wouldn&#39;t they? ...</p><figure class='jb_picture'><img itemprop='image' alt='Arizona Dream (1992) by Emir Kusturica' src='/images/2014/12/arizona-dream-car-shop.png' longdesc='#4382e3b5'/><figcaption id='4382e3b5'>Arizona Dream (1992) by Emir Kusturica</figcaption></figure><p>Does this sound <a href="/2017/11/21/trust-pay-lose.html">familiar</a>? I can&#39;t count how many times I&#39;ve heard these stories told by startup founders. Most of them are in love with their teams ... until that day when it&#39;s time to <a href="/2016/06/21/how-to-hire-programmer.html">hire</a> <em>a new one</em>. There could be many possible reasons for such a fiasco, but one of them is a lack of regular, systematic, and independent <em>technical reviews</em>. Nothing demotivates a development team more than a lack of attention to their deliverables. On the other hand, a regular reconciliation of their results and your quality expectations is one of the key factors that will guarantee technical success for your startup. Below I summarize my experience with organizing such technical reviews.</p><p>An independent review is when you ask someone outside of your team to look at your source code and other technical resources and give you an objective opinion about them. Every modern software team should also use internal code reviews, which is is something else entirely. An internal review occurs when one programmer shows his code to other peers on the team and asks their opinion. This usually happens as a daily activity and has nothing to do with independent reviews.</p><p>An independent review is performed by a programmer who knows nothing about your team. He comes on board, checks out the code from your repository, spends a few hours (or days) looking at it and trying to understand what it does. Then, he tells you what is wrong and where. He explains how he would do it better, where he would change it, and what he would do instead. Then, you pay him and he leaves. You may never see him again, but his conclusions and suggestions help you <em>check the reality</em> of your code and evaluate how your team is really doing.</p><figure class='badge'><a href='http://www.zerocracy.com'><img src='http://www.0crat.com/svg/logo.svg' style='width:100px;max-width:100%;' alt='badge'/></a></figure><p>We, at <a href="http://www.zerocracy.com">Zerocracy</a>, do independent reviews with every project of ours, and this is a list of principles we use:</p><p><strong>Make Independent Reviews Systematic</strong>. This is the first and most important rule---organize such technical reviews regularly. Moreover, inform your team about the schedule, and let them be prepared for the reviews. Once a month is a good practice, according to my experience. Depending on your source code size, a full review should take from <em>two to eight hours</em>. Don&#39;t spend more than eight hours; there is no point in going too deep into the code during independent reviews.</p><p><strong>Pay for Bugs Found</strong>. We <a href="/2014/04/13/bugs-are-welcome.html">always</a> pay for bugs, not for the time spent finding them. We ask our reviewers to look at the code and report as many bugs as we think we need. For each bug, we pay 15 minutes for their time. In other words, we assume that a good reviewer can find and report approximately four problems in one hour. For example, a reviewer charges $150 per hour. We hire him and ask him to find and report the 20 most critical issues he can discover. Our estimate is that he should spend five hours on this work. Thus, he will get $750 when we have 20 bugs in our tracking system reported by him. If he finds fewer, he gets proportionally less money. This payment schedule will help you focus your reviewer on the main objective of the review process---finding and reporting issues. There are no other goals. The only thing you&#39;re interested in is knowing what the issues with your current technical solution are. That&#39;s what you&#39;re paying for.</p><p><strong>Hire the Best and Pay Well</strong>. My experience tells me that the position of an independent reviewer is a very important one. He is not just a programmer but more of <a href="/2014/10/12/who-is-software-architect.html">an architect</a> who is capable of looking at the solution from a very high level of abstraction, while at the same time paying a lot of attention to details; he should be very good at designing similar systems; he should know how to report a bug correctly and with enough detail; he should understand your business domain; etc. Besides all that, he should be well motivated to help you. You&#39;re not hiring him for full-time work but rather just for a few-hour gig. My advice is to try to get <a href="/2014/10/29/how-much-do-you-cost.html">the best guys</a>, and pay them as much as they ask, usually over $100 per hour. Don&#39;t negotiate, just pay. It&#39;s just a few hundred dollars for you, but the effect of their contribution will be huge.</p><p><strong>Ask For and Expect Criticism</strong>. It is a very common mistake to ask a reviewer, &quot;Do you like our code?&quot; Don&#39;t expect him to tell you how great your code is. This is not what you&#39;re paying him for! You already have a full team of programmers for cheering you up; they can tell you a lot about the code they are creating and how awesome it is. You don&#39;t want to hear this again from the reviewer. Instead, you want to know what is wrong and needs to be fixed. So your questions should sound like, &quot;What problems do you think we should fix first?&quot; Some reviewers will try to please you with positive comments, but ignore that flattery and bring them back to the main goal---bugs. The payment schedule explained above should help.</p><p><strong>Regularly Change Reviewers</strong>. Try not to use the same reviewer more than once on the same project (I mean the same code base). I believe the reason here is obvious, but let me re-iterate: You don&#39;t need your reviewer to be nice to you and tell you how great your code is. You want him to be objective and focused on problems, not on bright sides. If you hire the same person again and again, psychologically you make him engaged to the source code. He&#39;s seen it once; now he has to see it again. He already told you about some problem, and now he has to repeat it again. He won&#39;t feel comfortable doing it. Instead, he will start feeling like a member of the team and will feel <em>responsible</em> for the source code and its mistakes. He, as any other team member, will start hiding issues instead of revealing them. Thus, for every independent technical review, get a new person.</p><p><strong>Be Polite and Honest With Your Team</strong>. Independent reviews can be rather offensive to your programmers. They may think that you don&#39;t trust them. They may feel that you don&#39;t respect them as technical specialists. They may even decide that you&#39;re getting ready to fire them all and are currently looking for new people. This is a very possible and very destructive side effect of an independent review. How do you avoid it? I can&#39;t give you universal advice, but the best suggestion I can give is this: be honest with them. Tell them that the <a href="/2017/12/26/software-quality-formula.html">quality of the product</a> is critical for you and your business. Explain to them that the business is paying them for their work and that in order to keep paychecks coming, you have to stress quality control---regularly, objectively, independently, and honestly. In the end, if you manage to organize reviews as this article explains, the team will be very thankful to you. They will gain a lot of new ideas and thoughts from every review and will ask you to repeat them regularly.</p><p><strong>Review From Day One</strong>. Don&#39;t wait until the end of the project! I&#39;ve seen this mistake many times. Very often startup founders think that until the product is done and ready for the market, they shouldn&#39;t distract their team. They think they should let the team work toward project milestones and take care of quality later, &quot;when we have a million visitors per day.&quot; This day will never come if you let your team run without control! Start conducting independent reviews from the moment your Git repository has its first file. Until the repository is big enough, you may only spend $300 once a month to receive an objective, independent opinion about its quality. Will this ruin your budget?</p><p><strong>Prohibit Discussions, and Ask for Formal Reporting</strong>. Don&#39;t let your reviewers talk to the team. If you do, the entire idea of a review being independent falls apart. If a reviewer is able to ask informal questions and discuss your system design with your programmers, their answers will satisfy him, and he will move on. But you, the owner of the business, will stay exactly where you were before the review. The point of the review is not to make the reviewer happy. It is exactly the opposite. You want to make him confused! If he is confused, your design is wrong and he feels the need to report a bug. The source code should speak for itself, and it should be easy enough for a stranger (the reviewer) to understand how it works. If this is not the case, there is something wrong that should be fixed.</p><p><strong>Treat Any Question as a Bug</strong>. Don&#39;t expect a review to produce any bugs in functionality, like &quot;I click this button and the system crashes.&quot; This will happen rarely, if ever. Your team is very good at discovering these issues and fixing them. Independent reviews are not about that kind of bugs. The main goal of an independent review is to <a href="/2014/11/24/principles-of-bug-tracking.html">discover bugs</a> in the architecture and design. Your product may work, but its architecture may have serious design flaws that won&#39;t allow you, for example, to handle exponential growth in web traffic. An independent reviewer will help you find those <a href="/2015/08/25/fail-fast.html">flaws</a> and address them sooner than later. In order to get bugs of that kind from the reviewer, you should encourage him to report <em>anything</em> he doesn&#39;t like---unmotivated use of a technology, lack of documentation, unclear purpose of a file, absence of a unit test, etc. Remember, the reviewer is not a member of your team and has his own ideas about the technologies you&#39;re using and software development in general. You&#39;re interested in matching his vision with your team&#39;s. Then, you&#39;re interested in fixing all critical mismatches.</p><p><strong>Review Everything, Not Just Source Code</strong>. Let your reviewer look at all technical resources you have, not just source code files (<code>.java</code>, <code>.rb</code>, <code>.php</code>, etc.) Give him access to the database schema, <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> panel, build environment, issue tracking system, plans and schedules, work agendas, up-time reports, deployment pipeline, production logs, customer <a href="/2018/04/24/right-way-to-report-bugs.html">bug reports</a>, statistics, etc. Everything that could help him understand how your system works, and more importantly, where and how it breaks, is very useful. Don&#39;t limit the reviewer to the source code only---this is simply not enough! Let him see the big picture, and you will get a much more detailed and professional report.</p><p><strong>Track How Inconsistencies Are Resolved</strong>. Once you get a report from the reviewer, make sure that the most important issues immediately get into your team&#39;s backlog. Then, make sure they are addressed and closed. That doesn&#39;t mean you should fix them all and listen to everything said by the reviewer. Definitely not! Your <a href="/2014/10/12/who-is-software-architect.html">architect</a> runs the show, not the reviewer. Your <a href="/2016/07/21/convince-me.html">architect</a> should decide what is right and what is wrong in the technical implementation of the product. But it&#39;s important to make him resolve all concerns raised by the reviewer. Very often you will get answers like these from him: &quot;We don&#39;t care about it now,&quot; &quot;we won&#39;t fix it until the next release,&quot; or &quot;he is wrong; we&#39;re doing it better.&quot; These answers are perfectly valid, but they have to be given (reviewers are people and they also make mistakes). The answers will help you, the founder, understand what your team is doing and how well they understand their business.</p><hr/><p>If you can offer more suggestions, based on your experience, please post them below in the comments, and I&#39;ll add them to the list. I&#39;m still thinking that I may have forgotten something important :)</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="This article illustrates by example how immutability forces you to design small and cohesive objects, while mutability causes scope creep and tight coupling. " /> <meta name="keywords" content="email sending java, immutability example java, immutable object example, java email api, java email send, java email send sdk, java send email html" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-11-07 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="How Immutability Helps"/> <meta name="twitter:description" property="og:description" content="This article illustrates by example how immutability forces you to design small and cohesive objects, while mutability causes scope creep and tight coupling. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/11/07/how-immutability-helps.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2014/11/07/how-immutability-helps.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/11/07/how-immutability-helps.amp.html" /> <title>How Immutability Helps </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/11/07/how-immutability-helps.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2014/11/07/how-immutability-helps.html">https://www.yegor256.com/2014/11/07/how-immutability-helps.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">How Immutability Helps</h1><aside class='book'><a href='http://amzn.to/2qFt4Tn'><img src='/images/books/elegant-objects/cover.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='http://amzn.to/2qFt4Tn'>Section&nbsp;2.6</a><br/> of my book<a href='http://amzn.to/2qFt4Tn'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-11-07T00:00:00+00:00"> 7 November 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/11/07/how-immutability-helps.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><ul class="subline"> <li>Discussed at:</li> <li><a href="https://www.reddit.com/r/programming/comments/2llw2x/how_immutability_helps_in_object_design/">reddit</a></li></ul><p class="unprintable"><p>In a few recent posts, including <a href="/2014/09/16/getters-and-setters-are-evil.html">Getters/Setters. Evil. Period.</a> <a href="/2014/06/09/objects-should-be-immutable.html">Objects Should Be Immutable</a>, and <a href="/2014/10/03/di-containers-are-evil.html">Dependency Injection Containers are Code Polluters</a>, I universally labeled all mutable objects with &quot;setters&quot; (object methods starting with <code>set</code>) evil. My argumentation was based mostly on metaphors and abstract examples. Apparently, this wasn&#39;t convincing enough for many of you---I received a few requests asking to provide more specific and practical examples.</p><p>Thus, in order to illustrate my strongly negative attitude to &quot;mutability via setters,&quot; I took an existing <a href="http://commons.apache.org/proper/commons-email/">commons-email</a> Java library from Apache and re-designed it my way, without setters and with &quot;object thinking&quot; in mind. I released my library as part of the <a href="http://www.jcabi.com">jcabi</a> family---<a href="http://email.jcabi.com">jcabi-email</a>. Let&#39;s see what benefits we get from a &quot;pure&quot; object-oriented and immutable approach, without getters.</p><p>Here is how your code will look, if you send an email using commons-email:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Email</span> <span class="n">email</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleEmail</span><span class="o">();</span>
<span class="n">email</span><span class="o">.</span><span class="na">setHostName</span><span class="o">(</span><span class="s">&quot;smtp.googlemail.com&quot;</span><span class="o">);</span>
<span class="n">email</span><span class="o">.</span><span class="na">setSmtpPort</span><span class="o">(</span><span class="mi">465</span><span class="o">);</span>
<span class="n">email</span><span class="o">.</span><span class="na">setAuthenticator</span><span class="o">(</span><span class="k">new</span> <span class="n">DefaultAuthenticator</span><span class="o">(</span><span class="s">&quot;user&quot;</span><span class="o">,</span> <span class="s">&quot;pwd&quot;</span><span class="o">));</span>
<span class="n">email</span><span class="o">.</span><span class="na">setFrom</span><span class="o">(</span><span class="s">&quot;<a href="mailto:yegor256@gmail.com">yegor256@gmail.com</a>&quot;</span><span class="o">,</span> <span class="s">&quot;Yegor Bugayenko&quot;</span><span class="o">);</span>
<span class="n">email</span><span class="o">.</span><span class="na">addTo</span><span class="o">(</span><span class="s">&quot;<a href="mailto:dude@jcabi.com">dude@jcabi.com</a>&quot;</span><span class="o">);</span>
<span class="n">email</span><span class="o">.</span><span class="na">setSubject</span><span class="o">(</span><span class="s">&quot;how are you?&quot;</span><span class="o">);</span>
<span class="n">email</span><span class="o">.</span><span class="na">setMsg</span><span class="o">(</span><span class="s">&quot;Dude, how are you?&quot;</span><span class="o">);</span>
<span class="n">email</span><span class="o">.</span><span class="na">send</span><span class="o">();</span></code></pre></figure><p>Here is how you do the same with <a href="http://email.jcabi.com">jcabi-email</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Postman</span> <span class="n">postman</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Postman</span><span class="o">.</span><span class="na">Default</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">SMTP</span><span class="o">(</span><span class="s">&quot;smtp.googlemail.com&quot;</span><span class="o">,</span> <span class="mi">465</span><span class="o">,</span> <span class="s">&quot;user&quot;</span><span class="o">,</span> <span class="s">&quot;pwd&quot;</span><span class="o">)</span>
<span class="o">);</span>
<span class="n">Envelope</span> <span class="n">envelope</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Envelope</span><span class="o">.</span><span class="na">MIME</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">Stamp</span><span class="o">&gt;(</span>
    <span class="k">new</span> <span class="n">StSender</span><span class="o">(</span><span class="s">&quot;Yegor Bugayenko &lt;<a href="mailto:yegor256@gmail.com">yegor256@gmail.com</a>&gt;&quot;</span><span class="o">),</span>
    <span class="k">new</span> <span class="n">StRecipient</span><span class="o">(</span><span class="s">&quot;<a href="mailto:dude@jcabi.com">dude@jcabi.com</a>&quot;</span><span class="o">),</span>
    <span class="k">new</span> <span class="n">StSubject</span><span class="o">(</span><span class="s">&quot;how are you?&quot;</span><span class="o">)</span>
  <span class="o">),</span>
  <span class="k">new</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">Enclosure</span><span class="o">&gt;(</span>
    <span class="k">new</span> <span class="n">EnPlain</span><span class="o">(</span><span class="s">&quot;Dude, how are you?&quot;</span><span class="o">)</span>
  <span class="o">)</span>
<span class="o">);</span>
<span class="n">postman</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">envelope</span><span class="o">);</span></code></pre></figure><p>I think the difference is obvious.</p><p>In the first example, you&#39;re dealing with a monster <a href="/2016/09/20/oop-without-classes.html">class</a> that can do everything for you, including sending your MIME message via SMTP, creating the message, configuring its parameters, adding MIME parts to it, etc. The <a href="http://svn.apache.org/viewvc/commons/proper/email/tags/EMAIL_1_3_3/src/main/java/org/apache/commons/mail/Email.java?revision=1609295&view=co"><code>Email</code></a> class from commons-email is really a huge class---33 private properties, over a hundred methods, about two thousands lines of code. First, you configure the class through a bunch of setters and then you ask it to <code>send()</code> an email for you.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=KwP7Ay9Z-hc'><div class='box'> <img src='https://i.ytimg.com/vi/KwP7Ay9Z-hc/mqdefault.jpg' alt='YouTube video #KwP7Ay9Z-hc'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Immutable Objects vs. Common Sense (webinar #2); 6 May 2015.</div></aside><p>In the second example, we have seven objects instantiated via seven <code>new</code> calls. <code>Postman</code> is responsible for packaging a MIME message; <code>SMTP</code> is responsible for sending it via SMTP; stamps (<code>StSender</code>, <code>StRecipient</code>, and <code>StSubject</code>) are responsible for configuring the MIME message before delivery; enclosure <code>EnPlain</code> is responsible for creating a MIME part for the message we&#39;re going to send. We construct these seven objects, encapsulating one into another, and then we ask the postman to <code>send()</code> the envelope for us.</p><h2 id="whats-wrong-with-a-mutable-email">What&#39;s Wrong With a Mutable Email?</h2><p>From a user perspective, there is almost nothing wrong. <code>Email</code> is a powerful class with multiple controls---just hit the right one and the job gets done. However, from a developer perspective <code>Email</code> class is a nightmare. Mostly because the class is very big and difficult to maintain.</p><p><em>Because the class is so big</em>, every time you want to extend it by introducing a new method, you&#39;re facing the fact that you&#39;re making the class even worse---longer, less cohesive, less readable, less maintainable, etc. You have a feeling that you&#39;re digging into something dirty and that there is no hope to make it cleaner, ever. I&#39;m sure, you&#39;re familiar with this feeling---most legacy applications look that way. They have huge multi-line &quot;classes&quot; (in reality, COBOL programs written in Java) that were inherited from a few generations of programmers before you. When you start, you&#39;re full of energy, but after a few minutes of scrolling such a &quot;class&quot; you say---&quot;screw it, it&#39;s almost Saturday.&quot;</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=EnhRgXrHCC4'><div class='box'> <img src='https://i.ytimg.com/vi/EnhRgXrHCC4/mqdefault.jpg' alt='YouTube video #EnhRgXrHCC4'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>How Immutability Helps in OOP (in Russian with English subtitles); 21 May 2016.</div></aside><p><em>Because the class is so big</em>, there is no data hiding or encapsulation any more---33 variables are accessible by over 100 methods. What is hidden? This <code>Email.java</code> file in reality is a big, procedural 2000-line script, called a &quot;class&quot; by mistake. Nothing is hidden, once you cross the border of the class by calling one of its methods. After that, you have full access to all the data you may need. Why is this bad? Well, why do we need <a href="/2016/11/21/naked-data.html">encapsulation</a> in the first place? In order to protect one programmer from another, aka <a href="/2016/01/26/defensive-programming.html">defensive programming</a>. While I&#39;m busy changing the subject of the MIME message, I want to be sure that I&#39;m not interfered with by some other method&#39;s activity, that is changing a sender and touching my subject by mistake. Encapsulation helps us narrow down the scope of the problem, while this <code>Email</code> class is doing exactly the opposite.</p><p><em>Because the class is so big</em>, its unit testing is even more complicated than the class itself. Why? Because of multiple inter-dependencies between its methods and properties. In order to test <code>setCharset()</code> you have to prepare the entire object by calling a few other methods, then you have to call <code>send()</code> to make sure the message being sent actually uses the encoding you specified. Thus, in order to test a one-line method <code>setCharset()</code> you run the entire integration testing scenario of sending a full MIME message through SMTP. Obviously, if something gets changed in one of the methods, almost every test method will be affected. In other words, tests are very fragile, unreliable and over-complicated.</p><p>I can go on and on with this &quot;<em>because the class is so big</em>,&quot; but I think it is obvious that a small, cohesive class is always better than a big one. It is obvious to me, to you, and to any object-oriented programmer. But why is it not so obvious to the developers of Apache Commons Email? I don&#39;t think they are stupid or un-educated. What is it then?</p><h2 id="how-and-why-did-it-happen">How and Why Did It Happen?</h2><p>This is how it always happens. You start to design a class as something cohesive, solid, and small. Your intentions are very positive. Very soon you realize that there is something else that this class has to do. Then, something else. Then, even more.</p><p>The best way to make your class more and more powerful is by adding setters that inject configuration parameters into the class so that it can process them inside, isn&#39;t it?</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=p7m7_iiqaHI'><div class='box'> <img src='https://i.ytimg.com/vi/p7m7_iiqaHI/mqdefault.jpg' alt='YouTube video #p7m7_iiqaHI'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>How Much Immutability Is Enough?; 19 May 2016.</div></aside><p>This is the root cause of the problem! The root cause is our ability to <em>insert</em> data into mutable objects via configuration methods, also known as &quot;setters.&quot; When an <a href="/2016/07/14/who-is-object.html">object</a> is mutable and allows us to add setters whenever we want, we will do it without limits.</p><p>Let me put it this way---<em>mutable classes tend to grow in size and lose cohesiveness</em>.</p><p>If commons-email authors made this <code>Email</code> class immutable in the beginning, they wouldn&#39;t have been able to add so many methods into it and encapsulate so many properties. They wouldn&#39;t be able to turn it into a monster. Why? Because an immutable object only accepts a state through a constructor. Can you imagine a 33-argument constructor? Of course, not.</p><p>When you make your class immutable in the first place, you are forced to keep it cohesive, small, solid and robust. Because you can&#39;t encapsulate too much and you can&#39;t modify what&#39;s encapsulated. Just two or three arguments of a constructor and you&#39;re done.</p><h2 id="how-did-i-design-an-immutable-email">How Did I Design An Immutable Email?</h2><figure class='badge'><a href='http://http.jcabi.com'><img src='http://img.jcabi.com/logo-square.svg' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p>When I was designing <a href="https://github.com/jcabi/jcabi-email">jcabi-email</a> I started with a small and simple class: <a href="https://github.com/jcabi/jcabi-email/blob/1.3/src/main/java/com/jcabi/email/Postman.java"><code>Postman</code></a>. Well, it is an interface, since I never make <a href="/2016/04/26/why-inputstream-design-is-wrong.html">interface</a>-less classes. So, <code>Postman</code> is... a post man. He is delivering messages to other people. First, I created a default version of it (I omit the ctor, for the sake of brevity):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">javax.mail.Message</span><span class="o">;</span>
<span class="nd">@Immutable</span>
<span class="kd">class</span> <span class="nc">Postman</span><span class="o">.</span><span class="na">Default</span> <span class="kd">implements</span> <span class="n">Postman</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">host</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">port</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">user</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">password</span><span class="o">;</span>
  <span class="nd">@Override</span>
  <span class="kt">void</span> <span class="nf">send</span><span class="o">(</span><span class="n">Message</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// create SMTP session</span>
    <span class="c1">// create transport</span>
    <span class="c1">// transport.connect(this.host, this.port, etc.)</span>
    <span class="c1">// transport.send(msg)</span>
    <span class="c1">// transport.close();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Good start, it works. What now? Well, the <a href="http://docs.oracle.com/javaee/7/api/javax/jms/Message.html"><code>Message</code></a> is difficult to construct. It is a complex class from JDK that requires some manipulations before it can become a nice HTML email. So I created an envelope, which will build this complex object for me (pay attention, both <a href="https://github.com/jcabi/jcabi-email/blob/1.3/src/main/java/com/jcabi/email/Postman.java"><code>Postman</code></a> and <a href="https://github.com/jcabi/jcabi-email/blob/1.3/src/main/java/com/jcabi/email/Envelope.java"><code>Envelope</code></a> are immutable and annotated with <a href="http://aspects.jcabi.com/apidocs-0.20/com/jcabi/aspects/Immutable.html">@Immutable</a> from <a href="http://aspects.jcabi.com/annotation-immutable.html">jcabi-aspects</a>):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@Immutable</span>
<span class="kd">interface</span> <span class="nc">Envelope</span> <span class="o">{</span>
  <span class="n">Message</span> <span class="nf">unwrap</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>I also refactor the <code>Postman</code> to accept an envelope, not a message:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@Immutable</span>
<span class="kd">interface</span> <span class="nc">Postman</span> <span class="o">{</span>
  <span class="kt">void</span> <span class="nf">send</span><span class="o">(</span><span class="n">Envelope</span> <span class="n">env</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>So far, so good. Now let&#39;s try to create a simple implementation of <code>Envelope</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@Immutable</span>
<span class="kd">class</span> <span class="nc">MIME</span> <span class="kd">implements</span> <span class="n">Envelope</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Message</span> <span class="nf">unwrap</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">MimeMessage</span><span class="o">(</span>
      <span class="n">Session</span><span class="o">.</span><span class="na">getDefaultInstance</span><span class="o">(</span><span class="k">new</span> <span class="n">Properties</span><span class="o">())</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>It works, but it does nothing useful yet. It only creates an absolutely empty MIME message and returns it. How about adding a subject to it and both <code>To:</code> and <code>From:</code> addresses (pay attention, <a href="http://email.jcabi.com/apidocs-1.10/com/jcabi/email/Envelope.Mime.html"><code>MIME</code></a> class is also immutable):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@Immutable</span>
<span class="kd">class</span> <span class="nc">Envelope</span><span class="o">.</span><span class="na">MIME</span> <span class="kd">implements</span> <span class="n">Envelope</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">subject</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">from</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">to</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">MIME</span><span class="o">(</span><span class="n">String</span> <span class="n">subj</span><span class="o">,</span> <span class="n">String</span> <span class="n">sender</span><span class="o">,</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">rcpts</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">subject</span> <span class="o">=</span> <span class="n">subj</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">from</span> <span class="o">=</span> <span class="n">sender</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">to</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;(</span><span class="n">rcpts</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Message</span> <span class="nf">unwrap</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Message</span> <span class="n">msg</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MimeMessage</span><span class="o">(</span>
      <span class="n">Session</span><span class="o">.</span><span class="na">getDefaultInstance</span><span class="o">(</span><span class="k">new</span> <span class="n">Properties</span><span class="o">())</span>
    <span class="o">);</span>
    <span class="n">msg</span><span class="o">.</span><span class="na">setSubject</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">subject</span><span class="o">);</span>
    <span class="n">msg</span><span class="o">.</span><span class="na">setFrom</span><span class="o">(</span><span class="k">new</span> <span class="n">InternetAddress</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">from</span><span class="o">));</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">email</span> <span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="na">to</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">msg</span><span class="o">.</span><span class="na">setRecipient</span><span class="o">(</span>
        <span class="n">Message</span><span class="o">.</span><span class="na">RecipientType</span><span class="o">.</span><span class="na">TO</span><span class="o">,</span>
        <span class="k">new</span> <span class="n">InternetAddress</span><span class="o">(</span><span class="n">email</span><span class="o">)</span>
      <span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">msg</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Looks correct and it works. But it is still too primitive. How about <code>CC:</code> and <code>BCC:</code>? What about email text? How about PDF enclosures? What if I want to specify the encoding of the message? What about <code>Reply-To</code>?</p><p>Can I add all these parameters to the constructor? Remember, the class is immutable and I can&#39;t introduce the <code>setReplyTo()</code> method. I have to pass the <code>replyTo</code> argument into its constructor. It&#39;s impossible, because the constructor will have too many arguments, and nobody will be able to use it.</p><p>So, what do I do?</p><p>Well, I started to think: how can we break the concept of an &quot;envelope&quot; into smaller concepts---and this what I invented. Like a real-life envelope, my <code>MIME</code> object will have stamps. Stamps will be responsible for configuring an object <code>Message</code> (again, <a href="https://github.com/jcabi/jcabi-email/blob/1.3/src/main/java/com/jcabi/email/Stamp.java"><code>Stamp</code></a> is immutable, as well as all its implementers):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@Immutable</span>
<span class="kd">interface</span> <span class="nc">Stamp</span> <span class="o">{</span>
  <span class="kt">void</span> <span class="nf">attach</span><span class="o">(</span><span class="n">Message</span> <span class="n">message</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>Now, I can simplify my <a href="https://github.com/jcabi/jcabi-email/blob/1.3/src/main/java/com/jcabi/email/Envelope.java"><code>MIME</code></a> class to the following:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@Immutable</span>
<span class="kd">class</span> <span class="nc">Envelope</span><span class="o">.</span><span class="na">MIME</span> <span class="kd">implements</span> <span class="n">Envelope</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">Stamp</span><span class="o">&gt;</span> <span class="n">stamps</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">MIME</span><span class="o">(</span><span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Stamp</span><span class="o">&gt;</span> <span class="n">stmps</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">stamps</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">Stamp</span><span class="o">&gt;(</span><span class="n">stmps</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Message</span> <span class="nf">unwrap</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Message</span> <span class="n">msg</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MimeMessage</span><span class="o">(</span>
      <span class="n">Session</span><span class="o">.</span><span class="na">getDefaultInstance</span><span class="o">(</span><span class="k">new</span> <span class="n">Properties</span><span class="o">())</span>
    <span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">Stamp</span> <span class="n">stamp</span> <span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="na">stamps</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">stamp</span><span class="o">.</span><span class="na">attach</span><span class="o">(</span><span class="n">msg</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">msg</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Now, I will create stamps for the subject, for <code>To:</code>, for <code>From:</code>, for <code>CC:</code>, for <code>BCC:</code>, etc. As many stamps as I like. The class <code>MIME</code> will stay the same---small, cohesive, readable, solid, etc.</p><p>What is important here is why I made the decision to refactor while the class was relatively small. Indeed, I started to worry about these stamp classes when my <code>MIME</code> class was just 25 lines in size.</p><p>That is exactly the point of this article---<em>immutability forces you to design small and cohesive objects</em>.</p><p>Without immutability, I would have gone the same direction as commons-email. My <code>MIME</code> class would grow in size and sooner or later would become as big as <code>Email</code> from commons-email. The only thing that stopped me was the necessity to refactor it, because I wasn&#39;t able to pass all arguments through a constructor.</p><p>Without immutability, I wouldn&#39;t have had that motivator and I would have done what Apache developers did with commons-email---bloat the class and turn it into an unmaintainable <a href="/2017/09/12/evil-object-name-suffix-client.html">monster</a>.</p><p>That&#39;s <a href="http://email.jcabi.com">jcabi-email</a>. I hope this example was illustrative enough and that you will start writing cleaner code with immutable objects.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/11/07/how-immutability-helps.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/11/07/how-immutability-helps.html&amp;text=How+Immutability+Helps" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/11/07/how-immutability-helps.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/11/07/how-immutability-helps.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/11/07/how-immutability-helps.html%3F2014-44&amp;title=How+Immutability+Helps" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/11/07/how-immutability-helps.html%3F2014-44&amp;t=How+Immutability+Helps" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>In a few recent posts, including <a href="/2014/09/16/getters-and-setters-are-evil.html">Getters/Setters. Evil. Period.</a> <a href="/2014/06/09/objects-should-be-immutable.html">Objects Should Be Immutable</a>, and <a href="/2014/10/03/di-containers-are-evil.html">Dependency Injection Containers are Code Polluters</a>, I universally labeled all mutable objects with &quot;setters&quot; (object methods starting with <code>set</code>) evil. My argumentation was based mostly on metaphors and abstract examples. Apparently, this wasn&#39;t convincing enough for many of you---I received a few requests asking to provide more specific and practical examples.</p><p>Thus, in order to illustrate my strongly negative attitude to &quot;mutability via setters,&quot; I took an existing <a href="http://commons.apache.org/proper/commons-email/">commons-email</a> Java library from Apache and re-designed it my way, without setters and with &quot;object thinking&quot; in mind. I released my library as part of the <a href="http://www.jcabi.com">jcabi</a> family---<a href="http://email.jcabi.com">jcabi-email</a>. Let&#39;s see what benefits we get from a &quot;pure&quot; object-oriented and immutable approach, without getters.</p><p>Here is how your code will look, if you send an email using commons-email:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Email</span> <span class="n">email</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleEmail</span><span class="o">();</span>
<span class="n">email</span><span class="o">.</span><span class="na">setHostName</span><span class="o">(</span><span class="s">&quot;smtp.googlemail.com&quot;</span><span class="o">);</span>
<span class="n">email</span><span class="o">.</span><span class="na">setSmtpPort</span><span class="o">(</span><span class="mi">465</span><span class="o">);</span>
<span class="n">email</span><span class="o">.</span><span class="na">setAuthenticator</span><span class="o">(</span><span class="k">new</span> <span class="n">DefaultAuthenticator</span><span class="o">(</span><span class="s">&quot;user&quot;</span><span class="o">,</span> <span class="s">&quot;pwd&quot;</span><span class="o">));</span>
<span class="n">email</span><span class="o">.</span><span class="na">setFrom</span><span class="o">(</span><span class="s">&quot;<a href="mailto:yegor256@gmail.com">yegor256@gmail.com</a>&quot;</span><span class="o">,</span> <span class="s">&quot;Yegor Bugayenko&quot;</span><span class="o">);</span>
<span class="n">email</span><span class="o">.</span><span class="na">addTo</span><span class="o">(</span><span class="s">&quot;<a href="mailto:dude@jcabi.com">dude@jcabi.com</a>&quot;</span><span class="o">);</span>
<span class="n">email</span><span class="o">.</span><span class="na">setSubject</span><span class="o">(</span><span class="s">&quot;how are you?&quot;</span><span class="o">);</span>
<span class="n">email</span><span class="o">.</span><span class="na">setMsg</span><span class="o">(</span><span class="s">&quot;Dude, how are you?&quot;</span><span class="o">);</span>
<span class="n">email</span><span class="o">.</span><span class="na">send</span><span class="o">();</span></code></pre></figure><p>Here is how you do the same with <a href="http://email.jcabi.com">jcabi-email</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Postman</span> <span class="n">postman</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Postman</span><span class="o">.</span><span class="na">Default</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">SMTP</span><span class="o">(</span><span class="s">&quot;smtp.googlemail.com&quot;</span><span class="o">,</span> <span class="mi">465</span><span class="o">,</span> <span class="s">&quot;user&quot;</span><span class="o">,</span> <span class="s">&quot;pwd&quot;</span><span class="o">)</span>
<span class="o">);</span>
<span class="n">Envelope</span> <span class="n">envelope</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Envelope</span><span class="o">.</span><span class="na">MIME</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">Stamp</span><span class="o">&gt;(</span>
    <span class="k">new</span> <span class="n">StSender</span><span class="o">(</span><span class="s">&quot;Yegor Bugayenko &lt;<a href="mailto:yegor256@gmail.com">yegor256@gmail.com</a>&gt;&quot;</span><span class="o">),</span>
    <span class="k">new</span> <span class="n">StRecipient</span><span class="o">(</span><span class="s">&quot;<a href="mailto:dude@jcabi.com">dude@jcabi.com</a>&quot;</span><span class="o">),</span>
    <span class="k">new</span> <span class="n">StSubject</span><span class="o">(</span><span class="s">&quot;how are you?&quot;</span><span class="o">)</span>
  <span class="o">),</span>
  <span class="k">new</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">Enclosure</span><span class="o">&gt;(</span>
    <span class="k">new</span> <span class="n">EnPlain</span><span class="o">(</span><span class="s">&quot;Dude, how are you?&quot;</span><span class="o">)</span>
  <span class="o">)</span>
<span class="o">);</span>
<span class="n">postman</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">envelope</span><span class="o">);</span></code></pre></figure><p>I think the difference is obvious.</p><p>In the first example, you&#39;re dealing with a monster <a href="/2016/09/20/oop-without-classes.html">class</a> that can do everything for you, including sending your MIME message via SMTP, creating the message, configuring its parameters, adding MIME parts to it, etc. The <a href="http://svn.apache.org/viewvc/commons/proper/email/tags/EMAIL_1_3_3/src/main/java/org/apache/commons/mail/Email.java?revision=1609295&view=co"><code>Email</code></a> class from commons-email is really a huge class---33 private properties, over a hundred methods, about two thousands lines of code. First, you configure the class through a bunch of setters and then you ask it to <code>send()</code> an email for you.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=KwP7Ay9Z-hc'><div class='box'> <img src='https://i.ytimg.com/vi/KwP7Ay9Z-hc/mqdefault.jpg' alt='YouTube video #KwP7Ay9Z-hc'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Immutable Objects vs. Common Sense (webinar #2); 6 May 2015.</div></aside><p>In the second example, we have seven objects instantiated via seven <code>new</code> calls. <code>Postman</code> is responsible for packaging a MIME message; <code>SMTP</code> is responsible for sending it via SMTP; stamps (<code>StSender</code>, <code>StRecipient</code>, and <code>StSubject</code>) are responsible for configuring the MIME message before delivery; enclosure <code>EnPlain</code> is responsible for creating a MIME part for the message we&#39;re going to send. We construct these seven objects, encapsulating one into another, and then we ask the postman to <code>send()</code> the envelope for us.</p><h2 id="whats-wrong-with-a-mutable-email">What&#39;s Wrong With a Mutable Email?</h2><p>From a user perspective, there is almost nothing wrong. <code>Email</code> is a powerful class with multiple controls---just hit the right one and the job gets done. However, from a developer perspective <code>Email</code> class is a nightmare. Mostly because the class is very big and difficult to maintain.</p><p><em>Because the class is so big</em>, every time you want to extend it by introducing a new method, you&#39;re facing the fact that you&#39;re making the class even worse---longer, less cohesive, less readable, less maintainable, etc. You have a feeling that you&#39;re digging into something dirty and that there is no hope to make it cleaner, ever. I&#39;m sure, you&#39;re familiar with this feeling---most legacy applications look that way. They have huge multi-line &quot;classes&quot; (in reality, COBOL programs written in Java) that were inherited from a few generations of programmers before you. When you start, you&#39;re full of energy, but after a few minutes of scrolling such a &quot;class&quot; you say---&quot;screw it, it&#39;s almost Saturday.&quot;</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=EnhRgXrHCC4'><div class='box'> <img src='https://i.ytimg.com/vi/EnhRgXrHCC4/mqdefault.jpg' alt='YouTube video #EnhRgXrHCC4'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>How Immutability Helps in OOP (in Russian with English subtitles); 21 May 2016.</div></aside><p><em>Because the class is so big</em>, there is no data hiding or encapsulation any more---33 variables are accessible by over 100 methods. What is hidden? This <code>Email.java</code> file in reality is a big, procedural 2000-line script, called a &quot;class&quot; by mistake. Nothing is hidden, once you cross the border of the class by calling one of its methods. After that, you have full access to all the data you may need. Why is this bad? Well, why do we need <a href="/2016/11/21/naked-data.html">encapsulation</a> in the first place? In order to protect one programmer from another, aka <a href="/2016/01/26/defensive-programming.html">defensive programming</a>. While I&#39;m busy changing the subject of the MIME message, I want to be sure that I&#39;m not interfered with by some other method&#39;s activity, that is changing a sender and touching my subject by mistake. Encapsulation helps us narrow down the scope of the problem, while this <code>Email</code> class is doing exactly the opposite.</p><p><em>Because the class is so big</em>, its unit testing is even more complicated than the class itself. Why? Because of multiple inter-dependencies between its methods and properties. In order to test <code>setCharset()</code> you have to prepare the entire object by calling a few other methods, then you have to call <code>send()</code> to make sure the message being sent actually uses the encoding you specified. Thus, in order to test a one-line method <code>setCharset()</code> you run the entire integration testing scenario of sending a full MIME message through SMTP. Obviously, if something gets changed in one of the methods, almost every test method will be affected. In other words, tests are very fragile, unreliable and over-complicated.</p><p>I can go on and on with this &quot;<em>because the class is so big</em>,&quot; but I think it is obvious that a small, cohesive class is always better than a big one. It is obvious to me, to you, and to any object-oriented programmer. But why is it not so obvious to the developers of Apache Commons Email? I don&#39;t think they are stupid or un-educated. What is it then?</p><h2 id="how-and-why-did-it-happen">How and Why Did It Happen?</h2><p>This is how it always happens. You start to design a class as something cohesive, solid, and small. Your intentions are very positive. Very soon you realize that there is something else that this class has to do. Then, something else. Then, even more.</p><p>The best way to make your class more and more powerful is by adding setters that inject configuration parameters into the class so that it can process them inside, isn&#39;t it?</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=p7m7_iiqaHI'><div class='box'> <img src='https://i.ytimg.com/vi/p7m7_iiqaHI/mqdefault.jpg' alt='YouTube video #p7m7_iiqaHI'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>How Much Immutability Is Enough?; 19 May 2016.</div></aside><p>This is the root cause of the problem! The root cause is our ability to <em>insert</em> data into mutable objects via configuration methods, also known as &quot;setters.&quot; When an <a href="/2016/07/14/who-is-object.html">object</a> is mutable and allows us to add setters whenever we want, we will do it without limits.</p><p>Let me put it this way---<em>mutable classes tend to grow in size and lose cohesiveness</em>.</p><p>If commons-email authors made this <code>Email</code> class immutable in the beginning, they wouldn&#39;t have been able to add so many methods into it and encapsulate so many properties. They wouldn&#39;t be able to turn it into a monster. Why? Because an immutable object only accepts a state through a constructor. Can you imagine a 33-argument constructor? Of course, not.</p><p>When you make your class immutable in the first place, you are forced to keep it cohesive, small, solid and robust. Because you can&#39;t encapsulate too much and you can&#39;t modify what&#39;s encapsulated. Just two or three arguments of a constructor and you&#39;re done.</p><h2 id="how-did-i-design-an-immutable-email">How Did I Design An Immutable Email?</h2><figure class='badge'><a href='http://http.jcabi.com'><img src='http://img.jcabi.com/logo-square.svg' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p>When I was designing <a href="https://github.com/jcabi/jcabi-email">jcabi-email</a> I started with a small and simple class: <a href="https://github.com/jcabi/jcabi-email/blob/1.3/src/main/java/com/jcabi/email/Postman.java"><code>Postman</code></a>. Well, it is an interface, since I never make <a href="/2016/04/26/why-inputstream-design-is-wrong.html">interface</a>-less classes. So, <code>Postman</code> is... a post man. He is delivering messages to other people. First, I created a default version of it (I omit the ctor, for the sake of brevity):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">javax.mail.Message</span><span class="o">;</span>
<span class="nd">@Immutable</span>
<span class="kd">class</span> <span class="nc">Postman</span><span class="o">.</span><span class="na">Default</span> <span class="kd">implements</span> <span class="n">Postman</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">host</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">port</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">user</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">password</span><span class="o">;</span>
  <span class="nd">@Override</span>
  <span class="kt">void</span> <span class="nf">send</span><span class="o">(</span><span class="n">Message</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// create SMTP session</span>
    <span class="c1">// create transport</span>
    <span class="c1">// transport.connect(this.host, this.port, etc.)</span>
    <span class="c1">// transport.send(msg)</span>
    <span class="c1">// transport.close();</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Good start, it works. What now? Well, the <a href="http://docs.oracle.com/javaee/7/api/javax/jms/Message.html"><code>Message</code></a> is difficult to construct. It is a complex class from JDK that requires some manipulations before it can become a nice HTML email. So I created an envelope, which will build this complex object for me (pay attention, both <a href="https://github.com/jcabi/jcabi-email/blob/1.3/src/main/java/com/jcabi/email/Postman.java"><code>Postman</code></a> and <a href="https://github.com/jcabi/jcabi-email/blob/1.3/src/main/java/com/jcabi/email/Envelope.java"><code>Envelope</code></a> are immutable and annotated with <a href="http://aspects.jcabi.com/apidocs-0.20/com/jcabi/aspects/Immutable.html">@Immutable</a> from <a href="http://aspects.jcabi.com/annotation-immutable.html">jcabi-aspects</a>):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@Immutable</span>
<span class="kd">interface</span> <span class="nc">Envelope</span> <span class="o">{</span>
  <span class="n">Message</span> <span class="nf">unwrap</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>I also refactor the <code>Postman</code> to accept an envelope, not a message:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@Immutable</span>
<span class="kd">interface</span> <span class="nc">Postman</span> <span class="o">{</span>
  <span class="kt">void</span> <span class="nf">send</span><span class="o">(</span><span class="n">Envelope</span> <span class="n">env</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>So far, so good. Now let&#39;s try to create a simple implementation of <code>Envelope</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@Immutable</span>
<span class="kd">class</span> <span class="nc">MIME</span> <span class="kd">implements</span> <span class="n">Envelope</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Message</span> <span class="nf">unwrap</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">MimeMessage</span><span class="o">(</span>
      <span class="n">Session</span><span class="o">.</span><span class="na">getDefaultInstance</span><span class="o">(</span><span class="k">new</span> <span class="n">Properties</span><span class="o">())</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>It works, but it does nothing useful yet. It only creates an absolutely empty MIME message and returns it. How about adding a subject to it and both <code>To:</code> and <code>From:</code> addresses (pay attention, <a href="http://email.jcabi.com/apidocs-1.10/com/jcabi/email/Envelope.Mime.html"><code>MIME</code></a> class is also immutable):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@Immutable</span>
<span class="kd">class</span> <span class="nc">Envelope</span><span class="o">.</span><span class="na">MIME</span> <span class="kd">implements</span> <span class="n">Envelope</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">subject</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">from</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">to</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">MIME</span><span class="o">(</span><span class="n">String</span> <span class="n">subj</span><span class="o">,</span> <span class="n">String</span> <span class="n">sender</span><span class="o">,</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">rcpts</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">subject</span> <span class="o">=</span> <span class="n">subj</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">from</span> <span class="o">=</span> <span class="n">sender</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">to</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;(</span><span class="n">rcpts</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Message</span> <span class="nf">unwrap</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Message</span> <span class="n">msg</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MimeMessage</span><span class="o">(</span>
      <span class="n">Session</span><span class="o">.</span><span class="na">getDefaultInstance</span><span class="o">(</span><span class="k">new</span> <span class="n">Properties</span><span class="o">())</span>
    <span class="o">);</span>
    <span class="n">msg</span><span class="o">.</span><span class="na">setSubject</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">subject</span><span class="o">);</span>
    <span class="n">msg</span><span class="o">.</span><span class="na">setFrom</span><span class="o">(</span><span class="k">new</span> <span class="n">InternetAddress</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">from</span><span class="o">));</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">email</span> <span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="na">to</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">msg</span><span class="o">.</span><span class="na">setRecipient</span><span class="o">(</span>
        <span class="n">Message</span><span class="o">.</span><span class="na">RecipientType</span><span class="o">.</span><span class="na">TO</span><span class="o">,</span>
        <span class="k">new</span> <span class="n">InternetAddress</span><span class="o">(</span><span class="n">email</span><span class="o">)</span>
      <span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">msg</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Looks correct and it works. But it is still too primitive. How about <code>CC:</code> and <code>BCC:</code>? What about email text? How about PDF enclosures? What if I want to specify the encoding of the message? What about <code>Reply-To</code>?</p><p>Can I add all these parameters to the constructor? Remember, the class is immutable and I can&#39;t introduce the <code>setReplyTo()</code> method. I have to pass the <code>replyTo</code> argument into its constructor. It&#39;s impossible, because the constructor will have too many arguments, and nobody will be able to use it.</p><p>So, what do I do?</p><p>Well, I started to think: how can we break the concept of an &quot;envelope&quot; into smaller concepts---and this what I invented. Like a real-life envelope, my <code>MIME</code> object will have stamps. Stamps will be responsible for configuring an object <code>Message</code> (again, <a href="https://github.com/jcabi/jcabi-email/blob/1.3/src/main/java/com/jcabi/email/Stamp.java"><code>Stamp</code></a> is immutable, as well as all its implementers):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@Immutable</span>
<span class="kd">interface</span> <span class="nc">Stamp</span> <span class="o">{</span>
  <span class="kt">void</span> <span class="nf">attach</span><span class="o">(</span><span class="n">Message</span> <span class="n">message</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>Now, I can simplify my <a href="https://github.com/jcabi/jcabi-email/blob/1.3/src/main/java/com/jcabi/email/Envelope.java"><code>MIME</code></a> class to the following:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@Immutable</span>
<span class="kd">class</span> <span class="nc">Envelope</span><span class="o">.</span><span class="na">MIME</span> <span class="kd">implements</span> <span class="n">Envelope</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">Stamp</span><span class="o">&gt;</span> <span class="n">stamps</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">MIME</span><span class="o">(</span><span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Stamp</span><span class="o">&gt;</span> <span class="n">stmps</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">stamps</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">Stamp</span><span class="o">&gt;(</span><span class="n">stmps</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Message</span> <span class="nf">unwrap</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Message</span> <span class="n">msg</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MimeMessage</span><span class="o">(</span>
      <span class="n">Session</span><span class="o">.</span><span class="na">getDefaultInstance</span><span class="o">(</span><span class="k">new</span> <span class="n">Properties</span><span class="o">())</span>
    <span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">Stamp</span> <span class="n">stamp</span> <span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="na">stamps</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">stamp</span><span class="o">.</span><span class="na">attach</span><span class="o">(</span><span class="n">msg</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">msg</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Now, I will create stamps for the subject, for <code>To:</code>, for <code>From:</code>, for <code>CC:</code>, for <code>BCC:</code>, etc. As many stamps as I like. The class <code>MIME</code> will stay the same---small, cohesive, readable, solid, etc.</p><p>What is important here is why I made the decision to refactor while the class was relatively small. Indeed, I started to worry about these stamp classes when my <code>MIME</code> class was just 25 lines in size.</p><p>That is exactly the point of this article---<em>immutability forces you to design small and cohesive objects</em>.</p><p>Without immutability, I would have gone the same direction as commons-email. My <code>MIME</code> class would grow in size and sooner or later would become as big as <code>Email</code> from commons-email. The only thing that stopped me was the necessity to refactor it, because I wasn&#39;t able to pass all arguments through a constructor.</p><p>Without immutability, I wouldn&#39;t have had that motivator and I would have done what Apache developers did with commons-email---bloat the class and turn it into an unmaintainable <a href="/2017/09/12/evil-object-name-suffix-client.html">monster</a>.</p><p>That&#39;s <a href="http://email.jcabi.com">jcabi-email</a>. I hope this example was illustrative enough and that you will start writing cleaner code with immutable objects.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="The role of a software architect is mission critical and has to be explicitly set even for very small projects. " /> <meta name="keywords" content="hands-on software architect, role of software architect, software architect, software architect job description, software architect salary, what software architect is for" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-10-12 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="What Does a Software Architect Do?"/> <meta name="twitter:description" property="og:description" content="The role of a software architect is mission critical and has to be explicitly set even for very small projects. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/10/12/who-is-software-architect.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2014/10/12/who-is-software-architect.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/10/12/who-is-software-architect.amp.html" /> <title>What Does a Software Architect Do? </title> <meta name='og:image' content='https://www.yegor256.com/images/2014/10/jackie-brown.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2014/10/jackie-brown.jpg'/><meta name='og:image:width' content='1280'/> <meta name='twitter:image:width' content='1280'/><meta name='og:image:height' content='689'/> <meta name='twitter:image:height' content='689'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Jackie Brown (1997) by Quentin Tarantino'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/10/12/who-is-software-architect.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2014/10/12/who-is-software-architect.html">https://www.yegor256.com/2014/10/12/who-is-software-architect.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">What Does a Software Architect Do?</h1><aside class='book'><a href='https://amzn.to/2u9BbqF'><img src='/images/books/code-ahead/cover.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='https://amzn.to/2u9BbqF'>Section&nbsp;2</a><br/> of my book<a href='https://amzn.to/2u9BbqF'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-10-12T00:00:00+00:00"> 12 October 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/10/12/who-is-software-architect.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><ul class="unprintable subline"> <li>Translated:</li> <li><a href="http://tbd.kaitoy.xyz/2016/01/11/who-is-software-architect/">Japanese</a></li> <li><a href="mailto:translate@yegor256.com">add yours!</a></li></ul><p class="unprintable"><p>Do you have a software architect in your project? Do you need one? Well, most <a href="/2015/11/21/ringelmann-effect-vs-agile.html">agile teams</a> do not define such a role explicitly and work in a <em>democratic</em> mode. Every important technical decision is discussed with the entire team, and the most voted for solution wins. When such a team eventually decides to put a &quot;software architect&quot; badge on someone&#39;s t-shirt, the most <em>reputable</em> programmer gets it.</p><figure class='jb_picture'><img itemprop='image' alt='Jackie Brown (1997) by Quentin Tarantino' src='/images/2014/10/jackie-brown.jpg' longdesc='#f41988de'/><figcaption id='f41988de'>Jackie Brown (1997) by Quentin Tarantino</figcaption></figure><p>The badge rarely changes his responsibilities, though. After all, the team stays the same and enjoys having technical discussions together, involving everyone. In the end, a software architect is more of a <em>status</em> than a role with explicitly defined responsibilities. It is a sign of respect, paid by other team players to the oldest and the most authoritative one among them. Right?</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=0fuEgmibJc4'><div class='box'> <img src='https://i.ytimg.com/vi/0fuEgmibJc4/mqdefault.jpg' alt='YouTube video #0fuEgmibJc4'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Who Is a Software Architect?; 13 April 2015.</div></aside><p>Absolutely wrong!</p><p>Obviously, an architect is usually someone who has the most knowledge, skills, experience, and authority. Of course, an architect usually knows more than others and is able to communicate his knowledge with diplomacy and pedagogy when required. An architect is usually one of the smartest guys on the team.</p><aside class='quote'>An architect is the one who takes the blame for the quality</aside><p>This is not, however, <em>what</em> makes him/her an architect.</p><p>And this is not what the team needs. My definition of a software architect is this:</p><p>An <em>architect</em> is the one who takes the <em>blame</em> for the <em>quality</em>.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=PNSezrlemsY'><div class='box'> <img src='https://i.ytimg.com/vi/PNSezrlemsY/mqdefault.jpg' alt='YouTube video #PNSezrlemsY'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Hacker vs Designer Mentality; 13 April 2015.</div></aside><p>You can replace &quot;blame&quot; with accountability or responsibility. Although, I prefer to use &quot;blame,&quot; because it much better emphasizes the fact that every quality issue in the product under development is a <em>personal</em> fault of the architect. Of course, together with the blame he also takes all the credit from <a href="/2017/01/10/how-to-teach-customers.html">happy customers</a>, when the <a href="/2017/12/26/software-quality-formula.html">quality</a> is good.</p><p>This is what the team needs---someone personally responsible for the <a href="/2017/04/11/flexibility-equates-lower-quality.html">quality</a> of the software being developed.</p><aside class='quote'>The job of the PM is to make sure that every technical decision the architect makes is not doubted by anyone</aside><p>How this guy will delegate this responsibility to others is his job. Whether he will use his knowledge and skills, or quality control <a href="/2014/08/13/strict-code-quality-control.html">tools</a>, or unit testing frameworks, or authority, or coaching, or <a href="/2016/01/05/how-to-punish-employees.html">corporal punishment</a>---it&#39;s his business. A project <a href="/2015/09/22/micromanagement.html">manager</a> delegates quality control to the software architect, and <a href="/2015/02/23/haircut.html">it is up to</a> the software architect how to delegate it further.</p><p>The role of a software architect is crucial for every project, even if there are just two coders working at the same desk. One of them has to be the architect.</p><p>An ideal architect has all the merits mentioned above. He listens to everybody and takes their opinions into account. He is a good coach and a teacher, with a lot of patience. He is an effective communicator and negotiator. He is a diplomat. And he is an expert in the technical domain.</p><p>But, even if he doesn&#39;t have all these merits, his decision is always <em>final</em>.</p><p>And this is the job of the <a href="/2016/05/24/who-is-project-manager.html">project manager</a>, to make sure that every technical decision the architect makes is not doubted <a href="/2015/10/13/competition-without-rules.html">by anyone</a>. This is what delegation is all about---responsibility should always come with power.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=AvVQ5NjS_Nk'><div class='box'> <img src='https://i.ytimg.com/vi/AvVQ5NjS_Nk/mqdefault.jpg' alt='YouTube video #AvVQ5NjS_Nk'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Who is a Software Architect? (webinar #13); 13 April 2016.</div></aside><p>As a project manager, you should regularly evaluate <a href="/2015/05/11/software-architect-responsibilities.html">the results</a> of your architect. Remember, the quality of the product your team is working on is his personal (!) responsibility. Any problems you see are his problems. Don&#39;t be afraid to blame him and punish him. But, always remember that in order to make your punishments productive you should give your architect full <em>power</em> in his actions. Let me reiterate: his decisions should be final.</p><p>If you, as a project manager, are not happy with the quality of the product and the architect doesn&#39;t improve the situation, <a href="/2015/09/16/how-to-fire-someone-right.html">replace</a> him. Downgrade him to a programmer and promote one of the programmers to an architect. But always remember that there can only be one architect in the team, and that his decisions are final.</p><p>That&#39;s the only way of having a chance of building a perfect product.</p><blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Does your team have an official role of a Software Architect, who has enough authority to make technical decisions alone? <a href="https://twitter.com/hashtag/codeahead?src=hash&amp;ref_src=twsrc%5Etfw">#codeahead</a></p>--- Yegor Bugayenko (@yegor256) <a href="https://twitter.com/yegor256/status/995545586983161856?ref_src=twsrc%5Etfw">May 13, 2018</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/10/12/who-is-software-architect.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/10/12/who-is-software-architect.html&amp;text=What+Does+a+Software+Architect+Do%3F" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/10/12/who-is-software-architect.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/10/12/who-is-software-architect.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/10/12/who-is-software-architect.html%3F2014-41&amp;title=What+Does+a+Software+Architect+Do%3F" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/10/12/who-is-software-architect.html%3F2014-41&amp;t=What+Does+a+Software+Architect+Do%3F" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>Do you have a software architect in your project? Do you need one? Well, most <a href="/2015/11/21/ringelmann-effect-vs-agile.html">agile teams</a> do not define such a role explicitly and work in a <em>democratic</em> mode. Every important technical decision is discussed with the entire team, and the most voted for solution wins. When such a team eventually decides to put a &quot;software architect&quot; badge on someone&#39;s t-shirt, the most <em>reputable</em> programmer gets it.</p><figure class='jb_picture'><img itemprop='image' alt='Jackie Brown (1997) by Quentin Tarantino' src='/images/2014/10/jackie-brown.jpg' longdesc='#f41988de'/><figcaption id='f41988de'>Jackie Brown (1997) by Quentin Tarantino</figcaption></figure><p>The badge rarely changes his responsibilities, though. After all, the team stays the same and enjoys having technical discussions together, involving everyone. In the end, a software architect is more of a <em>status</em> than a role with explicitly defined responsibilities. It is a sign of respect, paid by other team players to the oldest and the most authoritative one among them. Right?</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=0fuEgmibJc4'><div class='box'> <img src='https://i.ytimg.com/vi/0fuEgmibJc4/mqdefault.jpg' alt='YouTube video #0fuEgmibJc4'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Who Is a Software Architect?; 13 April 2015.</div></aside><p>Absolutely wrong!</p><p>Obviously, an architect is usually someone who has the most knowledge, skills, experience, and authority. Of course, an architect usually knows more than others and is able to communicate his knowledge with diplomacy and pedagogy when required. An architect is usually one of the smartest guys on the team.</p><aside class='quote'>An architect is the one who takes the blame for the quality</aside><p>This is not, however, <em>what</em> makes him/her an architect.</p><p>And this is not what the team needs. My definition of a software architect is this:</p><p>An <em>architect</em> is the one who takes the <em>blame</em> for the <em>quality</em>.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=PNSezrlemsY'><div class='box'> <img src='https://i.ytimg.com/vi/PNSezrlemsY/mqdefault.jpg' alt='YouTube video #PNSezrlemsY'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Hacker vs Designer Mentality; 13 April 2015.</div></aside><p>You can replace &quot;blame&quot; with accountability or responsibility. Although, I prefer to use &quot;blame,&quot; because it much better emphasizes the fact that every quality issue in the product under development is a <em>personal</em> fault of the architect. Of course, together with the blame he also takes all the credit from <a href="/2017/01/10/how-to-teach-customers.html">happy customers</a>, when the <a href="/2017/12/26/software-quality-formula.html">quality</a> is good.</p><p>This is what the team needs---someone personally responsible for the <a href="/2017/04/11/flexibility-equates-lower-quality.html">quality</a> of the software being developed.</p><aside class='quote'>The job of the PM is to make sure that every technical decision the architect makes is not doubted by anyone</aside><p>How this guy will delegate this responsibility to others is his job. Whether he will use his knowledge and skills, or quality control <a href="/2014/08/13/strict-code-quality-control.html">tools</a>, or unit testing frameworks, or authority, or coaching, or <a href="/2016/01/05/how-to-punish-employees.html">corporal punishment</a>---it&#39;s his business. A project <a href="/2015/09/22/micromanagement.html">manager</a> delegates quality control to the software architect, and <a href="/2015/02/23/haircut.html">it is up to</a> the software architect how to delegate it further.</p><p>The role of a software architect is crucial for every project, even if there are just two coders working at the same desk. One of them has to be the architect.</p><p>An ideal architect has all the merits mentioned above. He listens to everybody and takes their opinions into account. He is a good coach and a teacher, with a lot of patience. He is an effective communicator and negotiator. He is a diplomat. And he is an expert in the technical domain.</p><p>But, even if he doesn&#39;t have all these merits, his decision is always <em>final</em>.</p><p>And this is the job of the <a href="/2016/05/24/who-is-project-manager.html">project manager</a>, to make sure that every technical decision the architect makes is not doubted <a href="/2015/10/13/competition-without-rules.html">by anyone</a>. This is what delegation is all about---responsibility should always come with power.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=AvVQ5NjS_Nk'><div class='box'> <img src='https://i.ytimg.com/vi/AvVQ5NjS_Nk/mqdefault.jpg' alt='YouTube video #AvVQ5NjS_Nk'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Who is a Software Architect? (webinar #13); 13 April 2016.</div></aside><p>As a project manager, you should regularly evaluate <a href="/2015/05/11/software-architect-responsibilities.html">the results</a> of your architect. Remember, the quality of the product your team is working on is his personal (!) responsibility. Any problems you see are his problems. Don&#39;t be afraid to blame him and punish him. But, always remember that in order to make your punishments productive you should give your architect full <em>power</em> in his actions. Let me reiterate: his decisions should be final.</p><p>If you, as a project manager, are not happy with the quality of the product and the architect doesn&#39;t improve the situation, <a href="/2015/09/16/how-to-fire-someone-right.html">replace</a> him. Downgrade him to a programmer and promote one of the programmers to an architect. But always remember that there can only be one architect in the team, and that his decisions are final.</p><p>That&#39;s the only way of having a chance of building a perfect product.</p><blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Does your team have an official role of a Software Architect, who has enough authority to make technical decisions alone? <a href="https://twitter.com/hashtag/codeahead?src=hash&amp;ref_src=twsrc%5Etfw">#codeahead</a></p>--- Yegor Bugayenko (@yegor256) <a href="https://twitter.com/yegor256/status/995545586983161856?ref_src=twsrc%5Etfw">May 13, 2018</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Continuous integration is an awesome idea that doesn&apos;t work and can&apos;t work because of its natural conflict with business and technical objectives. " /> <meta name="keywords" content="alternative to continuous integration, continuous integration, continuous integration pitfalls, continuous integration problems, how continuous integration works, how to configure continuous integration, jenkins doesn't work" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-10-08 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Continuous Integration is Dead"/> <meta name="twitter:description" property="og:description" content="Continuous integration is an awesome idea that doesn&apos;t work and can&apos;t work because of its natural conflict with business and technical objectives. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.amp.html" /> <title>Continuous Integration is Dead </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html">https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Continuous Integration is Dead</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-10-08T00:00:00+00:00"> 8 October 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><ul class="subline"> <li>Discussed at:</li> <li><a href="https://www.reddit.com/r/programming/comments/2j9vt0/continuous_integration_is_dead/">reddit</a></li></ul><p class="unprintable"><p>A few days ago, my article <a href="http://devops.com/blogs/continuous-integration-doesnt-work/">Why Continuous Integration Doesn&#39;t Work</a> was published at <a href="http://www.devops.com">DevOps.com</a>. Almost the same day I received a few strongly negative critiques on Twitter.</p><p>Here is my response to the un-asked question:</p><blockquote><p>Why the hell shouldn&#39;t continuous integration work, being such a brilliant and popular idea?</p></blockquote><p>Even though I have some experience in this area, I won&#39;t use it as an argument. I&#39;ll try to rely only on logic instead.</p><p>BTW, my experience includes five years of using Apache Continuum, Hudson, CruiseControl, and Jenkins in over 50 open source and commercial projects. Besides that, a few years ago I created a hosted <a href="/2016/08/01/continuous-integration-maturity.html">continuous integration</a> service called <a href="http://www.fazend.com">fazend.com</a>, renamed to <a href="http://www.rultor.com">rultor.com</a> in 2013. Currently, I&#39;m also an active user of <a href="http://www.travis-ci.org">Travis</a> and <a href="http://www.appveyor.com">AppVeyor</a>.</p><h2 id="how-continuous-integration-should-work">How Continuous Integration Should Work</h2><aside class='youtube'> <a href='https://www.youtube.com/watch?v=3IXk5yEJMIs'><div class='box'> <img src='https://i.ytimg.com/vi/3IXk5yEJMIs/mqdefault.jpg' alt='YouTube video #3IXk5yEJMIs'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Continuous Integration is Dead; 24 April 2015.</div></aside><p>The idea is simple and obvious. Every time you make a new commit to the <code>master</code> branch (or <code>/trunk</code> in Subversion), a continuous integration server (or service) attempts to build the entire product. &quot;Build&quot; means compile, unit test, integration test, quality analysis, <a href="/2014/06/21/casperjs-with-maven.html">etc.</a></p><p>The result is either &quot;success&quot; or &quot;failure.&quot; If it is a success, we say that &quot;the build is clean.&quot; If it is a failure, we say that &quot;the build is broken.&quot; The build usually gets broken because someone breaks it by committing new code that turns previously passing unit tests into failing ones.</p><p>This is the technical side of the problem. It always works. Well, it may have its problems, like hard-coded dependencies, lack of isolation between environments or parallel build collisions, but this article is not about those. If the application is well written and its unit tests are stable, continuous integration is easy. Technically.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=gL4XwP-EBOg'><div class='box'> <img src='https://i.ytimg.com/vi/gL4XwP-EBOg/mqdefault.jpg' alt='YouTube video #gL4XwP-EBOg'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Continuous Integration May Have Negative Effects; 20 April 2016.</div></aside><p>Let&#39;s see the organizational side.</p><p>Continuous integration is not only a server that builds, but a management/organizational process that should &quot;work.&quot; Being a process that works means exactly what Jez Humble said in <a href="http://amzn.to/2c7sR4V">Continuous Delivery: Reliable Software Releases through Build, Test, and Deployment Automation</a>, on page 55:</p><blockquote><p>Crucially, if the build fails, the development team stops whatever they are doing and fixes the problem immediately</p></blockquote><p>This is what doesn&#39;t work and can&#39;t work.</p><h2 id="who-needs-this">Who Needs This?</h2><p>As we see, continuous integration is about setting the entire development team on pause and fixing the broken build. Let me reiterate. Once the build is broken, everybody should focus on fixing it and making a commit that returns the build to the stable state.</p><p>Now, my question is---who, in an actively working team, may need this?</p><p>A product owner, who is interested in launching new features to the market as soon as possible? Or maybe a <a href="/2015/09/22/micromanagement.html">project manager</a>, who is responsible for the deadlines? Or maybe programmers, who hate to fix bugs made by someone else, especially under pressure?</p><p>Who likes this continuous integration and who needs it?</p><p>Nobody.</p><h2 id="what-happens-in-reality">What Happens In Reality?</h2><p>I can tell you. I&#39;ve seen it multiple times. The scenario is always the same. We just start to ignore that continuous integration build status. Either the build is clean or it is broken, and we continue to do what we were doing before.</p><p>We don&#39;t stop and fix it, as Jez Humble recommends.</p><p>Instead, we ignore the information that&#39;s coming from the continuous integration server.</p><p>Eventually, maybe tomorrow or on Monday, we&#39;ll try to find some spare time and will try to fix the build. Only because we don&#39;t like that red button on the dashboard and want to turn it into a green one.</p><h2 id="what-about-discipline">What About Discipline?</h2><aside class='youtube'> <a href='https://www.youtube.com/watch?v=Ht0JI41kA4I'><div class='box'> <img src='https://i.ytimg.com/vi/Ht0JI41kA4I/mqdefault.jpg' alt='YouTube video #Ht0JI41kA4I'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Pre-flight Build Pitfalls; 10 May 2016.</div></aside><p>Yes, there is another side of this coin. We can try to enforce discipline in the team. We can make it a strict rule, that our build is always clean and whoever breaks it gets some sort of a <a href="/2016/01/05/how-to-punish-employees.html">punishment</a>.</p><p>Try doing this and you will get a <strong>fear driven development</strong>. Programmers will be afraid of committing anything to the repository because they will know that if they cause a build failure they will have to <a href="http://programmers.stackexchange.com/questions/79041">apologize</a>, at least.</p><p>A strict discipline (which I&#39;m a big fan of) in this case only makes the situation worse. The entire development process slows down and programmers keep their code to themselves for as long as possible, to avoid possibly broken builds. When it&#39;s time to commit, their changes are so massive that merging becomes very difficult and sometimes impossible.</p><p>As a result you get a lot of throw-away code, written by someone but never committed to <code>master</code>, because of that fear factor.</p><h2 id="ok-what-is-the-solution">OK, What Is The Solution?</h2><p>I wrote about it before; it is called <a href="/2014/07/21/read-only-master-branch.html">read-only master branch</a>.</p><p>It is simple---prohibit anyone from merging anything into <code>master</code> and create a script that anyone can call. The script will merge, test, and commit. The script will not make any exceptions. If any branch breaks at even one unit test, the entire branch will be rejected.</p><p>In other words: raise the red flag <strong>before</strong> the code gets into <code>master</code>.</p><p>This solves all problems.</p><p>First, the build is always clean. We simply can&#39;t break it because nobody can commit unless his code keeps the build clean.</p><p>Second, there is no fear of breaking anything. Simply because you technically can&#39;t do it. All you can do is get a negative response from a merging script. Then you fix your errors and tell the script to try again. Nobody sees these attempts, and you don&#39;t need to apologize. Fear factor is gone.</p><p>BTW, try to use <a href="http://www.rultor.com">rultor.com</a> to enforce this <a href="/2014/07/21/read-only-master-branch.html">read-only master branch</a> principle in your project.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html&amp;text=Continuous+Integration+is+Dead" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html%3F2014-40&amp;title=Continuous+Integration+is+Dead" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html%3F2014-40&amp;t=Continuous+Integration+is+Dead" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>A few days ago, my article <a href="http://devops.com/blogs/continuous-integration-doesnt-work/">Why Continuous Integration Doesn&#39;t Work</a> was published at <a href="http://www.devops.com">DevOps.com</a>. Almost the same day I received a few strongly negative critiques on Twitter.</p><p>Here is my response to the un-asked question:</p><blockquote><p>Why the hell shouldn&#39;t continuous integration work, being such a brilliant and popular idea?</p></blockquote><p>Even though I have some experience in this area, I won&#39;t use it as an argument. I&#39;ll try to rely only on logic instead.</p><p>BTW, my experience includes five years of using Apache Continuum, Hudson, CruiseControl, and Jenkins in over 50 open source and commercial projects. Besides that, a few years ago I created a hosted <a href="/2016/08/01/continuous-integration-maturity.html">continuous integration</a> service called <a href="http://www.fazend.com">fazend.com</a>, renamed to <a href="http://www.rultor.com">rultor.com</a> in 2013. Currently, I&#39;m also an active user of <a href="http://www.travis-ci.org">Travis</a> and <a href="http://www.appveyor.com">AppVeyor</a>.</p><h2 id="how-continuous-integration-should-work">How Continuous Integration Should Work</h2><aside class='youtube'> <a href='https://www.youtube.com/watch?v=3IXk5yEJMIs'><div class='box'> <img src='https://i.ytimg.com/vi/3IXk5yEJMIs/mqdefault.jpg' alt='YouTube video #3IXk5yEJMIs'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Continuous Integration is Dead; 24 April 2015.</div></aside><p>The idea is simple and obvious. Every time you make a new commit to the <code>master</code> branch (or <code>/trunk</code> in Subversion), a continuous integration server (or service) attempts to build the entire product. &quot;Build&quot; means compile, unit test, integration test, quality analysis, <a href="/2014/06/21/casperjs-with-maven.html">etc.</a></p><p>The result is either &quot;success&quot; or &quot;failure.&quot; If it is a success, we say that &quot;the build is clean.&quot; If it is a failure, we say that &quot;the build is broken.&quot; The build usually gets broken because someone breaks it by committing new code that turns previously passing unit tests into failing ones.</p><p>This is the technical side of the problem. It always works. Well, it may have its problems, like hard-coded dependencies, lack of isolation between environments or parallel build collisions, but this article is not about those. If the application is well written and its unit tests are stable, continuous integration is easy. Technically.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=gL4XwP-EBOg'><div class='box'> <img src='https://i.ytimg.com/vi/gL4XwP-EBOg/mqdefault.jpg' alt='YouTube video #gL4XwP-EBOg'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Continuous Integration May Have Negative Effects; 20 April 2016.</div></aside><p>Let&#39;s see the organizational side.</p><p>Continuous integration is not only a server that builds, but a management/organizational process that should &quot;work.&quot; Being a process that works means exactly what Jez Humble said in <a href="http://amzn.to/2c7sR4V">Continuous Delivery: Reliable Software Releases through Build, Test, and Deployment Automation</a>, on page 55:</p><blockquote><p>Crucially, if the build fails, the development team stops whatever they are doing and fixes the problem immediately</p></blockquote><p>This is what doesn&#39;t work and can&#39;t work.</p><h2 id="who-needs-this">Who Needs This?</h2><p>As we see, continuous integration is about setting the entire development team on pause and fixing the broken build. Let me reiterate. Once the build is broken, everybody should focus on fixing it and making a commit that returns the build to the stable state.</p><p>Now, my question is---who, in an actively working team, may need this?</p><p>A product owner, who is interested in launching new features to the market as soon as possible? Or maybe a <a href="/2015/09/22/micromanagement.html">project manager</a>, who is responsible for the deadlines? Or maybe programmers, who hate to fix bugs made by someone else, especially under pressure?</p><p>Who likes this continuous integration and who needs it?</p><p>Nobody.</p><h2 id="what-happens-in-reality">What Happens In Reality?</h2><p>I can tell you. I&#39;ve seen it multiple times. The scenario is always the same. We just start to ignore that continuous integration build status. Either the build is clean or it is broken, and we continue to do what we were doing before.</p><p>We don&#39;t stop and fix it, as Jez Humble recommends.</p><p>Instead, we ignore the information that&#39;s coming from the continuous integration server.</p><p>Eventually, maybe tomorrow or on Monday, we&#39;ll try to find some spare time and will try to fix the build. Only because we don&#39;t like that red button on the dashboard and want to turn it into a green one.</p><h2 id="what-about-discipline">What About Discipline?</h2><aside class='youtube'> <a href='https://www.youtube.com/watch?v=Ht0JI41kA4I'><div class='box'> <img src='https://i.ytimg.com/vi/Ht0JI41kA4I/mqdefault.jpg' alt='YouTube video #Ht0JI41kA4I'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Pre-flight Build Pitfalls; 10 May 2016.</div></aside><p>Yes, there is another side of this coin. We can try to enforce discipline in the team. We can make it a strict rule, that our build is always clean and whoever breaks it gets some sort of a <a href="/2016/01/05/how-to-punish-employees.html">punishment</a>.</p><p>Try doing this and you will get a <strong>fear driven development</strong>. Programmers will be afraid of committing anything to the repository because they will know that if they cause a build failure they will have to <a href="http://programmers.stackexchange.com/questions/79041">apologize</a>, at least.</p><p>A strict discipline (which I&#39;m a big fan of) in this case only makes the situation worse. The entire development process slows down and programmers keep their code to themselves for as long as possible, to avoid possibly broken builds. When it&#39;s time to commit, their changes are so massive that merging becomes very difficult and sometimes impossible.</p><p>As a result you get a lot of throw-away code, written by someone but never committed to <code>master</code>, because of that fear factor.</p><h2 id="ok-what-is-the-solution">OK, What Is The Solution?</h2><p>I wrote about it before; it is called <a href="/2014/07/21/read-only-master-branch.html">read-only master branch</a>.</p><p>It is simple---prohibit anyone from merging anything into <code>master</code> and create a script that anyone can call. The script will merge, test, and commit. The script will not make any exceptions. If any branch breaks at even one unit test, the entire branch will be rejected.</p><p>In other words: raise the red flag <strong>before</strong> the code gets into <code>master</code>.</p><p>This solves all problems.</p><p>First, the build is always clean. We simply can&#39;t break it because nobody can commit unless his code keeps the build clean.</p><p>Second, there is no fear of breaking anything. Simply because you technically can&#39;t do it. All you can do is get a negative response from a merging script. Then you fix your errors and tell the script to try again. Nobody sees these attempts, and you don&#39;t need to apologize. Fear factor is gone.</p><p>BTW, try to use <a href="http://www.rultor.com">rultor.com</a> to enforce this <a href="/2014/07/21/read-only-master-branch.html">read-only master branch</a> principle in your project.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="In XDSD everybody is motivated to produce tangible and meaningful results. That&apos;s why we don&apos;t use emails, Skype, HipChat or phone calls. " /> <meta name="keywords" content="agile conference calls, agile team meetings, chat with programmers, communications in agile team, formal project communications" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-10-07 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Stop Chatting, Start Coding"/> <meta name="twitter:description" property="og:description" content="In XDSD everybody is motivated to produce tangible and meaningful results. That&apos;s why we don&apos;t use emails, Skype, HipChat or phone calls. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/10/07/stop-chatting-start-coding.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2014/10/07/stop-chatting-start-coding.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/10/07/stop-chatting-start-coding.amp.html" /> <title>Stop Chatting, Start Coding </title> <meta name='og:image' content='https://www.yegor256.com/images/2014/10/barton-fink.png'/><meta name='twitter:image' content='https://www.yegor256.com/images/2014/10/barton-fink.png'/><meta name='og:image:width' content='1225'/> <meta name='twitter:image:width' content='1225'/><meta name='og:image:height' content='656'/> <meta name='twitter:image:height' content='656'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Barton Fink (1991) by Joel Coen'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/10/07/stop-chatting-start-coding.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2014/10/07/stop-chatting-start-coding.html">https://www.yegor256.com/2014/10/07/stop-chatting-start-coding.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Stop Chatting, Start Coding</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-10-07T00:00:00+00:00"> 7 October 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/10/07/stop-chatting-start-coding.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><figure class='badge'><a href='http://www.xdsd.org'><img src='http://www.xdsd.org/images/logo.svg' style='width:100px;max-width:100%;' alt='badge'/></a></figure><p>The first principle of eXtremely Distributed Software Development (<a href="http://www.xdsd.org">XDSD</a>) states that &quot;everyone gets paid for verified deliverables.&quot; This literally means that, in order to get paid, every programmer has to write the code, commit it to the repository, pass a code review and make sure the code is <a href="/2014/07/21/read-only-master-branch.html">merged into the destination branch</a>. Only then, is his result appreciated and paid for.</p><figure class='jb_picture'><img itemprop='image' alt='Barton Fink (1991) by Joel Coen' src='/images/2014/10/barton-fink.png' longdesc='#8606fa0a'/><figcaption id='8606fa0a'>Barton Fink (1991) by Joel Coen</figcaption></figure><p>For most of my <a href="/2015/01/26/happy-boss-false-objective.html">clients</a> this already sounds extreme. They are used to a traditional scheme of paying <a href="/2015/07/21/hourly-pay-modern-slavery.html">per hour</a> or per month. They immediately realize the benefits of XDSD, though, because for them this approach means that project funds are <a href="/2015/02/16/it-is-not-a-school.html">not wasted</a> on activities that don&#39;t produce results.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=qRZYJGYdrwk'><div class='box'> <img src='https://i.ytimg.com/vi/qRZYJGYdrwk/mqdefault.jpg' alt='YouTube video #qRZYJGYdrwk'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>XDSD: management without meetings; 13 February 2016.</div></aside><p>But that&#39;s not all.</p><p>This principle also means that nobody is paid for anything except tasks explicitly assigned to him/her. Thus, when a programmer has a question about current design, <a href="/2015/11/10/ten-mistakes-in-specs.html">specification</a>, configuration, etc.---nobody will be interested in answering it. Why not? Because there is no payment attached to this. Answering questions in Skype, Slack, or HipChat, or by email is something that is not appreciated in XDSD in any way. The project simply doesn&#39;t pay for this activity. That&#39;s why none of our programmers do this.</p><p>More about this philosophy here: <a href="/2015/02/16/it-is-not-a-school.html">It&#39;s Not a School!</a></p><p>We don&#39;t use <strong>any</strong> (I mean it!) <a href="/2016/08/23/communication-maturity.html">informal communication channels</a> in XDSD projects. We don&#39;t do meetings or conference calls. We never discuss any technical issues on Skype or by phone.</p><aside class='quote'>Every hour spent by a team member is traceable to the line of code produced.</aside><p>So, how do we resolve problems and share information?</p><p>We use task tracking systems for that. When a developer has a question, he submits it as a new &quot;ticket.&quot; The project <a href="/2015/09/22/micromanagement.html">manager</a> then picks it up and assigns it to another developer, who is able to answer it. Then, the answer goes back through the tracking system or directly into the source code.</p><p>The &quot;question ticket&quot; gets closed when its author is satisfied with the answer. When the ticket is closed, those who answered it get paid.</p><p>Using this model, we significantly improve project communications, by making them clean and transparent. We also save a lot of project funds, since every hour spent by a team member is traceable to the line of code he produced.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=LB_YLWhGrco'><div class='box'> <img src='https://i.ytimg.com/vi/LB_YLWhGrco/mqdefault.jpg' alt='YouTube video #LB_YLWhGrco'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Meetings-free Programming; 1 April 2016.</div></aside><p>You can see how this happens in action, for example, in this ticket (the project is <a href="/2015/12/22/why-dont-you-contribute-to-open-source.html">open source</a>; that&#39;s why all communications are open): <a href="https://github.com/jcabi/jcabi-github/issues/731">jcabi/jcabi-github#731</a>. One Java developer is having a problem with his Git repository. Apparently he did something wrong and couldn&#39;t solve the problem by himself. He asked for help by submitting a new bug to the project. He was paid for the <a href="/2018/04/24/right-way-to-report-bugs.html">bug report</a>. Then, another team member was assigned to help him. He did, through a number of suggestions and instructions. In the end, the problem was solved, and he was also paid for the solution. In total, the project spent 45 minutes, and the problem was solved.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/10/07/stop-chatting-start-coding.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/10/07/stop-chatting-start-coding.html&amp;text=Stop+Chatting%2C+Start+Coding" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/10/07/stop-chatting-start-coding.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/10/07/stop-chatting-start-coding.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/10/07/stop-chatting-start-coding.html%3F2014-40&amp;title=Stop+Chatting%2C+Start+Coding" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/10/07/stop-chatting-start-coding.html%3F2014-40&amp;t=Stop+Chatting%2C+Start+Coding" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div > <figure class='badge'><a href='http://www.xdsd.org'><img src='http://www.xdsd.org/images/logo.svg' style='width:100px;max-width:100%;' alt='badge'/></a></figure><p>The first principle of eXtremely Distributed Software Development (<a href="http://www.xdsd.org">XDSD</a>) states that &quot;everyone gets paid for verified deliverables.&quot; This literally means that, in order to get paid, every programmer has to write the code, commit it to the repository, pass a code review and make sure the code is <a href="/2014/07/21/read-only-master-branch.html">merged into the destination branch</a>. Only then, is his result appreciated and paid for.</p><figure class='jb_picture'><img itemprop='image' alt='Barton Fink (1991) by Joel Coen' src='/images/2014/10/barton-fink.png' longdesc='#8606fa0a'/><figcaption id='8606fa0a'>Barton Fink (1991) by Joel Coen</figcaption></figure><p>For most of my <a href="/2015/01/26/happy-boss-false-objective.html">clients</a> this already sounds extreme. They are used to a traditional scheme of paying <a href="/2015/07/21/hourly-pay-modern-slavery.html">per hour</a> or per month. They immediately realize the benefits of XDSD, though, because for them this approach means that project funds are <a href="/2015/02/16/it-is-not-a-school.html">not wasted</a> on activities that don&#39;t produce results.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=qRZYJGYdrwk'><div class='box'> <img src='https://i.ytimg.com/vi/qRZYJGYdrwk/mqdefault.jpg' alt='YouTube video #qRZYJGYdrwk'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>XDSD: management without meetings; 13 February 2016.</div></aside><p>But that&#39;s not all.</p><p>This principle also means that nobody is paid for anything except tasks explicitly assigned to him/her. Thus, when a programmer has a question about current design, <a href="/2015/11/10/ten-mistakes-in-specs.html">specification</a>, configuration, etc.---nobody will be interested in answering it. Why not? Because there is no payment attached to this. Answering questions in Skype, Slack, or HipChat, or by email is something that is not appreciated in XDSD in any way. The project simply doesn&#39;t pay for this activity. That&#39;s why none of our programmers do this.</p><p>More about this philosophy here: <a href="/2015/02/16/it-is-not-a-school.html">It&#39;s Not a School!</a></p><p>We don&#39;t use <strong>any</strong> (I mean it!) <a href="/2016/08/23/communication-maturity.html">informal communication channels</a> in XDSD projects. We don&#39;t do meetings or conference calls. We never discuss any technical issues on Skype or by phone.</p><aside class='quote'>Every hour spent by a team member is traceable to the line of code produced.</aside><p>So, how do we resolve problems and share information?</p><p>We use task tracking systems for that. When a developer has a question, he submits it as a new &quot;ticket.&quot; The project <a href="/2015/09/22/micromanagement.html">manager</a> then picks it up and assigns it to another developer, who is able to answer it. Then, the answer goes back through the tracking system or directly into the source code.</p><p>The &quot;question ticket&quot; gets closed when its author is satisfied with the answer. When the ticket is closed, those who answered it get paid.</p><p>Using this model, we significantly improve project communications, by making them clean and transparent. We also save a lot of project funds, since every hour spent by a team member is traceable to the line of code he produced.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=LB_YLWhGrco'><div class='box'> <img src='https://i.ytimg.com/vi/LB_YLWhGrco/mqdefault.jpg' alt='YouTube video #LB_YLWhGrco'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Meetings-free Programming; 1 April 2016.</div></aside><p>You can see how this happens in action, for example, in this ticket (the project is <a href="/2015/12/22/why-dont-you-contribute-to-open-source.html">open source</a>; that&#39;s why all communications are open): <a href="https://github.com/jcabi/jcabi-github/issues/731">jcabi/jcabi-github#731</a>. One Java developer is having a problem with his Git repository. Apparently he did something wrong and couldn&#39;t solve the problem by himself. He asked for help by submitting a new bug to the project. He was paid for the <a href="/2018/04/24/right-way-to-report-bugs.html">bug report</a>. Then, another team member was assigned to help him. He did, through a number of suggestions and instructions. In the end, the problem was solved, and he was also paid for the solution. In total, the project spent 45 minutes, and the problem was solved.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="There are four standard phases in a software development lifecycle for all projects developed by Zerocracy. " /> <meta name="keywords" content="agile project steps, how to schedule an agile project, project lifecycle, project milestones, project phases" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-10-06 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Project Lifecycle in Zerocracy"/> <meta name="twitter:description" property="og:description" content="There are four standard phases in a software development lifecycle for all projects developed by Zerocracy. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/10/06/software-project-lifecycle.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2014/10/06/software-project-lifecycle.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/10/06/software-project-lifecycle.amp.html" /> <title>Project Lifecycle in Zerocracy </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/10/06/software-project-lifecycle.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2014/10/06/software-project-lifecycle.html">https://www.yegor256.com/2014/10/06/software-project-lifecycle.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Project Lifecycle in Zerocracy</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-10-06T00:00:00+00:00"> 6 October 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/10/06/software-project-lifecycle.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>In addition to being a hands-on programmer, I&#39;m also co-founder and CTO of <a href="http://www.zerocracy.com">Zerocracy</a>, a custom software development company. I play the role of a technical and management leader in all projects we work with.</p><figure class='badge'><a href='http://www.zerocracy.com'><img src='http://www.0crat.com/svg/logo.svg' style='width:100px;max-width:100%;' alt='badge'/></a></figure><p>I wrote this article for those who&#39;re interested in hiring me and/or my team. This article will demonstrate what happens from day one until the end of the project, when you choose to <a href="https://www.0crat.com/join">work with us</a>.</p><p>You will see below that our methods of software development <a href="/2014/04/17/how-xdsd-is-different.html">seriously differ</a> from what many other teams are using. I personally pay a lot of attention to <a href="/2017/04/11/flexibility-equates-lower-quality.html">quality</a> of code and quality of the internal processes that connect our team.</p><p>There are four phases in every project I work with in <a href="http://www.zerocracy.com">Zerocracy</a>:</p><ul> <li><p><strong>Thinking</strong>. Here we&#39;re trying to understand: What is the problem that the product is going to solve? We&#39;re also investigating the product&#39;s boundaries---who will work with the software (actors) and how will they work with it (user stories). Deliverables: <a href="/2015/11/10/ten-mistakes-in-specs.html">specification</a>. Duration: from 2 days up to 3 weeks. Participants: product owner, analyst(s), architect, <a href="/2016/02/18/holacracy-autocracy.html">project manager</a>.</p></li> <li><p><strong>Building</strong>. Here the software architect is creating a <a href="https://en.wikipedia.org/wiki/Proof_of_concept">proof-of-concept</a> (aka an <a href="https://en.wikipedia.org/wiki/Minimum_viable_product">MVP</a> or prototype or a skeleton). It is a one-man job that is done almost without any interaction with anyone else. The architect builds the product according to the specification in a very limited time frame. The result will have multiple <a href="/2018/04/24/right-way-to-report-bugs.html">bugs</a> and open ends, but it will implement the main user story. The architect also configures <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> and delivery pipelines. Deliverables: working software. Duration: 2-5 days. Participants: architect.</p></li> <li><p><strong>Fixing</strong>. At this phase we are adding all the meat to the skeleton. This phase takes most of the time and budget and involves many participants. In some projects we invite up to 50 people to work, at the same time. Since we treat all inconsistencies as bugs, this phase is mostly about finding, reporting and fixing bugs, in order to stabilize the product and get it ready for market launch. We increment and release the software multiple times a day, preferably to its user champions. Deliverables: bug fixes via pull requests. Duration: from weeks to months. Participants: programmer(s), designer(s), tester(s), code reviewer(s), architect, project manager.</p></li> <li><p><strong>Using</strong>. At this final phase we are launching the product to its end-users, and collecting their feedback (both positive and negative). Everything they are reporting back to us is being registered as a bug. Then, we categorize the bugs and fix them. This phase may take years, but it never involves active implementation of new features. Deliverables: bug fixes via pull requests. Duration: months. Participants: programmer(s), code reviewer(s), project manager.</p></li></ul><p>The biggest (i.e., longest and most expensive) phase is, of course, Fixing. It usually takes the majority of time (over 70%). However, the most important and risky phase is the first one---Thinking. A mistake made during Thinking will <a href="/2015/06/02/how-to-estimate-software-cost.html">cost</a> much more than a mistake made later.</p><h2 id="thinking">Thinking</h2><figure class='badge'><img src='https://www.yegor256.com/images/2014/10/lifecycle-thinking.png' style='width:250px;max-width:100%;' alt='badge'/></figure><p>Thinking is the first and the most important phase.</p><p>First, we give a name to the project and create a <a href="https://github.com">GitHub</a> repository. We try to keep all our projects (both <a href="/2017/05/30/why-contribute-to-open-source.html">open source</a> and commercial) in GitHub. Mostly because the platform is very popular, very powerful, and really cheap (<a href="https://github.com/pricing">$7/mo</a> for a set of 5 private projects). We also keep <a href="/2016/08/23/communication-maturity.html">all</a> communication in the GitHub issue tracker.</p><p>Then, we create a simple half-page SRS document (Software Requirements Specification). Usually this is done right inside the source code, but sometimes in the GitHub <code>README.md</code> file. What&#39;s important is that the document should be under version control. We will modify it during the course of the project, very intensively. The <code>README.md</code> should <a href="/2014/10/20/how-we-write-product-vision.html">briefly</a> identify main &quot;actors&quot; of the system and define the product scope.</p><p>Even though it is only half a page, the creation of this initial SRS document is the most important and the most expensive task in the entire project. We pay a lot of attention to this step. Usually this document is written by one of our system analysts in direct communication with the project sponsor. We can&#39;t afford a mistake at this step.</p><p>Then, we invite a few new system analysts to the project. These guys are responsible for turning our initial <code>README</code> into a more complete and detailed <a href="/2015/11/10/ten-mistakes-in-specs.html">specification</a>. They start by asking questions, submitting them one by one as GitHub issues. Every question is addressed to the product owner. Using his/her answers, system analysts modify the <code>README</code> document. Sometimes we&#39;re using <a href="/2014/04/26/incremental-requirements-with-requs.html">Requs</a>.</p><p>At the end of the Thinking phase we estimate the size of the project, in <a href="/2014/11/14/hits-of-code.html">Hits of Code</a>. Using this HoC metric, we can roughly <a href="http://at.teamed.io/calculator.html">estimate a budget</a>.</p><h2 id="building">Building</h2><figure class='badge'><img src='https://www.yegor256.com/images/2014/10/lifecycle-building.png' style='width:250px;max-width:100%;' alt='badge'/></figure><p>This is a one-man job for <a href="/2014/10/12/who-is-software-architect.html">an architect</a>. Every project we work on has an architect who is <a href="/2015/05/11/software-architect-responsibilities.html">personally responsible</a> for the quality and technical decisions. We have a few brilliant engineers for this role.</p><p>The Building phase is rather straight forward. The architect has to implement the solution according to the <code>README</code>, in a few working days. No matter how big the idea and how massive the planning development, the architect still has to create (build from scratch!) the product in, say, three days.</p><p>Besides building the software itself, the architect has to configure all basic DevOps processes, including: 1) automated testing and quality control, 2) deploying and releasing pipelines, 3) repository of artifacts, 4) <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> service, etc.</p><p>The result of this phase is a working software package, deployable to its destination and available for testers. Technical <a href="/2014/08/13/strict-code-quality-control.html">quality requirements</a> are also defined at this phase.</p><p>More about the Building phase here: <a href="/2015/08/04/nine-steps-start-software-project.html">Nine Steps to Start a Software Project</a></p><h2 id="fixing">Fixing</h2><figure class='badge'><img src='https://www.yegor256.com/images/2014/10/lifecycle-fixing.png' style='width:250px;max-width:100%;' alt='badge'/></figure><p>Now it&#39;s time to build a distributed team of programmers. First, we invite those who&#39;ve worked on other projects and have already have proven their quality. Very often we invite new people, finding them through <a href="/2017/02/14/stackoverflow-is-your-tool.html">StackOverflow</a>, GitHub, Upwork, and other sources. An average team size of an average project is 15-25 programmers.</p><p>At this phase, we understand <a href="/2014/11/24/principles-of-bug-tracking.html">any inconsistency</a> as a bug. If something is not clear in the documentation, or if something can be refactored for better readability, or if a function can be improved for higher performance---it is a bug to us. And <a href="/2014/04/13/bugs-are-welcome.html">bugs are welcome</a> in our projects. We encourage everybody to report as many bugs as possible. This is how we achieve high quality.</p><p>That is why the phase is called Fixing, after all. We are reporting bugs and <a href="/2014/04/12/puzzle-driven-development-by-roles.html">fixing</a> them. Hundreds of bugs. Sometimes thousands. The product grows in front of our very eyes, because after every bug fix we re-deploy the entire product to the production platform.</p><p>Every bug is reported, classified, discussed, and fixed in its own GitHub ticket and its own Git branch. We never allow anyone to just commit to the <code>master</code> branch---all changes must pass through our <a href="/2014/08/13/strict-code-quality-control.html">quality controls</a> and be merged into <code>master</code> by <a href="http://www.rultor.com">rultor.com</a>, our <a href="/2014/07/24/rultor-automated-merging.html">merging bot</a>.</p><p>Also important to mention is that all communications with the product owner and between programmers happen only through GitHub issues. We <a href="/2014/10/07/stop-chatting-start-coding.html">never use any chats</a>, Skype, emails or conferencing software. We communicate only through tickets and <a href="/2015/11/03/chatbot-better-than-ui-for-microservice.html">comments</a> in GitHub.</p><h2 id="using">Using</h2><figure class='badge'><img src='https://www.yegor256.com/images/2014/10/lifecycle-using.png' style='width:250px;max-width:100%;' alt='badge'/></figure><p>This is the final phase and it can take quite a long time. By now, the product is ready and is launched to the market. But we still receive <a href="/2018/04/24/right-way-to-report-bugs.html">bug reports</a> and feature request from the product owner, and we still fix them through the same process flow as in the Fixing phase.</p><p>We try to keep this phase as quiet as possible, in terms of the amount of bugs reported and fixed. Thanks to our intensive and pro-active bug finding and fixing in the previous phase, we usually have very few problems at the Using phase.</p><p>And big feature requests? At this phase, we usually try to convert them into new projects and develop them separately, starting again from Thinking.</p><p>BTW, the illustrations you see above are made by <a href="https://www.behance.net/lopesbarbara">Bárbara Lopes</a>.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/10/06/software-project-lifecycle.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/10/06/software-project-lifecycle.html&amp;text=Project+Lifecycle+in+Zerocracy" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/10/06/software-project-lifecycle.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/10/06/software-project-lifecycle.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/10/06/software-project-lifecycle.html%3F2014-40&amp;title=Project+Lifecycle+in+Zerocracy" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/10/06/software-project-lifecycle.html%3F2014-40&amp;t=Project+Lifecycle+in+Zerocracy" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>In addition to being a hands-on programmer, I&#39;m also co-founder and CTO of <a href="http://www.zerocracy.com">Zerocracy</a>, a custom software development company. I play the role of a technical and management leader in all projects we work with.</p><figure class='badge'><a href='http://www.zerocracy.com'><img src='http://www.0crat.com/svg/logo.svg' style='width:100px;max-width:100%;' alt='badge'/></a></figure><p>I wrote this article for those who&#39;re interested in hiring me and/or my team. This article will demonstrate what happens from day one until the end of the project, when you choose to <a href="https://www.0crat.com/join">work with us</a>.</p><p>You will see below that our methods of software development <a href="/2014/04/17/how-xdsd-is-different.html">seriously differ</a> from what many other teams are using. I personally pay a lot of attention to <a href="/2017/04/11/flexibility-equates-lower-quality.html">quality</a> of code and quality of the internal processes that connect our team.</p><p>There are four phases in every project I work with in <a href="http://www.zerocracy.com">Zerocracy</a>:</p><ul> <li><p><strong>Thinking</strong>. Here we&#39;re trying to understand: What is the problem that the product is going to solve? We&#39;re also investigating the product&#39;s boundaries---who will work with the software (actors) and how will they work with it (user stories). Deliverables: <a href="/2015/11/10/ten-mistakes-in-specs.html">specification</a>. Duration: from 2 days up to 3 weeks. Participants: product owner, analyst(s), architect, <a href="/2016/02/18/holacracy-autocracy.html">project manager</a>.</p></li> <li><p><strong>Building</strong>. Here the software architect is creating a <a href="https://en.wikipedia.org/wiki/Proof_of_concept">proof-of-concept</a> (aka an <a href="https://en.wikipedia.org/wiki/Minimum_viable_product">MVP</a> or prototype or a skeleton). It is a one-man job that is done almost without any interaction with anyone else. The architect builds the product according to the specification in a very limited time frame. The result will have multiple <a href="/2018/04/24/right-way-to-report-bugs.html">bugs</a> and open ends, but it will implement the main user story. The architect also configures <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> and delivery pipelines. Deliverables: working software. Duration: 2-5 days. Participants: architect.</p></li> <li><p><strong>Fixing</strong>. At this phase we are adding all the meat to the skeleton. This phase takes most of the time and budget and involves many participants. In some projects we invite up to 50 people to work, at the same time. Since we treat all inconsistencies as bugs, this phase is mostly about finding, reporting and fixing bugs, in order to stabilize the product and get it ready for market launch. We increment and release the software multiple times a day, preferably to its user champions. Deliverables: bug fixes via pull requests. Duration: from weeks to months. Participants: programmer(s), designer(s), tester(s), code reviewer(s), architect, project manager.</p></li> <li><p><strong>Using</strong>. At this final phase we are launching the product to its end-users, and collecting their feedback (both positive and negative). Everything they are reporting back to us is being registered as a bug. Then, we categorize the bugs and fix them. This phase may take years, but it never involves active implementation of new features. Deliverables: bug fixes via pull requests. Duration: months. Participants: programmer(s), code reviewer(s), project manager.</p></li></ul><p>The biggest (i.e., longest and most expensive) phase is, of course, Fixing. It usually takes the majority of time (over 70%). However, the most important and risky phase is the first one---Thinking. A mistake made during Thinking will <a href="/2015/06/02/how-to-estimate-software-cost.html">cost</a> much more than a mistake made later.</p><h2 id="thinking">Thinking</h2><figure class='badge'><img src='https://www.yegor256.com/images/2014/10/lifecycle-thinking.png' style='width:250px;max-width:100%;' alt='badge'/></figure><p>Thinking is the first and the most important phase.</p><p>First, we give a name to the project and create a <a href="https://github.com">GitHub</a> repository. We try to keep all our projects (both <a href="/2017/05/30/why-contribute-to-open-source.html">open source</a> and commercial) in GitHub. Mostly because the platform is very popular, very powerful, and really cheap (<a href="https://github.com/pricing">$7/mo</a> for a set of 5 private projects). We also keep <a href="/2016/08/23/communication-maturity.html">all</a> communication in the GitHub issue tracker.</p><p>Then, we create a simple half-page SRS document (Software Requirements Specification). Usually this is done right inside the source code, but sometimes in the GitHub <code>README.md</code> file. What&#39;s important is that the document should be under version control. We will modify it during the course of the project, very intensively. The <code>README.md</code> should <a href="/2014/10/20/how-we-write-product-vision.html">briefly</a> identify main &quot;actors&quot; of the system and define the product scope.</p><p>Even though it is only half a page, the creation of this initial SRS document is the most important and the most expensive task in the entire project. We pay a lot of attention to this step. Usually this document is written by one of our system analysts in direct communication with the project sponsor. We can&#39;t afford a mistake at this step.</p><p>Then, we invite a few new system analysts to the project. These guys are responsible for turning our initial <code>README</code> into a more complete and detailed <a href="/2015/11/10/ten-mistakes-in-specs.html">specification</a>. They start by asking questions, submitting them one by one as GitHub issues. Every question is addressed to the product owner. Using his/her answers, system analysts modify the <code>README</code> document. Sometimes we&#39;re using <a href="/2014/04/26/incremental-requirements-with-requs.html">Requs</a>.</p><p>At the end of the Thinking phase we estimate the size of the project, in <a href="/2014/11/14/hits-of-code.html">Hits of Code</a>. Using this HoC metric, we can roughly <a href="http://at.teamed.io/calculator.html">estimate a budget</a>.</p><h2 id="building">Building</h2><figure class='badge'><img src='https://www.yegor256.com/images/2014/10/lifecycle-building.png' style='width:250px;max-width:100%;' alt='badge'/></figure><p>This is a one-man job for <a href="/2014/10/12/who-is-software-architect.html">an architect</a>. Every project we work on has an architect who is <a href="/2015/05/11/software-architect-responsibilities.html">personally responsible</a> for the quality and technical decisions. We have a few brilliant engineers for this role.</p><p>The Building phase is rather straight forward. The architect has to implement the solution according to the <code>README</code>, in a few working days. No matter how big the idea and how massive the planning development, the architect still has to create (build from scratch!) the product in, say, three days.</p><p>Besides building the software itself, the architect has to configure all basic DevOps processes, including: 1) automated testing and quality control, 2) deploying and releasing pipelines, 3) repository of artifacts, 4) <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> service, etc.</p><p>The result of this phase is a working software package, deployable to its destination and available for testers. Technical <a href="/2014/08/13/strict-code-quality-control.html">quality requirements</a> are also defined at this phase.</p><p>More about the Building phase here: <a href="/2015/08/04/nine-steps-start-software-project.html">Nine Steps to Start a Software Project</a></p><h2 id="fixing">Fixing</h2><figure class='badge'><img src='https://www.yegor256.com/images/2014/10/lifecycle-fixing.png' style='width:250px;max-width:100%;' alt='badge'/></figure><p>Now it&#39;s time to build a distributed team of programmers. First, we invite those who&#39;ve worked on other projects and have already have proven their quality. Very often we invite new people, finding them through <a href="/2017/02/14/stackoverflow-is-your-tool.html">StackOverflow</a>, GitHub, Upwork, and other sources. An average team size of an average project is 15-25 programmers.</p><p>At this phase, we understand <a href="/2014/11/24/principles-of-bug-tracking.html">any inconsistency</a> as a bug. If something is not clear in the documentation, or if something can be refactored for better readability, or if a function can be improved for higher performance---it is a bug to us. And <a href="/2014/04/13/bugs-are-welcome.html">bugs are welcome</a> in our projects. We encourage everybody to report as many bugs as possible. This is how we achieve high quality.</p><p>That is why the phase is called Fixing, after all. We are reporting bugs and <a href="/2014/04/12/puzzle-driven-development-by-roles.html">fixing</a> them. Hundreds of bugs. Sometimes thousands. The product grows in front of our very eyes, because after every bug fix we re-deploy the entire product to the production platform.</p><p>Every bug is reported, classified, discussed, and fixed in its own GitHub ticket and its own Git branch. We never allow anyone to just commit to the <code>master</code> branch---all changes must pass through our <a href="/2014/08/13/strict-code-quality-control.html">quality controls</a> and be merged into <code>master</code> by <a href="http://www.rultor.com">rultor.com</a>, our <a href="/2014/07/24/rultor-automated-merging.html">merging bot</a>.</p><p>Also important to mention is that all communications with the product owner and between programmers happen only through GitHub issues. We <a href="/2014/10/07/stop-chatting-start-coding.html">never use any chats</a>, Skype, emails or conferencing software. We communicate only through tickets and <a href="/2015/11/03/chatbot-better-than-ui-for-microservice.html">comments</a> in GitHub.</p><h2 id="using">Using</h2><figure class='badge'><img src='https://www.yegor256.com/images/2014/10/lifecycle-using.png' style='width:250px;max-width:100%;' alt='badge'/></figure><p>This is the final phase and it can take quite a long time. By now, the product is ready and is launched to the market. But we still receive <a href="/2018/04/24/right-way-to-report-bugs.html">bug reports</a> and feature request from the product owner, and we still fix them through the same process flow as in the Fixing phase.</p><p>We try to keep this phase as quiet as possible, in terms of the amount of bugs reported and fixed. Thanks to our intensive and pro-active bug finding and fixing in the previous phase, we usually have very few problems at the Using phase.</p><p>And big feature requests? At this phase, we usually try to convert them into new projects and develop them separately, starting again from Thinking.</p><p>BTW, the illustrations you see above are made by <a href="https://www.behance.net/lopesbarbara">Bárbara Lopes</a>.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="I tried to use them all and made a comparison chart, which may help you to chose the most suitable continuous integration service for a private project " /> <meta name="keywords" content="cloud continuous integration, continuous integration, continuous integration in cloud, continuous integration service, hosted continuous integration" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-10-05 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Best Hosted Continuous Integration Services for a Private Repository"/> <meta name="twitter:description" property="og:description" content="I tried to use them all and made a comparison chart, which may help you to chose the most suitable continuous integration service for a private project "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.amp.html" /> <title>Best Hosted Continuous Integration Services for a Private Repository </title> <style> .x-col1 { width: 6em; } .x-col2 { width: 4em; } .x-colX { width: 2em; } .x-head { height: 6em; } .x-hr { border-top: 1px solid gray; } .x-right { text-align: right; } .x-bottom { vertical-align: bottom; } .x-vertical { vertical-align: bottom; white-space: nowrap; } .x-vertical div { text-align: left; transform: translate(0, -.5em) rotate(270deg); width: 2em; } .x-build { height: 18px; } </style> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html">https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Best Hosted Continuous Integration Services for a Private Repository</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-10-05T00:00:00+00:00"> 5 October 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>Every project I&#39;m working with starts with a setup of <a href="/2016/08/01/continuous-integration-maturity.html">continuous integration</a> pipeline. I&#39;m a big fan of cloud services, that&#39;s why I was always using <a href="http://www.travis-ci.org">Travis</a>. A few of my clients questioned this choice recently, mostly because of the price. So I decided to make a brief analysis of the market.</p><p>I configured <a href="https://github.com/yegor256/rultor">Rultor</a>, an open source project, in every CI service I managed to find. All of them are free for open source projects. All of them are hosted and do not require any server installation Here they are, in order of my personal preference (first four are the best and highly recommended):</p><table> <colgroup> <col class="x-col1"/> <col class="x-col2"/> <col class="x-colX"/> <col class="x-colX"/> <col class="x-colX"/> <col class="x-colX"/> <col class="x-colX"/> </colgroup> <thead> <tr class="x-head"><td></td><td class="x-bottom x-right">Minimum price</td><td class="x-vertical"><div><span>Linux<sup>1</sup></span></div></td><td class="x-vertical"><div><span>Windows<sup>2</sup></span></div></td><td class="x-vertical"><div><span>MacOS<sup>3</sup></span></div></td><td class="x-vertical"><div><span>Pull requests<sup>4</sup></span></div></td><td class="x-vertical"><div><span>Log compress<sup>5</sup></span></div></td><td class="x-vertical"><div><span>Docker<sup>6</sup></span></div></td><td class="x-bottom">Build</td></tr> </thead> <tbody> <tr><td><a href="http://www.shippable.com">Shippable</a>&#x263A;</td><td class="x-right"><a href="http://www.shippable.com/pricing.html">free</a> (!)</td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td><a href="https://app.shippable.com/projects/542e8fb980088cee586d3806/builds/latest"> <img src="https://api.shippable.com/projects/542e8fb980088cee586d3806/badge?branchName=master" class="x-build" alt='badge'/></a></td></tr> <tr><td><a href="http://www.travis-ci.org">Travis</a></td><td class="x-right"><a href="https://travis-ci.com/plans">$69/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td><a href="https://travis-ci.org/yegor256/rultor"> <img src="https://travis-ci.org/yegor256/rultor.svg?branch=master" class="x-build" alt='badge'/></a></td></tr> <tr><td><a href="http://www.appveyor.com">AppVeyor</a></td><td class="x-right"><a href="http://www.appveyor.com/pricing">$39/mo</a></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center">?</td><td class="center">---</td><td><a href="https://ci.appveyor.com/project/yegor256/rultor/branch/master"> <img src="https://ci.appveyor.com/api/projects/status/sulqrjerl27qqtl7/branch/master?svg=true" class="x-build" alt='badge'/></a></td></tr> <tr><td><a href="http://www.wercker.com">Wercker</a></td><td class="x-right">$350/mo</td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td><a href="https://app.wercker.com/project/bykey/0e6506c69e078b7692e50b240c034524"> <img src="https://app.wercker.com/status/0e6506c69e078b7692e50b240c034524/s%20wercker status" class="x-build" alt='badge'/></a></td></tr> <tr><td colspan="9" class="x-hr"></td></tr> <tr><td><a href="http://www.semaphoreapp.com">SemaphoreApp</a></td><td class="x-right"><a href="https://semaphoreapp.com/pricing">$29/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="http://www.snap-ci.com">Snap-CI</a>&#x263A;</td><td class="x-right"><a href="https://snap-ci.com/plans">$30/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center">?</td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="https://codeship.com">Codeship</a>&#x263A;</td><td class="x-right"><a href="https://codeship.com/pricing">$49/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center">?</td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td></tr> <tr><td><a href="http://www.circleci.com">CircleCI</a>&#x263A;</td><td class="x-right"><a href="https://circleci.com/pricing">$19/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="http://ci.solanolabs.com">SonoLabs</a></td><td class="x-right"><a href="https://www.solanolabs.com/#pricing">$15/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center">?</td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="http://www.deploybot.com">DeployBot</a></td><td class="x-right"><a href="https://signup.deploybot.com/signup/new">$15/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center">?</td><td class="center">?</td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="http://vexor.io">Vexor</a></td><td class="x-right"><a href="http://vexor.io/">&cent;90/hr</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center">?</td><td class="center">?</td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="http://www.greenhouseci.com">GreenHouseCI</a></td><td class="x-right"><a href="https://greenhouseci.com/pricing.html">$49/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center">?</td><td class="center">?</td><td class="center"><i class="icon-no red"></i></td></tr> </tbody> </table><p>If you know any other good <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> services, <a href="/about-me.html">email me</a>, I&#39;ll review and add them to this list. BTW, here is a <a href="https://en.wikipedia.org/wiki/Comparison_of_continuous_integration_software">&quot;full&quot; list</a> of continuous integration software and services.</p><p>By the way, a few platforms from this list contacted me and asked to review them again. Some even offered me money to put them higher in the list (kidding). Anyway, it&#39;s up to you to decide whether it&#39;s a good sign or not (I think it&#39;s good, they care about their PR). I marked them in the list with &#x263A; emoji.</p><h2 id="best-four">Best Four</h2><figure class='badge'><a href='http://www.shippable.com'><img src='https://www.yegor256.com/images/2014/10/shippable.svg' style='width:92px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.shippable.com"><strong>Shippable</strong></a> was easy to configure since it understands <code>.travis.yml</code> out of the box. The user interface is easy to navigate since it doesn&#39;t have &quot;settings&quot; page at all (or I didn&#39;t find it). Everything is configured via <code>shippable.yml</code> file in the repository. The service looks stable and robust, no complains so far. What is especially cool about them is that they allow you to build in a Docker container.</p><figure class='badge'><a href='http://www.travis-ci.org'><img src='https://www.yegor256.com/images/2014/10/travis.png' style='width:92px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.travis-ci.org"><strong>Travis</strong></a> is the best platform I&#39;ve seen so far. Mostly because it is the most popular. Perfectly integrates with GitHub and has proper documentation. One important downside is the price of $129 per month. &quot;With this money you can get a dedicated EC2 instance and install Jenkins there&quot;---some of my <a href="/2015/01/26/happy-boss-false-objective.html">clients</a> say. I strongly disagree, since Jenkins will require a 24x7 administration, which costs way more than $129, but it&#39;s always difficult to explain.</p><figure class='badge'><a href='http://www.wercker.com'><img src='https://www.yegor256.com/images/2014/10/wercker.png' style='width:92px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.wercker.com"><strong>Wercker</strong></a> is a European product from Amsterdam, which is still in beta and that&#39;s why free for all projects. The platform looks very promising. It is still free for private repositories and is backed up by <a href="https://gigaom.com/2014/10/01/wercker-takes-in-2-4-million-to-help-developers-test-their-code-in-the-cloud/">investments</a>. They also have an interesting concept of build &quot;boxes,&quot; which can be pre-configured similar to Docker containers. It works rather stable for the last few months, no complains so far.</p><figure class='badge'><a href='http://www.appveyor.com'><img src='https://www.yegor256.com/images/2014/10/appveyor.png' style='width:92px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.appveyor.com"><strong>AppVeyor</strong></a> is the only one that runs Windows builds. Even though I&#39;m working mostly with Java and Ruby, which are expected to be platform independent, they very often appear to be exactly the opposite. When your build succeeds on Linux, there is almost no guarantee it will pass on Windows or Mac. I&#39;m planning to use AppVeyor in every project, in combination with some other CI service. Here is how I integrate <a href="/2015/01/10/windows-appveyor-maven.html">Maven builds</a> with AppVeyor.</p><h2 id="others">Others</h2><figure class='badge'><a href='http://www.semaphoreapp.com'><img src='https://www.yegor256.com/images/2014/10/semaphoreapp.png' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.semaphoreapp.com"><strong>SemaphoreApp</strong></a> is easy to configure and work with. It makes an impression of a light-weight system, which I generally appreciate. As a downside, they <span class="strike">don&#39;t have any Maven pre-installed</span> have an old version of Maven, but this was solved easily with a short custom script that downloads and unpacks the latest Maven. Another downside is that they are not configurable through a file (like <code>.travis.yml</code>)---you should do everything through a UI. They also support <a href="https://semaphoreapp.com/docs/caching-between-builds.html">caching between builds</a>.</p><figure class='badge'><a href='http://www.snap-ci.com'><img src='https://www.yegor256.com/images/2014/10/snap.png' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.snap-ci.com"><strong>Snap-CI</strong></a> is a product of ThoughtWorks, an author of <a href="http://www.go.cd/">Go</a>, an open source continuous integration server. It looks a bit more complicated than others, giving you an ability to define &quot;stages&quot; and combine them into pipelines. I&#39;m not sure yet how these mechanisms may help in small and medium size projects we&#39;re mostly working with, but they look &quot;cool.&quot; There is also a very unfortunate limitation of 2Gb RAM per build---some of my Java projects fail because of that. Besides that, they don&#39;t give full access to the build server, for example we can&#39;t modify anything in <code>/etc</code>---it is a show-stopper for us.</p><p><a href="https://codeship.com"><strong>Codeship</strong></a> works fine, but their web UI looks a bit out-dated. Besides that, they promise to work with pull requests, but I didn&#39;t manage to configure them. They simply don&#39;t notify our pull requests in GitHub, even though they build them. Maybe I&#39;ll find a way, so far it&#39;s not clear.</p><figure class='badge'><a href='http://www.circleci.com'><img src='https://www.yegor256.com/images/2014/10/circleci.png' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.circleci.com"><strong>CircleCI</strong></a> I still don&#39;t know why my build fails there. Really difficult to configure and understand what&#39;s going on. Trying to figure it out...</p><figure class='badge'><a href='http://www.solanolabs.com'><img src='https://www.yegor256.com/images/2014/10/solanolabs.png' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.solanolabs.com"><strong>SolanoLabs</strong></a> looks rather immature and difficult to configure. They don&#39;t even support automatic GitHub hook configuration when new repository is added. However, their sales spams me rather aggressively :)</p><figure class='badge'><a href='http://www.hosted-ci.com'><img src='https://www.yegor256.com/images/2014/10/hostedci.png' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.hosted-ci.com"><strong>Hosted-CI</strong></a> is for iOS/OSX only. They don&#39;t give anything for free, even for open source projects. I didn&#39;t have a chance to test them yet.</p><figure class='badge'><a href='http://www.cloudbees.com'><img src='https://www.yegor256.com/images/2014/10/cloudbees.png' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.cloudbees.com"><strong>CloudBees</strong></a> is basically a hosted Jenkins. I don&#39;t really like Jenkins, that&#39;s why can&#39;t recommend this platform.</p><figure class='badge'><a href='http://www.deploybot.com'><img src='https://www.yegor256.com/images/2014/10/deploybot.png' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="https://deploybot.com/"><strong>DeployBot</strong></a> doesn&#39;t even allow me to login via GitHub, huh? They seem to be more &quot;deployment&quot; oriented, not just continuous integration.</p><figure class='badge'><a href='http://vexor.io'><img src='https://www.yegor256.com/images/2014/10/vexor.png' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://vexor.io/"><strong>Vexor</strong></a> looks nice and offers a rather unique billing model---they charge per build, not per month. I would definitely recommend to give it a try. I couldn&#39;t make it work though...</p><figure class='badge'><a href='http://www.greenhouseci.com'><img src='https://www.yegor256.com/images/2014/10/greenhouseci.png' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://greenhouseci.com/"><strong>GreenHouseCI</strong></a> is a CI platform for mobile apps (iOS, Android, etc.) Seems to be interesting, I just don&#39;t have a full scale mobile app to test it against.</p><hr/><p><a href="https://about.gitlab.com/gitlab-ci/">gitlab-ci</a>: will review soon</p><p><a href="https://scan.coverity.com">coverity.com</a>: will review it soon and add to the list.</p><p><a href="https://buddy.works/">buddy.works</a>: will review soon.</p><p><a href="https://aws.amazon.com/codebuild/">AWS Code Build</a> and <a href="https://aws.amazon.com/codedeploy/">AWS Code Deploy</a>: will review soon.</p><p><strong>Ship.io</strong> is dead (as of 20-Sep-2016).</p><p><strong>ZeroCI.com</strong> is dead (as of 28-Aug-2016).</p><p><strong>Drone.io</strong> is not hosted any more, but is open source (as of 23-Jan-2017).</p><p><strong>Hosted-ci</strong> doesn&#39;t look alive (as of 16-Apr-2017).</p><p><strong>Magnum-CI.com</strong> doesn&#39;t look alive (as of 30-May-2017).</p><hr/><p>BTW, if you don&#39;t like the idea of keeping continuous integration in cloud, consider these on-premise software packages (in order or preference): <a href="http://jenkins-ci.org/">Jenkins</a>, <a href="http://www.jetbrains.com/teamcity/">TeamCity</a>, <a href="http://www.thoughtworks.com/products/go-continuous-delivery">Go</a>, <a href="https://github.com/Strider-CD/strider">Strider</a>, <a href="http://buildbot.net/">BuildBot</a>.</p><p>Keep in mind that no matter how good and expensive your continuous integration service is, it <a href="/2014/10/08/continuous-integration-is-dead.html">won&#39;t help you</a> unless you make your <a href="/2014/07/21/read-only-master-branch.html">master branch read-only</a>.</p><hr/><p><sup>1</sup> This means that the platform can build your repo in Linux environment. Almost all of them do that by default, unless you configure them otherwise.<br/> <sup>2</sup> Some of them can build on Windows platform.<br/> <sup>3</sup> MacOS support means that an Objective-C/Swift product can be built there.<br/> <sup>4</sup> I mean GitHub pull request support here. Some of them can be integrated with GitHub and will build pull requests before they are merged. Build status will be visible in GitHub. A pretty convenient feature.<br/> <sup>5</sup> Logs compression is a critical feature, at least for me. Most of my logs are from Maven and without <code>col -b</code> they look too long and unreadable.<br/> <sup>6</sup> Looks like Docker containers must be supported by all of them, but unfortunately it&#39;s not the case. Ideally, all builds should run in containers.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html&amp;text=Best+Hosted+Continuous+Integration+Services+for+a+Private+Repository" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html%3F2014-40&amp;title=Best+Hosted+Continuous+Integration+Services+for+a+Private+Repository" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html%3F2014-40&amp;t=Best+Hosted+Continuous+Integration+Services+for+a+Private+Repository" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>Every project I&#39;m working with starts with a setup of <a href="/2016/08/01/continuous-integration-maturity.html">continuous integration</a> pipeline. I&#39;m a big fan of cloud services, that&#39;s why I was always using <a href="http://www.travis-ci.org">Travis</a>. A few of my clients questioned this choice recently, mostly because of the price. So I decided to make a brief analysis of the market.</p><p>I configured <a href="https://github.com/yegor256/rultor">Rultor</a>, an open source project, in every CI service I managed to find. All of them are free for open source projects. All of them are hosted and do not require any server installation Here they are, in order of my personal preference (first four are the best and highly recommended):</p><table> <colgroup> <col class="x-col1"/> <col class="x-col2"/> <col class="x-colX"/> <col class="x-colX"/> <col class="x-colX"/> <col class="x-colX"/> <col class="x-colX"/> </colgroup> <thead> <tr class="x-head"><td></td><td class="x-bottom x-right">Minimum price</td><td class="x-vertical"><div><span>Linux<sup>1</sup></span></div></td><td class="x-vertical"><div><span>Windows<sup>2</sup></span></div></td><td class="x-vertical"><div><span>MacOS<sup>3</sup></span></div></td><td class="x-vertical"><div><span>Pull requests<sup>4</sup></span></div></td><td class="x-vertical"><div><span>Log compress<sup>5</sup></span></div></td><td class="x-vertical"><div><span>Docker<sup>6</sup></span></div></td><td class="x-bottom">Build</td></tr> </thead> <tbody> <tr><td><a href="http://www.shippable.com">Shippable</a>&#x263A;</td><td class="x-right"><a href="http://www.shippable.com/pricing.html">free</a> (!)</td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td><a href="https://app.shippable.com/projects/542e8fb980088cee586d3806/builds/latest"> <img src="https://api.shippable.com/projects/542e8fb980088cee586d3806/badge?branchName=master" class="x-build" alt='badge'/></a></td></tr> <tr><td><a href="http://www.travis-ci.org">Travis</a></td><td class="x-right"><a href="https://travis-ci.com/plans">$69/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td><a href="https://travis-ci.org/yegor256/rultor"> <img src="https://travis-ci.org/yegor256/rultor.svg?branch=master" class="x-build" alt='badge'/></a></td></tr> <tr><td><a href="http://www.appveyor.com">AppVeyor</a></td><td class="x-right"><a href="http://www.appveyor.com/pricing">$39/mo</a></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center">?</td><td class="center">---</td><td><a href="https://ci.appveyor.com/project/yegor256/rultor/branch/master"> <img src="https://ci.appveyor.com/api/projects/status/sulqrjerl27qqtl7/branch/master?svg=true" class="x-build" alt='badge'/></a></td></tr> <tr><td><a href="http://www.wercker.com">Wercker</a></td><td class="x-right">$350/mo</td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td><a href="https://app.wercker.com/project/bykey/0e6506c69e078b7692e50b240c034524"> <img src="https://app.wercker.com/status/0e6506c69e078b7692e50b240c034524/s%20wercker status" class="x-build" alt='badge'/></a></td></tr> <tr><td colspan="9" class="x-hr"></td></tr> <tr><td><a href="http://www.semaphoreapp.com">SemaphoreApp</a></td><td class="x-right"><a href="https://semaphoreapp.com/pricing">$29/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="http://www.snap-ci.com">Snap-CI</a>&#x263A;</td><td class="x-right"><a href="https://snap-ci.com/plans">$30/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center">?</td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="https://codeship.com">Codeship</a>&#x263A;</td><td class="x-right"><a href="https://codeship.com/pricing">$49/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center">?</td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td></tr> <tr><td><a href="http://www.circleci.com">CircleCI</a>&#x263A;</td><td class="x-right"><a href="https://circleci.com/pricing">$19/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="http://ci.solanolabs.com">SonoLabs</a></td><td class="x-right"><a href="https://www.solanolabs.com/#pricing">$15/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center">?</td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="http://www.deploybot.com">DeployBot</a></td><td class="x-right"><a href="https://signup.deploybot.com/signup/new">$15/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center">?</td><td class="center">?</td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="http://vexor.io">Vexor</a></td><td class="x-right"><a href="http://vexor.io/">&cent;90/hr</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center">?</td><td class="center">?</td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="http://www.greenhouseci.com">GreenHouseCI</a></td><td class="x-right"><a href="https://greenhouseci.com/pricing.html">$49/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center">?</td><td class="center">?</td><td class="center"><i class="icon-no red"></i></td></tr> </tbody> </table><p>If you know any other good <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> services, <a href="/about-me.html">email me</a>, I&#39;ll review and add them to this list. BTW, here is a <a href="https://en.wikipedia.org/wiki/Comparison_of_continuous_integration_software">&quot;full&quot; list</a> of continuous integration software and services.</p><p>By the way, a few platforms from this list contacted me and asked to review them again. Some even offered me money to put them higher in the list (kidding). Anyway, it&#39;s up to you to decide whether it&#39;s a good sign or not (I think it&#39;s good, they care about their PR). I marked them in the list with &#x263A; emoji.</p><h2 id="best-four">Best Four</h2><figure class='badge'><a href='http://www.shippable.com'><img src='https://www.yegor256.com/images/2014/10/shippable.svg' style='width:92px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.shippable.com"><strong>Shippable</strong></a> was easy to configure since it understands <code>.travis.yml</code> out of the box. The user interface is easy to navigate since it doesn&#39;t have &quot;settings&quot; page at all (or I didn&#39;t find it). Everything is configured via <code>shippable.yml</code> file in the repository. The service looks stable and robust, no complains so far. What is especially cool about them is that they allow you to build in a Docker container.</p><figure class='badge'><a href='http://www.travis-ci.org'><img src='https://www.yegor256.com/images/2014/10/travis.png' style='width:92px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.travis-ci.org"><strong>Travis</strong></a> is the best platform I&#39;ve seen so far. Mostly because it is the most popular. Perfectly integrates with GitHub and has proper documentation. One important downside is the price of $129 per month. &quot;With this money you can get a dedicated EC2 instance and install Jenkins there&quot;---some of my <a href="/2015/01/26/happy-boss-false-objective.html">clients</a> say. I strongly disagree, since Jenkins will require a 24x7 administration, which costs way more than $129, but it&#39;s always difficult to explain.</p><figure class='badge'><a href='http://www.wercker.com'><img src='https://www.yegor256.com/images/2014/10/wercker.png' style='width:92px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.wercker.com"><strong>Wercker</strong></a> is a European product from Amsterdam, which is still in beta and that&#39;s why free for all projects. The platform looks very promising. It is still free for private repositories and is backed up by <a href="https://gigaom.com/2014/10/01/wercker-takes-in-2-4-million-to-help-developers-test-their-code-in-the-cloud/">investments</a>. They also have an interesting concept of build &quot;boxes,&quot; which can be pre-configured similar to Docker containers. It works rather stable for the last few months, no complains so far.</p><figure class='badge'><a href='http://www.appveyor.com'><img src='https://www.yegor256.com/images/2014/10/appveyor.png' style='width:92px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.appveyor.com"><strong>AppVeyor</strong></a> is the only one that runs Windows builds. Even though I&#39;m working mostly with Java and Ruby, which are expected to be platform independent, they very often appear to be exactly the opposite. When your build succeeds on Linux, there is almost no guarantee it will pass on Windows or Mac. I&#39;m planning to use AppVeyor in every project, in combination with some other CI service. Here is how I integrate <a href="/2015/01/10/windows-appveyor-maven.html">Maven builds</a> with AppVeyor.</p><h2 id="others">Others</h2><figure class='badge'><a href='http://www.semaphoreapp.com'><img src='https://www.yegor256.com/images/2014/10/semaphoreapp.png' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.semaphoreapp.com"><strong>SemaphoreApp</strong></a> is easy to configure and work with. It makes an impression of a light-weight system, which I generally appreciate. As a downside, they <span class="strike">don&#39;t have any Maven pre-installed</span> have an old version of Maven, but this was solved easily with a short custom script that downloads and unpacks the latest Maven. Another downside is that they are not configurable through a file (like <code>.travis.yml</code>)---you should do everything through a UI. They also support <a href="https://semaphoreapp.com/docs/caching-between-builds.html">caching between builds</a>.</p><figure class='badge'><a href='http://www.snap-ci.com'><img src='https://www.yegor256.com/images/2014/10/snap.png' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.snap-ci.com"><strong>Snap-CI</strong></a> is a product of ThoughtWorks, an author of <a href="http://www.go.cd/">Go</a>, an open source continuous integration server. It looks a bit more complicated than others, giving you an ability to define &quot;stages&quot; and combine them into pipelines. I&#39;m not sure yet how these mechanisms may help in small and medium size projects we&#39;re mostly working with, but they look &quot;cool.&quot; There is also a very unfortunate limitation of 2Gb RAM per build---some of my Java projects fail because of that. Besides that, they don&#39;t give full access to the build server, for example we can&#39;t modify anything in <code>/etc</code>---it is a show-stopper for us.</p><p><a href="https://codeship.com"><strong>Codeship</strong></a> works fine, but their web UI looks a bit out-dated. Besides that, they promise to work with pull requests, but I didn&#39;t manage to configure them. They simply don&#39;t notify our pull requests in GitHub, even though they build them. Maybe I&#39;ll find a way, so far it&#39;s not clear.</p><figure class='badge'><a href='http://www.circleci.com'><img src='https://www.yegor256.com/images/2014/10/circleci.png' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.circleci.com"><strong>CircleCI</strong></a> I still don&#39;t know why my build fails there. Really difficult to configure and understand what&#39;s going on. Trying to figure it out...</p><figure class='badge'><a href='http://www.solanolabs.com'><img src='https://www.yegor256.com/images/2014/10/solanolabs.png' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.solanolabs.com"><strong>SolanoLabs</strong></a> looks rather immature and difficult to configure. They don&#39;t even support automatic GitHub hook configuration when new repository is added. However, their sales spams me rather aggressively :)</p><figure class='badge'><a href='http://www.hosted-ci.com'><img src='https://www.yegor256.com/images/2014/10/hostedci.png' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.hosted-ci.com"><strong>Hosted-CI</strong></a> is for iOS/OSX only. They don&#39;t give anything for free, even for open source projects. I didn&#39;t have a chance to test them yet.</p><figure class='badge'><a href='http://www.cloudbees.com'><img src='https://www.yegor256.com/images/2014/10/cloudbees.png' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://www.cloudbees.com"><strong>CloudBees</strong></a> is basically a hosted Jenkins. I don&#39;t really like Jenkins, that&#39;s why can&#39;t recommend this platform.</p><figure class='badge'><a href='http://www.deploybot.com'><img src='https://www.yegor256.com/images/2014/10/deploybot.png' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="https://deploybot.com/"><strong>DeployBot</strong></a> doesn&#39;t even allow me to login via GitHub, huh? They seem to be more &quot;deployment&quot; oriented, not just continuous integration.</p><figure class='badge'><a href='http://vexor.io'><img src='https://www.yegor256.com/images/2014/10/vexor.png' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://vexor.io/"><strong>Vexor</strong></a> looks nice and offers a rather unique billing model---they charge per build, not per month. I would definitely recommend to give it a try. I couldn&#39;t make it work though...</p><figure class='badge'><a href='http://www.greenhouseci.com'><img src='https://www.yegor256.com/images/2014/10/greenhouseci.png' style='width:64px;max-width:100%;' alt='badge'/></a></figure><p><a href="http://greenhouseci.com/"><strong>GreenHouseCI</strong></a> is a CI platform for mobile apps (iOS, Android, etc.) Seems to be interesting, I just don&#39;t have a full scale mobile app to test it against.</p><hr/><p><a href="https://about.gitlab.com/gitlab-ci/">gitlab-ci</a>: will review soon</p><p><a href="https://scan.coverity.com">coverity.com</a>: will review it soon and add to the list.</p><p><a href="https://buddy.works/">buddy.works</a>: will review soon.</p><p><a href="https://aws.amazon.com/codebuild/">AWS Code Build</a> and <a href="https://aws.amazon.com/codedeploy/">AWS Code Deploy</a>: will review soon.</p><p><strong>Ship.io</strong> is dead (as of 20-Sep-2016).</p><p><strong>ZeroCI.com</strong> is dead (as of 28-Aug-2016).</p><p><strong>Drone.io</strong> is not hosted any more, but is open source (as of 23-Jan-2017).</p><p><strong>Hosted-ci</strong> doesn&#39;t look alive (as of 16-Apr-2017).</p><p><strong>Magnum-CI.com</strong> doesn&#39;t look alive (as of 30-May-2017).</p><hr/><p>BTW, if you don&#39;t like the idea of keeping continuous integration in cloud, consider these on-premise software packages (in order or preference): <a href="http://jenkins-ci.org/">Jenkins</a>, <a href="http://www.jetbrains.com/teamcity/">TeamCity</a>, <a href="http://www.thoughtworks.com/products/go-continuous-delivery">Go</a>, <a href="https://github.com/Strider-CD/strider">Strider</a>, <a href="http://buildbot.net/">BuildBot</a>.</p><p>Keep in mind that no matter how good and expensive your continuous integration service is, it <a href="/2014/10/08/continuous-integration-is-dead.html">won&#39;t help you</a> unless you make your <a href="/2014/07/21/read-only-master-branch.html">master branch read-only</a>.</p><hr/><p><sup>1</sup> This means that the platform can build your repo in Linux environment. Almost all of them do that by default, unless you configure them otherwise.<br/> <sup>2</sup> Some of them can build on Windows platform.<br/> <sup>3</sup> MacOS support means that an Objective-C/Swift product can be built there.<br/> <sup>4</sup> I mean GitHub pull request support here. Some of them can be integrated with GitHub and will build pull requests before they are merged. Build status will be visible in GitHub. A pretty convenient feature.<br/> <sup>5</sup> Logs compression is a critical feature, at least for me. Most of my logs are from Maven and without <code>col -b</code> they look too long and unreadable.<br/> <sup>6</sup> Looks like Docker containers must be supported by all of them, but unfortunately it&#39;s not the case. Ideally, all builds should run in containers.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Mocking frameworks is not a good practice and should be your last resort; instead, create and ship fake classes together with your code. " /> <meta name="keywords" content="best practices of mocking, java mock framework, java mocking, mocking frameworks, mocking is bad, mocking is evil, mocks are evil" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-09-23 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Built-in Fake Objects"/> <meta name="twitter:description" property="og:description" content="Mocking frameworks is not a good practice and should be your last resort; instead, create and ship fake classes together with your code. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/09/23/built-in-fake-objects.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2014/09/23/built-in-fake-objects.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/09/23/built-in-fake-objects.amp.html" /> <title>Built-in Fake Objects </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/09/23/built-in-fake-objects.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2014/09/23/built-in-fake-objects.html">https://www.yegor256.com/2014/09/23/built-in-fake-objects.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Built-in Fake Objects</h1><aside class='book'><a href='http://amzn.to/2qFt4Tn'><img src='/images/books/elegant-objects/cover.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='http://amzn.to/2qFt4Tn'>Section&nbsp;2.8</a><br/> of my book<a href='http://amzn.to/2qFt4Tn'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-09-23T00:00:00+00:00"> 23 September 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/09/23/built-in-fake-objects.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>While mock objects are perfect instruments for unit testing, mocking through mock frameworks may turn your unit tests into an unmaintainable mess. Thanks to them we often hear that &quot;mocking is bad&quot; and &quot;mocking is evil.&quot;</p><p>The root cause of this complexity is that our objects are too big. They have many methods and these methods return other objects, which also have methods. When we pass a mock version of such an object as a parameter, we should make sure that all of its methods return valid objects.</p><p>This leads to inevitable complexity, which turns unit tests to <a href="https://news.ycombinator.com/item?id=7353767">waste</a> almost impossible to maintain.</p><h2 id="object-hierarchy">Object Hierarchy</h2><p>Take the <code>Region</code> interface from <a href="http://dynamo.jcabi.com">jcabi-dynamo</a> as an example (this snippet and all others in this article are simplified, for the sake of brevity):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Region</span> <span class="o">{</span>
  <span class="n">Table</span> <span class="nf">table</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>Its <code>table()</code> method returns an instance of the <code>Table</code> interface, which has its own methods:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Table</span> <span class="o">{</span>
  <span class="n">Frame</span> <span class="nf">frame</span><span class="o">();</span>
  <span class="n">Item</span> <span class="nf">put</span><span class="o">(</span><span class="n">Attributes</span> <span class="n">attrs</span><span class="o">);</span>
  <span class="n">Region</span> <span class="nf">region</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>Interface <code>Frame</code>, returned by the <code>frame()</code> method, also has its own methods. And so on. In order to create a properly mocked instance of interface <code>Region</code>, one would normally create a dozen other mock objects. With <a href="http://mockito.org">Mockito</a> it will look like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testMe</span><span class="o">()</span> <span class="o">{</span>
  <span class="c1">// many more lines here...</span>
  <span class="n">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="n">Mockito</span><span class="o">.</span><span class="na">mock</span><span class="o">(</span><span class="n">Frame</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="n">Mockito</span><span class="o">.</span><span class="na">doReturn</span><span class="o">(...).</span><span class="na">when</span><span class="o">(</span><span class="n">frame</span><span class="o">).</span><span class="na">iterator</span><span class="o">();</span>
  <span class="n">Table</span> <span class="n">table</span> <span class="o">=</span> <span class="n">Mockito</span><span class="o">.</span><span class="na">mock</span><span class="o">(</span><span class="n">Table</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="n">Mockito</span><span class="o">.</span><span class="na">doReturn</span><span class="o">(</span><span class="n">frame</span><span class="o">).</span><span class="na">when</span><span class="o">(</span><span class="n">table</span><span class="o">).</span><span class="na">frame</span><span class="o">();</span>
  <span class="n">Region</span> <span class="n">region</span> <span class="o">=</span> <span class="n">Mockito</span><span class="o">.</span><span class="na">mock</span><span class="o">(</span><span class="n">Region</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="n">Mockito</span><span class="o">.</span><span class="na">doReturn</span><span class="o">(</span><span class="n">table</span><span class="o">).</span><span class="na">when</span><span class="o">(</span><span class="n">region</span><span class="o">).</span><span class="na">table</span><span class="o">(</span><span class="n">Mockito</span><span class="o">.</span><span class="na">anyString</span><span class="o">());</span>
<span class="o">}</span></code></pre></figure><p>And all of this is just a <a href="/2015/05/25/unit-test-scaffolding.html">scaffolding</a> before the actual testing.</p><h2 id="sample-use-case">Sample Use Case</h2><p>Let&#39;s say, you&#39;re developing a project that uses jcabi-dynamo for managing data in <a href="https://aws.amazon.com/dynamodb/">DynamoDB</a>. Your class may look similar to this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Employee</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Region</span> <span class="n">region</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Employee</span><span class="o">(</span><span class="n">String</span> <span class="n">empl</span><span class="o">,</span> <span class="n">Region</span> <span class="n">dynamo</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">empl</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">region</span> <span class="o">=</span> <span class="n">dynamo</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">Integer</span> <span class="nf">salary</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span>
      <span class="k">this</span><span class="o">.</span><span class="na">region</span>
        <span class="o">.</span><span class="na">table</span><span class="o">(</span><span class="s">&quot;employees&quot;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">frame</span><span class="o">()</span>
        <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">)</span>
        <span class="o">.</span><span class="na">iterator</span><span class="o">()</span>
        <span class="o">.</span><span class="na">next</span><span class="o">()</span>
        <span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;salary&quot;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">getN</span><span class="o">()</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>You can imagine how difficult it will be to unit test this class, using Mockito, for example. First, we have to mock the <code>Region</code> interface. Then, we have to mock a <code>Table</code> interface and make sure it is returned by the <code>table()</code> method. Then, we have to mock a <code>Frame</code> interface, etc.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=l6MpCBzwDbg'><div class='box'> <img src='https://i.ytimg.com/vi/l6MpCBzwDbg/mqdefault.jpg' alt='YouTube video #l6MpCBzwDbg'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>What Fake Objects Are For? (webinar #8); 4 November 2015.</div></aside><p>The unit test will be much longer than the class itself. Besides that, its real purpose, which is to test the retrieval of an employee&#39;s salary, will not be obvious to the reader.</p><p>Moreover, when we need to test a similar method of a similar class, we will need to restart this mocking from scratch. Again, multiple lines of code, which will look very similar to what we have already written.</p><h2 id="fake-classes">Fake Classes</h2><p>The solution is to create fake classes and ship them together with real classes. This is what <a href="http://dynamo.jcabi.com">jcabi-dynamo</a> is doing. Just look at its <a href="http://dynamo.jcabi.com/apidocs-0.16.1/index.html">JavaDoc</a>. There is a package called <code>com.jcabi.dynamo.mock</code> that contains only fake classes, suitable only for unit testing.</p><p>Even though their sole purpose is to optimize unit testing, we <a href="/2014/08/19/how-to-release-to-maven-central.html">ship them</a> together with production code, in the same JAR package.</p><p>This is what a test will look like, when a fake class <code>MkRegion</code> is used:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EmployeeTest</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">canFetchSalaryFromDynamoDb</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Region</span> <span class="n">region</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MkRegion</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">H2Data</span><span class="o">().</span><span class="na">with</span><span class="o">(</span>
        <span class="s">&quot;employees&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span><span class="s">&quot;name&quot;</span><span class="o">},</span>
        <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span><span class="s">&quot;salary&quot;</span><span class="o">}</span>
      <span class="o">)</span>
    <span class="o">);</span>
    <span class="n">region</span><span class="o">.</span><span class="na">table</span><span class="o">(</span><span class="s">&quot;employees&quot;</span><span class="o">).</span><span class="na">put</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Attributes</span><span class="o">()</span>
        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">,</span> <span class="s">&quot;Jeff&quot;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="s">&quot;salary&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">AttributeValue</span><span class="o">().</span><span class="na">withN</span><span class="o">(</span><span class="mi">50000</span><span class="o">))</span>
    <span class="o">);</span>
    <span class="n">Employee</span> <span class="n">emp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="s">&quot;Jeff&quot;</span><span class="o">,</span> <span class="n">region</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">emp</span><span class="o">.</span><span class="na">salary</span><span class="o">(),</span> <span class="n">equalTo</span><span class="o">(</span><span class="mi">50000</span><span class="o">));</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This test looks obvious to me. First, we create a fake DynamoDB region, which works on top of <code>H2Data</code> storage (in-memory H2 database). The storage will be ready for a single <code>employees</code> table with a hash key <code>name</code> and a single <code>salary</code> attribute.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=EDKbYVEInMU'><div class='box'> <img src='https://i.ytimg.com/vi/EDKbYVEInMU/mqdefault.jpg' alt='YouTube video #EDKbYVEInMU'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Built-in Fake Objects; 10 November 2016.</div></aside><p>Then, we put a record into the table, with a hash <code>Jeff</code> and a salary <code>50000</code>.</p><p>Finally, we create an instance of class <code>Employee</code> and check how it fetches the salary from DynamoDB.</p><p>I&#39;m currently doing the same thing in almost every open source library I&#39;m working with. I&#39;m creating a collection of fake classes, that simplify testing inside the library and for its users.</p><p>BTW, a great article on the same subject: <a href="http://nedbatchelder.com/blog/201206/tldw_stop_mocking_start_testing.html">tl;dw: Stop mocking, start testing</a> by Ned Batchelder.</p><p>PS. Check this out, on a very similar subject: <a href="/2014/04/18/jcabi-http-server-mocking.html">Mocking of HTTP Server in Java</a>.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/09/23/built-in-fake-objects.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/09/23/built-in-fake-objects.html&amp;text=Built-in+Fake+Objects" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/09/23/built-in-fake-objects.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/09/23/built-in-fake-objects.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/09/23/built-in-fake-objects.html%3F2014-38&amp;title=Built-in+Fake+Objects" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/09/23/built-in-fake-objects.html%3F2014-38&amp;t=Built-in+Fake+Objects" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>While mock objects are perfect instruments for unit testing, mocking through mock frameworks may turn your unit tests into an unmaintainable mess. Thanks to them we often hear that &quot;mocking is bad&quot; and &quot;mocking is evil.&quot;</p><p>The root cause of this complexity is that our objects are too big. They have many methods and these methods return other objects, which also have methods. When we pass a mock version of such an object as a parameter, we should make sure that all of its methods return valid objects.</p><p>This leads to inevitable complexity, which turns unit tests to <a href="https://news.ycombinator.com/item?id=7353767">waste</a> almost impossible to maintain.</p><h2 id="object-hierarchy">Object Hierarchy</h2><p>Take the <code>Region</code> interface from <a href="http://dynamo.jcabi.com">jcabi-dynamo</a> as an example (this snippet and all others in this article are simplified, for the sake of brevity):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Region</span> <span class="o">{</span>
  <span class="n">Table</span> <span class="nf">table</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>Its <code>table()</code> method returns an instance of the <code>Table</code> interface, which has its own methods:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Table</span> <span class="o">{</span>
  <span class="n">Frame</span> <span class="nf">frame</span><span class="o">();</span>
  <span class="n">Item</span> <span class="nf">put</span><span class="o">(</span><span class="n">Attributes</span> <span class="n">attrs</span><span class="o">);</span>
  <span class="n">Region</span> <span class="nf">region</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>Interface <code>Frame</code>, returned by the <code>frame()</code> method, also has its own methods. And so on. In order to create a properly mocked instance of interface <code>Region</code>, one would normally create a dozen other mock objects. With <a href="http://mockito.org">Mockito</a> it will look like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testMe</span><span class="o">()</span> <span class="o">{</span>
  <span class="c1">// many more lines here...</span>
  <span class="n">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="n">Mockito</span><span class="o">.</span><span class="na">mock</span><span class="o">(</span><span class="n">Frame</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="n">Mockito</span><span class="o">.</span><span class="na">doReturn</span><span class="o">(...).</span><span class="na">when</span><span class="o">(</span><span class="n">frame</span><span class="o">).</span><span class="na">iterator</span><span class="o">();</span>
  <span class="n">Table</span> <span class="n">table</span> <span class="o">=</span> <span class="n">Mockito</span><span class="o">.</span><span class="na">mock</span><span class="o">(</span><span class="n">Table</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="n">Mockito</span><span class="o">.</span><span class="na">doReturn</span><span class="o">(</span><span class="n">frame</span><span class="o">).</span><span class="na">when</span><span class="o">(</span><span class="n">table</span><span class="o">).</span><span class="na">frame</span><span class="o">();</span>
  <span class="n">Region</span> <span class="n">region</span> <span class="o">=</span> <span class="n">Mockito</span><span class="o">.</span><span class="na">mock</span><span class="o">(</span><span class="n">Region</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="n">Mockito</span><span class="o">.</span><span class="na">doReturn</span><span class="o">(</span><span class="n">table</span><span class="o">).</span><span class="na">when</span><span class="o">(</span><span class="n">region</span><span class="o">).</span><span class="na">table</span><span class="o">(</span><span class="n">Mockito</span><span class="o">.</span><span class="na">anyString</span><span class="o">());</span>
<span class="o">}</span></code></pre></figure><p>And all of this is just a <a href="/2015/05/25/unit-test-scaffolding.html">scaffolding</a> before the actual testing.</p><h2 id="sample-use-case">Sample Use Case</h2><p>Let&#39;s say, you&#39;re developing a project that uses jcabi-dynamo for managing data in <a href="https://aws.amazon.com/dynamodb/">DynamoDB</a>. Your class may look similar to this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Employee</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Region</span> <span class="n">region</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Employee</span><span class="o">(</span><span class="n">String</span> <span class="n">empl</span><span class="o">,</span> <span class="n">Region</span> <span class="n">dynamo</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">empl</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">region</span> <span class="o">=</span> <span class="n">dynamo</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="n">Integer</span> <span class="nf">salary</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span>
      <span class="k">this</span><span class="o">.</span><span class="na">region</span>
        <span class="o">.</span><span class="na">table</span><span class="o">(</span><span class="s">&quot;employees&quot;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">frame</span><span class="o">()</span>
        <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">)</span>
        <span class="o">.</span><span class="na">iterator</span><span class="o">()</span>
        <span class="o">.</span><span class="na">next</span><span class="o">()</span>
        <span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;salary&quot;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">getN</span><span class="o">()</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>You can imagine how difficult it will be to unit test this class, using Mockito, for example. First, we have to mock the <code>Region</code> interface. Then, we have to mock a <code>Table</code> interface and make sure it is returned by the <code>table()</code> method. Then, we have to mock a <code>Frame</code> interface, etc.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=l6MpCBzwDbg'><div class='box'> <img src='https://i.ytimg.com/vi/l6MpCBzwDbg/mqdefault.jpg' alt='YouTube video #l6MpCBzwDbg'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>What Fake Objects Are For? (webinar #8); 4 November 2015.</div></aside><p>The unit test will be much longer than the class itself. Besides that, its real purpose, which is to test the retrieval of an employee&#39;s salary, will not be obvious to the reader.</p><p>Moreover, when we need to test a similar method of a similar class, we will need to restart this mocking from scratch. Again, multiple lines of code, which will look very similar to what we have already written.</p><h2 id="fake-classes">Fake Classes</h2><p>The solution is to create fake classes and ship them together with real classes. This is what <a href="http://dynamo.jcabi.com">jcabi-dynamo</a> is doing. Just look at its <a href="http://dynamo.jcabi.com/apidocs-0.16.1/index.html">JavaDoc</a>. There is a package called <code>com.jcabi.dynamo.mock</code> that contains only fake classes, suitable only for unit testing.</p><p>Even though their sole purpose is to optimize unit testing, we <a href="/2014/08/19/how-to-release-to-maven-central.html">ship them</a> together with production code, in the same JAR package.</p><p>This is what a test will look like, when a fake class <code>MkRegion</code> is used:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EmployeeTest</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">canFetchSalaryFromDynamoDb</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Region</span> <span class="n">region</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MkRegion</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">H2Data</span><span class="o">().</span><span class="na">with</span><span class="o">(</span>
        <span class="s">&quot;employees&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span><span class="s">&quot;name&quot;</span><span class="o">},</span>
        <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span><span class="s">&quot;salary&quot;</span><span class="o">}</span>
      <span class="o">)</span>
    <span class="o">);</span>
    <span class="n">region</span><span class="o">.</span><span class="na">table</span><span class="o">(</span><span class="s">&quot;employees&quot;</span><span class="o">).</span><span class="na">put</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">Attributes</span><span class="o">()</span>
        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">,</span> <span class="s">&quot;Jeff&quot;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="s">&quot;salary&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">AttributeValue</span><span class="o">().</span><span class="na">withN</span><span class="o">(</span><span class="mi">50000</span><span class="o">))</span>
    <span class="o">);</span>
    <span class="n">Employee</span> <span class="n">emp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="s">&quot;Jeff&quot;</span><span class="o">,</span> <span class="n">region</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">emp</span><span class="o">.</span><span class="na">salary</span><span class="o">(),</span> <span class="n">equalTo</span><span class="o">(</span><span class="mi">50000</span><span class="o">));</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This test looks obvious to me. First, we create a fake DynamoDB region, which works on top of <code>H2Data</code> storage (in-memory H2 database). The storage will be ready for a single <code>employees</code> table with a hash key <code>name</code> and a single <code>salary</code> attribute.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=EDKbYVEInMU'><div class='box'> <img src='https://i.ytimg.com/vi/EDKbYVEInMU/mqdefault.jpg' alt='YouTube video #EDKbYVEInMU'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Built-in Fake Objects; 10 November 2016.</div></aside><p>Then, we put a record into the table, with a hash <code>Jeff</code> and a salary <code>50000</code>.</p><p>Finally, we create an instance of class <code>Employee</code> and check how it fetches the salary from DynamoDB.</p><p>I&#39;m currently doing the same thing in almost every open source library I&#39;m working with. I&#39;m creating a collection of fake classes, that simplify testing inside the library and for its users.</p><p>BTW, a great article on the same subject: <a href="http://nedbatchelder.com/blog/201206/tldw_stop_mocking_start_testing.html">tl;dw: Stop mocking, start testing</a> by Ned Batchelder.</p><p>PS. Check this out, on a very similar subject: <a href="/2014/04/18/jcabi-http-server-mocking.html">Mocking of HTTP Server in Java</a>.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Getters and setters is a terrible anti-pattern in object-oriented programming and should be avoided. This article explains why. " /> <meta name="keywords" content="getters and setters, getters and setters are evil, getters and setters is an anti-pattern, object design, why getters and setters are evil" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-09-16 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Getters/Setters. Evil. Period."/> <meta name="twitter:description" property="og:description" content="Getters and setters is a terrible anti-pattern in object-oriented programming and should be avoided. This article explains why. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/09/16/getters-and-setters-are-evil.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2014/09/16/getters-and-setters-are-evil.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/09/16/getters-and-setters-are-evil.amp.html" /> <title>Getters/Setters. Evil. Period. </title> <meta name='og:image' content='https://www.yegor256.com/images/2014/09/fish-called-wanda.png'/><meta name='twitter:image' content='https://www.yegor256.com/images/2014/09/fish-called-wanda.png'/><meta name='og:image:width' content='1276'/> <meta name='twitter:image:width' content='1276'/><meta name='og:image:height' content='684'/> <meta name='twitter:image:height' content='684'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='A Fish Called Wanda (1988) by Charles Crichton'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/09/16/getters-and-setters-are-evil.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2014/09/16/getters-and-setters-are-evil.html">https://www.yegor256.com/2014/09/16/getters-and-setters-are-evil.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Getters/Setters. Evil. Period.</h1><aside class='book'><a href='http://amzn.to/2qFt4Tn'><img src='/images/books/elegant-objects/cover.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='http://amzn.to/2qFt4Tn'>Section&nbsp;3.5</a><br/> of my book<a href='http://amzn.to/2qFt4Tn'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-09-16T00:00:00+00:00"> 16 September 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/09/16/getters-and-setters-are-evil.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><ul class="unprintable subline"> <li>Translated:</li> <li><a href="http://tbd.kaitoy.xyz/2015/07/22/getters-setters-evil/">Japanese</a></li> <li><a href="http://info.javarush.ru/translation/2014/12/15/%D0%93%D0%B5%D1%82%D1%82%D0%B5%D1%80%D1%8B-%D0%A1%D0%B5%D1%82%D1%82%D0%B5%D1%80%D1%8B-%D0%97%D0%BB%D0%BE-%D0%98-%D1%82%D0%BE%D1%87%D0%BA%D0%B0-.html">Russian</a></li> <li><a href="https://bulldogjob.com/news/215-gettery-i-settery-to-czyste-zlo-kropka">Polish</a></li> <li><a href="mailto:translate@yegor256.com">add yours!</a></li></ul><ul class="subline"> <li>Discussed at:</li> <li><a href="https://www.reddit.com/r/programming/comments/2y7jcb/getterssetters_evil_period/">reddit</a></li></ul><p class="unprintable"><p>There is an old debate, started in 2003 by Allen Holub in this <a href="http://www.javaworld.com/article/2073723/core-java/why-getter-and-setter-methods-are-evil.html">Why getter and setter methods are evil</a> famous article, about whether getters/setters is an <a href="/2016/02/03/design-patterns-and-anti-patterns.html">anti-pattern</a> and should be avoided or if it is something we inevitably need in object-oriented programming. I&#39;ll try to add my two cents to this discussion.</p><p>The gist of the following text is this: getters and setters is a terrible practice and those who use it can&#39;t be excused. Again, to avoid any misunderstanding, I&#39;m not saying that get/set should be avoided when possible. No. I&#39;m saying that you should <em>never</em> have them near your code.</p><figure class='jb_picture'><img itemprop='image' alt='A Fish Called Wanda (1988) by Charles Crichton' src='/images/2014/09/fish-called-wanda.png' longdesc='#36b53fbe'/><figcaption id='36b53fbe'>A Fish Called Wanda (1988) by Charles Crichton</figcaption></figure><p>Arrogant enough to catch your attention? You&#39;ve been using that get/set pattern for 15 years and you&#39;re a respected Java architect? And you don&#39;t want to hear that nonsense from a stranger? Well, I understand your feelings. I felt almost the same when I stumbled upon <a href="http://amzn.to/266oJr4">Object Thinking</a> by David West, the best book about object-oriented programming I&#39;ve read so far. So please. Calm down and try to understand while I try to explain.</p><h2 id="existing-arguments">Existing Arguments</h2><figure class='badge'><a href='http://amzn.to/266oJr4'><img src='https://www.yegor256.com/images/2014/09/object-thinking-by-david-west.png' style='width:96px;max-width:100%;' alt='badge'/></a></figure><p>There are a few arguments against &quot;accessors&quot; (another name for getters <del>and setters</del>), in an object-oriented world. All of them, I think, are not strong enough. Let&#39;s briefly go through them.</p><p><strong>Tell, Don&#39;t Ask</strong> Allen Holub says, &quot;Don&#39;t ask for the information you need to do the work; ask the object that has the information to do the work for you.&quot;</p><p><strong>Violated Encapsulation Principle</strong> An object can be teared apart by other objects, since they are able to inject any new data into it, through setters. The object simply can&#39;t encapsulate its own state safely enough, since anyone can alter it.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=WSgP85kr6eU'><div class='box'> <img src='https://i.ytimg.com/vi/WSgP85kr6eU/mqdefault.jpg' alt='YouTube video #WSgP85kr6eU'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Why Getters-and-Setters Is An Anti-Pattern? (webinar #4); 1 July 2015.</div></aside><p><strong>Exposed Implementation Details</strong> If we can get an object out of another object, we are relying too much on the first object&#39;s implementation details. If tomorrow it will change, say, the type of that result, we have to change our code as well.</p><p>All these justifications are reasonable, but they are missing the main point.</p><h2 id="fundamental-disbelief">Fundamental Disbelief</h2><p>Most programmers believe that an object is a data structure with methods. I&#39;m quoting <a href="http://java.dzone.com/articles/getters-and-setters-are-not">Getters and Setters Are Not Evil</a>, an article by Bozhidar Bozhanov:</p><blockquote><p>But the majority of objects for which people generate getters and setters are simple data holders.</p></blockquote><p>This misconception is the consequence of a huge misunderstanding! Objects are not &quot;simple data holders.&quot; Objects are <em>not</em> data structures with attached methods. This &quot;data holder&quot; concept came to object-oriented programming from procedural languages, especially C and COBOL. I&#39;ll say it again: an object is <em>not</em> a set of data elements and functions that manipulate them. An object is <em>not</em> a data entity.</p><p>What is it then?</p><h2 id="a-ball-and-a-dog">A Ball and A Dog</h2><p>In true object-oriented programming, objects are <a href="/2014/11/20/seven-virtues-of-good-object.html">living creatures</a>, like you and me. They are living organisms, with their own behavior, properties and a life cycle.</p><p>Can a living organism have a setter? Can you &quot;set&quot; a ball to a dog? Not really. But that is exactly what the following piece of software is doing:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Dog</span> <span class="n">dog</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Dog</span><span class="o">();</span>
<span class="n">dog</span><span class="o">.</span><span class="na">setBall</span><span class="o">(</span><span class="k">new</span> <span class="n">Ball</span><span class="o">());</span></code></pre></figure><p>How does that sound?</p><p>Can you get a ball from a dog? Well, you probably can, if she ate it and you&#39;re doing surgery. In that case, yes, we can &quot;get&quot; a ball from a dog. This is what I&#39;m talking about:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Dog</span> <span class="n">dog</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Dog</span><span class="o">();</span>
<span class="n">Ball</span> <span class="n">ball</span> <span class="o">=</span> <span class="n">dog</span><span class="o">.</span><span class="na">getBall</span><span class="o">();</span></code></pre></figure><p>Or an even more ridiculous example:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Dog</span> <span class="n">dog</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Dog</span><span class="o">();</span>
<span class="n">dog</span><span class="o">.</span><span class="na">setWeight</span><span class="o">(</span><span class="s">&quot;23kg&quot;</span><span class="o">);</span></code></pre></figure><p>Can you imagine this transaction in the real world? :)</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=F4N25kZ2zQU'><div class='box'> <img src='https://i.ytimg.com/vi/F4N25kZ2zQU/mqdefault.jpg' alt='YouTube video #F4N25kZ2zQU'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Object Oriented Lies (in Russian with English subtitles); 24 April 2016.</div></aside><p>Does it look similar to what you&#39;re writing every day? If yes, then you&#39;re a procedural programmer. Admit it. And this is what David West has to say about it, on page 30 of his book:</p><blockquote><p>Step one in the transformation of a successful procedural developer into a successful object developer is a lobotomy.</p></blockquote><p>Do you need a lobotomy? Well, I definitely needed one and received it, while reading West&#39;s <a href="http://amzn.to/266oJr4">Object Thinking</a>.</p><h2 id="object-thinking">Object Thinking</h2><p>Start thinking like an object and you will immediately rename those methods. This is what you will probably get:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Dog</span> <span class="n">dog</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Dog</span><span class="o">();</span>
<span class="n">dog</span><span class="o">.</span><span class="na">take</span><span class="o">(</span><span class="k">new</span> <span class="n">Ball</span><span class="o">());</span>
<span class="n">Ball</span> <span class="n">ball</span> <span class="o">=</span> <span class="n">dog</span><span class="o">.</span><span class="na">give</span><span class="o">();</span></code></pre></figure><p>Now, we&#39;re treating the dog as a real animal, who can take a ball from us and can give it back, when we ask. Worth mentioning is that the dog can&#39;t give <code>NULL</code> back. Dogs simply don&#39;t know what <code>NULL</code> is :) Object thinking immediately eliminates <a href="/2014/05/13/why-null-is-bad.html">NULL references</a> from your code.</p><p>Besides that, object thinking will lead to object immutability, like in the &quot;weight of the dog&quot; example. You would re-write that like this instead:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Dog</span> <span class="n">dog</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Dog</span><span class="o">(</span><span class="s">&quot;23kg&quot;</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">weight</span> <span class="o">=</span> <span class="n">dog</span><span class="o">.</span><span class="na">weight</span><span class="o">();</span></code></pre></figure><p>The dog is an immutable living organism, which doesn&#39;t allow anyone from the outside to change her weight, or size, or name, etc. She can tell, on request, her weight or name. There is nothing wrong with public methods that demonstrate requests for certain &quot;insides&quot; of an object. But these methods are not &quot;getters&quot; and they should never have the &quot;get&quot; prefix. We&#39;re not &quot;getting&quot; anything from the dog. We&#39;re not getting her name. We&#39;re asking her to tell us her name. See the difference?</p><p>We&#39;re not talking semantics here, either. We are differentiating the procedural programming mindset from an object-oriented one. In procedural programming, we&#39;re working with data, manipulating them, getting, setting, and deleting when necessary. We&#39;re in charge, and the data is just a passive component. The dog is nothing to us---it&#39;s just a &quot;data holder.&quot; It doesn&#39;t have its own life. We are free to get whatever is necessary from it and set any data into it. This is how C, COBOL, Pascal and many other procedural languages work(ed).</p><p>On the contrary, in a true object-oriented world, we treat objects like living organisms, with their own date of birth and a moment of death---with their own identity and habits, if you wish. We can ask a dog to give us some piece of data (for example, her weight), and she may return us that information. But we always remember that the dog is an active component. She decides what will happen after our request.</p><p>That&#39;s why, <em>it is conceptually incorrect to have any methods starting with <code>set</code> or <code>get</code> in an object</em>. And it&#39;s not about breaking <a href="/2016/11/21/naked-data.html">encapsulation</a>, like many people argue. It is whether you&#39;re thinking like an object or you&#39;re still writing COBOL in Java syntax.</p><p>PS. Yes, you may ask,---what about JavaBeans, JPA, JAXB, and many other Java API-s that rely on the get/set notation? What about Ruby&#39;s built-in <a href="http://ruby-doc.org/docs/ruby-doc-bundle/UsersGuide/rg/accessors.html">feature</a> that simplifies the creation of accessors? Well, all of that is our <a href="/2013/12/29/proto.html">misfortune</a>. It is much easier to stay in a primitive world of procedural COBOL than to truly understand and appreciate the beautiful world of true objects.</p><p>PPS. Forgot to say, yes, dependency injection via setters is also a terrible anti-pattern. About it, in <a href="/2014/10/03/di-containers-are-evil.html">one of the next posts</a> :)</p><p>PPPS. Here is what I&#39;m suggesting to use instead of getters: <a href="/2016/04/05/printers-instead-of-getters.html">printers</a>.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/09/16/getters-and-setters-are-evil.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/09/16/getters-and-setters-are-evil.html&amp;text=Getters%2FSetters.+Evil.+Period." title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/09/16/getters-and-setters-are-evil.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/09/16/getters-and-setters-are-evil.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/09/16/getters-and-setters-are-evil.html%3F2014-37&amp;title=Getters%2FSetters.+Evil.+Period." title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/09/16/getters-and-setters-are-evil.html%3F2014-37&amp;t=Getters%2FSetters.+Evil.+Period." title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>There is an old debate, started in 2003 by Allen Holub in this <a href="http://www.javaworld.com/article/2073723/core-java/why-getter-and-setter-methods-are-evil.html">Why getter and setter methods are evil</a> famous article, about whether getters/setters is an <a href="/2016/02/03/design-patterns-and-anti-patterns.html">anti-pattern</a> and should be avoided or if it is something we inevitably need in object-oriented programming. I&#39;ll try to add my two cents to this discussion.</p><p>The gist of the following text is this: getters and setters is a terrible practice and those who use it can&#39;t be excused. Again, to avoid any misunderstanding, I&#39;m not saying that get/set should be avoided when possible. No. I&#39;m saying that you should <em>never</em> have them near your code.</p><figure class='jb_picture'><img itemprop='image' alt='A Fish Called Wanda (1988) by Charles Crichton' src='/images/2014/09/fish-called-wanda.png' longdesc='#36b53fbe'/><figcaption id='36b53fbe'>A Fish Called Wanda (1988) by Charles Crichton</figcaption></figure><p>Arrogant enough to catch your attention? You&#39;ve been using that get/set pattern for 15 years and you&#39;re a respected Java architect? And you don&#39;t want to hear that nonsense from a stranger? Well, I understand your feelings. I felt almost the same when I stumbled upon <a href="http://amzn.to/266oJr4">Object Thinking</a> by David West, the best book about object-oriented programming I&#39;ve read so far. So please. Calm down and try to understand while I try to explain.</p><h2 id="existing-arguments">Existing Arguments</h2><figure class='badge'><a href='http://amzn.to/266oJr4'><img src='https://www.yegor256.com/images/2014/09/object-thinking-by-david-west.png' style='width:96px;max-width:100%;' alt='badge'/></a></figure><p>There are a few arguments against &quot;accessors&quot; (another name for getters <del>and setters</del>), in an object-oriented world. All of them, I think, are not strong enough. Let&#39;s briefly go through them.</p><p><strong>Tell, Don&#39;t Ask</strong> Allen Holub says, &quot;Don&#39;t ask for the information you need to do the work; ask the object that has the information to do the work for you.&quot;</p><p><strong>Violated Encapsulation Principle</strong> An object can be teared apart by other objects, since they are able to inject any new data into it, through setters. The object simply can&#39;t encapsulate its own state safely enough, since anyone can alter it.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=WSgP85kr6eU'><div class='box'> <img src='https://i.ytimg.com/vi/WSgP85kr6eU/mqdefault.jpg' alt='YouTube video #WSgP85kr6eU'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Why Getters-and-Setters Is An Anti-Pattern? (webinar #4); 1 July 2015.</div></aside><p><strong>Exposed Implementation Details</strong> If we can get an object out of another object, we are relying too much on the first object&#39;s implementation details. If tomorrow it will change, say, the type of that result, we have to change our code as well.</p><p>All these justifications are reasonable, but they are missing the main point.</p><h2 id="fundamental-disbelief">Fundamental Disbelief</h2><p>Most programmers believe that an object is a data structure with methods. I&#39;m quoting <a href="http://java.dzone.com/articles/getters-and-setters-are-not">Getters and Setters Are Not Evil</a>, an article by Bozhidar Bozhanov:</p><blockquote><p>But the majority of objects for which people generate getters and setters are simple data holders.</p></blockquote><p>This misconception is the consequence of a huge misunderstanding! Objects are not &quot;simple data holders.&quot; Objects are <em>not</em> data structures with attached methods. This &quot;data holder&quot; concept came to object-oriented programming from procedural languages, especially C and COBOL. I&#39;ll say it again: an object is <em>not</em> a set of data elements and functions that manipulate them. An object is <em>not</em> a data entity.</p><p>What is it then?</p><h2 id="a-ball-and-a-dog">A Ball and A Dog</h2><p>In true object-oriented programming, objects are <a href="/2014/11/20/seven-virtues-of-good-object.html">living creatures</a>, like you and me. They are living organisms, with their own behavior, properties and a life cycle.</p><p>Can a living organism have a setter? Can you &quot;set&quot; a ball to a dog? Not really. But that is exactly what the following piece of software is doing:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Dog</span> <span class="n">dog</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Dog</span><span class="o">();</span>
<span class="n">dog</span><span class="o">.</span><span class="na">setBall</span><span class="o">(</span><span class="k">new</span> <span class="n">Ball</span><span class="o">());</span></code></pre></figure><p>How does that sound?</p><p>Can you get a ball from a dog? Well, you probably can, if she ate it and you&#39;re doing surgery. In that case, yes, we can &quot;get&quot; a ball from a dog. This is what I&#39;m talking about:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Dog</span> <span class="n">dog</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Dog</span><span class="o">();</span>
<span class="n">Ball</span> <span class="n">ball</span> <span class="o">=</span> <span class="n">dog</span><span class="o">.</span><span class="na">getBall</span><span class="o">();</span></code></pre></figure><p>Or an even more ridiculous example:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Dog</span> <span class="n">dog</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Dog</span><span class="o">();</span>
<span class="n">dog</span><span class="o">.</span><span class="na">setWeight</span><span class="o">(</span><span class="s">&quot;23kg&quot;</span><span class="o">);</span></code></pre></figure><p>Can you imagine this transaction in the real world? :)</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=F4N25kZ2zQU'><div class='box'> <img src='https://i.ytimg.com/vi/F4N25kZ2zQU/mqdefault.jpg' alt='YouTube video #F4N25kZ2zQU'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Object Oriented Lies (in Russian with English subtitles); 24 April 2016.</div></aside><p>Does it look similar to what you&#39;re writing every day? If yes, then you&#39;re a procedural programmer. Admit it. And this is what David West has to say about it, on page 30 of his book:</p><blockquote><p>Step one in the transformation of a successful procedural developer into a successful object developer is a lobotomy.</p></blockquote><p>Do you need a lobotomy? Well, I definitely needed one and received it, while reading West&#39;s <a href="http://amzn.to/266oJr4">Object Thinking</a>.</p><h2 id="object-thinking">Object Thinking</h2><p>Start thinking like an object and you will immediately rename those methods. This is what you will probably get:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Dog</span> <span class="n">dog</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Dog</span><span class="o">();</span>
<span class="n">dog</span><span class="o">.</span><span class="na">take</span><span class="o">(</span><span class="k">new</span> <span class="n">Ball</span><span class="o">());</span>
<span class="n">Ball</span> <span class="n">ball</span> <span class="o">=</span> <span class="n">dog</span><span class="o">.</span><span class="na">give</span><span class="o">();</span></code></pre></figure><p>Now, we&#39;re treating the dog as a real animal, who can take a ball from us and can give it back, when we ask. Worth mentioning is that the dog can&#39;t give <code>NULL</code> back. Dogs simply don&#39;t know what <code>NULL</code> is :) Object thinking immediately eliminates <a href="/2014/05/13/why-null-is-bad.html">NULL references</a> from your code.</p><p>Besides that, object thinking will lead to object immutability, like in the &quot;weight of the dog&quot; example. You would re-write that like this instead:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Dog</span> <span class="n">dog</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Dog</span><span class="o">(</span><span class="s">&quot;23kg&quot;</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">weight</span> <span class="o">=</span> <span class="n">dog</span><span class="o">.</span><span class="na">weight</span><span class="o">();</span></code></pre></figure><p>The dog is an immutable living organism, which doesn&#39;t allow anyone from the outside to change her weight, or size, or name, etc. She can tell, on request, her weight or name. There is nothing wrong with public methods that demonstrate requests for certain &quot;insides&quot; of an object. But these methods are not &quot;getters&quot; and they should never have the &quot;get&quot; prefix. We&#39;re not &quot;getting&quot; anything from the dog. We&#39;re not getting her name. We&#39;re asking her to tell us her name. See the difference?</p><p>We&#39;re not talking semantics here, either. We are differentiating the procedural programming mindset from an object-oriented one. In procedural programming, we&#39;re working with data, manipulating them, getting, setting, and deleting when necessary. We&#39;re in charge, and the data is just a passive component. The dog is nothing to us---it&#39;s just a &quot;data holder.&quot; It doesn&#39;t have its own life. We are free to get whatever is necessary from it and set any data into it. This is how C, COBOL, Pascal and many other procedural languages work(ed).</p><p>On the contrary, in a true object-oriented world, we treat objects like living organisms, with their own date of birth and a moment of death---with their own identity and habits, if you wish. We can ask a dog to give us some piece of data (for example, her weight), and she may return us that information. But we always remember that the dog is an active component. She decides what will happen after our request.</p><p>That&#39;s why, <em>it is conceptually incorrect to have any methods starting with <code>set</code> or <code>get</code> in an object</em>. And it&#39;s not about breaking <a href="/2016/11/21/naked-data.html">encapsulation</a>, like many people argue. It is whether you&#39;re thinking like an object or you&#39;re still writing COBOL in Java syntax.</p><p>PS. Yes, you may ask,---what about JavaBeans, JPA, JAXB, and many other Java API-s that rely on the get/set notation? What about Ruby&#39;s built-in <a href="http://ruby-doc.org/docs/ruby-doc-bundle/UsersGuide/rg/accessors.html">feature</a> that simplifies the creation of accessors? Well, all of that is our <a href="/2013/12/29/proto.html">misfortune</a>. It is much easier to stay in a primitive world of procedural COBOL than to truly understand and appreciate the beautiful world of true objects.</p><p>PPS. Forgot to say, yes, dependency injection via setters is also a terrible anti-pattern. About it, in <a href="/2014/10/03/di-containers-are-evil.html">one of the next posts</a> :)</p><p>PPPS. Here is what I&#39;m suggesting to use instead of getters: <a href="/2016/04/05/printers-instead-of-getters.html">printers</a>.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Many of us have our own custom release/deployment scripts which work just fine. What value can Rultor add to them? " /> <meta name="keywords" content="automate deployment, deployment script, fully automated deployment, how to automate deployment process, release script" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-09-11 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Deployment Script vs. Rultor"/> <meta name="twitter:description" property="og:description" content="Many of us have our own custom release/deployment scripts which work just fine. What value can Rultor add to them? "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.amp.html" /> <title>Deployment Script vs. Rultor </title> <meta name='og:image' content='https://www.yegor256.com/images/2014/09/charlie-and-chocolate-factory-father.png'/><meta name='twitter:image' content='https://www.yegor256.com/images/2014/09/charlie-and-chocolate-factory-father.png'/><meta name='og:image:width' content='850'/> <meta name='twitter:image:width' content='850'/><meta name='og:image:height' content='474'/> <meta name='twitter:image:height' content='474'/><meta name='twitter:card' content='summary'/><meta name='twitter:image:alt' content='Charlie and the Chocolate Factory (2005) by Tim Burton'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html">https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Deployment Script vs. Rultor</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-09-11T00:00:00+00:00"> 11 September 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><figure class='badge'><a href='http://www.rultor.com'><img src='http://doc.rultor.com/images/logo.svg' style='width:100px;max-width:100%;' alt='badge'/></a></figure><p>When I explain how <a href="http://www.rultor.com">Rultor</a> automates deployment/release processes, very often I hear something like:</p><blockquote><p>But I already have a script that deploys everything automatically.</p></blockquote><p>This response is very common, so I decided to summarize my three main arguments for automated Rultor deployment/release processes in one article: 1) isolated docker containers, 2) visibility of logs and 3) security of credentials.</p><p>Read about them and see what Rultor gives you on top of <strong>your existing</strong> deployment script(s).</p><figure class='jb_picture'><img itemprop='image' alt='Charlie and the Chocolate Factory (2005) by Tim Burton' src='/images/2014/09/charlie-and-chocolate-factory-father.png' longdesc='#2ee88f79'/><figcaption id='2ee88f79'>Charlie and the Chocolate Factory (2005) by Tim Burton</figcaption></figure><p>Before we start with the arguments, let me emphasize that Rultor is a useful interface to your custom scripts. When you decide to automate deployment with Rultor, you don&#39;t throw away any of your existing scripts. You just teach Rultor how to call them.</p><h2 id="isolated-docker-containers">Isolated Docker Containers</h2><aside class='youtube'> <a href='https://www.youtube.com/watch?v=NflR7DKwxDY'><div class='box'> <img src='https://i.ytimg.com/vi/NflR7DKwxDY/mqdefault.jpg' alt='YouTube video #NflR7DKwxDY'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Deployment Scripts Are Dead. Meet Rultor.; 26 May 2016.</div></aside><p>The first advantage you get once you start calling your deployment scripts from Rultor is the <a href="/2014/07/29/docker-in-rultor.html">usage of Docker</a>. I&#39;m sure you know what <a href="http://www.docker.io">Docker</a> is, but for those who don&#39;t---it is a manager of virtual Linux &quot;machines.&quot; It&#39;s a command line script that you call when you need to run some script in a new virtual machine (aka &quot;container&quot;). Docker starts the container almost immediately and runs your script. The beauty of Docker is that every container is a perfectly isolated Linux environment, with its own file system, memory, processes, etc.</p><p>When you tell Rultor to run your deployment script, it starts a new Docker container and runs your script there. But what benefit does this give me, you ask?</p><p>The main benefit is that the container gets destroyed right after your script is done. This means that you can do all pre-configuration inside the container without any fear of conflict with your main working platform. Let me give an example.</p><p>I&#39;m developing on MacBook, where I install and remove packages which I need for development. At the same time, I have a project that, in order to be deployed, requires PHP 5.3, MySQL 5.6, Phing, PHPUnit, PHPCS and xdebug. Every MacOS version needs to be configured specifically to get these applications up and running, and it&#39;s a time-consuming job.</p><p>I can change laptops, and I can change MacOS versions, but the project stays the same. It still requires the same set of packages in order to run its deployment script successfully. And the project is not in active development any more. I simply don&#39;t need these packages for my day-to-day work, since I&#39;m working with Java more now. But, when I need to make a minor fix to that PHP project and deploy it, I have to install all the required PHP packages and configure them. Only after that can I deploy that minor fix.</p><p>It is annoying, to say the least.</p><p>Docker gives me the ability to automate all of this together. My <strong>existing</strong> deployment script will get a preamble, which will install and configure all necessary PHP-related packages in a clean Ubuntu container. This preamble will be executed on every run of my deployment script, <strong>inside</strong> a Docker container. For example, it may look like this:</p><p>My deployment script looked like this before I started to use Rultor:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span><span class="ch">#!/bin/bash</span>
phing <span class="nb">test</span>
git ftp push --user <span class="s2">&quot;..&quot;</span> <span class="se">&lt;/span&gt;
  --passwd <span class="s2">&quot;..&quot;</span> <span class="se">&lt;/span&gt;
  --syncroot php/src <span class="se">&lt;/span&gt;
  <a href="ftp://ftp.example.com/">ftp://ftp.example.com/</a></code></pre></figure><p>Just two lines. The first one is a full run of unit tests. The second one is an FTP deployment to the production server. Very simple. But this script will only work if PHP 5.3, MySQL, Phing, xdebug, PHPCS and PHPUnit are installed. Again, it&#39;s a lot of work to install and configure them every time I upgrade my MacOS or change a laptop.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=_61CuGhyv-o'><div class='box'> <img src='https://i.ytimg.com/vi/_61CuGhyv-o/mqdefault.jpg' alt='YouTube video #_61CuGhyv-o'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Practical Example of a One-Click Release; 15 November 2016.</div></aside><p>Needless to say, that if/when someone joins the project and tries to run my scripts, he/she will have to do this pre-installation work again.</p><p>So, here is a new script, which I&#39;m using now. It is being executed inside a new Docker container, every time:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span><span class="ch">#!/bin/bash</span>
<span class="c1"># First, we install all prerequisites</span>
sudo apt-get install -y php5 php5-mysql mysql
sudo apt-get install php-pear
sudo pear channel-discover pear.phpunit.de
sudo pear install phpunit/PHPUnit
sudo pear install PHP_CodeSniffer
sudo pecl install xdebug
sudo pear channel-discover pear.phing.info
sudo pear install phing/phing
<span class="c1"># And now the same script I had before</span>
phing <span class="nb">test</span>
git ftp push --user <span class="s2">&quot;..&quot;</span> <span class="se">&lt;/span&gt;
  --passwd <span class="s2">&quot;..&quot;</span> <span class="se">&lt;/span&gt;
  --syncroot php/src <span class="se">&lt;/span&gt;
  <a href="ftp://ftp.example.com/">ftp://ftp.example.com/</a></code></pre></figure><p>Obviously, running this script on my MacBook (without virtualization) would cause a lot of trouble. Well, I don&#39;t even have <code>apt-get</code> here :)</p><p>Thus, the first benefit that Rultor gives you is an isolation of your deployment script in its own virtual environment. We have this mostly thanks to Docker.</p><h2 id="visibility-of-logs">Visibility of Logs</h2><p>Traditionally, we keep deployment scripts in some <code>~/deploy</code> directory and run them with a magic set of parameters. In a small project, you do this yourself and this directory is on your own laptop. In a bigger project, there is a &quot;deployment&quot; server, that has that magic directory with a set of scripts that can be executed only by a few trusted senior developers. I&#39;ve seen this setup many times.</p><p>The biggest issue here is traceability. It&#39;s almost impossible to find out who deployed what and why some particular deployment failed. The senior deployment gurus simply SSH to the server and run those magic scripts with magic parameters. Logs are usually lost and problem tracking is very difficult or impossible.</p><p>Rultor offers something different. With Rultor, there is no SSH access to deployment scripts any more. All scripts stay in the <code>.rultor.yml</code> configuration file, and you start them by posting messages in your issue tracking system (for example GitHub, JIRA or Trac). Rultor runs the script and publishes its full log right to your ticket. The log stays with your project forever. You can always get back to the ticket you were working with and check why deployment failed and what instructions were actually executed.</p><p>For example, check out this GitHub issue, where I was deploying a new version of Rultor itself, and failed a few times: <a href="https://github.com/yegor256/rultor/issues/563">yegor256/rultor#563</a>. All my failed attempts are protocolled. I can always get back to them and investigate. For a big project this information is vital.</p><p>Thus, the second benefit of Rultor versus a standalone deployment script is visibility of every single operation.</p><h2 id="security-of-credentials">Security of Credentials</h2><p>When you have a custom script sitting in your laptop or in that secret team deployment server, your production credentials stay close to it. There is just no other way. If your software works with a database, it has to know login credentials (user name, password, DB name, port number, etc.). Well, in the worst case, some people just hard code that information right into the source code. We aren&#39;t even going to discuss this case, that&#39;s how bad it is.</p><p>But let&#39;s say you separate your DB credentials from the source code. You will have something like a <code>db.properties</code> or <code>db.ini</code> file, which will be attached to the application right before deployment. You can also keep that file directly in the production server, which is even better, but not always possible, especially with PaaS deployments, for example.</p><p>A similar problem exists with deployments of artifacts to repositories. Say, you&#39;re regularly deploying to RubyGems.org. Your <code>~/.gem/credentials</code> will contain your secret API key.</p><p>So, very often, your deployment scripts are accompanied by some files with sensitive and secure information. And these files have this information in a plain, open format. No encryption, no protection. Just user names, passwords, codes and tokens in plain text.</p><p>Why is this bad? Well, for a single developer with a single laptop this doesn&#39;t sound like a problem. Although, I don&#39;t like the idea of losing a laptop somewhere in an airport with all credentials open and ready to be used. You may argue that there are disc protection tools, like FileVault for MacOS or BestCrypt for Windows. Yes, maybe.</p><p>But let&#39;s see what happens when we have a team of developers, working together and sharing those deployment scripts <strong>and</strong> files with credentials. Once you give access to your deployment scripts to a new member of the team, you have to share all that sensitive data. There is just no way around it. In order to use the scripts he/she has to be able to open files with credentials.</p><p>This is a problem, if you care about the security of your data.</p><p>Rultor solves this problem by offering an on-the-fly GPG decryption of your sensitive data, right before they are used by your deployment scripts. In the <code>.rultor.yml</code> configuration file you just say:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>decrypt:
  db.ini: &quot;repo/db.ini.asc&quot;
deploy:
  script:
    ftp put db.ini production</code></pre></figure><p>Then, you encrypt your <code>db.ini</code> using a Rultor GPG key, and fearlessly commit <code>db.ini.asc</code> to the repository. Nobody will be able to open and read that file, except the Rultor server itself, right before running the deployment script.</p><p>Thus, the third benefit of Rultor versus a standalone deployment script is proper security of sensitive data.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html&amp;text=Deployment+Script+vs.+Rultor" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html%3F2014-36&amp;title=Deployment+Script+vs.+Rultor" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html%3F2014-36&amp;t=Deployment+Script+vs.+Rultor" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div > <figure class='badge'><a href='http://www.rultor.com'><img src='http://doc.rultor.com/images/logo.svg' style='width:100px;max-width:100%;' alt='badge'/></a></figure><p>When I explain how <a href="http://www.rultor.com">Rultor</a> automates deployment/release processes, very often I hear something like:</p><blockquote><p>But I already have a script that deploys everything automatically.</p></blockquote><p>This response is very common, so I decided to summarize my three main arguments for automated Rultor deployment/release processes in one article: 1) isolated docker containers, 2) visibility of logs and 3) security of credentials.</p><p>Read about them and see what Rultor gives you on top of <strong>your existing</strong> deployment script(s).</p><figure class='jb_picture'><img itemprop='image' alt='Charlie and the Chocolate Factory (2005) by Tim Burton' src='/images/2014/09/charlie-and-chocolate-factory-father.png' longdesc='#2ee88f79'/><figcaption id='2ee88f79'>Charlie and the Chocolate Factory (2005) by Tim Burton</figcaption></figure><p>Before we start with the arguments, let me emphasize that Rultor is a useful interface to your custom scripts. When you decide to automate deployment with Rultor, you don&#39;t throw away any of your existing scripts. You just teach Rultor how to call them.</p><h2 id="isolated-docker-containers">Isolated Docker Containers</h2><aside class='youtube'> <a href='https://www.youtube.com/watch?v=NflR7DKwxDY'><div class='box'> <img src='https://i.ytimg.com/vi/NflR7DKwxDY/mqdefault.jpg' alt='YouTube video #NflR7DKwxDY'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Deployment Scripts Are Dead. Meet Rultor.; 26 May 2016.</div></aside><p>The first advantage you get once you start calling your deployment scripts from Rultor is the <a href="/2014/07/29/docker-in-rultor.html">usage of Docker</a>. I&#39;m sure you know what <a href="http://www.docker.io">Docker</a> is, but for those who don&#39;t---it is a manager of virtual Linux &quot;machines.&quot; It&#39;s a command line script that you call when you need to run some script in a new virtual machine (aka &quot;container&quot;). Docker starts the container almost immediately and runs your script. The beauty of Docker is that every container is a perfectly isolated Linux environment, with its own file system, memory, processes, etc.</p><p>When you tell Rultor to run your deployment script, it starts a new Docker container and runs your script there. But what benefit does this give me, you ask?</p><p>The main benefit is that the container gets destroyed right after your script is done. This means that you can do all pre-configuration inside the container without any fear of conflict with your main working platform. Let me give an example.</p><p>I&#39;m developing on MacBook, where I install and remove packages which I need for development. At the same time, I have a project that, in order to be deployed, requires PHP 5.3, MySQL 5.6, Phing, PHPUnit, PHPCS and xdebug. Every MacOS version needs to be configured specifically to get these applications up and running, and it&#39;s a time-consuming job.</p><p>I can change laptops, and I can change MacOS versions, but the project stays the same. It still requires the same set of packages in order to run its deployment script successfully. And the project is not in active development any more. I simply don&#39;t need these packages for my day-to-day work, since I&#39;m working with Java more now. But, when I need to make a minor fix to that PHP project and deploy it, I have to install all the required PHP packages and configure them. Only after that can I deploy that minor fix.</p><p>It is annoying, to say the least.</p><p>Docker gives me the ability to automate all of this together. My <strong>existing</strong> deployment script will get a preamble, which will install and configure all necessary PHP-related packages in a clean Ubuntu container. This preamble will be executed on every run of my deployment script, <strong>inside</strong> a Docker container. For example, it may look like this:</p><p>My deployment script looked like this before I started to use Rultor:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span><span class="ch">#!/bin/bash</span>
phing <span class="nb">test</span>
git ftp push --user <span class="s2">&quot;..&quot;</span> <span class="se">&lt;/span&gt;
  --passwd <span class="s2">&quot;..&quot;</span> <span class="se">&lt;/span&gt;
  --syncroot php/src <span class="se">&lt;/span&gt;
  <a href="ftp://ftp.example.com/">ftp://ftp.example.com/</a></code></pre></figure><p>Just two lines. The first one is a full run of unit tests. The second one is an FTP deployment to the production server. Very simple. But this script will only work if PHP 5.3, MySQL, Phing, xdebug, PHPCS and PHPUnit are installed. Again, it&#39;s a lot of work to install and configure them every time I upgrade my MacOS or change a laptop.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=_61CuGhyv-o'><div class='box'> <img src='https://i.ytimg.com/vi/_61CuGhyv-o/mqdefault.jpg' alt='YouTube video #_61CuGhyv-o'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Practical Example of a One-Click Release; 15 November 2016.</div></aside><p>Needless to say, that if/when someone joins the project and tries to run my scripts, he/she will have to do this pre-installation work again.</p><p>So, here is a new script, which I&#39;m using now. It is being executed inside a new Docker container, every time:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span><span class="ch">#!/bin/bash</span>
<span class="c1"># First, we install all prerequisites</span>
sudo apt-get install -y php5 php5-mysql mysql
sudo apt-get install php-pear
sudo pear channel-discover pear.phpunit.de
sudo pear install phpunit/PHPUnit
sudo pear install PHP_CodeSniffer
sudo pecl install xdebug
sudo pear channel-discover pear.phing.info
sudo pear install phing/phing
<span class="c1"># And now the same script I had before</span>
phing <span class="nb">test</span>
git ftp push --user <span class="s2">&quot;..&quot;</span> <span class="se">&lt;/span&gt;
  --passwd <span class="s2">&quot;..&quot;</span> <span class="se">&lt;/span&gt;
  --syncroot php/src <span class="se">&lt;/span&gt;
  <a href="ftp://ftp.example.com/">ftp://ftp.example.com/</a></code></pre></figure><p>Obviously, running this script on my MacBook (without virtualization) would cause a lot of trouble. Well, I don&#39;t even have <code>apt-get</code> here :)</p><p>Thus, the first benefit that Rultor gives you is an isolation of your deployment script in its own virtual environment. We have this mostly thanks to Docker.</p><h2 id="visibility-of-logs">Visibility of Logs</h2><p>Traditionally, we keep deployment scripts in some <code>~/deploy</code> directory and run them with a magic set of parameters. In a small project, you do this yourself and this directory is on your own laptop. In a bigger project, there is a &quot;deployment&quot; server, that has that magic directory with a set of scripts that can be executed only by a few trusted senior developers. I&#39;ve seen this setup many times.</p><p>The biggest issue here is traceability. It&#39;s almost impossible to find out who deployed what and why some particular deployment failed. The senior deployment gurus simply SSH to the server and run those magic scripts with magic parameters. Logs are usually lost and problem tracking is very difficult or impossible.</p><p>Rultor offers something different. With Rultor, there is no SSH access to deployment scripts any more. All scripts stay in the <code>.rultor.yml</code> configuration file, and you start them by posting messages in your issue tracking system (for example GitHub, JIRA or Trac). Rultor runs the script and publishes its full log right to your ticket. The log stays with your project forever. You can always get back to the ticket you were working with and check why deployment failed and what instructions were actually executed.</p><p>For example, check out this GitHub issue, where I was deploying a new version of Rultor itself, and failed a few times: <a href="https://github.com/yegor256/rultor/issues/563">yegor256/rultor#563</a>. All my failed attempts are protocolled. I can always get back to them and investigate. For a big project this information is vital.</p><p>Thus, the second benefit of Rultor versus a standalone deployment script is visibility of every single operation.</p><h2 id="security-of-credentials">Security of Credentials</h2><p>When you have a custom script sitting in your laptop or in that secret team deployment server, your production credentials stay close to it. There is just no other way. If your software works with a database, it has to know login credentials (user name, password, DB name, port number, etc.). Well, in the worst case, some people just hard code that information right into the source code. We aren&#39;t even going to discuss this case, that&#39;s how bad it is.</p><p>But let&#39;s say you separate your DB credentials from the source code. You will have something like a <code>db.properties</code> or <code>db.ini</code> file, which will be attached to the application right before deployment. You can also keep that file directly in the production server, which is even better, but not always possible, especially with PaaS deployments, for example.</p><p>A similar problem exists with deployments of artifacts to repositories. Say, you&#39;re regularly deploying to RubyGems.org. Your <code>~/.gem/credentials</code> will contain your secret API key.</p><p>So, very often, your deployment scripts are accompanied by some files with sensitive and secure information. And these files have this information in a plain, open format. No encryption, no protection. Just user names, passwords, codes and tokens in plain text.</p><p>Why is this bad? Well, for a single developer with a single laptop this doesn&#39;t sound like a problem. Although, I don&#39;t like the idea of losing a laptop somewhere in an airport with all credentials open and ready to be used. You may argue that there are disc protection tools, like FileVault for MacOS or BestCrypt for Windows. Yes, maybe.</p><p>But let&#39;s see what happens when we have a team of developers, working together and sharing those deployment scripts <strong>and</strong> files with credentials. Once you give access to your deployment scripts to a new member of the team, you have to share all that sensitive data. There is just no way around it. In order to use the scripts he/she has to be able to open files with credentials.</p><p>This is a problem, if you care about the security of your data.</p><p>Rultor solves this problem by offering an on-the-fly GPG decryption of your sensitive data, right before they are used by your deployment scripts. In the <code>.rultor.yml</code> configuration file you just say:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>decrypt:
  db.ini: &quot;repo/db.ini.asc&quot;
deploy:
  script:
    ftp put db.ini production</code></pre></figure><p>Then, you encrypt your <code>db.ini</code> using a Rultor GPG key, and fearlessly commit <code>db.ini.asc</code> to the repository. Nobody will be able to open and read that file, except the Rultor server itself, right before running the deployment script.</p><p>Thus, the third benefit of Rultor versus a standalone deployment script is proper security of sensitive data.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="The way RESTful API-s are designed perfectly fits into the concept of web browsing, with a few minimal alterations " /> <meta name="keywords" content="browsable restful api, how to build restful api, restful api, restful api in browser, restful web browsing" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-09-09 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="RESTful API and a Web Site in the Same URL"/> <meta name="twitter:description" property="og:description" content="The way RESTful API-s are designed perfectly fits into the concept of web browsing, with a few minimal alterations "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/09/09/restful-web-sites.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2014/09/09/restful-web-sites.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/09/09/restful-web-sites.amp.html" /> <title>RESTful API and a Web Site in the Same URL </title> <meta name='og:image' content='https://www.yegor256.com/images/2014/09/good_bad_weird.png'/><meta name='twitter:image' content='https://www.yegor256.com/images/2014/09/good_bad_weird.png'/><meta name='og:image:width' content='1280'/> <meta name='twitter:image:width' content='1280'/><meta name='og:image:height' content='640'/> <meta name='twitter:image:height' content='640'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='The Good, the Bad, The Wierd (2008) by Kim Jee-woon'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/09/09/restful-web-sites.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2014/09/09/restful-web-sites.html">https://www.yegor256.com/2014/09/09/restful-web-sites.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">RESTful API and a Web Site in the Same URL</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-09-09T00:00:00+00:00"> 9 September 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/09/09/restful-web-sites.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>Look at GitHub RESTful API, for example. To get information about a repository you should make a GET request to <a href="https://api.github.com/repos/yegor256/rultor">api.github.com/repos/yegor256/rultor</a>. In response, you will get a JSON document with all the details of the <code>yegor256/rultor</code> repository. Try it, the URL doesn&#39;t require any authentication.</p><p>To open the same repository in a nice HTML+CSS page, you should use a different URL: <a href="https://github.com/yegor256/rultor">github.com/yegor256/rultor</a>. The URL is different, the server-side is definitely different, but the nature of the data is exactly the same. The only thing that changes is a representation layer.</p><p>In the first case, we get JSON; in the second---HTML.</p><p>How about combining them? How about using the same URL and the same server-side processing mechanism for both of them? How about shifting the whole rendering task to the client-side (the browser) and letting the server work solely with the data?</p><figure class='jb_picture'><img itemprop='image' alt='The Good, the Bad, The Wierd (2008) by Kim Jee-woon' src='/images/2014/09/good_bad_weird.png' longdesc='#a51703b7'/><figcaption id='a51703b7'>The Good, the Bad, The Wierd (2008) by Kim Jee-woon</figcaption></figure><p><a href="/2015/02/02/xsl-transformations-in-java.html">XSLT</a> is the technology that can help us do this. In <a href="/2014/06/25/xml-and-xslt-in-browser.html">XML+XSLT in a Browser</a> I explained briefly how it works in a browser. In a nutshell, the server returns an XML with some data and a link to the XSL stylesheet. The stylesheet, being executed in a browser, converts XML to HTML. XSL language is as powerful as any other rendering engine, like JSP, JSF, Tiles, or what have you. Actually, it is much more powerful.</p><p>Using this approach we literally remove the entire rendering layer (&quot;View&quot; in the <a href="/2016/12/13/mvc-vs-oop.html">MVC paradigm</a>) from the server and move it to the browser.</p><p>If we can make it possible, the web server will expose just a RESTful API, and every response page will have an XSL stylesheet attached. What do we gain? We&#39;ll discuss later, at the end of the post. Now, let&#39;s see what problems we will face:</p><ol> <li><p>JSON doesn&#39;t have a rendering layer. There is no such thing as <a href="/2015/11/16/json-vs-xml.html">XSLT</a> for JSON. So, we will have to forget about JSON and stay with XML only. For me, this sounds perfectly all right. Others don&#39;t like XML and prefer to work with JSON only. Never understood them :)</p></li> <li><p>XSLT 2.0 is not supported by all browsers. Even XSLT 1.0 is only supported by some of them. For example, Internet Explorer 8 doesn&#39;t support XSLT at all.</p></li> <li><p>Browsers support only <code>GET</code> and <code>POST</code> HTTP methods, while traditional RESTful API-s exploit also, at least, <code>PUT</code> and <code>DELETE</code>.</p></li> </ol><p>The first problem is not really a problem. It&#39;s just a matter of taste (and level of education). The last two problems are much more serious. Let&#39;s discuss them.</p><h2 id="xsl-transformation-on-the-server">XSL Transformation on the Server</h2><p>XSLT is not supported by some browsers. How do we solve this?</p><p>I think that the best approach is to parse the <code>User-Agent</code> HTTP header in every request and make a guess, whether this particular version of the browser supports XSLT or not. It&#39;s not so difficult to do, since this compatibility information is public.</p><p>If the browser doesn&#39;t support XSLT, we can do the transformation on the server side. We already have the XML with data, generated by the server, and we already have the XSL attached to it. All we need to do is to apply the latter to the former and obtain an HTML page. Then, we return the HTML to the browser.</p><p>Besides that, we can also pay attention to the <code>Accept</code> header. If it is set to <code>application/xml</code> or <code>text/xml</code>, we return XML, no matter what <code>User-Agent</code> is saying. This means, basically, that some API client is talking to us, not a browser. And this client is not interested in HTML, but in pure data in XML format.</p><h2 id="post-instead-of-put">POST Instead of PUT</h2><p>There is no workaround for this. Browsers don&#39;t know anything about <code>PUT</code> or <code>DELETE</code>. So, we should also forget them in our RESTful API-s. We should design our API using only two methods: <code>GET</code> and <code>POST</code>. Is this even possible? Yes. Why not? It won&#39;t look as fancy as with all six methods (some API-s also use <code>OPTIONS</code> and <code>HEAD</code>), but it will work.</p><h2 id="what-do-we-gain">What Do We Gain?</h2><p>OK, here is the question---why do we need this? What&#39;s wrong with the way most people work now? Why can&#39;t we make a web site separate from the API? What benefits do we get if we combine them?</p><p>I&#39;ve been combining them in all web applications I&#39;ve worked with since 2011. And the biggest advantage I&#39;m experiencing is avoiding code duplication.</p><p>It is obvious that in the server we don&#39;t duplicate controllers (in the case of MVC). We have one layer of controllers, and they control both the API and the web site (since they are one thing now).</p><p>Avoiding code duplication is a very important achievement. Moreover, I believe that it is the most important target for any software project.</p><p>These small web apps work exactly as explained above: <a href="http://www.s3auth.com">s3auth.com</a>, <a href="http://www.stateful.co">stateful.co</a>, <a href="http://www.bibrarian.com">bibrarian.com</a>. They are all open source, and you can see their source code in GitHub.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/09/09/restful-web-sites.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/09/09/restful-web-sites.html&amp;text=RESTful+API+and+a+Web+Site+in+the+Same+URL" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/09/09/restful-web-sites.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/09/09/restful-web-sites.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/09/09/restful-web-sites.html%3F2014-36&amp;title=RESTful+API+and+a+Web+Site+in+the+Same+URL" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/09/09/restful-web-sites.html%3F2014-36&amp;t=RESTful+API+and+a+Web+Site+in+the+Same+URL" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>Look at GitHub RESTful API, for example. To get information about a repository you should make a GET request to <a href="https://api.github.com/repos/yegor256/rultor">api.github.com/repos/yegor256/rultor</a>. In response, you will get a JSON document with all the details of the <code>yegor256/rultor</code> repository. Try it, the URL doesn&#39;t require any authentication.</p><p>To open the same repository in a nice HTML+CSS page, you should use a different URL: <a href="https://github.com/yegor256/rultor">github.com/yegor256/rultor</a>. The URL is different, the server-side is definitely different, but the nature of the data is exactly the same. The only thing that changes is a representation layer.</p><p>In the first case, we get JSON; in the second---HTML.</p><p>How about combining them? How about using the same URL and the same server-side processing mechanism for both of them? How about shifting the whole rendering task to the client-side (the browser) and letting the server work solely with the data?</p><figure class='jb_picture'><img itemprop='image' alt='The Good, the Bad, The Wierd (2008) by Kim Jee-woon' src='/images/2014/09/good_bad_weird.png' longdesc='#a51703b7'/><figcaption id='a51703b7'>The Good, the Bad, The Wierd (2008) by Kim Jee-woon</figcaption></figure><p><a href="/2015/02/02/xsl-transformations-in-java.html">XSLT</a> is the technology that can help us do this. In <a href="/2014/06/25/xml-and-xslt-in-browser.html">XML+XSLT in a Browser</a> I explained briefly how it works in a browser. In a nutshell, the server returns an XML with some data and a link to the XSL stylesheet. The stylesheet, being executed in a browser, converts XML to HTML. XSL language is as powerful as any other rendering engine, like JSP, JSF, Tiles, or what have you. Actually, it is much more powerful.</p><p>Using this approach we literally remove the entire rendering layer (&quot;View&quot; in the <a href="/2016/12/13/mvc-vs-oop.html">MVC paradigm</a>) from the server and move it to the browser.</p><p>If we can make it possible, the web server will expose just a RESTful API, and every response page will have an XSL stylesheet attached. What do we gain? We&#39;ll discuss later, at the end of the post. Now, let&#39;s see what problems we will face:</p><ol> <li><p>JSON doesn&#39;t have a rendering layer. There is no such thing as <a href="/2015/11/16/json-vs-xml.html">XSLT</a> for JSON. So, we will have to forget about JSON and stay with XML only. For me, this sounds perfectly all right. Others don&#39;t like XML and prefer to work with JSON only. Never understood them :)</p></li> <li><p>XSLT 2.0 is not supported by all browsers. Even XSLT 1.0 is only supported by some of them. For example, Internet Explorer 8 doesn&#39;t support XSLT at all.</p></li> <li><p>Browsers support only <code>GET</code> and <code>POST</code> HTTP methods, while traditional RESTful API-s exploit also, at least, <code>PUT</code> and <code>DELETE</code>.</p></li> </ol><p>The first problem is not really a problem. It&#39;s just a matter of taste (and level of education). The last two problems are much more serious. Let&#39;s discuss them.</p><h2 id="xsl-transformation-on-the-server">XSL Transformation on the Server</h2><p>XSLT is not supported by some browsers. How do we solve this?</p><p>I think that the best approach is to parse the <code>User-Agent</code> HTTP header in every request and make a guess, whether this particular version of the browser supports XSLT or not. It&#39;s not so difficult to do, since this compatibility information is public.</p><p>If the browser doesn&#39;t support XSLT, we can do the transformation on the server side. We already have the XML with data, generated by the server, and we already have the XSL attached to it. All we need to do is to apply the latter to the former and obtain an HTML page. Then, we return the HTML to the browser.</p><p>Besides that, we can also pay attention to the <code>Accept</code> header. If it is set to <code>application/xml</code> or <code>text/xml</code>, we return XML, no matter what <code>User-Agent</code> is saying. This means, basically, that some API client is talking to us, not a browser. And this client is not interested in HTML, but in pure data in XML format.</p><h2 id="post-instead-of-put">POST Instead of PUT</h2><p>There is no workaround for this. Browsers don&#39;t know anything about <code>PUT</code> or <code>DELETE</code>. So, we should also forget them in our RESTful API-s. We should design our API using only two methods: <code>GET</code> and <code>POST</code>. Is this even possible? Yes. Why not? It won&#39;t look as fancy as with all six methods (some API-s also use <code>OPTIONS</code> and <code>HEAD</code>), but it will work.</p><h2 id="what-do-we-gain">What Do We Gain?</h2><p>OK, here is the question---why do we need this? What&#39;s wrong with the way most people work now? Why can&#39;t we make a web site separate from the API? What benefits do we get if we combine them?</p><p>I&#39;ve been combining them in all web applications I&#39;ve worked with since 2011. And the biggest advantage I&#39;m experiencing is avoiding code duplication.</p><p>It is obvious that in the server we don&#39;t duplicate controllers (in the case of MVC). We have one layer of controllers, and they control both the API and the web site (since they are one thing now).</p><p>Avoiding code duplication is a very important achievement. Moreover, I believe that it is the most important target for any software project.</p><p>These small web apps work exactly as explained above: <a href="http://www.s3auth.com">s3auth.com</a>, <a href="http://www.stateful.co">stateful.co</a>, <a href="http://www.bibrarian.com">bibrarian.com</a>. They are all open source, and you can see their source code in GitHub.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="jcabi-ssh is a simple Java SSH client that wraps jsch library and makes its usage more object-oriented and convenient " /> <meta name="keywords" content="java ssh, java ssh client, open source ssh for java, openssh for java, ssh libraries for java, ssh library for java, ssh tunneling for java" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-09-02 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Simple Java SSH Client"/> <meta name="twitter:description" property="og:description" content="jcabi-ssh is a simple Java SSH client that wraps jsch library and makes its usage more object-oriented and convenient "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/09/02/java-ssh-client.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2014/09/02/java-ssh-client.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/09/02/java-ssh-client.amp.html" /> <title>Simple Java SSH Client </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/09/02/java-ssh-client.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2014/09/02/java-ssh-client.html">https://www.yegor256.com/2014/09/02/java-ssh-client.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Simple Java SSH Client</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-09-02T00:00:00+00:00"> 2 September 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/09/02/java-ssh-client.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>An execution of a shell command via SSH can be done in Java, in just a few lines, using <a href="http://ssh.jcabi.com"><code>jcabi-ssh</code></a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">String</span> <span class="n">hello</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Shell</span><span class="o">.</span><span class="na">Plain</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">SSH</span><span class="o">(</span>
    <span class="s">&quot;ssh.example.com&quot;</span><span class="o">,</span> <span class="mi">22</span><span class="o">,</span>
    <span class="s">&quot;yegor&quot;</span><span class="o">,</span> <span class="s">&quot;-----BEGIN RSA PRIVATE KEY-----...&quot;</span>
  <span class="o">)</span>
<span class="o">).</span><span class="na">exec</span><span class="o">(</span><span class="s">&quot;echo &#39;Hello, world!&#39;&quot;</span><span class="o">);</span></code></pre></figure><p><a href="http://ssh.jcabi.com"><code>jcabi-ssh</code></a> is a convenient wrapper of <a href="http://www.jcraft.com/jsch/"><code>JSch</code></a>, a well-known pure Java implementation of SSH2.</p><p>Here is a more complex scenario, where I upload a file via SSH and then read back its grepped content:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>Shell shell = new SSH(
  &quot;ssh.example.com&quot;, 22,
  &quot;yegor&quot;, &quot;-----BEGIN RSA PRIVATE KEY-----...&quot;
);
File file = new File(&quot;/tmp/data.txt&quot;);
new Shell.Safe(shell).exec(
  &quot;cat &gt; d.txt <span class="err">&amp;&amp;</span> grep &#39;some text&#39; d.txt&quot;,
  new FileInputStream(file),
  Logger.stream(Level.INFO, this),
  Logger.stream(Level.WARNING, this)
);</code></pre></figure><p>Class <code>SSH</code>, which implements interface <code>Shell</code>, has only one method, <code>exec</code>. This method accepts four arguments:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>interface Shell {
  int exec(
    String cmd, InputStream stdin,
    OutputStream stdout, OutputStream stderr
  );
}</code></pre></figure><p>I think it&#39;s obvious what these arguments are about.</p><p>There are also a few convenient decorators that make it easier to operate with simple commands.</p><h2 id="shell-safe">Shell.Safe</h2><p><code>Shell.Safe</code> <a href="/2017/01/31/decorating-envelopes.html">decorates</a> an instance of <code>Shell</code> and <a href="/2015/12/01/rethrow-exceptions.html">throws</a> an exception if the <code>exec</code> exit code is not equal to zero. This may be very useful when you want to make sure that your command executed successfully, but don&#39;t want to duplicate <code>if/throw</code> in many places of your code.</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>Shell ssh = new Shell.Safe(
  new SSH(
    &quot;ssh.example.com&quot;, 22,
    &quot;yegor&quot;, &quot;-----BEGIN RSA PRIVATE KEY-----...&quot;
  )
);</code></pre></figure><h2 id="shell-verbose">Shell.Verbose</h2><p><code>Shell.Verbose</code> decorates an instance of <code>Shell</code> and copies <code>stdout</code> and <code>stderr</code> to the slf4j logging facility (using <a href="http://log.jcabi.com"><code>jcabi-log</code></a>). Of course, you can combine decorators, for example:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>Shell ssh = new Shell.Verbose(
  new Shell.Safe(
    new SSH(
      &quot;ssh.example.com&quot;, 22,
      &quot;yegor&quot;, &quot;-----BEGIN RSA PRIVATE KEY-----...&quot;
    )
  )
);</code></pre></figure><h2 id="shell-plain">Shell.Plain</h2><p><code>Shell.Plain</code> is a wrapper of <code>Shell</code> that introduces a new <code>exec</code> method with only one argument, a command to execute. It also doesn&#39;t return an exit code, but <code>stdout</code> instead. This should be very convenient when you want to execute a simple command and just get its output (I&#39;m combining it with <code>Shell.Safe</code> for safety):</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>String login = new Shell.Plain(new Shell.Safe(ssh)).exec(&quot;whoami&quot;);</code></pre></figure><h2 id="download">Download</h2><p>You need a single dependency <a href="http://repo1.maven.org/maven2/com/jcabi/jcabi-ssh"><code>jcabi-ssh.jar</code></a> in your Maven project (get its latest version in <a href="http://search.maven.org/">Maven Central</a>):</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.jcabi<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>jcabi-ssh<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre></figure><p>The project is in <a href="https://github.com/jcabi/jcabi-ssh">GitHub</a>. If you have any problems, just submit an issue. I&#39;ll try to help.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/09/02/java-ssh-client.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/09/02/java-ssh-client.html&amp;text=Simple+Java+SSH+Client" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/09/02/java-ssh-client.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/09/02/java-ssh-client.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/09/02/java-ssh-client.html%3F2014-35&amp;title=Simple+Java+SSH+Client" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/09/02/java-ssh-client.html%3F2014-35&amp;t=Simple+Java+SSH+Client" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>An execution of a shell command via SSH can be done in Java, in just a few lines, using <a href="http://ssh.jcabi.com"><code>jcabi-ssh</code></a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">String</span> <span class="n">hello</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Shell</span><span class="o">.</span><span class="na">Plain</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">SSH</span><span class="o">(</span>
    <span class="s">&quot;ssh.example.com&quot;</span><span class="o">,</span> <span class="mi">22</span><span class="o">,</span>
    <span class="s">&quot;yegor&quot;</span><span class="o">,</span> <span class="s">&quot;-----BEGIN RSA PRIVATE KEY-----...&quot;</span>
  <span class="o">)</span>
<span class="o">).</span><span class="na">exec</span><span class="o">(</span><span class="s">&quot;echo &#39;Hello, world!&#39;&quot;</span><span class="o">);</span></code></pre></figure><p><a href="http://ssh.jcabi.com"><code>jcabi-ssh</code></a> is a convenient wrapper of <a href="http://www.jcraft.com/jsch/"><code>JSch</code></a>, a well-known pure Java implementation of SSH2.</p><p>Here is a more complex scenario, where I upload a file via SSH and then read back its grepped content:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>Shell shell = new SSH(
  &quot;ssh.example.com&quot;, 22,
  &quot;yegor&quot;, &quot;-----BEGIN RSA PRIVATE KEY-----...&quot;
);
File file = new File(&quot;/tmp/data.txt&quot;);
new Shell.Safe(shell).exec(
  &quot;cat &gt; d.txt <span class="err">&amp;&amp;</span> grep &#39;some text&#39; d.txt&quot;,
  new FileInputStream(file),
  Logger.stream(Level.INFO, this),
  Logger.stream(Level.WARNING, this)
);</code></pre></figure><p>Class <code>SSH</code>, which implements interface <code>Shell</code>, has only one method, <code>exec</code>. This method accepts four arguments:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>interface Shell {
  int exec(
    String cmd, InputStream stdin,
    OutputStream stdout, OutputStream stderr
  );
}</code></pre></figure><p>I think it&#39;s obvious what these arguments are about.</p><p>There are also a few convenient decorators that make it easier to operate with simple commands.</p><h2 id="shell-safe">Shell.Safe</h2><p><code>Shell.Safe</code> <a href="/2017/01/31/decorating-envelopes.html">decorates</a> an instance of <code>Shell</code> and <a href="/2015/12/01/rethrow-exceptions.html">throws</a> an exception if the <code>exec</code> exit code is not equal to zero. This may be very useful when you want to make sure that your command executed successfully, but don&#39;t want to duplicate <code>if/throw</code> in many places of your code.</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>Shell ssh = new Shell.Safe(
  new SSH(
    &quot;ssh.example.com&quot;, 22,
    &quot;yegor&quot;, &quot;-----BEGIN RSA PRIVATE KEY-----...&quot;
  )
);</code></pre></figure><h2 id="shell-verbose">Shell.Verbose</h2><p><code>Shell.Verbose</code> decorates an instance of <code>Shell</code> and copies <code>stdout</code> and <code>stderr</code> to the slf4j logging facility (using <a href="http://log.jcabi.com"><code>jcabi-log</code></a>). Of course, you can combine decorators, for example:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>Shell ssh = new Shell.Verbose(
  new Shell.Safe(
    new SSH(
      &quot;ssh.example.com&quot;, 22,
      &quot;yegor&quot;, &quot;-----BEGIN RSA PRIVATE KEY-----...&quot;
    )
  )
);</code></pre></figure><h2 id="shell-plain">Shell.Plain</h2><p><code>Shell.Plain</code> is a wrapper of <code>Shell</code> that introduces a new <code>exec</code> method with only one argument, a command to execute. It also doesn&#39;t return an exit code, but <code>stdout</code> instead. This should be very convenient when you want to execute a simple command and just get its output (I&#39;m combining it with <code>Shell.Safe</code> for safety):</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>String login = new Shell.Plain(new Shell.Safe(ssh)).exec(&quot;whoami&quot;);</code></pre></figure><h2 id="download">Download</h2><p>You need a single dependency <a href="http://repo1.maven.org/maven2/com/jcabi/jcabi-ssh"><code>jcabi-ssh.jar</code></a> in your Maven project (get its latest version in <a href="http://search.maven.org/">Maven Central</a>):</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.jcabi<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>jcabi-ssh<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre></figure><p>The project is in <a href="https://github.com/jcabi/jcabi-ssh">GitHub</a>. If you have any problems, just submit an issue. I&#39;ll try to help.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="This tutorial explains how a Java project can be released/deployed to Maven Central in just one click and zero maintenance efforts, using Rultor.com, DevOps assistant " /> <meta name="keywords" content="deploy to maven central, fast release to maven central, how to deploy to maven central, how to release to maven central, maven central release, publish from github to maven central, release to maven central" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-08-19 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="How to Release to Maven Central, in One Click"/> <meta name="twitter:description" property="og:description" content="This tutorial explains how a Java project can be released/deployed to Maven Central in just one click and zero maintenance efforts, using Rultor.com, DevOps assistant "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.amp.html" /> <title>How to Release to Maven Central, in One Click </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html">https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">How to Release to Maven Central, in One Click</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-08-19T00:00:00+00:00"> 19 August 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>When I release a new version of <a href="http://aspects.jcabi.com">jcabi-aspects</a>, a Java open source library, to Maven Central, it takes 30 seconds of my time. Maybe even less. Recently, I released version 0.17.2. You can see how it all happened, in <a href="https://github.com/jcabi/jcabi-aspects/issues/80">GitHub issue #80</a>:</p><figure class='unprintable'><img src='https://www.yegor256.com/images/2014/08/github-ticket-80.jpg' itemprop='image' style='width:600px;max-width:100%;' alt='The figure'/></figure><p>As you see, I gave a command to <a href="http://www.rultor.com">Rultor</a>, and it released a new version to Maven central. I didn&#39;t do anything else.</p><p>Now let&#39;s see how you can do the same. How you can configure your project so that the release of its new version to Maven Central takes just a few seconds of your time.</p><p>By the way, I assume that you&#39;re hosting your project in GitHub. If not, this entire tutorial won&#39;t work. If you are still not in GitHub, I would strongly recommend moving there.</p><h2 id="prepare-your-pom">Prepare Your POM</h2><aside class='youtube'> <a href='https://www.youtube.com/watch?v=rEK3Rk2lX3M'><div class='box'> <img src='https://i.ytimg.com/vi/rEK3Rk2lX3M/mqdefault.jpg' alt='YouTube video #rEK3Rk2lX3M'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Cactoos 0.12 polishing and releasing (webinar #27); 2 August 2017.</div></aside><p>Make sure your <code>pom.xml</code> contains all elements required by Sonatype, explained in <a href="http://central.sonatype.org/pages/requirements.html">Central Sync Requirements</a>. We will deploy to Sonatype, and they will synchronize all JAR (and not only) artifacts to Maven Central.</p><h2 id="register-a-project-with-sonatype">Register a Project With Sonatype</h2><p>Create an account in <a href="https://issues.sonatype.org/">Sonatype JIRA</a> and raise a ticket, asking to approve your <code>groupId</code>. This <a href="http://central.sonatype.org/pages/ossrh-guide.html">OSSRH Guide</a> explains this step in more detail.</p><h2 id="create-and-distribute-a-gpg-key">Create and Distribute a GPG Key</h2><p>Create a GPG key and distribute it, as explained in this <a href="http://central.sonatype.org/pages/working-with-pgp-signatures.html">Working with PGP Signatures</a> article.</p><p>When this step is done, you should have two files: <code>pubring.gpg</code> and <code>secring.gpg</code>.</p><h2 id="create-settings-xml">Create settings.xml</h2><p>Create <code>settings.xml</code>, next to the two <code>.gpg</code> files created in the previous step:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;settings&gt;</span>
  <span class="nt">&lt;profiles&gt;</span>
    <span class="nt">&lt;profile&gt;</span>
      <span class="nt">&lt;id&gt;</span>foo<span class="nt">&lt;/id&gt;</span> <span class="c">&lt;!-- give it the name of your project --&gt;</span>
      <span class="nt">&lt;properties&gt;</span>
        <span class="nt">&lt;gpg.homedir&gt;</span>/home/r<span class="nt">&lt;/gpg.homedir&gt;</span>
        <span class="nt">&lt;gpg.keyname&gt;</span>9A105525<span class="nt">&lt;/gpg.keyname&gt;</span>
        <span class="nt">&lt;gpg.passphrase&gt;</span>my-secret<span class="nt">&lt;/gpg.passphrase&gt;</span>
      <span class="nt">&lt;/properties&gt;</span>
    <span class="nt">&lt;/profile&gt;</span>
  <span class="nt">&lt;/profiles&gt;</span>
  <span class="nt">&lt;servers&gt;</span>
    <span class="nt">&lt;server&gt;</span>
      <span class="nt">&lt;id&gt;</span>oss.sonatype.org<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;username&gt;</span><span class="c">&lt;!-- Sonatype JIRA user name --&gt;</span><span class="nt">&lt;/username&gt;</span>
      <span class="nt">&lt;password&gt;</span><span class="c">&lt;!-- Sonatype JIRA pwd --&gt;</span><span class="nt">&lt;/password&gt;</span>
    <span class="nt">&lt;/server&gt;</span>
  <span class="nt">&lt;/servers&gt;</span>
<span class="nt">&lt;/settings&gt;</span></code></pre></figure><p>In this example, <code>9A105525</code> is the ID of your public key, and <code>my-secret</code> is the pass phrase you have used while generating the keys.</p><h2 id="encrypt-security-assets">Encrypt Security Assets</h2><p>Now, encrypt these three files with a <a href="https://github.com/yegor256/rultor-remote">rultor remote</a>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>$ gem install rultor
$ rultor encrypt -p me/test pubring.gpg
$ rultor encrypt -p me/test secring.gpg
$ rultor encrypt -p me/test settings.xml</code></pre></figure><p>Instead of <code>me/test</code> you should use the name of your GitHub project.</p><p>You will get three new files: <code>pubring.gpg.asc</code>, <code>secring.gpg.asc</code> and <code>settings.xml.asc</code>. Add them to the root directory of your project, commit and push. The files contain your secret information, but only the Rultor server can decrypt them.</p><h2 id="add-sonatype-repositories">Add Sonatype Repositories</h2><p>I would recommend using <a href="/2015/02/05/jcabi-parent-maven-pom.html">jcabi-parent</a>, as a parent pom for your project. This will make many further steps unnecessary. If you&#39;re using jcabi-parent, skip this step.</p><p>However, if you don&#39;t use jcabi-parent, you should add these two repositories to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  [...]
  <span class="nt">&lt;distributionManagement&gt;</span>
    <span class="nt">&lt;repository&gt;</span>
      <span class="nt">&lt;id&gt;</span>oss.sonatype.org<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;url&gt;</span><a href="https://oss.sonatype.org/service/local/staging/deploy/maven2/">https://oss.sonatype.org/service/local/staging/deploy/maven2/</a><span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
    <span class="nt">&lt;snapshotRepository&gt;</span>
      <span class="nt">&lt;id&gt;</span>oss.sonatype.org<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;url&gt;</span><a href="https://oss.sonatype.org/content/repositories/snapshots">https://oss.sonatype.org/content/repositories/snapshots</a><span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/snapshotRepository&gt;</span>
  <span class="nt">&lt;/distributionManagement&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><h2 id="configure-gpg-plugin">Configure GPG Plugin</h2><p>Again, I&#39;d recommend using <a href="http://parent.jcabi.com">jcabi-parent</a>, which configures this plugin automatically. If you&#39;re using it, skip this step.</p><p>Otherwise, add this plugin to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  [..]
  <span class="nt">&lt;build&gt;</span>
    [..]
    <span class="nt">&lt;plugins&gt;</span>
      [..]
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-gpg-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.5<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>sign-artifacts<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;phase&gt;</span>verify<span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>sign<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><h2 id="configure-versions-plugin">Configure Versions Plugin</h2><p>Once again, I recommend using <a href="/2015/02/05/jcabi-parent-maven-pom.html"><a href="http://parent.jcabi.com">http://parent.jcabi.com</a></a>. It configures all required plugins out-of-the-box. If you&#39;re using it, skip this step.</p><p>Otherwise, add this plugin to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  [..]
  <span class="nt">&lt;build&gt;</span>
    [..]
    <span class="nt">&lt;plugins&gt;</span>
      [..]
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>versions-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>2.1<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;generateBackupPoms&gt;</span>false<span class="nt">&lt;/generateBackupPoms&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><h2 id="configure-sonatype-plugin">Configure Sonatype Plugin</h2><p>Yes, you&#39;re right, <a href="/2015/02/05/jcabi-parent-maven-pom.html"><a href="http://parent.jcabi.com">http://parent.jcabi.com</a></a> will help you here as well. If you&#39;re using it, skip this step too.</p><p>Otherwise, add these four plugins to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  [..]
  <span class="nt">&lt;build&gt;</span>
    [..]
    <span class="nt">&lt;plugins&gt;</span>
      [..]
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-deploy-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;skip&gt;</span>true<span class="nt">&lt;/skip&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-source-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>package-sources<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>jar<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-javadoc-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>package-javadoc<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>jar<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.sonatype.plugins<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>nexus-staging-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.6<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;extensions&gt;</span>true<span class="nt">&lt;/extensions&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;serverId&gt;</span>oss.sonatype.org<span class="nt">&lt;/serverId&gt;</span>
          <span class="nt">&lt;nexusUrl&gt;</span><a href="https://oss.sonatype.org/">https://oss.sonatype.org/</a><span class="nt">&lt;/nexusUrl&gt;</span>
          <span class="nt">&lt;description&gt;</span>${project.version}<span class="nt">&lt;/description&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>deploy-to-sonatype<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;phase&gt;</span>deploy<span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>deploy<span class="nt">&lt;/goal&gt;</span>
              <span class="nt">&lt;goal&gt;</span>release<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><h2 id="create-rultor-configuration">Create Rultor Configuration</h2><p>Create a <code>.rultor.yml</code> file in the root directory of your project (<a href="http://doc.rultor.com/reference.html">reference page</a> explains this format in details):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>decrypt:
  settings.xml: &quot;repo/settings.xml.asc&quot;
  pubring.gpg: &quot;repo/pubring.gpg.asc&quot;
  secring.gpg: &quot;repo/secring.gpg.asc&quot;
release:
  script: |
    mvn versions:set &quot;-DnewVersion=${tag}&quot;
    git commit -am &quot;${tag}&quot;
    mvn clean deploy -Pjcabi --settings /home/r/settings.xml</code></pre></figure><p>You can compare your file with live Rultor <a href="https://github.com/jcabi/jcabi-aspects/blob/master/.rultor.yml">configuration of jcabi-aspects</a>.</p><h2 id="run-it">Run It!</h2><figure class='badge'><a href='http://www.rultor.com'><img src='http://doc.rultor.com/images/logo.svg' style='width:100px;max-width:100%;' alt='badge'/></a></figure><p>Now it&#39;s time to see how it all works. Create a new ticket in the GitHub issue tracker, and post something like that into it (read more about <a href="http://doc.rultor.com/basics.html">Rultor commands</a>):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>@rultor release, tag is <code>0.1</code></code></pre></figure><p>You will get a response in a few seconds. The rest will be done by Rultor.</p><p>Enjoy :)</p><p>BTW, if something doesn&#39;t work as I&#39;ve explained, don&#39;t hesitate to submit a ticket to <a href="https://github.com/yegor256/rultor/issues">Rultor issue tracker</a>. I will try to help you.</p><p>Yeah, forgot to mention, Rultor is also doing two important things. First, it creates a GitHub release with a proper description. Second, it posts a tweet about the release, which you can retweet, to make an announcement to your followers. Both features are very convenient for me. For example:</p><blockquote class="twitter-tweet" lang="en"><p>DynamoDB Local Maven Plugin, 0.7.1 released <a href="https://t.co/C3KULouuKS"><a href="https://t.co/C3KULouuKS">https://t.co/C3KULouuKS</a></a></p>---rultor.com (@rultors) <a href="https://twitter.com/rultors/statuses/501617747269517312">August 19, 2014</a></blockquote> <script async='' src="http://platform.twitter.com/widgets.js" charset="utf-8"></script></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html&amp;text=How+to+Release+to+Maven+Central%2C+in+One+Click" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html%3F2014-33&amp;title=How+to+Release+to+Maven+Central%2C+in+One+Click" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html%3F2014-33&amp;t=How+to+Release+to+Maven+Central%2C+in+One+Click" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>When I release a new version of <a href="http://aspects.jcabi.com">jcabi-aspects</a>, a Java open source library, to Maven Central, it takes 30 seconds of my time. Maybe even less. Recently, I released version 0.17.2. You can see how it all happened, in <a href="https://github.com/jcabi/jcabi-aspects/issues/80">GitHub issue #80</a>:</p><figure class='unprintable'><img src='https://www.yegor256.com/images/2014/08/github-ticket-80.jpg' itemprop='image' style='width:600px;max-width:100%;' alt='The figure'/></figure><p>As you see, I gave a command to <a href="http://www.rultor.com">Rultor</a>, and it released a new version to Maven central. I didn&#39;t do anything else.</p><p>Now let&#39;s see how you can do the same. How you can configure your project so that the release of its new version to Maven Central takes just a few seconds of your time.</p><p>By the way, I assume that you&#39;re hosting your project in GitHub. If not, this entire tutorial won&#39;t work. If you are still not in GitHub, I would strongly recommend moving there.</p><h2 id="prepare-your-pom">Prepare Your POM</h2><aside class='youtube'> <a href='https://www.youtube.com/watch?v=rEK3Rk2lX3M'><div class='box'> <img src='https://i.ytimg.com/vi/rEK3Rk2lX3M/mqdefault.jpg' alt='YouTube video #rEK3Rk2lX3M'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Cactoos 0.12 polishing and releasing (webinar #27); 2 August 2017.</div></aside><p>Make sure your <code>pom.xml</code> contains all elements required by Sonatype, explained in <a href="http://central.sonatype.org/pages/requirements.html">Central Sync Requirements</a>. We will deploy to Sonatype, and they will synchronize all JAR (and not only) artifacts to Maven Central.</p><h2 id="register-a-project-with-sonatype">Register a Project With Sonatype</h2><p>Create an account in <a href="https://issues.sonatype.org/">Sonatype JIRA</a> and raise a ticket, asking to approve your <code>groupId</code>. This <a href="http://central.sonatype.org/pages/ossrh-guide.html">OSSRH Guide</a> explains this step in more detail.</p><h2 id="create-and-distribute-a-gpg-key">Create and Distribute a GPG Key</h2><p>Create a GPG key and distribute it, as explained in this <a href="http://central.sonatype.org/pages/working-with-pgp-signatures.html">Working with PGP Signatures</a> article.</p><p>When this step is done, you should have two files: <code>pubring.gpg</code> and <code>secring.gpg</code>.</p><h2 id="create-settings-xml">Create settings.xml</h2><p>Create <code>settings.xml</code>, next to the two <code>.gpg</code> files created in the previous step:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;settings&gt;</span>
  <span class="nt">&lt;profiles&gt;</span>
    <span class="nt">&lt;profile&gt;</span>
      <span class="nt">&lt;id&gt;</span>foo<span class="nt">&lt;/id&gt;</span> <span class="c">&lt;!-- give it the name of your project --&gt;</span>
      <span class="nt">&lt;properties&gt;</span>
        <span class="nt">&lt;gpg.homedir&gt;</span>/home/r<span class="nt">&lt;/gpg.homedir&gt;</span>
        <span class="nt">&lt;gpg.keyname&gt;</span>9A105525<span class="nt">&lt;/gpg.keyname&gt;</span>
        <span class="nt">&lt;gpg.passphrase&gt;</span>my-secret<span class="nt">&lt;/gpg.passphrase&gt;</span>
      <span class="nt">&lt;/properties&gt;</span>
    <span class="nt">&lt;/profile&gt;</span>
  <span class="nt">&lt;/profiles&gt;</span>
  <span class="nt">&lt;servers&gt;</span>
    <span class="nt">&lt;server&gt;</span>
      <span class="nt">&lt;id&gt;</span>oss.sonatype.org<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;username&gt;</span><span class="c">&lt;!-- Sonatype JIRA user name --&gt;</span><span class="nt">&lt;/username&gt;</span>
      <span class="nt">&lt;password&gt;</span><span class="c">&lt;!-- Sonatype JIRA pwd --&gt;</span><span class="nt">&lt;/password&gt;</span>
    <span class="nt">&lt;/server&gt;</span>
  <span class="nt">&lt;/servers&gt;</span>
<span class="nt">&lt;/settings&gt;</span></code></pre></figure><p>In this example, <code>9A105525</code> is the ID of your public key, and <code>my-secret</code> is the pass phrase you have used while generating the keys.</p><h2 id="encrypt-security-assets">Encrypt Security Assets</h2><p>Now, encrypt these three files with a <a href="https://github.com/yegor256/rultor-remote">rultor remote</a>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>$ gem install rultor
$ rultor encrypt -p me/test pubring.gpg
$ rultor encrypt -p me/test secring.gpg
$ rultor encrypt -p me/test settings.xml</code></pre></figure><p>Instead of <code>me/test</code> you should use the name of your GitHub project.</p><p>You will get three new files: <code>pubring.gpg.asc</code>, <code>secring.gpg.asc</code> and <code>settings.xml.asc</code>. Add them to the root directory of your project, commit and push. The files contain your secret information, but only the Rultor server can decrypt them.</p><h2 id="add-sonatype-repositories">Add Sonatype Repositories</h2><p>I would recommend using <a href="/2015/02/05/jcabi-parent-maven-pom.html">jcabi-parent</a>, as a parent pom for your project. This will make many further steps unnecessary. If you&#39;re using jcabi-parent, skip this step.</p><p>However, if you don&#39;t use jcabi-parent, you should add these two repositories to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  [...]
  <span class="nt">&lt;distributionManagement&gt;</span>
    <span class="nt">&lt;repository&gt;</span>
      <span class="nt">&lt;id&gt;</span>oss.sonatype.org<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;url&gt;</span><a href="https://oss.sonatype.org/service/local/staging/deploy/maven2/">https://oss.sonatype.org/service/local/staging/deploy/maven2/</a><span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
    <span class="nt">&lt;snapshotRepository&gt;</span>
      <span class="nt">&lt;id&gt;</span>oss.sonatype.org<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;url&gt;</span><a href="https://oss.sonatype.org/content/repositories/snapshots">https://oss.sonatype.org/content/repositories/snapshots</a><span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/snapshotRepository&gt;</span>
  <span class="nt">&lt;/distributionManagement&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><h2 id="configure-gpg-plugin">Configure GPG Plugin</h2><p>Again, I&#39;d recommend using <a href="http://parent.jcabi.com">jcabi-parent</a>, which configures this plugin automatically. If you&#39;re using it, skip this step.</p><p>Otherwise, add this plugin to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  [..]
  <span class="nt">&lt;build&gt;</span>
    [..]
    <span class="nt">&lt;plugins&gt;</span>
      [..]
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-gpg-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.5<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>sign-artifacts<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;phase&gt;</span>verify<span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>sign<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><h2 id="configure-versions-plugin">Configure Versions Plugin</h2><p>Once again, I recommend using <a href="/2015/02/05/jcabi-parent-maven-pom.html"><a href="http://parent.jcabi.com">http://parent.jcabi.com</a></a>. It configures all required plugins out-of-the-box. If you&#39;re using it, skip this step.</p><p>Otherwise, add this plugin to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  [..]
  <span class="nt">&lt;build&gt;</span>
    [..]
    <span class="nt">&lt;plugins&gt;</span>
      [..]
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>versions-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>2.1<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;generateBackupPoms&gt;</span>false<span class="nt">&lt;/generateBackupPoms&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><h2 id="configure-sonatype-plugin">Configure Sonatype Plugin</h2><p>Yes, you&#39;re right, <a href="/2015/02/05/jcabi-parent-maven-pom.html"><a href="http://parent.jcabi.com">http://parent.jcabi.com</a></a> will help you here as well. If you&#39;re using it, skip this step too.</p><p>Otherwise, add these four plugins to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  [..]
  <span class="nt">&lt;build&gt;</span>
    [..]
    <span class="nt">&lt;plugins&gt;</span>
      [..]
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-deploy-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;skip&gt;</span>true<span class="nt">&lt;/skip&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-source-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>package-sources<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>jar<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-javadoc-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>package-javadoc<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>jar<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.sonatype.plugins<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>nexus-staging-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.6<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;extensions&gt;</span>true<span class="nt">&lt;/extensions&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;serverId&gt;</span>oss.sonatype.org<span class="nt">&lt;/serverId&gt;</span>
          <span class="nt">&lt;nexusUrl&gt;</span><a href="https://oss.sonatype.org/">https://oss.sonatype.org/</a><span class="nt">&lt;/nexusUrl&gt;</span>
          <span class="nt">&lt;description&gt;</span>${project.version}<span class="nt">&lt;/description&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>deploy-to-sonatype<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;phase&gt;</span>deploy<span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>deploy<span class="nt">&lt;/goal&gt;</span>
              <span class="nt">&lt;goal&gt;</span>release<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><h2 id="create-rultor-configuration">Create Rultor Configuration</h2><p>Create a <code>.rultor.yml</code> file in the root directory of your project (<a href="http://doc.rultor.com/reference.html">reference page</a> explains this format in details):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>decrypt:
  settings.xml: &quot;repo/settings.xml.asc&quot;
  pubring.gpg: &quot;repo/pubring.gpg.asc&quot;
  secring.gpg: &quot;repo/secring.gpg.asc&quot;
release:
  script: |
    mvn versions:set &quot;-DnewVersion=${tag}&quot;
    git commit -am &quot;${tag}&quot;
    mvn clean deploy -Pjcabi --settings /home/r/settings.xml</code></pre></figure><p>You can compare your file with live Rultor <a href="https://github.com/jcabi/jcabi-aspects/blob/master/.rultor.yml">configuration of jcabi-aspects</a>.</p><h2 id="run-it">Run It!</h2><figure class='badge'><a href='http://www.rultor.com'><img src='http://doc.rultor.com/images/logo.svg' style='width:100px;max-width:100%;' alt='badge'/></a></figure><p>Now it&#39;s time to see how it all works. Create a new ticket in the GitHub issue tracker, and post something like that into it (read more about <a href="http://doc.rultor.com/basics.html">Rultor commands</a>):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>@rultor release, tag is <code>0.1</code></code></pre></figure><p>You will get a response in a few seconds. The rest will be done by Rultor.</p><p>Enjoy :)</p><p>BTW, if something doesn&#39;t work as I&#39;ve explained, don&#39;t hesitate to submit a ticket to <a href="https://github.com/yegor256/rultor/issues">Rultor issue tracker</a>. I will try to help you.</p><p>Yeah, forgot to mention, Rultor is also doing two important things. First, it creates a GitHub release with a proper description. Second, it posts a tweet about the release, which you can retweet, to make an announcement to your followers. Both features are very convenient for me. For example:</p><blockquote class="twitter-tweet" lang="en"><p>DynamoDB Local Maven Plugin, 0.7.1 released <a href="https://t.co/C3KULouuKS"><a href="https://t.co/C3KULouuKS">https://t.co/C3KULouuKS</a></a></p>---rultor.com (@rultors) <a href="https://twitter.com/rultors/statuses/501617747269517312">August 19, 2014</a></blockquote> <script async='' src="http://platform.twitter.com/widgets.js" charset="utf-8"></script></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="The article gives arguments about why classes/objects in object-oriented programming have to be immutable, i.e. never modify their encapsulated state " /> <meta name="keywords" content="immutability in java, immutable class java, immutable java design pattern, java immutable object, java immutable object advantage, java immutable value object, java mutable immutable object" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-06-09 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Objects Should Be Immutable"/> <meta name="twitter:description" property="og:description" content="The article gives arguments about why classes/objects in object-oriented programming have to be immutable, i.e. never modify their encapsulated state "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/06/09/objects-should-be-immutable.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2014/06/09/objects-should-be-immutable.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/06/09/objects-should-be-immutable.amp.html" /> <title>Objects Should Be Immutable </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/06/09/objects-should-be-immutable.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2014/06/09/objects-should-be-immutable.html">https://www.yegor256.com/2014/06/09/objects-should-be-immutable.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Objects Should Be Immutable</h1><aside class='book'><a href='http://amzn.to/2qFt4Tn'><img src='/images/books/elegant-objects/cover.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='http://amzn.to/2qFt4Tn'>Section&nbsp;2.6</a><br/> of my book<a href='http://amzn.to/2qFt4Tn'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-06-09T00:00:00+00:00"> 9 June 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/06/09/objects-should-be-immutable.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><ul class="subline"> <li>Discussed at:</li> <li><a href="https://www.reddit.com/r/programming/comments/2ld05q/proper_objects_should_be_immutable_dont_you_think/">reddit</a></li></ul><p class="unprintable"><p>In object-oriented programming, an object is <a href="http://en.wikipedia.org/wiki/Immutable_object">immutable</a> if its state can&#39;t be modified after it is created. In Java, a good example of an immutable <a href="/2016/07/14/who-is-object.html">object</a> is <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html"><code>String</code></a>. Once created, we can&#39;t modify its state. We can request that it creates new strings, but its own state will never change.</p><p>However, there are not so many immutable classes in JDK. Take, for example, class <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Date.html"><code>Date</code></a>. It is possible to modify its state using <code>setTime()</code>.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=KwP7Ay9Z-hc'><div class='box'> <img src='https://i.ytimg.com/vi/KwP7Ay9Z-hc/mqdefault.jpg' alt='YouTube video #KwP7Ay9Z-hc'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Immutable Objects vs. Common Sense (webinar #2); 6 May 2015.</div></aside><p>I don&#39;t know why the JDK designers decided to make these two very similar classes differently. However, I believe that the design of a mutable <code>Date</code> has many flaws, while the immutable <code>String</code> is much more in the spirit of the object-oriented paradigm.</p><p>Moreover, I think that <strong>all classes should be immutable in a perfect object-oriented world</strong>. Unfortunately, sometimes, it is technically not possible due to limitations in JVM. Nevertheless, we should always aim for the best.</p><p>This is an incomplete list of arguments in favor of immutability:</p><ul> <li>immutable objects are simpler to construct, test, and use</li> <li>truly immutable objects are always thread-safe</li> <li>they help to avoid <a href="/2015/12/08/temporal-coupling-between-method-calls.html">temporal coupling</a></li> <li>their usage is side-effect free (no defensive copies)</li> <li>identity mutability problem is avoided</li> <li>they always have failure atomicity</li> <li>they are much easier to cache</li> <li>they prevent NULL references, <a href="/2014/05/13/why-null-is-bad.html">which are bad</a></li></ul><p>Let&#39;s discuss the most important arguments one by one.</p><h2 id="thread-safety">Thread Safety</h2><p>The first and the most obvious argument is that immutable objects are thread-safe. This means that multiple threads can access the same object at the same time, without clashing with another thread.</p><figure class='badge'><a href='http://amzn.to/2bQVqBr'><img src='https://www.yegor256.com/images/2014/12/java-concurrency-in-practice.png' style='width:100px;max-width:100%;' alt='badge'/></a></figure><p>If no object methods can modify its state, no matter how many of them and how often are being called parallel---they will work in their own memory space in stack.</p><p>Goetz et al. explained the advantages of immutable objects in more details in their very famous book <a href="http://amzn.to/2bQVqBr">Java Concurrency in Practice</a> (highly recommended).</p><h2 id="avoiding-temporal-coupling">Avoiding Temporal Coupling</h2><p>Here is an example of temporal coupling (the code makes two consecutive HTTP POST requests, where the second one contains HTTP body):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Request</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Request</span><span class="o">(</span><span class="s">&quot;<a href="http://localhost">http://localhost</a>&quot;</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">method</span><span class="o">(</span><span class="s">&quot;POST&quot;</span><span class="o">);</span>
<span class="n">String</span> <span class="n">first</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">body</span><span class="o">(</span><span class="s">&quot;text=hello&quot;</span><span class="o">);</span>
<span class="n">String</span> <span class="n">second</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">fetch</span><span class="o">();</span></code></pre></figure><p>This code works. However, you must remember that the first request should be configured before the second one may happen. If we decide to remove the first request from the script, we will remove the second and the third line, and won&#39;t get any errors from the compiler:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Request</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Request</span><span class="o">(</span><span class="s">&quot;<a href="http://localhost">http://localhost</a>&quot;</span><span class="o">);</span>
<span class="c1">// request.method(&quot;POST&quot;);</span>
<span class="c1">// String first = request.fetch();</span>
<span class="n">request</span><span class="o">.</span><span class="na">body</span><span class="o">(</span><span class="s">&quot;text=hello&quot;</span><span class="o">);</span>
<span class="n">String</span> <span class="n">second</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">fetch</span><span class="o">();</span></code></pre></figure><p>Now, the script is broken although it compiled without errors. This is what <a href="/2015/12/08/temporal-coupling-between-method-calls.html">temporal coupling</a> is about---there is always some hidden information in the code that a programmer has to remember. In this example, we have to remember that the configuration for the first request is also used for the second one.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=EnhRgXrHCC4'><div class='box'> <img src='https://i.ytimg.com/vi/EnhRgXrHCC4/mqdefault.jpg' alt='YouTube video #EnhRgXrHCC4'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>How Immutability Helps in OOP (in Russian with English subtitles); 21 May 2016.</div></aside><p>We have to remember that the second request should always stay together and be executed after the first one.</p><p>If <code>Request</code> class were immutable, the first snippet wouldn&#39;t work in the first place, and would have been rewritten like:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">Request</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Request</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">);</span>
<span class="n">String</span> <span class="n">first</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">method</span><span class="o">(</span><span class="s">&quot;POST&quot;</span><span class="o">).</span><span class="na">fetch</span><span class="o">();</span>
<span class="n">String</span> <span class="n">second</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">method</span><span class="o">(</span><span class="s">&quot;POST&quot;</span><span class="o">).</span><span class="na">body</span><span class="o">(</span><span class="s">&quot;text=hello&quot;</span><span class="o">).</span><span class="na">fetch</span><span class="o">();</span></code></pre></figure><p>Now, these two requests are not coupled. We can safely remove the first one, and the second one will still work correctly. You may point out that there is a code duplication. Yes, we should get rid of it and re-write the code:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">Request</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Request</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">Request</span> <span class="n">post</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">method</span><span class="o">(</span><span class="s">&quot;POST&quot;</span><span class="o">);</span>
<span class="n">String</span> <span class="n">first</span> <span class="o">=</span> <span class="n">post</span><span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
<span class="n">String</span> <span class="n">second</span> <span class="o">=</span> <span class="n">post</span><span class="o">.</span><span class="na">body</span><span class="o">(</span><span class="s">&quot;text=hello&quot;</span><span class="o">).</span><span class="na">fetch</span><span class="o">();</span></code></pre></figure><p>See, refactoring didn&#39;t break anything and we still don&#39;t have temporal coupling. The first request can be removed safely from the code without affecting the second one.</p><p>I hope this example demonstrates that the code manipulating immutable objects is more readable and maintainable, because it doesn&#39;t have <a href="/2015/12/08/temporal-coupling-between-method-calls.html">temporal coupling</a>.</p><h2 id="avoiding-side-effects">Avoiding Side Effects</h2><p>Let&#39;s try to use our <code>Request</code> class in a new method (now it is mutable):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="n">String</span> <span class="nf">post</span><span class="o">(</span><span class="n">Request</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">request</span><span class="o">.</span><span class="na">method</span><span class="o">(</span><span class="s">&quot;POST&quot;</span><span class="o">);</span>
  <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>Let&#39;s try to make two requests---the first with GET method and the second with POST:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Request</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Request</span><span class="o">(</span><span class="s">&quot;<a href="http://localhost">http://localhost</a>&quot;</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">method</span><span class="o">(</span><span class="s">&quot;GET&quot;</span><span class="o">);</span>
<span class="n">String</span> <span class="n">first</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
<span class="n">String</span> <span class="n">second</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">fetch</span><span class="o">();</span></code></pre></figure><p>Method <code>post()</code> has a &quot;side effect&quot;---it makes changes to the mutable object <code>request</code>. These changes are not really expected in this case. We expect it to make a POST request and return its body. We don&#39;t want to read its documentation just to find out that behind the scene it also modifies the request we&#39;re passing to it as an argument.</p><p>Needless to say, such side effects lead to bugs and maintainability issues. It would be much better to work with an immutable <code>Request</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="n">String</span> <span class="nf">post</span><span class="o">(</span><span class="n">Request</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="na">method</span><span class="o">(</span><span class="s">&quot;POST&quot;</span><span class="o">).</span><span class="na">fetch</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>In this case, we may not have any side effects. Nobody can modify our <code>request</code> object, no matter where it is used and how deep through the call stack it is passed by method calls:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Request</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Request</span><span class="o">(</span><span class="s">&quot;<a href="http://localhost">http://localhost</a>&quot;</span><span class="o">).</span><span class="na">method</span><span class="o">(</span><span class="s">&quot;GET&quot;</span><span class="o">);</span>
<span class="n">String</span> <span class="n">first</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
<span class="n">String</span> <span class="n">second</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">fetch</span><span class="o">();</span></code></pre></figure><p>This code is perfectly safe and side effect free.</p><h2 id="avoiding-identity-mutability">Avoiding Identity Mutability</h2><p>Very often, we want objects to be identical if their internal states are the same. <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Date.html"><code>Date</code></a> class is a good example:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Date</span> <span class="n">first</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span>
<span class="n">Date</span> <span class="n">second</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">first</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">second</span><span class="o">);</span> <span class="c1">// true</span></code></pre></figure><p>There are two different objects; however, they are equal to each other because their encapsulated states are the same. This is made possible through their custom overloaded implementation of <code>equals()</code> and <code>hashCode()</code> methods.</p><p>The consequence of this convenient approach being used with mutable objects is that every time we modify object&#39;s state it changes its identity:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Date</span> <span class="n">first</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span>
<span class="n">Date</span> <span class="n">second</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span>
<span class="n">first</span><span class="o">.</span><span class="na">setTime</span><span class="o">(</span><span class="mi">2L</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">first</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">second</span><span class="o">);</span> <span class="c1">// false</span></code></pre></figure><p>This may look natural, until you start using your mutable objects as keys in maps:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Map</span><span class="o">&lt;</span><span class="n">Date</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
<span class="n">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">();</span>
<span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">date</span><span class="o">,</span> <span class="s">&quot;hello, world!&quot;</span><span class="o">);</span>
<span class="n">date</span><span class="o">.</span><span class="na">setTime</span><span class="o">(</span><span class="mi">12345L</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">map</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">date</span><span class="o">);</span> <span class="c1">// false</span></code></pre></figure><p>When modifying the state of <code>date</code> object, we&#39;re not expecting it to change its identity. We&#39;re not expecting to lose an entry in the map just because the state of its key is changed. However, this is exactly what is happening in the example above.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=p7m7_iiqaHI'><div class='box'> <img src='https://i.ytimg.com/vi/p7m7_iiqaHI/mqdefault.jpg' alt='YouTube video #p7m7_iiqaHI'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>How Much Immutability Is Enough?; 19 May 2016.</div></aside><p>When we add an object to the map, its <code>hashCode()</code> returns one value. This value is used by <a href="http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html"><code>HashMap</code></a> to place the entry into the internal hash table. When we call <code>containsKey()</code> hash code of the object is different (because it is based on its internal state) and <code>HashMap</code> can&#39;t find it in the internal hash table.</p><p>It is a very annoying and difficult to debug side effects of mutable objects. Immutable objects avoid it completely.</p><h2 id="failure-atomicity">Failure Atomicity</h2><p>Here is a simple example:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Stack</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">size</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">String</span><span class="o">[]</span> <span class="n">items</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">push</span><span class="o">(</span><span class="n">String</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">size</span><span class="o">++;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">size</span> <span class="o">&gt;</span> <span class="n">items</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="s">&quot;stack overflow&quot;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">items</span><span class="o">[</span><span class="n">size</span><span class="o">]</span> <span class="o">=</span> <span class="n">item</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>It is obvious that an object of class <code>Stack</code> will be left in a broken state if it <a href="/2015/12/01/rethrow-exceptions.html">throws</a> a runtime exception on overflow. Its <code>size</code> property will be incremented, while <code>items</code> won&#39;t get a new element.</p><figure class='badge'><a href='http://amzn.to/2cs4aiR'><img src='https://www.yegor256.com/images/2014/06/effective-java-second-edition.png' style='width:100px;max-width:100%;' alt='badge'/></a></figure><p>Immutability prevents this problem. An object will never be left in a broken state because its state is modified only in its constructor. The constructor will either fail, rejecting object instantiation, or succeed, making a valid solid object, which never changes its encapsulated state.</p><p>For more on this subject, read <a href="http://amzn.to/2cs4aiR">Effective Java, 2nd Edition</a> by Joshua Bloch.</p><h2 id="arguments-against-immutability">Arguments Against Immutability</h2><p>There are a number of arguments against immutability.</p><ol> <li><p>&ldquo;Immutability is not for enterprise systems&rdquo;. Very often, I hear people say that immutability is a fancy feature, while absolutely impractical in real enterprise systems. As a counter-argument, I can only show some examples of real-life applications that contain only immutable Java objects: <a href="http://http.jcabi.com"><code>jcabi-http</code></a>, <a href="/2014/04/24/java-xml-parsing-and-traversing.html"><code>jcabi-xml</code></a>, <a href="/2014/05/14/object-oriented-github-java-sdk.html"><code>jcabi-github</code></a>, <a href="/2014/05/26/amazon-s3-java-oop-adapter.html"><code>jcabi-s3</code></a>, <a href="/2014/04/14/jcabi-dynamo-java-api-of-aws-dynamodb.html"><code>jcabi-dynamo</code></a>, <a href="/2014/04/29/w3c-java-validators.html"><code>jcabi-w3c</code></a>, <a href="/2014/08/18/fluent-jdbc-decorator.html"><code>jcabi-jdbc</code></a>, <a href="http://simpledb.jcabi.com"><code>jcabi-simpledb</code></a>, <a href="/2014/09/02/java-ssh-client.html"><code>jcabi-ssh</code></a>. The above are all Java libraries that work solely with immutable classes/objects. <a href="https://github.com/netbout/netbout">netbout.com</a> and <a href="/2014/12/04/synchronization-between-nodes.html">stateful.co</a> are web applications that work solely with immutable objects.</p></li> <li><p>&ldquo;It&#39;s cheaper to update an existing object than create a new one&rdquo;. Oracle <a href="http://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html">thinks</a> that &ldquo;The impact of object creation is often overestimated and can be offset by some of the efficiency associated with immutable objects. These include decreased overhead due to garbage collection, and the elimination of code needed to protect mutable objects from corruption.&rdquo; I agree.</p></li> </ol><p>If you have some other arguments, please post them below and I&#39;ll try to comment.</p><p>P.S. Check <a href="http://www.takes.org">takes.org</a>, a Java web framework that consists entirely of immutable objects.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/06/09/objects-should-be-immutable.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/06/09/objects-should-be-immutable.html&amp;text=Objects+Should+Be+Immutable" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/06/09/objects-should-be-immutable.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/06/09/objects-should-be-immutable.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/06/09/objects-should-be-immutable.html%3F2014-23&amp;title=Objects+Should+Be+Immutable" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/06/09/objects-should-be-immutable.html%3F2014-23&amp;t=Objects+Should+Be+Immutable" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>In object-oriented programming, an object is <a href="http://en.wikipedia.org/wiki/Immutable_object">immutable</a> if its state can&#39;t be modified after it is created. In Java, a good example of an immutable <a href="/2016/07/14/who-is-object.html">object</a> is <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html"><code>String</code></a>. Once created, we can&#39;t modify its state. We can request that it creates new strings, but its own state will never change.</p><p>However, there are not so many immutable classes in JDK. Take, for example, class <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Date.html"><code>Date</code></a>. It is possible to modify its state using <code>setTime()</code>.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=KwP7Ay9Z-hc'><div class='box'> <img src='https://i.ytimg.com/vi/KwP7Ay9Z-hc/mqdefault.jpg' alt='YouTube video #KwP7Ay9Z-hc'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Immutable Objects vs. Common Sense (webinar #2); 6 May 2015.</div></aside><p>I don&#39;t know why the JDK designers decided to make these two very similar classes differently. However, I believe that the design of a mutable <code>Date</code> has many flaws, while the immutable <code>String</code> is much more in the spirit of the object-oriented paradigm.</p><p>Moreover, I think that <strong>all classes should be immutable in a perfect object-oriented world</strong>. Unfortunately, sometimes, it is technically not possible due to limitations in JVM. Nevertheless, we should always aim for the best.</p><p>This is an incomplete list of arguments in favor of immutability:</p><ul> <li>immutable objects are simpler to construct, test, and use</li> <li>truly immutable objects are always thread-safe</li> <li>they help to avoid <a href="/2015/12/08/temporal-coupling-between-method-calls.html">temporal coupling</a></li> <li>their usage is side-effect free (no defensive copies)</li> <li>identity mutability problem is avoided</li> <li>they always have failure atomicity</li> <li>they are much easier to cache</li> <li>they prevent NULL references, <a href="/2014/05/13/why-null-is-bad.html">which are bad</a></li></ul><p>Let&#39;s discuss the most important arguments one by one.</p><h2 id="thread-safety">Thread Safety</h2><p>The first and the most obvious argument is that immutable objects are thread-safe. This means that multiple threads can access the same object at the same time, without clashing with another thread.</p><figure class='badge'><a href='http://amzn.to/2bQVqBr'><img src='https://www.yegor256.com/images/2014/12/java-concurrency-in-practice.png' style='width:100px;max-width:100%;' alt='badge'/></a></figure><p>If no object methods can modify its state, no matter how many of them and how often are being called parallel---they will work in their own memory space in stack.</p><p>Goetz et al. explained the advantages of immutable objects in more details in their very famous book <a href="http://amzn.to/2bQVqBr">Java Concurrency in Practice</a> (highly recommended).</p><h2 id="avoiding-temporal-coupling">Avoiding Temporal Coupling</h2><p>Here is an example of temporal coupling (the code makes two consecutive HTTP POST requests, where the second one contains HTTP body):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Request</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Request</span><span class="o">(</span><span class="s">&quot;<a href="http://localhost">http://localhost</a>&quot;</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">method</span><span class="o">(</span><span class="s">&quot;POST&quot;</span><span class="o">);</span>
<span class="n">String</span> <span class="n">first</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
<span class="n">request</span><span class="o">.</span><span class="na">body</span><span class="o">(</span><span class="s">&quot;text=hello&quot;</span><span class="o">);</span>
<span class="n">String</span> <span class="n">second</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">fetch</span><span class="o">();</span></code></pre></figure><p>This code works. However, you must remember that the first request should be configured before the second one may happen. If we decide to remove the first request from the script, we will remove the second and the third line, and won&#39;t get any errors from the compiler:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Request</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Request</span><span class="o">(</span><span class="s">&quot;<a href="http://localhost">http://localhost</a>&quot;</span><span class="o">);</span>
<span class="c1">// request.method(&quot;POST&quot;);</span>
<span class="c1">// String first = request.fetch();</span>
<span class="n">request</span><span class="o">.</span><span class="na">body</span><span class="o">(</span><span class="s">&quot;text=hello&quot;</span><span class="o">);</span>
<span class="n">String</span> <span class="n">second</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">fetch</span><span class="o">();</span></code></pre></figure><p>Now, the script is broken although it compiled without errors. This is what <a href="/2015/12/08/temporal-coupling-between-method-calls.html">temporal coupling</a> is about---there is always some hidden information in the code that a programmer has to remember. In this example, we have to remember that the configuration for the first request is also used for the second one.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=EnhRgXrHCC4'><div class='box'> <img src='https://i.ytimg.com/vi/EnhRgXrHCC4/mqdefault.jpg' alt='YouTube video #EnhRgXrHCC4'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>How Immutability Helps in OOP (in Russian with English subtitles); 21 May 2016.</div></aside><p>We have to remember that the second request should always stay together and be executed after the first one.</p><p>If <code>Request</code> class were immutable, the first snippet wouldn&#39;t work in the first place, and would have been rewritten like:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">Request</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Request</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">);</span>
<span class="n">String</span> <span class="n">first</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">method</span><span class="o">(</span><span class="s">&quot;POST&quot;</span><span class="o">).</span><span class="na">fetch</span><span class="o">();</span>
<span class="n">String</span> <span class="n">second</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">method</span><span class="o">(</span><span class="s">&quot;POST&quot;</span><span class="o">).</span><span class="na">body</span><span class="o">(</span><span class="s">&quot;text=hello&quot;</span><span class="o">).</span><span class="na">fetch</span><span class="o">();</span></code></pre></figure><p>Now, these two requests are not coupled. We can safely remove the first one, and the second one will still work correctly. You may point out that there is a code duplication. Yes, we should get rid of it and re-write the code:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">Request</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Request</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">Request</span> <span class="n">post</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">method</span><span class="o">(</span><span class="s">&quot;POST&quot;</span><span class="o">);</span>
<span class="n">String</span> <span class="n">first</span> <span class="o">=</span> <span class="n">post</span><span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
<span class="n">String</span> <span class="n">second</span> <span class="o">=</span> <span class="n">post</span><span class="o">.</span><span class="na">body</span><span class="o">(</span><span class="s">&quot;text=hello&quot;</span><span class="o">).</span><span class="na">fetch</span><span class="o">();</span></code></pre></figure><p>See, refactoring didn&#39;t break anything and we still don&#39;t have temporal coupling. The first request can be removed safely from the code without affecting the second one.</p><p>I hope this example demonstrates that the code manipulating immutable objects is more readable and maintainable, because it doesn&#39;t have <a href="/2015/12/08/temporal-coupling-between-method-calls.html">temporal coupling</a>.</p><h2 id="avoiding-side-effects">Avoiding Side Effects</h2><p>Let&#39;s try to use our <code>Request</code> class in a new method (now it is mutable):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="n">String</span> <span class="nf">post</span><span class="o">(</span><span class="n">Request</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">request</span><span class="o">.</span><span class="na">method</span><span class="o">(</span><span class="s">&quot;POST&quot;</span><span class="o">);</span>
  <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="na">fetch</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>Let&#39;s try to make two requests---the first with GET method and the second with POST:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Request</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Request</span><span class="o">(</span><span class="s">&quot;<a href="http://localhost">http://localhost</a>&quot;</span><span class="o">);</span>
<span class="n">request</span><span class="o">.</span><span class="na">method</span><span class="o">(</span><span class="s">&quot;GET&quot;</span><span class="o">);</span>
<span class="n">String</span> <span class="n">first</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
<span class="n">String</span> <span class="n">second</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">fetch</span><span class="o">();</span></code></pre></figure><p>Method <code>post()</code> has a &quot;side effect&quot;---it makes changes to the mutable object <code>request</code>. These changes are not really expected in this case. We expect it to make a POST request and return its body. We don&#39;t want to read its documentation just to find out that behind the scene it also modifies the request we&#39;re passing to it as an argument.</p><p>Needless to say, such side effects lead to bugs and maintainability issues. It would be much better to work with an immutable <code>Request</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="n">String</span> <span class="nf">post</span><span class="o">(</span><span class="n">Request</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="na">method</span><span class="o">(</span><span class="s">&quot;POST&quot;</span><span class="o">).</span><span class="na">fetch</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure><p>In this case, we may not have any side effects. Nobody can modify our <code>request</code> object, no matter where it is used and how deep through the call stack it is passed by method calls:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Request</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Request</span><span class="o">(</span><span class="s">&quot;<a href="http://localhost">http://localhost</a>&quot;</span><span class="o">).</span><span class="na">method</span><span class="o">(</span><span class="s">&quot;GET&quot;</span><span class="o">);</span>
<span class="n">String</span> <span class="n">first</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
<span class="n">String</span> <span class="n">second</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">fetch</span><span class="o">();</span></code></pre></figure><p>This code is perfectly safe and side effect free.</p><h2 id="avoiding-identity-mutability">Avoiding Identity Mutability</h2><p>Very often, we want objects to be identical if their internal states are the same. <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Date.html"><code>Date</code></a> class is a good example:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Date</span> <span class="n">first</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span>
<span class="n">Date</span> <span class="n">second</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">first</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">second</span><span class="o">);</span> <span class="c1">// true</span></code></pre></figure><p>There are two different objects; however, they are equal to each other because their encapsulated states are the same. This is made possible through their custom overloaded implementation of <code>equals()</code> and <code>hashCode()</code> methods.</p><p>The consequence of this convenient approach being used with mutable objects is that every time we modify object&#39;s state it changes its identity:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Date</span> <span class="n">first</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span>
<span class="n">Date</span> <span class="n">second</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span>
<span class="n">first</span><span class="o">.</span><span class="na">setTime</span><span class="o">(</span><span class="mi">2L</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">first</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">second</span><span class="o">);</span> <span class="c1">// false</span></code></pre></figure><p>This may look natural, until you start using your mutable objects as keys in maps:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Map</span><span class="o">&lt;</span><span class="n">Date</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
<span class="n">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">();</span>
<span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">date</span><span class="o">,</span> <span class="s">&quot;hello, world!&quot;</span><span class="o">);</span>
<span class="n">date</span><span class="o">.</span><span class="na">setTime</span><span class="o">(</span><span class="mi">12345L</span><span class="o">);</span>
<span class="k">assert</span> <span class="n">map</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">date</span><span class="o">);</span> <span class="c1">// false</span></code></pre></figure><p>When modifying the state of <code>date</code> object, we&#39;re not expecting it to change its identity. We&#39;re not expecting to lose an entry in the map just because the state of its key is changed. However, this is exactly what is happening in the example above.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=p7m7_iiqaHI'><div class='box'> <img src='https://i.ytimg.com/vi/p7m7_iiqaHI/mqdefault.jpg' alt='YouTube video #p7m7_iiqaHI'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>How Much Immutability Is Enough?; 19 May 2016.</div></aside><p>When we add an object to the map, its <code>hashCode()</code> returns one value. This value is used by <a href="http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html"><code>HashMap</code></a> to place the entry into the internal hash table. When we call <code>containsKey()</code> hash code of the object is different (because it is based on its internal state) and <code>HashMap</code> can&#39;t find it in the internal hash table.</p><p>It is a very annoying and difficult to debug side effects of mutable objects. Immutable objects avoid it completely.</p><h2 id="failure-atomicity">Failure Atomicity</h2><p>Here is a simple example:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Stack</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">size</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">String</span><span class="o">[]</span> <span class="n">items</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">push</span><span class="o">(</span><span class="n">String</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">size</span><span class="o">++;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">size</span> <span class="o">&gt;</span> <span class="n">items</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="s">&quot;stack overflow&quot;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">items</span><span class="o">[</span><span class="n">size</span><span class="o">]</span> <span class="o">=</span> <span class="n">item</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>It is obvious that an object of class <code>Stack</code> will be left in a broken state if it <a href="/2015/12/01/rethrow-exceptions.html">throws</a> a runtime exception on overflow. Its <code>size</code> property will be incremented, while <code>items</code> won&#39;t get a new element.</p><figure class='badge'><a href='http://amzn.to/2cs4aiR'><img src='https://www.yegor256.com/images/2014/06/effective-java-second-edition.png' style='width:100px;max-width:100%;' alt='badge'/></a></figure><p>Immutability prevents this problem. An object will never be left in a broken state because its state is modified only in its constructor. The constructor will either fail, rejecting object instantiation, or succeed, making a valid solid object, which never changes its encapsulated state.</p><p>For more on this subject, read <a href="http://amzn.to/2cs4aiR">Effective Java, 2nd Edition</a> by Joshua Bloch.</p><h2 id="arguments-against-immutability">Arguments Against Immutability</h2><p>There are a number of arguments against immutability.</p><ol> <li><p>&ldquo;Immutability is not for enterprise systems&rdquo;. Very often, I hear people say that immutability is a fancy feature, while absolutely impractical in real enterprise systems. As a counter-argument, I can only show some examples of real-life applications that contain only immutable Java objects: <a href="http://http.jcabi.com"><code>jcabi-http</code></a>, <a href="/2014/04/24/java-xml-parsing-and-traversing.html"><code>jcabi-xml</code></a>, <a href="/2014/05/14/object-oriented-github-java-sdk.html"><code>jcabi-github</code></a>, <a href="/2014/05/26/amazon-s3-java-oop-adapter.html"><code>jcabi-s3</code></a>, <a href="/2014/04/14/jcabi-dynamo-java-api-of-aws-dynamodb.html"><code>jcabi-dynamo</code></a>, <a href="/2014/04/29/w3c-java-validators.html"><code>jcabi-w3c</code></a>, <a href="/2014/08/18/fluent-jdbc-decorator.html"><code>jcabi-jdbc</code></a>, <a href="http://simpledb.jcabi.com"><code>jcabi-simpledb</code></a>, <a href="/2014/09/02/java-ssh-client.html"><code>jcabi-ssh</code></a>. The above are all Java libraries that work solely with immutable classes/objects. <a href="https://github.com/netbout/netbout">netbout.com</a> and <a href="/2014/12/04/synchronization-between-nodes.html">stateful.co</a> are web applications that work solely with immutable objects.</p></li> <li><p>&ldquo;It&#39;s cheaper to update an existing object than create a new one&rdquo;. Oracle <a href="http://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html">thinks</a> that &ldquo;The impact of object creation is often overestimated and can be offset by some of the efficiency associated with immutable objects. These include decreased overhead due to garbage collection, and the elimination of code needed to protect mutable objects from corruption.&rdquo; I agree.</p></li> </ol><p>If you have some other arguments, please post them below and I&#39;ll try to comment.</p><p>P.S. Check <a href="http://www.takes.org">takes.org</a>, a Java web framework that consists entirely of immutable objects.</p></div></article></div><div class="wrapper"><div class="unprintable"> <hr/><p>If you like this article, you will definitely like these <strong>very relevant</strong> posts too:</p><p><a href='/2014/12/22/immutable-objects-not-dumb.html'><strong>Immutable Objects Are Not Dumb</strong></a> <br/>Immutable objects are not the same as passive data structures without setters, despite a very common mis-belief.</p><p><a href='/2014/12/09/immutable-object-state-and-behavior.html'><strong>How an Immutable Object Can Have State and Behavior?</strong></a> <br/>Object state and behavior are two very different things, and confusing the two often leads to incorrect design.</p><p><a href='/2016/09/07/gradients-of-immutability.html'><strong>Gradients of Immutability</strong></a> <br/>There are a few levels and forms of immutability in object-oriented programming, all of which can be used when they seem appropriate.</p></div></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="For traceability and debugging purposes, it can be very convenient to log execution details of every method. This article explains how this can be done with AspectJ and Java annotations. " /> <meta name="keywords" content="aop annotations, aop java logging, aop logging annotations, aop logging java, aspect oriented programming java, aspectj logging, aspectj weaving annotations" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-06-01 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Java Method Logging with AOP and Annotations"/> <meta name="twitter:description" property="og:description" content="For traceability and debugging purposes, it can be very convenient to log execution details of every method. This article explains how this can be done with AspectJ and Java annotations. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/06/01/aop-aspectj-java-method-logging.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2014/06/01/aop-aspectj-java-method-logging.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/06/01/aop-aspectj-java-method-logging.amp.html" /> <title>Java Method Logging with AOP and Annotations </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/06/01/aop-aspectj-java-method-logging.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2014/06/01/aop-aspectj-java-method-logging.html">https://www.yegor256.com/2014/06/01/aop-aspectj-java-method-logging.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Java Method Logging with AOP and Annotations</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-06-01T00:00:00+00:00"> 1 June 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/06/01/aop-aspectj-java-method-logging.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>Sometimes, I want to log (through <a href="http://www.slf4j.org">slf4j</a> and <a href="http://logging.apache.org/log4j/2.x/">log4j</a>) every execution of a method, seeing what arguments it receives, what it returns and how much time every execution takes. This is how I&#39;m doing it, with help of <a href="http://eclipse.org/aspectj/">AspectJ</a>, <a href="http://aspects.jcabi.com">jcabi-aspects</a> and Java 6 <a href="/2016/04/12/java-annotations-are-evil.html">annotations</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="nd">@Loggable</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">power</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Math</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">p</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This is what I see in log4j output:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>[INFO] com.example.Foo #power(2, 10): 1024 in 12μs
[INFO] com.example.Foo #power(3, 3): 27 in 4μs</code></pre></figure><p>Nice, isn&#39;t it? Now, let&#39;s see how it works.</p><h2 id="annotation-with-runtime-retention">Annotation with Runtime Retention</h2><p><a href="http://en.wikipedia.org/wiki/Java_annotation">Annotations</a> is a technique introduced in Java 6. It is a meta-programming instrument that doesn&#39;t change the way code works, but gives marks to certain elements (methods, classes or variables). In other words, annotations are just markers attached to the code that can be seen and read. Some annotations are designed to be seen at compile time only---they don&#39;t exist in <code>.class</code> files after compilation. Others remain visible after compilation and can be accessed in runtime.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=4SRoLYxvIQ8'><div class='box'> <img src='https://i.ytimg.com/vi/4SRoLYxvIQ8/mqdefault.jpg' alt='YouTube video #4SRoLYxvIQ8'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Practical Example of AOP with AspectJ (in Russian with English subtitles); 28 October 2016.</div></aside><p>For example, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Override.html"><code>@Override</code></a> is of the first type (its retention type is <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/RetentionPolicy.html#SOURCE"><code>SOURCE</code></a>), while <a href="http://junit.sourceforge.net/javadoc/org/junit/Test.html"><code>@Test</code></a> from JUnit is of the second type (retention type is <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/RetentionPolicy.html#RUNTIME"><code>RUNTIME</code></a>). <a href="http://aspects.jcabi.com/apidocs-0.15.1/com/jcabi/aspects/Loggable.html"><code>@Loggable</code></a>---the one I&#39;m using in the script above---is an annotation of the second type, from <a href="http://aspects.jcabi.com">jcabi-aspects</a>. It stays with the byte-code in the <code>.class</code> file after compilation.</p><p>Again, it is important to understand that even though method <code>power()</code> is annotated and compiled, it doesn&#39;t send anything to slf4j so far. It just contains a marker saying &quot;please, log my execution.&quot;</p><h2 id="aspect-oriented-programming-aop">Aspect Oriented Programming (AOP)</h2><p><a href="http://en.wikipedia.org/wiki/Aspect-oriented_programming">AOP</a> is a useful technique that enables adding executable blocks to the source code without explicitly changing it. In our example, we don&#39;t want to log method execution inside the class. Instead, we want some other class to intercept every call to method <code>power()</code>, measure its execution time and send this information to slf4j.</p><p>We want that interceptor to understand our <code>@Loggable</code> annotation and log every call to that specific method <code>power()</code>. And, of course, the same interceptor should be used for other methods where we&#39;ll place the same annotation in the future.</p><p>This case perfectly fits the original intent of AOP---to avoid re-implementation of some common behavior in multiple classes.</p><p>Logging is a supplementary feature to our main functionality, and we don&#39;t want to pollute our code with multiple logging instructions. Instead, we want <a href="/2014/05/23/avoid-java-static-logger.html">logging</a> to happen behind the scenes.</p><p>In terms of AOP, our solution can be explained as creating an <strong>aspect</strong> that <strong>cross-cuts</strong> the code at certain <strong>join points</strong> and applies an <strong>around advice</strong> that implements the desired functionality.</p><h2 id="aspectj">AspectJ</h2><p>Let&#39;s see what these magic words mean. But, first, let&#39;s see how <a href="http://aspects.jcabi.com">jcabi-aspects</a> implements them using <a href="http://eclipse.org/aspectj/">AspectJ</a> (it&#39;s a simplified example, full code you can find in <a href="https://github.com/jcabi/jcabi-aspects/blob/jcabi-0.15.2/src/main/java/com/jcabi/aspects/aj/MethodLogger.java"><code>MethodLogger.java</code></a>):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@Aspect</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MethodLogger</span> <span class="o">{</span>
  <span class="nd">@Around</span><span class="o">(</span><span class="s">&quot;execution(* <em>(..)) &amp;&amp; @annotation(Loggable)&quot;</span><span class="o">)</span>
  <span class="kd">public</span> <span class="n">Object</span> <span class="nf">around</span><span class="o">(</span><span class="n">ProceedingJoinPoint</span> <span class="n">point</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">long</span> <span class="n">start</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
    <span class="n">Object</span> <span class="n">result</span> <span class="o">=</span> <span class="n">point</span><span class="o">.</span><span class="na">proceed</span><span class="o">();</span>
    <span class="n">Logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span>
      <span class="s">&quot;#%s(%s): %s in %[msec]s&quot;</span><span class="o">,</span>
      <span class="n">MethodSignature</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">cast</span><span class="o">(</span><span class="n">point</span><span class="o">.</span><span class="na">getSignature</span><span class="o">()).</span><span class="na">getMethod</span><span class="o">().</span><span class="na">getName</span><span class="o">(),</span>
      <span class="n">point</span><span class="o">.</span><span class="na">getArgs</span><span class="o">(),</span>
      <span class="n">result</span><span class="o">,</span>
      <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">-</span> <span class="n">start</span>
    <span class="o">);</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This is an <strong>aspect</strong> with a single <strong>around advice</strong> <code>around()</code> inside. The aspect is annotated with <code>@Aspect</code> and advice is annotated with <code>@Around</code>. As discussed above, these annotations are just markers in <code>.class</code> files. They don&#39;t do anything except provide some meta-information to those who are interested in runtime.</p><p>Annotation <code>@Around</code> has one parameter, which---in this case---says that the advice should be applied to a method if:</p><ol> <li><p>its visibility modifier is <code></em></code> (<code>public</code>, <code>protected</code> or <code>private</code>);</p></li> <li><p>its name is name <code><em></code> (any name);</p></li> <li><p>its arguments are <code>..</code> (any arguments); and</p></li> <li><p>it is annotated with <code>@Loggable</code></p></li> </ol><p>When a call to an annotated method is to be intercepted, method <code>around()</code> executes before executing the actual method. When a call to method <code>power()</code> is to be intercepted, method <code>around()</code> receives an instance of class <code>ProceedingJoinPoint</code> and must return an object, which will be used as a result of method <code>power()</code>.</p><p>In order to call the original method, <code>power()</code>, the advice has to call <code>proceed()</code> of the <strong>join point</strong> object.</p><p>We compile this aspect and make it available in classpath together with our main file <code>Foo.class</code>. So far so good, but we need to take one last step in order to put our aspect into action---we should <strong>apply</strong> our advice.</p><h2 id="binary-aspect-weaving">Binary Aspect Weaving</h2><p>Aspect weaving is the name of the advice applying process. Aspect weaver modifies original code by injecting calls to aspects. AspectJ does exactly that. We give it two binary Java classes <code>Foo.class</code> and <code>MethodLogger.class</code>; it gives back three---modified <code>Foo.class</code>, <code>Foo$AjcClosure1.class</code> and unmodified <code>MethodLogger.class</code>.</p><aside class='quote'>Without weaving, both classes and aspects are just compiled Java binaries with attached annotations</aside><p>In order to understand which advice should be applied to which methods, AspectJ weaver is using annotations from <code>.class</code> files. Also, it uses <a href="http://docs.oracle.com/javase/tutorial/reflect/">reflection</a> to browse all classes on classpath. It analyzes which methods satisfy the conditions from the <code>@Around</code> annotation. Of course, it finds our method <code>power()</code>.</p><p>So, there are two steps. First, we compile our <code>.java</code> files using <code>javac</code> and get two files. Then, AspectJ weaves/modifies them and creates its own extra class. Our <code>Foo</code> class looks something like this after weaving:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">MethodLogger</span> <span class="n">logger</span><span class="o">;</span>
  <span class="nd">@Loggable</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">power</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">logger</span><span class="o">.</span><span class="na">around</span><span class="o">(</span><span class="n">point</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="nf">power_aroundBody</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Math</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">p</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>AspectJ weaver moves our original functionality to a new method, <code>power_aroundBody()</code>, and redirects all <code>power()</code> calls to the aspect class <code>MethodLogger</code>.</p><p>Instead of one method <code>power()</code> in class <code>Foo</code> now we have four classes working together. From now on, this is what happens behind the scenes on every call to <code>power()</code>:</p><p><img src='/uml/52d3d016f2264bbf660a23d5bbe84203.svg' alt='PlantUML SVG diagram' class='plantuml'/></p><p>Original functionality of method <code>power()</code> is indicated by the small green lifeline on the diagram.</p><p>As you see, the aspect weaving process connects together classes and aspects, transferring calls between them through join points. Without weaving, both classes and aspects are just compiled Java binaries with attached annotations.</p><h1 id="jcabi-aspects">jcabi-aspects</h1><p><a href="http://aspects.jcabi.com">jcabi-aspects</a> is a JAR library that contains <code>Loggable</code> annotation and <code>MethodLogger</code> aspect (btw, there are <a href="http://aspects.jcabi.com">many more</a> aspects and annotations). You don&#39;t need to write your own aspect for method logging. Just add a few dependencies to your classpath and configure <a href="http://plugin.jcabi.com">jcabi-maven-plugin</a> for aspect weaving (get their latest versions in <a href="http://search.maven.org/">Maven Central</a>):</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  <span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>com.jcabi<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>jcabi-aspects<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.aspectj<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>aspectjrt<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;/dependencies&gt;</span>
  <span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>com.jcabi<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>jcabi-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>ajc<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><p>Since this weaving procedure takes a lot of configuration effort, I created a convenient Maven plugin with an <code>ajc</code> goal, which does the entire aspect weaving job. You can use AspectJ directly, but I recommend that you use <a href="http://plugin.jcabi.com">jcabi-maven-plugin</a>.</p><p>That&#39;s it. Now you can use <a href="http://aspects.jcabi.com/apidocs-0.15.1/com/jcabi/aspects/Loggable.html"><code>@com.jcabi.aspects.Loggable</code></a> annotation and your methods will be logged through slf4j.</p><p>If something doesn&#39;t work as explained, don&#39;t hesitate to submit a <a href="https://github.com/jcabi/jcabi-aspects/issues">GitHub issue</a>.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/06/01/aop-aspectj-java-method-logging.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/06/01/aop-aspectj-java-method-logging.html&amp;text=Java+Method+Logging+with+AOP+and+Annotations" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/06/01/aop-aspectj-java-method-logging.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/06/01/aop-aspectj-java-method-logging.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/06/01/aop-aspectj-java-method-logging.html%3F2014-22&amp;title=Java+Method+Logging+with+AOP+and+Annotations" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/06/01/aop-aspectj-java-method-logging.html%3F2014-22&amp;t=Java+Method+Logging+with+AOP+and+Annotations" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>Sometimes, I want to log (through <a href="http://www.slf4j.org">slf4j</a> and <a href="http://logging.apache.org/log4j/2.x/">log4j</a>) every execution of a method, seeing what arguments it receives, what it returns and how much time every execution takes. This is how I&#39;m doing it, with help of <a href="http://eclipse.org/aspectj/">AspectJ</a>, <a href="http://aspects.jcabi.com">jcabi-aspects</a> and Java 6 <a href="/2016/04/12/java-annotations-are-evil.html">annotations</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="nd">@Loggable</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">power</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Math</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">p</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This is what I see in log4j output:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>[INFO] com.example.Foo #power(2, 10): 1024 in 12μs
[INFO] com.example.Foo #power(3, 3): 27 in 4μs</code></pre></figure><p>Nice, isn&#39;t it? Now, let&#39;s see how it works.</p><h2 id="annotation-with-runtime-retention">Annotation with Runtime Retention</h2><p><a href="http://en.wikipedia.org/wiki/Java_annotation">Annotations</a> is a technique introduced in Java 6. It is a meta-programming instrument that doesn&#39;t change the way code works, but gives marks to certain elements (methods, classes or variables). In other words, annotations are just markers attached to the code that can be seen and read. Some annotations are designed to be seen at compile time only---they don&#39;t exist in <code>.class</code> files after compilation. Others remain visible after compilation and can be accessed in runtime.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=4SRoLYxvIQ8'><div class='box'> <img src='https://i.ytimg.com/vi/4SRoLYxvIQ8/mqdefault.jpg' alt='YouTube video #4SRoLYxvIQ8'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Practical Example of AOP with AspectJ (in Russian with English subtitles); 28 October 2016.</div></aside><p>For example, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Override.html"><code>@Override</code></a> is of the first type (its retention type is <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/RetentionPolicy.html#SOURCE"><code>SOURCE</code></a>), while <a href="http://junit.sourceforge.net/javadoc/org/junit/Test.html"><code>@Test</code></a> from JUnit is of the second type (retention type is <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/RetentionPolicy.html#RUNTIME"><code>RUNTIME</code></a>). <a href="http://aspects.jcabi.com/apidocs-0.15.1/com/jcabi/aspects/Loggable.html"><code>@Loggable</code></a>---the one I&#39;m using in the script above---is an annotation of the second type, from <a href="http://aspects.jcabi.com">jcabi-aspects</a>. It stays with the byte-code in the <code>.class</code> file after compilation.</p><p>Again, it is important to understand that even though method <code>power()</code> is annotated and compiled, it doesn&#39;t send anything to slf4j so far. It just contains a marker saying &quot;please, log my execution.&quot;</p><h2 id="aspect-oriented-programming-aop">Aspect Oriented Programming (AOP)</h2><p><a href="http://en.wikipedia.org/wiki/Aspect-oriented_programming">AOP</a> is a useful technique that enables adding executable blocks to the source code without explicitly changing it. In our example, we don&#39;t want to log method execution inside the class. Instead, we want some other class to intercept every call to method <code>power()</code>, measure its execution time and send this information to slf4j.</p><p>We want that interceptor to understand our <code>@Loggable</code> annotation and log every call to that specific method <code>power()</code>. And, of course, the same interceptor should be used for other methods where we&#39;ll place the same annotation in the future.</p><p>This case perfectly fits the original intent of AOP---to avoid re-implementation of some common behavior in multiple classes.</p><p>Logging is a supplementary feature to our main functionality, and we don&#39;t want to pollute our code with multiple logging instructions. Instead, we want <a href="/2014/05/23/avoid-java-static-logger.html">logging</a> to happen behind the scenes.</p><p>In terms of AOP, our solution can be explained as creating an <strong>aspect</strong> that <strong>cross-cuts</strong> the code at certain <strong>join points</strong> and applies an <strong>around advice</strong> that implements the desired functionality.</p><h2 id="aspectj">AspectJ</h2><p>Let&#39;s see what these magic words mean. But, first, let&#39;s see how <a href="http://aspects.jcabi.com">jcabi-aspects</a> implements them using <a href="http://eclipse.org/aspectj/">AspectJ</a> (it&#39;s a simplified example, full code you can find in <a href="https://github.com/jcabi/jcabi-aspects/blob/jcabi-0.15.2/src/main/java/com/jcabi/aspects/aj/MethodLogger.java"><code>MethodLogger.java</code></a>):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@Aspect</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MethodLogger</span> <span class="o">{</span>
  <span class="nd">@Around</span><span class="o">(</span><span class="s">&quot;execution(</em> <em>(..)) &amp;&amp; @annotation(Loggable)&quot;</span><span class="o">)</span>
  <span class="kd">public</span> <span class="n">Object</span> <span class="nf">around</span><span class="o">(</span><span class="n">ProceedingJoinPoint</span> <span class="n">point</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">long</span> <span class="n">start</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
    <span class="n">Object</span> <span class="n">result</span> <span class="o">=</span> <span class="n">point</span><span class="o">.</span><span class="na">proceed</span><span class="o">();</span>
    <span class="n">Logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span>
      <span class="s">&quot;#%s(%s): %s in %[msec]s&quot;</span><span class="o">,</span>
      <span class="n">MethodSignature</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">cast</span><span class="o">(</span><span class="n">point</span><span class="o">.</span><span class="na">getSignature</span><span class="o">()).</span><span class="na">getMethod</span><span class="o">().</span><span class="na">getName</span><span class="o">(),</span>
      <span class="n">point</span><span class="o">.</span><span class="na">getArgs</span><span class="o">(),</span>
      <span class="n">result</span><span class="o">,</span>
      <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">-</span> <span class="n">start</span>
    <span class="o">);</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This is an <strong>aspect</strong> with a single <strong>around advice</strong> <code>around()</code> inside. The aspect is annotated with <code>@Aspect</code> and advice is annotated with <code>@Around</code>. As discussed above, these annotations are just markers in <code>.class</code> files. They don&#39;t do anything except provide some meta-information to those who are interested in runtime.</p><p>Annotation <code>@Around</code> has one parameter, which---in this case---says that the advice should be applied to a method if:</p><ol> <li><p>its visibility modifier is <code></em></code> (<code>public</code>, <code>protected</code> or <code>private</code>);</p></li> <li><p>its name is name <code><em></code> (any name);</p></li> <li><p>its arguments are <code>..</code> (any arguments); and</p></li> <li><p>it is annotated with <code>@Loggable</code></p></li> </ol><p>When a call to an annotated method is to be intercepted, method <code>around()</code> executes before executing the actual method. When a call to method <code>power()</code> is to be intercepted, method <code>around()</code> receives an instance of class <code>ProceedingJoinPoint</code> and must return an object, which will be used as a result of method <code>power()</code>.</p><p>In order to call the original method, <code>power()</code>, the advice has to call <code>proceed()</code> of the <strong>join point</strong> object.</p><p>We compile this aspect and make it available in classpath together with our main file <code>Foo.class</code>. So far so good, but we need to take one last step in order to put our aspect into action---we should <strong>apply</strong> our advice.</p><h2 id="binary-aspect-weaving">Binary Aspect Weaving</h2><p>Aspect weaving is the name of the advice applying process. Aspect weaver modifies original code by injecting calls to aspects. AspectJ does exactly that. We give it two binary Java classes <code>Foo.class</code> and <code>MethodLogger.class</code>; it gives back three---modified <code>Foo.class</code>, <code>Foo$AjcClosure1.class</code> and unmodified <code>MethodLogger.class</code>.</p><aside class='quote'>Without weaving, both classes and aspects are just compiled Java binaries with attached annotations</aside><p>In order to understand which advice should be applied to which methods, AspectJ weaver is using annotations from <code>.class</code> files. Also, it uses <a href="http://docs.oracle.com/javase/tutorial/reflect/">reflection</a> to browse all classes on classpath. It analyzes which methods satisfy the conditions from the <code>@Around</code> annotation. Of course, it finds our method <code>power()</code>.</p><p>So, there are two steps. First, we compile our <code>.java</code> files using <code>javac</code> and get two files. Then, AspectJ weaves/modifies them and creates its own extra class. Our <code>Foo</code> class looks something like this after weaving:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">MethodLogger</span> <span class="n">logger</span><span class="o">;</span>
  <span class="nd">@Loggable</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">power</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">logger</span><span class="o">.</span><span class="na">around</span><span class="o">(</span><span class="n">point</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="nf">power_aroundBody</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Math</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">p</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>AspectJ weaver moves our original functionality to a new method, <code>power_aroundBody()</code>, and redirects all <code>power()</code> calls to the aspect class <code>MethodLogger</code>.</p><p>Instead of one method <code>power()</code> in class <code>Foo</code> now we have four classes working together. From now on, this is what happens behind the scenes on every call to <code>power()</code>:</p><p><img src='/uml/52d3d016f2264bbf660a23d5bbe84203.svg' alt='PlantUML SVG diagram' class='plantuml'/></p><p>Original functionality of method <code>power()</code> is indicated by the small green lifeline on the diagram.</p><p>As you see, the aspect weaving process connects together classes and aspects, transferring calls between them through join points. Without weaving, both classes and aspects are just compiled Java binaries with attached annotations.</p><h1 id="jcabi-aspects">jcabi-aspects</h1><p><a href="http://aspects.jcabi.com">jcabi-aspects</a> is a JAR library that contains <code>Loggable</code> annotation and <code>MethodLogger</code> aspect (btw, there are <a href="http://aspects.jcabi.com">many more</a> aspects and annotations). You don&#39;t need to write your own aspect for method logging. Just add a few dependencies to your classpath and configure <a href="http://plugin.jcabi.com">jcabi-maven-plugin</a> for aspect weaving (get their latest versions in <a href="http://search.maven.org/">Maven Central</a>):</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  <span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>com.jcabi<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>jcabi-aspects<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.aspectj<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>aspectjrt<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;/dependencies&gt;</span>
  <span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>com.jcabi<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>jcabi-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>ajc<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><p>Since this weaving procedure takes a lot of configuration effort, I created a convenient Maven plugin with an <code>ajc</code> goal, which does the entire aspect weaving job. You can use AspectJ directly, but I recommend that you use <a href="http://plugin.jcabi.com">jcabi-maven-plugin</a>.</p><p>That&#39;s it. Now you can use <a href="http://aspects.jcabi.com/apidocs-0.15.1/com/jcabi/aspects/Loggable.html"><code>@com.jcabi.aspects.Loggable</code></a> annotation and your methods will be logged through slf4j.</p><p>If something doesn&#39;t work as explained, don&#39;t hesitate to submit a <a href="https://github.com/jcabi/jcabi-aspects/issues">GitHub issue</a>.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Why NULL is a terrible practice in object-oriented programming? Despite the fact that it is used a lot and everywhere, this article tries to explain why you should give up this bad habit. " /> <meta name="keywords" content="null c++, null is bad, null is evil, null java, null pointer, null reference" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-05-13 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Why NULL is Bad?"/> <meta name="twitter:description" property="og:description" content="Why NULL is a terrible practice in object-oriented programming? Despite the fact that it is used a lot and everywhere, this article tries to explain why you should give up this bad habit. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/05/13/why-null-is-bad.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2014/05/13/why-null-is-bad.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/05/13/why-null-is-bad.amp.html" /> <title>Why NULL is Bad? </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/05/13/why-null-is-bad.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2014/05/13/why-null-is-bad.html">https://www.yegor256.com/2014/05/13/why-null-is-bad.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Why NULL is Bad?</h1><aside class='book'><a href='http://amzn.to/2qFt4Tn'><img src='/images/books/elegant-objects/cover.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='http://amzn.to/2qFt4Tn'>Section&nbsp;2.6</a><br/> of my book<a href='http://amzn.to/2qFt4Tn'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-05-13T00:00:00+00:00"> 13 May 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/05/13/why-null-is-bad.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><ul class="unprintable subline"> <li>Translated:</li> <li><a href="http://tbd.kaitoy.xyz/2015/07/26/why-null-is-bad/">Japanese</a></li> <li><a href="mailto:translate@yegor256.com">add yours!</a></li></ul><p class="unprintable"><p>A simple example of <code>NULL</code> usage in Java:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="n">Employee</span> <span class="nf">getByName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">id</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>What is wrong with this method?</p><p>It may return <code>NULL</code> instead of an object---that&#39;s what is wrong. <code>NULL</code> is a terrible practice in an object-oriented paradigm and should be avoided at <a href="/2016/03/22/try-finally-if-not-null.html">all costs</a>. There have been a number of opinions about this published already, including <a href="http://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare">Null References, The Billion Dollar Mistake</a> presentation by Tony Hoare and the entire <a href="http://amzn.to/266oJr4">Object Thinking</a> book by David West.</p><p>Here, I&#39;ll try to summarize all the arguments and show examples of how <code>NULL</code> usage can be avoided and replaced with proper object-oriented constructs.</p><p>Basically, there are two possible alternatives to <code>NULL</code>.</p><p>The first one is <strong><a href="http://en.wikipedia.org/wiki/Null_Object_pattern">Null Object</a></strong> design <a href="/2016/02/03/design-patterns-and-anti-patterns.html">pattern</a> (the best way is to make it a constant):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="n">Employee</span> <span class="nf">getByName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">id</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Employee</span><span class="o">.</span><span class="na">NOBODY</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">Employee</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>The second possible alternative is to <a href="/2015/08/25/fail-fast.html">fail fast</a> by throwing an <strong>Exception</strong> when you can&#39;t return an <a href="/2016/07/14/who-is-object.html">object</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="n">Employee</span> <span class="nf">getByName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">id</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="n">EmployeeNotFoundException</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">Employee</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>Now, let&#39;s see the arguments against <code>NULL</code>.</p><p>Besides Tony Hoare&#39;s presentation and David West&#39;s book mentioned above, I read these publications before writing this post: <a href="http://amzn.to/2m7LmaA">Clean Code</a> by Robert Martin, <a href="http://amzn.to/2cs4cXW">Code Complete</a> by Steve McConnell, <a href="http://elegantcode.com/2010/05/01/say-no-to-null/">Say &quot;No&quot; to &quot;Null&quot;</a> by John Sonmez, <a href="http://stackoverflow.com/questions/1274792/is-returning-null-bad-design">Is returning null bad design?</a> discussion at StackOverflow.</p><h2 id="ad-hoc-error-handling">Ad-hoc Error Handling</h2><p>Every time you get an object as an input you must check whether it is <code>NULL</code> or a valid object reference. If you forget to check, a <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html"><code>NullPointerException</code></a> (NPE) may break execution in runtime. Thus, your logic becomes polluted with multiple checks and if/then/else forks:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="c1">// this is a terrible design, don&#39;t reuse</span>
<span class="n">Employee</span> <span class="n">employee</span> <span class="o">=</span> <span class="n">dept</span><span class="o">.</span><span class="na">getByName</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(</span><span class="n">employee</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;can&#39;t find an employee&quot;</span><span class="o">);</span>
  <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(-</span><span class="mi">1</span><span class="o">);</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
  <span class="n">employee</span><span class="o">.</span><span class="na">transferTo</span><span class="o">(</span><span class="n">dept2</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>This is how exceptional situations are supposed to be handled in <a href="http://en.wikipedia.org/wiki/C_%28programming_language%29">C</a> and other imperative procedural languages. OOP introduced <a href="http://en.wikipedia.org/wiki/Exception_handling">exception handling</a> primarily to get rid of these ad-hoc error handling blocks. In OOP, we let exceptions bubble up until they reach an application-wide error handler and our code becomes much cleaner and shorter:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">dept</span><span class="o">.</span><span class="na">getByName</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">).</span><span class="na">transferTo</span><span class="o">(</span><span class="n">dept2</span><span class="o">);</span></code></pre></figure><p>Consider <code>NULL</code> references an inheritance of procedural programming, and use 1) Null Objects or 2) Exceptions instead.</p><h2 id="ambiguous-semantic">Ambiguous Semantic</h2><p>In order to explicitly convey its meaning, the function <code>getByName()</code> has to be named <code>getByNameOrNullIfNotFound()</code>. The same should happen with every function that returns an object or <code>NULL</code>. Otherwise, ambiguity is inevitable for a code reader. Thus, to keep semantic unambiguous, you should give longer names to functions.</p><p>To get rid of this ambiguity, always return a real object, a null object or <a href="/2015/12/01/rethrow-exceptions.html">throw</a> an exception.</p><p>Some may argue that we sometimes have to return <code>NULL</code>, for the sake of performance. For example, method <code>get()</code> of interface <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html"><code>Map</code></a> in Java returns <code>NULL</code> when there is no such item in the map:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Employee</span> <span class="n">employee</span> <span class="o">=</span> <span class="n">employees</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(</span><span class="n">employee</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">EmployeeNotFoundException</span><span class="o">();</span>
<span class="o">}</span>
<span class="k">return</span> <span class="n">employee</span><span class="o">;</span></code></pre></figure><p>This code searches the map only once due to the usage of <code>NULL</code> in <code>Map</code>. If we would refactor <code>Map</code> so that its method <code>get()</code> will throw an exception if nothing is found, our code will look like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">if</span> <span class="o">(!</span><span class="n">employees</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">))</span> <span class="o">{</span> <span class="c1">// first search</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">EmployeeNotFoundException</span><span class="o">();</span>
<span class="o">}</span>
<span class="k">return</span> <span class="n">employees</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">);</span> <span class="c1">// second search</span></code></pre></figure><p>Obviously, this is method is twice as slow as the first one. What to do?</p><p>The <code>Map</code> interface (no offense to its authors) has a design flaw. Its method <code>get()</code> should have been returning an <a href="/2015/04/30/iterating-adapter.html"><code>Iterator</code></a> so that our code would look like:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Iterator</span> <span class="n">found</span> <span class="o">=</span> <span class="n">Map</span><span class="o">.</span><span class="na">search</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(!</span><span class="n">found</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">EmployeeNotFoundException</span><span class="o">();</span>
<span class="o">}</span>
<span class="k">return</span> <span class="n">found</span><span class="o">.</span><span class="na">next</span><span class="o">();</span></code></pre></figure><p>BTW, that is exactly how C++ STL <a href="http://en.cppreference.com/w/cpp/container/map/find">map::find()</a> method is designed.</p><h2 id="computer-thinking-vs-object-thinking">Computer Thinking vs. Object Thinking</h2><p>Statement <code>if (employee == null)</code> is understood by someone who knows that an object in Java is a pointer to a data structure and that <code>NULL</code> is a pointer to nothing (<code>0x00000000</code>, in Intel x86 processors).</p><p>However, if you start thinking as an object, this statement makes much less sense. This is how our code looks from an object point of view:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>- Hello, is it a software department?
- Yes.
- Let me talk to your employee &quot;Jeffrey&quot; please.
- Hold the line please...
- Hello.
- Are you NULL?</code></pre></figure><p>The last question in this conversation sounds weird, doesn&#39;t it?</p><p>Instead, if they hang up the phone after our request to speak to Jeffrey, that causes a problem for us (Exception). At that point, we try to call again or inform our supervisor that we can&#39;t reach Jeffrey and complete a bigger transaction.</p><p>Alternatively, they may let us speak to another person, who is not Jeffrey, but who can help with most of our questions or refuse to help if we need something &quot;Jeffrey specific&quot; (Null Object).</p><h2 id="slow-failing">Slow Failing</h2><p>Instead of <a href="http://martinfowler.com/ieeeSoftware/failFast.pdf">failing fast</a>, the code above attempts to die slowly, killing others on its way. Instead of letting everyone know that something went wrong and that an exception handling should start immediately, it is hiding this failure from its client.</p><p>This argument is close to the &quot;ad-hoc error handling&quot; discussed above.</p><p>It is a good practice to make your code as fragile as possible, letting it break when necessary.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=o3aNJX7AP3M'><div class='box'> <img src='https://i.ytimg.com/vi/o3aNJX7AP3M/mqdefault.jpg' alt='YouTube video #o3aNJX7AP3M'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>What is Wrong About NULL in OOP? (webinar #3); 3 June 2015.</div></aside><p>Make your methods extremely demanding as to the data they manipulate. Let them complain by throwing exceptions, if the provided data provided is not sufficient or simply doesn&#39;t fit with the main usage scenario of the method.</p><p>Otherwise, return a Null Object, that exposes some common behavior and throws exceptions on all other calls:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="n">Employee</span> <span class="nf">getByName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
  <span class="n">Employee</span> <span class="n">employee</span><span class="o">;</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">id</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">employee</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">()</span> <span class="o">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="n">String</span> <span class="nf">name</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">&quot;anonymous&quot;</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">transferTo</span><span class="o">(</span><span class="n">Department</span> <span class="n">dept</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">AnonymousEmployeeException</span><span class="o">(</span>
          <span class="s">&quot;I can&#39;t be transferred, I&#39;m anonymous&quot;</span>
        <span class="o">);</span>
      <span class="o">}</span>
    <span class="o">};</span>
  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="n">employee</span> <span class="o">=</span> <span class="n">Employee</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">employee</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure> <blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Say, you are designing a method findUserByName(), which has to find a user in the database. What would you return if nothing is found? <a href="https://twitter.com/hashtag/elegantobjects?src=hash&amp;ref_src=twsrc%5Etfw">#elegantobjects</a></p>--- Yegor Bugayenko (@yegor256) <a href="https://twitter.com/yegor256/status/990459955818979329?ref_src=twsrc%5Etfw">April 29, 2018</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><h2 id="mutable-and-incomplete-objects">Mutable and Incomplete Objects</h2><p>In general, it is <a href="/2014/06/09/objects-should-be-immutable.html">highly recommended</a> to design objects with immutability in mind. This means that an object gets all necessary knowledge during its instantiating and never changes its state during the entire life-cycle.</p><p>Very often, <code>NULL</code> values are used in <a href="/2017/10/17/lazy-loading-caching-sticky-cactoos.html">lazy loading</a>, to make objects incomplete and mutable. For example:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Department</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">Employee</span> <span class="n">found</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kd">synchronized</span> <span class="n">Employee</span> <span class="nf">manager</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">found</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">found</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">found</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This technology, although widely used, is an anti-pattern in <a href="/2016/08/15/what-is-wrong-object-oriented-programming.html">OOP</a>. Mostly because it makes an object responsible for performance problems of the computational platform, which is something an <code>Employee</code> object should not be aware of.</p><p>Instead of managing a state and exposing its business-relevant behavior, an object has to take care of the caching of its own results---this is what lazy loading is about.</p><p>Caching is not something an employee does in the office, does he?</p><p>The solution? Don&#39;t use lazy loading in such a primitive way, as in the example above. Instead, move this caching problem to another layer of your application.</p><p>For example, in Java, you can use aspect-oriented programming aspects. For example, <a href="http://aspects.jcabi.com">jcabi-aspects</a> has <a href="http://aspects.jcabi.com/annotation-cacheable.html"><code>@Cacheable</code></a> annotation that caches the value returned by a method:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">com.jcabi.aspects.Cacheable</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Department</span> <span class="o">{</span>
  <span class="nd">@Cacheable</span><span class="o">(</span><span class="n">forever</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
  <span class="kd">public</span> <span class="n">Employee</span> <span class="nf">manager</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="s">&quot;Jacky Brown&quot;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>I hope this analysis was convincing enough that you will stop <code>NULL</code>-ing your code :)</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/05/13/why-null-is-bad.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/05/13/why-null-is-bad.html&amp;text=Why+NULL+is+Bad%3F" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/05/13/why-null-is-bad.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/05/13/why-null-is-bad.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/05/13/why-null-is-bad.html%3F2014-19&amp;title=Why+NULL+is+Bad%3F" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/05/13/why-null-is-bad.html%3F2014-19&amp;t=Why+NULL+is+Bad%3F" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>A simple example of <code>NULL</code> usage in Java:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="n">Employee</span> <span class="nf">getByName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">id</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>What is wrong with this method?</p><p>It may return <code>NULL</code> instead of an object---that&#39;s what is wrong. <code>NULL</code> is a terrible practice in an object-oriented paradigm and should be avoided at <a href="/2016/03/22/try-finally-if-not-null.html">all costs</a>. There have been a number of opinions about this published already, including <a href="http://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare">Null References, The Billion Dollar Mistake</a> presentation by Tony Hoare and the entire <a href="http://amzn.to/266oJr4">Object Thinking</a> book by David West.</p><p>Here, I&#39;ll try to summarize all the arguments and show examples of how <code>NULL</code> usage can be avoided and replaced with proper object-oriented constructs.</p><p>Basically, there are two possible alternatives to <code>NULL</code>.</p><p>The first one is <strong><a href="http://en.wikipedia.org/wiki/Null_Object_pattern">Null Object</a></strong> design <a href="/2016/02/03/design-patterns-and-anti-patterns.html">pattern</a> (the best way is to make it a constant):</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="n">Employee</span> <span class="nf">getByName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">id</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Employee</span><span class="o">.</span><span class="na">NOBODY</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">Employee</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>The second possible alternative is to <a href="/2015/08/25/fail-fast.html">fail fast</a> by throwing an <strong>Exception</strong> when you can&#39;t return an <a href="/2016/07/14/who-is-object.html">object</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="n">Employee</span> <span class="nf">getByName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">id</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="n">EmployeeNotFoundException</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">Employee</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>Now, let&#39;s see the arguments against <code>NULL</code>.</p><p>Besides Tony Hoare&#39;s presentation and David West&#39;s book mentioned above, I read these publications before writing this post: <a href="http://amzn.to/2m7LmaA">Clean Code</a> by Robert Martin, <a href="http://amzn.to/2cs4cXW">Code Complete</a> by Steve McConnell, <a href="http://elegantcode.com/2010/05/01/say-no-to-null/">Say &quot;No&quot; to &quot;Null&quot;</a> by John Sonmez, <a href="http://stackoverflow.com/questions/1274792/is-returning-null-bad-design">Is returning null bad design?</a> discussion at StackOverflow.</p><h2 id="ad-hoc-error-handling">Ad-hoc Error Handling</h2><p>Every time you get an object as an input you must check whether it is <code>NULL</code> or a valid object reference. If you forget to check, a <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html"><code>NullPointerException</code></a> (NPE) may break execution in runtime. Thus, your logic becomes polluted with multiple checks and if/then/else forks:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="c1">// this is a terrible design, don&#39;t reuse</span>
<span class="n">Employee</span> <span class="n">employee</span> <span class="o">=</span> <span class="n">dept</span><span class="o">.</span><span class="na">getByName</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(</span><span class="n">employee</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;can&#39;t find an employee&quot;</span><span class="o">);</span>
  <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(-</span><span class="mi">1</span><span class="o">);</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
  <span class="n">employee</span><span class="o">.</span><span class="na">transferTo</span><span class="o">(</span><span class="n">dept2</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>This is how exceptional situations are supposed to be handled in <a href="http://en.wikipedia.org/wiki/C_%28programming_language%29">C</a> and other imperative procedural languages. OOP introduced <a href="http://en.wikipedia.org/wiki/Exception_handling">exception handling</a> primarily to get rid of these ad-hoc error handling blocks. In OOP, we let exceptions bubble up until they reach an application-wide error handler and our code becomes much cleaner and shorter:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">dept</span><span class="o">.</span><span class="na">getByName</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">).</span><span class="na">transferTo</span><span class="o">(</span><span class="n">dept2</span><span class="o">);</span></code></pre></figure><p>Consider <code>NULL</code> references an inheritance of procedural programming, and use 1) Null Objects or 2) Exceptions instead.</p><h2 id="ambiguous-semantic">Ambiguous Semantic</h2><p>In order to explicitly convey its meaning, the function <code>getByName()</code> has to be named <code>getByNameOrNullIfNotFound()</code>. The same should happen with every function that returns an object or <code>NULL</code>. Otherwise, ambiguity is inevitable for a code reader. Thus, to keep semantic unambiguous, you should give longer names to functions.</p><p>To get rid of this ambiguity, always return a real object, a null object or <a href="/2015/12/01/rethrow-exceptions.html">throw</a> an exception.</p><p>Some may argue that we sometimes have to return <code>NULL</code>, for the sake of performance. For example, method <code>get()</code> of interface <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html"><code>Map</code></a> in Java returns <code>NULL</code> when there is no such item in the map:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Employee</span> <span class="n">employee</span> <span class="o">=</span> <span class="n">employees</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(</span><span class="n">employee</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">EmployeeNotFoundException</span><span class="o">();</span>
<span class="o">}</span>
<span class="k">return</span> <span class="n">employee</span><span class="o">;</span></code></pre></figure><p>This code searches the map only once due to the usage of <code>NULL</code> in <code>Map</code>. If we would refactor <code>Map</code> so that its method <code>get()</code> will throw an exception if nothing is found, our code will look like this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">if</span> <span class="o">(!</span><span class="n">employees</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">))</span> <span class="o">{</span> <span class="c1">// first search</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">EmployeeNotFoundException</span><span class="o">();</span>
<span class="o">}</span>
<span class="k">return</span> <span class="n">employees</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">);</span> <span class="c1">// second search</span></code></pre></figure><p>Obviously, this is method is twice as slow as the first one. What to do?</p><p>The <code>Map</code> interface (no offense to its authors) has a design flaw. Its method <code>get()</code> should have been returning an <a href="/2015/04/30/iterating-adapter.html"><code>Iterator</code></a> so that our code would look like:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Iterator</span> <span class="n">found</span> <span class="o">=</span> <span class="n">Map</span><span class="o">.</span><span class="na">search</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(!</span><span class="n">found</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">EmployeeNotFoundException</span><span class="o">();</span>
<span class="o">}</span>
<span class="k">return</span> <span class="n">found</span><span class="o">.</span><span class="na">next</span><span class="o">();</span></code></pre></figure><p>BTW, that is exactly how C++ STL <a href="http://en.cppreference.com/w/cpp/container/map/find">map::find()</a> method is designed.</p><h2 id="computer-thinking-vs-object-thinking">Computer Thinking vs. Object Thinking</h2><p>Statement <code>if (employee == null)</code> is understood by someone who knows that an object in Java is a pointer to a data structure and that <code>NULL</code> is a pointer to nothing (<code>0x00000000</code>, in Intel x86 processors).</p><p>However, if you start thinking as an object, this statement makes much less sense. This is how our code looks from an object point of view:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>- Hello, is it a software department?
- Yes.
- Let me talk to your employee &quot;Jeffrey&quot; please.
- Hold the line please...
- Hello.
- Are you NULL?</code></pre></figure><p>The last question in this conversation sounds weird, doesn&#39;t it?</p><p>Instead, if they hang up the phone after our request to speak to Jeffrey, that causes a problem for us (Exception). At that point, we try to call again or inform our supervisor that we can&#39;t reach Jeffrey and complete a bigger transaction.</p><p>Alternatively, they may let us speak to another person, who is not Jeffrey, but who can help with most of our questions or refuse to help if we need something &quot;Jeffrey specific&quot; (Null Object).</p><h2 id="slow-failing">Slow Failing</h2><p>Instead of <a href="http://martinfowler.com/ieeeSoftware/failFast.pdf">failing fast</a>, the code above attempts to die slowly, killing others on its way. Instead of letting everyone know that something went wrong and that an exception handling should start immediately, it is hiding this failure from its client.</p><p>This argument is close to the &quot;ad-hoc error handling&quot; discussed above.</p><p>It is a good practice to make your code as fragile as possible, letting it break when necessary.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=o3aNJX7AP3M'><div class='box'> <img src='https://i.ytimg.com/vi/o3aNJX7AP3M/mqdefault.jpg' alt='YouTube video #o3aNJX7AP3M'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>What is Wrong About NULL in OOP? (webinar #3); 3 June 2015.</div></aside><p>Make your methods extremely demanding as to the data they manipulate. Let them complain by throwing exceptions, if the provided data provided is not sufficient or simply doesn&#39;t fit with the main usage scenario of the method.</p><p>Otherwise, return a Null Object, that exposes some common behavior and throws exceptions on all other calls:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="n">Employee</span> <span class="nf">getByName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
  <span class="n">Employee</span> <span class="n">employee</span><span class="o">;</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">id</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">employee</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">()</span> <span class="o">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="n">String</span> <span class="nf">name</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">&quot;anonymous&quot;</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">transferTo</span><span class="o">(</span><span class="n">Department</span> <span class="n">dept</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">AnonymousEmployeeException</span><span class="o">(</span>
          <span class="s">&quot;I can&#39;t be transferred, I&#39;m anonymous&quot;</span>
        <span class="o">);</span>
      <span class="o">}</span>
    <span class="o">};</span>
  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="n">employee</span> <span class="o">=</span> <span class="n">Employee</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">employee</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure> <blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Say, you are designing a method findUserByName(), which has to find a user in the database. What would you return if nothing is found? <a href="https://twitter.com/hashtag/elegantobjects?src=hash&amp;ref_src=twsrc%5Etfw">#elegantobjects</a></p>--- Yegor Bugayenko (@yegor256) <a href="https://twitter.com/yegor256/status/990459955818979329?ref_src=twsrc%5Etfw">April 29, 2018</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><h2 id="mutable-and-incomplete-objects">Mutable and Incomplete Objects</h2><p>In general, it is <a href="/2014/06/09/objects-should-be-immutable.html">highly recommended</a> to design objects with immutability in mind. This means that an object gets all necessary knowledge during its instantiating and never changes its state during the entire life-cycle.</p><p>Very often, <code>NULL</code> values are used in <a href="/2017/10/17/lazy-loading-caching-sticky-cactoos.html">lazy loading</a>, to make objects incomplete and mutable. For example:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Department</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">Employee</span> <span class="n">found</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kd">synchronized</span> <span class="n">Employee</span> <span class="nf">manager</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">found</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">found</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="s">&quot;Jeffrey&quot;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">found</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This technology, although widely used, is an anti-pattern in <a href="/2016/08/15/what-is-wrong-object-oriented-programming.html">OOP</a>. Mostly because it makes an object responsible for performance problems of the computational platform, which is something an <code>Employee</code> object should not be aware of.</p><p>Instead of managing a state and exposing its business-relevant behavior, an object has to take care of the caching of its own results---this is what lazy loading is about.</p><p>Caching is not something an employee does in the office, does he?</p><p>The solution? Don&#39;t use lazy loading in such a primitive way, as in the example above. Instead, move this caching problem to another layer of your application.</p><p>For example, in Java, you can use aspect-oriented programming aspects. For example, <a href="http://aspects.jcabi.com">jcabi-aspects</a> has <a href="http://aspects.jcabi.com/annotation-cacheable.html"><code>@Cacheable</code></a> annotation that caches the value returned by a method:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">com.jcabi.aspects.Cacheable</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Department</span> <span class="o">{</span>
  <span class="nd">@Cacheable</span><span class="o">(</span><span class="n">forever</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
  <span class="kd">public</span> <span class="n">Employee</span> <span class="nf">manager</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">(</span><span class="s">&quot;Jacky Brown&quot;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>I hope this analysis was convincing enough that you will stop <code>NULL</code>-ing your code :)</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="Utility classes are a very popular design pattern in Java and other object-oriented languages. However, many consider them a terrible practice to be avoided. " /> <meta name="keywords" content="static is evil, static methods is evil, utility class is bad, utility class is evil, utility classes are bad, utility classes are evil, utility classes is a bad practice" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-05-05 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="OOP Alternative to Utility Classes"/> <meta name="twitter:description" property="og:description" content="Utility classes are a very popular design pattern in Java and other object-oriented languages. However, many consider them a terrible practice to be avoided. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/05/05/oop-alternative-to-utility-classes.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2014/05/05/oop-alternative-to-utility-classes.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/05/05/oop-alternative-to-utility-classes.amp.html" /> <title>OOP Alternative to Utility Classes </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/05/05/oop-alternative-to-utility-classes.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2014/05/05/oop-alternative-to-utility-classes.html">https://www.yegor256.com/2014/05/05/oop-alternative-to-utility-classes.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">OOP Alternative to Utility Classes</h1><aside class='book'><a href='http://amzn.to/2qFt4Tn'><img src='/images/books/elegant-objects/cover.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='http://amzn.to/2qFt4Tn'>Section&nbsp;3.2</a><br/> of my book<a href='http://amzn.to/2qFt4Tn'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-05-05T00:00:00+00:00"> 5 May 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/05/05/oop-alternative-to-utility-classes.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><ul class="unprintable subline"> <li>Translated:</li> <li><a href="http://tbd.kaitoy.xyz/2016/01/03/oop-alternative-to-utility-classes/">Japanese</a></li> <li><a href="http://agorlov.ru/oop-alternative-to-utility-classes.html">Russian</a></li> <li><a href="mailto:translate@yegor256.com">add yours!</a></li></ul><p class="unprintable"><p>A utility class (aka helper class) is a &quot;structure&quot; that has only static methods and encapsulates no state. <code>StringUtils</code>, <code>IOUtils</code>, <code>FileUtils</code> from <a href="http://commons.apache.org/">Apache Commons</a>; <code>Iterables</code> and <code>Iterators</code> from <a href="https://code.google.com/p/guava-libraries/">Guava</a>, and <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html"><code>Files</code></a> from JDK7 are perfect examples of utility classes.</p><p>This design idea is very popular in the Java world (as well as C#, Ruby, etc.) because utility classes provide common functionality used everywhere.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=psrp3TtaYYI'><div class='box'> <img src='https://i.ytimg.com/vi/psrp3TtaYYI/mqdefault.jpg' alt='YouTube video #psrp3TtaYYI'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>What&#39;s Wrong About Utility Classes? (webinar #6); 2 September 2015.</div></aside><p>Here, we want to follow the <a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY principle</a> and avoid duplication. Therefore, we place common code blocks into utility classes and reuse them when necessary:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="c1">// This is a terrible design, don&#39;t reuse</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NumberUtils</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">max</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span> <span class="o">?</span> <span class="n">a</span> <span class="o">:</span> <span class="n">b</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Indeed, this a very convenient technique!?</p><h2 id="utility-classes-are-evil">Utility Classes Are Evil</h2><p>However, in an object-oriented world, utility classes are considered a very bad (some even may say &quot;terrible&quot;) practice.</p><p>There have been many discussions of this subject; to name a few: <a href="http://blogs.msdn.com/b/nickmalik/archive/2005/09/06/461404.aspx">Are Helper Classes Evil?</a> by Nick Malik, <a href="http://smart421.wordpress.com/2011/08/31/why-helper-singletons-and-utility-classes-are-mostly-bad-2/">Why helper, singletons and utility classes are mostly bad</a> by Simon Hart, <a href="https://github.com/marshallward/marshallward.org/blob/master/content/avoid_util_classes.rst">Avoiding Utility Classes</a> by Marshal Ward, <a href="http://www.jroller.com/DhavalDalal/entry/kill_that_util_class">Kill That Util Class!</a> by Dhaval Dalal, <a href="http://www.robbagby.com/posts/helper-classes-are-a-code-smell/">Helper Classes Are A Code Smell</a> by Rob Bagby.</p><p>Additionally, there are a few questions on StackExchange about utility classes: <a href="http://stackoverflow.com/questions/3339929/if-a-utilities-class-is-evil-where-do-i-put-my-generic-code">If a “Utilities” class is evil, where do I put my generic code?</a>, <a href="http://stackoverflow.com/questions/3340032/utility-classes-are-evil">Utility Classes are Evil</a>.</p><p>A dry summary of all their arguments is that utility classes are not proper <strong>objects</strong>; therefore, they don&#39;t fit into object-oriented world. They were inherited from <strong>procedural</strong> programming, mostly because we were used to a functional decomposition paradigm back then.</p><p>Assuming you agree with the arguments and want to stop using utility classes, I&#39;ll show by example how these creatures can be replaced with proper <a href="/2016/07/14/who-is-object.html">objects</a>.</p><h2 id="procedural-example">Procedural Example</h2><p>Say, for instance, you want to read a text file, split it into lines, trim every line and then save the results in another file. This is can be done with <a href="http://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FileUtils.html"><code>FileUtils</code></a> from Apache Commons:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kt">void</span> <span class="nf">transform</span><span class="o">(</span><span class="n">File</span> <span class="n">in</span><span class="o">,</span> <span class="n">File</span> <span class="n">out</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">src</span> <span class="o">=</span> <span class="n">FileUtils</span><span class="o">.</span><span class="na">readLines</span><span class="o">(</span><span class="n">in</span><span class="o">,</span> <span class="s">&quot;UTF-8&quot;</span><span class="o">);</span>
  <span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">dest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;(</span><span class="n">src</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
  <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">line</span> <span class="o">:</span> <span class="n">src</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">dest</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">line</span><span class="o">.</span><span class="na">trim</span><span class="o">());</span>
  <span class="o">}</span>
  <span class="n">FileUtils</span><span class="o">.</span><span class="na">writeLines</span><span class="o">(</span><span class="n">out</span><span class="o">,</span> <span class="n">dest</span><span class="o">,</span> <span class="s">&quot;UTF-8&quot;</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>The above code may look clean; however, this is procedural programming, not object-oriented. We are manipulating data (bytes and bits) and explicitly instructing the computer from where to retrieve them and then where to put them on every single line of code. We&#39;re defining <em>a procedure of execution</em>.</p><h2 id="object-oriented-alternative">Object-Oriented Alternative</h2><p>In an object-oriented paradigm, we should instantiate and compose objects, thus letting them manage data when and how <em>they</em> desire. Instead of calling supplementary static functions, we should create objects that are capable of exposing the behavior we are seeking:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Max</span> <span class="kd">implements</span> <span class="n">Number</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">a</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">b</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Max</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">a</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">b</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">intValue</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">a</span> <span class="o">&gt;</span> <span class="k">this</span><span class="o">.</span><span class="na">b</span> <span class="o">?</span> <span class="k">this</span><span class="o">.</span><span class="na">a</span> <span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="na">b</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This procedural call:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="n">NumberUtils</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">5</span><span class="o">);</span></code></pre></figure><p>Will become object-oriented:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Max</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">5</span><span class="o">).</span><span class="na">intValue</span><span class="o">();</span></code></pre></figure><p>Potato, potato? Not really; just read on...</p><h2 id="objects-instead-of-data-structures">Objects Instead of Data Structures</h2><p>This is how I would design the same file-transforming functionality as above but in an object-oriented manner:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kt">void</span> <span class="nf">transform</span><span class="o">(</span><span class="n">File</span> <span class="n">in</span><span class="o">,</span> <span class="n">File</span> <span class="n">out</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">src</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Trimmed</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">FileLines</span><span class="o">(</span><span class="k">new</span> <span class="n">UnicodeFile</span><span class="o">(</span><span class="n">in</span><span class="o">))</span>
  <span class="o">);</span>
  <span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">dest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileLines</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">UnicodeFile</span><span class="o">(</span><span class="n">out</span><span class="o">)</span>
  <span class="o">);</span>
  <span class="n">dest</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">src</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p><code>FileLines</code> implements <code>Collection&lt;String&gt;</code> and encapsulates all file reading and writing operations. An instance of <code>FileLines</code> behaves exactly as a collection of strings and hides all I/O operations. When we iterate it---a file is being read. When we <code>addAll()</code> to it---a file is being written.</p><p><code>Trimmed</code> also implements <code>Collection&lt;String&gt;</code> and encapsulates a collection of strings (<a href="http://en.wikipedia.org/wiki/Decorator_pattern">Decorator pattern</a>). Every time the next line is retrieved, it gets trimmed.</p><p>All classes taking participation in the snippet are rather small: <code>Trimmed</code>, <code>FileLines</code>, and <code>UnicodeFile</code>. Each of them is responsible for its own single feature, thus following perfectly the <a href="http://en.wikipedia.org/wiki/Single_responsibility_principle">single responsibility principle</a>.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=D0dqC_3Bch8'><div class='box'> <img src='https://i.ytimg.com/vi/D0dqC_3Bch8/mqdefault.jpg' alt='YouTube video #D0dqC_3Bch8'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Objects vs. Static Methods (webinar #1); 8 April 2015.</div></aside><p>On our side, as users of the library, this may be not so important, but for their developers it is an imperative. It is much easier to develop, maintain and unit-test class <code>FileLines</code> rather than using a <code>readLines()</code> method in a 80+ methods and 3000 lines utility class <code>FileUtils</code>. Seriously, look at <a href="https://github.com/apache/commons-io/blob/commons-io-2.5/src/main/java/org/apache/commons/io/FileUtils.java">its source code</a>.</p><p>An object-oriented approach enables lazy execution. The <code>in</code> file is not read until its data is required. If we fail to open <code>out</code> due to some I/O error, the first file won&#39;t even be touched. The whole show starts only after we call <code>addAll()</code>.</p><p>All lines in the second snippet, except the last one, instantiate and compose smaller objects into bigger ones. This object composition is rather cheap for the CPU since it doesn&#39;t cause any data transformations.</p><p>Besides that, it is obvious that the second script runs in O(1) space, while the first one executes in O(n). This is the consequence of our procedural approach to data in the first script.</p><p>In an object-oriented world, there is no data; there are only objects and their behavior!</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/05/05/oop-alternative-to-utility-classes.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/05/05/oop-alternative-to-utility-classes.html&amp;text=OOP+Alternative+to+Utility+Classes" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/05/05/oop-alternative-to-utility-classes.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/05/05/oop-alternative-to-utility-classes.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/05/05/oop-alternative-to-utility-classes.html%3F2014-18&amp;title=OOP+Alternative+to+Utility+Classes" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/05/05/oop-alternative-to-utility-classes.html%3F2014-18&amp;t=OOP+Alternative+to+Utility+Classes" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>A utility class (aka helper class) is a &quot;structure&quot; that has only static methods and encapsulates no state. <code>StringUtils</code>, <code>IOUtils</code>, <code>FileUtils</code> from <a href="http://commons.apache.org/">Apache Commons</a>; <code>Iterables</code> and <code>Iterators</code> from <a href="https://code.google.com/p/guava-libraries/">Guava</a>, and <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html"><code>Files</code></a> from JDK7 are perfect examples of utility classes.</p><p>This design idea is very popular in the Java world (as well as C#, Ruby, etc.) because utility classes provide common functionality used everywhere.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=psrp3TtaYYI'><div class='box'> <img src='https://i.ytimg.com/vi/psrp3TtaYYI/mqdefault.jpg' alt='YouTube video #psrp3TtaYYI'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>What&#39;s Wrong About Utility Classes? (webinar #6); 2 September 2015.</div></aside><p>Here, we want to follow the <a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY principle</a> and avoid duplication. Therefore, we place common code blocks into utility classes and reuse them when necessary:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="c1">// This is a terrible design, don&#39;t reuse</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NumberUtils</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">max</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span> <span class="o">?</span> <span class="n">a</span> <span class="o">:</span> <span class="n">b</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Indeed, this a very convenient technique!?</p><h2 id="utility-classes-are-evil">Utility Classes Are Evil</h2><p>However, in an object-oriented world, utility classes are considered a very bad (some even may say &quot;terrible&quot;) practice.</p><p>There have been many discussions of this subject; to name a few: <a href="http://blogs.msdn.com/b/nickmalik/archive/2005/09/06/461404.aspx">Are Helper Classes Evil?</a> by Nick Malik, <a href="http://smart421.wordpress.com/2011/08/31/why-helper-singletons-and-utility-classes-are-mostly-bad-2/">Why helper, singletons and utility classes are mostly bad</a> by Simon Hart, <a href="https://github.com/marshallward/marshallward.org/blob/master/content/avoid_util_classes.rst">Avoiding Utility Classes</a> by Marshal Ward, <a href="http://www.jroller.com/DhavalDalal/entry/kill_that_util_class">Kill That Util Class!</a> by Dhaval Dalal, <a href="http://www.robbagby.com/posts/helper-classes-are-a-code-smell/">Helper Classes Are A Code Smell</a> by Rob Bagby.</p><p>Additionally, there are a few questions on StackExchange about utility classes: <a href="http://stackoverflow.com/questions/3339929/if-a-utilities-class-is-evil-where-do-i-put-my-generic-code">If a “Utilities” class is evil, where do I put my generic code?</a>, <a href="http://stackoverflow.com/questions/3340032/utility-classes-are-evil">Utility Classes are Evil</a>.</p><p>A dry summary of all their arguments is that utility classes are not proper <strong>objects</strong>; therefore, they don&#39;t fit into object-oriented world. They were inherited from <strong>procedural</strong> programming, mostly because we were used to a functional decomposition paradigm back then.</p><p>Assuming you agree with the arguments and want to stop using utility classes, I&#39;ll show by example how these creatures can be replaced with proper <a href="/2016/07/14/who-is-object.html">objects</a>.</p><h2 id="procedural-example">Procedural Example</h2><p>Say, for instance, you want to read a text file, split it into lines, trim every line and then save the results in another file. This is can be done with <a href="http://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FileUtils.html"><code>FileUtils</code></a> from Apache Commons:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kt">void</span> <span class="nf">transform</span><span class="o">(</span><span class="n">File</span> <span class="n">in</span><span class="o">,</span> <span class="n">File</span> <span class="n">out</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">src</span> <span class="o">=</span> <span class="n">FileUtils</span><span class="o">.</span><span class="na">readLines</span><span class="o">(</span><span class="n">in</span><span class="o">,</span> <span class="s">&quot;UTF-8&quot;</span><span class="o">);</span>
  <span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">dest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;(</span><span class="n">src</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
  <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">line</span> <span class="o">:</span> <span class="n">src</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">dest</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">line</span><span class="o">.</span><span class="na">trim</span><span class="o">());</span>
  <span class="o">}</span>
  <span class="n">FileUtils</span><span class="o">.</span><span class="na">writeLines</span><span class="o">(</span><span class="n">out</span><span class="o">,</span> <span class="n">dest</span><span class="o">,</span> <span class="s">&quot;UTF-8&quot;</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>The above code may look clean; however, this is procedural programming, not object-oriented. We are manipulating data (bytes and bits) and explicitly instructing the computer from where to retrieve them and then where to put them on every single line of code. We&#39;re defining <em>a procedure of execution</em>.</p><h2 id="object-oriented-alternative">Object-Oriented Alternative</h2><p>In an object-oriented paradigm, we should instantiate and compose objects, thus letting them manage data when and how <em>they</em> desire. Instead of calling supplementary static functions, we should create objects that are capable of exposing the behavior we are seeking:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Max</span> <span class="kd">implements</span> <span class="n">Number</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">a</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">b</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Max</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">a</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">b</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">intValue</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">a</span> <span class="o">&gt;</span> <span class="k">this</span><span class="o">.</span><span class="na">b</span> <span class="o">?</span> <span class="k">this</span><span class="o">.</span><span class="na">a</span> <span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="na">b</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This procedural call:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="n">NumberUtils</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">5</span><span class="o">);</span></code></pre></figure><p>Will become object-oriented:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Max</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">5</span><span class="o">).</span><span class="na">intValue</span><span class="o">();</span></code></pre></figure><p>Potato, potato? Not really; just read on...</p><h2 id="objects-instead-of-data-structures">Objects Instead of Data Structures</h2><p>This is how I would design the same file-transforming functionality as above but in an object-oriented manner:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kt">void</span> <span class="nf">transform</span><span class="o">(</span><span class="n">File</span> <span class="n">in</span><span class="o">,</span> <span class="n">File</span> <span class="n">out</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">src</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Trimmed</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">FileLines</span><span class="o">(</span><span class="k">new</span> <span class="n">UnicodeFile</span><span class="o">(</span><span class="n">in</span><span class="o">))</span>
  <span class="o">);</span>
  <span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">dest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileLines</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">UnicodeFile</span><span class="o">(</span><span class="n">out</span><span class="o">)</span>
  <span class="o">);</span>
  <span class="n">dest</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">src</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure><p><code>FileLines</code> implements <code>Collection&lt;String&gt;</code> and encapsulates all file reading and writing operations. An instance of <code>FileLines</code> behaves exactly as a collection of strings and hides all I/O operations. When we iterate it---a file is being read. When we <code>addAll()</code> to it---a file is being written.</p><p><code>Trimmed</code> also implements <code>Collection&lt;String&gt;</code> and encapsulates a collection of strings (<a href="http://en.wikipedia.org/wiki/Decorator_pattern">Decorator pattern</a>). Every time the next line is retrieved, it gets trimmed.</p><p>All classes taking participation in the snippet are rather small: <code>Trimmed</code>, <code>FileLines</code>, and <code>UnicodeFile</code>. Each of them is responsible for its own single feature, thus following perfectly the <a href="http://en.wikipedia.org/wiki/Single_responsibility_principle">single responsibility principle</a>.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=D0dqC_3Bch8'><div class='box'> <img src='https://i.ytimg.com/vi/D0dqC_3Bch8/mqdefault.jpg' alt='YouTube video #D0dqC_3Bch8'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>Objects vs. Static Methods (webinar #1); 8 April 2015.</div></aside><p>On our side, as users of the library, this may be not so important, but for their developers it is an imperative. It is much easier to develop, maintain and unit-test class <code>FileLines</code> rather than using a <code>readLines()</code> method in a 80+ methods and 3000 lines utility class <code>FileUtils</code>. Seriously, look at <a href="https://github.com/apache/commons-io/blob/commons-io-2.5/src/main/java/org/apache/commons/io/FileUtils.java">its source code</a>.</p><p>An object-oriented approach enables lazy execution. The <code>in</code> file is not read until its data is required. If we fail to open <code>out</code> due to some I/O error, the first file won&#39;t even be touched. The whole show starts only after we call <code>addAll()</code>.</p><p>All lines in the second snippet, except the last one, instantiate and compose smaller objects into bigger ones. This object composition is rather cheap for the CPU since it doesn&#39;t cause any data transformations.</p><p>Besides that, it is obvious that the second script runs in O(1) space, while the first one executes in O(n). This is the consequence of our procedural approach to data in the first script.</p><p>In an object-oriented world, there is no data; there are only objects and their behavior!</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="The article lists the most common programming mistakes I catch during code reviews, which can&apos;t be caught by static analysis " /> <meta name="keywords" content="bad practices, bad practices in java, bad practices in programming, good practices in programming, java programming good practices, mistakes in OOP, object oriented typical mistakes" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-04-27 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Typical Mistakes in Java Code"/> <meta name="twitter:description" property="og:description" content="The article lists the most common programming mistakes I catch during code reviews, which can&apos;t be caught by static analysis "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/04/27/typical-mistakes-in-java-code.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2014/04/27/typical-mistakes-in-java-code.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/04/27/typical-mistakes-in-java-code.amp.html" /> <title>Typical Mistakes in Java Code </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/04/27/typical-mistakes-in-java-code.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2014/04/27/typical-mistakes-in-java-code.html">https://www.yegor256.com/2014/04/27/typical-mistakes-in-java-code.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">Typical Mistakes in Java Code</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-04-27T00:00:00+00:00"> 27 April 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/04/27/typical-mistakes-in-java-code.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><ul class="unprintable subline"> <li>Translated:</li> <li><a href="http://blog.csdn.net/lvshuilantian/article/details/52303290">Chinese</a></li> <li><a href="mailto:translate@yegor256.com">add yours!</a></li></ul><p class="unprintable"><p>This page contains most typical mistakes I see in the Java code of people working with me. Static analysis (we&#39;re using <a href="http://www.qulice.com">qulice</a> can&#39;t catch all of the mistakes for obvious reasons, and that&#39;s why I decided to list them all here.</p><p>Let me know if you want to see something else added here, and I&#39;ll be happy to oblige.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=9yjtsCK6Wdk'><div class='box'> <img src='https://i.ytimg.com/vi/9yjtsCK6Wdk/mqdefault.jpg' alt='YouTube video #9yjtsCK6Wdk'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>A Few Thoughts About Constructors in OOP (webinar #7); 7 October 2015.</div></aside><p>All of the listed mistakes are related to object-oriented programming in general and to Java in particular.</p><h2 id="class-names">Class Names</h2><p>Your class should be an abstraction of a real life entity with no &quot;validators,&quot; &quot;controllers,&quot; &quot;managers,&quot; etc. If your class name ends with an &quot;-er&quot;---it&#39;s <a href="http://c2.com/cgi/wiki?DontNameClassesObjectManagerHandlerOrData">a bad design</a>. BTW, here are my <a href="/2014/11/20/seven-virtues-of-good-object.html">seven virtues</a> of a good object. Also, this post explains this idea in more details: <a href="/2015/03/09/objects-end-with-er.html">Don&#39;t Create Objects That End With -ER</a>.</p><p>And, of course, utility classes are anti-patterns, like <a href="http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html"><code>StringUtils</code></a>, <a href="http://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FileUtils.html"><code>FileUtils</code></a>, and <a href="https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/IOUtils.html"><code>IOUtils</code></a> from Apache. The above are perfect examples of terrible designs. Read this follow up post: <a href="/2014/05/05/oop-alternative-to-utility-classes.html">OOP Alternative to Utility Classes</a></p><p>Of course, never add suffixes or prefixes to distinguish between <a href="http://c2.com/cgi/wiki?DontDistinguishBetweenClassesAndInterfaces">interfaces and classes</a>. For example, all of these names are terribly wrong: <code>IRecord</code>, <code>IfaceEmployee</code>, or <code>RecordInterface</code>. Usually, interface name is the name of a real-life entity, while class name should explain its implementation details. If there is nothing specific to say about an implementation, name it <code>Default,</code> <code>Simple</code>, or something similar. For example:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">SimpleUser</span> <span class="kd">implements</span> <span class="n">User</span> <span class="o">{};</span>
<span class="kd">class</span> <span class="nc">DefaultRecord</span> <span class="kd">implements</span> <span class="n">Record</span> <span class="o">{};</span>
<span class="kd">class</span> <span class="nc">Suffixed</span> <span class="kd">implements</span> <span class="n">Name</span> <span class="o">{};</span>
<span class="kd">class</span> <span class="nc">Validated</span> <span class="kd">implements</span> <span class="n">Content</span> <span class="o">{};</span>
</code></pre></div><h2 id="method-names">Method Names</h2><p>Methods can either return something or return <code>void</code>. If a method returns something, then its name should explain <em>what it returns</em>, for example (don&#39;t use the <code>get</code> prefix <a href="/2014/09/16/getters-and-setters-are-evil.html">ever</a>):</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kt">boolean</span> <span class="nf">isValid</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">);</span>
<span class="n">String</span> <span class="nf">content</span><span class="o">();</span>
<span class="kt">int</span> <span class="nf">ageOf</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">);</span>
</code></pre></div><p>If it returns <code>void,</code> then its name should explain <em>what it does</em>. For example:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kt">void</span> <span class="nf">save</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">);</span>
<span class="kt">void</span> <span class="nf">process</span><span class="o">(</span><span class="n">Work</span> <span class="n">work</span><span class="o">);</span>
<span class="kt">void</span> <span class="nf">append</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">,</span> <span class="n">String</span> <span class="n">line</span><span class="o">);</span>
</code></pre></div><p>You can read more about this idea in <a href="/elegant-objects.html">Elegant Objects</a> book, section <a href="/images/books/elegant-objects/contents.pdf">2.4</a>. There is only one exception to the rule just mentioned---test methods for JUnit. They are explained below.</p><h2 id="test-method-names">Test Method Names</h2><p>Method names in JUnit tests should be created as English sentences without spaces. It&#39;s easier to explain by example:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="cm">/</em><em></span>
<span class="cm"> * HttpRequest can return its content in Unicode.</span>
<span class="cm"> * @throws Exception If test fails</span>
<span class="cm"> */</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">returnsItsContentInUnicode</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div><p>It&#39;s important to start the first sentence of your Javadoc with the name of the class you&#39;re testing followed by <code>can</code> (or <code>cannot</code>). So, your first sentence should always be similar to &quot;somebody <em>can</em> do something.&quot;</p><p>The method name will state exactly the same, but without the subject. If I add a subject at the beginning of the method name, I should get a complete English sentence, as in above example: &quot;<code>HttpRequest</code> returns its content in Unicode.&quot;</p><p>Pay attention that the test method doesn&#39;t start with <code>can</code>. Only Javadoc comments use &#39;can.&#39;</p><p>It&#39;s a good practice to always declare test methods as throwing <code>Exception</code>.</p><h2 id="variable-names">Variable Names</h2><p>Avoid composite names of variables, like <code>timeOfDay</code>, <code>firstItem</code>, or <code>httpRequest</code>. I mean with both---class variables and in-method ones. A variable name should be long enough to avoid ambiguity in its scope of visibility, but not too long if possible. A name should be a noun in singular or plural form, or an appropriate abbreviation. More about it in this post: <a href="/2015/01/12/compound-name-is-code-smell.html">A Compound Name Is a Code Smell</a>. For example:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">names</span><span class="o">;</span>
<span class="kt">void</span> <span class="nf">sendThroughProxy</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">,</span> <span class="n">Protocol</span> <span class="n">proto</span><span class="o">);</span>
<span class="kd">private</span> <span class="n">File</span> <span class="n">content</span><span class="o">;</span>
<span class="kd">public</span> <span class="n">HttpRequest</span> <span class="n">request</span><span class="o">;</span>
</code></pre></div><p>Sometimes, you may have collisions between <a href="/2015/05/07/ctors-must-be-code-free.html">constructor</a> parameters and in-class properties if the constructor saves incoming data in an instantiated object. In this case, I recommend to create abbreviations by removing vowels (see how <a href="http://pe.usps.gov/text/pub28/28apc_002.htm">USPS abbreviates street names</a>).</p><p>Another example:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Message</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">recipient</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Message</span><span class="o">(</span><span class="n">String</span> <span class="n">rcpt</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">recipient</span> <span class="o">=</span> <span class="n">rcpt</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>In many cases, the best hint for a name of a variable can ascertained by reading its class name. Just write it with a small letter, and you should be good:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">File</span> <span class="n">file</span><span class="o">;</span>
<span class="n">User</span> <span class="n">user</span><span class="o">;</span>
<span class="n">Branch</span> <span class="n">branch</span><span class="o">;</span>
</code></pre></div><p>However, <em>never</em> do the same for primitive types, like <code>Integer number</code> or <code>String string</code>.</p><p>You can also use an adjective, when there are multiple variables with different characteristics. For instance:</p><div class="highlight"><pre><code class="language-text" data-lang="text"><span></span>String contact(String left, String right);
</code></pre></div><h2 id="constructors">Constructors</h2><p>Without <a href="/2016/06/17/dont-use-java-assertions.html">exceptions</a>, there should be only <em>one</em> constructor that stores data in object variables. All other constructors should call this one with different arguments. For example:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Server</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">address</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Server</span><span class="o">(</span><span class="n">String</span> <span class="n">uri</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">address</span> <span class="o">=</span> <span class="n">uri</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="nf">Server</span><span class="o">(</span><span class="n">URI</span> <span class="n">uri</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">(</span><span class="n">uri</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>More about it in <a href="/2015/05/28/one-primary-constructor.html">There Can Be Only One Primary Constructor</a>.</p><h2 id="one-time-variables">One-time Variables</h2><p>Avoid one-time variables at all costs. By &quot;one-time&quot; I mean variables that are used only once. Like in this example:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;data.txt&quot;</span><span class="o">;</span>
<span class="k">return</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
</code></pre></div><p>This above variable is used only once and the code should be refactored to:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">return</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;data.txt&quot;</span><span class="o">);</span>
</code></pre></div><p>Sometimes, in very rare cases---mostly because of better formatting---one-time variables may be used. Nevertheless, try to avoid such situations at all costs.</p><h2 id="exceptions">Exceptions</h2><p>Needless to say, you should <strong>never</strong> swallow exceptions, but rather let them bubble up as high as possible. Private methods should always let checked exceptions go out.</p><p>Never use exceptions for flow control. For example this code is wrong:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kt">int</span> <span class="n">size</span><span class="o">;</span>
<span class="k">try</span> <span class="o">{</span>
  <span class="n">size</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">fileSize</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div><p>Seriously, what if that <code>IOException</code> says &quot;disk is full?&quot; Will you still assume that the size of the file is zero and move on?</p><h2 id="indentation">Indentation</h2><p>For indentation, the <a href="/2014/10/23/paired-brackets-notation.html">main rule</a> is that a bracket should either end a line or be closed on the same line (reverse rule applies to a closing bracket). For example, the following is not correct because the first bracket is not closed on the same line and there are symbols after it. The second bracket is also in trouble because there are symbols in front of it and it is not opened on the same line:</p><div class="highlight"><pre><code class="language-text" data-lang="text"><span></span>final File file = new File(directory,
  &quot;file.txt&quot;);
</code></pre></div><p>Correct indentation should look like:</p><div class="highlight"><pre><code class="language-text" data-lang="text"><span></span>StringUtils.join(
  Arrays.asList(
    &quot;first line&quot;,
    &quot;second line&quot;,
    StringUtils.join(
      Arrays.asList(&quot;a&quot;, &quot;b&quot;)
    )
  ),
  &quot;separator&quot;
);
</code></pre></div><p>The second important rule of indentation says that you should put as much as possible on one line - within the limit of 80 characters. The example above is not valid since it can be compacted:</p><div class="highlight"><pre><code class="language-text" data-lang="text"><span></span>StringUtils.join(
  Arrays.asList(
    &quot;first line&quot;, &quot;second line&quot;,
    StringUtils.join(Arrays.asList(&quot;a&quot;, &quot;b&quot;))
  ),
  &quot;separator&quot;
);
</code></pre></div><h2 id="redundant-constants">Redundant Constants</h2><p>Class constants should be used when you want to share information between class methods, and this information is a characteristic (!) of your class. Don&#39;t use constants as a replacement of string or numeric literals---very bad practice that leads to code pollution. Constants (as with any <a href="/2016/07/14/who-is-object.html">object</a> in <a href="/2016/08/15/what-is-wrong-object-oriented-programming.html">OOP</a>) should have a meaning in a real world. What meaning do these constants have in the real world:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Document</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">D_LETTER</span> <span class="o">=</span> <span class="s">&quot;D&quot;</span><span class="o">;</span> <span class="c1">// bad practice</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">EXTENSION</span> <span class="o">=</span> <span class="s">&quot;.doc&quot;</span><span class="o">;</span> <span class="c1">// good practice</span>
<span class="o">}</span>
</code></pre></div><p>Another typical mistake is to use constants in <a href="/2017/05/17/single-statement-unit-tests.html">unit tests</a> to avoid duplicate string/numeric literals in test methods. <a href="/2016/05/03/test-methods-must-share-nothing.html">Don&#39;t do this</a>! Every test method should work with its own set of input values.</p><p>Use new texts and numbers in every new test method. They are independent. So, why do they have to share the same input constants?</p><h2 id="test-data-coupling">Test Data Coupling</h2><p>This is an example of <a href="http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29">data coupling</a> in a test method:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">(</span><span class="s">&quot;Jeff&quot;</span><span class="o">);</span>
<span class="c1">// maybe some other code here</span>
<span class="n">MatcherAssert</span><span class="o">.</span><span class="na">assertThat</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">name</span><span class="o">(),</span> <span class="n">Matchers</span><span class="o">.</span><span class="na">equalTo</span><span class="o">(</span><span class="s">&quot;Jeff&quot;</span><span class="o">));</span>
</code></pre></div><p>On the last line, we couple <code>&quot;Jeff&quot;</code> with the same string literal from the first line. If, a few months later, someone wants to change the value on the third line, he/she has to spend extra time finding where else <code>&quot;Jeff&quot;</code> is used in the same method.</p><p>To avoid this data coupling, you should introduce a variable. More about it here: <a href="/2015/05/25/unit-test-scaffolding.html">A Few Thoughts on Unit Test Scaffolding</a>.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/04/27/typical-mistakes-in-java-code.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/04/27/typical-mistakes-in-java-code.html&amp;text=Typical+Mistakes+in+Java+Code" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/04/27/typical-mistakes-in-java-code.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/04/27/typical-mistakes-in-java-code.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/04/27/typical-mistakes-in-java-code.html%3F2014-17&amp;title=Typical+Mistakes+in+Java+Code" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/04/27/typical-mistakes-in-java-code.html%3F2014-17&amp;t=Typical+Mistakes+in+Java+Code" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>This page contains most typical mistakes I see in the Java code of people working with me. Static analysis (we&#39;re using <a href="http://www.qulice.com">qulice</a> can&#39;t catch all of the mistakes for obvious reasons, and that&#39;s why I decided to list them all here.</p><p>Let me know if you want to see something else added here, and I&#39;ll be happy to oblige.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=9yjtsCK6Wdk'><div class='box'> <img src='https://i.ytimg.com/vi/9yjtsCK6Wdk/mqdefault.jpg' alt='YouTube video #9yjtsCK6Wdk'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>A Few Thoughts About Constructors in OOP (webinar #7); 7 October 2015.</div></aside><p>All of the listed mistakes are related to object-oriented programming in general and to Java in particular.</p><h2 id="class-names">Class Names</h2><p>Your class should be an abstraction of a real life entity with no &quot;validators,&quot; &quot;controllers,&quot; &quot;managers,&quot; etc. If your class name ends with an &quot;-er&quot;---it&#39;s <a href="http://c2.com/cgi/wiki?DontNameClassesObjectManagerHandlerOrData">a bad design</a>. BTW, here are my <a href="/2014/11/20/seven-virtues-of-good-object.html">seven virtues</a> of a good object. Also, this post explains this idea in more details: <a href="/2015/03/09/objects-end-with-er.html">Don&#39;t Create Objects That End With -ER</a>.</p><p>And, of course, utility classes are anti-patterns, like <a href="http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html"><code>StringUtils</code></a>, <a href="http://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FileUtils.html"><code>FileUtils</code></a>, and <a href="https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/IOUtils.html"><code>IOUtils</code></a> from Apache. The above are perfect examples of terrible designs. Read this follow up post: <a href="/2014/05/05/oop-alternative-to-utility-classes.html">OOP Alternative to Utility Classes</a></p><p>Of course, never add suffixes or prefixes to distinguish between <a href="http://c2.com/cgi/wiki?DontDistinguishBetweenClassesAndInterfaces">interfaces and classes</a>. For example, all of these names are terribly wrong: <code>IRecord</code>, <code>IfaceEmployee</code>, or <code>RecordInterface</code>. Usually, interface name is the name of a real-life entity, while class name should explain its implementation details. If there is nothing specific to say about an implementation, name it <code>Default,</code> <code>Simple</code>, or something similar. For example:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">SimpleUser</span> <span class="kd">implements</span> <span class="n">User</span> <span class="o">{};</span>
<span class="kd">class</span> <span class="nc">DefaultRecord</span> <span class="kd">implements</span> <span class="n">Record</span> <span class="o">{};</span>
<span class="kd">class</span> <span class="nc">Suffixed</span> <span class="kd">implements</span> <span class="n">Name</span> <span class="o">{};</span>
<span class="kd">class</span> <span class="nc">Validated</span> <span class="kd">implements</span> <span class="n">Content</span> <span class="o">{};</span>
</code></pre></div><h2 id="method-names">Method Names</h2><p>Methods can either return something or return <code>void</code>. If a method returns something, then its name should explain <em>what it returns</em>, for example (don&#39;t use the <code>get</code> prefix <a href="/2014/09/16/getters-and-setters-are-evil.html">ever</a>):</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kt">boolean</span> <span class="nf">isValid</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">);</span>
<span class="n">String</span> <span class="nf">content</span><span class="o">();</span>
<span class="kt">int</span> <span class="nf">ageOf</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">);</span>
</code></pre></div><p>If it returns <code>void,</code> then its name should explain <em>what it does</em>. For example:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kt">void</span> <span class="nf">save</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">);</span>
<span class="kt">void</span> <span class="nf">process</span><span class="o">(</span><span class="n">Work</span> <span class="n">work</span><span class="o">);</span>
<span class="kt">void</span> <span class="nf">append</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">,</span> <span class="n">String</span> <span class="n">line</span><span class="o">);</span>
</code></pre></div><p>You can read more about this idea in <a href="/elegant-objects.html">Elegant Objects</a> book, section <a href="/images/books/elegant-objects/contents.pdf">2.4</a>. There is only one exception to the rule just mentioned---test methods for JUnit. They are explained below.</p><h2 id="test-method-names">Test Method Names</h2><p>Method names in JUnit tests should be created as English sentences without spaces. It&#39;s easier to explain by example:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="cm">/</em>*</span>
<span class="cm"> * HttpRequest can return its content in Unicode.</span>
<span class="cm"> * @throws Exception If test fails</span>
<span class="cm"> */</span>
<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">returnsItsContentInUnicode</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div><p>It&#39;s important to start the first sentence of your Javadoc with the name of the class you&#39;re testing followed by <code>can</code> (or <code>cannot</code>). So, your first sentence should always be similar to &quot;somebody <em>can</em> do something.&quot;</p><p>The method name will state exactly the same, but without the subject. If I add a subject at the beginning of the method name, I should get a complete English sentence, as in above example: &quot;<code>HttpRequest</code> returns its content in Unicode.&quot;</p><p>Pay attention that the test method doesn&#39;t start with <code>can</code>. Only Javadoc comments use &#39;can.&#39;</p><p>It&#39;s a good practice to always declare test methods as throwing <code>Exception</code>.</p><h2 id="variable-names">Variable Names</h2><p>Avoid composite names of variables, like <code>timeOfDay</code>, <code>firstItem</code>, or <code>httpRequest</code>. I mean with both---class variables and in-method ones. A variable name should be long enough to avoid ambiguity in its scope of visibility, but not too long if possible. A name should be a noun in singular or plural form, or an appropriate abbreviation. More about it in this post: <a href="/2015/01/12/compound-name-is-code-smell.html">A Compound Name Is a Code Smell</a>. For example:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">names</span><span class="o">;</span>
<span class="kt">void</span> <span class="nf">sendThroughProxy</span><span class="o">(</span><span class="n">File</span> <span class="n">file</span><span class="o">,</span> <span class="n">Protocol</span> <span class="n">proto</span><span class="o">);</span>
<span class="kd">private</span> <span class="n">File</span> <span class="n">content</span><span class="o">;</span>
<span class="kd">public</span> <span class="n">HttpRequest</span> <span class="n">request</span><span class="o">;</span>
</code></pre></div><p>Sometimes, you may have collisions between <a href="/2015/05/07/ctors-must-be-code-free.html">constructor</a> parameters and in-class properties if the constructor saves incoming data in an instantiated object. In this case, I recommend to create abbreviations by removing vowels (see how <a href="http://pe.usps.gov/text/pub28/28apc_002.htm">USPS abbreviates street names</a>).</p><p>Another example:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Message</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">recipient</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Message</span><span class="o">(</span><span class="n">String</span> <span class="n">rcpt</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">recipient</span> <span class="o">=</span> <span class="n">rcpt</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>In many cases, the best hint for a name of a variable can ascertained by reading its class name. Just write it with a small letter, and you should be good:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">File</span> <span class="n">file</span><span class="o">;</span>
<span class="n">User</span> <span class="n">user</span><span class="o">;</span>
<span class="n">Branch</span> <span class="n">branch</span><span class="o">;</span>
</code></pre></div><p>However, <em>never</em> do the same for primitive types, like <code>Integer number</code> or <code>String string</code>.</p><p>You can also use an adjective, when there are multiple variables with different characteristics. For instance:</p><div class="highlight"><pre><code class="language-text" data-lang="text"><span></span>String contact(String left, String right);
</code></pre></div><h2 id="constructors">Constructors</h2><p>Without <a href="/2016/06/17/dont-use-java-assertions.html">exceptions</a>, there should be only <em>one</em> constructor that stores data in object variables. All other constructors should call this one with different arguments. For example:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Server</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">address</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">Server</span><span class="o">(</span><span class="n">String</span> <span class="n">uri</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">address</span> <span class="o">=</span> <span class="n">uri</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kd">public</span> <span class="nf">Server</span><span class="o">(</span><span class="n">URI</span> <span class="n">uri</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">(</span><span class="n">uri</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>More about it in <a href="/2015/05/28/one-primary-constructor.html">There Can Be Only One Primary Constructor</a>.</p><h2 id="one-time-variables">One-time Variables</h2><p>Avoid one-time variables at all costs. By &quot;one-time&quot; I mean variables that are used only once. Like in this example:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;data.txt&quot;</span><span class="o">;</span>
<span class="k">return</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
</code></pre></div><p>This above variable is used only once and the code should be refactored to:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="k">return</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&quot;data.txt&quot;</span><span class="o">);</span>
</code></pre></div><p>Sometimes, in very rare cases---mostly because of better formatting---one-time variables may be used. Nevertheless, try to avoid such situations at all costs.</p><h2 id="exceptions">Exceptions</h2><p>Needless to say, you should <strong>never</strong> swallow exceptions, but rather let them bubble up as high as possible. Private methods should always let checked exceptions go out.</p><p>Never use exceptions for flow control. For example this code is wrong:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kt">int</span> <span class="n">size</span><span class="o">;</span>
<span class="k">try</span> <span class="o">{</span>
  <span class="n">size</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">fileSize</span><span class="o">();</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div><p>Seriously, what if that <code>IOException</code> says &quot;disk is full?&quot; Will you still assume that the size of the file is zero and move on?</p><h2 id="indentation">Indentation</h2><p>For indentation, the <a href="/2014/10/23/paired-brackets-notation.html">main rule</a> is that a bracket should either end a line or be closed on the same line (reverse rule applies to a closing bracket). For example, the following is not correct because the first bracket is not closed on the same line and there are symbols after it. The second bracket is also in trouble because there are symbols in front of it and it is not opened on the same line:</p><div class="highlight"><pre><code class="language-text" data-lang="text"><span></span>final File file = new File(directory,
  &quot;file.txt&quot;);
</code></pre></div><p>Correct indentation should look like:</p><div class="highlight"><pre><code class="language-text" data-lang="text"><span></span>StringUtils.join(
  Arrays.asList(
    &quot;first line&quot;,
    &quot;second line&quot;,
    StringUtils.join(
      Arrays.asList(&quot;a&quot;, &quot;b&quot;)
    )
  ),
  &quot;separator&quot;
);
</code></pre></div><p>The second important rule of indentation says that you should put as much as possible on one line - within the limit of 80 characters. The example above is not valid since it can be compacted:</p><div class="highlight"><pre><code class="language-text" data-lang="text"><span></span>StringUtils.join(
  Arrays.asList(
    &quot;first line&quot;, &quot;second line&quot;,
    StringUtils.join(Arrays.asList(&quot;a&quot;, &quot;b&quot;))
  ),
  &quot;separator&quot;
);
</code></pre></div><h2 id="redundant-constants">Redundant Constants</h2><p>Class constants should be used when you want to share information between class methods, and this information is a characteristic (!) of your class. Don&#39;t use constants as a replacement of string or numeric literals---very bad practice that leads to code pollution. Constants (as with any <a href="/2016/07/14/who-is-object.html">object</a> in <a href="/2016/08/15/what-is-wrong-object-oriented-programming.html">OOP</a>) should have a meaning in a real world. What meaning do these constants have in the real world:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">class</span> <span class="nc">Document</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">D_LETTER</span> <span class="o">=</span> <span class="s">&quot;D&quot;</span><span class="o">;</span> <span class="c1">// bad practice</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">EXTENSION</span> <span class="o">=</span> <span class="s">&quot;.doc&quot;</span><span class="o">;</span> <span class="c1">// good practice</span>
<span class="o">}</span>
</code></pre></div><p>Another typical mistake is to use constants in <a href="/2017/05/17/single-statement-unit-tests.html">unit tests</a> to avoid duplicate string/numeric literals in test methods. <a href="/2016/05/03/test-methods-must-share-nothing.html">Don&#39;t do this</a>! Every test method should work with its own set of input values.</p><p>Use new texts and numbers in every new test method. They are independent. So, why do they have to share the same input constants?</p><h2 id="test-data-coupling">Test Data Coupling</h2><p>This is an example of <a href="http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29">data coupling</a> in a test method:</p><div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">(</span><span class="s">&quot;Jeff&quot;</span><span class="o">);</span>
<span class="c1">// maybe some other code here</span>
<span class="n">MatcherAssert</span><span class="o">.</span><span class="na">assertThat</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">name</span><span class="o">(),</span> <span class="n">Matchers</span><span class="o">.</span><span class="na">equalTo</span><span class="o">(</span><span class="s">&quot;Jeff&quot;</span><span class="o">));</span>
</code></pre></div><p>On the last line, we couple <code>&quot;Jeff&quot;</code> with the same string literal from the first line. If, a few months later, someone wants to change the value on the third line, he/she has to spend extra time finding where else <code>&quot;Jeff&quot;</code> is used in the same method.</p><p>To avoid this data coupling, you should introduce a variable. More about it here: <a href="/2015/05/25/unit-test-scaffolding.html">A Few Thoughts on Unit Test Scaffolding</a>.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html> &lt;!DOCTYPE html&gt; <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="This article compares two projects and calculates their average costs per one line of code changed. The experiment proves economical advantage of a distributed development. " /> <meta name="keywords" content="cost of LoC, cost of line of code, cost of software development, line of code, price per line of code" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-04-11 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="How Much Do You Pay Per&nbsp;Line&nbsp;of&nbsp;Code?"/> <meta name="twitter:description" property="og:description" content="This article compares two projects and calculates their average costs per one line of code changed. The experiment proves economical advantage of a distributed development. "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/04/11/cost-of-loc.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?40913e1d169"/> <link rel="apple-touch-icon" href="/favicon.ico?40913e1d169"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?40913e1d169"/> <link rel="stylesheet" href="/css/icons.css?40913e1d169"/> <link rel="canonical" href="https://www.yegor256.com/2014/04/11/cost-of-loc.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/04/11/cost-of-loc.amp.html" /> <title>How Much Do You Pay Per&nbsp;Line&nbsp;of&nbsp;Code? </title> <meta name='og:image' content='https://www.yegor256.com/images/2014/04/brazil-crowded-office.png'/><meta name='twitter:image' content='https://www.yegor256.com/images/2014/04/brazil-crowded-office.png'/><meta name='og:image:width' content='1200'/> <meta name='twitter:image:width' content='1200'/><meta name='og:image:height' content='675'/> <meta name='twitter:image:height' content='675'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Brazil (1985) by Terry Gilliam'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/joinchat/AAAAAEJFMRzsRTRxM3ec6A" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li ><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li ><a href="/contents.html" title="The contents of the entire blog">All&#160;289</a></li> <li ><a href="/webinars.html" title="My webinars">Webinars</a></li> <li ><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li ><a href="/books.html" title="The books I wrote">Books</a></li> <li ><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li ><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li ><a href="/award.html" title="Software quality award">Award</a></li> <li ><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li ><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li ><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="http://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul> <li> <a href="/code-ahead.html">Code Ahead</a> was published on Amazon just a few days ago! It is my new book, a novel about programmers. It explains in details the majority of ideas that stand behind <a href="https://www.zerocracy.com">Zerocracy</a> and <a href="https://www.xdsd.org">XDSD</a>. </li> <li> At <a href="/webinars.html">Webinar #37</a> we will discuss naming problem in OOP, for objects, methods and attributes; join us on <b>September 12</b>, at 11am PST. </li></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/04/11/cost-of-loc.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url"><a href="https://www.yegor256.com/2014/04/11/cost-of-loc.html">https://www.yegor256.com/2014/04/11/cost-of-loc.html</a></code></p><h1 itemprop="name headline mainEntityOfPage">How Much Do You Pay Per&nbsp;Line&nbsp;of&nbsp;Code?</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-04-11T00:00:00+00:00"> 11 April 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="http://www.yegor256.com/2014/04/11/cost-of-loc.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><figure class='badge'><a href='http://www.xdsd.org'><img src='http://www.xdsd.org/images/logo.svg' style='width:100px;max-width:100%;' alt='badge'/></a></figure><p>Yes, I know, &quot;line of code&quot; (LoC) is a <a href="http://stackoverflow.com/questions/966800/mythical-man-month-10-lines-per-developer-day-how-close-on-large-projects">very wrong metric</a>. There are <a href="http://blog.codinghorror.com/diseconomies-of-scale-and-lines-of-code/">tons of articles</a> written about it, as well as famous books. However, I want to compare two projects in which I have participated recently and discuss some very interesting numbers.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=qRZYJGYdrwk'><div class='box'> <img src='https://i.ytimg.com/vi/qRZYJGYdrwk/mqdefault.jpg' alt='YouTube video #qRZYJGYdrwk'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>XDSD: management without meetings; 13 February 2016.</div></aside><h2 id="project-1-traditionally-co-located">Project #1: Traditionally Co-located</h2><p>The first project I was a part of was performed by a traditionally co-located group of programmers. There were about 20 of them (I&#39;m not counting <a href="/2015/09/22/micromanagement.html">managers</a>, analysts, product owners, SCRUM masters, etc.) The project was a web auctioning site with pretty high traffic numbers (over two million page views per day).</p><p>The code base size was about 200k lines, of which 150k was PHP, 35k JavaScript and the remainder CSS, XML, Ruby, and something else. I&#39;m counting only non-empty and non-comment lines of code, using <a href="http://cloc.sourceforge.net/"><code>cloc.pl</code></a>.</p><p>It was a commercial project, so I can&#39;t disclose its name.</p><figure class='jb_picture'><img itemprop='image' alt='Brazil (1985) by Terry Gilliam' src='/images/2014/04/brazil-crowded-office.png' longdesc='#51e79012'/><figcaption id='51e79012'>Brazil (1985) by Terry Gilliam</figcaption></figure><p>The team was co-located in one <a href="/2015/10/06/how-to-be-good-office-slave.html">office</a> in Europe where everybody was working &quot;from nine &#39;til five.&quot; We had meetings, lunches, desk-to-desk chats and lots of other <a href="/2016/08/23/communication-maturity.html">informal communications</a>. All tasks were tracked in JIRA.</p><h2 id="project-2-extremely-distributed">Project #2: Extremely Distributed</h2><p>The second project was an open source Java product, developed by an <a href="http://www.xdsd.org">extremely distributed</a> team of about 15 developers. We didn&#39;t have any chats or any other informal communications. We discussed everything in GitHub issues. The code base was significantly smaller with only about 30k lines, of which about 90% was Java and the rest in XML.</p><figure class='picture'><img src='https://www.yegor256.com/images/2014/04/shaolin-temple-jet-li.png' style='width:600px;max-width:100%;' alt='Shaolin Temple (1982) by Chang Hsin Yen'/><figcaption>Shaolin Temple (1982) by Chang Hsin Yen</figcaption></figure><h2 id="maturity-of-development">Maturity of Development</h2><p>Both projects hosted their code bases on GitHub. Both teams were developing in <a href="http://martinfowler.com/bliki/FeatureBranch.html">feature branches</a>- even for small fixes.</p><p>Both teams used build automation, <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a>, pre-flight builds, static analysis and code reviews. This indicates the maturity of the project teams.</p><p>Both projects satisfied the <a href="/2015/11/10/ten-mistakes-in-specs.html">requirements</a> of their users. I&#39;m mentioning this to emphasize that both projects produced valuable and useful lines of code. There was no garbage and almost no <a href="http://en.wikipedia.org/wiki/Duplicate_code">code duplication</a>.</p><h2 id="show-me-the-money">Show Me the Money</h2><p>In both projects, my role was called that of lead architect, and I knew their financial details. Besides that, I had access to both Git repositories, so I can measure how many new lines (or changed lines) were introduced by both teams in, say, a three-month period.</p><p>Now, let&#39;s see the numbers.</p><p>The first project (the one that was co-located) was paying approximately &euro;50,000 annually to a good developer, which was about $5,600 per month or $35 per hour. The second one (the extremely distributed project) was paying $20-35 per hour, for completed tasks only according to one of the principles of <a href="http://www.xdsd.org">XDSD</a>.</p><p>The first one, in three months, produced 59k new lines and removed 29k in changes in the <code>master</code> branch, which totals 88k lines of code. The project resulted in about 10,000 man hours to produce these lines (20 programmers, three months, 170 working hours per month)---which equates to about $350k. Therefore, the project <a href="/2015/06/02/how-to-estimate-software-cost.html">cost</a> a whopping</p><p class="red center em2">$3.98 per line</p><p>The second project, in the same three month period, produced 45k new lines and removed 9k, which comes to 54k in all. To complete this work, we spent only $7k (approximately 350 working hours in 650 tasks). Thus, the project cost merely:</p><p class="green center em2">&cent;13 per line</p><p>This also means that programmers were writing approximately 150 lines per hour or over a thousand per day. <a href="http://en.wikipedia.org/wiki/The_Mythical_Man-Month">The Mythical Man-Month</a> talks about 10 lines per day, which is a hundred times less than we saw in our project.</p><p>$350k vs $7k, $3.98 vs &cent;13? What do you think?</p><h2 id="how-to-validate-the-numbers">How to Validate the Numbers?</h2><p>If you&#39;re curious, I&#39;m using <a href="https://github.com/yegor256/hoc">hoc</a> to get the numbers from Git (it is explained in <a href="/2014/11/14/hits-of-code.html">Hits-of-Code Instead of SLoC</a>). You can validate the numbers for the second project here on GitHub: <a href="https://github.com/jcabi/jcabi-github">jcabi/jcabi-github</a>.</p><h2 id="conclusion">Conclusion</h2><p>What I&#39;m trying to express with these numbers is that distributed programming is <a href="/2016/08/05/distributed-teams-are-higher-quality.html">much more effective</a>, money-wise, than a co-located team. Again, I can hear you saying that &quot;line of code&quot; is not a proper metric. But, come on, $0.13 vs. $3.98? Thirty times more expensive?</p><figure class='picture'><img src='https://www.yegor256.com/images/2014/04/lebowski-they-did-not-receive-the-money.png' style='width:600px;max-width:100%;' alt='The Big Lebowski (1998) by Joel Coen'/><figcaption>The Big Lebowski (1998) by Joel Coen</figcaption></figure><p>It&#39;s not about metrics any more. It&#39;s about preventing wasteful man hours and the huge waste of money that comes with them?</p><h2 id="can-we-do-the-same">Can We Do the Same?</h2><p>Of course, the same results can&#39;t be achieved by just telling your programmers to work from home and never come to the <a href="/2015/10/06/how-to-be-good-office-slave.html">office</a>. XDSD is not about that. <a href="http://www.xdsd.org">XDSD</a> is about strict quality principles, which should be followed by the entire team.</p><p>And when these principles are in place---you pay thirty times less.</p><p>By the way, this is what people say about their projects:</p><ul> <li>$12&ndash;103: <a href="http://www.crazyontap.com/topic.php?TopicId=242135">crazyontap.com</a></li> <li>$15&ndash;40: <a href="http://betterembsw.blogspot.nl/2010/10/embedded-software-costs-15-40-per-line.html">betterembsw.blogspot.nl</a></li> <li>over $5: <a href="http://discuss.joelonsoftware.com/default.asp?biz.5.467536.25">joelonsoftware.com</a></li></ul><p>What are your numbers? Please post your comments below.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/04/11/cost-of-loc.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/04/11/cost-of-loc.html&amp;text=How+Much+Do+You+Pay+Per%26nbsp%3BLine%26nbsp%3Bof%26nbsp%3BCode%3F" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/04/11/cost-of-loc.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/04/11/cost-of-loc.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/04/11/cost-of-loc.html%3F2014-14&amp;title=How+Much+Do+You+Pay+Per%26nbsp%3BLine%26nbsp%3Bof%26nbsp%3BCode%3F" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/04/11/cost-of-loc.html%3F2014-14&amp;t=How+Much+Do+You+Pay+Per%26nbsp%3BLine%26nbsp%3Bof%26nbsp%3BCode%3F" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div > <figure class='badge'><a href='http://www.xdsd.org'><img src='http://www.xdsd.org/images/logo.svg' style='width:100px;max-width:100%;' alt='badge'/></a></figure><p>Yes, I know, &quot;line of code&quot; (LoC) is a <a href="http://stackoverflow.com/questions/966800/mythical-man-month-10-lines-per-developer-day-how-close-on-large-projects">very wrong metric</a>. There are <a href="http://blog.codinghorror.com/diseconomies-of-scale-and-lines-of-code/">tons of articles</a> written about it, as well as famous books. However, I want to compare two projects in which I have participated recently and discuss some very interesting numbers.</p><aside class='youtube'> <a href='https://www.youtube.com/watch?v=qRZYJGYdrwk'><div class='box'> <img src='https://i.ytimg.com/vi/qRZYJGYdrwk/mqdefault.jpg' alt='YouTube video #qRZYJGYdrwk'/><div class='play'><i class='icon icon-play'></i></div></div></a><div>XDSD: management without meetings; 13 February 2016.</div></aside><h2 id="project-1-traditionally-co-located">Project #1: Traditionally Co-located</h2><p>The first project I was a part of was performed by a traditionally co-located group of programmers. There were about 20 of them (I&#39;m not counting <a href="/2015/09/22/micromanagement.html">managers</a>, analysts, product owners, SCRUM masters, etc.) The project was a web auctioning site with pretty high traffic numbers (over two million page views per day).</p><p>The code base size was about 200k lines, of which 150k was PHP, 35k JavaScript and the remainder CSS, XML, Ruby, and something else. I&#39;m counting only non-empty and non-comment lines of code, using <a href="http://cloc.sourceforge.net/"><code>cloc.pl</code></a>.</p><p>It was a commercial project, so I can&#39;t disclose its name.</p><figure class='jb_picture'><img itemprop='image' alt='Brazil (1985) by Terry Gilliam' src='/images/2014/04/brazil-crowded-office.png' longdesc='#51e79012'/><figcaption id='51e79012'>Brazil (1985) by Terry Gilliam</figcaption></figure><p>The team was co-located in one <a href="/2015/10/06/how-to-be-good-office-slave.html">office</a> in Europe where everybody was working &quot;from nine &#39;til five.&quot; We had meetings, lunches, desk-to-desk chats and lots of other <a href="/2016/08/23/communication-maturity.html">informal communications</a>. All tasks were tracked in JIRA.</p><h2 id="project-2-extremely-distributed">Project #2: Extremely Distributed</h2><p>The second project was an open source Java product, developed by an <a href="http://www.xdsd.org">extremely distributed</a> team of about 15 developers. We didn&#39;t have any chats or any other informal communications. We discussed everything in GitHub issues. The code base was significantly smaller with only about 30k lines, of which about 90% was Java and the rest in XML.</p><figure class='picture'><img src='https://www.yegor256.com/images/2014/04/shaolin-temple-jet-li.png' style='width:600px;max-width:100%;' alt='Shaolin Temple (1982) by Chang Hsin Yen'/><figcaption>Shaolin Temple (1982) by Chang Hsin Yen</figcaption></figure><h2 id="maturity-of-development">Maturity of Development</h2><p>Both projects hosted their code bases on GitHub. Both teams were developing in <a href="http://martinfowler.com/bliki/FeatureBranch.html">feature branches</a>- even for small fixes.</p><p>Both teams used build automation, <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a>, pre-flight builds, static analysis and code reviews. This indicates the maturity of the project teams.</p><p>Both projects satisfied the <a href="/2015/11/10/ten-mistakes-in-specs.html">requirements</a> of their users. I&#39;m mentioning this to emphasize that both projects produced valuable and useful lines of code. There was no garbage and almost no <a href="http://en.wikipedia.org/wiki/Duplicate_code">code duplication</a>.</p><h2 id="show-me-the-money">Show Me the Money</h2><p>In both projects, my role was called that of lead architect, and I knew their financial details. Besides that, I had access to both Git repositories, so I can measure how many new lines (or changed lines) were introduced by both teams in, say, a three-month period.</p><p>Now, let&#39;s see the numbers.</p><p>The first project (the one that was co-located) was paying approximately &euro;50,000 annually to a good developer, which was about $5,600 per month or $35 per hour. The second one (the extremely distributed project) was paying $20-35 per hour, for completed tasks only according to one of the principles of <a href="http://www.xdsd.org">XDSD</a>.</p><p>The first one, in three months, produced 59k new lines and removed 29k in changes in the <code>master</code> branch, which totals 88k lines of code. The project resulted in about 10,000 man hours to produce these lines (20 programmers, three months, 170 working hours per month)---which equates to about $350k. Therefore, the project <a href="/2015/06/02/how-to-estimate-software-cost.html">cost</a> a whopping</p><p class="red center em2">$3.98 per line</p><p>The second project, in the same three month period, produced 45k new lines and removed 9k, which comes to 54k in all. To complete this work, we spent only $7k (approximately 350 working hours in 650 tasks). Thus, the project cost merely:</p><p class="green center em2">&cent;13 per line</p><p>This also means that programmers were writing approximately 150 lines per hour or over a thousand per day. <a href="http://en.wikipedia.org/wiki/The_Mythical_Man-Month">The Mythical Man-Month</a> talks about 10 lines per day, which is a hundred times less than we saw in our project.</p><p>$350k vs $7k, $3.98 vs &cent;13? What do you think?</p><h2 id="how-to-validate-the-numbers">How to Validate the Numbers?</h2><p>If you&#39;re curious, I&#39;m using <a href="https://github.com/yegor256/hoc">hoc</a> to get the numbers from Git (it is explained in <a href="/2014/11/14/hits-of-code.html">Hits-of-Code Instead of SLoC</a>). You can validate the numbers for the second project here on GitHub: <a href="https://github.com/jcabi/jcabi-github">jcabi/jcabi-github</a>.</p><h2 id="conclusion">Conclusion</h2><p>What I&#39;m trying to express with these numbers is that distributed programming is <a href="/2016/08/05/distributed-teams-are-higher-quality.html">much more effective</a>, money-wise, than a co-located team. Again, I can hear you saying that &quot;line of code&quot; is not a proper metric. But, come on, $0.13 vs. $3.98? Thirty times more expensive?</p><figure class='picture'><img src='https://www.yegor256.com/images/2014/04/lebowski-they-did-not-receive-the-money.png' style='width:600px;max-width:100%;' alt='The Big Lebowski (1998) by Joel Coen'/><figcaption>The Big Lebowski (1998) by Joel Coen</figcaption></figure><p>It&#39;s not about metrics any more. It&#39;s about preventing wasteful man hours and the huge waste of money that comes with them?</p><h2 id="can-we-do-the-same">Can We Do the Same?</h2><p>Of course, the same results can&#39;t be achieved by just telling your programmers to work from home and never come to the <a href="/2015/10/06/how-to-be-good-office-slave.html">office</a>. XDSD is not about that. <a href="http://www.xdsd.org">XDSD</a> is about strict quality principles, which should be followed by the entire team.</p><p>And when these principles are in place---you pay thirty times less.</p><p>By the way, this is what people say about their projects:</p><ul> <li>$12&ndash;103: <a href="http://www.crazyontap.com/topic.php?TopicId=242135">crazyontap.com</a></li> <li>$15&ndash;40: <a href="http://betterembsw.blogspot.nl/2010/10/embedded-software-costs-15-40-per-line.html">betterembsw.blogspot.nl</a></li> <li>over $5: <a href="http://discuss.joelonsoftware.com/default.asp?biz.5.467536.25">joelonsoftware.com</a></li></ul><p>What are your numbers? Please post your comments below.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split(&#39;?&#39;)[0].split(&#39;#&#39;)[0].replace(&#39;https://&#39;, &#39;http://&#39;); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement(&#39;script&#39;); s.src = &#39;//yegor256.disqus.com/embed.js&#39;; s.setAttribute(&#39;data-timestamp&#39;, +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that&#39;s why you can&#39;t see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = &#39;yegor256&#39;;</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,&#39;script&#39;,&#39;//<a href="http://www.google-analytics.com/analytics.js&#x27;,&#x27;ga&#x27;">www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;</a>); ga(&#39;create&#39;, &#39;UA-1963507-32&#39;, &#39;auto&#39;); ga(&#39;send&#39;, &#39;pageview&#39;); </script> <script> Cd=document;Cr=&quot;&amp;&quot;+Math.random();Cp=&quot;&amp;s=1&quot;; Cd.cookie=&quot;b=b&quot;;if(Cd.cookie)Cp+=&quot;&amp;c=1&quot;; Cp+=&quot;&amp;t=&quot;+(new Date()).getTimezoneOffset(); if(self!=top)Cp+=&quot;&amp;f=1&quot;; </script> <script> if(navigator.javaEnabled())Cp+=&quot;&amp;j=1&quot;; </script> <script> if(typeof(screen)!=&#39;undefined&#39;)Cp+=&quot;&amp;w=&quot;+screen.width+&quot;&amp;h=&quot;+ screen.height+&quot;&amp;d=&quot;+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write(&quot;<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>&quot;); </script> <script type="application/ld+json"> { &quot;@context&quot;: &quot;<a href="http://schema.org">http://schema.org</a>&quot;, &quot;@type&quot;: &quot;Person&quot;, &quot;name&quot;: &quot;Yegor Bugayenko&quot;, &quot;url&quot;: &quot;<a href="http://www.yegor256.com">http://www.yegor256.com</a>&quot;, &quot;sameAs&quot;: [ &quot;<a href="https://www.facebook.com/yegor256">https://www.facebook.com/yegor256</a>&quot;, &quot;<a href="https://instagram.com/yegor256">https://instagram.com/yegor256</a>&quot;, &quot;<a href="https://www.linkedin.com/in/yegor256">https://www.linkedin.com/in/yegor256</a>&quot;, &quot;<a href="https://twitter.com/yegor256">https://twitter.com/yegor256</a>&quot;, &quot;<a href="https://github.com/yegor256">https://github.com/yegor256</a>&quot;, &quot;<a href="https://www.pinterest.com/yegor256/">https://www.pinterest.com/yegor256/</a>&quot; ] } </script> </body> </html></p></div></article> <footer class="footer"><p> This blog is built with <a href="http://jekyllrb.com/">Jekyll</a> and hosted on <a href="https://pages.github.com/">GitHub Pages</a> <br/> <a href="https://github.com/yegor256/blog/commit/40913e1d169"><i class="icon icon-github"></i></a></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?40913e1d169"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "http://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html>
