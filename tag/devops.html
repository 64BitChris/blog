<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="{&quot;layout&quot;=&gt;&quot;tag-index&quot;, &quot;posts&quot;=&gt;[#&lt;Jekyll::Document _posts/2018/sep/2018-09-05-monolithic-repositories.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2016/aug/2016-08-01-continuous-integration-maturity.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2015/mar/2015-03-29-rultor-with-appveyor.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2015/jan/2015-01-10-windows-appveyor-maven.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/oct/2014-10-08-continuous-integration-is-dead.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/oct/2014-10-05-ten-hosted-continuous-integration-services.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/sep/2014-09-13-deploying-to-heroku.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/sep/2014-09-11-deployment-script-vs-rultor.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/aug/2014-08-26-publish-to-rubygems.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/aug/2014-08-25-deploy-to-cloudbees.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/aug/2014-08-19-how-to-release-to-maven-central.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/jul/2014-07-31-travis-and-rultor.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/jul/2014-07-29-docker-in-rultor.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/jul/2014-07-24-rultor-automated-merging.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/jul/2014-07-21-read-only-master-branch.md collection=posts&gt;], &quot;tag&quot;=&gt;&quot;devops&quot;, &quot;content&quot;=&gt;&quot;&quot;, &quot;dir&quot;=&gt;&quot;/tag/&quot;, &quot;name&quot;=&gt;&quot;devops.html&quot;, &quot;path&quot;=&gt;&quot;tag/devops.html&quot;, &quot;url&quot;=&gt;&quot;/tag/devops&quot;, &quot;title&quot;=&gt;&quot;devops&quot;, &quot;description&quot;=&gt;&quot;devops: more about devops in this collection of recently published articles... the list is updated every few weeks.&quot;}" /> <meta name="keywords" content="{&quot;layout&quot;=&gt;&quot;tag-index&quot;, &quot;posts&quot;=&gt;[#&lt;Jekyll::Document _posts/2018/sep/2018-09-05-monolithic-repositories.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2016/aug/2016-08-01-continuous-integration-maturity.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2015/mar/2015-03-29-rultor-with-appveyor.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2015/jan/2015-01-10-windows-appveyor-maven.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/oct/2014-10-08-continuous-integration-is-dead.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/oct/2014-10-05-ten-hosted-continuous-integration-services.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/sep/2014-09-13-deploying-to-heroku.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/sep/2014-09-11-deployment-script-vs-rultor.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/aug/2014-08-26-publish-to-rubygems.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/aug/2014-08-25-deploy-to-cloudbees.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/aug/2014-08-19-how-to-release-to-maven-central.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/jul/2014-07-31-travis-and-rultor.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/jul/2014-07-29-docker-in-rultor.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/jul/2014-07-24-rultor-automated-merging.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/jul/2014-07-21-read-only-master-branch.md collection=posts&gt;], &quot;tag&quot;=&gt;&quot;devops&quot;, &quot;content&quot;=&gt;&quot;&quot;, &quot;dir&quot;=&gt;&quot;/tag/&quot;, &quot;name&quot;=&gt;&quot;devops.html&quot;, &quot;path&quot;=&gt;&quot;tag/devops.html&quot;, &quot;url&quot;=&gt;&quot;/tag/devops&quot;, &quot;title&quot;=&gt;&quot;devops&quot;, &quot;description&quot;=&gt;&quot;devops: more about devops in this collection of recently published articles... the list is updated every few weeks.&quot;}" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="devops"/> <meta name="twitter:description" property="og:description" content="{&quot;layout&quot;=&gt;&quot;tag-index&quot;, &quot;posts&quot;=&gt;[#&lt;Jekyll::Document _posts/2018/sep/2018-09-05-monolithic-repositories.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2016/aug/2016-08-01-continuous-integration-maturity.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2015/mar/2015-03-29-rultor-with-appveyor.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2015/jan/2015-01-10-windows-appveyor-maven.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/oct/2014-10-08-continuous-integration-is-dead.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/oct/2014-10-05-ten-hosted-continuous-integration-services.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/sep/2014-09-13-deploying-to-heroku.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/sep/2014-09-11-deployment-script-vs-rultor.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/aug/2014-08-26-publish-to-rubygems.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/aug/2014-08-25-deploy-to-cloudbees.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/aug/2014-08-19-how-to-release-to-maven-central.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/jul/2014-07-31-travis-and-rultor.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/jul/2014-07-29-docker-in-rultor.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/jul/2014-07-24-rultor-automated-merging.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/jul/2014-07-21-read-only-master-branch.md collection=posts&gt;], &quot;tag&quot;=&gt;&quot;devops&quot;, &quot;content&quot;=&gt;&quot;&quot;, &quot;dir&quot;=&gt;&quot;/tag/&quot;, &quot;name&quot;=&gt;&quot;devops.html&quot;, &quot;path&quot;=&gt;&quot;tag/devops.html&quot;, &quot;url&quot;=&gt;&quot;/tag/devops&quot;, &quot;title&quot;=&gt;&quot;devops&quot;, &quot;description&quot;=&gt;&quot;devops: more about devops in this collection of recently published articles... the list is updated every few weeks.&quot;}"/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/tag/devops"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?23bb3130b4f"/> <link rel="apple-touch-icon" href="/favicon.ico?23bb3130b4f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?23bb3130b4f"/> <link rel="stylesheet" href="/css/icons.css?23bb3130b4f"/> <link rel="canonical" href="https://www.yegor256.com/tag/devops" /> <link rel="amphtml" href="https://www.yegor256.com/tag/devops" /> <title>devops </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /tag/devops><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /tag/devops><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /tag/devops><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /tag/devops><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /tag/devops><a href="/books.html" title="The books I wrote">Books</a></li> <li /tag/devops><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /tag/devops><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /tag/devops class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /tag/devops><a href="/award.html" title="Software quality award">Award</a></li> <li /tag/devops><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /tag/devops><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /tag/devops><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header itemprop="name"><h1>15 posts about devops</h1></header> <article itemprop="articleBody"> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="&lt;p&gt;We all keep our code in &lt;del&gt;Git&lt;/del&gt; &lt;a href=&quot;https://en.wikipedia.org/wiki/Version_control&quot;&gt;version control&lt;/a&gt; repositories. The question is whether we should create a new repository for each new module or try to keep as much as possible in a single so called “monolithic” repo. Market leaders, like &lt;a href=&quot;https://code.fb.com/core-data/scaling-mercurial-at-facebook/&quot;&gt;Facebook&lt;/a&gt; and &lt;a href=&quot;https://www.infoq.com/presentations/Development-at-Google&quot;&gt;Google&lt;/a&gt;, advocate the second approach. I believe they are wrong.&lt;/p&gt; &lt;!--more--&gt; &lt;figure class=&quot;jb_picture&quot;&gt;&lt;img itemprop=&quot;image&quot; alt=&quot;Funny Games (2007) by Michael Haneke&quot; src=&quot;/images/2018/09/funny-games.jpg&quot; longdesc=&quot;#9f6d574f&quot; /&gt;&lt;figcaption id=&quot;9f6d574f&quot;&gt;Funny Games (2007) by Michael Haneke&lt;/figcaption&gt;&lt;/figure&gt; &lt;p&gt;Let’s use the following JavaScript function as an example. It downloads a JSON document from a &lt;a href=&quot;http://www.zold.io&quot;&gt;Zold&lt;/a&gt; node (using &lt;a href=&quot;https://jquery.com/&quot;&gt;jQuery&lt;/a&gt;) and places part of its content on the HTML page. Then it colors the data according to its value.&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;// main.js&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getJSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;http://b1.zold.io/&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$body&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;body&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;nscore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;red&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;nscore&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;green&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;css&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;color&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Pretty obvious, isn’t it? Just a single &lt;code&gt;main.js&lt;/code&gt; file which does everything we need. We simply add it to the HTML and it works:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;https://code.jquery.com/jquery-3.3.1.min.js&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;main.js&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;body&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;onload&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;main();&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;loading...&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Now, let me refactor it. Let me break it into two pieces. The first piece will load the data and the second one will be a jQuery plugin to colorize HTML content according to the data it contains. This is how the plugin will look:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;// colorize.js&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;colorize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;parseFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;keys&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;colors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;parseInt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;reverse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;max&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addClass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;colors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;removeClass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;colors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;The &lt;code&gt;main.js&lt;/code&gt; will look like this:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;// main.js&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getJSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;http://b1.zold.io/&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;body&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;nscore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;colorize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;green&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;red&amp;#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Now, instead of a single monolithic piece of code, we have two smaller pieces which have to be loaded together into the target HTML:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;https://code.jquery.com/jquery-3.3.1.min.js&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;colorize.js&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;main.js&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;body&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;onload&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;main();&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;loading...&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Two pieces are better than one? It seems that &lt;a href=&quot;https://ai.google/research/pubs/pub45424&quot;&gt;Google&lt;/a&gt;, &lt;a href=&quot;https://blog.digitalocean.com/taming-your-go-dependencies/&quot;&gt;Digital Ocean&lt;/a&gt; and &lt;a href=&quot;https://gregoryszorc.com/blog/2014/09/09/on-monolithic-repositories/&quot;&gt;Mozilla&lt;/a&gt; don’t think so.&lt;/p&gt; &lt;p&gt;I disagree.&lt;/p&gt; &lt;p&gt;To illustrate my point I extracted the JavaScript function into a new standalone &lt;a href=&quot;https://github.com/yegor256/colorizejs&quot;&gt;jQuery plugin&lt;/a&gt;. Here is what I did:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Created a new GitHub repo &lt;a href=&quot;https://github.com/yegor256/colorizejs&quot;&gt;yegor256/colorizejs&lt;/a&gt;;&lt;/li&gt; &lt;li&gt;Read the &lt;a href=&quot;https://learn.jquery.com/plugins/basic-plugin-creation/&quot;&gt;instructions&lt;/a&gt;;&lt;/li&gt; &lt;li&gt;Did some research of jQuery plugins, studied a few examples;&lt;/li&gt; &lt;li&gt;Found out that most of them used &lt;a href=&quot;https://gulpjs.com/&quot;&gt;Gulp&lt;/a&gt;, which I’ve never heard of;&lt;/li&gt; &lt;li&gt;Decided to use &lt;a href=&quot;https://www.npmjs.com/&quot;&gt;npm&lt;/a&gt; for JavaScript packaging (what else, right?);&lt;/li&gt; &lt;li&gt;Created &lt;a href=&quot;https://github.com/yegor256/colorizejs/blob/master/package.json&quot;&gt;&lt;code&gt;package.json&lt;/code&gt;&lt;/a&gt; for npm;&lt;/li&gt; &lt;li&gt;Renamed GitHub repo to &lt;code&gt;colorizejs&lt;/code&gt; when I found out that npm package &lt;a href=&quot;https://www.npmjs.com/package/colorize&quot;&gt;&lt;code&gt;colorize&lt;/code&gt;&lt;/a&gt; already exists;&lt;/li&gt; &lt;li&gt;Configured &lt;a href=&quot;https://github.com/yegor256/colorizejs/blob/master/.travis.yml&quot;&gt;&lt;code&gt;.travis.yml&lt;/code&gt;&lt;/a&gt; for &lt;a href=&quot;https://travis-ci.org/&quot;&gt;Travis&lt;/a&gt;;&lt;/li&gt; &lt;li&gt;Created a &lt;a href=&quot;https://github.com/yegor256/colorizejs/blob/master/README.md&quot;&gt;README.md&lt;/a&gt; and explained how to use it and install it;&lt;/li&gt; &lt;li&gt;Decided to use the MIT license and created &lt;a href=&quot;https://github.com/yegor256/colorizejs/blob/master/LICENSE.txt&quot;&gt;LICENSE.txt&lt;/a&gt;;&lt;/li&gt; &lt;li&gt;Configured &lt;a href=&quot;https://github.com/yegor256/colorizejs/blob/master/.pdd&quot;&gt;PDD&lt;/a&gt; for &lt;a href=&quot;/2017/04/05/pdd-in-action.html&quot;&gt;puzzles&lt;/a&gt; automated collection;&lt;/li&gt; &lt;li&gt;Configured &lt;a href=&quot;https://github.com/yegor256/colorizejs/blob/master/.rultor.yml&quot;&gt;&lt;code&gt;.rultor.yml&lt;/code&gt;&lt;/a&gt; for &lt;a href=&quot;/2014/07/24/rultor-automated-merging.html&quot;&gt;Rultor&lt;/a&gt;;&lt;/li&gt; &lt;li&gt;Tried to create a unit test and failed miserably (after a full hour of research), since I’ve had almost no experience in JS unit testing;&lt;/li&gt; &lt;li&gt;Posted a &lt;a href=&quot;https://stackoverflow.com/questions/51809750/&quot;&gt;question&lt;/a&gt; to StackOverflow;&lt;/li&gt; &lt;li&gt;The question was answered by a few people only after the bounty I offered;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/brian-lives-outdoors&quot;&gt;@brian-lives-outdoors&lt;/a&gt;’s answer was the best and he even submitted a &lt;a href=&quot;https://github.com/yegor256/colorizejs/pull/2&quot;&gt;pull request&lt;/a&gt; with a unit test, which I merged;&lt;/li&gt; &lt;li&gt;Released the first version &lt;a href=&quot;https://github.com/yegor256/colorizejs/tree/0.0.1&quot;&gt;0.0.1&lt;/a&gt; to &lt;a href=&quot;https://www.npmjs.com/package/colorizejs&quot;&gt;npmjs.com&lt;/a&gt;;&lt;/li&gt; &lt;li&gt;Modified the code to make it work both with classes and colors;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/yegor256/colorizejs/issues/3&quot;&gt;Implemented&lt;/a&gt; and released the next version &lt;a href=&quot;https://github.com/yegor256/colorizejs/tree/0.1.0&quot;&gt;0.1.0&lt;/a&gt;;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/zold-io/zold.github.io/issues/81&quot;&gt;Added it&lt;/a&gt; to Zold front-end, tested it, and released it—check it out &lt;a href=&quot;http://www.zold.io/health.html&quot;&gt;here&lt;/a&gt;.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;It took almost three weeks of waiting and four hours of work, just to move a small piece of JavaScript code to a new repository and release it separately. Was it worth it? Well, I think it was. But &lt;del&gt;many&lt;/del&gt; most other blog post authors, who I managed to find, think that it would be better to keep everything in a single monolithic repo, mostly because it’s better for &lt;em&gt;productivity&lt;/em&gt;. For example, &lt;a href=&quot;https://danluu.com/monorepo/&quot;&gt;Advantages of monorepos&lt;/a&gt; by &lt;a href=&quot;https://twitter.com/danluu&quot;&gt;Dan Luu&lt;/a&gt;, &lt;a href=&quot;https://people.engr.ncsu.edu/ermurph3/papers/seip18.pdf&quot;&gt;Advantages and Disadvantages of a Monolithic Repository&lt;/a&gt; (a case study at Google) by Ciera Jaspan et al., and &lt;a href=&quot;https://www.tomasvotruba.cz/blog/2017/01/31/how-monolithic-repository-in-open-source-saved-my-laziness/&quot;&gt;How Monolithic Repository in Open Source saved my Laziness&lt;/a&gt; by Tomas Votruba.&lt;/p&gt; &lt;p&gt;There are also a few good analyses of both approaches, for example &lt;a href=&quot;https://www.dotconferences.com/2016/05/fabien-potencier-monolithic-repositories-vs-many-repositories&quot;&gt;Monolithic repositories vs. Many repositories&lt;/a&gt; speech by Fabien Potencier at dotScale 2016 and &lt;a href=&quot;http://www.gigamonkeys.com/mono-vs-multi/&quot;&gt;Repo Style Wars: Mono vs Multi&lt;/a&gt; by Peter Seibel.&lt;/p&gt; &lt;p&gt;In a nutshell, they all claim that productivity is higher with a monolithic repo because the amount of operations one has to do in order to make a change is smaller. Indeed, in a monorepo there will be a single branch, a single set of commits, a single pull request, a single merge, deploy and release. Also it will be easier to test, both manually and via unit testing. Continuous integration is easier to configure, and so on and so forth.&lt;/p&gt; &lt;aside class=&quot;quote&quot;&gt;A set of smaller components is better than a larger solid piece.&lt;/aside&gt; &lt;p&gt;All these “reasonable” arguments remind me of what I hear when preaching object decomposition and suggesting that multiple objects are better than a single large one. Imagine a large class of 3,000 lines of code, which does many things and they are all very tightly coupled. It’s “easy” to test it, to make changes, to deploy, to review, etc. Because everything stays in one file, right? We don’t need to jump from class to class in order to understand the design. We just look at one screen, scroll it up and down, and that’s it. Right? Totally wrong!&lt;/p&gt; &lt;p&gt;I guess I don’t need to explain why it’s wrong. We don’t design our software that way anymore. We know that tight coupling is a bad idea. We know that a set of smaller components is better than a larger solid piece.&lt;/p&gt; &lt;p&gt;Why can’t we apply the same logic to repositories? I believe we can. Of course, just like in object-oriented programming, a fine-grained design requires more skills and time. Look at what I had to do with this small jQuery plugin. I’ve spent hours of coding and thinking. I even had to learn &lt;a href=&quot;https://gulpjs.com/&quot;&gt;Gulp&lt;/a&gt; and &lt;a href=&quot;https://jasmine.github.io/&quot;&gt;Jasmine&lt;/a&gt;, which I most probably will not use anymore. But the benefits we are getting from it are enormous. This is my short list of them:&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Encapsulation&lt;/strong&gt;. Each repo encapsulates a single problem, hiding its details from everybody else. Thanks to that, the scope each repo has to deal with gets smaller. The smaller the scope, just like in OOP, the easier it is to maintain and modify. The easier to maintain, the cheaper the development. I guess Google guys don’t really worry about costs. On the contrary, they want their salaries to grow. A large unmaintainable monolithic repo is a perfect tool to make it happen.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Fast Builds&lt;/strong&gt;. When a repo is small, the time its automated build takes is small. Look at the time Travis &lt;a href=&quot;https://travis-ci.org/yegor256/colorizejs/builds/420726284&quot;&gt;spends&lt;/a&gt; for my jQuery plugin. It’s 51 seconds. It’s fast. We &lt;a href=&quot;https://mortoray.com/2015/05/06/fast-build-turnaround-time-is-essential/&quot;&gt;all know&lt;/a&gt; that the faster the build, the better it is for productivity, since it’s easier to use the build as a tool for development.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Accurate Metrics&lt;/strong&gt;. I don’t know whether you rely on metrics in your projects, but we at &lt;a href=&quot;https://www.zerocracy.com&quot;&gt;Zerocracy&lt;/a&gt; do pay attention to numbers, like lines of code, &lt;a href=&quot;/2014/11/14/hits-of-code.html&quot;&gt;hits of code&lt;/a&gt;, number of commits, classes, methods, cohesion, coupling, etc. It’s always a question whether the metrics are accurate. Calculating lines of code for a large repository doesn’t make any sense, since the number will include a lot of files from completely different parts of the application. Moreover there will be different languages and file formats. Say a repo has 200K lines of Java, 150K lines of XML, 50K lines of JavaScript, and 40K lines of Ruby. Can you say something specific about this repo? Is it large? Is it a Java repo? And, more importantly, can it be compared with other repositories? Not really. It’s just a big messy storage of files.&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;aside class=&quot;quote&quot;&gt;The preferred situation is one language or technology per repository.&lt;/aside&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Homogeneous Tasks&lt;/strong&gt;. Smaller repositories tend to have smaller tech stacks, meaning that each of them uses just a few languages and frameworks, or (and this is the preferred situation)—one language or technology per repository. Thanks to this, the management of programmers becomes easier, since any ticket/problem can be assigned to anybody. It’s easier to make tasks similar in size and complexity. This obviously means better manageability of the project.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Single Coding Standard&lt;/strong&gt;. It’s easier to standardize the coding style if the repo is small. When it’s large, various parts of the code base will have different styles and it will be almost impossible to put everybody on the same page. In other words, smaller repositories look more beautiful than larger ones.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Short Names&lt;/strong&gt;. Each repository, inevitably, will have its own namespace. For example, in the JS repository I just created, I only have two files: &lt;code&gt;colorizejs.js&lt;/code&gt; and &lt;code&gt;test-colorizejs.js&lt;/code&gt;. I don’t really care about the naming inside them, since the namespace is very small. &lt;del&gt;I can even use global variables.&lt;/del&gt; Shorter names and smaller namespaces mean better maintainability.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Simple Tests&lt;/strong&gt;. The larger the code base, the more dependencies it has, which are difficult to mock and test. Very large code bases become fundamentally untestable since they require a lot of integration tests which are difficult to maintain. Smaller libraries, frameworks and modules are easier to keep at the level of simple and fast unit testing.&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Thus, I believe that the smaller the repositories and modules, the better. Ideally, I would say, the largest acceptable size for a code base is 50,000 lines of code. Everything that goes above this line is a perfect candidate for decomposition.&lt;/p&gt; " /> <meta name="keywords" content="next, path, output, content, previous, url, relative_path, id, collection, excerpt, draft, categories, layout, title, date, place, tags, description, keywords, image, jb_picture, slug, ext" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2018-09-05 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Monolithic Repos Are Evil"/> <meta name="twitter:description" property="og:description" content="&lt;p&gt;We all keep our code in &lt;del&gt;Git&lt;/del&gt; &lt;a href=&quot;https://en.wikipedia.org/wiki/Version_control&quot;&gt;version control&lt;/a&gt; repositories. The question is whether we should create a new repository for each new module or try to keep as much as possible in a single so called “monolithic” repo. Market leaders, like &lt;a href=&quot;https://code.fb.com/core-data/scaling-mercurial-at-facebook/&quot;&gt;Facebook&lt;/a&gt; and &lt;a href=&quot;https://www.infoq.com/presentations/Development-at-Google&quot;&gt;Google&lt;/a&gt;, advocate the second approach. I believe they are wrong.&lt;/p&gt; &lt;!--more--&gt; &lt;figure class=&quot;jb_picture&quot;&gt;&lt;img itemprop=&quot;image&quot; alt=&quot;Funny Games (2007) by Michael Haneke&quot; src=&quot;/images/2018/09/funny-games.jpg&quot; longdesc=&quot;#9f6d574f&quot; /&gt;&lt;figcaption id=&quot;9f6d574f&quot;&gt;Funny Games (2007) by Michael Haneke&lt;/figcaption&gt;&lt;/figure&gt; &lt;p&gt;Let’s use the following JavaScript function as an example. It downloads a JSON document from a &lt;a href=&quot;http://www.zold.io&quot;&gt;Zold&lt;/a&gt; node (using &lt;a href=&quot;https://jquery.com/&quot;&gt;jQuery&lt;/a&gt;) and places part of its content on the HTML page. Then it colors the data according to its value.&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;// main.js&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getJSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;http://b1.zold.io/&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$body&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;body&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;nscore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;red&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;nscore&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;green&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;css&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;color&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Pretty obvious, isn’t it? Just a single &lt;code&gt;main.js&lt;/code&gt; file which does everything we need. We simply add it to the HTML and it works:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;https://code.jquery.com/jquery-3.3.1.min.js&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;main.js&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;body&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;onload&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;main();&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;loading...&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Now, let me refactor it. Let me break it into two pieces. The first piece will load the data and the second one will be a jQuery plugin to colorize HTML content according to the data it contains. This is how the plugin will look:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;// colorize.js&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;colorize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;parseFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;keys&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;colors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;parseInt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;reverse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;max&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;addClass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;colors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;removeClass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;colors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;The &lt;code&gt;main.js&lt;/code&gt; will look like this:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;// main.js&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getJSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;http://b1.zold.io/&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;body&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;nscore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;colorize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;green&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;red&amp;#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Now, instead of a single monolithic piece of code, we have two smaller pieces which have to be loaded together into the target HTML:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;https://code.jquery.com/jquery-3.3.1.min.js&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;colorize.js&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;main.js&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;body&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;onload&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;main();&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;loading...&lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Two pieces are better than one? It seems that &lt;a href=&quot;https://ai.google/research/pubs/pub45424&quot;&gt;Google&lt;/a&gt;, &lt;a href=&quot;https://blog.digitalocean.com/taming-your-go-dependencies/&quot;&gt;Digital Ocean&lt;/a&gt; and &lt;a href=&quot;https://gregoryszorc.com/blog/2014/09/09/on-monolithic-repositories/&quot;&gt;Mozilla&lt;/a&gt; don’t think so.&lt;/p&gt; &lt;p&gt;I disagree.&lt;/p&gt; &lt;p&gt;To illustrate my point I extracted the JavaScript function into a new standalone &lt;a href=&quot;https://github.com/yegor256/colorizejs&quot;&gt;jQuery plugin&lt;/a&gt;. Here is what I did:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;Created a new GitHub repo &lt;a href=&quot;https://github.com/yegor256/colorizejs&quot;&gt;yegor256/colorizejs&lt;/a&gt;;&lt;/li&gt; &lt;li&gt;Read the &lt;a href=&quot;https://learn.jquery.com/plugins/basic-plugin-creation/&quot;&gt;instructions&lt;/a&gt;;&lt;/li&gt; &lt;li&gt;Did some research of jQuery plugins, studied a few examples;&lt;/li&gt; &lt;li&gt;Found out that most of them used &lt;a href=&quot;https://gulpjs.com/&quot;&gt;Gulp&lt;/a&gt;, which I’ve never heard of;&lt;/li&gt; &lt;li&gt;Decided to use &lt;a href=&quot;https://www.npmjs.com/&quot;&gt;npm&lt;/a&gt; for JavaScript packaging (what else, right?);&lt;/li&gt; &lt;li&gt;Created &lt;a href=&quot;https://github.com/yegor256/colorizejs/blob/master/package.json&quot;&gt;&lt;code&gt;package.json&lt;/code&gt;&lt;/a&gt; for npm;&lt;/li&gt; &lt;li&gt;Renamed GitHub repo to &lt;code&gt;colorizejs&lt;/code&gt; when I found out that npm package &lt;a href=&quot;https://www.npmjs.com/package/colorize&quot;&gt;&lt;code&gt;colorize&lt;/code&gt;&lt;/a&gt; already exists;&lt;/li&gt; &lt;li&gt;Configured &lt;a href=&quot;https://github.com/yegor256/colorizejs/blob/master/.travis.yml&quot;&gt;&lt;code&gt;.travis.yml&lt;/code&gt;&lt;/a&gt; for &lt;a href=&quot;https://travis-ci.org/&quot;&gt;Travis&lt;/a&gt;;&lt;/li&gt; &lt;li&gt;Created a &lt;a href=&quot;https://github.com/yegor256/colorizejs/blob/master/README.md&quot;&gt;README.md&lt;/a&gt; and explained how to use it and install it;&lt;/li&gt; &lt;li&gt;Decided to use the MIT license and created &lt;a href=&quot;https://github.com/yegor256/colorizejs/blob/master/LICENSE.txt&quot;&gt;LICENSE.txt&lt;/a&gt;;&lt;/li&gt; &lt;li&gt;Configured &lt;a href=&quot;https://github.com/yegor256/colorizejs/blob/master/.pdd&quot;&gt;PDD&lt;/a&gt; for &lt;a href=&quot;/2017/04/05/pdd-in-action.html&quot;&gt;puzzles&lt;/a&gt; automated collection;&lt;/li&gt; &lt;li&gt;Configured &lt;a href=&quot;https://github.com/yegor256/colorizejs/blob/master/.rultor.yml&quot;&gt;&lt;code&gt;.rultor.yml&lt;/code&gt;&lt;/a&gt; for &lt;a href=&quot;/2014/07/24/rultor-automated-merging.html&quot;&gt;Rultor&lt;/a&gt;;&lt;/li&gt; &lt;li&gt;Tried to create a unit test and failed miserably (after a full hour of research), since I’ve had almost no experience in JS unit testing;&lt;/li&gt; &lt;li&gt;Posted a &lt;a href=&quot;https://stackoverflow.com/questions/51809750/&quot;&gt;question&lt;/a&gt; to StackOverflow;&lt;/li&gt; &lt;li&gt;The question was answered by a few people only after the bounty I offered;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/brian-lives-outdoors&quot;&gt;@brian-lives-outdoors&lt;/a&gt;’s answer was the best and he even submitted a &lt;a href=&quot;https://github.com/yegor256/colorizejs/pull/2&quot;&gt;pull request&lt;/a&gt; with a unit test, which I merged;&lt;/li&gt; &lt;li&gt;Released the first version &lt;a href=&quot;https://github.com/yegor256/colorizejs/tree/0.0.1&quot;&gt;0.0.1&lt;/a&gt; to &lt;a href=&quot;https://www.npmjs.com/package/colorizejs&quot;&gt;npmjs.com&lt;/a&gt;;&lt;/li&gt; &lt;li&gt;Modified the code to make it work both with classes and colors;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/yegor256/colorizejs/issues/3&quot;&gt;Implemented&lt;/a&gt; and released the next version &lt;a href=&quot;https://github.com/yegor256/colorizejs/tree/0.1.0&quot;&gt;0.1.0&lt;/a&gt;;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/zold-io/zold.github.io/issues/81&quot;&gt;Added it&lt;/a&gt; to Zold front-end, tested it, and released it—check it out &lt;a href=&quot;http://www.zold.io/health.html&quot;&gt;here&lt;/a&gt;.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;It took almost three weeks of waiting and four hours of work, just to move a small piece of JavaScript code to a new repository and release it separately. Was it worth it? Well, I think it was. But &lt;del&gt;many&lt;/del&gt; most other blog post authors, who I managed to find, think that it would be better to keep everything in a single monolithic repo, mostly because it’s better for &lt;em&gt;productivity&lt;/em&gt;. For example, &lt;a href=&quot;https://danluu.com/monorepo/&quot;&gt;Advantages of monorepos&lt;/a&gt; by &lt;a href=&quot;https://twitter.com/danluu&quot;&gt;Dan Luu&lt;/a&gt;, &lt;a href=&quot;https://people.engr.ncsu.edu/ermurph3/papers/seip18.pdf&quot;&gt;Advantages and Disadvantages of a Monolithic Repository&lt;/a&gt; (a case study at Google) by Ciera Jaspan et al., and &lt;a href=&quot;https://www.tomasvotruba.cz/blog/2017/01/31/how-monolithic-repository-in-open-source-saved-my-laziness/&quot;&gt;How Monolithic Repository in Open Source saved my Laziness&lt;/a&gt; by Tomas Votruba.&lt;/p&gt; &lt;p&gt;There are also a few good analyses of both approaches, for example &lt;a href=&quot;https://www.dotconferences.com/2016/05/fabien-potencier-monolithic-repositories-vs-many-repositories&quot;&gt;Monolithic repositories vs. Many repositories&lt;/a&gt; speech by Fabien Potencier at dotScale 2016 and &lt;a href=&quot;http://www.gigamonkeys.com/mono-vs-multi/&quot;&gt;Repo Style Wars: Mono vs Multi&lt;/a&gt; by Peter Seibel.&lt;/p&gt; &lt;p&gt;In a nutshell, they all claim that productivity is higher with a monolithic repo because the amount of operations one has to do in order to make a change is smaller. Indeed, in a monorepo there will be a single branch, a single set of commits, a single pull request, a single merge, deploy and release. Also it will be easier to test, both manually and via unit testing. Continuous integration is easier to configure, and so on and so forth.&lt;/p&gt; &lt;aside class=&quot;quote&quot;&gt;A set of smaller components is better than a larger solid piece.&lt;/aside&gt; &lt;p&gt;All these “reasonable” arguments remind me of what I hear when preaching object decomposition and suggesting that multiple objects are better than a single large one. Imagine a large class of 3,000 lines of code, which does many things and they are all very tightly coupled. It’s “easy” to test it, to make changes, to deploy, to review, etc. Because everything stays in one file, right? We don’t need to jump from class to class in order to understand the design. We just look at one screen, scroll it up and down, and that’s it. Right? Totally wrong!&lt;/p&gt; &lt;p&gt;I guess I don’t need to explain why it’s wrong. We don’t design our software that way anymore. We know that tight coupling is a bad idea. We know that a set of smaller components is better than a larger solid piece.&lt;/p&gt; &lt;p&gt;Why can’t we apply the same logic to repositories? I believe we can. Of course, just like in object-oriented programming, a fine-grained design requires more skills and time. Look at what I had to do with this small jQuery plugin. I’ve spent hours of coding and thinking. I even had to learn &lt;a href=&quot;https://gulpjs.com/&quot;&gt;Gulp&lt;/a&gt; and &lt;a href=&quot;https://jasmine.github.io/&quot;&gt;Jasmine&lt;/a&gt;, which I most probably will not use anymore. But the benefits we are getting from it are enormous. This is my short list of them:&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Encapsulation&lt;/strong&gt;. Each repo encapsulates a single problem, hiding its details from everybody else. Thanks to that, the scope each repo has to deal with gets smaller. The smaller the scope, just like in OOP, the easier it is to maintain and modify. The easier to maintain, the cheaper the development. I guess Google guys don’t really worry about costs. On the contrary, they want their salaries to grow. A large unmaintainable monolithic repo is a perfect tool to make it happen.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Fast Builds&lt;/strong&gt;. When a repo is small, the time its automated build takes is small. Look at the time Travis &lt;a href=&quot;https://travis-ci.org/yegor256/colorizejs/builds/420726284&quot;&gt;spends&lt;/a&gt; for my jQuery plugin. It’s 51 seconds. It’s fast. We &lt;a href=&quot;https://mortoray.com/2015/05/06/fast-build-turnaround-time-is-essential/&quot;&gt;all know&lt;/a&gt; that the faster the build, the better it is for productivity, since it’s easier to use the build as a tool for development.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Accurate Metrics&lt;/strong&gt;. I don’t know whether you rely on metrics in your projects, but we at &lt;a href=&quot;https://www.zerocracy.com&quot;&gt;Zerocracy&lt;/a&gt; do pay attention to numbers, like lines of code, &lt;a href=&quot;/2014/11/14/hits-of-code.html&quot;&gt;hits of code&lt;/a&gt;, number of commits, classes, methods, cohesion, coupling, etc. It’s always a question whether the metrics are accurate. Calculating lines of code for a large repository doesn’t make any sense, since the number will include a lot of files from completely different parts of the application. Moreover there will be different languages and file formats. Say a repo has 200K lines of Java, 150K lines of XML, 50K lines of JavaScript, and 40K lines of Ruby. Can you say something specific about this repo? Is it large? Is it a Java repo? And, more importantly, can it be compared with other repositories? Not really. It’s just a big messy storage of files.&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;aside class=&quot;quote&quot;&gt;The preferred situation is one language or technology per repository.&lt;/aside&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Homogeneous Tasks&lt;/strong&gt;. Smaller repositories tend to have smaller tech stacks, meaning that each of them uses just a few languages and frameworks, or (and this is the preferred situation)—one language or technology per repository. Thanks to this, the management of programmers becomes easier, since any ticket/problem can be assigned to anybody. It’s easier to make tasks similar in size and complexity. This obviously means better manageability of the project.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Single Coding Standard&lt;/strong&gt;. It’s easier to standardize the coding style if the repo is small. When it’s large, various parts of the code base will have different styles and it will be almost impossible to put everybody on the same page. In other words, smaller repositories look more beautiful than larger ones.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Short Names&lt;/strong&gt;. Each repository, inevitably, will have its own namespace. For example, in the JS repository I just created, I only have two files: &lt;code&gt;colorizejs.js&lt;/code&gt; and &lt;code&gt;test-colorizejs.js&lt;/code&gt;. I don’t really care about the naming inside them, since the namespace is very small. &lt;del&gt;I can even use global variables.&lt;/del&gt; Shorter names and smaller namespaces mean better maintainability.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Simple Tests&lt;/strong&gt;. The larger the code base, the more dependencies it has, which are difficult to mock and test. Very large code bases become fundamentally untestable since they require a lot of integration tests which are difficult to maintain. Smaller libraries, frameworks and modules are easier to keep at the level of simple and fast unit testing.&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Thus, I believe that the smaller the repositories and modules, the better. Ideally, I would say, the largest acceptable size for a code base is 50,000 lines of code. Everything that goes above this line is a perfect candidate for decomposition.&lt;/p&gt; "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2018/09/05/monolithic-repositories.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?23bb3130b4f"/> <link rel="apple-touch-icon" href="/favicon.ico?23bb3130b4f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?23bb3130b4f"/> <link rel="stylesheet" href="/css/icons.css?23bb3130b4f"/> <link rel="canonical" href="https://www.yegor256.com/2018/09/05/monolithic-repositories.html" /> <link rel="amphtml" href="https://www.yegor256.com/2018/09/05/monolithic-repositories.amp.html" /> <title>Monolithic Repos Are Evil </title> <meta name='og:image' content='https://www.yegor256.com/images/2018/09/funny-games.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2018/09/funny-games.jpg'/><meta name='og:image:width' content='1270'/> <meta name='twitter:image:width' content='1270'/><meta name='og:image:height' content='687'/> <meta name='twitter:image:height' content='687'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Funny Games (2007) by Michael Haneke'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /2018/09/05/monolithic-repositories.html><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /2018/09/05/monolithic-repositories.html><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /2018/09/05/monolithic-repositories.html><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /2018/09/05/monolithic-repositories.html><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /2018/09/05/monolithic-repositories.html><a href="/books.html" title="The books I wrote">Books</a></li> <li /2018/09/05/monolithic-repositories.html><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /2018/09/05/monolithic-repositories.html><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /2018/09/05/monolithic-repositories.html class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /2018/09/05/monolithic-repositories.html><a href="/award.html" title="Software quality award">Award</a></li> <li /2018/09/05/monolithic-repositories.html><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /2018/09/05/monolithic-repositories.html><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /2018/09/05/monolithic-repositories.html><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2018/09/05/monolithic-repositories.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2018/09/05/monolithic-repositories.html</code></p><h1 itemprop="name headline mainEntityOfPage">Monolithic Repos Are Evil</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2018-09-05T00:00:00+00:00"> 5 September 2018 </time> </li> <li class="desktop-only" itemprop="locationCreated">Moscow, Russia</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2018/09/05/monolithic-repositories.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>We all keep our code in <del>Git</del> <a href="https://en.wikipedia.org/wiki/Version_control">version control</a> repositories. The question is whether we should create a new repository for each new module or try to keep as much as possible in a single so called “monolithic” repo. Market leaders, like <a href="https://code.fb.com/core-data/scaling-mercurial-at-facebook/">Facebook</a> and <a href="https://www.infoq.com/presentations/Development-at-Google">Google</a>, advocate the second approach. I believe they are wrong.</p><figure class="jb_picture"><img itemprop="image" alt="Funny Games (2007) by Michael Haneke" src="/images/2018/09/funny-games.jpg" longdesc="#9f6d574f" /><figcaption id="9f6d574f">Funny Games (2007) by Michael Haneke</figcaption></figure><p>Let’s use the following JavaScript function as an example. It downloads a JSON document from a <a href="http://www.zold.io">Zold</a> node (using <a href="https://jquery.com/">jQuery</a>) and places part of its content on the HTML page. Then it colors the data according to its value.</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="c1">// main.js</span>
<span class="kd">function</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">getJSON</span><span class="p">(</span><span class="s1">&#39;http://b1.zold.io/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">json</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">$body</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">);</span>
    <span class="nx">$body</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">json</span><span class="p">.</span><span class="nx">nscore</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">json</span><span class="p">.</span><span class="nx">nscore</span> <span class="o">&gt;</span> <span class="mi">500</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">color</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">$body</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="nx">color</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span></code></pre></figure><p>Pretty obvious, isn’t it? Just a single <code>main.js</code> file which does everything we need. We simply add it to the HTML and it works:</p><figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://code.jquery.com/jquery-3.3.1.min.js&quot;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;main.js&quot;</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span> <span class="na">onload</span><span class="o">=</span><span class="s">&quot;main();&quot;</span><span class="p">&gt;</span>loading...<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></figure><p>Now, let me refactor it. Let me break it into two pieces. The first piece will load the data and the second one will be a jQuery plugin to colorize HTML content according to the data it contains. This is how the plugin will look:</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="c1">// colorize.js</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">colorize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">text</span><span class="p">());</span>
  <span class="kd">var</span> <span class="nx">keys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">colors</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">k</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">k</span><span class="p">);</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">a</span> <span class="o">-</span> <span class="nx">b</span><span class="p">;</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">reverse</span><span class="p">();</span>
  <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">max</span> <span class="o">=</span> <span class="nx">keys</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">data</span> <span class="o">&gt;=</span> <span class="nx">max</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">colors</span><span class="p">[</span><span class="nx">max</span><span class="p">]);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">colors</span><span class="p">[</span><span class="nx">max</span><span class="p">]);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure><p>The <code>main.js</code> will look like this:</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="c1">// main.js</span>
<span class="kd">function</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">getJSON</span><span class="p">(</span><span class="s1">&#39;http://b1.zold.io/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">json</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">json</span><span class="p">.</span><span class="nx">nscore</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">colorize</span><span class="p">({</span> <span class="mi">500</span><span class="o">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="o">:</span> <span class="s1">&#39;red&#39;</span> <span class="p">});</span>
  <span class="p">});</span>
<span class="p">}</span></code></pre></figure><p>Now, instead of a single monolithic piece of code, we have two smaller pieces which have to be loaded together into the target HTML:</p><figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://code.jquery.com/jquery-3.3.1.min.js&quot;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;colorize.js&quot;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;main.js&quot;</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span> <span class="na">onload</span><span class="o">=</span><span class="s">&quot;main();&quot;</span><span class="p">&gt;</span>loading...<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></figure><p>Two pieces are better than one? It seems that <a href="https://ai.google/research/pubs/pub45424">Google</a>, <a href="https://blog.digitalocean.com/taming-your-go-dependencies/">Digital Ocean</a> and <a href="https://gregoryszorc.com/blog/2014/09/09/on-monolithic-repositories/">Mozilla</a> don’t think so.</p><p>I disagree.</p><p>To illustrate my point I extracted the JavaScript function into a new standalone <a href="https://github.com/yegor256/colorizejs">jQuery plugin</a>. Here is what I did:</p><ul> <li>Created a new GitHub repo <a href="https://github.com/yegor256/colorizejs">yegor256/colorizejs</a>;</li> <li>Read the <a href="https://learn.jquery.com/plugins/basic-plugin-creation/">instructions</a>;</li> <li>Did some research of jQuery plugins, studied a few examples;</li> <li>Found out that most of them used <a href="https://gulpjs.com/">Gulp</a>, which I’ve never heard of;</li> <li>Decided to use <a href="https://www.npmjs.com/">npm</a> for JavaScript packaging (what else, right?);</li> <li>Created <a href="https://github.com/yegor256/colorizejs/blob/master/package.json"><code>package.json</code></a> for npm;</li> <li>Renamed GitHub repo to <code>colorizejs</code> when I found out that npm package <a href="https://www.npmjs.com/package/colorize"><code>colorize</code></a> already exists;</li> <li>Configured <a href="https://github.com/yegor256/colorizejs/blob/master/.travis.yml"><code>.travis.yml</code></a> for <a href="https://travis-ci.org/">Travis</a>;</li> <li>Created a <a href="https://github.com/yegor256/colorizejs/blob/master/README.md">README.md</a> and explained how to use it and install it;</li> <li>Decided to use the MIT license and created <a href="https://github.com/yegor256/colorizejs/blob/master/LICENSE.txt">LICENSE.txt</a>;</li> <li>Configured <a href="https://github.com/yegor256/colorizejs/blob/master/.pdd">PDD</a> for <a href="/2017/04/05/pdd-in-action.html">puzzles</a> automated collection;</li> <li>Configured <a href="https://github.com/yegor256/colorizejs/blob/master/.rultor.yml"><code>.rultor.yml</code></a> for <a href="/2014/07/24/rultor-automated-merging.html">Rultor</a>;</li> <li>Tried to create a unit test and failed miserably (after a full hour of research), since I’ve had almost no experience in JS unit testing;</li> <li>Posted a <a href="https://stackoverflow.com/questions/51809750/">question</a> to StackOverflow;</li> <li>The question was answered by a few people only after the bounty I offered;</li> <li><a href="https://github.com/brian-lives-outdoors">@brian-lives-outdoors</a>’s answer was the best and he even submitted a <a href="https://github.com/yegor256/colorizejs/pull/2">pull request</a> with a unit test, which I merged;</li> <li>Released the first version <a href="https://github.com/yegor256/colorizejs/tree/0.0.1">0.0.1</a> to <a href="https://www.npmjs.com/package/colorizejs">npmjs.com</a>;</li> <li>Modified the code to make it work both with classes and colors;</li> <li><a href="https://github.com/yegor256/colorizejs/issues/3">Implemented</a> and released the next version <a href="https://github.com/yegor256/colorizejs/tree/0.1.0">0.1.0</a>;</li> <li><a href="https://github.com/zold-io/zold.github.io/issues/81">Added it</a> to Zold front-end, tested it, and released it—check it out <a href="http://www.zold.io/health.html">here</a>.</li></ul><p>It took almost three weeks of waiting and four hours of work, just to move a small piece of JavaScript code to a new repository and release it separately. Was it worth it? Well, I think it was. But <del>many</del> most other blog post authors, who I managed to find, think that it would be better to keep everything in a single monolithic repo, mostly because it’s better for <em>productivity</em>. For example, <a href="https://danluu.com/monorepo/">Advantages of monorepos</a> by <a href="https://twitter.com/danluu">Dan Luu</a>, <a href="https://people.engr.ncsu.edu/ermurph3/papers/seip18.pdf">Advantages and Disadvantages of a Monolithic Repository</a> (a case study at Google) by Ciera Jaspan et al., and <a href="https://www.tomasvotruba.cz/blog/2017/01/31/how-monolithic-repository-in-open-source-saved-my-laziness/">How Monolithic Repository in Open Source saved my Laziness</a> by Tomas Votruba.</p><p>There are also a few good analyses of both approaches, for example <a href="https://www.dotconferences.com/2016/05/fabien-potencier-monolithic-repositories-vs-many-repositories">Monolithic repositories vs. Many repositories</a> speech by Fabien Potencier at dotScale 2016 and <a href="http://www.gigamonkeys.com/mono-vs-multi/">Repo Style Wars: Mono vs Multi</a> by Peter Seibel.</p><p>In a nutshell, they all claim that productivity is higher with a monolithic repo because the amount of operations one has to do in order to make a change is smaller. Indeed, in a monorepo there will be a single branch, a single set of commits, a single pull request, a single merge, deploy and release. Also it will be easier to test, both manually and via unit testing. Continuous integration is easier to configure, and so on and so forth.</p><aside class="quote">A set of smaller components is better than a larger solid piece.</aside><p>All these “reasonable” arguments remind me of what I hear when preaching object decomposition and suggesting that multiple objects are better than a single large one. Imagine a large class of 3,000 lines of code, which does many things and they are all very tightly coupled. It’s “easy” to test it, to make changes, to deploy, to review, etc. Because everything stays in one file, right? We don’t need to jump from class to class in order to understand the design. We just look at one screen, scroll it up and down, and that’s it. Right? Totally wrong!</p><p>I guess I don’t need to explain why it’s wrong. We don’t design our software that way anymore. We know that tight coupling is a bad idea. We know that a set of smaller components is better than a larger solid piece.</p><p>Why can’t we apply the same logic to repositories? I believe we can. Of course, just like in object-oriented programming, a fine-grained design requires more skills and time. Look at what I had to do with this small jQuery plugin. I’ve spent hours of coding and thinking. I even had to learn <a href="https://gulpjs.com/">Gulp</a> and <a href="https://jasmine.github.io/">Jasmine</a>, which I most probably will not use anymore. But the benefits we are getting from it are enormous. This is my short list of them:</p><ul> <li><p><strong>Encapsulation</strong>. Each repo encapsulates a single problem, hiding its details from everybody else. Thanks to that, the scope each repo has to deal with gets smaller. The smaller the scope, just like in OOP, the easier it is to maintain and modify. The easier to maintain, the cheaper the development. I guess Google guys don’t really worry about costs. On the contrary, they want their salaries to grow. A large unmaintainable monolithic repo is a perfect tool to make it happen.</p></li> <li><p><strong>Fast Builds</strong>. When a repo is small, the time its automated build takes is small. Look at the time Travis <a href="https://travis-ci.org/yegor256/colorizejs/builds/420726284">spends</a> for my jQuery plugin. It’s 51 seconds. It’s fast. We <a href="https://mortoray.com/2015/05/06/fast-build-turnaround-time-is-essential/">all know</a> that the faster the build, the better it is for productivity, since it’s easier to use the build as a tool for development.</p></li> <li><p><strong>Accurate Metrics</strong>. I don’t know whether you rely on metrics in your projects, but we at <a href="https://www.zerocracy.com">Zerocracy</a> do pay attention to numbers, like lines of code, <a href="/2014/11/14/hits-of-code.html">hits of code</a>, number of commits, classes, methods, cohesion, coupling, etc. It’s always a question whether the metrics are accurate. Calculating lines of code for a large repository doesn’t make any sense, since the number will include a lot of files from completely different parts of the application. Moreover there will be different languages and file formats. Say a repo has 200K lines of Java, 150K lines of XML, 50K lines of JavaScript, and 40K lines of Ruby. Can you say something specific about this repo? Is it large? Is it a Java repo? And, more importantly, can it be compared with other repositories? Not really. It’s just a big messy storage of files.</p></li></ul><aside class="quote">The preferred situation is one language or technology per repository.</aside><ul> <li><p><strong>Homogeneous Tasks</strong>. Smaller repositories tend to have smaller tech stacks, meaning that each of them uses just a few languages and frameworks, or (and this is the preferred situation)—one language or technology per repository. Thanks to this, the management of programmers becomes easier, since any ticket/problem can be assigned to anybody. It’s easier to make tasks similar in size and complexity. This obviously means better manageability of the project.</p></li> <li><p><strong>Single Coding Standard</strong>. It’s easier to standardize the coding style if the repo is small. When it’s large, various parts of the code base will have different styles and it will be almost impossible to put everybody on the same page. In other words, smaller repositories look more beautiful than larger ones.</p></li> <li><p><strong>Short Names</strong>. Each repository, inevitably, will have its own namespace. For example, in the JS repository I just created, I only have two files: <code>colorizejs.js</code> and <code>test-colorizejs.js</code>. I don’t really care about the naming inside them, since the namespace is very small. <del>I can even use global variables.</del> Shorter names and smaller namespaces mean better maintainability.</p></li> <li><p><strong>Simple Tests</strong>. The larger the code base, the more dependencies it has, which are difficult to mock and test. Very large code bases become fundamentally untestable since they require a lot of integration tests which are difficult to maintain. Smaller libraries, frameworks and modules are easier to keep at the level of simple and fast unit testing.</p></li></ul><p>Thus, I believe that the smaller the repositories and modules, the better. Ideally, I would say, the largest acceptable size for a code base is 50,000 lines of code. Everything that goes above this line is a perfect candidate for decomposition.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2018/09/05/monolithic-repositories.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2018/09/05/monolithic-repositories.html&amp;text=Monolithic+Repos+Are+Evil" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2018/09/05/monolithic-repositories.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2018/09/05/monolithic-repositories.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2018/09/05/monolithic-repositories.html%3F2018-35&amp;title=Monolithic+Repos+Are+Evil" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2018/09/05/monolithic-repositories.html%3F2018-35&amp;t=Monolithic+Repos+Are+Evil" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>We all keep our code in <del>Git</del> <a href="https://en.wikipedia.org/wiki/Version_control">version control</a> repositories. The question is whether we should create a new repository for each new module or try to keep as much as possible in a single so called “monolithic” repo. Market leaders, like <a href="https://code.fb.com/core-data/scaling-mercurial-at-facebook/">Facebook</a> and <a href="https://www.infoq.com/presentations/Development-at-Google">Google</a>, advocate the second approach. I believe they are wrong.</p><figure class="jb_picture"><img itemprop="image" alt="Funny Games (2007) by Michael Haneke" src="/images/2018/09/funny-games.jpg" longdesc="#9f6d574f" /><figcaption id="9f6d574f">Funny Games (2007) by Michael Haneke</figcaption></figure><p>Let’s use the following JavaScript function as an example. It downloads a JSON document from a <a href="http://www.zold.io">Zold</a> node (using <a href="https://jquery.com/">jQuery</a>) and places part of its content on the HTML page. Then it colors the data according to its value.</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="c1">// main.js</span>
<span class="kd">function</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">getJSON</span><span class="p">(</span><span class="s1">&#39;http://b1.zold.io/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">json</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">$body</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">);</span>
    <span class="nx">$body</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">json</span><span class="p">.</span><span class="nx">nscore</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">json</span><span class="p">.</span><span class="nx">nscore</span> <span class="o">&gt;</span> <span class="mi">500</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">color</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">$body</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="nx">color</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span></code></pre></figure><p>Pretty obvious, isn’t it? Just a single <code>main.js</code> file which does everything we need. We simply add it to the HTML and it works:</p><figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://code.jquery.com/jquery-3.3.1.min.js&quot;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;main.js&quot;</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span> <span class="na">onload</span><span class="o">=</span><span class="s">&quot;main();&quot;</span><span class="p">&gt;</span>loading...<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></figure><p>Now, let me refactor it. Let me break it into two pieces. The first piece will load the data and the second one will be a jQuery plugin to colorize HTML content according to the data it contains. This is how the plugin will look:</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="c1">// colorize.js</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">colorize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">text</span><span class="p">());</span>
  <span class="kd">var</span> <span class="nx">keys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">colors</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">k</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">k</span><span class="p">);</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">a</span> <span class="o">-</span> <span class="nx">b</span><span class="p">;</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">reverse</span><span class="p">();</span>
  <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">max</span> <span class="o">=</span> <span class="nx">keys</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">data</span> <span class="o">&gt;=</span> <span class="nx">max</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">colors</span><span class="p">[</span><span class="nx">max</span><span class="p">]);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">colors</span><span class="p">[</span><span class="nx">max</span><span class="p">]);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure><p>The <code>main.js</code> will look like this:</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span></span><span class="c1">// main.js</span>
<span class="kd">function</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">getJSON</span><span class="p">(</span><span class="s1">&#39;http://b1.zold.io/&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">json</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">json</span><span class="p">.</span><span class="nx">nscore</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">colorize</span><span class="p">({</span> <span class="mi">500</span><span class="o">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="o">:</span> <span class="s1">&#39;red&#39;</span> <span class="p">});</span>
  <span class="p">});</span>
<span class="p">}</span></code></pre></figure><p>Now, instead of a single monolithic piece of code, we have two smaller pieces which have to be loaded together into the target HTML:</p><figure class="highlight"><pre><code class="language-html" data-lang="html"><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://code.jquery.com/jquery-3.3.1.min.js&quot;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;colorize.js&quot;</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;main.js&quot;</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span> <span class="na">onload</span><span class="o">=</span><span class="s">&quot;main();&quot;</span><span class="p">&gt;</span>loading...<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></figure><p>Two pieces are better than one? It seems that <a href="https://ai.google/research/pubs/pub45424">Google</a>, <a href="https://blog.digitalocean.com/taming-your-go-dependencies/">Digital Ocean</a> and <a href="https://gregoryszorc.com/blog/2014/09/09/on-monolithic-repositories/">Mozilla</a> don’t think so.</p><p>I disagree.</p><p>To illustrate my point I extracted the JavaScript function into a new standalone <a href="https://github.com/yegor256/colorizejs">jQuery plugin</a>. Here is what I did:</p><ul> <li>Created a new GitHub repo <a href="https://github.com/yegor256/colorizejs">yegor256/colorizejs</a>;</li> <li>Read the <a href="https://learn.jquery.com/plugins/basic-plugin-creation/">instructions</a>;</li> <li>Did some research of jQuery plugins, studied a few examples;</li> <li>Found out that most of them used <a href="https://gulpjs.com/">Gulp</a>, which I’ve never heard of;</li> <li>Decided to use <a href="https://www.npmjs.com/">npm</a> for JavaScript packaging (what else, right?);</li> <li>Created <a href="https://github.com/yegor256/colorizejs/blob/master/package.json"><code>package.json</code></a> for npm;</li> <li>Renamed GitHub repo to <code>colorizejs</code> when I found out that npm package <a href="https://www.npmjs.com/package/colorize"><code>colorize</code></a> already exists;</li> <li>Configured <a href="https://github.com/yegor256/colorizejs/blob/master/.travis.yml"><code>.travis.yml</code></a> for <a href="https://travis-ci.org/">Travis</a>;</li> <li>Created a <a href="https://github.com/yegor256/colorizejs/blob/master/README.md">README.md</a> and explained how to use it and install it;</li> <li>Decided to use the MIT license and created <a href="https://github.com/yegor256/colorizejs/blob/master/LICENSE.txt">LICENSE.txt</a>;</li> <li>Configured <a href="https://github.com/yegor256/colorizejs/blob/master/.pdd">PDD</a> for <a href="/2017/04/05/pdd-in-action.html">puzzles</a> automated collection;</li> <li>Configured <a href="https://github.com/yegor256/colorizejs/blob/master/.rultor.yml"><code>.rultor.yml</code></a> for <a href="/2014/07/24/rultor-automated-merging.html">Rultor</a>;</li> <li>Tried to create a unit test and failed miserably (after a full hour of research), since I’ve had almost no experience in JS unit testing;</li> <li>Posted a <a href="https://stackoverflow.com/questions/51809750/">question</a> to StackOverflow;</li> <li>The question was answered by a few people only after the bounty I offered;</li> <li><a href="https://github.com/brian-lives-outdoors">@brian-lives-outdoors</a>’s answer was the best and he even submitted a <a href="https://github.com/yegor256/colorizejs/pull/2">pull request</a> with a unit test, which I merged;</li> <li>Released the first version <a href="https://github.com/yegor256/colorizejs/tree/0.0.1">0.0.1</a> to <a href="https://www.npmjs.com/package/colorizejs">npmjs.com</a>;</li> <li>Modified the code to make it work both with classes and colors;</li> <li><a href="https://github.com/yegor256/colorizejs/issues/3">Implemented</a> and released the next version <a href="https://github.com/yegor256/colorizejs/tree/0.1.0">0.1.0</a>;</li> <li><a href="https://github.com/zold-io/zold.github.io/issues/81">Added it</a> to Zold front-end, tested it, and released it—check it out <a href="http://www.zold.io/health.html">here</a>.</li></ul><p>It took almost three weeks of waiting and four hours of work, just to move a small piece of JavaScript code to a new repository and release it separately. Was it worth it? Well, I think it was. But <del>many</del> most other blog post authors, who I managed to find, think that it would be better to keep everything in a single monolithic repo, mostly because it’s better for <em>productivity</em>. For example, <a href="https://danluu.com/monorepo/">Advantages of monorepos</a> by <a href="https://twitter.com/danluu">Dan Luu</a>, <a href="https://people.engr.ncsu.edu/ermurph3/papers/seip18.pdf">Advantages and Disadvantages of a Monolithic Repository</a> (a case study at Google) by Ciera Jaspan et al., and <a href="https://www.tomasvotruba.cz/blog/2017/01/31/how-monolithic-repository-in-open-source-saved-my-laziness/">How Monolithic Repository in Open Source saved my Laziness</a> by Tomas Votruba.</p><p>There are also a few good analyses of both approaches, for example <a href="https://www.dotconferences.com/2016/05/fabien-potencier-monolithic-repositories-vs-many-repositories">Monolithic repositories vs. Many repositories</a> speech by Fabien Potencier at dotScale 2016 and <a href="http://www.gigamonkeys.com/mono-vs-multi/">Repo Style Wars: Mono vs Multi</a> by Peter Seibel.</p><p>In a nutshell, they all claim that productivity is higher with a monolithic repo because the amount of operations one has to do in order to make a change is smaller. Indeed, in a monorepo there will be a single branch, a single set of commits, a single pull request, a single merge, deploy and release. Also it will be easier to test, both manually and via unit testing. Continuous integration is easier to configure, and so on and so forth.</p><aside class="quote">A set of smaller components is better than a larger solid piece.</aside><p>All these “reasonable” arguments remind me of what I hear when preaching object decomposition and suggesting that multiple objects are better than a single large one. Imagine a large class of 3,000 lines of code, which does many things and they are all very tightly coupled. It’s “easy” to test it, to make changes, to deploy, to review, etc. Because everything stays in one file, right? We don’t need to jump from class to class in order to understand the design. We just look at one screen, scroll it up and down, and that’s it. Right? Totally wrong!</p><p>I guess I don’t need to explain why it’s wrong. We don’t design our software that way anymore. We know that tight coupling is a bad idea. We know that a set of smaller components is better than a larger solid piece.</p><p>Why can’t we apply the same logic to repositories? I believe we can. Of course, just like in object-oriented programming, a fine-grained design requires more skills and time. Look at what I had to do with this small jQuery plugin. I’ve spent hours of coding and thinking. I even had to learn <a href="https://gulpjs.com/">Gulp</a> and <a href="https://jasmine.github.io/">Jasmine</a>, which I most probably will not use anymore. But the benefits we are getting from it are enormous. This is my short list of them:</p><ul> <li><p><strong>Encapsulation</strong>. Each repo encapsulates a single problem, hiding its details from everybody else. Thanks to that, the scope each repo has to deal with gets smaller. The smaller the scope, just like in OOP, the easier it is to maintain and modify. The easier to maintain, the cheaper the development. I guess Google guys don’t really worry about costs. On the contrary, they want their salaries to grow. A large unmaintainable monolithic repo is a perfect tool to make it happen.</p></li> <li><p><strong>Fast Builds</strong>. When a repo is small, the time its automated build takes is small. Look at the time Travis <a href="https://travis-ci.org/yegor256/colorizejs/builds/420726284">spends</a> for my jQuery plugin. It’s 51 seconds. It’s fast. We <a href="https://mortoray.com/2015/05/06/fast-build-turnaround-time-is-essential/">all know</a> that the faster the build, the better it is for productivity, since it’s easier to use the build as a tool for development.</p></li> <li><p><strong>Accurate Metrics</strong>. I don’t know whether you rely on metrics in your projects, but we at <a href="https://www.zerocracy.com">Zerocracy</a> do pay attention to numbers, like lines of code, <a href="/2014/11/14/hits-of-code.html">hits of code</a>, number of commits, classes, methods, cohesion, coupling, etc. It’s always a question whether the metrics are accurate. Calculating lines of code for a large repository doesn’t make any sense, since the number will include a lot of files from completely different parts of the application. Moreover there will be different languages and file formats. Say a repo has 200K lines of Java, 150K lines of XML, 50K lines of JavaScript, and 40K lines of Ruby. Can you say something specific about this repo? Is it large? Is it a Java repo? And, more importantly, can it be compared with other repositories? Not really. It’s just a big messy storage of files.</p></li></ul><aside class="quote">The preferred situation is one language or technology per repository.</aside><ul> <li><p><strong>Homogeneous Tasks</strong>. Smaller repositories tend to have smaller tech stacks, meaning that each of them uses just a few languages and frameworks, or (and this is the preferred situation)—one language or technology per repository. Thanks to this, the management of programmers becomes easier, since any ticket/problem can be assigned to anybody. It’s easier to make tasks similar in size and complexity. This obviously means better manageability of the project.</p></li> <li><p><strong>Single Coding Standard</strong>. It’s easier to standardize the coding style if the repo is small. When it’s large, various parts of the code base will have different styles and it will be almost impossible to put everybody on the same page. In other words, smaller repositories look more beautiful than larger ones.</p></li> <li><p><strong>Short Names</strong>. Each repository, inevitably, will have its own namespace. For example, in the JS repository I just created, I only have two files: <code>colorizejs.js</code> and <code>test-colorizejs.js</code>. I don’t really care about the naming inside them, since the namespace is very small. <del>I can even use global variables.</del> Shorter names and smaller namespaces mean better maintainability.</p></li> <li><p><strong>Simple Tests</strong>. The larger the code base, the more dependencies it has, which are difficult to mock and test. Very large code bases become fundamentally untestable since they require a lot of integration tests which are difficult to maintain. Smaller libraries, frameworks and modules are easier to keep at the level of simple and fast unit testing.</p></li></ul><p>Thus, I believe that the smaller the repositories and modules, the better. Ideally, I would say, the largest acceptable size for a code base is 50,000 lines of code. Everything that goes above this line is a perfect candidate for decomposition.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?23bb3130b4f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="&lt;p&gt;There are a number of levels you have to go through before your continuous integration pipeline becomes perfect. I found eight of them and presented my findings at DevOpsDays in Salt Lake City a few weeks ago (watch the &lt;a href=&quot;https://www.youtube.com/watch?v=3dJP_LtUGgg&quot;&gt;video&lt;/a&gt;). Now it’s time to write them down and ask you—Which level are you at? Post your answer below.&lt;/p&gt; &lt;!--more--&gt; &lt;figure class=&quot;jb_picture&quot;&gt;&lt;img itemprop=&quot;image&quot; alt=&quot;Twins (1988) by Ivan Reitman&quot; src=&quot;/images/2016/08/twins.jpg&quot; longdesc=&quot;#45e8e10e&quot; /&gt;&lt;figcaption id=&quot;45e8e10e&quot;&gt;Twins (1988) by Ivan Reitman&lt;/figcaption&gt;&lt;/figure&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Source Code&lt;/strong&gt;. Here you just write source code on your computers and maybe somewhere on the server. The best you can do here is to build it manually, say, every day. Is it continuous integration? Well, to some extent, provided you don’t forget to compile and package everything regularly.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Automated Build&lt;/strong&gt;. At this level, your build is automated, which means you can compile, test, and package the entire product with just one line at the command line. Pay attention; one line. You must be able to hit one button and either get an error or a successful build.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Git&lt;/strong&gt;. At this level, you keep your source code in Git. You can keep it in some other source control system, but that would be strange—Git is the &lt;em&gt;status quo&lt;/em&gt; at the moment. You should be able to get a new computer, with nothing in it, check out the source code from a Git repository, and run a full build.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Pull Requests&lt;/strong&gt;. Each and every change to your source code must be submitted through a pull request, which means that you host your repository on GitHub. You may host it somewhere else, but again, that would be strange because GitHub is the &lt;em&gt;status quo&lt;/em&gt; at the moment. Again, nobody should be able to commit anything directly to the &lt;a href=&quot;/2014/07/21/read-only-master-branch.html&quot;&gt;master branch&lt;/a&gt; except through forks and pull requests.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Code Reviews&lt;/strong&gt;. Every pull request must pass a mandatory &lt;a href=&quot;/2015/02/09/serious-code-reviewer.html&quot;&gt;code review&lt;/a&gt; before it gets merged. You must have some code review policy that explains who does reviews, what happens if the author doesn’t agree with the reviewer, etc. But no pull request may be merged unless it has been reviewed.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Tests&lt;/strong&gt;. At this level, your code is covered by unit tests (and integration tests), and every change comes with a new test. Your automated build runs all tests together and fails if any of them fail.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Static Analysis&lt;/strong&gt;. Checking the &lt;a href=&quot;/2014/08/13/strict-code-quality-control.html&quot;&gt;quality&lt;/a&gt; of your code without running it is what static analysis is about. At this level, the quality of your code is checked by the automated build. If the quality is lower than the threshold, the build fails.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Pre-Flight Builds&lt;/strong&gt;. This idea is explained &lt;a href=&quot;/2014/10/08/continuous-integration-is-dead.html&quot;&gt;here&lt;/a&gt;.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Production Simulation&lt;/strong&gt;. The build is run in a container, which simulates production environment and data.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Stress Tests&lt;/strong&gt;. Performance and stress tests are automated and executed on every build.&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;p&gt;By the way, at the &lt;a href=&quot;https://www.youtube.com/watch?v=3dJP_LtUGgg&quot;&gt;presentation&lt;/a&gt;, I also mentioned what problems you may encounter at each maturity level.&lt;/p&gt; " /> <meta name="keywords" content="next, path, output, content, previous, url, relative_path, id, collection, excerpt, draft, categories, layout, title, date, place, tags, description, keywords, image, jb_picture, slug, ext" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2016-08-01 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="8+2 Maturity Levels of Continuous Integration"/> <meta name="twitter:description" property="og:description" content="&lt;p&gt;There are a number of levels you have to go through before your continuous integration pipeline becomes perfect. I found eight of them and presented my findings at DevOpsDays in Salt Lake City a few weeks ago (watch the &lt;a href=&quot;https://www.youtube.com/watch?v=3dJP_LtUGgg&quot;&gt;video&lt;/a&gt;). Now it’s time to write them down and ask you—Which level are you at? Post your answer below.&lt;/p&gt; &lt;!--more--&gt; &lt;figure class=&quot;jb_picture&quot;&gt;&lt;img itemprop=&quot;image&quot; alt=&quot;Twins (1988) by Ivan Reitman&quot; src=&quot;/images/2016/08/twins.jpg&quot; longdesc=&quot;#45e8e10e&quot; /&gt;&lt;figcaption id=&quot;45e8e10e&quot;&gt;Twins (1988) by Ivan Reitman&lt;/figcaption&gt;&lt;/figure&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Source Code&lt;/strong&gt;. Here you just write source code on your computers and maybe somewhere on the server. The best you can do here is to build it manually, say, every day. Is it continuous integration? Well, to some extent, provided you don’t forget to compile and package everything regularly.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Automated Build&lt;/strong&gt;. At this level, your build is automated, which means you can compile, test, and package the entire product with just one line at the command line. Pay attention; one line. You must be able to hit one button and either get an error or a successful build.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Git&lt;/strong&gt;. At this level, you keep your source code in Git. You can keep it in some other source control system, but that would be strange—Git is the &lt;em&gt;status quo&lt;/em&gt; at the moment. You should be able to get a new computer, with nothing in it, check out the source code from a Git repository, and run a full build.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Pull Requests&lt;/strong&gt;. Each and every change to your source code must be submitted through a pull request, which means that you host your repository on GitHub. You may host it somewhere else, but again, that would be strange because GitHub is the &lt;em&gt;status quo&lt;/em&gt; at the moment. Again, nobody should be able to commit anything directly to the &lt;a href=&quot;/2014/07/21/read-only-master-branch.html&quot;&gt;master branch&lt;/a&gt; except through forks and pull requests.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Code Reviews&lt;/strong&gt;. Every pull request must pass a mandatory &lt;a href=&quot;/2015/02/09/serious-code-reviewer.html&quot;&gt;code review&lt;/a&gt; before it gets merged. You must have some code review policy that explains who does reviews, what happens if the author doesn’t agree with the reviewer, etc. But no pull request may be merged unless it has been reviewed.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Tests&lt;/strong&gt;. At this level, your code is covered by unit tests (and integration tests), and every change comes with a new test. Your automated build runs all tests together and fails if any of them fail.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Static Analysis&lt;/strong&gt;. Checking the &lt;a href=&quot;/2014/08/13/strict-code-quality-control.html&quot;&gt;quality&lt;/a&gt; of your code without running it is what static analysis is about. At this level, the quality of your code is checked by the automated build. If the quality is lower than the threshold, the build fails.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Pre-Flight Builds&lt;/strong&gt;. This idea is explained &lt;a href=&quot;/2014/10/08/continuous-integration-is-dead.html&quot;&gt;here&lt;/a&gt;.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Production Simulation&lt;/strong&gt;. The build is run in a container, which simulates production environment and data.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Stress Tests&lt;/strong&gt;. Performance and stress tests are automated and executed on every build.&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;p&gt;By the way, at the &lt;a href=&quot;https://www.youtube.com/watch?v=3dJP_LtUGgg&quot;&gt;presentation&lt;/a&gt;, I also mentioned what problems you may encounter at each maturity level.&lt;/p&gt; "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2016/08/01/continuous-integration-maturity.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?23bb3130b4f"/> <link rel="apple-touch-icon" href="/favicon.ico?23bb3130b4f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?23bb3130b4f"/> <link rel="stylesheet" href="/css/icons.css?23bb3130b4f"/> <link rel="canonical" href="https://www.yegor256.com/2016/08/01/continuous-integration-maturity.html" /> <link rel="amphtml" href="https://www.yegor256.com/2016/08/01/continuous-integration-maturity.amp.html" /> <title>8+2 Maturity Levels of Continuous Integration </title> <meta name='og:image' content='https://www.yegor256.com/images/2016/08/twins.jpg'/><meta name='twitter:image' content='https://www.yegor256.com/images/2016/08/twins.jpg'/><meta name='og:image:width' content='1330'/> <meta name='twitter:image:width' content='1330'/><meta name='og:image:height' content='748'/> <meta name='twitter:image:height' content='748'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='Twins (1988) by Ivan Reitman'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /2016/08/01/continuous-integration-maturity.html><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /2016/08/01/continuous-integration-maturity.html><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /2016/08/01/continuous-integration-maturity.html><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /2016/08/01/continuous-integration-maturity.html><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /2016/08/01/continuous-integration-maturity.html><a href="/books.html" title="The books I wrote">Books</a></li> <li /2016/08/01/continuous-integration-maturity.html><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /2016/08/01/continuous-integration-maturity.html><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /2016/08/01/continuous-integration-maturity.html class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /2016/08/01/continuous-integration-maturity.html><a href="/award.html" title="Software quality award">Award</a></li> <li /2016/08/01/continuous-integration-maturity.html><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /2016/08/01/continuous-integration-maturity.html><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /2016/08/01/continuous-integration-maturity.html><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2016/08/01/continuous-integration-maturity.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2016/08/01/continuous-integration-maturity.html</code></p><h1 itemprop="name headline mainEntityOfPage">8+2 Maturity Levels of Continuous Integration</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2016-08-01T00:00:00+00:00"> 1 August 2016 </time> </li> <li class="desktop-only" itemprop="locationCreated">Palo Alto, CA</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2016/08/01/continuous-integration-maturity.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>There are a number of levels you have to go through before your continuous integration pipeline becomes perfect. I found eight of them and presented my findings at DevOpsDays in Salt Lake City a few weeks ago (watch the <a href="https://www.youtube.com/watch?v=3dJP_LtUGgg">video</a>). Now it’s time to write them down and ask you—Which level are you at? Post your answer below.</p><figure class="jb_picture"><img itemprop="image" alt="Twins (1988) by Ivan Reitman" src="/images/2016/08/twins.jpg" longdesc="#45e8e10e" /><figcaption id="45e8e10e">Twins (1988) by Ivan Reitman</figcaption></figure> <ol> <li><p><strong>Source Code</strong>. Here you just write source code on your computers and maybe somewhere on the server. The best you can do here is to build it manually, say, every day. Is it continuous integration? Well, to some extent, provided you don’t forget to compile and package everything regularly.</p></li> <li><p><strong>Automated Build</strong>. At this level, your build is automated, which means you can compile, test, and package the entire product with just one line at the command line. Pay attention; one line. You must be able to hit one button and either get an error or a successful build.</p></li> <li><p><strong>Git</strong>. At this level, you keep your source code in Git. You can keep it in some other source control system, but that would be strange—Git is the <em>status quo</em> at the moment. You should be able to get a new computer, with nothing in it, check out the source code from a Git repository, and run a full build.</p></li> <li><p><strong>Pull Requests</strong>. Each and every change to your source code must be submitted through a pull request, which means that you host your repository on GitHub. You may host it somewhere else, but again, that would be strange because GitHub is the <em>status quo</em> at the moment. Again, nobody should be able to commit anything directly to the <a href="/2014/07/21/read-only-master-branch.html">master branch</a> except through forks and pull requests.</p></li> <li><p><strong>Code Reviews</strong>. Every pull request must pass a mandatory <a href="/2015/02/09/serious-code-reviewer.html">code review</a> before it gets merged. You must have some code review policy that explains who does reviews, what happens if the author doesn’t agree with the reviewer, etc. But no pull request may be merged unless it has been reviewed.</p></li> <li><p><strong>Tests</strong>. At this level, your code is covered by unit tests (and integration tests), and every change comes with a new test. Your automated build runs all tests together and fails if any of them fail.</p></li> <li><p><strong>Static Analysis</strong>. Checking the <a href="/2014/08/13/strict-code-quality-control.html">quality</a> of your code without running it is what static analysis is about. At this level, the quality of your code is checked by the automated build. If the quality is lower than the threshold, the build fails.</p></li> <li><p><strong>Pre-Flight Builds</strong>. This idea is explained <a href="/2014/10/08/continuous-integration-is-dead.html">here</a>.</p></li> <li><p><strong>Production Simulation</strong>. The build is run in a container, which simulates production environment and data.</p></li> <li><p><strong>Stress Tests</strong>. Performance and stress tests are automated and executed on every build.</p></li> </ol><p>By the way, at the <a href="https://www.youtube.com/watch?v=3dJP_LtUGgg">presentation</a>, I also mentioned what problems you may encounter at each maturity level.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2016/08/01/continuous-integration-maturity.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2016/08/01/continuous-integration-maturity.html&amp;text=8%2B2+Maturity+Levels+of+Continuous+Integration" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2016/08/01/continuous-integration-maturity.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2016/08/01/continuous-integration-maturity.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2016/08/01/continuous-integration-maturity.html%3F2016-31&amp;title=8%2B2+Maturity+Levels+of+Continuous+Integration" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2016/08/01/continuous-integration-maturity.html%3F2016-31&amp;t=8%2B2+Maturity+Levels+of+Continuous+Integration" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>There are a number of levels you have to go through before your continuous integration pipeline becomes perfect. I found eight of them and presented my findings at DevOpsDays in Salt Lake City a few weeks ago (watch the <a href="https://www.youtube.com/watch?v=3dJP_LtUGgg">video</a>). Now it’s time to write them down and ask you—Which level are you at? Post your answer below.</p><figure class="jb_picture"><img itemprop="image" alt="Twins (1988) by Ivan Reitman" src="/images/2016/08/twins.jpg" longdesc="#45e8e10e" /><figcaption id="45e8e10e">Twins (1988) by Ivan Reitman</figcaption></figure> <ol> <li><p><strong>Source Code</strong>. Here you just write source code on your computers and maybe somewhere on the server. The best you can do here is to build it manually, say, every day. Is it continuous integration? Well, to some extent, provided you don’t forget to compile and package everything regularly.</p></li> <li><p><strong>Automated Build</strong>. At this level, your build is automated, which means you can compile, test, and package the entire product with just one line at the command line. Pay attention; one line. You must be able to hit one button and either get an error or a successful build.</p></li> <li><p><strong>Git</strong>. At this level, you keep your source code in Git. You can keep it in some other source control system, but that would be strange—Git is the <em>status quo</em> at the moment. You should be able to get a new computer, with nothing in it, check out the source code from a Git repository, and run a full build.</p></li> <li><p><strong>Pull Requests</strong>. Each and every change to your source code must be submitted through a pull request, which means that you host your repository on GitHub. You may host it somewhere else, but again, that would be strange because GitHub is the <em>status quo</em> at the moment. Again, nobody should be able to commit anything directly to the <a href="/2014/07/21/read-only-master-branch.html">master branch</a> except through forks and pull requests.</p></li> <li><p><strong>Code Reviews</strong>. Every pull request must pass a mandatory <a href="/2015/02/09/serious-code-reviewer.html">code review</a> before it gets merged. You must have some code review policy that explains who does reviews, what happens if the author doesn’t agree with the reviewer, etc. But no pull request may be merged unless it has been reviewed.</p></li> <li><p><strong>Tests</strong>. At this level, your code is covered by unit tests (and integration tests), and every change comes with a new test. Your automated build runs all tests together and fails if any of them fail.</p></li> <li><p><strong>Static Analysis</strong>. Checking the <a href="/2014/08/13/strict-code-quality-control.html">quality</a> of your code without running it is what static analysis is about. At this level, the quality of your code is checked by the automated build. If the quality is lower than the threshold, the build fails.</p></li> <li><p><strong>Pre-Flight Builds</strong>. This idea is explained <a href="/2014/10/08/continuous-integration-is-dead.html">here</a>.</p></li> <li><p><strong>Production Simulation</strong>. The build is run in a container, which simulates production environment and data.</p></li> <li><p><strong>Stress Tests</strong>. Performance and stress tests are automated and executed on every build.</p></li> </ol><p>By the way, at the <a href="https://www.youtube.com/watch?v=3dJP_LtUGgg">presentation</a>, I also mentioned what problems you may encounter at each maturity level.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?23bb3130b4f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="&lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.appveyor.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/appveyor.png&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.appveyor.com&quot;&gt;AppVeyor&lt;/a&gt; is a great cloud &lt;a href=&quot;/2014/10/08/continuous-integration-is-dead.html&quot;&gt;continuous integration&lt;/a&gt; service that builds Windows projects. &lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor&lt;/a&gt; is a DevOps assistant, which automates release, merge and deploy operations, using Docker containers. These posts explain how Rultor works and what it’s for: &lt;a href=&quot;/2014/07/24/rultor-automated-merging.html&quot;&gt;Rultor.com, a Merging Bot&lt;/a&gt; and &lt;a href=&quot;/2014/07/21/read-only-master-branch.html&quot;&gt;Master Branch Must Be Read-Only&lt;/a&gt;.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/logo.svg&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;The problem is that Rultor is running all scripts inside Docker containers and Docker can’t build Windows projects. The only and the best logical solution is to trigger AppVeyor before running all other scripts in Docker. If AppVeyor gives a green light, we continue with our usual in-Docker script. Otherwise, we fail the entire build. Below I explain how this automation was configured in &lt;a href=&quot;http://www.takes.org&quot;&gt;Takes framework&lt;/a&gt;.&lt;/p&gt; &lt;!--more--&gt; &lt;p&gt;First, I got a token from my AppVeyor account (at the time of writing it was &lt;a href=&quot;https://ci.appveyor.com/api-token&quot;&gt;here&lt;/a&gt;). I created a text file &lt;code&gt;curl-appveyor.cfg&lt;/code&gt; with this content (it’s not my real token inside, just an example):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;--silent --header &amp;quot;Authorization: Bearer 1hdmsfbs7xccb9x6g1y4&amp;quot; --header &amp;quot;Content-Type: application/json&amp;quot; --header &amp;quot;Accept: application/json&amp;quot;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Then, I encrypted this file, using &lt;a href=&quot;https://github.com/yegor256/rultor-remote&quot;&gt;&lt;code&gt;rultor&lt;/code&gt;&lt;/a&gt; command line tool:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ rultor encrypt -p yegor256/takes curl-appveyor.cfg&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;The file I created was called &lt;a href=&quot;https://github.com/yegor256/takes/blob/master/curl-appveyor.cfg.asc&quot;&gt;&lt;code&gt;curl-appveyor.cfg.asc&lt;/code&gt;&lt;/a&gt;. I committed and pushed into &lt;a href=&quot;https://github.com/yegor256/takes&quot;&gt;yegor256/takes&lt;/a&gt; GitHub repository.&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ git add curl-appveyor.cfg.asc $ git commit -am &lt;span class=&quot;s1&quot;&gt;&amp;#39;CURL config for Appveyor&amp;#39;&lt;/span&gt; $ git push origin master&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Then, I configured AppVeyor “pinging” from Docker script. This is what I did in &lt;a href=&quot;https://github.com/yegor256/takes/blob/master/.rultor.yml&quot;&gt;&lt;code&gt;.rultor.yml&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;decrypt: curl-appveyor.cfg: &amp;quot;repo/curl-appveyor.cfg.asc&amp;quot; merge: script: |- ver=$(curl -K ../curl-appveyor.cfg \ --data &amp;quot;{accountName: &amp;#39;yegor256&amp;#39;, projectSlug: &amp;#39;takes&amp;#39;, pullRequestId: &amp;#39;${pull_id}&amp;#39;}&amp;quot; \ https://ci.appveyor.com/api/builds | jq -r &amp;#39;.version&amp;#39;) while true; do status=$(curl -K ../curl-appveyor.cfg \ https://ci.appveyor.com/api/projects/yegor256/takes/build/${ver} \ | jq -r &amp;#39;.build.status&amp;#39;) if [ &amp;quot;${status}&amp;quot; == &amp;quot;success&amp;quot; ]; then break; fi if [ &amp;quot;${status}&amp;quot; == &amp;quot;failed&amp;quot; ]; then echo &amp;quot;see https://ci.appveyor.com/project/yegor256/takes/build/${ver}&amp;quot; exit 1 fi echo &amp;quot;waiting for AppVeyor build ${ver}: ${status}&amp;quot; sleep 5s done mvn clean install&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;There is no magic here, it’s very simple. First, I start a new build using &lt;code&gt;/api/builds&lt;/code&gt; end-point of &lt;a href=&quot;http://www.appveyor.com/docs/api/projects-builds#start-build-of-pull-request-github-only&quot;&gt;AppVeyor REST API&lt;/a&gt;. &lt;code&gt;${pull_id}&lt;/code&gt; is an environment variable that is coming from Rultor, it contains an integer number of current pull request.&lt;/p&gt; &lt;p&gt;I’m using &lt;a href=&quot;http://stedolan.github.io/jq/&quot;&gt;jq&lt;/a&gt; in order to parse AppVeyor JSON output.&lt;/p&gt; &lt;p&gt;Once the build is started, I’m getting its unique &lt;code&gt;version&lt;/code&gt; and start looping to check its status. I’m waiting for &lt;code&gt;success&lt;/code&gt; or &lt;code&gt;failed&lt;/code&gt;. Anything else will mean that the build is still in progress and I should keep looping.&lt;/p&gt; &lt;p&gt;You can see how it works in this pull request, for example: &lt;a href=&quot;https://github.com/yegor256/takes/pull/93&quot;&gt;yegor256/takes#93&lt;/a&gt;.&lt;/p&gt; " /> <meta name="keywords" content="next, path, output, content, previous, url, relative_path, id, collection, excerpt, draft, categories, layout, title, date, tags, description, keywords, slug, ext" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-03-29 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="How AppVeyor Helps Me to Validate Pull Requests Before Rultor Merges Them"/> <meta name="twitter:description" property="og:description" content="&lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.appveyor.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/appveyor.png&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.appveyor.com&quot;&gt;AppVeyor&lt;/a&gt; is a great cloud &lt;a href=&quot;/2014/10/08/continuous-integration-is-dead.html&quot;&gt;continuous integration&lt;/a&gt; service that builds Windows projects. &lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor&lt;/a&gt; is a DevOps assistant, which automates release, merge and deploy operations, using Docker containers. These posts explain how Rultor works and what it’s for: &lt;a href=&quot;/2014/07/24/rultor-automated-merging.html&quot;&gt;Rultor.com, a Merging Bot&lt;/a&gt; and &lt;a href=&quot;/2014/07/21/read-only-master-branch.html&quot;&gt;Master Branch Must Be Read-Only&lt;/a&gt;.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/logo.svg&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;The problem is that Rultor is running all scripts inside Docker containers and Docker can’t build Windows projects. The only and the best logical solution is to trigger AppVeyor before running all other scripts in Docker. If AppVeyor gives a green light, we continue with our usual in-Docker script. Otherwise, we fail the entire build. Below I explain how this automation was configured in &lt;a href=&quot;http://www.takes.org&quot;&gt;Takes framework&lt;/a&gt;.&lt;/p&gt; &lt;!--more--&gt; &lt;p&gt;First, I got a token from my AppVeyor account (at the time of writing it was &lt;a href=&quot;https://ci.appveyor.com/api-token&quot;&gt;here&lt;/a&gt;). I created a text file &lt;code&gt;curl-appveyor.cfg&lt;/code&gt; with this content (it’s not my real token inside, just an example):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;--silent --header &amp;quot;Authorization: Bearer 1hdmsfbs7xccb9x6g1y4&amp;quot; --header &amp;quot;Content-Type: application/json&amp;quot; --header &amp;quot;Accept: application/json&amp;quot;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Then, I encrypted this file, using &lt;a href=&quot;https://github.com/yegor256/rultor-remote&quot;&gt;&lt;code&gt;rultor&lt;/code&gt;&lt;/a&gt; command line tool:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ rultor encrypt -p yegor256/takes curl-appveyor.cfg&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;The file I created was called &lt;a href=&quot;https://github.com/yegor256/takes/blob/master/curl-appveyor.cfg.asc&quot;&gt;&lt;code&gt;curl-appveyor.cfg.asc&lt;/code&gt;&lt;/a&gt;. I committed and pushed into &lt;a href=&quot;https://github.com/yegor256/takes&quot;&gt;yegor256/takes&lt;/a&gt; GitHub repository.&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ git add curl-appveyor.cfg.asc $ git commit -am &lt;span class=&quot;s1&quot;&gt;&amp;#39;CURL config for Appveyor&amp;#39;&lt;/span&gt; $ git push origin master&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Then, I configured AppVeyor “pinging” from Docker script. This is what I did in &lt;a href=&quot;https://github.com/yegor256/takes/blob/master/.rultor.yml&quot;&gt;&lt;code&gt;.rultor.yml&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;decrypt: curl-appveyor.cfg: &amp;quot;repo/curl-appveyor.cfg.asc&amp;quot; merge: script: |- ver=$(curl -K ../curl-appveyor.cfg \ --data &amp;quot;{accountName: &amp;#39;yegor256&amp;#39;, projectSlug: &amp;#39;takes&amp;#39;, pullRequestId: &amp;#39;${pull_id}&amp;#39;}&amp;quot; \ https://ci.appveyor.com/api/builds | jq -r &amp;#39;.version&amp;#39;) while true; do status=$(curl -K ../curl-appveyor.cfg \ https://ci.appveyor.com/api/projects/yegor256/takes/build/${ver} \ | jq -r &amp;#39;.build.status&amp;#39;) if [ &amp;quot;${status}&amp;quot; == &amp;quot;success&amp;quot; ]; then break; fi if [ &amp;quot;${status}&amp;quot; == &amp;quot;failed&amp;quot; ]; then echo &amp;quot;see https://ci.appveyor.com/project/yegor256/takes/build/${ver}&amp;quot; exit 1 fi echo &amp;quot;waiting for AppVeyor build ${ver}: ${status}&amp;quot; sleep 5s done mvn clean install&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;There is no magic here, it’s very simple. First, I start a new build using &lt;code&gt;/api/builds&lt;/code&gt; end-point of &lt;a href=&quot;http://www.appveyor.com/docs/api/projects-builds#start-build-of-pull-request-github-only&quot;&gt;AppVeyor REST API&lt;/a&gt;. &lt;code&gt;${pull_id}&lt;/code&gt; is an environment variable that is coming from Rultor, it contains an integer number of current pull request.&lt;/p&gt; &lt;p&gt;I’m using &lt;a href=&quot;http://stedolan.github.io/jq/&quot;&gt;jq&lt;/a&gt; in order to parse AppVeyor JSON output.&lt;/p&gt; &lt;p&gt;Once the build is started, I’m getting its unique &lt;code&gt;version&lt;/code&gt; and start looping to check its status. I’m waiting for &lt;code&gt;success&lt;/code&gt; or &lt;code&gt;failed&lt;/code&gt;. Anything else will mean that the build is still in progress and I should keep looping.&lt;/p&gt; &lt;p&gt;You can see how it works in this pull request, for example: &lt;a href=&quot;https://github.com/yegor256/takes/pull/93&quot;&gt;yegor256/takes#93&lt;/a&gt;.&lt;/p&gt; "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/03/29/rultor-with-appveyor.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?23bb3130b4f"/> <link rel="apple-touch-icon" href="/favicon.ico?23bb3130b4f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?23bb3130b4f"/> <link rel="stylesheet" href="/css/icons.css?23bb3130b4f"/> <link rel="canonical" href="https://www.yegor256.com/2015/03/29/rultor-with-appveyor.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/03/29/rultor-with-appveyor.amp.html" /> <title>How AppVeyor Helps Me to Validate Pull Requests Before Rultor Merges Them </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /2015/03/29/rultor-with-appveyor.html><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /2015/03/29/rultor-with-appveyor.html><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /2015/03/29/rultor-with-appveyor.html><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /2015/03/29/rultor-with-appveyor.html><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /2015/03/29/rultor-with-appveyor.html><a href="/books.html" title="The books I wrote">Books</a></li> <li /2015/03/29/rultor-with-appveyor.html><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /2015/03/29/rultor-with-appveyor.html><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /2015/03/29/rultor-with-appveyor.html class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /2015/03/29/rultor-with-appveyor.html><a href="/award.html" title="Software quality award">Award</a></li> <li /2015/03/29/rultor-with-appveyor.html><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /2015/03/29/rultor-with-appveyor.html><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /2015/03/29/rultor-with-appveyor.html><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/03/29/rultor-with-appveyor.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2015/03/29/rultor-with-appveyor.html</code></p><h1 itemprop="name headline mainEntityOfPage">How AppVeyor Helps Me to Validate Pull Requests Before Rultor Merges Them</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-03-29T00:00:00+00:00"> 29 March 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2015/03/29/rultor-with-appveyor.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><figure class="badge"><a href="http://www.appveyor.com"><img src="https://www.yegor256.com/images/2014/10/appveyor.png" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.appveyor.com">AppVeyor</a> is a great cloud <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> service that builds Windows projects. <a href="http://www.rultor.com">Rultor</a> is a DevOps assistant, which automates release, merge and deploy operations, using Docker containers. These posts explain how Rultor works and what it’s for: <a href="/2014/07/24/rultor-automated-merging.html">Rultor.com, a Merging Bot</a> and <a href="/2014/07/21/read-only-master-branch.html">Master Branch Must Be Read-Only</a>.</p><figure class="badge"><a href="http://www.rultor.com"><img src="http://doc.rultor.com/images/logo.svg" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p>The problem is that Rultor is running all scripts inside Docker containers and Docker can’t build Windows projects. The only and the best logical solution is to trigger AppVeyor before running all other scripts in Docker. If AppVeyor gives a green light, we continue with our usual in-Docker script. Otherwise, we fail the entire build. Below I explain how this automation was configured in <a href="http://www.takes.org">Takes framework</a>.</p><p>First, I got a token from my AppVeyor account (at the time of writing it was <a href="https://ci.appveyor.com/api-token">here</a>). I created a text file <code>curl-appveyor.cfg</code> with this content (it’s not my real token inside, just an example):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>--silent
--header &quot;Authorization: Bearer 1hdmsfbs7xccb9x6g1y4&quot;
--header &quot;Content-Type: application/json&quot;
--header &quot;Accept: application/json&quot;</code></pre></figure><p>Then, I encrypted this file, using <a href="https://github.com/yegor256/rultor-remote"><code>rultor</code></a> command line tool:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ rultor encrypt -p yegor256/takes curl-appveyor.cfg</code></pre></figure><p>The file I created was called <a href="https://github.com/yegor256/takes/blob/master/curl-appveyor.cfg.asc"><code>curl-appveyor.cfg.asc</code></a>. I committed and pushed into <a href="https://github.com/yegor256/takes">yegor256/takes</a> GitHub repository.</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ git add curl-appveyor.cfg.asc
$ git commit -am <span class="s1">&#39;CURL config for Appveyor&#39;</span>
$ git push origin master</code></pre></figure><p>Then, I configured AppVeyor “pinging” from Docker script. This is what I did in <a href="https://github.com/yegor256/takes/blob/master/.rultor.yml"><code>.rultor.yml</code></a>:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>decrypt:
  curl-appveyor.cfg: &quot;repo/curl-appveyor.cfg.asc&quot;
merge:
  script: |-
    ver=$(curl -K ../curl-appveyor.cfg \
      --data &quot;{accountName: &#39;yegor256&#39;,
        projectSlug: &#39;takes&#39;,
        pullRequestId: &#39;${pull_id}&#39;}&quot; \
      https://ci.appveyor.com/api/builds | jq -r &#39;.version&#39;)
    while true; do
      status=$(curl -K ../curl-appveyor.cfg \
        https://ci.appveyor.com/api/projects/yegor256/takes/build/${ver} \
        | jq -r &#39;.build.status&#39;)
      if [ &quot;${status}&quot; == &quot;success&quot; ]; then break; fi
      if [ &quot;${status}&quot; == &quot;failed&quot; ]; then
        echo &quot;see https://ci.appveyor.com/project/yegor256/takes/build/${ver}&quot;
        exit 1
      fi
      echo &quot;waiting for AppVeyor build ${ver}: ${status}&quot;
      sleep 5s
    done
    mvn clean install</code></pre></figure><p>There is no magic here, it’s very simple. First, I start a new build using <code>/api/builds</code> end-point of <a href="http://www.appveyor.com/docs/api/projects-builds#start-build-of-pull-request-github-only">AppVeyor REST API</a>. <code>${pull_id}</code> is an environment variable that is coming from Rultor, it contains an integer number of current pull request.</p><p>I’m using <a href="http://stedolan.github.io/jq/">jq</a> in order to parse AppVeyor JSON output.</p><p>Once the build is started, I’m getting its unique <code>version</code> and start looping to check its status. I’m waiting for <code>success</code> or <code>failed</code>. Anything else will mean that the build is still in progress and I should keep looping.</p><p>You can see how it works in this pull request, for example: <a href="https://github.com/yegor256/takes/pull/93">yegor256/takes#93</a>.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/03/29/rultor-with-appveyor.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/03/29/rultor-with-appveyor.html&amp;text=How+AppVeyor+Helps+Me+to+Validate+Pull+Requests+Before+Rultor+Merges+Them" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/03/29/rultor-with-appveyor.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/03/29/rultor-with-appveyor.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/03/29/rultor-with-appveyor.html%3F2015-13&amp;title=How+AppVeyor+Helps+Me+to+Validate+Pull+Requests+Before+Rultor+Merges+Them" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/03/29/rultor-with-appveyor.html%3F2015-13&amp;t=How+AppVeyor+Helps+Me+to+Validate+Pull+Requests+Before+Rultor+Merges+Them" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div > <figure class="badge"><a href="http://www.appveyor.com"><img src="https://www.yegor256.com/images/2014/10/appveyor.png" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.appveyor.com">AppVeyor</a> is a great cloud <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> service that builds Windows projects. <a href="http://www.rultor.com">Rultor</a> is a DevOps assistant, which automates release, merge and deploy operations, using Docker containers. These posts explain how Rultor works and what it’s for: <a href="/2014/07/24/rultor-automated-merging.html">Rultor.com, a Merging Bot</a> and <a href="/2014/07/21/read-only-master-branch.html">Master Branch Must Be Read-Only</a>.</p><figure class="badge"><a href="http://www.rultor.com"><img src="http://doc.rultor.com/images/logo.svg" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p>The problem is that Rultor is running all scripts inside Docker containers and Docker can’t build Windows projects. The only and the best logical solution is to trigger AppVeyor before running all other scripts in Docker. If AppVeyor gives a green light, we continue with our usual in-Docker script. Otherwise, we fail the entire build. Below I explain how this automation was configured in <a href="http://www.takes.org">Takes framework</a>.</p><p>First, I got a token from my AppVeyor account (at the time of writing it was <a href="https://ci.appveyor.com/api-token">here</a>). I created a text file <code>curl-appveyor.cfg</code> with this content (it’s not my real token inside, just an example):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>--silent
--header &quot;Authorization: Bearer 1hdmsfbs7xccb9x6g1y4&quot;
--header &quot;Content-Type: application/json&quot;
--header &quot;Accept: application/json&quot;</code></pre></figure><p>Then, I encrypted this file, using <a href="https://github.com/yegor256/rultor-remote"><code>rultor</code></a> command line tool:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ rultor encrypt -p yegor256/takes curl-appveyor.cfg</code></pre></figure><p>The file I created was called <a href="https://github.com/yegor256/takes/blob/master/curl-appveyor.cfg.asc"><code>curl-appveyor.cfg.asc</code></a>. I committed and pushed into <a href="https://github.com/yegor256/takes">yegor256/takes</a> GitHub repository.</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ git add curl-appveyor.cfg.asc
$ git commit -am <span class="s1">&#39;CURL config for Appveyor&#39;</span>
$ git push origin master</code></pre></figure><p>Then, I configured AppVeyor “pinging” from Docker script. This is what I did in <a href="https://github.com/yegor256/takes/blob/master/.rultor.yml"><code>.rultor.yml</code></a>:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>decrypt:
  curl-appveyor.cfg: &quot;repo/curl-appveyor.cfg.asc&quot;
merge:
  script: |-
    ver=$(curl -K ../curl-appveyor.cfg \
      --data &quot;{accountName: &#39;yegor256&#39;,
        projectSlug: &#39;takes&#39;,
        pullRequestId: &#39;${pull_id}&#39;}&quot; \
      https://ci.appveyor.com/api/builds | jq -r &#39;.version&#39;)
    while true; do
      status=$(curl -K ../curl-appveyor.cfg \
        https://ci.appveyor.com/api/projects/yegor256/takes/build/${ver} \
        | jq -r &#39;.build.status&#39;)
      if [ &quot;${status}&quot; == &quot;success&quot; ]; then break; fi
      if [ &quot;${status}&quot; == &quot;failed&quot; ]; then
        echo &quot;see https://ci.appveyor.com/project/yegor256/takes/build/${ver}&quot;
        exit 1
      fi
      echo &quot;waiting for AppVeyor build ${ver}: ${status}&quot;
      sleep 5s
    done
    mvn clean install</code></pre></figure><p>There is no magic here, it’s very simple. First, I start a new build using <code>/api/builds</code> end-point of <a href="http://www.appveyor.com/docs/api/projects-builds#start-build-of-pull-request-github-only">AppVeyor REST API</a>. <code>${pull_id}</code> is an environment variable that is coming from Rultor, it contains an integer number of current pull request.</p><p>I’m using <a href="http://stedolan.github.io/jq/">jq</a> in order to parse AppVeyor JSON output.</p><p>Once the build is started, I’m getting its unique <code>version</code> and start looping to check its status. I’m waiting for <code>success</code> or <code>failed</code>. Anything else will mean that the build is still in progress and I should keep looping.</p><p>You can see how it works in this pull request, for example: <a href="https://github.com/yegor256/takes/pull/93">yegor256/takes#93</a>.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?23bb3130b4f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="&lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.appveyor.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/appveyor.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;The purpose of Continuous Integration is to tell us, the developers, when the product we’re working on is not “packagable” any more. The sooner we get the signal, the better. Why? Because the damage will be younger if we find it sooner. The younger the damage, the easier it is to fix. There are many modern and high-quality &lt;a href=&quot;/2014/10/05/ten-hosted-continuous-integration-services.html&quot;&gt;hosted continuous integration services&lt;/a&gt;, but only one of them (to my knowledge) supports Windows as a build platform—&lt;a href=&quot;http://www.appveyor.com&quot;&gt;appveyor.com&lt;/a&gt;. My experience tells me that it’s a good practice to continuously integrate on different platforms at the same time, especially when developing an open source library. That’s why, in &lt;a href=&quot;https://www.zerocracy.com&quot;&gt;Zerocracy&lt;/a&gt; we’re using AppVeyor in combination with &lt;a href=&quot;http://www.travis-ci.org&quot;&gt;Travis&lt;/a&gt;.&lt;/p&gt; &lt;!--more--&gt; &lt;p&gt;This is how I managed to configure AppVeyor to build my Java Maven projects (this is &lt;code&gt;appveyor.yml&lt;/code&gt; configuration file you’re supposed to place in the root directory of your GitHub repository):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;version: &amp;#39;{build}&amp;#39; os: Windows Server 2012 install: - ps: | Add-Type -AssemblyName System.IO.Compression.FileSystem if (!(Test-Path -Path &amp;quot;C:\maven&amp;quot; )) { (new-object System.Net.WebClient).DownloadFile( &amp;#39;http://www.us.apache.org/dist/maven/maven-3/3.2.5/binaries/apache-maven-3.2.5-bin.zip&amp;#39;, &amp;#39;C:\maven-bin.zip&amp;#39; ) [System.IO.Compression.ZipFile]::ExtractToDirectory(&amp;quot;C:\maven-bin.zip&amp;quot;, &amp;quot;C:\maven&amp;quot;) } - cmd: SET PATH=C:\maven\apache-maven-3.2.5\bin;%JAVA_HOME%\bin;%PATH% - cmd: SET MAVEN_OPTS=-XX:MaxPermSize=2g -Xmx4g - cmd: SET JAVA_OPTS=-XX:MaxPermSize=2g -Xmx4g build_script: - mvn clean package --batch-mode -DskipTest test_script: - mvn clean install --batch-mode cache: - C:\maven\ - C:\Users\appveyor\.m2&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;It was not that easy at all, so I decided to share. You can see how this configuration works in these projects: &lt;a href=&quot;https://github.com/jcabi/jcabi-aspects&quot;&gt;jcabi-aspects&lt;/a&gt;, &lt;a href=&quot;https://github.com/jcabi/jcabi-email&quot;&gt;jcabi-email&lt;/a&gt;, &lt;a href=&quot;https://github.com/jcabi/jcabi-dynamo&quot;&gt;jcabi-dynamo&lt;/a&gt;, and &lt;a href=&quot;https://github.com/yegor256/rultor&quot;&gt;rultor&lt;/a&gt;.&lt;/p&gt; " /> <meta name="keywords" content="next, path, output, content, previous, url, relative_path, id, collection, excerpt, draft, categories, layout, title, date, tags, description, keywords, slug, ext" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-01-10 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Continuous Integration on Windows, with Appveyor and Maven"/> <meta name="twitter:description" property="og:description" content="&lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.appveyor.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/appveyor.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;The purpose of Continuous Integration is to tell us, the developers, when the product we’re working on is not “packagable” any more. The sooner we get the signal, the better. Why? Because the damage will be younger if we find it sooner. The younger the damage, the easier it is to fix. There are many modern and high-quality &lt;a href=&quot;/2014/10/05/ten-hosted-continuous-integration-services.html&quot;&gt;hosted continuous integration services&lt;/a&gt;, but only one of them (to my knowledge) supports Windows as a build platform—&lt;a href=&quot;http://www.appveyor.com&quot;&gt;appveyor.com&lt;/a&gt;. My experience tells me that it’s a good practice to continuously integrate on different platforms at the same time, especially when developing an open source library. That’s why, in &lt;a href=&quot;https://www.zerocracy.com&quot;&gt;Zerocracy&lt;/a&gt; we’re using AppVeyor in combination with &lt;a href=&quot;http://www.travis-ci.org&quot;&gt;Travis&lt;/a&gt;.&lt;/p&gt; &lt;!--more--&gt; &lt;p&gt;This is how I managed to configure AppVeyor to build my Java Maven projects (this is &lt;code&gt;appveyor.yml&lt;/code&gt; configuration file you’re supposed to place in the root directory of your GitHub repository):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;version: &amp;#39;{build}&amp;#39; os: Windows Server 2012 install: - ps: | Add-Type -AssemblyName System.IO.Compression.FileSystem if (!(Test-Path -Path &amp;quot;C:\maven&amp;quot; )) { (new-object System.Net.WebClient).DownloadFile( &amp;#39;http://www.us.apache.org/dist/maven/maven-3/3.2.5/binaries/apache-maven-3.2.5-bin.zip&amp;#39;, &amp;#39;C:\maven-bin.zip&amp;#39; ) [System.IO.Compression.ZipFile]::ExtractToDirectory(&amp;quot;C:\maven-bin.zip&amp;quot;, &amp;quot;C:\maven&amp;quot;) } - cmd: SET PATH=C:\maven\apache-maven-3.2.5\bin;%JAVA_HOME%\bin;%PATH% - cmd: SET MAVEN_OPTS=-XX:MaxPermSize=2g -Xmx4g - cmd: SET JAVA_OPTS=-XX:MaxPermSize=2g -Xmx4g build_script: - mvn clean package --batch-mode -DskipTest test_script: - mvn clean install --batch-mode cache: - C:\maven\ - C:\Users\appveyor\.m2&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;It was not that easy at all, so I decided to share. You can see how this configuration works in these projects: &lt;a href=&quot;https://github.com/jcabi/jcabi-aspects&quot;&gt;jcabi-aspects&lt;/a&gt;, &lt;a href=&quot;https://github.com/jcabi/jcabi-email&quot;&gt;jcabi-email&lt;/a&gt;, &lt;a href=&quot;https://github.com/jcabi/jcabi-dynamo&quot;&gt;jcabi-dynamo&lt;/a&gt;, and &lt;a href=&quot;https://github.com/yegor256/rultor&quot;&gt;rultor&lt;/a&gt;.&lt;/p&gt; "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/01/10/windows-appveyor-maven.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?23bb3130b4f"/> <link rel="apple-touch-icon" href="/favicon.ico?23bb3130b4f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?23bb3130b4f"/> <link rel="stylesheet" href="/css/icons.css?23bb3130b4f"/> <link rel="canonical" href="https://www.yegor256.com/2015/01/10/windows-appveyor-maven.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/01/10/windows-appveyor-maven.amp.html" /> <title>Continuous Integration on Windows, with Appveyor and Maven </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /2015/01/10/windows-appveyor-maven.html><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /2015/01/10/windows-appveyor-maven.html><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /2015/01/10/windows-appveyor-maven.html><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /2015/01/10/windows-appveyor-maven.html><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /2015/01/10/windows-appveyor-maven.html><a href="/books.html" title="The books I wrote">Books</a></li> <li /2015/01/10/windows-appveyor-maven.html><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /2015/01/10/windows-appveyor-maven.html><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /2015/01/10/windows-appveyor-maven.html class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /2015/01/10/windows-appveyor-maven.html><a href="/award.html" title="Software quality award">Award</a></li> <li /2015/01/10/windows-appveyor-maven.html><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /2015/01/10/windows-appveyor-maven.html><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /2015/01/10/windows-appveyor-maven.html><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/01/10/windows-appveyor-maven.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2015/01/10/windows-appveyor-maven.html</code></p><h1 itemprop="name headline mainEntityOfPage">Continuous Integration on Windows, with Appveyor and Maven</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-01-10T00:00:00+00:00"> 10 January 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2015/01/10/windows-appveyor-maven.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><figure class="badge"><a href="http://www.appveyor.com"><img src="https://www.yegor256.com/images/2014/10/appveyor.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p>The purpose of Continuous Integration is to tell us, the developers, when the product we’re working on is not “packagable” any more. The sooner we get the signal, the better. Why? Because the damage will be younger if we find it sooner. The younger the damage, the easier it is to fix. There are many modern and high-quality <a href="/2014/10/05/ten-hosted-continuous-integration-services.html">hosted continuous integration services</a>, but only one of them (to my knowledge) supports Windows as a build platform—<a href="http://www.appveyor.com">appveyor.com</a>. My experience tells me that it’s a good practice to continuously integrate on different platforms at the same time, especially when developing an open source library. That’s why, in <a href="https://www.zerocracy.com">Zerocracy</a> we’re using AppVeyor in combination with <a href="http://www.travis-ci.org">Travis</a>.</p><p>This is how I managed to configure AppVeyor to build my Java Maven projects (this is <code>appveyor.yml</code> configuration file you’re supposed to place in the root directory of your GitHub repository):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>version: &#39;{build}&#39;
os: Windows Server 2012
install:
  - ps: |
      Add-Type -AssemblyName System.IO.Compression.FileSystem
      if (!(Test-Path -Path &quot;C:\maven&quot; )) {
        (new-object System.Net.WebClient).DownloadFile(
          &#39;http://www.us.apache.org/dist/maven/maven-3/3.2.5/binaries/apache-maven-3.2.5-bin.zip&#39;,
          &#39;C:\maven-bin.zip&#39;
        )
        [System.IO.Compression.ZipFile]::ExtractToDirectory(&quot;C:\maven-bin.zip&quot;, &quot;C:\maven&quot;)
      }
  - cmd: SET PATH=C:\maven\apache-maven-3.2.5\bin;%JAVA_HOME%\bin;%PATH%
  - cmd: SET MAVEN_OPTS=-XX:MaxPermSize=2g -Xmx4g
  - cmd: SET JAVA_OPTS=-XX:MaxPermSize=2g -Xmx4g
build_script:
  - mvn clean package --batch-mode -DskipTest
test_script:
  - mvn clean install --batch-mode
cache:
  - C:\maven\
  - C:\Users\appveyor\.m2</code></pre></figure><p>It was not that easy at all, so I decided to share. You can see how this configuration works in these projects: <a href="https://github.com/jcabi/jcabi-aspects">jcabi-aspects</a>, <a href="https://github.com/jcabi/jcabi-email">jcabi-email</a>, <a href="https://github.com/jcabi/jcabi-dynamo">jcabi-dynamo</a>, and <a href="https://github.com/yegor256/rultor">rultor</a>.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/01/10/windows-appveyor-maven.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/01/10/windows-appveyor-maven.html&amp;text=Continuous+Integration+on+Windows%2C+with+Appveyor+and+Maven" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/01/10/windows-appveyor-maven.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/01/10/windows-appveyor-maven.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/01/10/windows-appveyor-maven.html%3F2015-01&amp;title=Continuous+Integration+on+Windows%2C+with+Appveyor+and+Maven" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/01/10/windows-appveyor-maven.html%3F2015-01&amp;t=Continuous+Integration+on+Windows%2C+with+Appveyor+and+Maven" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div > <figure class="badge"><a href="http://www.appveyor.com"><img src="https://www.yegor256.com/images/2014/10/appveyor.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p>The purpose of Continuous Integration is to tell us, the developers, when the product we’re working on is not “packagable” any more. The sooner we get the signal, the better. Why? Because the damage will be younger if we find it sooner. The younger the damage, the easier it is to fix. There are many modern and high-quality <a href="/2014/10/05/ten-hosted-continuous-integration-services.html">hosted continuous integration services</a>, but only one of them (to my knowledge) supports Windows as a build platform—<a href="http://www.appveyor.com">appveyor.com</a>. My experience tells me that it’s a good practice to continuously integrate on different platforms at the same time, especially when developing an open source library. That’s why, in <a href="https://www.zerocracy.com">Zerocracy</a> we’re using AppVeyor in combination with <a href="http://www.travis-ci.org">Travis</a>.</p><p>This is how I managed to configure AppVeyor to build my Java Maven projects (this is <code>appveyor.yml</code> configuration file you’re supposed to place in the root directory of your GitHub repository):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>version: &#39;{build}&#39;
os: Windows Server 2012
install:
  - ps: |
      Add-Type -AssemblyName System.IO.Compression.FileSystem
      if (!(Test-Path -Path &quot;C:\maven&quot; )) {
        (new-object System.Net.WebClient).DownloadFile(
          &#39;http://www.us.apache.org/dist/maven/maven-3/3.2.5/binaries/apache-maven-3.2.5-bin.zip&#39;,
          &#39;C:\maven-bin.zip&#39;
        )
        [System.IO.Compression.ZipFile]::ExtractToDirectory(&quot;C:\maven-bin.zip&quot;, &quot;C:\maven&quot;)
      }
  - cmd: SET PATH=C:\maven\apache-maven-3.2.5\bin;%JAVA_HOME%\bin;%PATH%
  - cmd: SET MAVEN_OPTS=-XX:MaxPermSize=2g -Xmx4g
  - cmd: SET JAVA_OPTS=-XX:MaxPermSize=2g -Xmx4g
build_script:
  - mvn clean package --batch-mode -DskipTest
test_script:
  - mvn clean install --batch-mode
cache:
  - C:\maven\
  - C:\Users\appveyor\.m2</code></pre></figure><p>It was not that easy at all, so I decided to share. You can see how this configuration works in these projects: <a href="https://github.com/jcabi/jcabi-aspects">jcabi-aspects</a>, <a href="https://github.com/jcabi/jcabi-email">jcabi-email</a>, <a href="https://github.com/jcabi/jcabi-dynamo">jcabi-dynamo</a>, and <a href="https://github.com/yegor256/rultor">rultor</a>.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?23bb3130b4f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="&lt;p&gt;A few days ago, my article &lt;a href=&quot;http://devops.com/blogs/continuous-integration-doesnt-work/&quot;&gt;Why Continuous Integration Doesn’t Work&lt;/a&gt; was published at &lt;a href=&quot;http://www.devops.com&quot;&gt;DevOps.com&lt;/a&gt;. Almost the same day I received a few strongly negative critiques on Twitter.&lt;/p&gt; &lt;p&gt;Here is my response to the un-asked question:&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;Why the hell shouldn’t continuous integration work, being such a brilliant and popular idea?&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;Even though I have some experience in this area, I won’t use it as an argument. I’ll try to rely only on logic instead.&lt;/p&gt; &lt;!--more--&gt; &lt;p&gt;BTW, my experience includes five years of using Apache Continuum, Hudson, CruiseControl, and Jenkins in over 50 open source and commercial projects. Besides that, a few years ago I created a hosted &lt;a href=&quot;/2016/08/01/continuous-integration-maturity.html&quot;&gt;continuous integration&lt;/a&gt; service called &lt;a href=&quot;http://www.fazend.com&quot;&gt;fazend.com&lt;/a&gt;, renamed to &lt;a href=&quot;http://www.rultor.com&quot;&gt;rultor.com&lt;/a&gt; in 2013. Currently, I’m also an active user of &lt;a href=&quot;http://www.travis-ci.org&quot;&gt;Travis&lt;/a&gt; and &lt;a href=&quot;http://www.appveyor.com&quot;&gt;AppVeyor&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;how-continuous-integration-should-work&quot;&gt;How Continuous Integration Should Work&lt;/h2&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=3IXk5yEJMIs&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/3IXk5yEJMIs/mqdefault.jpg&quot; alt=&quot;YouTube video #3IXk5yEJMIs&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Continuous Integration is Dead; 24 April 2015.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;The idea is simple and obvious. Every time you make a new commit to the &lt;code&gt;master&lt;/code&gt; branch (or &lt;code&gt;/trunk&lt;/code&gt; in Subversion), a continuous integration server (or service) attempts to build the entire product. “Build” means compile, unit test, integration test, quality analysis, &lt;a href=&quot;/2014/06/21/casperjs-with-maven.html&quot;&gt;etc.&lt;/a&gt;&lt;/p&gt; &lt;p&gt;The result is either “success” or “failure.” If it is a success, we say that “the build is clean.” If it is a failure, we say that “the build is broken.” The build usually gets broken because someone breaks it by committing new code that turns previously passing unit tests into failing ones.&lt;/p&gt; &lt;p&gt;This is the technical side of the problem. It always works. Well, it may have its problems, like hard-coded dependencies, lack of isolation between environments or parallel build collisions, but this article is not about those. If the application is well written and its unit tests are stable, continuous integration is easy. Technically.&lt;/p&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=gL4XwP-EBOg&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/gL4XwP-EBOg/mqdefault.jpg&quot; alt=&quot;YouTube video #gL4XwP-EBOg&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Continuous Integration May Have Negative Effects; 20 April 2016.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;Let’s see the organizational side.&lt;/p&gt; &lt;p&gt;Continuous integration is not only a server that builds, but a management/organizational process that should “work.” Being a process that works means exactly what Jez Humble said in &lt;a href=&quot;http://amzn.to/2c7sR4V&quot;&gt;Continuous Delivery: Reliable Software Releases through Build, Test, and Deployment Automation&lt;/a&gt;, on page 55:&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;Crucially, if the build fails, the development team stops whatever they are doing and fixes the problem immediately&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;This is what doesn’t work and can’t work.&lt;/p&gt; &lt;h2 id=&quot;who-needs-this&quot;&gt;Who Needs This?&lt;/h2&gt; &lt;p&gt;As we see, continuous integration is about setting the entire development team on pause and fixing the broken build. Let me reiterate. Once the build is broken, everybody should focus on fixing it and making a commit that returns the build to the stable state.&lt;/p&gt; &lt;p&gt;Now, my question is—who, in an actively working team, may need this?&lt;/p&gt; &lt;p&gt;A product owner, who is interested in launching new features to the market as soon as possible? Or maybe a &lt;a href=&quot;/2015/09/22/micromanagement.html&quot;&gt;project manager&lt;/a&gt;, who is responsible for the deadlines? Or maybe programmers, who hate to fix bugs made by someone else, especially under pressure?&lt;/p&gt; &lt;p&gt;Who likes this continuous integration and who needs it?&lt;/p&gt; &lt;p&gt;Nobody.&lt;/p&gt; &lt;h2 id=&quot;what-happens-in-reality&quot;&gt;What Happens In Reality?&lt;/h2&gt; &lt;p&gt;I can tell you. I’ve seen it multiple times. The scenario is always the same. We just start to ignore that continuous integration build status. Either the build is clean or it is broken, and we continue to do what we were doing before.&lt;/p&gt; &lt;p&gt;We don’t stop and fix it, as Jez Humble recommends.&lt;/p&gt; &lt;p&gt;Instead, we ignore the information that’s coming from the continuous integration server.&lt;/p&gt; &lt;p&gt;Eventually, maybe tomorrow or on Monday, we’ll try to find some spare time and will try to fix the build. Only because we don’t like that red button on the dashboard and want to turn it into a green one.&lt;/p&gt; &lt;h2 id=&quot;what-about-discipline&quot;&gt;What About Discipline?&lt;/h2&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=Ht0JI41kA4I&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/Ht0JI41kA4I/mqdefault.jpg&quot; alt=&quot;YouTube video #Ht0JI41kA4I&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Pre-flight Build Pitfalls; 10 May 2016.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;Yes, there is another side of this coin. We can try to enforce discipline in the team. We can make it a strict rule, that our build is always clean and whoever breaks it gets some sort of a &lt;a href=&quot;/2016/01/05/how-to-punish-employees.html&quot;&gt;punishment&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Try doing this and you will get a &lt;strong&gt;fear driven development&lt;/strong&gt;. Programmers will be afraid of committing anything to the repository because they will know that if they cause a build failure they will have to &lt;a href=&quot;http://programmers.stackexchange.com/questions/79041&quot;&gt;apologize&lt;/a&gt;, at least.&lt;/p&gt; &lt;p&gt;A strict discipline (which I’m a big fan of) in this case only makes the situation worse. The entire development process slows down and programmers keep their code to themselves for as long as possible, to avoid possibly broken builds. When it’s time to commit, their changes are so massive that merging becomes very difficult and sometimes impossible.&lt;/p&gt; &lt;p&gt;As a result you get a lot of throw-away code, written by someone but never committed to &lt;code&gt;master&lt;/code&gt;, because of that fear factor.&lt;/p&gt; &lt;h2 id=&quot;ok-what-is-the-solution&quot;&gt;OK, What Is The Solution?&lt;/h2&gt; &lt;p&gt;I wrote about it before; it is called &lt;a href=&quot;/2014/07/21/read-only-master-branch.html&quot;&gt;read-only master branch&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;It is simple—prohibit anyone from merging anything into &lt;code&gt;master&lt;/code&gt; and create a script that anyone can call. The script will merge, test, and commit. The script will not make any exceptions. If any branch breaks at even one unit test, the entire branch will be rejected.&lt;/p&gt; &lt;p&gt;In other words: raise the red flag &lt;strong&gt;before&lt;/strong&gt; the code gets into &lt;code&gt;master&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;This solves all problems.&lt;/p&gt; &lt;p&gt;First, the build is always clean. We simply can’t break it because nobody can commit unless his code keeps the build clean.&lt;/p&gt; &lt;p&gt;Second, there is no fear of breaking anything. Simply because you technically can’t do it. All you can do is get a negative response from a merging script. Then you fix your errors and tell the script to try again. Nobody sees these attempts, and you don’t need to apologize. Fear factor is gone.&lt;/p&gt; &lt;p&gt;BTW, try to use &lt;a href=&quot;http://www.rultor.com&quot;&gt;rultor.com&lt;/a&gt; to enforce this &lt;a href=&quot;/2014/07/21/read-only-master-branch.html&quot;&gt;read-only master branch&lt;/a&gt; principle in your project.&lt;/p&gt; " /> <meta name="keywords" content="next, path, output, content, previous, url, relative_path, id, collection, excerpt, draft, categories, layout, title, date, tags, description, keywords, social, slug, ext" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-10-08 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Continuous Integration is Dead"/> <meta name="twitter:description" property="og:description" content="&lt;p&gt;A few days ago, my article &lt;a href=&quot;http://devops.com/blogs/continuous-integration-doesnt-work/&quot;&gt;Why Continuous Integration Doesn’t Work&lt;/a&gt; was published at &lt;a href=&quot;http://www.devops.com&quot;&gt;DevOps.com&lt;/a&gt;. Almost the same day I received a few strongly negative critiques on Twitter.&lt;/p&gt; &lt;p&gt;Here is my response to the un-asked question:&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;Why the hell shouldn’t continuous integration work, being such a brilliant and popular idea?&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;Even though I have some experience in this area, I won’t use it as an argument. I’ll try to rely only on logic instead.&lt;/p&gt; &lt;!--more--&gt; &lt;p&gt;BTW, my experience includes five years of using Apache Continuum, Hudson, CruiseControl, and Jenkins in over 50 open source and commercial projects. Besides that, a few years ago I created a hosted &lt;a href=&quot;/2016/08/01/continuous-integration-maturity.html&quot;&gt;continuous integration&lt;/a&gt; service called &lt;a href=&quot;http://www.fazend.com&quot;&gt;fazend.com&lt;/a&gt;, renamed to &lt;a href=&quot;http://www.rultor.com&quot;&gt;rultor.com&lt;/a&gt; in 2013. Currently, I’m also an active user of &lt;a href=&quot;http://www.travis-ci.org&quot;&gt;Travis&lt;/a&gt; and &lt;a href=&quot;http://www.appveyor.com&quot;&gt;AppVeyor&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;how-continuous-integration-should-work&quot;&gt;How Continuous Integration Should Work&lt;/h2&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=3IXk5yEJMIs&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/3IXk5yEJMIs/mqdefault.jpg&quot; alt=&quot;YouTube video #3IXk5yEJMIs&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Continuous Integration is Dead; 24 April 2015.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;The idea is simple and obvious. Every time you make a new commit to the &lt;code&gt;master&lt;/code&gt; branch (or &lt;code&gt;/trunk&lt;/code&gt; in Subversion), a continuous integration server (or service) attempts to build the entire product. “Build” means compile, unit test, integration test, quality analysis, &lt;a href=&quot;/2014/06/21/casperjs-with-maven.html&quot;&gt;etc.&lt;/a&gt;&lt;/p&gt; &lt;p&gt;The result is either “success” or “failure.” If it is a success, we say that “the build is clean.” If it is a failure, we say that “the build is broken.” The build usually gets broken because someone breaks it by committing new code that turns previously passing unit tests into failing ones.&lt;/p&gt; &lt;p&gt;This is the technical side of the problem. It always works. Well, it may have its problems, like hard-coded dependencies, lack of isolation between environments or parallel build collisions, but this article is not about those. If the application is well written and its unit tests are stable, continuous integration is easy. Technically.&lt;/p&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=gL4XwP-EBOg&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/gL4XwP-EBOg/mqdefault.jpg&quot; alt=&quot;YouTube video #gL4XwP-EBOg&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Continuous Integration May Have Negative Effects; 20 April 2016.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;Let’s see the organizational side.&lt;/p&gt; &lt;p&gt;Continuous integration is not only a server that builds, but a management/organizational process that should “work.” Being a process that works means exactly what Jez Humble said in &lt;a href=&quot;http://amzn.to/2c7sR4V&quot;&gt;Continuous Delivery: Reliable Software Releases through Build, Test, and Deployment Automation&lt;/a&gt;, on page 55:&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;Crucially, if the build fails, the development team stops whatever they are doing and fixes the problem immediately&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;This is what doesn’t work and can’t work.&lt;/p&gt; &lt;h2 id=&quot;who-needs-this&quot;&gt;Who Needs This?&lt;/h2&gt; &lt;p&gt;As we see, continuous integration is about setting the entire development team on pause and fixing the broken build. Let me reiterate. Once the build is broken, everybody should focus on fixing it and making a commit that returns the build to the stable state.&lt;/p&gt; &lt;p&gt;Now, my question is—who, in an actively working team, may need this?&lt;/p&gt; &lt;p&gt;A product owner, who is interested in launching new features to the market as soon as possible? Or maybe a &lt;a href=&quot;/2015/09/22/micromanagement.html&quot;&gt;project manager&lt;/a&gt;, who is responsible for the deadlines? Or maybe programmers, who hate to fix bugs made by someone else, especially under pressure?&lt;/p&gt; &lt;p&gt;Who likes this continuous integration and who needs it?&lt;/p&gt; &lt;p&gt;Nobody.&lt;/p&gt; &lt;h2 id=&quot;what-happens-in-reality&quot;&gt;What Happens In Reality?&lt;/h2&gt; &lt;p&gt;I can tell you. I’ve seen it multiple times. The scenario is always the same. We just start to ignore that continuous integration build status. Either the build is clean or it is broken, and we continue to do what we were doing before.&lt;/p&gt; &lt;p&gt;We don’t stop and fix it, as Jez Humble recommends.&lt;/p&gt; &lt;p&gt;Instead, we ignore the information that’s coming from the continuous integration server.&lt;/p&gt; &lt;p&gt;Eventually, maybe tomorrow or on Monday, we’ll try to find some spare time and will try to fix the build. Only because we don’t like that red button on the dashboard and want to turn it into a green one.&lt;/p&gt; &lt;h2 id=&quot;what-about-discipline&quot;&gt;What About Discipline?&lt;/h2&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=Ht0JI41kA4I&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/Ht0JI41kA4I/mqdefault.jpg&quot; alt=&quot;YouTube video #Ht0JI41kA4I&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Pre-flight Build Pitfalls; 10 May 2016.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;Yes, there is another side of this coin. We can try to enforce discipline in the team. We can make it a strict rule, that our build is always clean and whoever breaks it gets some sort of a &lt;a href=&quot;/2016/01/05/how-to-punish-employees.html&quot;&gt;punishment&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Try doing this and you will get a &lt;strong&gt;fear driven development&lt;/strong&gt;. Programmers will be afraid of committing anything to the repository because they will know that if they cause a build failure they will have to &lt;a href=&quot;http://programmers.stackexchange.com/questions/79041&quot;&gt;apologize&lt;/a&gt;, at least.&lt;/p&gt; &lt;p&gt;A strict discipline (which I’m a big fan of) in this case only makes the situation worse. The entire development process slows down and programmers keep their code to themselves for as long as possible, to avoid possibly broken builds. When it’s time to commit, their changes are so massive that merging becomes very difficult and sometimes impossible.&lt;/p&gt; &lt;p&gt;As a result you get a lot of throw-away code, written by someone but never committed to &lt;code&gt;master&lt;/code&gt;, because of that fear factor.&lt;/p&gt; &lt;h2 id=&quot;ok-what-is-the-solution&quot;&gt;OK, What Is The Solution?&lt;/h2&gt; &lt;p&gt;I wrote about it before; it is called &lt;a href=&quot;/2014/07/21/read-only-master-branch.html&quot;&gt;read-only master branch&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;It is simple—prohibit anyone from merging anything into &lt;code&gt;master&lt;/code&gt; and create a script that anyone can call. The script will merge, test, and commit. The script will not make any exceptions. If any branch breaks at even one unit test, the entire branch will be rejected.&lt;/p&gt; &lt;p&gt;In other words: raise the red flag &lt;strong&gt;before&lt;/strong&gt; the code gets into &lt;code&gt;master&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;This solves all problems.&lt;/p&gt; &lt;p&gt;First, the build is always clean. We simply can’t break it because nobody can commit unless his code keeps the build clean.&lt;/p&gt; &lt;p&gt;Second, there is no fear of breaking anything. Simply because you technically can’t do it. All you can do is get a negative response from a merging script. Then you fix your errors and tell the script to try again. Nobody sees these attempts, and you don’t need to apologize. Fear factor is gone.&lt;/p&gt; &lt;p&gt;BTW, try to use &lt;a href=&quot;http://www.rultor.com&quot;&gt;rultor.com&lt;/a&gt; to enforce this &lt;a href=&quot;/2014/07/21/read-only-master-branch.html&quot;&gt;read-only master branch&lt;/a&gt; principle in your project.&lt;/p&gt; "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?23bb3130b4f"/> <link rel="apple-touch-icon" href="/favicon.ico?23bb3130b4f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?23bb3130b4f"/> <link rel="stylesheet" href="/css/icons.css?23bb3130b4f"/> <link rel="canonical" href="https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.amp.html" /> <title>Continuous Integration is Dead </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /2014/10/08/continuous-integration-is-dead.html><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /2014/10/08/continuous-integration-is-dead.html><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /2014/10/08/continuous-integration-is-dead.html><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /2014/10/08/continuous-integration-is-dead.html><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /2014/10/08/continuous-integration-is-dead.html><a href="/books.html" title="The books I wrote">Books</a></li> <li /2014/10/08/continuous-integration-is-dead.html><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /2014/10/08/continuous-integration-is-dead.html><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /2014/10/08/continuous-integration-is-dead.html class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /2014/10/08/continuous-integration-is-dead.html><a href="/award.html" title="Software quality award">Award</a></li> <li /2014/10/08/continuous-integration-is-dead.html><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /2014/10/08/continuous-integration-is-dead.html><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /2014/10/08/continuous-integration-is-dead.html><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html</code></p><h1 itemprop="name headline mainEntityOfPage">Continuous Integration is Dead</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-10-08T00:00:00+00:00"> 8 October 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><ul class="subline"> <li>Discussed at:</li> <li><a href="https://www.reddit.com/r/programming/comments/2j9vt0/continuous_integration_is_dead/">reddit</a></li></ul><p class="unprintable"><p>A few days ago, my article <a href="http://devops.com/blogs/continuous-integration-doesnt-work/">Why Continuous Integration Doesn’t Work</a> was published at <a href="http://www.devops.com">DevOps.com</a>. Almost the same day I received a few strongly negative critiques on Twitter.</p><p>Here is my response to the un-asked question:</p><blockquote><p>Why the hell shouldn’t continuous integration work, being such a brilliant and popular idea?</p></blockquote><p>Even though I have some experience in this area, I won’t use it as an argument. I’ll try to rely only on logic instead.</p><p>BTW, my experience includes five years of using Apache Continuum, Hudson, CruiseControl, and Jenkins in over 50 open source and commercial projects. Besides that, a few years ago I created a hosted <a href="/2016/08/01/continuous-integration-maturity.html">continuous integration</a> service called <a href="http://www.fazend.com">fazend.com</a>, renamed to <a href="http://www.rultor.com">rultor.com</a> in 2013. Currently, I’m also an active user of <a href="http://www.travis-ci.org">Travis</a> and <a href="http://www.appveyor.com">AppVeyor</a>.</p><h2 id="how-continuous-integration-should-work">How Continuous Integration Should Work</h2><aside class="youtube"> <a href="https://www.youtube.com/watch?v=3IXk5yEJMIs"><div class="box"> <img src="https://i.ytimg.com/vi/3IXk5yEJMIs/mqdefault.jpg" alt="YouTube video #3IXk5yEJMIs" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Continuous Integration is Dead; 24 April 2015.</div></aside><p>The idea is simple and obvious. Every time you make a new commit to the <code>master</code> branch (or <code>/trunk</code> in Subversion), a continuous integration server (or service) attempts to build the entire product. “Build” means compile, unit test, integration test, quality analysis, <a href="/2014/06/21/casperjs-with-maven.html">etc.</a></p><p>The result is either “success” or “failure.” If it is a success, we say that “the build is clean.” If it is a failure, we say that “the build is broken.” The build usually gets broken because someone breaks it by committing new code that turns previously passing unit tests into failing ones.</p><p>This is the technical side of the problem. It always works. Well, it may have its problems, like hard-coded dependencies, lack of isolation between environments or parallel build collisions, but this article is not about those. If the application is well written and its unit tests are stable, continuous integration is easy. Technically.</p><aside class="youtube"> <a href="https://www.youtube.com/watch?v=gL4XwP-EBOg"><div class="box"> <img src="https://i.ytimg.com/vi/gL4XwP-EBOg/mqdefault.jpg" alt="YouTube video #gL4XwP-EBOg" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Continuous Integration May Have Negative Effects; 20 April 2016.</div></aside><p>Let’s see the organizational side.</p><p>Continuous integration is not only a server that builds, but a management/organizational process that should “work.” Being a process that works means exactly what Jez Humble said in <a href="http://amzn.to/2c7sR4V">Continuous Delivery: Reliable Software Releases through Build, Test, and Deployment Automation</a>, on page 55:</p><blockquote><p>Crucially, if the build fails, the development team stops whatever they are doing and fixes the problem immediately</p></blockquote><p>This is what doesn’t work and can’t work.</p><h2 id="who-needs-this">Who Needs This?</h2><p>As we see, continuous integration is about setting the entire development team on pause and fixing the broken build. Let me reiterate. Once the build is broken, everybody should focus on fixing it and making a commit that returns the build to the stable state.</p><p>Now, my question is—who, in an actively working team, may need this?</p><p>A product owner, who is interested in launching new features to the market as soon as possible? Or maybe a <a href="/2015/09/22/micromanagement.html">project manager</a>, who is responsible for the deadlines? Or maybe programmers, who hate to fix bugs made by someone else, especially under pressure?</p><p>Who likes this continuous integration and who needs it?</p><p>Nobody.</p><h2 id="what-happens-in-reality">What Happens In Reality?</h2><p>I can tell you. I’ve seen it multiple times. The scenario is always the same. We just start to ignore that continuous integration build status. Either the build is clean or it is broken, and we continue to do what we were doing before.</p><p>We don’t stop and fix it, as Jez Humble recommends.</p><p>Instead, we ignore the information that’s coming from the continuous integration server.</p><p>Eventually, maybe tomorrow or on Monday, we’ll try to find some spare time and will try to fix the build. Only because we don’t like that red button on the dashboard and want to turn it into a green one.</p><h2 id="what-about-discipline">What About Discipline?</h2><aside class="youtube"> <a href="https://www.youtube.com/watch?v=Ht0JI41kA4I"><div class="box"> <img src="https://i.ytimg.com/vi/Ht0JI41kA4I/mqdefault.jpg" alt="YouTube video #Ht0JI41kA4I" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Pre-flight Build Pitfalls; 10 May 2016.</div></aside><p>Yes, there is another side of this coin. We can try to enforce discipline in the team. We can make it a strict rule, that our build is always clean and whoever breaks it gets some sort of a <a href="/2016/01/05/how-to-punish-employees.html">punishment</a>.</p><p>Try doing this and you will get a <strong>fear driven development</strong>. Programmers will be afraid of committing anything to the repository because they will know that if they cause a build failure they will have to <a href="http://programmers.stackexchange.com/questions/79041">apologize</a>, at least.</p><p>A strict discipline (which I’m a big fan of) in this case only makes the situation worse. The entire development process slows down and programmers keep their code to themselves for as long as possible, to avoid possibly broken builds. When it’s time to commit, their changes are so massive that merging becomes very difficult and sometimes impossible.</p><p>As a result you get a lot of throw-away code, written by someone but never committed to <code>master</code>, because of that fear factor.</p><h2 id="ok-what-is-the-solution">OK, What Is The Solution?</h2><p>I wrote about it before; it is called <a href="/2014/07/21/read-only-master-branch.html">read-only master branch</a>.</p><p>It is simple—prohibit anyone from merging anything into <code>master</code> and create a script that anyone can call. The script will merge, test, and commit. The script will not make any exceptions. If any branch breaks at even one unit test, the entire branch will be rejected.</p><p>In other words: raise the red flag <strong>before</strong> the code gets into <code>master</code>.</p><p>This solves all problems.</p><p>First, the build is always clean. We simply can’t break it because nobody can commit unless his code keeps the build clean.</p><p>Second, there is no fear of breaking anything. Simply because you technically can’t do it. All you can do is get a negative response from a merging script. Then you fix your errors and tell the script to try again. Nobody sees these attempts, and you don’t need to apologize. Fear factor is gone.</p><p>BTW, try to use <a href="http://www.rultor.com">rultor.com</a> to enforce this <a href="/2014/07/21/read-only-master-branch.html">read-only master branch</a> principle in your project.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html&amp;text=Continuous+Integration+is+Dead" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html%3F2014-40&amp;title=Continuous+Integration+is+Dead" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/10/08/continuous-integration-is-dead.html%3F2014-40&amp;t=Continuous+Integration+is+Dead" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>A few days ago, my article <a href="http://devops.com/blogs/continuous-integration-doesnt-work/">Why Continuous Integration Doesn’t Work</a> was published at <a href="http://www.devops.com">DevOps.com</a>. Almost the same day I received a few strongly negative critiques on Twitter.</p><p>Here is my response to the un-asked question:</p><blockquote><p>Why the hell shouldn’t continuous integration work, being such a brilliant and popular idea?</p></blockquote><p>Even though I have some experience in this area, I won’t use it as an argument. I’ll try to rely only on logic instead.</p><p>BTW, my experience includes five years of using Apache Continuum, Hudson, CruiseControl, and Jenkins in over 50 open source and commercial projects. Besides that, a few years ago I created a hosted <a href="/2016/08/01/continuous-integration-maturity.html">continuous integration</a> service called <a href="http://www.fazend.com">fazend.com</a>, renamed to <a href="http://www.rultor.com">rultor.com</a> in 2013. Currently, I’m also an active user of <a href="http://www.travis-ci.org">Travis</a> and <a href="http://www.appveyor.com">AppVeyor</a>.</p><h2 id="how-continuous-integration-should-work">How Continuous Integration Should Work</h2><aside class="youtube"> <a href="https://www.youtube.com/watch?v=3IXk5yEJMIs"><div class="box"> <img src="https://i.ytimg.com/vi/3IXk5yEJMIs/mqdefault.jpg" alt="YouTube video #3IXk5yEJMIs" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Continuous Integration is Dead; 24 April 2015.</div></aside><p>The idea is simple and obvious. Every time you make a new commit to the <code>master</code> branch (or <code>/trunk</code> in Subversion), a continuous integration server (or service) attempts to build the entire product. “Build” means compile, unit test, integration test, quality analysis, <a href="/2014/06/21/casperjs-with-maven.html">etc.</a></p><p>The result is either “success” or “failure.” If it is a success, we say that “the build is clean.” If it is a failure, we say that “the build is broken.” The build usually gets broken because someone breaks it by committing new code that turns previously passing unit tests into failing ones.</p><p>This is the technical side of the problem. It always works. Well, it may have its problems, like hard-coded dependencies, lack of isolation between environments or parallel build collisions, but this article is not about those. If the application is well written and its unit tests are stable, continuous integration is easy. Technically.</p><aside class="youtube"> <a href="https://www.youtube.com/watch?v=gL4XwP-EBOg"><div class="box"> <img src="https://i.ytimg.com/vi/gL4XwP-EBOg/mqdefault.jpg" alt="YouTube video #gL4XwP-EBOg" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Continuous Integration May Have Negative Effects; 20 April 2016.</div></aside><p>Let’s see the organizational side.</p><p>Continuous integration is not only a server that builds, but a management/organizational process that should “work.” Being a process that works means exactly what Jez Humble said in <a href="http://amzn.to/2c7sR4V">Continuous Delivery: Reliable Software Releases through Build, Test, and Deployment Automation</a>, on page 55:</p><blockquote><p>Crucially, if the build fails, the development team stops whatever they are doing and fixes the problem immediately</p></blockquote><p>This is what doesn’t work and can’t work.</p><h2 id="who-needs-this">Who Needs This?</h2><p>As we see, continuous integration is about setting the entire development team on pause and fixing the broken build. Let me reiterate. Once the build is broken, everybody should focus on fixing it and making a commit that returns the build to the stable state.</p><p>Now, my question is—who, in an actively working team, may need this?</p><p>A product owner, who is interested in launching new features to the market as soon as possible? Or maybe a <a href="/2015/09/22/micromanagement.html">project manager</a>, who is responsible for the deadlines? Or maybe programmers, who hate to fix bugs made by someone else, especially under pressure?</p><p>Who likes this continuous integration and who needs it?</p><p>Nobody.</p><h2 id="what-happens-in-reality">What Happens In Reality?</h2><p>I can tell you. I’ve seen it multiple times. The scenario is always the same. We just start to ignore that continuous integration build status. Either the build is clean or it is broken, and we continue to do what we were doing before.</p><p>We don’t stop and fix it, as Jez Humble recommends.</p><p>Instead, we ignore the information that’s coming from the continuous integration server.</p><p>Eventually, maybe tomorrow or on Monday, we’ll try to find some spare time and will try to fix the build. Only because we don’t like that red button on the dashboard and want to turn it into a green one.</p><h2 id="what-about-discipline">What About Discipline?</h2><aside class="youtube"> <a href="https://www.youtube.com/watch?v=Ht0JI41kA4I"><div class="box"> <img src="https://i.ytimg.com/vi/Ht0JI41kA4I/mqdefault.jpg" alt="YouTube video #Ht0JI41kA4I" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Pre-flight Build Pitfalls; 10 May 2016.</div></aside><p>Yes, there is another side of this coin. We can try to enforce discipline in the team. We can make it a strict rule, that our build is always clean and whoever breaks it gets some sort of a <a href="/2016/01/05/how-to-punish-employees.html">punishment</a>.</p><p>Try doing this and you will get a <strong>fear driven development</strong>. Programmers will be afraid of committing anything to the repository because they will know that if they cause a build failure they will have to <a href="http://programmers.stackexchange.com/questions/79041">apologize</a>, at least.</p><p>A strict discipline (which I’m a big fan of) in this case only makes the situation worse. The entire development process slows down and programmers keep their code to themselves for as long as possible, to avoid possibly broken builds. When it’s time to commit, their changes are so massive that merging becomes very difficult and sometimes impossible.</p><p>As a result you get a lot of throw-away code, written by someone but never committed to <code>master</code>, because of that fear factor.</p><h2 id="ok-what-is-the-solution">OK, What Is The Solution?</h2><p>I wrote about it before; it is called <a href="/2014/07/21/read-only-master-branch.html">read-only master branch</a>.</p><p>It is simple—prohibit anyone from merging anything into <code>master</code> and create a script that anyone can call. The script will merge, test, and commit. The script will not make any exceptions. If any branch breaks at even one unit test, the entire branch will be rejected.</p><p>In other words: raise the red flag <strong>before</strong> the code gets into <code>master</code>.</p><p>This solves all problems.</p><p>First, the build is always clean. We simply can’t break it because nobody can commit unless his code keeps the build clean.</p><p>Second, there is no fear of breaking anything. Simply because you technically can’t do it. All you can do is get a negative response from a merging script. Then you fix your errors and tell the script to try again. Nobody sees these attempts, and you don’t need to apologize. Fear factor is gone.</p><p>BTW, try to use <a href="http://www.rultor.com">rultor.com</a> to enforce this <a href="/2014/07/21/read-only-master-branch.html">read-only master branch</a> principle in your project.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?23bb3130b4f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="&lt;p&gt;Every project I’m working with starts with a setup of &lt;a href=&quot;/2016/08/01/continuous-integration-maturity.html&quot;&gt;continuous integration&lt;/a&gt; pipeline. I’m a big fan of cloud services, that’s why I was always using &lt;a href=&quot;http://www.travis-ci.org&quot;&gt;Travis&lt;/a&gt;. A few of my clients questioned this choice recently, mostly because of the price. So I decided to make a brief analysis of the market.&lt;/p&gt; &lt;p&gt;I configured &lt;a href=&quot;https://github.com/yegor256/rultor&quot;&gt;Rultor&lt;/a&gt;, an open source project, in every CI service I managed to find. All of them are free for open source projects. All of them are hosted and do not require any server installation Here they are, in order of my personal preference (first four are the best and highly recommended):&lt;/p&gt; &lt;table&gt; &lt;colgroup&gt; &lt;col class=&quot;x-col1&quot; /&gt; &lt;col class=&quot;x-col2&quot; /&gt; &lt;col class=&quot;x-colX&quot; /&gt; &lt;col class=&quot;x-colX&quot; /&gt; &lt;col class=&quot;x-colX&quot; /&gt; &lt;col class=&quot;x-colX&quot; /&gt; &lt;col class=&quot;x-colX&quot; /&gt; &lt;/colgroup&gt; &lt;thead&gt; &lt;tr class=&quot;x-head&quot;&gt; &lt;td&gt;&lt;!--name--&gt;&lt;/td&gt; &lt;td class=&quot;x-bottom x-right&quot;&gt;Minimum price&lt;/td&gt; &lt;td class=&quot;x-vertical&quot;&gt;&lt;div&gt;&lt;span&gt;Linux&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt; &lt;td class=&quot;x-vertical&quot;&gt;&lt;div&gt;&lt;span&gt;Windows&lt;sup&gt;2&lt;/sup&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt; &lt;td class=&quot;x-vertical&quot;&gt;&lt;div&gt;&lt;span&gt;MacOS&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt; &lt;td class=&quot;x-vertical&quot;&gt;&lt;div&gt;&lt;span&gt;Pull requests&lt;sup&gt;4&lt;/sup&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt; &lt;td class=&quot;x-vertical&quot;&gt;&lt;div&gt;&lt;span&gt;Log compress&lt;sup&gt;5&lt;/sup&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt; &lt;td class=&quot;x-vertical&quot;&gt;&lt;div&gt;&lt;span&gt;Docker&lt;sup&gt;6&lt;/sup&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt; &lt;td class=&quot;x-bottom&quot;&gt;Build&lt;/td&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://www.shippable.com&quot;&gt;Shippable&lt;/a&gt;&amp;#x263A;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;http://www.shippable.com/pricing.html&quot;&gt;free&lt;/a&gt; (!)&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td&gt;&lt;a href=&quot;https://app.shippable.com/projects/542e8fb980088cee586d3806/builds/latest&quot;&gt; &lt;img src=&quot;https://api.shippable.com/projects/542e8fb980088cee586d3806/badge?branchName=master&quot; class=&quot;x-build&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://www.travis-ci.org&quot;&gt;Travis&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;https://travis-ci.com/plans&quot;&gt;$69/mo&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td&gt;&lt;a href=&quot;https://travis-ci.org/yegor256/rultor&quot;&gt; &lt;img src=&quot;https://travis-ci.org/yegor256/rultor.svg?branch=master&quot; class=&quot;x-build&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://www.appveyor.com&quot;&gt;AppVeyor&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;http://www.appveyor.com/pricing&quot;&gt;$39/mo&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;?&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;---&lt;/td&gt; &lt;td&gt;&lt;a href=&quot;https://ci.appveyor.com/project/yegor256/rultor/branch/master&quot;&gt; &lt;img src=&quot;https://ci.appveyor.com/api/projects/status/sulqrjerl27qqtl7/branch/master?svg=true&quot; class=&quot;x-build&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://www.wercker.com&quot;&gt;Wercker&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;$350/mo&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td&gt;&lt;a href=&quot;https://app.wercker.com/project/bykey/0e6506c69e078b7692e50b240c034524&quot;&gt; &lt;img src=&quot;https://app.wercker.com/status/0e6506c69e078b7692e50b240c034524/s%20wercker status&quot; class=&quot;x-build&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td colspan=&quot;9&quot; class=&quot;x-hr&quot;&gt;&lt;/td&gt;&lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://www.semaphoreapp.com&quot;&gt;SemaphoreApp&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;https://semaphoreapp.com/pricing&quot;&gt;$29/mo&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://www.snap-ci.com&quot;&gt;Snap-CI&lt;/a&gt;&amp;#x263A;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;https://snap-ci.com/plans&quot;&gt;$30/mo&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;?&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;https://codeship.com&quot;&gt;Codeship&lt;/a&gt;&amp;#x263A;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;https://codeship.com/pricing&quot;&gt;$49/mo&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;?&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://www.circleci.com&quot;&gt;CircleCI&lt;/a&gt;&amp;#x263A;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;https://circleci.com/pricing&quot;&gt;$19/mo&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://ci.solanolabs.com&quot;&gt;SonoLabs&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;https://www.solanolabs.com/#pricing&quot;&gt;$15/mo&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;?&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://www.deploybot.com&quot;&gt;DeployBot&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;https://signup.deploybot.com/signup/new&quot;&gt;$15/mo&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;?&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;?&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://vexor.io&quot;&gt;Vexor&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;http://vexor.io/&quot;&gt;&amp;cent;90/hr&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;?&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;?&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://www.greenhouseci.com&quot;&gt;GreenHouseCI&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;https://greenhouseci.com/pricing.html&quot;&gt;$49/mo&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;?&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;?&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;!--more--&gt; &lt;p&gt;If you know any other good &lt;a href=&quot;/2014/10/08/continuous-integration-is-dead.html&quot;&gt;continuous integration&lt;/a&gt; services, &lt;a href=&quot;/about-me.html&quot;&gt;email me&lt;/a&gt;, I’ll review and add them to this list. BTW, here is a &lt;a href=&quot;https://en.wikipedia.org/wiki/Comparison_of_continuous_integration_software&quot;&gt;“full” list&lt;/a&gt; of continuous integration software and services.&lt;/p&gt; &lt;p&gt;By the way, a few platforms from this list contacted me and asked to review them again. Some even offered me money to put them higher in the list (kidding). Anyway, it’s up to you to decide whether it’s a good sign or not (I think it’s good, they care about their PR). I marked them in the list with ☺ emoji.&lt;/p&gt; &lt;h2 id=&quot;best-four&quot;&gt;Best Four&lt;/h2&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.shippable.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/shippable.svg&quot; style=&quot;width:92px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.shippable.com&quot;&gt;&lt;strong&gt;Shippable&lt;/strong&gt;&lt;/a&gt; was easy to configure since it understands &lt;code&gt;.travis.yml&lt;/code&gt; out of the box. The user interface is easy to navigate since it doesn’t have “settings” page at all (or I didn’t find it). Everything is configured via &lt;code&gt;shippable.yml&lt;/code&gt; file in the repository. The service looks stable and robust, no complains so far. What is especially cool about them is that they allow you to build in a Docker container.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.travis-ci.org&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/travis.png&quot; style=&quot;width:92px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.travis-ci.org&quot;&gt;&lt;strong&gt;Travis&lt;/strong&gt;&lt;/a&gt; is the best platform I’ve seen so far. Mostly because it is the most popular. Perfectly integrates with GitHub and has proper documentation. One important downside is the price of $129 per month. “With this money you can get a dedicated EC2 instance and install Jenkins there”—some of my &lt;a href=&quot;/2015/01/26/happy-boss-false-objective.html&quot;&gt;clients&lt;/a&gt; say. I strongly disagree, since Jenkins will require a 24x7 administration, which costs way more than $129, but it’s always difficult to explain.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.wercker.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/wercker.png&quot; style=&quot;width:92px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.wercker.com&quot;&gt;&lt;strong&gt;Wercker&lt;/strong&gt;&lt;/a&gt; is a European product from Amsterdam, which is still in beta and that’s why free for all projects. The platform looks very promising. It is still free for private repositories and is backed up by &lt;a href=&quot;https://gigaom.com/2014/10/01/wercker-takes-in-2-4-million-to-help-developers-test-their-code-in-the-cloud/&quot;&gt;investments&lt;/a&gt;. They also have an interesting concept of build “boxes,” which can be pre-configured similar to Docker containers. It works rather stable for the last few months, no complains so far.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.appveyor.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/appveyor.png&quot; style=&quot;width:92px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.appveyor.com&quot;&gt;&lt;strong&gt;AppVeyor&lt;/strong&gt;&lt;/a&gt; is the only one that runs Windows builds. Even though I’m working mostly with Java and Ruby, which are expected to be platform independent, they very often appear to be exactly the opposite. When your build succeeds on Linux, there is almost no guarantee it will pass on Windows or Mac. I’m planning to use AppVeyor in every project, in combination with some other CI service. Here is how I integrate &lt;a href=&quot;/2015/01/10/windows-appveyor-maven.html&quot;&gt;Maven builds&lt;/a&gt; with AppVeyor.&lt;/p&gt; &lt;h2 id=&quot;others&quot;&gt;Others&lt;/h2&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.semaphoreapp.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/semaphoreapp.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.semaphoreapp.com&quot;&gt;&lt;strong&gt;SemaphoreApp&lt;/strong&gt;&lt;/a&gt; is easy to configure and work with. It makes an impression of a light-weight system, which I generally appreciate. As a downside, they &lt;span class=&quot;strike&quot;&gt;don’t have any Maven pre-installed&lt;/span&gt; have an old version of Maven, but this was solved easily with a short custom script that downloads and unpacks the latest Maven. Another downside is that they are not configurable through a file (like &lt;code&gt;.travis.yml&lt;/code&gt;)—you should do everything through a UI. They also support &lt;a href=&quot;https://semaphoreapp.com/docs/caching-between-builds.html&quot;&gt;caching between builds&lt;/a&gt;.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.snap-ci.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/snap.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.snap-ci.com&quot;&gt;&lt;strong&gt;Snap-CI&lt;/strong&gt;&lt;/a&gt; is a product of ThoughtWorks, an author of &lt;a href=&quot;http://www.go.cd/&quot;&gt;Go&lt;/a&gt;, an open source continuous integration server. It looks a bit more complicated than others, giving you an ability to define “stages” and combine them into pipelines. I’m not sure yet how these mechanisms may help in small and medium size projects we’re mostly working with, but they look “cool.” There is also a very unfortunate limitation of 2Gb RAM per build—some of my Java projects fail because of that. Besides that, they don’t give full access to the build server, for example we can’t modify anything in &lt;code&gt;/etc&lt;/code&gt;—it is a show-stopper for us.&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://codeship.com&quot;&gt;&lt;strong&gt;Codeship&lt;/strong&gt;&lt;/a&gt; works fine, but their web UI looks a bit out-dated. Besides that, they promise to work with pull requests, but I didn’t manage to configure them. They simply don’t notify our pull requests in GitHub, even though they build them. Maybe I’ll find a way, so far it’s not clear.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.circleci.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/circleci.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.circleci.com&quot;&gt;&lt;strong&gt;CircleCI&lt;/strong&gt;&lt;/a&gt; I still don’t know why my build fails there. Really difficult to configure and understand what’s going on. Trying to figure it out…&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.solanolabs.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/solanolabs.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.solanolabs.com&quot;&gt;&lt;strong&gt;SolanoLabs&lt;/strong&gt;&lt;/a&gt; looks rather immature and difficult to configure. They don’t even support automatic GitHub hook configuration when new repository is added. However, their sales spams me rather aggressively :)&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.hosted-ci.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/hostedci.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.hosted-ci.com&quot;&gt;&lt;strong&gt;Hosted-CI&lt;/strong&gt;&lt;/a&gt; is for iOS/OSX only. They don’t give anything for free, even for open source projects. I didn’t have a chance to test them yet.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.cloudbees.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/cloudbees.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.cloudbees.com&quot;&gt;&lt;strong&gt;CloudBees&lt;/strong&gt;&lt;/a&gt; is basically a hosted Jenkins. I don’t really like Jenkins, that’s why can’t recommend this platform.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.deploybot.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/deploybot.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;https://deploybot.com/&quot;&gt;&lt;strong&gt;DeployBot&lt;/strong&gt;&lt;/a&gt; doesn’t even allow me to login via GitHub, huh? They seem to be more “deployment” oriented, not just continuous integration.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://vexor.io&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/vexor.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://vexor.io/&quot;&gt;&lt;strong&gt;Vexor&lt;/strong&gt;&lt;/a&gt; looks nice and offers a rather unique billing model—they charge per build, not per month. I would definitely recommend to give it a try. I couldn’t make it work though…&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.greenhouseci.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/greenhouseci.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://greenhouseci.com/&quot;&gt;&lt;strong&gt;GreenHouseCI&lt;/strong&gt;&lt;/a&gt; is a CI platform for mobile apps (iOS, Android, etc.) Seems to be interesting, I just don’t have a full scale mobile app to test it against.&lt;/p&gt; &lt;hr /&gt; &lt;p&gt;&lt;a href=&quot;https://about.gitlab.com/gitlab-ci/&quot;&gt;gitlab-ci&lt;/a&gt;: will review soon&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://scan.coverity.com&quot;&gt;coverity.com&lt;/a&gt;: will review it soon and add to the list.&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://buddy.works/&quot;&gt;buddy.works&lt;/a&gt;: will review soon.&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://aws.amazon.com/codebuild/&quot;&gt;AWS Code Build&lt;/a&gt; and &lt;a href=&quot;https://aws.amazon.com/codedeploy/&quot;&gt;AWS Code Deploy&lt;/a&gt;: will review soon.&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Ship.io&lt;/strong&gt; is dead (as of 20-Sep-2016).&lt;/p&gt; &lt;p&gt;&lt;strong&gt;ZeroCI.com&lt;/strong&gt; is dead (as of 28-Aug-2016).&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Drone.io&lt;/strong&gt; is not hosted any more, but is open source (as of 23-Jan-2017).&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Hosted-ci&lt;/strong&gt; doesn’t look alive (as of 16-Apr-2017).&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Magnum-CI.com&lt;/strong&gt; doesn’t look alive (as of 30-May-2017).&lt;/p&gt; &lt;hr /&gt; &lt;p&gt;BTW, if you don’t like the idea of keeping continuous integration in cloud, consider these on-premise software packages (in order or preference): &lt;a href=&quot;http://jenkins-ci.org/&quot;&gt;Jenkins&lt;/a&gt;, &lt;a href=&quot;http://www.jetbrains.com/teamcity/&quot;&gt;TeamCity&lt;/a&gt;, &lt;a href=&quot;http://www.thoughtworks.com/products/go-continuous-delivery&quot;&gt;Go&lt;/a&gt;, &lt;a href=&quot;https://github.com/Strider-CD/strider&quot;&gt;Strider&lt;/a&gt;, &lt;a href=&quot;http://buildbot.net/&quot;&gt;BuildBot&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Keep in mind that no matter how good and expensive your continuous integration service is, it &lt;a href=&quot;/2014/10/08/continuous-integration-is-dead.html&quot;&gt;won’t help you&lt;/a&gt; unless you make your &lt;a href=&quot;/2014/07/21/read-only-master-branch.html&quot;&gt;master branch read-only&lt;/a&gt;.&lt;/p&gt; &lt;hr /&gt; &lt;p&gt;&lt;sup&gt;1&lt;/sup&gt; This means that the platform can build your repo in Linux environment. Almost all of them do that by default, unless you configure them otherwise.&lt;br /&gt; &lt;sup&gt;2&lt;/sup&gt; Some of them can build on Windows platform.&lt;br /&gt; &lt;sup&gt;3&lt;/sup&gt; MacOS support means that an Objective-C/Swift product can be built there.&lt;br /&gt; &lt;sup&gt;4&lt;/sup&gt; I mean GitHub pull request support here. Some of them can be integrated with GitHub and will build pull requests before they are merged. Build status will be visible in GitHub. A pretty convenient feature.&lt;br /&gt; &lt;sup&gt;5&lt;/sup&gt; Logs compression is a critical feature, at least for me. Most of my logs are from Maven and without &lt;code&gt;col -b&lt;/code&gt; they look too long and unreadable.&lt;br /&gt; &lt;sup&gt;6&lt;/sup&gt; Looks like Docker containers must be supported by all of them, but unfortunately it’s not the case. Ideally, all builds should run in containers.&lt;/p&gt; " /> <meta name="keywords" content="next, path, output, content, previous, url, relative_path, id, collection, excerpt, draft, categories, layout, title, date, tags, description, keywords, style, slug, ext" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-10-05 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Best Hosted Continuous Integration Services for a Private Repository"/> <meta name="twitter:description" property="og:description" content="&lt;p&gt;Every project I’m working with starts with a setup of &lt;a href=&quot;/2016/08/01/continuous-integration-maturity.html&quot;&gt;continuous integration&lt;/a&gt; pipeline. I’m a big fan of cloud services, that’s why I was always using &lt;a href=&quot;http://www.travis-ci.org&quot;&gt;Travis&lt;/a&gt;. A few of my clients questioned this choice recently, mostly because of the price. So I decided to make a brief analysis of the market.&lt;/p&gt; &lt;p&gt;I configured &lt;a href=&quot;https://github.com/yegor256/rultor&quot;&gt;Rultor&lt;/a&gt;, an open source project, in every CI service I managed to find. All of them are free for open source projects. All of them are hosted and do not require any server installation Here they are, in order of my personal preference (first four are the best and highly recommended):&lt;/p&gt; &lt;table&gt; &lt;colgroup&gt; &lt;col class=&quot;x-col1&quot; /&gt; &lt;col class=&quot;x-col2&quot; /&gt; &lt;col class=&quot;x-colX&quot; /&gt; &lt;col class=&quot;x-colX&quot; /&gt; &lt;col class=&quot;x-colX&quot; /&gt; &lt;col class=&quot;x-colX&quot; /&gt; &lt;col class=&quot;x-colX&quot; /&gt; &lt;/colgroup&gt; &lt;thead&gt; &lt;tr class=&quot;x-head&quot;&gt; &lt;td&gt;&lt;!--name--&gt;&lt;/td&gt; &lt;td class=&quot;x-bottom x-right&quot;&gt;Minimum price&lt;/td&gt; &lt;td class=&quot;x-vertical&quot;&gt;&lt;div&gt;&lt;span&gt;Linux&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt; &lt;td class=&quot;x-vertical&quot;&gt;&lt;div&gt;&lt;span&gt;Windows&lt;sup&gt;2&lt;/sup&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt; &lt;td class=&quot;x-vertical&quot;&gt;&lt;div&gt;&lt;span&gt;MacOS&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt; &lt;td class=&quot;x-vertical&quot;&gt;&lt;div&gt;&lt;span&gt;Pull requests&lt;sup&gt;4&lt;/sup&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt; &lt;td class=&quot;x-vertical&quot;&gt;&lt;div&gt;&lt;span&gt;Log compress&lt;sup&gt;5&lt;/sup&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt; &lt;td class=&quot;x-vertical&quot;&gt;&lt;div&gt;&lt;span&gt;Docker&lt;sup&gt;6&lt;/sup&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt; &lt;td class=&quot;x-bottom&quot;&gt;Build&lt;/td&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://www.shippable.com&quot;&gt;Shippable&lt;/a&gt;&amp;#x263A;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;http://www.shippable.com/pricing.html&quot;&gt;free&lt;/a&gt; (!)&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td&gt;&lt;a href=&quot;https://app.shippable.com/projects/542e8fb980088cee586d3806/builds/latest&quot;&gt; &lt;img src=&quot;https://api.shippable.com/projects/542e8fb980088cee586d3806/badge?branchName=master&quot; class=&quot;x-build&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://www.travis-ci.org&quot;&gt;Travis&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;https://travis-ci.com/plans&quot;&gt;$69/mo&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td&gt;&lt;a href=&quot;https://travis-ci.org/yegor256/rultor&quot;&gt; &lt;img src=&quot;https://travis-ci.org/yegor256/rultor.svg?branch=master&quot; class=&quot;x-build&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://www.appveyor.com&quot;&gt;AppVeyor&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;http://www.appveyor.com/pricing&quot;&gt;$39/mo&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;?&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;---&lt;/td&gt; &lt;td&gt;&lt;a href=&quot;https://ci.appveyor.com/project/yegor256/rultor/branch/master&quot;&gt; &lt;img src=&quot;https://ci.appveyor.com/api/projects/status/sulqrjerl27qqtl7/branch/master?svg=true&quot; class=&quot;x-build&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://www.wercker.com&quot;&gt;Wercker&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;$350/mo&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td&gt;&lt;a href=&quot;https://app.wercker.com/project/bykey/0e6506c69e078b7692e50b240c034524&quot;&gt; &lt;img src=&quot;https://app.wercker.com/status/0e6506c69e078b7692e50b240c034524/s%20wercker status&quot; class=&quot;x-build&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td colspan=&quot;9&quot; class=&quot;x-hr&quot;&gt;&lt;/td&gt;&lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://www.semaphoreapp.com&quot;&gt;SemaphoreApp&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;https://semaphoreapp.com/pricing&quot;&gt;$29/mo&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://www.snap-ci.com&quot;&gt;Snap-CI&lt;/a&gt;&amp;#x263A;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;https://snap-ci.com/plans&quot;&gt;$30/mo&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;?&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;https://codeship.com&quot;&gt;Codeship&lt;/a&gt;&amp;#x263A;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;https://codeship.com/pricing&quot;&gt;$49/mo&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;?&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://www.circleci.com&quot;&gt;CircleCI&lt;/a&gt;&amp;#x263A;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;https://circleci.com/pricing&quot;&gt;$19/mo&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://ci.solanolabs.com&quot;&gt;SonoLabs&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;https://www.solanolabs.com/#pricing&quot;&gt;$15/mo&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;?&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://www.deploybot.com&quot;&gt;DeployBot&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;https://signup.deploybot.com/signup/new&quot;&gt;$15/mo&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;?&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;?&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://vexor.io&quot;&gt;Vexor&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;http://vexor.io/&quot;&gt;&amp;cent;90/hr&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;?&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;?&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;http://www.greenhouseci.com&quot;&gt;GreenHouseCI&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;x-right&quot;&gt;&lt;a href=&quot;https://greenhouseci.com/pricing.html&quot;&gt;$49/mo&lt;/a&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-yes green&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;?&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;?&lt;/td&gt; &lt;td class=&quot;center&quot;&gt;&lt;i class=&quot;icon-no red&quot;&gt;&lt;/i&gt;&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;!--more--&gt; &lt;p&gt;If you know any other good &lt;a href=&quot;/2014/10/08/continuous-integration-is-dead.html&quot;&gt;continuous integration&lt;/a&gt; services, &lt;a href=&quot;/about-me.html&quot;&gt;email me&lt;/a&gt;, I’ll review and add them to this list. BTW, here is a &lt;a href=&quot;https://en.wikipedia.org/wiki/Comparison_of_continuous_integration_software&quot;&gt;“full” list&lt;/a&gt; of continuous integration software and services.&lt;/p&gt; &lt;p&gt;By the way, a few platforms from this list contacted me and asked to review them again. Some even offered me money to put them higher in the list (kidding). Anyway, it’s up to you to decide whether it’s a good sign or not (I think it’s good, they care about their PR). I marked them in the list with ☺ emoji.&lt;/p&gt; &lt;h2 id=&quot;best-four&quot;&gt;Best Four&lt;/h2&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.shippable.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/shippable.svg&quot; style=&quot;width:92px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.shippable.com&quot;&gt;&lt;strong&gt;Shippable&lt;/strong&gt;&lt;/a&gt; was easy to configure since it understands &lt;code&gt;.travis.yml&lt;/code&gt; out of the box. The user interface is easy to navigate since it doesn’t have “settings” page at all (or I didn’t find it). Everything is configured via &lt;code&gt;shippable.yml&lt;/code&gt; file in the repository. The service looks stable and robust, no complains so far. What is especially cool about them is that they allow you to build in a Docker container.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.travis-ci.org&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/travis.png&quot; style=&quot;width:92px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.travis-ci.org&quot;&gt;&lt;strong&gt;Travis&lt;/strong&gt;&lt;/a&gt; is the best platform I’ve seen so far. Mostly because it is the most popular. Perfectly integrates with GitHub and has proper documentation. One important downside is the price of $129 per month. “With this money you can get a dedicated EC2 instance and install Jenkins there”—some of my &lt;a href=&quot;/2015/01/26/happy-boss-false-objective.html&quot;&gt;clients&lt;/a&gt; say. I strongly disagree, since Jenkins will require a 24x7 administration, which costs way more than $129, but it’s always difficult to explain.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.wercker.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/wercker.png&quot; style=&quot;width:92px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.wercker.com&quot;&gt;&lt;strong&gt;Wercker&lt;/strong&gt;&lt;/a&gt; is a European product from Amsterdam, which is still in beta and that’s why free for all projects. The platform looks very promising. It is still free for private repositories and is backed up by &lt;a href=&quot;https://gigaom.com/2014/10/01/wercker-takes-in-2-4-million-to-help-developers-test-their-code-in-the-cloud/&quot;&gt;investments&lt;/a&gt;. They also have an interesting concept of build “boxes,” which can be pre-configured similar to Docker containers. It works rather stable for the last few months, no complains so far.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.appveyor.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/appveyor.png&quot; style=&quot;width:92px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.appveyor.com&quot;&gt;&lt;strong&gt;AppVeyor&lt;/strong&gt;&lt;/a&gt; is the only one that runs Windows builds. Even though I’m working mostly with Java and Ruby, which are expected to be platform independent, they very often appear to be exactly the opposite. When your build succeeds on Linux, there is almost no guarantee it will pass on Windows or Mac. I’m planning to use AppVeyor in every project, in combination with some other CI service. Here is how I integrate &lt;a href=&quot;/2015/01/10/windows-appveyor-maven.html&quot;&gt;Maven builds&lt;/a&gt; with AppVeyor.&lt;/p&gt; &lt;h2 id=&quot;others&quot;&gt;Others&lt;/h2&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.semaphoreapp.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/semaphoreapp.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.semaphoreapp.com&quot;&gt;&lt;strong&gt;SemaphoreApp&lt;/strong&gt;&lt;/a&gt; is easy to configure and work with. It makes an impression of a light-weight system, which I generally appreciate. As a downside, they &lt;span class=&quot;strike&quot;&gt;don’t have any Maven pre-installed&lt;/span&gt; have an old version of Maven, but this was solved easily with a short custom script that downloads and unpacks the latest Maven. Another downside is that they are not configurable through a file (like &lt;code&gt;.travis.yml&lt;/code&gt;)—you should do everything through a UI. They also support &lt;a href=&quot;https://semaphoreapp.com/docs/caching-between-builds.html&quot;&gt;caching between builds&lt;/a&gt;.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.snap-ci.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/snap.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.snap-ci.com&quot;&gt;&lt;strong&gt;Snap-CI&lt;/strong&gt;&lt;/a&gt; is a product of ThoughtWorks, an author of &lt;a href=&quot;http://www.go.cd/&quot;&gt;Go&lt;/a&gt;, an open source continuous integration server. It looks a bit more complicated than others, giving you an ability to define “stages” and combine them into pipelines. I’m not sure yet how these mechanisms may help in small and medium size projects we’re mostly working with, but they look “cool.” There is also a very unfortunate limitation of 2Gb RAM per build—some of my Java projects fail because of that. Besides that, they don’t give full access to the build server, for example we can’t modify anything in &lt;code&gt;/etc&lt;/code&gt;—it is a show-stopper for us.&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://codeship.com&quot;&gt;&lt;strong&gt;Codeship&lt;/strong&gt;&lt;/a&gt; works fine, but their web UI looks a bit out-dated. Besides that, they promise to work with pull requests, but I didn’t manage to configure them. They simply don’t notify our pull requests in GitHub, even though they build them. Maybe I’ll find a way, so far it’s not clear.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.circleci.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/circleci.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.circleci.com&quot;&gt;&lt;strong&gt;CircleCI&lt;/strong&gt;&lt;/a&gt; I still don’t know why my build fails there. Really difficult to configure and understand what’s going on. Trying to figure it out…&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.solanolabs.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/solanolabs.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.solanolabs.com&quot;&gt;&lt;strong&gt;SolanoLabs&lt;/strong&gt;&lt;/a&gt; looks rather immature and difficult to configure. They don’t even support automatic GitHub hook configuration when new repository is added. However, their sales spams me rather aggressively :)&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.hosted-ci.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/hostedci.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.hosted-ci.com&quot;&gt;&lt;strong&gt;Hosted-CI&lt;/strong&gt;&lt;/a&gt; is for iOS/OSX only. They don’t give anything for free, even for open source projects. I didn’t have a chance to test them yet.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.cloudbees.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/cloudbees.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.cloudbees.com&quot;&gt;&lt;strong&gt;CloudBees&lt;/strong&gt;&lt;/a&gt; is basically a hosted Jenkins. I don’t really like Jenkins, that’s why can’t recommend this platform.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.deploybot.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/deploybot.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;https://deploybot.com/&quot;&gt;&lt;strong&gt;DeployBot&lt;/strong&gt;&lt;/a&gt; doesn’t even allow me to login via GitHub, huh? They seem to be more “deployment” oriented, not just continuous integration.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://vexor.io&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/vexor.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://vexor.io/&quot;&gt;&lt;strong&gt;Vexor&lt;/strong&gt;&lt;/a&gt; looks nice and offers a rather unique billing model—they charge per build, not per month. I would definitely recommend to give it a try. I couldn’t make it work though…&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.greenhouseci.com&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/10/greenhouseci.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://greenhouseci.com/&quot;&gt;&lt;strong&gt;GreenHouseCI&lt;/strong&gt;&lt;/a&gt; is a CI platform for mobile apps (iOS, Android, etc.) Seems to be interesting, I just don’t have a full scale mobile app to test it against.&lt;/p&gt; &lt;hr /&gt; &lt;p&gt;&lt;a href=&quot;https://about.gitlab.com/gitlab-ci/&quot;&gt;gitlab-ci&lt;/a&gt;: will review soon&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://scan.coverity.com&quot;&gt;coverity.com&lt;/a&gt;: will review it soon and add to the list.&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://buddy.works/&quot;&gt;buddy.works&lt;/a&gt;: will review soon.&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;https://aws.amazon.com/codebuild/&quot;&gt;AWS Code Build&lt;/a&gt; and &lt;a href=&quot;https://aws.amazon.com/codedeploy/&quot;&gt;AWS Code Deploy&lt;/a&gt;: will review soon.&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Ship.io&lt;/strong&gt; is dead (as of 20-Sep-2016).&lt;/p&gt; &lt;p&gt;&lt;strong&gt;ZeroCI.com&lt;/strong&gt; is dead (as of 28-Aug-2016).&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Drone.io&lt;/strong&gt; is not hosted any more, but is open source (as of 23-Jan-2017).&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Hosted-ci&lt;/strong&gt; doesn’t look alive (as of 16-Apr-2017).&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Magnum-CI.com&lt;/strong&gt; doesn’t look alive (as of 30-May-2017).&lt;/p&gt; &lt;hr /&gt; &lt;p&gt;BTW, if you don’t like the idea of keeping continuous integration in cloud, consider these on-premise software packages (in order or preference): &lt;a href=&quot;http://jenkins-ci.org/&quot;&gt;Jenkins&lt;/a&gt;, &lt;a href=&quot;http://www.jetbrains.com/teamcity/&quot;&gt;TeamCity&lt;/a&gt;, &lt;a href=&quot;http://www.thoughtworks.com/products/go-continuous-delivery&quot;&gt;Go&lt;/a&gt;, &lt;a href=&quot;https://github.com/Strider-CD/strider&quot;&gt;Strider&lt;/a&gt;, &lt;a href=&quot;http://buildbot.net/&quot;&gt;BuildBot&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Keep in mind that no matter how good and expensive your continuous integration service is, it &lt;a href=&quot;/2014/10/08/continuous-integration-is-dead.html&quot;&gt;won’t help you&lt;/a&gt; unless you make your &lt;a href=&quot;/2014/07/21/read-only-master-branch.html&quot;&gt;master branch read-only&lt;/a&gt;.&lt;/p&gt; &lt;hr /&gt; &lt;p&gt;&lt;sup&gt;1&lt;/sup&gt; This means that the platform can build your repo in Linux environment. Almost all of them do that by default, unless you configure them otherwise.&lt;br /&gt; &lt;sup&gt;2&lt;/sup&gt; Some of them can build on Windows platform.&lt;br /&gt; &lt;sup&gt;3&lt;/sup&gt; MacOS support means that an Objective-C/Swift product can be built there.&lt;br /&gt; &lt;sup&gt;4&lt;/sup&gt; I mean GitHub pull request support here. Some of them can be integrated with GitHub and will build pull requests before they are merged. Build status will be visible in GitHub. A pretty convenient feature.&lt;br /&gt; &lt;sup&gt;5&lt;/sup&gt; Logs compression is a critical feature, at least for me. Most of my logs are from Maven and without &lt;code&gt;col -b&lt;/code&gt; they look too long and unreadable.&lt;br /&gt; &lt;sup&gt;6&lt;/sup&gt; Looks like Docker containers must be supported by all of them, but unfortunately it’s not the case. Ideally, all builds should run in containers.&lt;/p&gt; "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?23bb3130b4f"/> <link rel="apple-touch-icon" href="/favicon.ico?23bb3130b4f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?23bb3130b4f"/> <link rel="stylesheet" href="/css/icons.css?23bb3130b4f"/> <link rel="canonical" href="https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.amp.html" /> <title>Best Hosted Continuous Integration Services for a Private Repository </title> <style> .x-col1 { width: 6em; } .x-col2 { width: 4em; } .x-colX { width: 2em; } .x-head { height: 6em; } .x-hr { border-top: 1px solid gray; } .x-right { text-align: right; } .x-bottom { vertical-align: bottom; } .x-vertical { vertical-align: bottom; white-space: nowrap; } .x-vertical div { text-align: left; transform: translate(0, -.5em) rotate(270deg); width: 2em; } .x-build { height: 18px; } </style> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /2014/10/05/ten-hosted-continuous-integration-services.html><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /2014/10/05/ten-hosted-continuous-integration-services.html><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /2014/10/05/ten-hosted-continuous-integration-services.html><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /2014/10/05/ten-hosted-continuous-integration-services.html><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /2014/10/05/ten-hosted-continuous-integration-services.html><a href="/books.html" title="The books I wrote">Books</a></li> <li /2014/10/05/ten-hosted-continuous-integration-services.html><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /2014/10/05/ten-hosted-continuous-integration-services.html><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /2014/10/05/ten-hosted-continuous-integration-services.html class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /2014/10/05/ten-hosted-continuous-integration-services.html><a href="/award.html" title="Software quality award">Award</a></li> <li /2014/10/05/ten-hosted-continuous-integration-services.html><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /2014/10/05/ten-hosted-continuous-integration-services.html><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /2014/10/05/ten-hosted-continuous-integration-services.html><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html</code></p><h1 itemprop="name headline mainEntityOfPage">Best Hosted Continuous Integration Services for a Private Repository</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-10-05T00:00:00+00:00"> 5 October 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>Every project I’m working with starts with a setup of <a href="/2016/08/01/continuous-integration-maturity.html">continuous integration</a> pipeline. I’m a big fan of cloud services, that’s why I was always using <a href="http://www.travis-ci.org">Travis</a>. A few of my clients questioned this choice recently, mostly because of the price. So I decided to make a brief analysis of the market.</p><p>I configured <a href="https://github.com/yegor256/rultor">Rultor</a>, an open source project, in every CI service I managed to find. All of them are free for open source projects. All of them are hosted and do not require any server installation Here they are, in order of my personal preference (first four are the best and highly recommended):</p><table> <colgroup> <col class="x-col1" /> <col class="x-col2" /> <col class="x-colX" /> <col class="x-colX" /> <col class="x-colX" /> <col class="x-colX" /> <col class="x-colX" /> </colgroup> <thead> <tr class="x-head"><td></td><td class="x-bottom x-right">Minimum price</td><td class="x-vertical"><div><span>Linux<sup>1</sup></span></div></td><td class="x-vertical"><div><span>Windows<sup>2</sup></span></div></td><td class="x-vertical"><div><span>MacOS<sup>3</sup></span></div></td><td class="x-vertical"><div><span>Pull requests<sup>4</sup></span></div></td><td class="x-vertical"><div><span>Log compress<sup>5</sup></span></div></td><td class="x-vertical"><div><span>Docker<sup>6</sup></span></div></td><td class="x-bottom">Build</td></tr> </thead> <tbody> <tr><td><a href="http://www.shippable.com">Shippable</a>&#x263A;</td><td class="x-right"><a href="http://www.shippable.com/pricing.html">free</a> (!)</td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td><a href="https://app.shippable.com/projects/542e8fb980088cee586d3806/builds/latest"> <img src="https://api.shippable.com/projects/542e8fb980088cee586d3806/badge?branchName=master" class="x-build" alt="badge" /></a></td></tr> <tr><td><a href="http://www.travis-ci.org">Travis</a></td><td class="x-right"><a href="https://travis-ci.com/plans">$69/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td><a href="https://travis-ci.org/yegor256/rultor"> <img src="https://travis-ci.org/yegor256/rultor.svg?branch=master" class="x-build" alt="badge" /></a></td></tr> <tr><td><a href="http://www.appveyor.com">AppVeyor</a></td><td class="x-right"><a href="http://www.appveyor.com/pricing">$39/mo</a></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center">?</td><td class="center">---</td><td><a href="https://ci.appveyor.com/project/yegor256/rultor/branch/master"> <img src="https://ci.appveyor.com/api/projects/status/sulqrjerl27qqtl7/branch/master?svg=true" class="x-build" alt="badge" /></a></td></tr> <tr><td><a href="http://www.wercker.com">Wercker</a></td><td class="x-right">$350/mo</td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td><a href="https://app.wercker.com/project/bykey/0e6506c69e078b7692e50b240c034524"> <img src="https://app.wercker.com/status/0e6506c69e078b7692e50b240c034524/s%20wercker status" class="x-build" alt="badge" /></a></td></tr> <tr><td colspan="9" class="x-hr"></td></tr> <tr><td><a href="http://www.semaphoreapp.com">SemaphoreApp</a></td><td class="x-right"><a href="https://semaphoreapp.com/pricing">$29/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="http://www.snap-ci.com">Snap-CI</a>&#x263A;</td><td class="x-right"><a href="https://snap-ci.com/plans">$30/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center">?</td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="https://codeship.com">Codeship</a>&#x263A;</td><td class="x-right"><a href="https://codeship.com/pricing">$49/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center">?</td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td></tr> <tr><td><a href="http://www.circleci.com">CircleCI</a>&#x263A;</td><td class="x-right"><a href="https://circleci.com/pricing">$19/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="http://ci.solanolabs.com">SonoLabs</a></td><td class="x-right"><a href="https://www.solanolabs.com/#pricing">$15/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center">?</td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="http://www.deploybot.com">DeployBot</a></td><td class="x-right"><a href="https://signup.deploybot.com/signup/new">$15/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center">?</td><td class="center">?</td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="http://vexor.io">Vexor</a></td><td class="x-right"><a href="http://vexor.io/">&cent;90/hr</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center">?</td><td class="center">?</td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="http://www.greenhouseci.com">GreenHouseCI</a></td><td class="x-right"><a href="https://greenhouseci.com/pricing.html">$49/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center">?</td><td class="center">?</td><td class="center"><i class="icon-no red"></i></td></tr> </tbody> </table><p>If you know any other good <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> services, <a href="/about-me.html">email me</a>, I’ll review and add them to this list. BTW, here is a <a href="https://en.wikipedia.org/wiki/Comparison_of_continuous_integration_software">“full” list</a> of continuous integration software and services.</p><p>By the way, a few platforms from this list contacted me and asked to review them again. Some even offered me money to put them higher in the list (kidding). Anyway, it’s up to you to decide whether it’s a good sign or not (I think it’s good, they care about their PR). I marked them in the list with ☺ emoji.</p><h2 id="best-four">Best Four</h2><figure class="badge"><a href="http://www.shippable.com"><img src="https://www.yegor256.com/images/2014/10/shippable.svg" style="width:92px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.shippable.com"><strong>Shippable</strong></a> was easy to configure since it understands <code>.travis.yml</code> out of the box. The user interface is easy to navigate since it doesn’t have “settings” page at all (or I didn’t find it). Everything is configured via <code>shippable.yml</code> file in the repository. The service looks stable and robust, no complains so far. What is especially cool about them is that they allow you to build in a Docker container.</p><figure class="badge"><a href="http://www.travis-ci.org"><img src="https://www.yegor256.com/images/2014/10/travis.png" style="width:92px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.travis-ci.org"><strong>Travis</strong></a> is the best platform I’ve seen so far. Mostly because it is the most popular. Perfectly integrates with GitHub and has proper documentation. One important downside is the price of $129 per month. “With this money you can get a dedicated EC2 instance and install Jenkins there”—some of my <a href="/2015/01/26/happy-boss-false-objective.html">clients</a> say. I strongly disagree, since Jenkins will require a 24x7 administration, which costs way more than $129, but it’s always difficult to explain.</p><figure class="badge"><a href="http://www.wercker.com"><img src="https://www.yegor256.com/images/2014/10/wercker.png" style="width:92px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.wercker.com"><strong>Wercker</strong></a> is a European product from Amsterdam, which is still in beta and that’s why free for all projects. The platform looks very promising. It is still free for private repositories and is backed up by <a href="https://gigaom.com/2014/10/01/wercker-takes-in-2-4-million-to-help-developers-test-their-code-in-the-cloud/">investments</a>. They also have an interesting concept of build “boxes,” which can be pre-configured similar to Docker containers. It works rather stable for the last few months, no complains so far.</p><figure class="badge"><a href="http://www.appveyor.com"><img src="https://www.yegor256.com/images/2014/10/appveyor.png" style="width:92px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.appveyor.com"><strong>AppVeyor</strong></a> is the only one that runs Windows builds. Even though I’m working mostly with Java and Ruby, which are expected to be platform independent, they very often appear to be exactly the opposite. When your build succeeds on Linux, there is almost no guarantee it will pass on Windows or Mac. I’m planning to use AppVeyor in every project, in combination with some other CI service. Here is how I integrate <a href="/2015/01/10/windows-appveyor-maven.html">Maven builds</a> with AppVeyor.</p><h2 id="others">Others</h2><figure class="badge"><a href="http://www.semaphoreapp.com"><img src="https://www.yegor256.com/images/2014/10/semaphoreapp.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.semaphoreapp.com"><strong>SemaphoreApp</strong></a> is easy to configure and work with. It makes an impression of a light-weight system, which I generally appreciate. As a downside, they <span class="strike">don’t have any Maven pre-installed</span> have an old version of Maven, but this was solved easily with a short custom script that downloads and unpacks the latest Maven. Another downside is that they are not configurable through a file (like <code>.travis.yml</code>)—you should do everything through a UI. They also support <a href="https://semaphoreapp.com/docs/caching-between-builds.html">caching between builds</a>.</p><figure class="badge"><a href="http://www.snap-ci.com"><img src="https://www.yegor256.com/images/2014/10/snap.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.snap-ci.com"><strong>Snap-CI</strong></a> is a product of ThoughtWorks, an author of <a href="http://www.go.cd/">Go</a>, an open source continuous integration server. It looks a bit more complicated than others, giving you an ability to define “stages” and combine them into pipelines. I’m not sure yet how these mechanisms may help in small and medium size projects we’re mostly working with, but they look “cool.” There is also a very unfortunate limitation of 2Gb RAM per build—some of my Java projects fail because of that. Besides that, they don’t give full access to the build server, for example we can’t modify anything in <code>/etc</code>—it is a show-stopper for us.</p><p><a href="https://codeship.com"><strong>Codeship</strong></a> works fine, but their web UI looks a bit out-dated. Besides that, they promise to work with pull requests, but I didn’t manage to configure them. They simply don’t notify our pull requests in GitHub, even though they build them. Maybe I’ll find a way, so far it’s not clear.</p><figure class="badge"><a href="http://www.circleci.com"><img src="https://www.yegor256.com/images/2014/10/circleci.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.circleci.com"><strong>CircleCI</strong></a> I still don’t know why my build fails there. Really difficult to configure and understand what’s going on. Trying to figure it out…</p><figure class="badge"><a href="http://www.solanolabs.com"><img src="https://www.yegor256.com/images/2014/10/solanolabs.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.solanolabs.com"><strong>SolanoLabs</strong></a> looks rather immature and difficult to configure. They don’t even support automatic GitHub hook configuration when new repository is added. However, their sales spams me rather aggressively :)</p><figure class="badge"><a href="http://www.hosted-ci.com"><img src="https://www.yegor256.com/images/2014/10/hostedci.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.hosted-ci.com"><strong>Hosted-CI</strong></a> is for iOS/OSX only. They don’t give anything for free, even for open source projects. I didn’t have a chance to test them yet.</p><figure class="badge"><a href="http://www.cloudbees.com"><img src="https://www.yegor256.com/images/2014/10/cloudbees.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.cloudbees.com"><strong>CloudBees</strong></a> is basically a hosted Jenkins. I don’t really like Jenkins, that’s why can’t recommend this platform.</p><figure class="badge"><a href="http://www.deploybot.com"><img src="https://www.yegor256.com/images/2014/10/deploybot.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p><a href="https://deploybot.com/"><strong>DeployBot</strong></a> doesn’t even allow me to login via GitHub, huh? They seem to be more “deployment” oriented, not just continuous integration.</p><figure class="badge"><a href="http://vexor.io"><img src="https://www.yegor256.com/images/2014/10/vexor.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://vexor.io/"><strong>Vexor</strong></a> looks nice and offers a rather unique billing model—they charge per build, not per month. I would definitely recommend to give it a try. I couldn’t make it work though…</p><figure class="badge"><a href="http://www.greenhouseci.com"><img src="https://www.yegor256.com/images/2014/10/greenhouseci.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://greenhouseci.com/"><strong>GreenHouseCI</strong></a> is a CI platform for mobile apps (iOS, Android, etc.) Seems to be interesting, I just don’t have a full scale mobile app to test it against.</p><hr /><p><a href="https://about.gitlab.com/gitlab-ci/">gitlab-ci</a>: will review soon</p><p><a href="https://scan.coverity.com">coverity.com</a>: will review it soon and add to the list.</p><p><a href="https://buddy.works/">buddy.works</a>: will review soon.</p><p><a href="https://aws.amazon.com/codebuild/">AWS Code Build</a> and <a href="https://aws.amazon.com/codedeploy/">AWS Code Deploy</a>: will review soon.</p><p><strong>Ship.io</strong> is dead (as of 20-Sep-2016).</p><p><strong>ZeroCI.com</strong> is dead (as of 28-Aug-2016).</p><p><strong>Drone.io</strong> is not hosted any more, but is open source (as of 23-Jan-2017).</p><p><strong>Hosted-ci</strong> doesn’t look alive (as of 16-Apr-2017).</p><p><strong>Magnum-CI.com</strong> doesn’t look alive (as of 30-May-2017).</p><hr /><p>BTW, if you don’t like the idea of keeping continuous integration in cloud, consider these on-premise software packages (in order or preference): <a href="http://jenkins-ci.org/">Jenkins</a>, <a href="http://www.jetbrains.com/teamcity/">TeamCity</a>, <a href="http://www.thoughtworks.com/products/go-continuous-delivery">Go</a>, <a href="https://github.com/Strider-CD/strider">Strider</a>, <a href="http://buildbot.net/">BuildBot</a>.</p><p>Keep in mind that no matter how good and expensive your continuous integration service is, it <a href="/2014/10/08/continuous-integration-is-dead.html">won’t help you</a> unless you make your <a href="/2014/07/21/read-only-master-branch.html">master branch read-only</a>.</p><hr /><p><sup>1</sup> This means that the platform can build your repo in Linux environment. Almost all of them do that by default, unless you configure them otherwise.<br /> <sup>2</sup> Some of them can build on Windows platform.<br /> <sup>3</sup> MacOS support means that an Objective-C/Swift product can be built there.<br /> <sup>4</sup> I mean GitHub pull request support here. Some of them can be integrated with GitHub and will build pull requests before they are merged. Build status will be visible in GitHub. A pretty convenient feature.<br /> <sup>5</sup> Logs compression is a critical feature, at least for me. Most of my logs are from Maven and without <code>col -b</code> they look too long and unreadable.<br /> <sup>6</sup> Looks like Docker containers must be supported by all of them, but unfortunately it’s not the case. Ideally, all builds should run in containers.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html&amp;text=Best+Hosted+Continuous+Integration+Services+for+a+Private+Repository" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html%3F2014-40&amp;title=Best+Hosted+Continuous+Integration+Services+for+a+Private+Repository" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/10/05/ten-hosted-continuous-integration-services.html%3F2014-40&amp;t=Best+Hosted+Continuous+Integration+Services+for+a+Private+Repository" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>Every project I’m working with starts with a setup of <a href="/2016/08/01/continuous-integration-maturity.html">continuous integration</a> pipeline. I’m a big fan of cloud services, that’s why I was always using <a href="http://www.travis-ci.org">Travis</a>. A few of my clients questioned this choice recently, mostly because of the price. So I decided to make a brief analysis of the market.</p><p>I configured <a href="https://github.com/yegor256/rultor">Rultor</a>, an open source project, in every CI service I managed to find. All of them are free for open source projects. All of them are hosted and do not require any server installation Here they are, in order of my personal preference (first four are the best and highly recommended):</p><table> <colgroup> <col class="x-col1" /> <col class="x-col2" /> <col class="x-colX" /> <col class="x-colX" /> <col class="x-colX" /> <col class="x-colX" /> <col class="x-colX" /> </colgroup> <thead> <tr class="x-head"><td></td><td class="x-bottom x-right">Minimum price</td><td class="x-vertical"><div><span>Linux<sup>1</sup></span></div></td><td class="x-vertical"><div><span>Windows<sup>2</sup></span></div></td><td class="x-vertical"><div><span>MacOS<sup>3</sup></span></div></td><td class="x-vertical"><div><span>Pull requests<sup>4</sup></span></div></td><td class="x-vertical"><div><span>Log compress<sup>5</sup></span></div></td><td class="x-vertical"><div><span>Docker<sup>6</sup></span></div></td><td class="x-bottom">Build</td></tr> </thead> <tbody> <tr><td><a href="http://www.shippable.com">Shippable</a>&#x263A;</td><td class="x-right"><a href="http://www.shippable.com/pricing.html">free</a> (!)</td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td><a href="https://app.shippable.com/projects/542e8fb980088cee586d3806/builds/latest"> <img src="https://api.shippable.com/projects/542e8fb980088cee586d3806/badge?branchName=master" class="x-build" alt="badge" /></a></td></tr> <tr><td><a href="http://www.travis-ci.org">Travis</a></td><td class="x-right"><a href="https://travis-ci.com/plans">$69/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td><a href="https://travis-ci.org/yegor256/rultor"> <img src="https://travis-ci.org/yegor256/rultor.svg?branch=master" class="x-build" alt="badge" /></a></td></tr> <tr><td><a href="http://www.appveyor.com">AppVeyor</a></td><td class="x-right"><a href="http://www.appveyor.com/pricing">$39/mo</a></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center">?</td><td class="center">---</td><td><a href="https://ci.appveyor.com/project/yegor256/rultor/branch/master"> <img src="https://ci.appveyor.com/api/projects/status/sulqrjerl27qqtl7/branch/master?svg=true" class="x-build" alt="badge" /></a></td></tr> <tr><td><a href="http://www.wercker.com">Wercker</a></td><td class="x-right">$350/mo</td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td><a href="https://app.wercker.com/project/bykey/0e6506c69e078b7692e50b240c034524"> <img src="https://app.wercker.com/status/0e6506c69e078b7692e50b240c034524/s%20wercker status" class="x-build" alt="badge" /></a></td></tr> <tr><td colspan="9" class="x-hr"></td></tr> <tr><td><a href="http://www.semaphoreapp.com">SemaphoreApp</a></td><td class="x-right"><a href="https://semaphoreapp.com/pricing">$29/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="http://www.snap-ci.com">Snap-CI</a>&#x263A;</td><td class="x-right"><a href="https://snap-ci.com/plans">$30/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center">?</td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="https://codeship.com">Codeship</a>&#x263A;</td><td class="x-right"><a href="https://codeship.com/pricing">$49/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center">?</td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td></tr> <tr><td><a href="http://www.circleci.com">CircleCI</a>&#x263A;</td><td class="x-right"><a href="https://circleci.com/pricing">$19/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="http://ci.solanolabs.com">SonoLabs</a></td><td class="x-right"><a href="https://www.solanolabs.com/#pricing">$15/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center">?</td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="http://www.deploybot.com">DeployBot</a></td><td class="x-right"><a href="https://signup.deploybot.com/signup/new">$15/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center">?</td><td class="center">?</td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="http://vexor.io">Vexor</a></td><td class="x-right"><a href="http://vexor.io/">&cent;90/hr</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center">?</td><td class="center">?</td><td class="center"><i class="icon-no red"></i></td></tr> <tr><td><a href="http://www.greenhouseci.com">GreenHouseCI</a></td><td class="x-right"><a href="https://greenhouseci.com/pricing.html">$49/mo</a></td><td class="center"><i class="icon-yes green"></i></td><td class="center"><i class="icon-no red"></i></td><td class="center"><i class="icon-yes green"></i></td><td class="center">?</td><td class="center">?</td><td class="center"><i class="icon-no red"></i></td></tr> </tbody> </table><p>If you know any other good <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> services, <a href="/about-me.html">email me</a>, I’ll review and add them to this list. BTW, here is a <a href="https://en.wikipedia.org/wiki/Comparison_of_continuous_integration_software">“full” list</a> of continuous integration software and services.</p><p>By the way, a few platforms from this list contacted me and asked to review them again. Some even offered me money to put them higher in the list (kidding). Anyway, it’s up to you to decide whether it’s a good sign or not (I think it’s good, they care about their PR). I marked them in the list with ☺ emoji.</p><h2 id="best-four">Best Four</h2><figure class="badge"><a href="http://www.shippable.com"><img src="https://www.yegor256.com/images/2014/10/shippable.svg" style="width:92px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.shippable.com"><strong>Shippable</strong></a> was easy to configure since it understands <code>.travis.yml</code> out of the box. The user interface is easy to navigate since it doesn’t have “settings” page at all (or I didn’t find it). Everything is configured via <code>shippable.yml</code> file in the repository. The service looks stable and robust, no complains so far. What is especially cool about them is that they allow you to build in a Docker container.</p><figure class="badge"><a href="http://www.travis-ci.org"><img src="https://www.yegor256.com/images/2014/10/travis.png" style="width:92px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.travis-ci.org"><strong>Travis</strong></a> is the best platform I’ve seen so far. Mostly because it is the most popular. Perfectly integrates with GitHub and has proper documentation. One important downside is the price of $129 per month. “With this money you can get a dedicated EC2 instance and install Jenkins there”—some of my <a href="/2015/01/26/happy-boss-false-objective.html">clients</a> say. I strongly disagree, since Jenkins will require a 24x7 administration, which costs way more than $129, but it’s always difficult to explain.</p><figure class="badge"><a href="http://www.wercker.com"><img src="https://www.yegor256.com/images/2014/10/wercker.png" style="width:92px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.wercker.com"><strong>Wercker</strong></a> is a European product from Amsterdam, which is still in beta and that’s why free for all projects. The platform looks very promising. It is still free for private repositories and is backed up by <a href="https://gigaom.com/2014/10/01/wercker-takes-in-2-4-million-to-help-developers-test-their-code-in-the-cloud/">investments</a>. They also have an interesting concept of build “boxes,” which can be pre-configured similar to Docker containers. It works rather stable for the last few months, no complains so far.</p><figure class="badge"><a href="http://www.appveyor.com"><img src="https://www.yegor256.com/images/2014/10/appveyor.png" style="width:92px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.appveyor.com"><strong>AppVeyor</strong></a> is the only one that runs Windows builds. Even though I’m working mostly with Java and Ruby, which are expected to be platform independent, they very often appear to be exactly the opposite. When your build succeeds on Linux, there is almost no guarantee it will pass on Windows or Mac. I’m planning to use AppVeyor in every project, in combination with some other CI service. Here is how I integrate <a href="/2015/01/10/windows-appveyor-maven.html">Maven builds</a> with AppVeyor.</p><h2 id="others">Others</h2><figure class="badge"><a href="http://www.semaphoreapp.com"><img src="https://www.yegor256.com/images/2014/10/semaphoreapp.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.semaphoreapp.com"><strong>SemaphoreApp</strong></a> is easy to configure and work with. It makes an impression of a light-weight system, which I generally appreciate. As a downside, they <span class="strike">don’t have any Maven pre-installed</span> have an old version of Maven, but this was solved easily with a short custom script that downloads and unpacks the latest Maven. Another downside is that they are not configurable through a file (like <code>.travis.yml</code>)—you should do everything through a UI. They also support <a href="https://semaphoreapp.com/docs/caching-between-builds.html">caching between builds</a>.</p><figure class="badge"><a href="http://www.snap-ci.com"><img src="https://www.yegor256.com/images/2014/10/snap.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.snap-ci.com"><strong>Snap-CI</strong></a> is a product of ThoughtWorks, an author of <a href="http://www.go.cd/">Go</a>, an open source continuous integration server. It looks a bit more complicated than others, giving you an ability to define “stages” and combine them into pipelines. I’m not sure yet how these mechanisms may help in small and medium size projects we’re mostly working with, but they look “cool.” There is also a very unfortunate limitation of 2Gb RAM per build—some of my Java projects fail because of that. Besides that, they don’t give full access to the build server, for example we can’t modify anything in <code>/etc</code>—it is a show-stopper for us.</p><p><a href="https://codeship.com"><strong>Codeship</strong></a> works fine, but their web UI looks a bit out-dated. Besides that, they promise to work with pull requests, but I didn’t manage to configure them. They simply don’t notify our pull requests in GitHub, even though they build them. Maybe I’ll find a way, so far it’s not clear.</p><figure class="badge"><a href="http://www.circleci.com"><img src="https://www.yegor256.com/images/2014/10/circleci.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.circleci.com"><strong>CircleCI</strong></a> I still don’t know why my build fails there. Really difficult to configure and understand what’s going on. Trying to figure it out…</p><figure class="badge"><a href="http://www.solanolabs.com"><img src="https://www.yegor256.com/images/2014/10/solanolabs.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.solanolabs.com"><strong>SolanoLabs</strong></a> looks rather immature and difficult to configure. They don’t even support automatic GitHub hook configuration when new repository is added. However, their sales spams me rather aggressively :)</p><figure class="badge"><a href="http://www.hosted-ci.com"><img src="https://www.yegor256.com/images/2014/10/hostedci.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.hosted-ci.com"><strong>Hosted-CI</strong></a> is for iOS/OSX only. They don’t give anything for free, even for open source projects. I didn’t have a chance to test them yet.</p><figure class="badge"><a href="http://www.cloudbees.com"><img src="https://www.yegor256.com/images/2014/10/cloudbees.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.cloudbees.com"><strong>CloudBees</strong></a> is basically a hosted Jenkins. I don’t really like Jenkins, that’s why can’t recommend this platform.</p><figure class="badge"><a href="http://www.deploybot.com"><img src="https://www.yegor256.com/images/2014/10/deploybot.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p><a href="https://deploybot.com/"><strong>DeployBot</strong></a> doesn’t even allow me to login via GitHub, huh? They seem to be more “deployment” oriented, not just continuous integration.</p><figure class="badge"><a href="http://vexor.io"><img src="https://www.yegor256.com/images/2014/10/vexor.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://vexor.io/"><strong>Vexor</strong></a> looks nice and offers a rather unique billing model—they charge per build, not per month. I would definitely recommend to give it a try. I couldn’t make it work though…</p><figure class="badge"><a href="http://www.greenhouseci.com"><img src="https://www.yegor256.com/images/2014/10/greenhouseci.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://greenhouseci.com/"><strong>GreenHouseCI</strong></a> is a CI platform for mobile apps (iOS, Android, etc.) Seems to be interesting, I just don’t have a full scale mobile app to test it against.</p><hr /><p><a href="https://about.gitlab.com/gitlab-ci/">gitlab-ci</a>: will review soon</p><p><a href="https://scan.coverity.com">coverity.com</a>: will review it soon and add to the list.</p><p><a href="https://buddy.works/">buddy.works</a>: will review soon.</p><p><a href="https://aws.amazon.com/codebuild/">AWS Code Build</a> and <a href="https://aws.amazon.com/codedeploy/">AWS Code Deploy</a>: will review soon.</p><p><strong>Ship.io</strong> is dead (as of 20-Sep-2016).</p><p><strong>ZeroCI.com</strong> is dead (as of 28-Aug-2016).</p><p><strong>Drone.io</strong> is not hosted any more, but is open source (as of 23-Jan-2017).</p><p><strong>Hosted-ci</strong> doesn’t look alive (as of 16-Apr-2017).</p><p><strong>Magnum-CI.com</strong> doesn’t look alive (as of 30-May-2017).</p><hr /><p>BTW, if you don’t like the idea of keeping continuous integration in cloud, consider these on-premise software packages (in order or preference): <a href="http://jenkins-ci.org/">Jenkins</a>, <a href="http://www.jetbrains.com/teamcity/">TeamCity</a>, <a href="http://www.thoughtworks.com/products/go-continuous-delivery">Go</a>, <a href="https://github.com/Strider-CD/strider">Strider</a>, <a href="http://buildbot.net/">BuildBot</a>.</p><p>Keep in mind that no matter how good and expensive your continuous integration service is, it <a href="/2014/10/08/continuous-integration-is-dead.html">won’t help you</a> unless you make your <a href="/2014/07/21/read-only-master-branch.html">master branch read-only</a>.</p><hr /><p><sup>1</sup> This means that the platform can build your repo in Linux environment. Almost all of them do that by default, unless you configure them otherwise.<br /> <sup>2</sup> Some of them can build on Windows platform.<br /> <sup>3</sup> MacOS support means that an Objective-C/Swift product can be built there.<br /> <sup>4</sup> I mean GitHub pull request support here. Some of them can be integrated with GitHub and will build pull requests before they are merged. Build status will be visible in GitHub. A pretty convenient feature.<br /> <sup>5</sup> Logs compression is a critical feature, at least for me. Most of my logs are from Maven and without <code>col -b</code> they look too long and unreadable.<br /> <sup>6</sup> Looks like Docker containers must be supported by all of them, but unfortunately it’s not the case. Ideally, all builds should run in containers.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?23bb3130b4f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="&lt;p&gt;There were a few articles already about our usage of Rultor for automating continuous delivery cycles of Java and Ruby projects, including &lt;a href=&quot;https://www.yegor256.com/2014/08/26/publish-to-rubygems.html&quot;&gt;RubyGems&lt;/a&gt;, &lt;a href=&quot;https://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html&quot;&gt;CloudBees&lt;/a&gt; and &lt;a href=&quot;https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html&quot;&gt;Maven Central&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;This one describes how Heroku deployment can be automated. When I need to deploy a new version of an Aintshy web application, all I do is create one message in a GitHub ticket. I just say &lt;code&gt;@rultor release 0.1.4&lt;/code&gt; and version 0.1.4 gets deployed to Heroku. See GitHub ticket &lt;a href=&quot;https://github.com/aintshy/hub/issues/5&quot;&gt;#5&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;You can do the same, with the help of &lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor.com&lt;/a&gt;, a free hosted DevOps assistant.&lt;/p&gt; &lt;!--more--&gt; &lt;h2 id=&quot;create-heroku-project&quot;&gt;Create Heroku Project&lt;/h2&gt; &lt;p&gt;Create a new project at &lt;a href=&quot;http://www.heroku.com&quot;&gt;Heroku.com&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Then install their &lt;a href=&quot;https://toolbelt.heroku.com/&quot;&gt;command line tool-belt&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;authenticate-at-heroku&quot;&gt;Authenticate at Heroku&lt;/h2&gt; &lt;p&gt;You should authenticate your public SSH key at Heroku, using their command line tool-belt. The process is explained &lt;a href=&quot;https://devcenter.heroku.com/articles/authentication&quot;&gt;here&lt;/a&gt;, but it is not much of a process. You just run &lt;code&gt;heroku login&lt;/code&gt; and enter your login credentials. As a result, you will get your existing key (located at &lt;code&gt;~/.ssh/id_rsa.pub&lt;/code&gt;) authenticated by Heroku.&lt;/p&gt; &lt;p&gt;If you didn’t have the key before, it will be created automatically.&lt;/p&gt; &lt;h2 id=&quot;encrypt-ssh-key&quot;&gt;Encrypt SSH Key&lt;/h2&gt; &lt;p&gt;Now, encrypt &lt;code&gt;id_rsa&lt;/code&gt; and &lt;code&gt;id_rsa.pub&lt;/code&gt; (they are in the &lt;code&gt;~/.ssh&lt;/code&gt; directory) with a &lt;a href=&quot;https://github.com/yegor256/rultor-remote&quot;&gt;rultor remote&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;$ gem install rultor $ rultor encrypt -p me/test id_rsa $ rultor encrypt -p me/test id_rsa.pub&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Instead of &lt;code&gt;me/test&lt;/code&gt; use the name of your GitHub project.&lt;/p&gt; &lt;p&gt;You will get two new files &lt;code&gt;id_rsa.asc&lt;/code&gt; and &lt;code&gt;id_rsa.pub.asc&lt;/code&gt;. Add them to the root directory of your project, commit and push. These files contain your secret information, but only the Rultor server can decrypt them.&lt;/p&gt; &lt;h2 id=&quot;create-rultor-configuration&quot;&gt;Create Rultor Configuration&lt;/h2&gt; &lt;p&gt;Create a &lt;code&gt;.rultor.yml&lt;/code&gt; file in the root directory of your project (&lt;a href=&quot;http://doc.rultor.com/reference.html&quot;&gt;reference page&lt;/a&gt; explains this format in detail):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;decrypt: id_rsa: &amp;quot;repo/id_rsa.asc&amp;quot; id_rsa.pub: &amp;quot;repo/id_rsa.pub.asc&amp;quot; release: script: | mvn versions:set &amp;quot;-DnewVersion=${tag}&amp;quot; git commit -am &amp;quot;${tag}&amp;quot; mvn clean install -Pqulice --errors git remote add heroku git@heroku.com:aintshy.git mkdir ~/.ssh mv ../id_rsa ../id_rsa.pub ~/.ssh chmod -R 600 ~/.ssh/* echo -e \ &amp;quot;Host *\n StrictHostKeyChecking no\n UserKnownHostsFile=/dev/null&amp;quot; \ &amp;gt; ~/.ssh/config git push -f heroku $(git symbolic-ref --short HEAD):master&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;You can compare your file with live Rultor &lt;a href=&quot;https://github.com/aintshy/hub/blob/master/.rultor.yml&quot;&gt;configuration of aintshy/hub&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;run-it&quot;&gt;Run It!&lt;/h2&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/logo.svg&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;Now it’s time to see how it all works. Create a new ticket in the GitHub issue tracker, and post something like this into it (read more about &lt;a href=&quot;http://doc.rultor.com/basics.html&quot;&gt;Rultor commands&lt;/a&gt;):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;@rultor release, tag is `0.1`&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;You will get a response in a few seconds. The rest will be done by Rultor.&lt;/p&gt; &lt;p&gt;Enjoy :)&lt;/p&gt; &lt;p&gt;BTW, if something doesn’t work as I’ve explained, don’t hesitate to submit a ticket to the &lt;a href=&quot;https://github.com/yegor256/rultor/issues&quot;&gt;Rultor issue tracker&lt;/a&gt;. I will try to help you.&lt;/p&gt; &lt;p&gt;PS. I would also recommend to versionalize artifacts through &lt;code&gt;MANIFEST.MF&lt;/code&gt; and use &lt;a href=&quot;/2014/07/03/how-to-read-manifest-mf.html&quot;&gt;jcabi-manifests&lt;/a&gt; to read them later.&lt;/p&gt; " /> <meta name="keywords" content="next, path, output, content, previous, url, relative_path, id, collection, excerpt, draft, categories, layout, title, date, tags, description, keywords, slug, ext" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-09-13 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Deploying to Heroku, in One Click"/> <meta name="twitter:description" property="og:description" content="&lt;p&gt;There were a few articles already about our usage of Rultor for automating continuous delivery cycles of Java and Ruby projects, including &lt;a href=&quot;https://www.yegor256.com/2014/08/26/publish-to-rubygems.html&quot;&gt;RubyGems&lt;/a&gt;, &lt;a href=&quot;https://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html&quot;&gt;CloudBees&lt;/a&gt; and &lt;a href=&quot;https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html&quot;&gt;Maven Central&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;This one describes how Heroku deployment can be automated. When I need to deploy a new version of an Aintshy web application, all I do is create one message in a GitHub ticket. I just say &lt;code&gt;@rultor release 0.1.4&lt;/code&gt; and version 0.1.4 gets deployed to Heroku. See GitHub ticket &lt;a href=&quot;https://github.com/aintshy/hub/issues/5&quot;&gt;#5&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;You can do the same, with the help of &lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor.com&lt;/a&gt;, a free hosted DevOps assistant.&lt;/p&gt; &lt;!--more--&gt; &lt;h2 id=&quot;create-heroku-project&quot;&gt;Create Heroku Project&lt;/h2&gt; &lt;p&gt;Create a new project at &lt;a href=&quot;http://www.heroku.com&quot;&gt;Heroku.com&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Then install their &lt;a href=&quot;https://toolbelt.heroku.com/&quot;&gt;command line tool-belt&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;authenticate-at-heroku&quot;&gt;Authenticate at Heroku&lt;/h2&gt; &lt;p&gt;You should authenticate your public SSH key at Heroku, using their command line tool-belt. The process is explained &lt;a href=&quot;https://devcenter.heroku.com/articles/authentication&quot;&gt;here&lt;/a&gt;, but it is not much of a process. You just run &lt;code&gt;heroku login&lt;/code&gt; and enter your login credentials. As a result, you will get your existing key (located at &lt;code&gt;~/.ssh/id_rsa.pub&lt;/code&gt;) authenticated by Heroku.&lt;/p&gt; &lt;p&gt;If you didn’t have the key before, it will be created automatically.&lt;/p&gt; &lt;h2 id=&quot;encrypt-ssh-key&quot;&gt;Encrypt SSH Key&lt;/h2&gt; &lt;p&gt;Now, encrypt &lt;code&gt;id_rsa&lt;/code&gt; and &lt;code&gt;id_rsa.pub&lt;/code&gt; (they are in the &lt;code&gt;~/.ssh&lt;/code&gt; directory) with a &lt;a href=&quot;https://github.com/yegor256/rultor-remote&quot;&gt;rultor remote&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;$ gem install rultor $ rultor encrypt -p me/test id_rsa $ rultor encrypt -p me/test id_rsa.pub&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Instead of &lt;code&gt;me/test&lt;/code&gt; use the name of your GitHub project.&lt;/p&gt; &lt;p&gt;You will get two new files &lt;code&gt;id_rsa.asc&lt;/code&gt; and &lt;code&gt;id_rsa.pub.asc&lt;/code&gt;. Add them to the root directory of your project, commit and push. These files contain your secret information, but only the Rultor server can decrypt them.&lt;/p&gt; &lt;h2 id=&quot;create-rultor-configuration&quot;&gt;Create Rultor Configuration&lt;/h2&gt; &lt;p&gt;Create a &lt;code&gt;.rultor.yml&lt;/code&gt; file in the root directory of your project (&lt;a href=&quot;http://doc.rultor.com/reference.html&quot;&gt;reference page&lt;/a&gt; explains this format in detail):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;decrypt: id_rsa: &amp;quot;repo/id_rsa.asc&amp;quot; id_rsa.pub: &amp;quot;repo/id_rsa.pub.asc&amp;quot; release: script: | mvn versions:set &amp;quot;-DnewVersion=${tag}&amp;quot; git commit -am &amp;quot;${tag}&amp;quot; mvn clean install -Pqulice --errors git remote add heroku git@heroku.com:aintshy.git mkdir ~/.ssh mv ../id_rsa ../id_rsa.pub ~/.ssh chmod -R 600 ~/.ssh/* echo -e \ &amp;quot;Host *\n StrictHostKeyChecking no\n UserKnownHostsFile=/dev/null&amp;quot; \ &amp;gt; ~/.ssh/config git push -f heroku $(git symbolic-ref --short HEAD):master&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;You can compare your file with live Rultor &lt;a href=&quot;https://github.com/aintshy/hub/blob/master/.rultor.yml&quot;&gt;configuration of aintshy/hub&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;run-it&quot;&gt;Run It!&lt;/h2&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/logo.svg&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;Now it’s time to see how it all works. Create a new ticket in the GitHub issue tracker, and post something like this into it (read more about &lt;a href=&quot;http://doc.rultor.com/basics.html&quot;&gt;Rultor commands&lt;/a&gt;):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;@rultor release, tag is `0.1`&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;You will get a response in a few seconds. The rest will be done by Rultor.&lt;/p&gt; &lt;p&gt;Enjoy :)&lt;/p&gt; &lt;p&gt;BTW, if something doesn’t work as I’ve explained, don’t hesitate to submit a ticket to the &lt;a href=&quot;https://github.com/yegor256/rultor/issues&quot;&gt;Rultor issue tracker&lt;/a&gt;. I will try to help you.&lt;/p&gt; &lt;p&gt;PS. I would also recommend to versionalize artifacts through &lt;code&gt;MANIFEST.MF&lt;/code&gt; and use &lt;a href=&quot;/2014/07/03/how-to-read-manifest-mf.html&quot;&gt;jcabi-manifests&lt;/a&gt; to read them later.&lt;/p&gt; "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/09/13/deploying-to-heroku.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?23bb3130b4f"/> <link rel="apple-touch-icon" href="/favicon.ico?23bb3130b4f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?23bb3130b4f"/> <link rel="stylesheet" href="/css/icons.css?23bb3130b4f"/> <link rel="canonical" href="https://www.yegor256.com/2014/09/13/deploying-to-heroku.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/09/13/deploying-to-heroku.amp.html" /> <title>Deploying to Heroku, in One Click </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /2014/09/13/deploying-to-heroku.html><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /2014/09/13/deploying-to-heroku.html><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /2014/09/13/deploying-to-heroku.html><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /2014/09/13/deploying-to-heroku.html><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /2014/09/13/deploying-to-heroku.html><a href="/books.html" title="The books I wrote">Books</a></li> <li /2014/09/13/deploying-to-heroku.html><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /2014/09/13/deploying-to-heroku.html><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /2014/09/13/deploying-to-heroku.html class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /2014/09/13/deploying-to-heroku.html><a href="/award.html" title="Software quality award">Award</a></li> <li /2014/09/13/deploying-to-heroku.html><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /2014/09/13/deploying-to-heroku.html><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /2014/09/13/deploying-to-heroku.html><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/09/13/deploying-to-heroku.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2014/09/13/deploying-to-heroku.html</code></p><h1 itemprop="name headline mainEntityOfPage">Deploying to Heroku, in One Click</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-09-13T00:00:00+00:00"> 13 September 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2014/09/13/deploying-to-heroku.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>There were a few articles already about our usage of Rultor for automating continuous delivery cycles of Java and Ruby projects, including <a href="https://www.yegor256.com/2014/08/26/publish-to-rubygems.html">RubyGems</a>, <a href="https://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html">CloudBees</a> and <a href="https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html">Maven Central</a>.</p><p>This one describes how Heroku deployment can be automated. When I need to deploy a new version of an Aintshy web application, all I do is create one message in a GitHub ticket. I just say <code>@rultor release 0.1.4</code> and version 0.1.4 gets deployed to Heroku. See GitHub ticket <a href="https://github.com/aintshy/hub/issues/5">#5</a>.</p><p>You can do the same, with the help of <a href="http://www.rultor.com">Rultor.com</a>, a free hosted DevOps assistant.</p><h2 id="create-heroku-project">Create Heroku Project</h2><p>Create a new project at <a href="http://www.heroku.com">Heroku.com</a>.</p><p>Then install their <a href="https://toolbelt.heroku.com/">command line tool-belt</a>.</p><h2 id="authenticate-at-heroku">Authenticate at Heroku</h2><p>You should authenticate your public SSH key at Heroku, using their command line tool-belt. The process is explained <a href="https://devcenter.heroku.com/articles/authentication">here</a>, but it is not much of a process. You just run <code>heroku login</code> and enter your login credentials. As a result, you will get your existing key (located at <code>~/.ssh/id_rsa.pub</code>) authenticated by Heroku.</p><p>If you didn’t have the key before, it will be created automatically.</p><h2 id="encrypt-ssh-key">Encrypt SSH Key</h2><p>Now, encrypt <code>id_rsa</code> and <code>id_rsa.pub</code> (they are in the <code>~/.ssh</code> directory) with a <a href="https://github.com/yegor256/rultor-remote">rultor remote</a>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>$ gem install rultor
$ rultor encrypt -p me/test id_rsa
$ rultor encrypt -p me/test id_rsa.pub</code></pre></figure><p>Instead of <code>me/test</code> use the name of your GitHub project.</p><p>You will get two new files <code>id_rsa.asc</code> and <code>id_rsa.pub.asc</code>. Add them to the root directory of your project, commit and push. These files contain your secret information, but only the Rultor server can decrypt them.</p><h2 id="create-rultor-configuration">Create Rultor Configuration</h2><p>Create a <code>.rultor.yml</code> file in the root directory of your project (<a href="http://doc.rultor.com/reference.html">reference page</a> explains this format in detail):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>decrypt:
  id_rsa: &quot;repo/id_rsa.asc&quot;
  id_rsa.pub: &quot;repo/id_rsa.pub.asc&quot;
release:
  script: |
    mvn versions:set &quot;-DnewVersion=${tag}&quot;
    git commit -am &quot;${tag}&quot;
    mvn clean install -Pqulice --errors
    git remote add heroku git@heroku.com:aintshy.git
    mkdir ~/.ssh
    mv ../id_rsa ../id_rsa.pub ~/.ssh
    chmod -R 600 ~/.ssh/*
    echo -e \
      &quot;Host *\n  StrictHostKeyChecking no\n  UserKnownHostsFile=/dev/null&quot; \
      &gt; ~/.ssh/config
    git push -f heroku $(git symbolic-ref --short HEAD):master</code></pre></figure><p>You can compare your file with live Rultor <a href="https://github.com/aintshy/hub/blob/master/.rultor.yml">configuration of aintshy/hub</a>.</p><h2 id="run-it">Run It!</h2><figure class="badge"><a href="http://www.rultor.com"><img src="http://doc.rultor.com/images/logo.svg" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p>Now it’s time to see how it all works. Create a new ticket in the GitHub issue tracker, and post something like this into it (read more about <a href="http://doc.rultor.com/basics.html">Rultor commands</a>):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>@rultor release, tag is `0.1`</code></pre></figure><p>You will get a response in a few seconds. The rest will be done by Rultor.</p><p>Enjoy :)</p><p>BTW, if something doesn’t work as I’ve explained, don’t hesitate to submit a ticket to the <a href="https://github.com/yegor256/rultor/issues">Rultor issue tracker</a>. I will try to help you.</p><p>PS. I would also recommend to versionalize artifacts through <code>MANIFEST.MF</code> and use <a href="/2014/07/03/how-to-read-manifest-mf.html">jcabi-manifests</a> to read them later.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/09/13/deploying-to-heroku.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/09/13/deploying-to-heroku.html&amp;text=Deploying+to+Heroku%2C+in+One+Click" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/09/13/deploying-to-heroku.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/09/13/deploying-to-heroku.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/09/13/deploying-to-heroku.html%3F2014-36&amp;title=Deploying+to+Heroku%2C+in+One+Click" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/09/13/deploying-to-heroku.html%3F2014-36&amp;t=Deploying+to+Heroku%2C+in+One+Click" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>There were a few articles already about our usage of Rultor for automating continuous delivery cycles of Java and Ruby projects, including <a href="https://www.yegor256.com/2014/08/26/publish-to-rubygems.html">RubyGems</a>, <a href="https://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html">CloudBees</a> and <a href="https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html">Maven Central</a>.</p><p>This one describes how Heroku deployment can be automated. When I need to deploy a new version of an Aintshy web application, all I do is create one message in a GitHub ticket. I just say <code>@rultor release 0.1.4</code> and version 0.1.4 gets deployed to Heroku. See GitHub ticket <a href="https://github.com/aintshy/hub/issues/5">#5</a>.</p><p>You can do the same, with the help of <a href="http://www.rultor.com">Rultor.com</a>, a free hosted DevOps assistant.</p><h2 id="create-heroku-project">Create Heroku Project</h2><p>Create a new project at <a href="http://www.heroku.com">Heroku.com</a>.</p><p>Then install their <a href="https://toolbelt.heroku.com/">command line tool-belt</a>.</p><h2 id="authenticate-at-heroku">Authenticate at Heroku</h2><p>You should authenticate your public SSH key at Heroku, using their command line tool-belt. The process is explained <a href="https://devcenter.heroku.com/articles/authentication">here</a>, but it is not much of a process. You just run <code>heroku login</code> and enter your login credentials. As a result, you will get your existing key (located at <code>~/.ssh/id_rsa.pub</code>) authenticated by Heroku.</p><p>If you didn’t have the key before, it will be created automatically.</p><h2 id="encrypt-ssh-key">Encrypt SSH Key</h2><p>Now, encrypt <code>id_rsa</code> and <code>id_rsa.pub</code> (they are in the <code>~/.ssh</code> directory) with a <a href="https://github.com/yegor256/rultor-remote">rultor remote</a>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>$ gem install rultor
$ rultor encrypt -p me/test id_rsa
$ rultor encrypt -p me/test id_rsa.pub</code></pre></figure><p>Instead of <code>me/test</code> use the name of your GitHub project.</p><p>You will get two new files <code>id_rsa.asc</code> and <code>id_rsa.pub.asc</code>. Add them to the root directory of your project, commit and push. These files contain your secret information, but only the Rultor server can decrypt them.</p><h2 id="create-rultor-configuration">Create Rultor Configuration</h2><p>Create a <code>.rultor.yml</code> file in the root directory of your project (<a href="http://doc.rultor.com/reference.html">reference page</a> explains this format in detail):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>decrypt:
  id_rsa: &quot;repo/id_rsa.asc&quot;
  id_rsa.pub: &quot;repo/id_rsa.pub.asc&quot;
release:
  script: |
    mvn versions:set &quot;-DnewVersion=${tag}&quot;
    git commit -am &quot;${tag}&quot;
    mvn clean install -Pqulice --errors
    git remote add heroku git@heroku.com:aintshy.git
    mkdir ~/.ssh
    mv ../id_rsa ../id_rsa.pub ~/.ssh
    chmod -R 600 ~/.ssh/*
    echo -e \
      &quot;Host *\n  StrictHostKeyChecking no\n  UserKnownHostsFile=/dev/null&quot; \
      &gt; ~/.ssh/config
    git push -f heroku $(git symbolic-ref --short HEAD):master</code></pre></figure><p>You can compare your file with live Rultor <a href="https://github.com/aintshy/hub/blob/master/.rultor.yml">configuration of aintshy/hub</a>.</p><h2 id="run-it">Run It!</h2><figure class="badge"><a href="http://www.rultor.com"><img src="http://doc.rultor.com/images/logo.svg" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p>Now it’s time to see how it all works. Create a new ticket in the GitHub issue tracker, and post something like this into it (read more about <a href="http://doc.rultor.com/basics.html">Rultor commands</a>):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>@rultor release, tag is `0.1`</code></pre></figure><p>You will get a response in a few seconds. The rest will be done by Rultor.</p><p>Enjoy :)</p><p>BTW, if something doesn’t work as I’ve explained, don’t hesitate to submit a ticket to the <a href="https://github.com/yegor256/rultor/issues">Rultor issue tracker</a>. I will try to help you.</p><p>PS. I would also recommend to versionalize artifacts through <code>MANIFEST.MF</code> and use <a href="/2014/07/03/how-to-read-manifest-mf.html">jcabi-manifests</a> to read them later.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?23bb3130b4f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="&lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/logo.svg&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;When I explain how &lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor&lt;/a&gt; automates deployment/release processes, very often I hear something like:&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;But I already have a script that deploys everything automatically.&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;This response is very common, so I decided to summarize my three main arguments for automated Rultor deployment/release processes in one article: 1) isolated docker containers, 2) visibility of logs and 3) security of credentials.&lt;/p&gt; &lt;p&gt;Read about them and see what Rultor gives you on top of &lt;strong&gt;your existing&lt;/strong&gt; deployment script(s).&lt;/p&gt; &lt;!--more--&gt; &lt;figure class=&quot;jb_picture&quot;&gt;&lt;img itemprop=&quot;image&quot; alt=&quot;Charlie and the Chocolate Factory (2005) by Tim Burton&quot; src=&quot;/images/2014/09/charlie-and-chocolate-factory-father.png&quot; longdesc=&quot;#2ee88f79&quot; /&gt;&lt;figcaption id=&quot;2ee88f79&quot;&gt;Charlie and the Chocolate Factory (2005) by Tim Burton&lt;/figcaption&gt;&lt;/figure&gt; &lt;p&gt;Before we start with the arguments, let me emphasize that Rultor is a useful interface to your custom scripts. When you decide to automate deployment with Rultor, you don’t throw away any of your existing scripts. You just teach Rultor how to call them.&lt;/p&gt; &lt;h2 id=&quot;isolated-docker-containers&quot;&gt;Isolated Docker Containers&lt;/h2&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=NflR7DKwxDY&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/NflR7DKwxDY/mqdefault.jpg&quot; alt=&quot;YouTube video #NflR7DKwxDY&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Deployment Scripts Are Dead. Meet Rultor.; 26 May 2016.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;The first advantage you get once you start calling your deployment scripts from Rultor is the &lt;a href=&quot;/2014/07/29/docker-in-rultor.html&quot;&gt;usage of Docker&lt;/a&gt;. I’m sure you know what &lt;a href=&quot;http://www.docker.io&quot;&gt;Docker&lt;/a&gt; is, but for those who don’t—it is a manager of virtual Linux “machines.” It’s a command line script that you call when you need to run some script in a new virtual machine (aka “container”). Docker starts the container almost immediately and runs your script. The beauty of Docker is that every container is a perfectly isolated Linux environment, with its own file system, memory, processes, etc.&lt;/p&gt; &lt;p&gt;When you tell Rultor to run your deployment script, it starts a new Docker container and runs your script there. But what benefit does this give me, you ask?&lt;/p&gt; &lt;p&gt;The main benefit is that the container gets destroyed right after your script is done. This means that you can do all pre-configuration inside the container without any fear of conflict with your main working platform. Let me give an example.&lt;/p&gt; &lt;p&gt;I’m developing on MacBook, where I install and remove packages which I need for development. At the same time, I have a project that, in order to be deployed, requires PHP 5.3, MySQL 5.6, Phing, PHPUnit, PHPCS and xdebug. Every MacOS version needs to be configured specifically to get these applications up and running, and it’s a time-consuming job.&lt;/p&gt; &lt;p&gt;I can change laptops, and I can change MacOS versions, but the project stays the same. It still requires the same set of packages in order to run its deployment script successfully. And the project is not in active development any more. I simply don’t need these packages for my day-to-day work, since I’m working with Java more now. But, when I need to make a minor fix to that PHP project and deploy it, I have to install all the required PHP packages and configure them. Only after that can I deploy that minor fix.&lt;/p&gt; &lt;p&gt;It is annoying, to say the least.&lt;/p&gt; &lt;p&gt;Docker gives me the ability to automate all of this together. My &lt;strong&gt;existing&lt;/strong&gt; deployment script will get a preamble, which will install and configure all necessary PHP-related packages in a clean Ubuntu container. This preamble will be executed on every run of my deployment script, &lt;strong&gt;inside&lt;/strong&gt; a Docker container. For example, it may look like this:&lt;/p&gt; &lt;p&gt;My deployment script looked like this before I started to use Rultor:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;#!/bin/bash&lt;/span&gt; phing &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt; git ftp push --user &lt;span class=&quot;s2&quot;&gt;&amp;quot;..&amp;quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt; --passwd &lt;span class=&quot;s2&quot;&gt;&amp;quot;..&amp;quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt; --syncroot php/src &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt; ftp://ftp.example.com/&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Just two lines. The first one is a full run of unit tests. The second one is an FTP deployment to the production server. Very simple. But this script will only work if PHP 5.3, MySQL, Phing, xdebug, PHPCS and PHPUnit are installed. Again, it’s a lot of work to install and configure them every time I upgrade my MacOS or change a laptop.&lt;/p&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=_61CuGhyv-o&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/_61CuGhyv-o/mqdefault.jpg&quot; alt=&quot;YouTube video #_61CuGhyv-o&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Practical Example of a One-Click Release; 15 November 2016.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;Needless to say, that if/when someone joins the project and tries to run my scripts, he/she will have to do this pre-installation work again.&lt;/p&gt; &lt;p&gt;So, here is a new script, which I’m using now. It is being executed inside a new Docker container, every time:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;#!/bin/bash&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# First, we install all prerequisites&lt;/span&gt; sudo apt-get install -y php5 php5-mysql mysql sudo apt-get install php-pear sudo pear channel-discover pear.phpunit.de sudo pear install phpunit/PHPUnit sudo pear install PHP_CodeSniffer sudo pecl install xdebug sudo pear channel-discover pear.phing.info sudo pear install phing/phing &lt;span class=&quot;c1&quot;&gt;# And now the same script I had before&lt;/span&gt; phing &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt; git ftp push --user &lt;span class=&quot;s2&quot;&gt;&amp;quot;..&amp;quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt; --passwd &lt;span class=&quot;s2&quot;&gt;&amp;quot;..&amp;quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt; --syncroot php/src &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt; ftp://ftp.example.com/&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Obviously, running this script on my MacBook (without virtualization) would cause a lot of trouble. Well, I don’t even have &lt;code&gt;apt-get&lt;/code&gt; here :)&lt;/p&gt; &lt;p&gt;Thus, the first benefit that Rultor gives you is an isolation of your deployment script in its own virtual environment. We have this mostly thanks to Docker.&lt;/p&gt; &lt;h2 id=&quot;visibility-of-logs&quot;&gt;Visibility of Logs&lt;/h2&gt; &lt;p&gt;Traditionally, we keep deployment scripts in some &lt;code&gt;~/deploy&lt;/code&gt; directory and run them with a magic set of parameters. In a small project, you do this yourself and this directory is on your own laptop. In a bigger project, there is a “deployment” server, that has that magic directory with a set of scripts that can be executed only by a few trusted senior developers. I’ve seen this setup many times.&lt;/p&gt; &lt;p&gt;The biggest issue here is traceability. It’s almost impossible to find out who deployed what and why some particular deployment failed. The senior deployment gurus simply SSH to the server and run those magic scripts with magic parameters. Logs are usually lost and problem tracking is very difficult or impossible.&lt;/p&gt; &lt;p&gt;Rultor offers something different. With Rultor, there is no SSH access to deployment scripts any more. All scripts stay in the &lt;code&gt;.rultor.yml&lt;/code&gt; configuration file, and you start them by posting messages in your issue tracking system (for example GitHub, JIRA or Trac). Rultor runs the script and publishes its full log right to your ticket. The log stays with your project forever. You can always get back to the ticket you were working with and check why deployment failed and what instructions were actually executed.&lt;/p&gt; &lt;p&gt;For example, check out this GitHub issue, where I was deploying a new version of Rultor itself, and failed a few times: &lt;a href=&quot;https://github.com/yegor256/rultor/issues/563&quot;&gt;yegor256/rultor#563&lt;/a&gt;. All my failed attempts are protocolled. I can always get back to them and investigate. For a big project this information is vital.&lt;/p&gt; &lt;p&gt;Thus, the second benefit of Rultor versus a standalone deployment script is visibility of every single operation.&lt;/p&gt; &lt;h2 id=&quot;security-of-credentials&quot;&gt;Security of Credentials&lt;/h2&gt; &lt;p&gt;When you have a custom script sitting in your laptop or in that secret team deployment server, your production credentials stay close to it. There is just no other way. If your software works with a database, it has to know login credentials (user name, password, DB name, port number, etc.). Well, in the worst case, some people just hard code that information right into the source code. We aren’t even going to discuss this case, that’s how bad it is.&lt;/p&gt; &lt;p&gt;But let’s say you separate your DB credentials from the source code. You will have something like a &lt;code&gt;db.properties&lt;/code&gt; or &lt;code&gt;db.ini&lt;/code&gt; file, which will be attached to the application right before deployment. You can also keep that file directly in the production server, which is even better, but not always possible, especially with PaaS deployments, for example.&lt;/p&gt; &lt;p&gt;A similar problem exists with deployments of artifacts to repositories. Say, you’re regularly deploying to RubyGems.org. Your &lt;code&gt;~/.gem/credentials&lt;/code&gt; will contain your secret API key.&lt;/p&gt; &lt;p&gt;So, very often, your deployment scripts are accompanied by some files with sensitive and secure information. And these files have this information in a plain, open format. No encryption, no protection. Just user names, passwords, codes and tokens in plain text.&lt;/p&gt; &lt;p&gt;Why is this bad? Well, for a single developer with a single laptop this doesn’t sound like a problem. Although, I don’t like the idea of losing a laptop somewhere in an airport with all credentials open and ready to be used. You may argue that there are disc protection tools, like FileVault for MacOS or BestCrypt for Windows. Yes, maybe.&lt;/p&gt; &lt;p&gt;But let’s see what happens when we have a team of developers, working together and sharing those deployment scripts &lt;strong&gt;and&lt;/strong&gt; files with credentials. Once you give access to your deployment scripts to a new member of the team, you have to share all that sensitive data. There is just no way around it. In order to use the scripts he/she has to be able to open files with credentials.&lt;/p&gt; &lt;p&gt;This is a problem, if you care about the security of your data.&lt;/p&gt; &lt;p&gt;Rultor solves this problem by offering an on-the-fly GPG decryption of your sensitive data, right before they are used by your deployment scripts. In the &lt;code&gt;.rultor.yml&lt;/code&gt; configuration file you just say:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;decrypt: db.ini: &amp;quot;repo/db.ini.asc&amp;quot; deploy: script: ftp put db.ini production&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Then, you encrypt your &lt;code&gt;db.ini&lt;/code&gt; using a Rultor GPG key, and fearlessly commit &lt;code&gt;db.ini.asc&lt;/code&gt; to the repository. Nobody will be able to open and read that file, except the Rultor server itself, right before running the deployment script.&lt;/p&gt; &lt;p&gt;Thus, the third benefit of Rultor versus a standalone deployment script is proper security of sensitive data.&lt;/p&gt; " /> <meta name="keywords" content="next, path, output, content, previous, url, relative_path, id, collection, excerpt, draft, categories, layout, title, date, tags, description, keywords, image, jb_picture, slug, ext" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-09-11 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Deployment Script vs. Rultor"/> <meta name="twitter:description" property="og:description" content="&lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/logo.svg&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;When I explain how &lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor&lt;/a&gt; automates deployment/release processes, very often I hear something like:&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;But I already have a script that deploys everything automatically.&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;This response is very common, so I decided to summarize my three main arguments for automated Rultor deployment/release processes in one article: 1) isolated docker containers, 2) visibility of logs and 3) security of credentials.&lt;/p&gt; &lt;p&gt;Read about them and see what Rultor gives you on top of &lt;strong&gt;your existing&lt;/strong&gt; deployment script(s).&lt;/p&gt; &lt;!--more--&gt; &lt;figure class=&quot;jb_picture&quot;&gt;&lt;img itemprop=&quot;image&quot; alt=&quot;Charlie and the Chocolate Factory (2005) by Tim Burton&quot; src=&quot;/images/2014/09/charlie-and-chocolate-factory-father.png&quot; longdesc=&quot;#2ee88f79&quot; /&gt;&lt;figcaption id=&quot;2ee88f79&quot;&gt;Charlie and the Chocolate Factory (2005) by Tim Burton&lt;/figcaption&gt;&lt;/figure&gt; &lt;p&gt;Before we start with the arguments, let me emphasize that Rultor is a useful interface to your custom scripts. When you decide to automate deployment with Rultor, you don’t throw away any of your existing scripts. You just teach Rultor how to call them.&lt;/p&gt; &lt;h2 id=&quot;isolated-docker-containers&quot;&gt;Isolated Docker Containers&lt;/h2&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=NflR7DKwxDY&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/NflR7DKwxDY/mqdefault.jpg&quot; alt=&quot;YouTube video #NflR7DKwxDY&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Deployment Scripts Are Dead. Meet Rultor.; 26 May 2016.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;The first advantage you get once you start calling your deployment scripts from Rultor is the &lt;a href=&quot;/2014/07/29/docker-in-rultor.html&quot;&gt;usage of Docker&lt;/a&gt;. I’m sure you know what &lt;a href=&quot;http://www.docker.io&quot;&gt;Docker&lt;/a&gt; is, but for those who don’t—it is a manager of virtual Linux “machines.” It’s a command line script that you call when you need to run some script in a new virtual machine (aka “container”). Docker starts the container almost immediately and runs your script. The beauty of Docker is that every container is a perfectly isolated Linux environment, with its own file system, memory, processes, etc.&lt;/p&gt; &lt;p&gt;When you tell Rultor to run your deployment script, it starts a new Docker container and runs your script there. But what benefit does this give me, you ask?&lt;/p&gt; &lt;p&gt;The main benefit is that the container gets destroyed right after your script is done. This means that you can do all pre-configuration inside the container without any fear of conflict with your main working platform. Let me give an example.&lt;/p&gt; &lt;p&gt;I’m developing on MacBook, where I install and remove packages which I need for development. At the same time, I have a project that, in order to be deployed, requires PHP 5.3, MySQL 5.6, Phing, PHPUnit, PHPCS and xdebug. Every MacOS version needs to be configured specifically to get these applications up and running, and it’s a time-consuming job.&lt;/p&gt; &lt;p&gt;I can change laptops, and I can change MacOS versions, but the project stays the same. It still requires the same set of packages in order to run its deployment script successfully. And the project is not in active development any more. I simply don’t need these packages for my day-to-day work, since I’m working with Java more now. But, when I need to make a minor fix to that PHP project and deploy it, I have to install all the required PHP packages and configure them. Only after that can I deploy that minor fix.&lt;/p&gt; &lt;p&gt;It is annoying, to say the least.&lt;/p&gt; &lt;p&gt;Docker gives me the ability to automate all of this together. My &lt;strong&gt;existing&lt;/strong&gt; deployment script will get a preamble, which will install and configure all necessary PHP-related packages in a clean Ubuntu container. This preamble will be executed on every run of my deployment script, &lt;strong&gt;inside&lt;/strong&gt; a Docker container. For example, it may look like this:&lt;/p&gt; &lt;p&gt;My deployment script looked like this before I started to use Rultor:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;#!/bin/bash&lt;/span&gt; phing &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt; git ftp push --user &lt;span class=&quot;s2&quot;&gt;&amp;quot;..&amp;quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt; --passwd &lt;span class=&quot;s2&quot;&gt;&amp;quot;..&amp;quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt; --syncroot php/src &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt; ftp://ftp.example.com/&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Just two lines. The first one is a full run of unit tests. The second one is an FTP deployment to the production server. Very simple. But this script will only work if PHP 5.3, MySQL, Phing, xdebug, PHPCS and PHPUnit are installed. Again, it’s a lot of work to install and configure them every time I upgrade my MacOS or change a laptop.&lt;/p&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=_61CuGhyv-o&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/_61CuGhyv-o/mqdefault.jpg&quot; alt=&quot;YouTube video #_61CuGhyv-o&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Practical Example of a One-Click Release; 15 November 2016.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;Needless to say, that if/when someone joins the project and tries to run my scripts, he/she will have to do this pre-installation work again.&lt;/p&gt; &lt;p&gt;So, here is a new script, which I’m using now. It is being executed inside a new Docker container, every time:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;#!/bin/bash&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# First, we install all prerequisites&lt;/span&gt; sudo apt-get install -y php5 php5-mysql mysql sudo apt-get install php-pear sudo pear channel-discover pear.phpunit.de sudo pear install phpunit/PHPUnit sudo pear install PHP_CodeSniffer sudo pecl install xdebug sudo pear channel-discover pear.phing.info sudo pear install phing/phing &lt;span class=&quot;c1&quot;&gt;# And now the same script I had before&lt;/span&gt; phing &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt; git ftp push --user &lt;span class=&quot;s2&quot;&gt;&amp;quot;..&amp;quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt; --passwd &lt;span class=&quot;s2&quot;&gt;&amp;quot;..&amp;quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt; --syncroot php/src &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt; ftp://ftp.example.com/&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Obviously, running this script on my MacBook (without virtualization) would cause a lot of trouble. Well, I don’t even have &lt;code&gt;apt-get&lt;/code&gt; here :)&lt;/p&gt; &lt;p&gt;Thus, the first benefit that Rultor gives you is an isolation of your deployment script in its own virtual environment. We have this mostly thanks to Docker.&lt;/p&gt; &lt;h2 id=&quot;visibility-of-logs&quot;&gt;Visibility of Logs&lt;/h2&gt; &lt;p&gt;Traditionally, we keep deployment scripts in some &lt;code&gt;~/deploy&lt;/code&gt; directory and run them with a magic set of parameters. In a small project, you do this yourself and this directory is on your own laptop. In a bigger project, there is a “deployment” server, that has that magic directory with a set of scripts that can be executed only by a few trusted senior developers. I’ve seen this setup many times.&lt;/p&gt; &lt;p&gt;The biggest issue here is traceability. It’s almost impossible to find out who deployed what and why some particular deployment failed. The senior deployment gurus simply SSH to the server and run those magic scripts with magic parameters. Logs are usually lost and problem tracking is very difficult or impossible.&lt;/p&gt; &lt;p&gt;Rultor offers something different. With Rultor, there is no SSH access to deployment scripts any more. All scripts stay in the &lt;code&gt;.rultor.yml&lt;/code&gt; configuration file, and you start them by posting messages in your issue tracking system (for example GitHub, JIRA or Trac). Rultor runs the script and publishes its full log right to your ticket. The log stays with your project forever. You can always get back to the ticket you were working with and check why deployment failed and what instructions were actually executed.&lt;/p&gt; &lt;p&gt;For example, check out this GitHub issue, where I was deploying a new version of Rultor itself, and failed a few times: &lt;a href=&quot;https://github.com/yegor256/rultor/issues/563&quot;&gt;yegor256/rultor#563&lt;/a&gt;. All my failed attempts are protocolled. I can always get back to them and investigate. For a big project this information is vital.&lt;/p&gt; &lt;p&gt;Thus, the second benefit of Rultor versus a standalone deployment script is visibility of every single operation.&lt;/p&gt; &lt;h2 id=&quot;security-of-credentials&quot;&gt;Security of Credentials&lt;/h2&gt; &lt;p&gt;When you have a custom script sitting in your laptop or in that secret team deployment server, your production credentials stay close to it. There is just no other way. If your software works with a database, it has to know login credentials (user name, password, DB name, port number, etc.). Well, in the worst case, some people just hard code that information right into the source code. We aren’t even going to discuss this case, that’s how bad it is.&lt;/p&gt; &lt;p&gt;But let’s say you separate your DB credentials from the source code. You will have something like a &lt;code&gt;db.properties&lt;/code&gt; or &lt;code&gt;db.ini&lt;/code&gt; file, which will be attached to the application right before deployment. You can also keep that file directly in the production server, which is even better, but not always possible, especially with PaaS deployments, for example.&lt;/p&gt; &lt;p&gt;A similar problem exists with deployments of artifacts to repositories. Say, you’re regularly deploying to RubyGems.org. Your &lt;code&gt;~/.gem/credentials&lt;/code&gt; will contain your secret API key.&lt;/p&gt; &lt;p&gt;So, very often, your deployment scripts are accompanied by some files with sensitive and secure information. And these files have this information in a plain, open format. No encryption, no protection. Just user names, passwords, codes and tokens in plain text.&lt;/p&gt; &lt;p&gt;Why is this bad? Well, for a single developer with a single laptop this doesn’t sound like a problem. Although, I don’t like the idea of losing a laptop somewhere in an airport with all credentials open and ready to be used. You may argue that there are disc protection tools, like FileVault for MacOS or BestCrypt for Windows. Yes, maybe.&lt;/p&gt; &lt;p&gt;But let’s see what happens when we have a team of developers, working together and sharing those deployment scripts &lt;strong&gt;and&lt;/strong&gt; files with credentials. Once you give access to your deployment scripts to a new member of the team, you have to share all that sensitive data. There is just no way around it. In order to use the scripts he/she has to be able to open files with credentials.&lt;/p&gt; &lt;p&gt;This is a problem, if you care about the security of your data.&lt;/p&gt; &lt;p&gt;Rultor solves this problem by offering an on-the-fly GPG decryption of your sensitive data, right before they are used by your deployment scripts. In the &lt;code&gt;.rultor.yml&lt;/code&gt; configuration file you just say:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;decrypt: db.ini: &amp;quot;repo/db.ini.asc&amp;quot; deploy: script: ftp put db.ini production&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Then, you encrypt your &lt;code&gt;db.ini&lt;/code&gt; using a Rultor GPG key, and fearlessly commit &lt;code&gt;db.ini.asc&lt;/code&gt; to the repository. Nobody will be able to open and read that file, except the Rultor server itself, right before running the deployment script.&lt;/p&gt; &lt;p&gt;Thus, the third benefit of Rultor versus a standalone deployment script is proper security of sensitive data.&lt;/p&gt; "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?23bb3130b4f"/> <link rel="apple-touch-icon" href="/favicon.ico?23bb3130b4f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?23bb3130b4f"/> <link rel="stylesheet" href="/css/icons.css?23bb3130b4f"/> <link rel="canonical" href="https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.amp.html" /> <title>Deployment Script vs. Rultor </title> <meta name='og:image' content='https://www.yegor256.com/images/2014/09/charlie-and-chocolate-factory-father.png'/><meta name='twitter:image' content='https://www.yegor256.com/images/2014/09/charlie-and-chocolate-factory-father.png'/><meta name='og:image:width' content='850'/> <meta name='twitter:image:width' content='850'/><meta name='og:image:height' content='474'/> <meta name='twitter:image:height' content='474'/><meta name='twitter:card' content='summary'/><meta name='twitter:image:alt' content='Charlie and the Chocolate Factory (2005) by Tim Burton'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /2014/09/11/deployment-script-vs-rultor.html><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /2014/09/11/deployment-script-vs-rultor.html><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /2014/09/11/deployment-script-vs-rultor.html><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /2014/09/11/deployment-script-vs-rultor.html><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /2014/09/11/deployment-script-vs-rultor.html><a href="/books.html" title="The books I wrote">Books</a></li> <li /2014/09/11/deployment-script-vs-rultor.html><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /2014/09/11/deployment-script-vs-rultor.html><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /2014/09/11/deployment-script-vs-rultor.html class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /2014/09/11/deployment-script-vs-rultor.html><a href="/award.html" title="Software quality award">Award</a></li> <li /2014/09/11/deployment-script-vs-rultor.html><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /2014/09/11/deployment-script-vs-rultor.html><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /2014/09/11/deployment-script-vs-rultor.html><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html</code></p><h1 itemprop="name headline mainEntityOfPage">Deployment Script vs. Rultor</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-09-11T00:00:00+00:00"> 11 September 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><figure class="badge"><a href="http://www.rultor.com"><img src="http://doc.rultor.com/images/logo.svg" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p>When I explain how <a href="http://www.rultor.com">Rultor</a> automates deployment/release processes, very often I hear something like:</p><blockquote><p>But I already have a script that deploys everything automatically.</p></blockquote><p>This response is very common, so I decided to summarize my three main arguments for automated Rultor deployment/release processes in one article: 1) isolated docker containers, 2) visibility of logs and 3) security of credentials.</p><p>Read about them and see what Rultor gives you on top of <strong>your existing</strong> deployment script(s).</p><figure class="jb_picture"><img itemprop="image" alt="Charlie and the Chocolate Factory (2005) by Tim Burton" src="/images/2014/09/charlie-and-chocolate-factory-father.png" longdesc="#2ee88f79" /><figcaption id="2ee88f79">Charlie and the Chocolate Factory (2005) by Tim Burton</figcaption></figure><p>Before we start with the arguments, let me emphasize that Rultor is a useful interface to your custom scripts. When you decide to automate deployment with Rultor, you don’t throw away any of your existing scripts. You just teach Rultor how to call them.</p><h2 id="isolated-docker-containers">Isolated Docker Containers</h2><aside class="youtube"> <a href="https://www.youtube.com/watch?v=NflR7DKwxDY"><div class="box"> <img src="https://i.ytimg.com/vi/NflR7DKwxDY/mqdefault.jpg" alt="YouTube video #NflR7DKwxDY" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Deployment Scripts Are Dead. Meet Rultor.; 26 May 2016.</div></aside><p>The first advantage you get once you start calling your deployment scripts from Rultor is the <a href="/2014/07/29/docker-in-rultor.html">usage of Docker</a>. I’m sure you know what <a href="http://www.docker.io">Docker</a> is, but for those who don’t—it is a manager of virtual Linux “machines.” It’s a command line script that you call when you need to run some script in a new virtual machine (aka “container”). Docker starts the container almost immediately and runs your script. The beauty of Docker is that every container is a perfectly isolated Linux environment, with its own file system, memory, processes, etc.</p><p>When you tell Rultor to run your deployment script, it starts a new Docker container and runs your script there. But what benefit does this give me, you ask?</p><p>The main benefit is that the container gets destroyed right after your script is done. This means that you can do all pre-configuration inside the container without any fear of conflict with your main working platform. Let me give an example.</p><p>I’m developing on MacBook, where I install and remove packages which I need for development. At the same time, I have a project that, in order to be deployed, requires PHP 5.3, MySQL 5.6, Phing, PHPUnit, PHPCS and xdebug. Every MacOS version needs to be configured specifically to get these applications up and running, and it’s a time-consuming job.</p><p>I can change laptops, and I can change MacOS versions, but the project stays the same. It still requires the same set of packages in order to run its deployment script successfully. And the project is not in active development any more. I simply don’t need these packages for my day-to-day work, since I’m working with Java more now. But, when I need to make a minor fix to that PHP project and deploy it, I have to install all the required PHP packages and configure them. Only after that can I deploy that minor fix.</p><p>It is annoying, to say the least.</p><p>Docker gives me the ability to automate all of this together. My <strong>existing</strong> deployment script will get a preamble, which will install and configure all necessary PHP-related packages in a clean Ubuntu container. This preamble will be executed on every run of my deployment script, <strong>inside</strong> a Docker container. For example, it may look like this:</p><p>My deployment script looked like this before I started to use Rultor:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span><span class="ch">#!/bin/bash</span>
phing <span class="nb">test</span>
git ftp push --user <span class="s2">&quot;..&quot;</span> <span class="se">\</span>
  --passwd <span class="s2">&quot;..&quot;</span> <span class="se">\</span>
  --syncroot php/src <span class="se">\</span>
  ftp://ftp.example.com/</code></pre></figure><p>Just two lines. The first one is a full run of unit tests. The second one is an FTP deployment to the production server. Very simple. But this script will only work if PHP 5.3, MySQL, Phing, xdebug, PHPCS and PHPUnit are installed. Again, it’s a lot of work to install and configure them every time I upgrade my MacOS or change a laptop.</p><aside class="youtube"> <a href="https://www.youtube.com/watch?v=_61CuGhyv-o"><div class="box"> <img src="https://i.ytimg.com/vi/_61CuGhyv-o/mqdefault.jpg" alt="YouTube video #_61CuGhyv-o" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Practical Example of a One-Click Release; 15 November 2016.</div></aside><p>Needless to say, that if/when someone joins the project and tries to run my scripts, he/she will have to do this pre-installation work again.</p><p>So, here is a new script, which I’m using now. It is being executed inside a new Docker container, every time:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span><span class="ch">#!/bin/bash</span>
<span class="c1"># First, we install all prerequisites</span>
sudo apt-get install -y php5 php5-mysql mysql
sudo apt-get install php-pear
sudo pear channel-discover pear.phpunit.de
sudo pear install phpunit/PHPUnit
sudo pear install PHP_CodeSniffer
sudo pecl install xdebug
sudo pear channel-discover pear.phing.info
sudo pear install phing/phing
<span class="c1"># And now the same script I had before</span>
phing <span class="nb">test</span>
git ftp push --user <span class="s2">&quot;..&quot;</span> <span class="se">\</span>
  --passwd <span class="s2">&quot;..&quot;</span> <span class="se">\</span>
  --syncroot php/src <span class="se">\</span>
  ftp://ftp.example.com/</code></pre></figure><p>Obviously, running this script on my MacBook (without virtualization) would cause a lot of trouble. Well, I don’t even have <code>apt-get</code> here :)</p><p>Thus, the first benefit that Rultor gives you is an isolation of your deployment script in its own virtual environment. We have this mostly thanks to Docker.</p><h2 id="visibility-of-logs">Visibility of Logs</h2><p>Traditionally, we keep deployment scripts in some <code>~/deploy</code> directory and run them with a magic set of parameters. In a small project, you do this yourself and this directory is on your own laptop. In a bigger project, there is a “deployment” server, that has that magic directory with a set of scripts that can be executed only by a few trusted senior developers. I’ve seen this setup many times.</p><p>The biggest issue here is traceability. It’s almost impossible to find out who deployed what and why some particular deployment failed. The senior deployment gurus simply SSH to the server and run those magic scripts with magic parameters. Logs are usually lost and problem tracking is very difficult or impossible.</p><p>Rultor offers something different. With Rultor, there is no SSH access to deployment scripts any more. All scripts stay in the <code>.rultor.yml</code> configuration file, and you start them by posting messages in your issue tracking system (for example GitHub, JIRA or Trac). Rultor runs the script and publishes its full log right to your ticket. The log stays with your project forever. You can always get back to the ticket you were working with and check why deployment failed and what instructions were actually executed.</p><p>For example, check out this GitHub issue, where I was deploying a new version of Rultor itself, and failed a few times: <a href="https://github.com/yegor256/rultor/issues/563">yegor256/rultor#563</a>. All my failed attempts are protocolled. I can always get back to them and investigate. For a big project this information is vital.</p><p>Thus, the second benefit of Rultor versus a standalone deployment script is visibility of every single operation.</p><h2 id="security-of-credentials">Security of Credentials</h2><p>When you have a custom script sitting in your laptop or in that secret team deployment server, your production credentials stay close to it. There is just no other way. If your software works with a database, it has to know login credentials (user name, password, DB name, port number, etc.). Well, in the worst case, some people just hard code that information right into the source code. We aren’t even going to discuss this case, that’s how bad it is.</p><p>But let’s say you separate your DB credentials from the source code. You will have something like a <code>db.properties</code> or <code>db.ini</code> file, which will be attached to the application right before deployment. You can also keep that file directly in the production server, which is even better, but not always possible, especially with PaaS deployments, for example.</p><p>A similar problem exists with deployments of artifacts to repositories. Say, you’re regularly deploying to RubyGems.org. Your <code>~/.gem/credentials</code> will contain your secret API key.</p><p>So, very often, your deployment scripts are accompanied by some files with sensitive and secure information. And these files have this information in a plain, open format. No encryption, no protection. Just user names, passwords, codes and tokens in plain text.</p><p>Why is this bad? Well, for a single developer with a single laptop this doesn’t sound like a problem. Although, I don’t like the idea of losing a laptop somewhere in an airport with all credentials open and ready to be used. You may argue that there are disc protection tools, like FileVault for MacOS or BestCrypt for Windows. Yes, maybe.</p><p>But let’s see what happens when we have a team of developers, working together and sharing those deployment scripts <strong>and</strong> files with credentials. Once you give access to your deployment scripts to a new member of the team, you have to share all that sensitive data. There is just no way around it. In order to use the scripts he/she has to be able to open files with credentials.</p><p>This is a problem, if you care about the security of your data.</p><p>Rultor solves this problem by offering an on-the-fly GPG decryption of your sensitive data, right before they are used by your deployment scripts. In the <code>.rultor.yml</code> configuration file you just say:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>decrypt:
  db.ini: &quot;repo/db.ini.asc&quot;
deploy:
  script:
    ftp put db.ini production</code></pre></figure><p>Then, you encrypt your <code>db.ini</code> using a Rultor GPG key, and fearlessly commit <code>db.ini.asc</code> to the repository. Nobody will be able to open and read that file, except the Rultor server itself, right before running the deployment script.</p><p>Thus, the third benefit of Rultor versus a standalone deployment script is proper security of sensitive data.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html&amp;text=Deployment+Script+vs.+Rultor" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html%3F2014-36&amp;title=Deployment+Script+vs.+Rultor" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/09/11/deployment-script-vs-rultor.html%3F2014-36&amp;t=Deployment+Script+vs.+Rultor" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div > <figure class="badge"><a href="http://www.rultor.com"><img src="http://doc.rultor.com/images/logo.svg" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p>When I explain how <a href="http://www.rultor.com">Rultor</a> automates deployment/release processes, very often I hear something like:</p><blockquote><p>But I already have a script that deploys everything automatically.</p></blockquote><p>This response is very common, so I decided to summarize my three main arguments for automated Rultor deployment/release processes in one article: 1) isolated docker containers, 2) visibility of logs and 3) security of credentials.</p><p>Read about them and see what Rultor gives you on top of <strong>your existing</strong> deployment script(s).</p><figure class="jb_picture"><img itemprop="image" alt="Charlie and the Chocolate Factory (2005) by Tim Burton" src="/images/2014/09/charlie-and-chocolate-factory-father.png" longdesc="#2ee88f79" /><figcaption id="2ee88f79">Charlie and the Chocolate Factory (2005) by Tim Burton</figcaption></figure><p>Before we start with the arguments, let me emphasize that Rultor is a useful interface to your custom scripts. When you decide to automate deployment with Rultor, you don’t throw away any of your existing scripts. You just teach Rultor how to call them.</p><h2 id="isolated-docker-containers">Isolated Docker Containers</h2><aside class="youtube"> <a href="https://www.youtube.com/watch?v=NflR7DKwxDY"><div class="box"> <img src="https://i.ytimg.com/vi/NflR7DKwxDY/mqdefault.jpg" alt="YouTube video #NflR7DKwxDY" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Deployment Scripts Are Dead. Meet Rultor.; 26 May 2016.</div></aside><p>The first advantage you get once you start calling your deployment scripts from Rultor is the <a href="/2014/07/29/docker-in-rultor.html">usage of Docker</a>. I’m sure you know what <a href="http://www.docker.io">Docker</a> is, but for those who don’t—it is a manager of virtual Linux “machines.” It’s a command line script that you call when you need to run some script in a new virtual machine (aka “container”). Docker starts the container almost immediately and runs your script. The beauty of Docker is that every container is a perfectly isolated Linux environment, with its own file system, memory, processes, etc.</p><p>When you tell Rultor to run your deployment script, it starts a new Docker container and runs your script there. But what benefit does this give me, you ask?</p><p>The main benefit is that the container gets destroyed right after your script is done. This means that you can do all pre-configuration inside the container without any fear of conflict with your main working platform. Let me give an example.</p><p>I’m developing on MacBook, where I install and remove packages which I need for development. At the same time, I have a project that, in order to be deployed, requires PHP 5.3, MySQL 5.6, Phing, PHPUnit, PHPCS and xdebug. Every MacOS version needs to be configured specifically to get these applications up and running, and it’s a time-consuming job.</p><p>I can change laptops, and I can change MacOS versions, but the project stays the same. It still requires the same set of packages in order to run its deployment script successfully. And the project is not in active development any more. I simply don’t need these packages for my day-to-day work, since I’m working with Java more now. But, when I need to make a minor fix to that PHP project and deploy it, I have to install all the required PHP packages and configure them. Only after that can I deploy that minor fix.</p><p>It is annoying, to say the least.</p><p>Docker gives me the ability to automate all of this together. My <strong>existing</strong> deployment script will get a preamble, which will install and configure all necessary PHP-related packages in a clean Ubuntu container. This preamble will be executed on every run of my deployment script, <strong>inside</strong> a Docker container. For example, it may look like this:</p><p>My deployment script looked like this before I started to use Rultor:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span><span class="ch">#!/bin/bash</span>
phing <span class="nb">test</span>
git ftp push --user <span class="s2">&quot;..&quot;</span> <span class="se">\</span>
  --passwd <span class="s2">&quot;..&quot;</span> <span class="se">\</span>
  --syncroot php/src <span class="se">\</span>
  ftp://ftp.example.com/</code></pre></figure><p>Just two lines. The first one is a full run of unit tests. The second one is an FTP deployment to the production server. Very simple. But this script will only work if PHP 5.3, MySQL, Phing, xdebug, PHPCS and PHPUnit are installed. Again, it’s a lot of work to install and configure them every time I upgrade my MacOS or change a laptop.</p><aside class="youtube"> <a href="https://www.youtube.com/watch?v=_61CuGhyv-o"><div class="box"> <img src="https://i.ytimg.com/vi/_61CuGhyv-o/mqdefault.jpg" alt="YouTube video #_61CuGhyv-o" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Practical Example of a One-Click Release; 15 November 2016.</div></aside><p>Needless to say, that if/when someone joins the project and tries to run my scripts, he/she will have to do this pre-installation work again.</p><p>So, here is a new script, which I’m using now. It is being executed inside a new Docker container, every time:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span><span class="ch">#!/bin/bash</span>
<span class="c1"># First, we install all prerequisites</span>
sudo apt-get install -y php5 php5-mysql mysql
sudo apt-get install php-pear
sudo pear channel-discover pear.phpunit.de
sudo pear install phpunit/PHPUnit
sudo pear install PHP_CodeSniffer
sudo pecl install xdebug
sudo pear channel-discover pear.phing.info
sudo pear install phing/phing
<span class="c1"># And now the same script I had before</span>
phing <span class="nb">test</span>
git ftp push --user <span class="s2">&quot;..&quot;</span> <span class="se">\</span>
  --passwd <span class="s2">&quot;..&quot;</span> <span class="se">\</span>
  --syncroot php/src <span class="se">\</span>
  ftp://ftp.example.com/</code></pre></figure><p>Obviously, running this script on my MacBook (without virtualization) would cause a lot of trouble. Well, I don’t even have <code>apt-get</code> here :)</p><p>Thus, the first benefit that Rultor gives you is an isolation of your deployment script in its own virtual environment. We have this mostly thanks to Docker.</p><h2 id="visibility-of-logs">Visibility of Logs</h2><p>Traditionally, we keep deployment scripts in some <code>~/deploy</code> directory and run them with a magic set of parameters. In a small project, you do this yourself and this directory is on your own laptop. In a bigger project, there is a “deployment” server, that has that magic directory with a set of scripts that can be executed only by a few trusted senior developers. I’ve seen this setup many times.</p><p>The biggest issue here is traceability. It’s almost impossible to find out who deployed what and why some particular deployment failed. The senior deployment gurus simply SSH to the server and run those magic scripts with magic parameters. Logs are usually lost and problem tracking is very difficult or impossible.</p><p>Rultor offers something different. With Rultor, there is no SSH access to deployment scripts any more. All scripts stay in the <code>.rultor.yml</code> configuration file, and you start them by posting messages in your issue tracking system (for example GitHub, JIRA or Trac). Rultor runs the script and publishes its full log right to your ticket. The log stays with your project forever. You can always get back to the ticket you were working with and check why deployment failed and what instructions were actually executed.</p><p>For example, check out this GitHub issue, where I was deploying a new version of Rultor itself, and failed a few times: <a href="https://github.com/yegor256/rultor/issues/563">yegor256/rultor#563</a>. All my failed attempts are protocolled. I can always get back to them and investigate. For a big project this information is vital.</p><p>Thus, the second benefit of Rultor versus a standalone deployment script is visibility of every single operation.</p><h2 id="security-of-credentials">Security of Credentials</h2><p>When you have a custom script sitting in your laptop or in that secret team deployment server, your production credentials stay close to it. There is just no other way. If your software works with a database, it has to know login credentials (user name, password, DB name, port number, etc.). Well, in the worst case, some people just hard code that information right into the source code. We aren’t even going to discuss this case, that’s how bad it is.</p><p>But let’s say you separate your DB credentials from the source code. You will have something like a <code>db.properties</code> or <code>db.ini</code> file, which will be attached to the application right before deployment. You can also keep that file directly in the production server, which is even better, but not always possible, especially with PaaS deployments, for example.</p><p>A similar problem exists with deployments of artifacts to repositories. Say, you’re regularly deploying to RubyGems.org. Your <code>~/.gem/credentials</code> will contain your secret API key.</p><p>So, very often, your deployment scripts are accompanied by some files with sensitive and secure information. And these files have this information in a plain, open format. No encryption, no protection. Just user names, passwords, codes and tokens in plain text.</p><p>Why is this bad? Well, for a single developer with a single laptop this doesn’t sound like a problem. Although, I don’t like the idea of losing a laptop somewhere in an airport with all credentials open and ready to be used. You may argue that there are disc protection tools, like FileVault for MacOS or BestCrypt for Windows. Yes, maybe.</p><p>But let’s see what happens when we have a team of developers, working together and sharing those deployment scripts <strong>and</strong> files with credentials. Once you give access to your deployment scripts to a new member of the team, you have to share all that sensitive data. There is just no way around it. In order to use the scripts he/she has to be able to open files with credentials.</p><p>This is a problem, if you care about the security of your data.</p><p>Rultor solves this problem by offering an on-the-fly GPG decryption of your sensitive data, right before they are used by your deployment scripts. In the <code>.rultor.yml</code> configuration file you just say:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>decrypt:
  db.ini: &quot;repo/db.ini.asc&quot;
deploy:
  script:
    ftp put db.ini production</code></pre></figure><p>Then, you encrypt your <code>db.ini</code> using a Rultor GPG key, and fearlessly commit <code>db.ini.asc</code> to the repository. Nobody will be able to open and read that file, except the Rultor server itself, right before running the deployment script.</p><p>Thus, the third benefit of Rultor versus a standalone deployment script is proper security of sensitive data.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?23bb3130b4f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="&lt;p&gt;When I release a new version of &lt;a href=&quot;https://github.com/yegor256/jekyll-github-deploy&quot;&gt;jgd&lt;/a&gt;, a Ruby gem, to RubyGems.org, it takes 30 seconds of my time. Here is how I released a bug fix for version 1.5.1, in &lt;a href=&quot;https://github.com/yegor256/jekyll-github-deploy/issues/6&quot;&gt;GitHub issue #6&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;unprintable&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/08/github-ticket-6.jpg&quot; itemprop=&quot;image&quot; style=&quot;width:600px;max-width:100%;&quot; alt=&quot;The figure&quot; /&gt;&lt;/figure&gt; &lt;p&gt;As you see, I gave a command to &lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor&lt;/a&gt;, and it released a new version to RubyGems. I didn’t do anything else.&lt;/p&gt; &lt;p&gt;Now let’s see how you can do the same. How you can configure your project so that the release of its new version to RubyGems.org takes just a few seconds of your time.&lt;/p&gt; &lt;!--more--&gt; &lt;p&gt;By the way, I assume that you’re hosting your project in GitHub. If not, this entire tutorial won’t work. If you are still not in GitHub, I would strongly recommend moving there.&lt;/p&gt; &lt;h2 id=&quot;create-rubygems-account&quot;&gt;Create RubyGems Account&lt;/h2&gt; &lt;p&gt;Create an account in &lt;a href=&quot;http://www.rubygems.org&quot;&gt;RubyGems.org&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;create-rubygemsyml&quot;&gt;Create &lt;code&gt;rubygems.yml&lt;/code&gt;&lt;/h2&gt; &lt;p&gt;Create a &lt;code&gt;rubygems.yml&lt;/code&gt; file (you may already have it as &lt;code&gt;~/.gem/credentials&lt;/code&gt;):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;:rubygems_api_key: d355d8940bb031bfe9acf03ed3da4c0d&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;You should get this API key from RubyGems. To find your API key, click on your user name when logged in to RubyGems.org and then click on “Edit Profile.”&lt;/p&gt; &lt;h2 id=&quot;encrypt-rubygemsyml&quot;&gt;Encrypt &lt;code&gt;rubygems.yml&lt;/code&gt;&lt;/h2&gt; &lt;p&gt;Now, encrypt &lt;code&gt;rubygems.yml&lt;/code&gt; with a &lt;a href=&quot;https://github.com/yegor256/rultor-remote&quot;&gt;rultor remote&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;$ gem install rultor $ rultor encrypt -p me/test rubygems.yml&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Instead of &lt;code&gt;me/test&lt;/code&gt; use the name of your GitHub project.&lt;/p&gt; &lt;p&gt;You will get a new file &lt;code&gt;rubygems.yml.asc&lt;/code&gt;. Add this file to the root directory of your project, commit and push. The file contains your secret information, but only the Rultor server can decrypt it.&lt;/p&gt; &lt;h2 id=&quot;prepare-gemspec&quot;&gt;Prepare Gemspec&lt;/h2&gt; &lt;p&gt;In your &lt;code&gt;gemspec&lt;/code&gt; file, make sure you use &lt;code&gt;1.0.snapshot&lt;/code&gt; as a version number:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# coding: utf-8&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Gem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Specification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;1.0.snapshot&amp;#39;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;This version name will be replaced by Rultor during deployment.&lt;/p&gt; &lt;h2 id=&quot;configure-rultor&quot;&gt;Configure Rultor&lt;/h2&gt; &lt;p&gt;Create a &lt;code&gt;.rultor.yml&lt;/code&gt; file in the root directory of your project:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;decrypt: rubygems.yml: &amp;quot;repo/rubygems.yml.asc&amp;quot; release: script: | rm -rf *.gem sed -i &amp;quot;s/1.0.snapshot/${tag}/g&amp;quot; foo.gemspec gem build foo.gemspec chmod 0600 /home/r/rubygems.yml gem push *.gem --config-file /home/r/rubygems.yml&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;In this example, replace &lt;code&gt;foo&lt;/code&gt; with the name of your gem.&lt;/p&gt; &lt;h2 id=&quot;run-it&quot;&gt;Run It!&lt;/h2&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/logo.svg&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;Now it’s time to see how it all works. Create a new ticket in the GitHub issue tracker, and post something like that into it (read more about &lt;a href=&quot;http://doc.rultor.com/basics.html&quot;&gt;Rultor commands&lt;/a&gt;):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;@rultor release, tag is `0.1`&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;You will get a response in a few seconds. The rest will be done by Rultor.&lt;/p&gt; &lt;p&gt;Enjoy :)&lt;/p&gt; &lt;p&gt;BTW, if something doesn’t work as I’ve explained, don’t hesitate to submit a ticket to &lt;a href=&quot;https://github.com/yegor256/rultor/issues&quot;&gt;Rultor issue tracker&lt;/a&gt;. I will try to help you.&lt;/p&gt; " /> <meta name="keywords" content="next, path, output, content, previous, url, relative_path, id, collection, excerpt, draft, categories, layout, title, date, tags, description, keywords, slug, ext" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-08-26 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="How to Publish to RubyGems, in One Click"/> <meta name="twitter:description" property="og:description" content="&lt;p&gt;When I release a new version of &lt;a href=&quot;https://github.com/yegor256/jekyll-github-deploy&quot;&gt;jgd&lt;/a&gt;, a Ruby gem, to RubyGems.org, it takes 30 seconds of my time. Here is how I released a bug fix for version 1.5.1, in &lt;a href=&quot;https://github.com/yegor256/jekyll-github-deploy/issues/6&quot;&gt;GitHub issue #6&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;unprintable&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/08/github-ticket-6.jpg&quot; itemprop=&quot;image&quot; style=&quot;width:600px;max-width:100%;&quot; alt=&quot;The figure&quot; /&gt;&lt;/figure&gt; &lt;p&gt;As you see, I gave a command to &lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor&lt;/a&gt;, and it released a new version to RubyGems. I didn’t do anything else.&lt;/p&gt; &lt;p&gt;Now let’s see how you can do the same. How you can configure your project so that the release of its new version to RubyGems.org takes just a few seconds of your time.&lt;/p&gt; &lt;!--more--&gt; &lt;p&gt;By the way, I assume that you’re hosting your project in GitHub. If not, this entire tutorial won’t work. If you are still not in GitHub, I would strongly recommend moving there.&lt;/p&gt; &lt;h2 id=&quot;create-rubygems-account&quot;&gt;Create RubyGems Account&lt;/h2&gt; &lt;p&gt;Create an account in &lt;a href=&quot;http://www.rubygems.org&quot;&gt;RubyGems.org&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;create-rubygemsyml&quot;&gt;Create &lt;code&gt;rubygems.yml&lt;/code&gt;&lt;/h2&gt; &lt;p&gt;Create a &lt;code&gt;rubygems.yml&lt;/code&gt; file (you may already have it as &lt;code&gt;~/.gem/credentials&lt;/code&gt;):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;:rubygems_api_key: d355d8940bb031bfe9acf03ed3da4c0d&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;You should get this API key from RubyGems. To find your API key, click on your user name when logged in to RubyGems.org and then click on “Edit Profile.”&lt;/p&gt; &lt;h2 id=&quot;encrypt-rubygemsyml&quot;&gt;Encrypt &lt;code&gt;rubygems.yml&lt;/code&gt;&lt;/h2&gt; &lt;p&gt;Now, encrypt &lt;code&gt;rubygems.yml&lt;/code&gt; with a &lt;a href=&quot;https://github.com/yegor256/rultor-remote&quot;&gt;rultor remote&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;$ gem install rultor $ rultor encrypt -p me/test rubygems.yml&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Instead of &lt;code&gt;me/test&lt;/code&gt; use the name of your GitHub project.&lt;/p&gt; &lt;p&gt;You will get a new file &lt;code&gt;rubygems.yml.asc&lt;/code&gt;. Add this file to the root directory of your project, commit and push. The file contains your secret information, but only the Rultor server can decrypt it.&lt;/p&gt; &lt;h2 id=&quot;prepare-gemspec&quot;&gt;Prepare Gemspec&lt;/h2&gt; &lt;p&gt;In your &lt;code&gt;gemspec&lt;/code&gt; file, make sure you use &lt;code&gt;1.0.snapshot&lt;/code&gt; as a version number:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# coding: utf-8&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Gem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Specification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;1.0.snapshot&amp;#39;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;This version name will be replaced by Rultor during deployment.&lt;/p&gt; &lt;h2 id=&quot;configure-rultor&quot;&gt;Configure Rultor&lt;/h2&gt; &lt;p&gt;Create a &lt;code&gt;.rultor.yml&lt;/code&gt; file in the root directory of your project:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;decrypt: rubygems.yml: &amp;quot;repo/rubygems.yml.asc&amp;quot; release: script: | rm -rf *.gem sed -i &amp;quot;s/1.0.snapshot/${tag}/g&amp;quot; foo.gemspec gem build foo.gemspec chmod 0600 /home/r/rubygems.yml gem push *.gem --config-file /home/r/rubygems.yml&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;In this example, replace &lt;code&gt;foo&lt;/code&gt; with the name of your gem.&lt;/p&gt; &lt;h2 id=&quot;run-it&quot;&gt;Run It!&lt;/h2&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/logo.svg&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;Now it’s time to see how it all works. Create a new ticket in the GitHub issue tracker, and post something like that into it (read more about &lt;a href=&quot;http://doc.rultor.com/basics.html&quot;&gt;Rultor commands&lt;/a&gt;):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;@rultor release, tag is `0.1`&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;You will get a response in a few seconds. The rest will be done by Rultor.&lt;/p&gt; &lt;p&gt;Enjoy :)&lt;/p&gt; &lt;p&gt;BTW, if something doesn’t work as I’ve explained, don’t hesitate to submit a ticket to &lt;a href=&quot;https://github.com/yegor256/rultor/issues&quot;&gt;Rultor issue tracker&lt;/a&gt;. I will try to help you.&lt;/p&gt; "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/08/26/publish-to-rubygems.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?23bb3130b4f"/> <link rel="apple-touch-icon" href="/favicon.ico?23bb3130b4f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?23bb3130b4f"/> <link rel="stylesheet" href="/css/icons.css?23bb3130b4f"/> <link rel="canonical" href="https://www.yegor256.com/2014/08/26/publish-to-rubygems.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/08/26/publish-to-rubygems.amp.html" /> <title>How to Publish to RubyGems, in One Click </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /2014/08/26/publish-to-rubygems.html><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /2014/08/26/publish-to-rubygems.html><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /2014/08/26/publish-to-rubygems.html><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /2014/08/26/publish-to-rubygems.html><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /2014/08/26/publish-to-rubygems.html><a href="/books.html" title="The books I wrote">Books</a></li> <li /2014/08/26/publish-to-rubygems.html><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /2014/08/26/publish-to-rubygems.html><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /2014/08/26/publish-to-rubygems.html class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /2014/08/26/publish-to-rubygems.html><a href="/award.html" title="Software quality award">Award</a></li> <li /2014/08/26/publish-to-rubygems.html><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /2014/08/26/publish-to-rubygems.html><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /2014/08/26/publish-to-rubygems.html><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/08/26/publish-to-rubygems.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2014/08/26/publish-to-rubygems.html</code></p><h1 itemprop="name headline mainEntityOfPage">How to Publish to RubyGems, in One Click</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-08-26T00:00:00+00:00"> 26 August 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2014/08/26/publish-to-rubygems.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>When I release a new version of <a href="https://github.com/yegor256/jekyll-github-deploy">jgd</a>, a Ruby gem, to RubyGems.org, it takes 30 seconds of my time. Here is how I released a bug fix for version 1.5.1, in <a href="https://github.com/yegor256/jekyll-github-deploy/issues/6">GitHub issue #6</a>:</p><figure class="unprintable"><img src="https://www.yegor256.com/images/2014/08/github-ticket-6.jpg" itemprop="image" style="width:600px;max-width:100%;" alt="The figure" /></figure><p>As you see, I gave a command to <a href="http://www.rultor.com">Rultor</a>, and it released a new version to RubyGems. I didn’t do anything else.</p><p>Now let’s see how you can do the same. How you can configure your project so that the release of its new version to RubyGems.org takes just a few seconds of your time.</p><p>By the way, I assume that you’re hosting your project in GitHub. If not, this entire tutorial won’t work. If you are still not in GitHub, I would strongly recommend moving there.</p><h2 id="create-rubygems-account">Create RubyGems Account</h2><p>Create an account in <a href="http://www.rubygems.org">RubyGems.org</a>.</p><h2 id="create-rubygemsyml">Create <code>rubygems.yml</code></h2><p>Create a <code>rubygems.yml</code> file (you may already have it as <code>~/.gem/credentials</code>):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>:rubygems_api_key: d355d8940bb031bfe9acf03ed3da4c0d</code></pre></figure><p>You should get this API key from RubyGems. To find your API key, click on your user name when logged in to RubyGems.org and then click on “Edit Profile.”</p><h2 id="encrypt-rubygemsyml">Encrypt <code>rubygems.yml</code></h2><p>Now, encrypt <code>rubygems.yml</code> with a <a href="https://github.com/yegor256/rultor-remote">rultor remote</a>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>$ gem install rultor
$ rultor encrypt -p me/test rubygems.yml</code></pre></figure><p>Instead of <code>me/test</code> use the name of your GitHub project.</p><p>You will get a new file <code>rubygems.yml.asc</code>. Add this file to the root directory of your project, commit and push. The file contains your secret information, but only the Rultor server can decrypt it.</p><h2 id="prepare-gemspec">Prepare Gemspec</h2><p>In your <code>gemspec</code> file, make sure you use <code>1.0.snapshot</code> as a version number:</p><figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span></span><span class="c1"># coding: utf-8</span>
<span class="no">Gem</span><span class="o">::</span><span class="no">Specification</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">s</span><span class="o">|</span>
  <span class="c1"># ...</span>
  <span class="n">s</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="s1">&#39;1.0.snapshot&#39;</span>
  <span class="c1"># ...</span>
<span class="k">end</span></code></pre></figure><p>This version name will be replaced by Rultor during deployment.</p><h2 id="configure-rultor">Configure Rultor</h2><p>Create a <code>.rultor.yml</code> file in the root directory of your project:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>decrypt:
  rubygems.yml: &quot;repo/rubygems.yml.asc&quot;
release:
  script: |
    rm -rf *.gem
    sed -i &quot;s/1.0.snapshot/${tag}/g&quot; foo.gemspec
    gem build foo.gemspec
    chmod 0600 /home/r/rubygems.yml
    gem push *.gem --config-file /home/r/rubygems.yml</code></pre></figure><p>In this example, replace <code>foo</code> with the name of your gem.</p><h2 id="run-it">Run It!</h2><figure class="badge"><a href="http://www.rultor.com"><img src="http://doc.rultor.com/images/logo.svg" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p>Now it’s time to see how it all works. Create a new ticket in the GitHub issue tracker, and post something like that into it (read more about <a href="http://doc.rultor.com/basics.html">Rultor commands</a>):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>@rultor release, tag is `0.1`</code></pre></figure><p>You will get a response in a few seconds. The rest will be done by Rultor.</p><p>Enjoy :)</p><p>BTW, if something doesn’t work as I’ve explained, don’t hesitate to submit a ticket to <a href="https://github.com/yegor256/rultor/issues">Rultor issue tracker</a>. I will try to help you.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/08/26/publish-to-rubygems.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/08/26/publish-to-rubygems.html&amp;text=How+to+Publish+to+RubyGems%2C+in+One+Click" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/08/26/publish-to-rubygems.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/08/26/publish-to-rubygems.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/08/26/publish-to-rubygems.html%3F2014-34&amp;title=How+to+Publish+to+RubyGems%2C+in+One+Click" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/08/26/publish-to-rubygems.html%3F2014-34&amp;t=How+to+Publish+to+RubyGems%2C+in+One+Click" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>When I release a new version of <a href="https://github.com/yegor256/jekyll-github-deploy">jgd</a>, a Ruby gem, to RubyGems.org, it takes 30 seconds of my time. Here is how I released a bug fix for version 1.5.1, in <a href="https://github.com/yegor256/jekyll-github-deploy/issues/6">GitHub issue #6</a>:</p><figure class="unprintable"><img src="https://www.yegor256.com/images/2014/08/github-ticket-6.jpg" itemprop="image" style="width:600px;max-width:100%;" alt="The figure" /></figure><p>As you see, I gave a command to <a href="http://www.rultor.com">Rultor</a>, and it released a new version to RubyGems. I didn’t do anything else.</p><p>Now let’s see how you can do the same. How you can configure your project so that the release of its new version to RubyGems.org takes just a few seconds of your time.</p><p>By the way, I assume that you’re hosting your project in GitHub. If not, this entire tutorial won’t work. If you are still not in GitHub, I would strongly recommend moving there.</p><h2 id="create-rubygems-account">Create RubyGems Account</h2><p>Create an account in <a href="http://www.rubygems.org">RubyGems.org</a>.</p><h2 id="create-rubygemsyml">Create <code>rubygems.yml</code></h2><p>Create a <code>rubygems.yml</code> file (you may already have it as <code>~/.gem/credentials</code>):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>:rubygems_api_key: d355d8940bb031bfe9acf03ed3da4c0d</code></pre></figure><p>You should get this API key from RubyGems. To find your API key, click on your user name when logged in to RubyGems.org and then click on “Edit Profile.”</p><h2 id="encrypt-rubygemsyml">Encrypt <code>rubygems.yml</code></h2><p>Now, encrypt <code>rubygems.yml</code> with a <a href="https://github.com/yegor256/rultor-remote">rultor remote</a>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>$ gem install rultor
$ rultor encrypt -p me/test rubygems.yml</code></pre></figure><p>Instead of <code>me/test</code> use the name of your GitHub project.</p><p>You will get a new file <code>rubygems.yml.asc</code>. Add this file to the root directory of your project, commit and push. The file contains your secret information, but only the Rultor server can decrypt it.</p><h2 id="prepare-gemspec">Prepare Gemspec</h2><p>In your <code>gemspec</code> file, make sure you use <code>1.0.snapshot</code> as a version number:</p><figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span></span><span class="c1"># coding: utf-8</span>
<span class="no">Gem</span><span class="o">::</span><span class="no">Specification</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">s</span><span class="o">|</span>
  <span class="c1"># ...</span>
  <span class="n">s</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="s1">&#39;1.0.snapshot&#39;</span>
  <span class="c1"># ...</span>
<span class="k">end</span></code></pre></figure><p>This version name will be replaced by Rultor during deployment.</p><h2 id="configure-rultor">Configure Rultor</h2><p>Create a <code>.rultor.yml</code> file in the root directory of your project:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>decrypt:
  rubygems.yml: &quot;repo/rubygems.yml.asc&quot;
release:
  script: |
    rm -rf *.gem
    sed -i &quot;s/1.0.snapshot/${tag}/g&quot; foo.gemspec
    gem build foo.gemspec
    chmod 0600 /home/r/rubygems.yml
    gem push *.gem --config-file /home/r/rubygems.yml</code></pre></figure><p>In this example, replace <code>foo</code> with the name of your gem.</p><h2 id="run-it">Run It!</h2><figure class="badge"><a href="http://www.rultor.com"><img src="http://doc.rultor.com/images/logo.svg" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p>Now it’s time to see how it all works. Create a new ticket in the GitHub issue tracker, and post something like that into it (read more about <a href="http://doc.rultor.com/basics.html">Rultor commands</a>):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>@rultor release, tag is `0.1`</code></pre></figure><p>You will get a response in a few seconds. The rest will be done by Rultor.</p><p>Enjoy :)</p><p>BTW, if something doesn’t work as I’ve explained, don’t hesitate to submit a ticket to <a href="https://github.com/yegor256/rultor/issues">Rultor issue tracker</a>. I will try to help you.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?23bb3130b4f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="&lt;p&gt;When I deploy a new version of &lt;a href=&quot;http://www.stateful.co&quot;&gt;stateful.co&lt;/a&gt;, a Java web application, to CloudBees, it takes 30 seconds of my time. Maybe even less. Recently, I deployed version 1.6.5. You can see how it all happened, in &lt;a href=&quot;https://github.com/sttc/stateful/issues/6&quot;&gt;GitHub issue #6&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;unprintable&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/08/github-sttc-issue-6.png&quot; itemprop=&quot;image&quot; style=&quot;width:600px;max-width:100%;&quot; alt=&quot;The figure&quot; /&gt;&lt;/figure&gt; &lt;p&gt;As you see, I gave a command to &lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor&lt;/a&gt;, and it packaged, tested and deployed a new version to CloudBees. I didn’t do anything else.&lt;/p&gt; &lt;p&gt;Now let’s see how you can do the same. How you can configure your project so that the deployment of its new version to CloudBees takes just a few seconds of your time.&lt;/p&gt; &lt;!--more--&gt; &lt;p style=&quot;border:1px solid red;padding:1em;color:red;&quot;&gt; Since CloudBees is &lt;a href=&quot;http://www.cloudbees.com/press/cloudbees-becomes-enterprise-jenkins-company&quot;&gt;shutting down its PaaS service&lt;/a&gt; by the end of December, 2014, this article will have no sense after that. &lt;/p&gt; &lt;h2 id=&quot;configure-the-cloudbees-maven-plugin&quot;&gt;Configure the CloudBees Maven Plugin&lt;/h2&gt; &lt;p&gt;Add this profile to your &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;project&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;profiles&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;profile&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;cloudbees&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;activation&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&amp;gt;&amp;lt;name&amp;gt;&lt;/span&gt;bees.appId&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&amp;lt;/property&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/activation&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;pluginRepositories&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;pluginRepository&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;cloudbees-public-release&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;url&amp;gt;&lt;/span&gt; http://repository-cloudbees.forge.cloudbees.com/public-release &lt;span class=&quot;nt&quot;&gt;&amp;lt;/url&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/pluginRepository&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/pluginRepositories&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;build&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;pluginManagement&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-deploy-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;skip&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/skip&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/pluginManagement&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.cloudbees&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;bees-maven-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.3.2&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;appid&amp;gt;&lt;/span&gt;${bees.id}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/appid&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;apikey&amp;gt;&lt;/span&gt;${bees.key}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/apikey&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;secret&amp;gt;&lt;/span&gt;${bees.secret}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/secret&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;executions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;execution&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;deploy-to-production&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;phase&amp;gt;&lt;/span&gt;deploy&lt;span class=&quot;nt&quot;&gt;&amp;lt;/phase&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goals&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goal&amp;gt;&lt;/span&gt;deploy&lt;span class=&quot;nt&quot;&gt;&amp;lt;/goal&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/goals&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/execution&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/executions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/build&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/profile&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/profiles&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;This plugin is not in Maven Central (unfortunately). That’s why we have to specify that &lt;code&gt;&amp;lt;pluginRepository&amp;gt;&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;Pay attention to the fact that we’re also disabling &lt;code&gt;maven-deploy-plugin&lt;/code&gt;, since it would try to deploy your WAR package to the repository from the &lt;code&gt;&amp;lt;distributionManagement&amp;gt;&lt;/code&gt; section. We want to avoid this.&lt;/p&gt; &lt;p&gt;The profile gets activated only when the &lt;code&gt;bees.id&lt;/code&gt; property is defined. This won’t happen during your normal development and testing, but it will occur during the deployment cycle initiated by Rultor, because we will define this property in &lt;code&gt;settings.xml&lt;/code&gt; (discussed below).&lt;/p&gt; &lt;h2 id=&quot;secure-access-to-cloudbees&quot;&gt;Secure Access to CloudBees&lt;/h2&gt; &lt;p&gt;Create an account in CloudBees and register your web application there. CloudBees is free, as long as you don’t need too much computing power. I believe that web applications should be light-weight by definition, so CloudBees’ free layer is an ideal choice.&lt;/p&gt; &lt;p&gt;Create a &lt;code&gt;settings.xml&lt;/code&gt; file (but don’t commit it to your repo!):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;settings&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;profiles&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;profile&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;cloudbees&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;properties&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;bees.id&amp;gt;&lt;/span&gt;stateful/web&lt;span class=&quot;nt&quot;&gt;&amp;lt;/bees.id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;bees.key&amp;gt;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- your key --&amp;gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;/bees.key&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;bees.secret&amp;gt;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- your secret --&amp;gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;/bees.secret&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/properties&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/profile&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/profiles&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/settings&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Encrypt this file using &lt;a href=&quot;https://github.com/yegor256/rultor-remote&quot;&gt;rultor remote&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;$ gem install rultor $ rultor encrypt -p me/test settings.xml&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Instead of &lt;code&gt;me/test&lt;/code&gt; use the name of your GitHub project.&lt;/p&gt; &lt;p&gt;You should get a &lt;code&gt;settings.xml.asc&lt;/code&gt; file; add it to the root directory of your project, commit and push. This file contains your CloudBees credentials, but in an encrypted format. Nobody can read it, except the Rultor server.&lt;/p&gt; &lt;h2 id=&quot;configure-versions-plugin&quot;&gt;Configure Versions Plugin&lt;/h2&gt; &lt;p&gt;I recommend using &lt;a href=&quot;/2015/02/05/jcabi-parent-maven-pom.html&quot;&gt;jcabi-parent&lt;/a&gt;. It configures the required plugin out-of-the-box. If you’re using it, skip this step.&lt;/p&gt; &lt;p&gt;Otherwise, add this plugin to your &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;project&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;build&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.codehaus.mojo&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;versions-maven-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.1&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;generateBackupPoms&amp;gt;&lt;/span&gt;false&lt;span class=&quot;nt&quot;&gt;&amp;lt;/generateBackupPoms&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/build&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;h2 id=&quot;configure-rultor&quot;&gt;Configure Rultor&lt;/h2&gt; &lt;p&gt;Create a &lt;code&gt;.rultor.yml&lt;/code&gt; file in the root directory of your project (this &lt;a href=&quot;http://doc.rultor.com/reference.html&quot;&gt;reference page&lt;/a&gt; explains this format in detail):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;decrypt: settings.xml: &amp;quot;repo/settings.xml.asc&amp;quot; release: script: | mvn versions:set &amp;quot;-DnewVersion=${tag}&amp;quot; git commit -am &amp;quot;${tag}&amp;quot; mvn clean deploy --settings /home/r/settings.xml&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;You can compare your file with live Rultor &lt;a href=&quot;https://github.com/sttc/stateful/blob/master/.rultor.yml&quot;&gt;configuration of stateful.co&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;run-it&quot;&gt;Run It!&lt;/h2&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/logo.svg&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;Now it’s time to see how it all works. Create a new ticket in the GitHub issue tracker, and post something like that into it (read more about &lt;a href=&quot;http://doc.rultor.com/basics.html&quot;&gt;Rultor commands&lt;/a&gt;):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;@rultor release, tag is `0.1`&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;You will get a response in a few seconds. The rest will be done by Rultor.&lt;/p&gt; &lt;p&gt;Enjoy :)&lt;/p&gt; &lt;p&gt;BTW, if something doesn’t work as I’ve explained, don’t hesitate to submit a ticket to the &lt;a href=&quot;https://github.com/yegor256/rultor/issues&quot;&gt;Rultor issue tracker&lt;/a&gt;. I will try to help you.&lt;/p&gt; &lt;p&gt;Also, a similar configuration can be performed for &lt;a href=&quot;/2014/09/13/deploying-to-heroku.html&quot;&gt;Heroku&lt;/a&gt; (using &lt;a href=&quot;http://heroku.jcabi.com&quot;&gt;jcabi-heroku-maven-plugin&lt;/a&gt;) and for AWS Elastic Beanstalk (using &lt;a href=&quot;http://beanstalk.jcabi.com&quot;&gt;jcabi-beanstalk-maven-plugin&lt;/a&gt;). I’ll probably dedicate individual posts to them, as well.&lt;/p&gt; " /> <meta name="keywords" content="next, path, output, content, previous, url, relative_path, id, collection, excerpt, draft, categories, layout, title, date, tags, description, keywords, slug, ext" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-08-25 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="How to Deploy to CloudBees, in One Click"/> <meta name="twitter:description" property="og:description" content="&lt;p&gt;When I deploy a new version of &lt;a href=&quot;http://www.stateful.co&quot;&gt;stateful.co&lt;/a&gt;, a Java web application, to CloudBees, it takes 30 seconds of my time. Maybe even less. Recently, I deployed version 1.6.5. You can see how it all happened, in &lt;a href=&quot;https://github.com/sttc/stateful/issues/6&quot;&gt;GitHub issue #6&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;unprintable&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/08/github-sttc-issue-6.png&quot; itemprop=&quot;image&quot; style=&quot;width:600px;max-width:100%;&quot; alt=&quot;The figure&quot; /&gt;&lt;/figure&gt; &lt;p&gt;As you see, I gave a command to &lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor&lt;/a&gt;, and it packaged, tested and deployed a new version to CloudBees. I didn’t do anything else.&lt;/p&gt; &lt;p&gt;Now let’s see how you can do the same. How you can configure your project so that the deployment of its new version to CloudBees takes just a few seconds of your time.&lt;/p&gt; &lt;!--more--&gt; &lt;p style=&quot;border:1px solid red;padding:1em;color:red;&quot;&gt; Since CloudBees is &lt;a href=&quot;http://www.cloudbees.com/press/cloudbees-becomes-enterprise-jenkins-company&quot;&gt;shutting down its PaaS service&lt;/a&gt; by the end of December, 2014, this article will have no sense after that. &lt;/p&gt; &lt;h2 id=&quot;configure-the-cloudbees-maven-plugin&quot;&gt;Configure the CloudBees Maven Plugin&lt;/h2&gt; &lt;p&gt;Add this profile to your &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;project&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;profiles&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;profile&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;cloudbees&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;activation&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&amp;gt;&amp;lt;name&amp;gt;&lt;/span&gt;bees.appId&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&amp;lt;/property&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/activation&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;pluginRepositories&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;pluginRepository&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;cloudbees-public-release&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;url&amp;gt;&lt;/span&gt; http://repository-cloudbees.forge.cloudbees.com/public-release &lt;span class=&quot;nt&quot;&gt;&amp;lt;/url&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/pluginRepository&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/pluginRepositories&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;build&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;pluginManagement&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-deploy-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;skip&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/skip&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/pluginManagement&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.cloudbees&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;bees-maven-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.3.2&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;appid&amp;gt;&lt;/span&gt;${bees.id}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/appid&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;apikey&amp;gt;&lt;/span&gt;${bees.key}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/apikey&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;secret&amp;gt;&lt;/span&gt;${bees.secret}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/secret&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;executions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;execution&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;deploy-to-production&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;phase&amp;gt;&lt;/span&gt;deploy&lt;span class=&quot;nt&quot;&gt;&amp;lt;/phase&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goals&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goal&amp;gt;&lt;/span&gt;deploy&lt;span class=&quot;nt&quot;&gt;&amp;lt;/goal&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/goals&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/execution&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/executions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/build&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/profile&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/profiles&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;This plugin is not in Maven Central (unfortunately). That’s why we have to specify that &lt;code&gt;&amp;lt;pluginRepository&amp;gt;&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;Pay attention to the fact that we’re also disabling &lt;code&gt;maven-deploy-plugin&lt;/code&gt;, since it would try to deploy your WAR package to the repository from the &lt;code&gt;&amp;lt;distributionManagement&amp;gt;&lt;/code&gt; section. We want to avoid this.&lt;/p&gt; &lt;p&gt;The profile gets activated only when the &lt;code&gt;bees.id&lt;/code&gt; property is defined. This won’t happen during your normal development and testing, but it will occur during the deployment cycle initiated by Rultor, because we will define this property in &lt;code&gt;settings.xml&lt;/code&gt; (discussed below).&lt;/p&gt; &lt;h2 id=&quot;secure-access-to-cloudbees&quot;&gt;Secure Access to CloudBees&lt;/h2&gt; &lt;p&gt;Create an account in CloudBees and register your web application there. CloudBees is free, as long as you don’t need too much computing power. I believe that web applications should be light-weight by definition, so CloudBees’ free layer is an ideal choice.&lt;/p&gt; &lt;p&gt;Create a &lt;code&gt;settings.xml&lt;/code&gt; file (but don’t commit it to your repo!):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;settings&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;profiles&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;profile&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;cloudbees&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;properties&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;bees.id&amp;gt;&lt;/span&gt;stateful/web&lt;span class=&quot;nt&quot;&gt;&amp;lt;/bees.id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;bees.key&amp;gt;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- your key --&amp;gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;/bees.key&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;bees.secret&amp;gt;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- your secret --&amp;gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;/bees.secret&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/properties&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/profile&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/profiles&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/settings&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Encrypt this file using &lt;a href=&quot;https://github.com/yegor256/rultor-remote&quot;&gt;rultor remote&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;$ gem install rultor $ rultor encrypt -p me/test settings.xml&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Instead of &lt;code&gt;me/test&lt;/code&gt; use the name of your GitHub project.&lt;/p&gt; &lt;p&gt;You should get a &lt;code&gt;settings.xml.asc&lt;/code&gt; file; add it to the root directory of your project, commit and push. This file contains your CloudBees credentials, but in an encrypted format. Nobody can read it, except the Rultor server.&lt;/p&gt; &lt;h2 id=&quot;configure-versions-plugin&quot;&gt;Configure Versions Plugin&lt;/h2&gt; &lt;p&gt;I recommend using &lt;a href=&quot;/2015/02/05/jcabi-parent-maven-pom.html&quot;&gt;jcabi-parent&lt;/a&gt;. It configures the required plugin out-of-the-box. If you’re using it, skip this step.&lt;/p&gt; &lt;p&gt;Otherwise, add this plugin to your &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;project&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;build&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.codehaus.mojo&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;versions-maven-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.1&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;generateBackupPoms&amp;gt;&lt;/span&gt;false&lt;span class=&quot;nt&quot;&gt;&amp;lt;/generateBackupPoms&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/build&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;h2 id=&quot;configure-rultor&quot;&gt;Configure Rultor&lt;/h2&gt; &lt;p&gt;Create a &lt;code&gt;.rultor.yml&lt;/code&gt; file in the root directory of your project (this &lt;a href=&quot;http://doc.rultor.com/reference.html&quot;&gt;reference page&lt;/a&gt; explains this format in detail):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;decrypt: settings.xml: &amp;quot;repo/settings.xml.asc&amp;quot; release: script: | mvn versions:set &amp;quot;-DnewVersion=${tag}&amp;quot; git commit -am &amp;quot;${tag}&amp;quot; mvn clean deploy --settings /home/r/settings.xml&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;You can compare your file with live Rultor &lt;a href=&quot;https://github.com/sttc/stateful/blob/master/.rultor.yml&quot;&gt;configuration of stateful.co&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;run-it&quot;&gt;Run It!&lt;/h2&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/logo.svg&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;Now it’s time to see how it all works. Create a new ticket in the GitHub issue tracker, and post something like that into it (read more about &lt;a href=&quot;http://doc.rultor.com/basics.html&quot;&gt;Rultor commands&lt;/a&gt;):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;@rultor release, tag is `0.1`&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;You will get a response in a few seconds. The rest will be done by Rultor.&lt;/p&gt; &lt;p&gt;Enjoy :)&lt;/p&gt; &lt;p&gt;BTW, if something doesn’t work as I’ve explained, don’t hesitate to submit a ticket to the &lt;a href=&quot;https://github.com/yegor256/rultor/issues&quot;&gt;Rultor issue tracker&lt;/a&gt;. I will try to help you.&lt;/p&gt; &lt;p&gt;Also, a similar configuration can be performed for &lt;a href=&quot;/2014/09/13/deploying-to-heroku.html&quot;&gt;Heroku&lt;/a&gt; (using &lt;a href=&quot;http://heroku.jcabi.com&quot;&gt;jcabi-heroku-maven-plugin&lt;/a&gt;) and for AWS Elastic Beanstalk (using &lt;a href=&quot;http://beanstalk.jcabi.com&quot;&gt;jcabi-beanstalk-maven-plugin&lt;/a&gt;). I’ll probably dedicate individual posts to them, as well.&lt;/p&gt; "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?23bb3130b4f"/> <link rel="apple-touch-icon" href="/favicon.ico?23bb3130b4f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?23bb3130b4f"/> <link rel="stylesheet" href="/css/icons.css?23bb3130b4f"/> <link rel="canonical" href="https://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/08/25/deploy-to-cloudbees.amp.html" /> <title>How to Deploy to CloudBees, in One Click </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /2014/08/25/deploy-to-cloudbees.html><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /2014/08/25/deploy-to-cloudbees.html><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /2014/08/25/deploy-to-cloudbees.html><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /2014/08/25/deploy-to-cloudbees.html><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /2014/08/25/deploy-to-cloudbees.html><a href="/books.html" title="The books I wrote">Books</a></li> <li /2014/08/25/deploy-to-cloudbees.html><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /2014/08/25/deploy-to-cloudbees.html><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /2014/08/25/deploy-to-cloudbees.html class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /2014/08/25/deploy-to-cloudbees.html><a href="/award.html" title="Software quality award">Award</a></li> <li /2014/08/25/deploy-to-cloudbees.html><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /2014/08/25/deploy-to-cloudbees.html><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /2014/08/25/deploy-to-cloudbees.html><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html</code></p><h1 itemprop="name headline mainEntityOfPage">How to Deploy to CloudBees, in One Click</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-08-25T00:00:00+00:00"> 25 August 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>When I deploy a new version of <a href="http://www.stateful.co">stateful.co</a>, a Java web application, to CloudBees, it takes 30 seconds of my time. Maybe even less. Recently, I deployed version 1.6.5. You can see how it all happened, in <a href="https://github.com/sttc/stateful/issues/6">GitHub issue #6</a>:</p><figure class="unprintable"><img src="https://www.yegor256.com/images/2014/08/github-sttc-issue-6.png" itemprop="image" style="width:600px;max-width:100%;" alt="The figure" /></figure><p>As you see, I gave a command to <a href="http://www.rultor.com">Rultor</a>, and it packaged, tested and deployed a new version to CloudBees. I didn’t do anything else.</p><p>Now let’s see how you can do the same. How you can configure your project so that the deployment of its new version to CloudBees takes just a few seconds of your time.</p><p style="border:1px solid red;padding:1em;color:red;"> Since CloudBees is <a href="http://www.cloudbees.com/press/cloudbees-becomes-enterprise-jenkins-company">shutting down its PaaS service</a> by the end of December, 2014, this article will have no sense after that.</p><h2 id="configure-the-cloudbees-maven-plugin">Configure the CloudBees Maven Plugin</h2><p>Add this profile to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  [..]
  <span class="nt">&lt;profiles&gt;</span>
    <span class="nt">&lt;profile&gt;</span>
      <span class="nt">&lt;id&gt;</span>cloudbees<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;activation&gt;</span>
        <span class="nt">&lt;property&gt;&lt;name&gt;</span>bees.appId<span class="nt">&lt;/name&gt;&lt;/property&gt;</span>
      <span class="nt">&lt;/activation&gt;</span>
      <span class="nt">&lt;pluginRepositories&gt;</span>
        <span class="nt">&lt;pluginRepository&gt;</span>
          <span class="nt">&lt;id&gt;</span>cloudbees-public-release<span class="nt">&lt;/id&gt;</span>
          <span class="nt">&lt;url&gt;</span>
            http://repository-cloudbees.forge.cloudbees.com/public-release
          <span class="nt">&lt;/url&gt;</span>
        <span class="nt">&lt;/pluginRepository&gt;</span>
      <span class="nt">&lt;/pluginRepositories&gt;</span>
      <span class="nt">&lt;build&gt;</span>
        <span class="nt">&lt;pluginManagement&gt;</span>
          <span class="nt">&lt;plugins&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
              <span class="nt">&lt;artifactId&gt;</span>maven-deploy-plugin<span class="nt">&lt;/artifactId&gt;</span>
              <span class="nt">&lt;configuration&gt;</span>
                  <span class="nt">&lt;skip&gt;</span>true<span class="nt">&lt;/skip&gt;</span>
              <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
          <span class="nt">&lt;/plugins&gt;</span>
        <span class="nt">&lt;/pluginManagement&gt;</span>
        <span class="nt">&lt;plugins&gt;</span>
          <span class="nt">&lt;plugin&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>com.cloudbees<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>bees-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>1.3.2<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
              <span class="nt">&lt;appid&gt;</span>${bees.id}<span class="nt">&lt;/appid&gt;</span>
              <span class="nt">&lt;apikey&gt;</span>${bees.key}<span class="nt">&lt;/apikey&gt;</span>
              <span class="nt">&lt;secret&gt;</span>${bees.secret}<span class="nt">&lt;/secret&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;executions&gt;</span>
              <span class="nt">&lt;execution&gt;</span>
                <span class="nt">&lt;id&gt;</span>deploy-to-production<span class="nt">&lt;/id&gt;</span>
                <span class="nt">&lt;phase&gt;</span>deploy<span class="nt">&lt;/phase&gt;</span>
                <span class="nt">&lt;goals&gt;</span>
                  <span class="nt">&lt;goal&gt;</span>deploy<span class="nt">&lt;/goal&gt;</span>
                <span class="nt">&lt;/goals&gt;</span>
              <span class="nt">&lt;/execution&gt;</span>
            <span class="nt">&lt;/executions&gt;</span>
          <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;/plugins&gt;</span>
      <span class="nt">&lt;/build&gt;</span>
    <span class="nt">&lt;/profile&gt;</span>
  <span class="nt">&lt;/profiles&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><p>This plugin is not in Maven Central (unfortunately). That’s why we have to specify that <code>&lt;pluginRepository&gt;</code>.</p><p>Pay attention to the fact that we’re also disabling <code>maven-deploy-plugin</code>, since it would try to deploy your WAR package to the repository from the <code>&lt;distributionManagement&gt;</code> section. We want to avoid this.</p><p>The profile gets activated only when the <code>bees.id</code> property is defined. This won’t happen during your normal development and testing, but it will occur during the deployment cycle initiated by Rultor, because we will define this property in <code>settings.xml</code> (discussed below).</p><h2 id="secure-access-to-cloudbees">Secure Access to CloudBees</h2><p>Create an account in CloudBees and register your web application there. CloudBees is free, as long as you don’t need too much computing power. I believe that web applications should be light-weight by definition, so CloudBees’ free layer is an ideal choice.</p><p>Create a <code>settings.xml</code> file (but don’t commit it to your repo!):</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;settings&gt;</span>
  <span class="nt">&lt;profiles&gt;</span>
    <span class="nt">&lt;profile&gt;</span>
      <span class="nt">&lt;id&gt;</span>cloudbees<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;properties&gt;</span>
        <span class="nt">&lt;bees.id&gt;</span>stateful/web<span class="nt">&lt;/bees.id&gt;</span>
        <span class="nt">&lt;bees.key&gt;</span><span class="c">&lt;!-- your key --&gt;</span><span class="nt">&lt;/bees.key&gt;</span>
        <span class="nt">&lt;bees.secret&gt;</span><span class="c">&lt;!-- your secret --&gt;</span><span class="nt">&lt;/bees.secret&gt;</span>
      <span class="nt">&lt;/properties&gt;</span>
    <span class="nt">&lt;/profile&gt;</span>
  <span class="nt">&lt;/profiles&gt;</span>
<span class="nt">&lt;/settings&gt;</span></code></pre></figure><p>Encrypt this file using <a href="https://github.com/yegor256/rultor-remote">rultor remote</a>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>$ gem install rultor
$ rultor encrypt -p me/test settings.xml</code></pre></figure><p>Instead of <code>me/test</code> use the name of your GitHub project.</p><p>You should get a <code>settings.xml.asc</code> file; add it to the root directory of your project, commit and push. This file contains your CloudBees credentials, but in an encrypted format. Nobody can read it, except the Rultor server.</p><h2 id="configure-versions-plugin">Configure Versions Plugin</h2><p>I recommend using <a href="/2015/02/05/jcabi-parent-maven-pom.html">jcabi-parent</a>. It configures the required plugin out-of-the-box. If you’re using it, skip this step.</p><p>Otherwise, add this plugin to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  [..]
  <span class="nt">&lt;build&gt;</span>
    [..]
    <span class="nt">&lt;plugins&gt;</span>
      [..]
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>versions-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>2.1<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;generateBackupPoms&gt;</span>false<span class="nt">&lt;/generateBackupPoms&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><h2 id="configure-rultor">Configure Rultor</h2><p>Create a <code>.rultor.yml</code> file in the root directory of your project (this <a href="http://doc.rultor.com/reference.html">reference page</a> explains this format in detail):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>decrypt:
  settings.xml: &quot;repo/settings.xml.asc&quot;
release:
  script: |
    mvn versions:set &quot;-DnewVersion=${tag}&quot;
    git commit -am &quot;${tag}&quot;
    mvn clean deploy --settings /home/r/settings.xml</code></pre></figure><p>You can compare your file with live Rultor <a href="https://github.com/sttc/stateful/blob/master/.rultor.yml">configuration of stateful.co</a>.</p><h2 id="run-it">Run It!</h2><figure class="badge"><a href="http://www.rultor.com"><img src="http://doc.rultor.com/images/logo.svg" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p>Now it’s time to see how it all works. Create a new ticket in the GitHub issue tracker, and post something like that into it (read more about <a href="http://doc.rultor.com/basics.html">Rultor commands</a>):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>@rultor release, tag is `0.1`</code></pre></figure><p>You will get a response in a few seconds. The rest will be done by Rultor.</p><p>Enjoy :)</p><p>BTW, if something doesn’t work as I’ve explained, don’t hesitate to submit a ticket to the <a href="https://github.com/yegor256/rultor/issues">Rultor issue tracker</a>. I will try to help you.</p><p>Also, a similar configuration can be performed for <a href="/2014/09/13/deploying-to-heroku.html">Heroku</a> (using <a href="http://heroku.jcabi.com">jcabi-heroku-maven-plugin</a>) and for AWS Elastic Beanstalk (using <a href="http://beanstalk.jcabi.com">jcabi-beanstalk-maven-plugin</a>). I’ll probably dedicate individual posts to them, as well.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html&amp;text=How+to+Deploy+to+CloudBees%2C+in+One+Click" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html%3F2014-34&amp;title=How+to+Deploy+to+CloudBees%2C+in+One+Click" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/08/25/deploy-to-cloudbees.html%3F2014-34&amp;t=How+to+Deploy+to+CloudBees%2C+in+One+Click" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>When I deploy a new version of <a href="http://www.stateful.co">stateful.co</a>, a Java web application, to CloudBees, it takes 30 seconds of my time. Maybe even less. Recently, I deployed version 1.6.5. You can see how it all happened, in <a href="https://github.com/sttc/stateful/issues/6">GitHub issue #6</a>:</p><figure class="unprintable"><img src="https://www.yegor256.com/images/2014/08/github-sttc-issue-6.png" itemprop="image" style="width:600px;max-width:100%;" alt="The figure" /></figure><p>As you see, I gave a command to <a href="http://www.rultor.com">Rultor</a>, and it packaged, tested and deployed a new version to CloudBees. I didn’t do anything else.</p><p>Now let’s see how you can do the same. How you can configure your project so that the deployment of its new version to CloudBees takes just a few seconds of your time.</p><p style="border:1px solid red;padding:1em;color:red;"> Since CloudBees is <a href="http://www.cloudbees.com/press/cloudbees-becomes-enterprise-jenkins-company">shutting down its PaaS service</a> by the end of December, 2014, this article will have no sense after that.</p><h2 id="configure-the-cloudbees-maven-plugin">Configure the CloudBees Maven Plugin</h2><p>Add this profile to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  [..]
  <span class="nt">&lt;profiles&gt;</span>
    <span class="nt">&lt;profile&gt;</span>
      <span class="nt">&lt;id&gt;</span>cloudbees<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;activation&gt;</span>
        <span class="nt">&lt;property&gt;&lt;name&gt;</span>bees.appId<span class="nt">&lt;/name&gt;&lt;/property&gt;</span>
      <span class="nt">&lt;/activation&gt;</span>
      <span class="nt">&lt;pluginRepositories&gt;</span>
        <span class="nt">&lt;pluginRepository&gt;</span>
          <span class="nt">&lt;id&gt;</span>cloudbees-public-release<span class="nt">&lt;/id&gt;</span>
          <span class="nt">&lt;url&gt;</span>
            http://repository-cloudbees.forge.cloudbees.com/public-release
          <span class="nt">&lt;/url&gt;</span>
        <span class="nt">&lt;/pluginRepository&gt;</span>
      <span class="nt">&lt;/pluginRepositories&gt;</span>
      <span class="nt">&lt;build&gt;</span>
        <span class="nt">&lt;pluginManagement&gt;</span>
          <span class="nt">&lt;plugins&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
              <span class="nt">&lt;artifactId&gt;</span>maven-deploy-plugin<span class="nt">&lt;/artifactId&gt;</span>
              <span class="nt">&lt;configuration&gt;</span>
                  <span class="nt">&lt;skip&gt;</span>true<span class="nt">&lt;/skip&gt;</span>
              <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
          <span class="nt">&lt;/plugins&gt;</span>
        <span class="nt">&lt;/pluginManagement&gt;</span>
        <span class="nt">&lt;plugins&gt;</span>
          <span class="nt">&lt;plugin&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>com.cloudbees<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>bees-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>1.3.2<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
              <span class="nt">&lt;appid&gt;</span>${bees.id}<span class="nt">&lt;/appid&gt;</span>
              <span class="nt">&lt;apikey&gt;</span>${bees.key}<span class="nt">&lt;/apikey&gt;</span>
              <span class="nt">&lt;secret&gt;</span>${bees.secret}<span class="nt">&lt;/secret&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;executions&gt;</span>
              <span class="nt">&lt;execution&gt;</span>
                <span class="nt">&lt;id&gt;</span>deploy-to-production<span class="nt">&lt;/id&gt;</span>
                <span class="nt">&lt;phase&gt;</span>deploy<span class="nt">&lt;/phase&gt;</span>
                <span class="nt">&lt;goals&gt;</span>
                  <span class="nt">&lt;goal&gt;</span>deploy<span class="nt">&lt;/goal&gt;</span>
                <span class="nt">&lt;/goals&gt;</span>
              <span class="nt">&lt;/execution&gt;</span>
            <span class="nt">&lt;/executions&gt;</span>
          <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;/plugins&gt;</span>
      <span class="nt">&lt;/build&gt;</span>
    <span class="nt">&lt;/profile&gt;</span>
  <span class="nt">&lt;/profiles&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><p>This plugin is not in Maven Central (unfortunately). That’s why we have to specify that <code>&lt;pluginRepository&gt;</code>.</p><p>Pay attention to the fact that we’re also disabling <code>maven-deploy-plugin</code>, since it would try to deploy your WAR package to the repository from the <code>&lt;distributionManagement&gt;</code> section. We want to avoid this.</p><p>The profile gets activated only when the <code>bees.id</code> property is defined. This won’t happen during your normal development and testing, but it will occur during the deployment cycle initiated by Rultor, because we will define this property in <code>settings.xml</code> (discussed below).</p><h2 id="secure-access-to-cloudbees">Secure Access to CloudBees</h2><p>Create an account in CloudBees and register your web application there. CloudBees is free, as long as you don’t need too much computing power. I believe that web applications should be light-weight by definition, so CloudBees’ free layer is an ideal choice.</p><p>Create a <code>settings.xml</code> file (but don’t commit it to your repo!):</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;settings&gt;</span>
  <span class="nt">&lt;profiles&gt;</span>
    <span class="nt">&lt;profile&gt;</span>
      <span class="nt">&lt;id&gt;</span>cloudbees<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;properties&gt;</span>
        <span class="nt">&lt;bees.id&gt;</span>stateful/web<span class="nt">&lt;/bees.id&gt;</span>
        <span class="nt">&lt;bees.key&gt;</span><span class="c">&lt;!-- your key --&gt;</span><span class="nt">&lt;/bees.key&gt;</span>
        <span class="nt">&lt;bees.secret&gt;</span><span class="c">&lt;!-- your secret --&gt;</span><span class="nt">&lt;/bees.secret&gt;</span>
      <span class="nt">&lt;/properties&gt;</span>
    <span class="nt">&lt;/profile&gt;</span>
  <span class="nt">&lt;/profiles&gt;</span>
<span class="nt">&lt;/settings&gt;</span></code></pre></figure><p>Encrypt this file using <a href="https://github.com/yegor256/rultor-remote">rultor remote</a>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>$ gem install rultor
$ rultor encrypt -p me/test settings.xml</code></pre></figure><p>Instead of <code>me/test</code> use the name of your GitHub project.</p><p>You should get a <code>settings.xml.asc</code> file; add it to the root directory of your project, commit and push. This file contains your CloudBees credentials, but in an encrypted format. Nobody can read it, except the Rultor server.</p><h2 id="configure-versions-plugin">Configure Versions Plugin</h2><p>I recommend using <a href="/2015/02/05/jcabi-parent-maven-pom.html">jcabi-parent</a>. It configures the required plugin out-of-the-box. If you’re using it, skip this step.</p><p>Otherwise, add this plugin to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  [..]
  <span class="nt">&lt;build&gt;</span>
    [..]
    <span class="nt">&lt;plugins&gt;</span>
      [..]
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>versions-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>2.1<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;generateBackupPoms&gt;</span>false<span class="nt">&lt;/generateBackupPoms&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><h2 id="configure-rultor">Configure Rultor</h2><p>Create a <code>.rultor.yml</code> file in the root directory of your project (this <a href="http://doc.rultor.com/reference.html">reference page</a> explains this format in detail):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>decrypt:
  settings.xml: &quot;repo/settings.xml.asc&quot;
release:
  script: |
    mvn versions:set &quot;-DnewVersion=${tag}&quot;
    git commit -am &quot;${tag}&quot;
    mvn clean deploy --settings /home/r/settings.xml</code></pre></figure><p>You can compare your file with live Rultor <a href="https://github.com/sttc/stateful/blob/master/.rultor.yml">configuration of stateful.co</a>.</p><h2 id="run-it">Run It!</h2><figure class="badge"><a href="http://www.rultor.com"><img src="http://doc.rultor.com/images/logo.svg" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p>Now it’s time to see how it all works. Create a new ticket in the GitHub issue tracker, and post something like that into it (read more about <a href="http://doc.rultor.com/basics.html">Rultor commands</a>):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>@rultor release, tag is `0.1`</code></pre></figure><p>You will get a response in a few seconds. The rest will be done by Rultor.</p><p>Enjoy :)</p><p>BTW, if something doesn’t work as I’ve explained, don’t hesitate to submit a ticket to the <a href="https://github.com/yegor256/rultor/issues">Rultor issue tracker</a>. I will try to help you.</p><p>Also, a similar configuration can be performed for <a href="/2014/09/13/deploying-to-heroku.html">Heroku</a> (using <a href="http://heroku.jcabi.com">jcabi-heroku-maven-plugin</a>) and for AWS Elastic Beanstalk (using <a href="http://beanstalk.jcabi.com">jcabi-beanstalk-maven-plugin</a>). I’ll probably dedicate individual posts to them, as well.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?23bb3130b4f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="&lt;p&gt;When I release a new version of &lt;a href=&quot;http://aspects.jcabi.com&quot;&gt;jcabi-aspects&lt;/a&gt;, a Java open source library, to Maven Central, it takes 30 seconds of my time. Maybe even less. Recently, I released version 0.17.2. You can see how it all happened, in &lt;a href=&quot;https://github.com/jcabi/jcabi-aspects/issues/80&quot;&gt;GitHub issue #80&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;unprintable&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/08/github-ticket-80.jpg&quot; itemprop=&quot;image&quot; style=&quot;width:600px;max-width:100%;&quot; alt=&quot;The figure&quot; /&gt;&lt;/figure&gt; &lt;p&gt;As you see, I gave a command to &lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor&lt;/a&gt;, and it released a new version to Maven central. I didn’t do anything else.&lt;/p&gt; &lt;p&gt;Now let’s see how you can do the same. How you can configure your project so that the release of its new version to Maven Central takes just a few seconds of your time.&lt;/p&gt; &lt;!--more--&gt; &lt;p&gt;By the way, I assume that you’re hosting your project in GitHub. If not, this entire tutorial won’t work. If you are still not in GitHub, I would strongly recommend moving there.&lt;/p&gt; &lt;h2 id=&quot;prepare-your-pom&quot;&gt;Prepare Your POM&lt;/h2&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=rEK3Rk2lX3M&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/rEK3Rk2lX3M/mqdefault.jpg&quot; alt=&quot;YouTube video #rEK3Rk2lX3M&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Cactoos 0.12 polishing and releasing (webinar #27); 2 August 2017.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;Make sure your &lt;code&gt;pom.xml&lt;/code&gt; contains all elements required by Sonatype, explained in &lt;a href=&quot;http://central.sonatype.org/pages/requirements.html&quot;&gt;Central Sync Requirements&lt;/a&gt;. We will deploy to Sonatype, and they will synchronize all JAR (and not only) artifacts to Maven Central.&lt;/p&gt; &lt;h2 id=&quot;register-a-project-with-sonatype&quot;&gt;Register a Project With Sonatype&lt;/h2&gt; &lt;p&gt;Create an account in &lt;a href=&quot;https://issues.sonatype.org/&quot;&gt;Sonatype JIRA&lt;/a&gt; and raise a ticket, asking to approve your &lt;code&gt;groupId&lt;/code&gt;. This &lt;a href=&quot;http://central.sonatype.org/pages/ossrh-guide.html&quot;&gt;OSSRH Guide&lt;/a&gt; explains this step in more detail.&lt;/p&gt; &lt;h2 id=&quot;create-and-distribute-a-gpg-key&quot;&gt;Create and Distribute a GPG Key&lt;/h2&gt; &lt;p&gt;Create a GPG key and distribute it, as explained in this &lt;a href=&quot;http://central.sonatype.org/pages/working-with-pgp-signatures.html&quot;&gt;Working with PGP Signatures&lt;/a&gt; article.&lt;/p&gt; &lt;p&gt;When this step is done, you should have two files: &lt;code&gt;pubring.gpg&lt;/code&gt; and &lt;code&gt;secring.gpg&lt;/code&gt;.&lt;/p&gt; &lt;h2 id=&quot;create-settingsxml&quot;&gt;Create settings.xml&lt;/h2&gt; &lt;p&gt;Create &lt;code&gt;settings.xml&lt;/code&gt;, next to the two &lt;code&gt;.gpg&lt;/code&gt; files created in the previous step:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;settings&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;profiles&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;profile&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;foo&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- give it the name of your project --&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;properties&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;gpg.homedir&amp;gt;&lt;/span&gt;/home/r&lt;span class=&quot;nt&quot;&gt;&amp;lt;/gpg.homedir&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;gpg.keyname&amp;gt;&lt;/span&gt;9A105525&lt;span class=&quot;nt&quot;&gt;&amp;lt;/gpg.keyname&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;gpg.passphrase&amp;gt;&lt;/span&gt;my-secret&lt;span class=&quot;nt&quot;&gt;&amp;lt;/gpg.passphrase&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/properties&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/profile&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/profiles&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;servers&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;server&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;oss.sonatype.org&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;username&amp;gt;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Sonatype JIRA user name --&amp;gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;/username&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;password&amp;gt;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Sonatype JIRA pwd --&amp;gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;/password&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/server&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/servers&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/settings&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;In this example, &lt;code&gt;9A105525&lt;/code&gt; is the ID of your public key, and &lt;code&gt;my-secret&lt;/code&gt; is the pass phrase you have used while generating the keys.&lt;/p&gt; &lt;h2 id=&quot;encrypt-security-assets&quot;&gt;Encrypt Security Assets&lt;/h2&gt; &lt;p&gt;Now, encrypt these three files with a &lt;a href=&quot;https://github.com/yegor256/rultor-remote&quot;&gt;rultor remote&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;$ gem install rultor $ rultor encrypt -p me/test pubring.gpg $ rultor encrypt -p me/test secring.gpg $ rultor encrypt -p me/test settings.xml&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Instead of &lt;code&gt;me/test&lt;/code&gt; you should use the name of your GitHub project.&lt;/p&gt; &lt;p&gt;You will get three new files: &lt;code&gt;pubring.gpg.asc&lt;/code&gt;, &lt;code&gt;secring.gpg.asc&lt;/code&gt; and &lt;code&gt;settings.xml.asc&lt;/code&gt;. Add them to the root directory of your project, commit and push. The files contain your secret information, but only the Rultor server can decrypt them.&lt;/p&gt; &lt;h2 id=&quot;add-sonatype-repositories&quot;&gt;Add Sonatype Repositories&lt;/h2&gt; &lt;p&gt;I would recommend using &lt;a href=&quot;/2015/02/05/jcabi-parent-maven-pom.html&quot;&gt;jcabi-parent&lt;/a&gt;, as a parent pom for your project. This will make many further steps unnecessary. If you’re using jcabi-parent, skip this step.&lt;/p&gt; &lt;p&gt;However, if you don’t use jcabi-parent, you should add these two repositories to your &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;project&amp;gt;&lt;/span&gt; [...] &lt;span class=&quot;nt&quot;&gt;&amp;lt;distributionManagement&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;repository&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;oss.sonatype.org&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;url&amp;gt;&lt;/span&gt;https://oss.sonatype.org/service/local/staging/deploy/maven2/&lt;span class=&quot;nt&quot;&gt;&amp;lt;/url&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/repository&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;snapshotRepository&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;oss.sonatype.org&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;url&amp;gt;&lt;/span&gt;https://oss.sonatype.org/content/repositories/snapshots&lt;span class=&quot;nt&quot;&gt;&amp;lt;/url&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/snapshotRepository&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/distributionManagement&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;h2 id=&quot;configure-gpg-plugin&quot;&gt;Configure GPG Plugin&lt;/h2&gt; &lt;p&gt;Again, I’d recommend using &lt;a href=&quot;http://parent.jcabi.com&quot;&gt;jcabi-parent&lt;/a&gt;, which configures this plugin automatically. If you’re using it, skip this step.&lt;/p&gt; &lt;p&gt;Otherwise, add this plugin to your &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;project&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;build&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-gpg-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.5&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;executions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;execution&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;sign-artifacts&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;phase&amp;gt;&lt;/span&gt;verify&lt;span class=&quot;nt&quot;&gt;&amp;lt;/phase&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goals&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goal&amp;gt;&lt;/span&gt;sign&lt;span class=&quot;nt&quot;&gt;&amp;lt;/goal&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/goals&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/execution&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/executions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/build&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;h2 id=&quot;configure-versions-plugin&quot;&gt;Configure Versions Plugin&lt;/h2&gt; &lt;p&gt;Once again, I recommend using &lt;a href=&quot;/2015/02/05/jcabi-parent-maven-pom.html&quot;&gt;http://parent.jcabi.com&lt;/a&gt;. It configures all required plugins out-of-the-box. If you’re using it, skip this step.&lt;/p&gt; &lt;p&gt;Otherwise, add this plugin to your &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;project&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;build&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.codehaus.mojo&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;versions-maven-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.1&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;generateBackupPoms&amp;gt;&lt;/span&gt;false&lt;span class=&quot;nt&quot;&gt;&amp;lt;/generateBackupPoms&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/build&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;h2 id=&quot;configure-sonatype-plugin&quot;&gt;Configure Sonatype Plugin&lt;/h2&gt; &lt;p&gt;Yes, you’re right, &lt;a href=&quot;/2015/02/05/jcabi-parent-maven-pom.html&quot;&gt;http://parent.jcabi.com&lt;/a&gt; will help you here as well. If you’re using it, skip this step too.&lt;/p&gt; &lt;p&gt;Otherwise, add these four plugins to your &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;project&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;build&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-deploy-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;skip&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/skip&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-source-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;executions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;execution&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;package-sources&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goals&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goal&amp;gt;&lt;/span&gt;jar&lt;span class=&quot;nt&quot;&gt;&amp;lt;/goal&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/goals&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/execution&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/executions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-javadoc-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;executions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;execution&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;package-javadoc&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;phase&amp;gt;&lt;/span&gt;package&lt;span class=&quot;nt&quot;&gt;&amp;lt;/phase&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goals&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goal&amp;gt;&lt;/span&gt;jar&lt;span class=&quot;nt&quot;&gt;&amp;lt;/goal&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/goals&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/execution&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/executions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.sonatype.plugins&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;nexus-staging-maven-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.6&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;extensions&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/extensions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;serverId&amp;gt;&lt;/span&gt;oss.sonatype.org&lt;span class=&quot;nt&quot;&gt;&amp;lt;/serverId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;nexusUrl&amp;gt;&lt;/span&gt;https://oss.sonatype.org/&lt;span class=&quot;nt&quot;&gt;&amp;lt;/nexusUrl&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;description&amp;gt;&lt;/span&gt;${project.version}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/description&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;executions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;execution&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;deploy-to-sonatype&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;phase&amp;gt;&lt;/span&gt;deploy&lt;span class=&quot;nt&quot;&gt;&amp;lt;/phase&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goals&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goal&amp;gt;&lt;/span&gt;deploy&lt;span class=&quot;nt&quot;&gt;&amp;lt;/goal&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goal&amp;gt;&lt;/span&gt;release&lt;span class=&quot;nt&quot;&gt;&amp;lt;/goal&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/goals&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/execution&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/executions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/build&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;h2 id=&quot;create-rultor-configuration&quot;&gt;Create Rultor Configuration&lt;/h2&gt; &lt;p&gt;Create a &lt;code&gt;.rultor.yml&lt;/code&gt; file in the root directory of your project (&lt;a href=&quot;http://doc.rultor.com/reference.html&quot;&gt;reference page&lt;/a&gt; explains this format in details):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;decrypt: settings.xml: &amp;quot;repo/settings.xml.asc&amp;quot; pubring.gpg: &amp;quot;repo/pubring.gpg.asc&amp;quot; secring.gpg: &amp;quot;repo/secring.gpg.asc&amp;quot; release: script: | mvn versions:set &amp;quot;-DnewVersion=${tag}&amp;quot; git commit -am &amp;quot;${tag}&amp;quot; mvn clean deploy -Pjcabi --settings /home/r/settings.xml&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;You can compare your file with live Rultor &lt;a href=&quot;https://github.com/jcabi/jcabi-aspects/blob/master/.rultor.yml&quot;&gt;configuration of jcabi-aspects&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;run-it&quot;&gt;Run It!&lt;/h2&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/logo.svg&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;Now it’s time to see how it all works. Create a new ticket in the GitHub issue tracker, and post something like that into it (read more about &lt;a href=&quot;http://doc.rultor.com/basics.html&quot;&gt;Rultor commands&lt;/a&gt;):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;@rultor release, tag is `0.1`&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;You will get a response in a few seconds. The rest will be done by Rultor.&lt;/p&gt; &lt;p&gt;Enjoy :)&lt;/p&gt; &lt;p&gt;BTW, if something doesn’t work as I’ve explained, don’t hesitate to submit a ticket to &lt;a href=&quot;https://github.com/yegor256/rultor/issues&quot;&gt;Rultor issue tracker&lt;/a&gt;. I will try to help you.&lt;/p&gt; &lt;p&gt;Yeah, forgot to mention, Rultor is also doing two important things. First, it creates a GitHub release with a proper description. Second, it posts a tweet about the release, which you can retweet, to make an announcement to your followers. Both features are very convenient for me. For example:&lt;/p&gt; &lt;blockquote class=&quot;twitter-tweet&quot; lang=&quot;en&quot;&gt;&lt;p&gt;DynamoDB Local Maven Plugin, 0.7.1 released &lt;a href=&quot;https://t.co/C3KULouuKS&quot;&gt;https://t.co/C3KULouuKS&lt;/a&gt;&lt;/p&gt;---rultor.com (@rultors) &lt;a href=&quot;https://twitter.com/rultors/statuses/501617747269517312&quot;&gt;August 19, 2014&lt;/a&gt;&lt;/blockquote&gt; &lt;script async=&quot;&quot; src=&quot;http://platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt; " /> <meta name="keywords" content="next, path, output, content, previous, url, relative_path, id, collection, excerpt, draft, categories, layout, title, date, tags, description, keywords, slug, ext" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-08-19 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="How to Release to Maven Central, in One Click"/> <meta name="twitter:description" property="og:description" content="&lt;p&gt;When I release a new version of &lt;a href=&quot;http://aspects.jcabi.com&quot;&gt;jcabi-aspects&lt;/a&gt;, a Java open source library, to Maven Central, it takes 30 seconds of my time. Maybe even less. Recently, I released version 0.17.2. You can see how it all happened, in &lt;a href=&quot;https://github.com/jcabi/jcabi-aspects/issues/80&quot;&gt;GitHub issue #80&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;unprintable&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/08/github-ticket-80.jpg&quot; itemprop=&quot;image&quot; style=&quot;width:600px;max-width:100%;&quot; alt=&quot;The figure&quot; /&gt;&lt;/figure&gt; &lt;p&gt;As you see, I gave a command to &lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor&lt;/a&gt;, and it released a new version to Maven central. I didn’t do anything else.&lt;/p&gt; &lt;p&gt;Now let’s see how you can do the same. How you can configure your project so that the release of its new version to Maven Central takes just a few seconds of your time.&lt;/p&gt; &lt;!--more--&gt; &lt;p&gt;By the way, I assume that you’re hosting your project in GitHub. If not, this entire tutorial won’t work. If you are still not in GitHub, I would strongly recommend moving there.&lt;/p&gt; &lt;h2 id=&quot;prepare-your-pom&quot;&gt;Prepare Your POM&lt;/h2&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=rEK3Rk2lX3M&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/rEK3Rk2lX3M/mqdefault.jpg&quot; alt=&quot;YouTube video #rEK3Rk2lX3M&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Cactoos 0.12 polishing and releasing (webinar #27); 2 August 2017.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;Make sure your &lt;code&gt;pom.xml&lt;/code&gt; contains all elements required by Sonatype, explained in &lt;a href=&quot;http://central.sonatype.org/pages/requirements.html&quot;&gt;Central Sync Requirements&lt;/a&gt;. We will deploy to Sonatype, and they will synchronize all JAR (and not only) artifacts to Maven Central.&lt;/p&gt; &lt;h2 id=&quot;register-a-project-with-sonatype&quot;&gt;Register a Project With Sonatype&lt;/h2&gt; &lt;p&gt;Create an account in &lt;a href=&quot;https://issues.sonatype.org/&quot;&gt;Sonatype JIRA&lt;/a&gt; and raise a ticket, asking to approve your &lt;code&gt;groupId&lt;/code&gt;. This &lt;a href=&quot;http://central.sonatype.org/pages/ossrh-guide.html&quot;&gt;OSSRH Guide&lt;/a&gt; explains this step in more detail.&lt;/p&gt; &lt;h2 id=&quot;create-and-distribute-a-gpg-key&quot;&gt;Create and Distribute a GPG Key&lt;/h2&gt; &lt;p&gt;Create a GPG key and distribute it, as explained in this &lt;a href=&quot;http://central.sonatype.org/pages/working-with-pgp-signatures.html&quot;&gt;Working with PGP Signatures&lt;/a&gt; article.&lt;/p&gt; &lt;p&gt;When this step is done, you should have two files: &lt;code&gt;pubring.gpg&lt;/code&gt; and &lt;code&gt;secring.gpg&lt;/code&gt;.&lt;/p&gt; &lt;h2 id=&quot;create-settingsxml&quot;&gt;Create settings.xml&lt;/h2&gt; &lt;p&gt;Create &lt;code&gt;settings.xml&lt;/code&gt;, next to the two &lt;code&gt;.gpg&lt;/code&gt; files created in the previous step:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;settings&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;profiles&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;profile&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;foo&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- give it the name of your project --&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;properties&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;gpg.homedir&amp;gt;&lt;/span&gt;/home/r&lt;span class=&quot;nt&quot;&gt;&amp;lt;/gpg.homedir&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;gpg.keyname&amp;gt;&lt;/span&gt;9A105525&lt;span class=&quot;nt&quot;&gt;&amp;lt;/gpg.keyname&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;gpg.passphrase&amp;gt;&lt;/span&gt;my-secret&lt;span class=&quot;nt&quot;&gt;&amp;lt;/gpg.passphrase&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/properties&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/profile&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/profiles&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;servers&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;server&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;oss.sonatype.org&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;username&amp;gt;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Sonatype JIRA user name --&amp;gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;/username&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;password&amp;gt;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Sonatype JIRA pwd --&amp;gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;/password&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/server&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/servers&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/settings&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;In this example, &lt;code&gt;9A105525&lt;/code&gt; is the ID of your public key, and &lt;code&gt;my-secret&lt;/code&gt; is the pass phrase you have used while generating the keys.&lt;/p&gt; &lt;h2 id=&quot;encrypt-security-assets&quot;&gt;Encrypt Security Assets&lt;/h2&gt; &lt;p&gt;Now, encrypt these three files with a &lt;a href=&quot;https://github.com/yegor256/rultor-remote&quot;&gt;rultor remote&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;$ gem install rultor $ rultor encrypt -p me/test pubring.gpg $ rultor encrypt -p me/test secring.gpg $ rultor encrypt -p me/test settings.xml&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Instead of &lt;code&gt;me/test&lt;/code&gt; you should use the name of your GitHub project.&lt;/p&gt; &lt;p&gt;You will get three new files: &lt;code&gt;pubring.gpg.asc&lt;/code&gt;, &lt;code&gt;secring.gpg.asc&lt;/code&gt; and &lt;code&gt;settings.xml.asc&lt;/code&gt;. Add them to the root directory of your project, commit and push. The files contain your secret information, but only the Rultor server can decrypt them.&lt;/p&gt; &lt;h2 id=&quot;add-sonatype-repositories&quot;&gt;Add Sonatype Repositories&lt;/h2&gt; &lt;p&gt;I would recommend using &lt;a href=&quot;/2015/02/05/jcabi-parent-maven-pom.html&quot;&gt;jcabi-parent&lt;/a&gt;, as a parent pom for your project. This will make many further steps unnecessary. If you’re using jcabi-parent, skip this step.&lt;/p&gt; &lt;p&gt;However, if you don’t use jcabi-parent, you should add these two repositories to your &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;project&amp;gt;&lt;/span&gt; [...] &lt;span class=&quot;nt&quot;&gt;&amp;lt;distributionManagement&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;repository&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;oss.sonatype.org&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;url&amp;gt;&lt;/span&gt;https://oss.sonatype.org/service/local/staging/deploy/maven2/&lt;span class=&quot;nt&quot;&gt;&amp;lt;/url&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/repository&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;snapshotRepository&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;oss.sonatype.org&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;url&amp;gt;&lt;/span&gt;https://oss.sonatype.org/content/repositories/snapshots&lt;span class=&quot;nt&quot;&gt;&amp;lt;/url&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/snapshotRepository&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/distributionManagement&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;h2 id=&quot;configure-gpg-plugin&quot;&gt;Configure GPG Plugin&lt;/h2&gt; &lt;p&gt;Again, I’d recommend using &lt;a href=&quot;http://parent.jcabi.com&quot;&gt;jcabi-parent&lt;/a&gt;, which configures this plugin automatically. If you’re using it, skip this step.&lt;/p&gt; &lt;p&gt;Otherwise, add this plugin to your &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;project&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;build&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-gpg-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.5&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;executions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;execution&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;sign-artifacts&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;phase&amp;gt;&lt;/span&gt;verify&lt;span class=&quot;nt&quot;&gt;&amp;lt;/phase&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goals&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goal&amp;gt;&lt;/span&gt;sign&lt;span class=&quot;nt&quot;&gt;&amp;lt;/goal&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/goals&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/execution&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/executions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/build&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;h2 id=&quot;configure-versions-plugin&quot;&gt;Configure Versions Plugin&lt;/h2&gt; &lt;p&gt;Once again, I recommend using &lt;a href=&quot;/2015/02/05/jcabi-parent-maven-pom.html&quot;&gt;http://parent.jcabi.com&lt;/a&gt;. It configures all required plugins out-of-the-box. If you’re using it, skip this step.&lt;/p&gt; &lt;p&gt;Otherwise, add this plugin to your &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;project&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;build&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.codehaus.mojo&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;versions-maven-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.1&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;generateBackupPoms&amp;gt;&lt;/span&gt;false&lt;span class=&quot;nt&quot;&gt;&amp;lt;/generateBackupPoms&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/build&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;h2 id=&quot;configure-sonatype-plugin&quot;&gt;Configure Sonatype Plugin&lt;/h2&gt; &lt;p&gt;Yes, you’re right, &lt;a href=&quot;/2015/02/05/jcabi-parent-maven-pom.html&quot;&gt;http://parent.jcabi.com&lt;/a&gt; will help you here as well. If you’re using it, skip this step too.&lt;/p&gt; &lt;p&gt;Otherwise, add these four plugins to your &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;project&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;build&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt; [..] &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-deploy-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;skip&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/skip&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-source-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;executions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;execution&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;package-sources&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goals&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goal&amp;gt;&lt;/span&gt;jar&lt;span class=&quot;nt&quot;&gt;&amp;lt;/goal&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/goals&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/execution&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/executions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-javadoc-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;executions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;execution&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;package-javadoc&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;phase&amp;gt;&lt;/span&gt;package&lt;span class=&quot;nt&quot;&gt;&amp;lt;/phase&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goals&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goal&amp;gt;&lt;/span&gt;jar&lt;span class=&quot;nt&quot;&gt;&amp;lt;/goal&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/goals&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/execution&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/executions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.sonatype.plugins&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;nexus-staging-maven-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.6&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;extensions&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/extensions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;serverId&amp;gt;&lt;/span&gt;oss.sonatype.org&lt;span class=&quot;nt&quot;&gt;&amp;lt;/serverId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;nexusUrl&amp;gt;&lt;/span&gt;https://oss.sonatype.org/&lt;span class=&quot;nt&quot;&gt;&amp;lt;/nexusUrl&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;description&amp;gt;&lt;/span&gt;${project.version}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/description&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;executions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;execution&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;deploy-to-sonatype&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;phase&amp;gt;&lt;/span&gt;deploy&lt;span class=&quot;nt&quot;&gt;&amp;lt;/phase&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goals&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goal&amp;gt;&lt;/span&gt;deploy&lt;span class=&quot;nt&quot;&gt;&amp;lt;/goal&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;goal&amp;gt;&lt;/span&gt;release&lt;span class=&quot;nt&quot;&gt;&amp;lt;/goal&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/goals&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/execution&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/executions&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/build&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;h2 id=&quot;create-rultor-configuration&quot;&gt;Create Rultor Configuration&lt;/h2&gt; &lt;p&gt;Create a &lt;code&gt;.rultor.yml&lt;/code&gt; file in the root directory of your project (&lt;a href=&quot;http://doc.rultor.com/reference.html&quot;&gt;reference page&lt;/a&gt; explains this format in details):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;decrypt: settings.xml: &amp;quot;repo/settings.xml.asc&amp;quot; pubring.gpg: &amp;quot;repo/pubring.gpg.asc&amp;quot; secring.gpg: &amp;quot;repo/secring.gpg.asc&amp;quot; release: script: | mvn versions:set &amp;quot;-DnewVersion=${tag}&amp;quot; git commit -am &amp;quot;${tag}&amp;quot; mvn clean deploy -Pjcabi --settings /home/r/settings.xml&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;You can compare your file with live Rultor &lt;a href=&quot;https://github.com/jcabi/jcabi-aspects/blob/master/.rultor.yml&quot;&gt;configuration of jcabi-aspects&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;run-it&quot;&gt;Run It!&lt;/h2&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/logo.svg&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;Now it’s time to see how it all works. Create a new ticket in the GitHub issue tracker, and post something like that into it (read more about &lt;a href=&quot;http://doc.rultor.com/basics.html&quot;&gt;Rultor commands&lt;/a&gt;):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;@rultor release, tag is `0.1`&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;You will get a response in a few seconds. The rest will be done by Rultor.&lt;/p&gt; &lt;p&gt;Enjoy :)&lt;/p&gt; &lt;p&gt;BTW, if something doesn’t work as I’ve explained, don’t hesitate to submit a ticket to &lt;a href=&quot;https://github.com/yegor256/rultor/issues&quot;&gt;Rultor issue tracker&lt;/a&gt;. I will try to help you.&lt;/p&gt; &lt;p&gt;Yeah, forgot to mention, Rultor is also doing two important things. First, it creates a GitHub release with a proper description. Second, it posts a tweet about the release, which you can retweet, to make an announcement to your followers. Both features are very convenient for me. For example:&lt;/p&gt; &lt;blockquote class=&quot;twitter-tweet&quot; lang=&quot;en&quot;&gt;&lt;p&gt;DynamoDB Local Maven Plugin, 0.7.1 released &lt;a href=&quot;https://t.co/C3KULouuKS&quot;&gt;https://t.co/C3KULouuKS&lt;/a&gt;&lt;/p&gt;---rultor.com (@rultors) &lt;a href=&quot;https://twitter.com/rultors/statuses/501617747269517312&quot;&gt;August 19, 2014&lt;/a&gt;&lt;/blockquote&gt; &lt;script async=&quot;&quot; src=&quot;http://platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt; "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?23bb3130b4f"/> <link rel="apple-touch-icon" href="/favicon.ico?23bb3130b4f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?23bb3130b4f"/> <link rel="stylesheet" href="/css/icons.css?23bb3130b4f"/> <link rel="canonical" href="https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.amp.html" /> <title>How to Release to Maven Central, in One Click </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /2014/08/19/how-to-release-to-maven-central.html><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /2014/08/19/how-to-release-to-maven-central.html><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /2014/08/19/how-to-release-to-maven-central.html><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /2014/08/19/how-to-release-to-maven-central.html><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /2014/08/19/how-to-release-to-maven-central.html><a href="/books.html" title="The books I wrote">Books</a></li> <li /2014/08/19/how-to-release-to-maven-central.html><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /2014/08/19/how-to-release-to-maven-central.html><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /2014/08/19/how-to-release-to-maven-central.html class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /2014/08/19/how-to-release-to-maven-central.html><a href="/award.html" title="Software quality award">Award</a></li> <li /2014/08/19/how-to-release-to-maven-central.html><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /2014/08/19/how-to-release-to-maven-central.html><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /2014/08/19/how-to-release-to-maven-central.html><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html</code></p><h1 itemprop="name headline mainEntityOfPage">How to Release to Maven Central, in One Click</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-08-19T00:00:00+00:00"> 19 August 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>When I release a new version of <a href="http://aspects.jcabi.com">jcabi-aspects</a>, a Java open source library, to Maven Central, it takes 30 seconds of my time. Maybe even less. Recently, I released version 0.17.2. You can see how it all happened, in <a href="https://github.com/jcabi/jcabi-aspects/issues/80">GitHub issue #80</a>:</p><figure class="unprintable"><img src="https://www.yegor256.com/images/2014/08/github-ticket-80.jpg" itemprop="image" style="width:600px;max-width:100%;" alt="The figure" /></figure><p>As you see, I gave a command to <a href="http://www.rultor.com">Rultor</a>, and it released a new version to Maven central. I didn’t do anything else.</p><p>Now let’s see how you can do the same. How you can configure your project so that the release of its new version to Maven Central takes just a few seconds of your time.</p><p>By the way, I assume that you’re hosting your project in GitHub. If not, this entire tutorial won’t work. If you are still not in GitHub, I would strongly recommend moving there.</p><h2 id="prepare-your-pom">Prepare Your POM</h2><aside class="youtube"> <a href="https://www.youtube.com/watch?v=rEK3Rk2lX3M"><div class="box"> <img src="https://i.ytimg.com/vi/rEK3Rk2lX3M/mqdefault.jpg" alt="YouTube video #rEK3Rk2lX3M" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Cactoos 0.12 polishing and releasing (webinar #27); 2 August 2017.</div></aside><p>Make sure your <code>pom.xml</code> contains all elements required by Sonatype, explained in <a href="http://central.sonatype.org/pages/requirements.html">Central Sync Requirements</a>. We will deploy to Sonatype, and they will synchronize all JAR (and not only) artifacts to Maven Central.</p><h2 id="register-a-project-with-sonatype">Register a Project With Sonatype</h2><p>Create an account in <a href="https://issues.sonatype.org/">Sonatype JIRA</a> and raise a ticket, asking to approve your <code>groupId</code>. This <a href="http://central.sonatype.org/pages/ossrh-guide.html">OSSRH Guide</a> explains this step in more detail.</p><h2 id="create-and-distribute-a-gpg-key">Create and Distribute a GPG Key</h2><p>Create a GPG key and distribute it, as explained in this <a href="http://central.sonatype.org/pages/working-with-pgp-signatures.html">Working with PGP Signatures</a> article.</p><p>When this step is done, you should have two files: <code>pubring.gpg</code> and <code>secring.gpg</code>.</p><h2 id="create-settingsxml">Create settings.xml</h2><p>Create <code>settings.xml</code>, next to the two <code>.gpg</code> files created in the previous step:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;settings&gt;</span>
  <span class="nt">&lt;profiles&gt;</span>
    <span class="nt">&lt;profile&gt;</span>
      <span class="nt">&lt;id&gt;</span>foo<span class="nt">&lt;/id&gt;</span> <span class="c">&lt;!-- give it the name of your project --&gt;</span>
      <span class="nt">&lt;properties&gt;</span>
        <span class="nt">&lt;gpg.homedir&gt;</span>/home/r<span class="nt">&lt;/gpg.homedir&gt;</span>
        <span class="nt">&lt;gpg.keyname&gt;</span>9A105525<span class="nt">&lt;/gpg.keyname&gt;</span>
        <span class="nt">&lt;gpg.passphrase&gt;</span>my-secret<span class="nt">&lt;/gpg.passphrase&gt;</span>
      <span class="nt">&lt;/properties&gt;</span>
    <span class="nt">&lt;/profile&gt;</span>
  <span class="nt">&lt;/profiles&gt;</span>
  <span class="nt">&lt;servers&gt;</span>
    <span class="nt">&lt;server&gt;</span>
      <span class="nt">&lt;id&gt;</span>oss.sonatype.org<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;username&gt;</span><span class="c">&lt;!-- Sonatype JIRA user name --&gt;</span><span class="nt">&lt;/username&gt;</span>
      <span class="nt">&lt;password&gt;</span><span class="c">&lt;!-- Sonatype JIRA pwd --&gt;</span><span class="nt">&lt;/password&gt;</span>
    <span class="nt">&lt;/server&gt;</span>
  <span class="nt">&lt;/servers&gt;</span>
<span class="nt">&lt;/settings&gt;</span></code></pre></figure><p>In this example, <code>9A105525</code> is the ID of your public key, and <code>my-secret</code> is the pass phrase you have used while generating the keys.</p><h2 id="encrypt-security-assets">Encrypt Security Assets</h2><p>Now, encrypt these three files with a <a href="https://github.com/yegor256/rultor-remote">rultor remote</a>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>$ gem install rultor
$ rultor encrypt -p me/test pubring.gpg
$ rultor encrypt -p me/test secring.gpg
$ rultor encrypt -p me/test settings.xml</code></pre></figure><p>Instead of <code>me/test</code> you should use the name of your GitHub project.</p><p>You will get three new files: <code>pubring.gpg.asc</code>, <code>secring.gpg.asc</code> and <code>settings.xml.asc</code>. Add them to the root directory of your project, commit and push. The files contain your secret information, but only the Rultor server can decrypt them.</p><h2 id="add-sonatype-repositories">Add Sonatype Repositories</h2><p>I would recommend using <a href="/2015/02/05/jcabi-parent-maven-pom.html">jcabi-parent</a>, as a parent pom for your project. This will make many further steps unnecessary. If you’re using jcabi-parent, skip this step.</p><p>However, if you don’t use jcabi-parent, you should add these two repositories to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  [...]
  <span class="nt">&lt;distributionManagement&gt;</span>
    <span class="nt">&lt;repository&gt;</span>
      <span class="nt">&lt;id&gt;</span>oss.sonatype.org<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;url&gt;</span>https://oss.sonatype.org/service/local/staging/deploy/maven2/<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
    <span class="nt">&lt;snapshotRepository&gt;</span>
      <span class="nt">&lt;id&gt;</span>oss.sonatype.org<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;url&gt;</span>https://oss.sonatype.org/content/repositories/snapshots<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/snapshotRepository&gt;</span>
  <span class="nt">&lt;/distributionManagement&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><h2 id="configure-gpg-plugin">Configure GPG Plugin</h2><p>Again, I’d recommend using <a href="http://parent.jcabi.com">jcabi-parent</a>, which configures this plugin automatically. If you’re using it, skip this step.</p><p>Otherwise, add this plugin to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  [..]
  <span class="nt">&lt;build&gt;</span>
    [..]
    <span class="nt">&lt;plugins&gt;</span>
      [..]
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-gpg-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.5<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>sign-artifacts<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;phase&gt;</span>verify<span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>sign<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><h2 id="configure-versions-plugin">Configure Versions Plugin</h2><p>Once again, I recommend using <a href="/2015/02/05/jcabi-parent-maven-pom.html">http://parent.jcabi.com</a>. It configures all required plugins out-of-the-box. If you’re using it, skip this step.</p><p>Otherwise, add this plugin to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  [..]
  <span class="nt">&lt;build&gt;</span>
    [..]
    <span class="nt">&lt;plugins&gt;</span>
      [..]
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>versions-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>2.1<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;generateBackupPoms&gt;</span>false<span class="nt">&lt;/generateBackupPoms&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><h2 id="configure-sonatype-plugin">Configure Sonatype Plugin</h2><p>Yes, you’re right, <a href="/2015/02/05/jcabi-parent-maven-pom.html">http://parent.jcabi.com</a> will help you here as well. If you’re using it, skip this step too.</p><p>Otherwise, add these four plugins to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  [..]
  <span class="nt">&lt;build&gt;</span>
    [..]
    <span class="nt">&lt;plugins&gt;</span>
      [..]
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-deploy-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;skip&gt;</span>true<span class="nt">&lt;/skip&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-source-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>package-sources<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>jar<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-javadoc-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>package-javadoc<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>jar<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.sonatype.plugins<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>nexus-staging-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.6<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;extensions&gt;</span>true<span class="nt">&lt;/extensions&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;serverId&gt;</span>oss.sonatype.org<span class="nt">&lt;/serverId&gt;</span>
          <span class="nt">&lt;nexusUrl&gt;</span>https://oss.sonatype.org/<span class="nt">&lt;/nexusUrl&gt;</span>
          <span class="nt">&lt;description&gt;</span>${project.version}<span class="nt">&lt;/description&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>deploy-to-sonatype<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;phase&gt;</span>deploy<span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>deploy<span class="nt">&lt;/goal&gt;</span>
              <span class="nt">&lt;goal&gt;</span>release<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><h2 id="create-rultor-configuration">Create Rultor Configuration</h2><p>Create a <code>.rultor.yml</code> file in the root directory of your project (<a href="http://doc.rultor.com/reference.html">reference page</a> explains this format in details):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>decrypt:
  settings.xml: &quot;repo/settings.xml.asc&quot;
  pubring.gpg: &quot;repo/pubring.gpg.asc&quot;
  secring.gpg: &quot;repo/secring.gpg.asc&quot;
release:
  script: |
    mvn versions:set &quot;-DnewVersion=${tag}&quot;
    git commit -am &quot;${tag}&quot;
    mvn clean deploy -Pjcabi --settings /home/r/settings.xml</code></pre></figure><p>You can compare your file with live Rultor <a href="https://github.com/jcabi/jcabi-aspects/blob/master/.rultor.yml">configuration of jcabi-aspects</a>.</p><h2 id="run-it">Run It!</h2><figure class="badge"><a href="http://www.rultor.com"><img src="http://doc.rultor.com/images/logo.svg" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p>Now it’s time to see how it all works. Create a new ticket in the GitHub issue tracker, and post something like that into it (read more about <a href="http://doc.rultor.com/basics.html">Rultor commands</a>):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>@rultor release, tag is `0.1`</code></pre></figure><p>You will get a response in a few seconds. The rest will be done by Rultor.</p><p>Enjoy :)</p><p>BTW, if something doesn’t work as I’ve explained, don’t hesitate to submit a ticket to <a href="https://github.com/yegor256/rultor/issues">Rultor issue tracker</a>. I will try to help you.</p><p>Yeah, forgot to mention, Rultor is also doing two important things. First, it creates a GitHub release with a proper description. Second, it posts a tweet about the release, which you can retweet, to make an announcement to your followers. Both features are very convenient for me. For example:</p><blockquote class="twitter-tweet" lang="en"><p>DynamoDB Local Maven Plugin, 0.7.1 released <a href="https://t.co/C3KULouuKS">https://t.co/C3KULouuKS</a></p>---rultor.com (@rultors) <a href="https://twitter.com/rultors/statuses/501617747269517312">August 19, 2014</a></blockquote> <script async="" src="http://platform.twitter.com/widgets.js" charset="utf-8"></script></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html&amp;text=How+to+Release+to+Maven+Central%2C+in+One+Click" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html%3F2014-33&amp;title=How+to+Release+to+Maven+Central%2C+in+One+Click" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/08/19/how-to-release-to-maven-central.html%3F2014-33&amp;t=How+to+Release+to+Maven+Central%2C+in+One+Click" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>When I release a new version of <a href="http://aspects.jcabi.com">jcabi-aspects</a>, a Java open source library, to Maven Central, it takes 30 seconds of my time. Maybe even less. Recently, I released version 0.17.2. You can see how it all happened, in <a href="https://github.com/jcabi/jcabi-aspects/issues/80">GitHub issue #80</a>:</p><figure class="unprintable"><img src="https://www.yegor256.com/images/2014/08/github-ticket-80.jpg" itemprop="image" style="width:600px;max-width:100%;" alt="The figure" /></figure><p>As you see, I gave a command to <a href="http://www.rultor.com">Rultor</a>, and it released a new version to Maven central. I didn’t do anything else.</p><p>Now let’s see how you can do the same. How you can configure your project so that the release of its new version to Maven Central takes just a few seconds of your time.</p><p>By the way, I assume that you’re hosting your project in GitHub. If not, this entire tutorial won’t work. If you are still not in GitHub, I would strongly recommend moving there.</p><h2 id="prepare-your-pom">Prepare Your POM</h2><aside class="youtube"> <a href="https://www.youtube.com/watch?v=rEK3Rk2lX3M"><div class="box"> <img src="https://i.ytimg.com/vi/rEK3Rk2lX3M/mqdefault.jpg" alt="YouTube video #rEK3Rk2lX3M" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Cactoos 0.12 polishing and releasing (webinar #27); 2 August 2017.</div></aside><p>Make sure your <code>pom.xml</code> contains all elements required by Sonatype, explained in <a href="http://central.sonatype.org/pages/requirements.html">Central Sync Requirements</a>. We will deploy to Sonatype, and they will synchronize all JAR (and not only) artifacts to Maven Central.</p><h2 id="register-a-project-with-sonatype">Register a Project With Sonatype</h2><p>Create an account in <a href="https://issues.sonatype.org/">Sonatype JIRA</a> and raise a ticket, asking to approve your <code>groupId</code>. This <a href="http://central.sonatype.org/pages/ossrh-guide.html">OSSRH Guide</a> explains this step in more detail.</p><h2 id="create-and-distribute-a-gpg-key">Create and Distribute a GPG Key</h2><p>Create a GPG key and distribute it, as explained in this <a href="http://central.sonatype.org/pages/working-with-pgp-signatures.html">Working with PGP Signatures</a> article.</p><p>When this step is done, you should have two files: <code>pubring.gpg</code> and <code>secring.gpg</code>.</p><h2 id="create-settingsxml">Create settings.xml</h2><p>Create <code>settings.xml</code>, next to the two <code>.gpg</code> files created in the previous step:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;settings&gt;</span>
  <span class="nt">&lt;profiles&gt;</span>
    <span class="nt">&lt;profile&gt;</span>
      <span class="nt">&lt;id&gt;</span>foo<span class="nt">&lt;/id&gt;</span> <span class="c">&lt;!-- give it the name of your project --&gt;</span>
      <span class="nt">&lt;properties&gt;</span>
        <span class="nt">&lt;gpg.homedir&gt;</span>/home/r<span class="nt">&lt;/gpg.homedir&gt;</span>
        <span class="nt">&lt;gpg.keyname&gt;</span>9A105525<span class="nt">&lt;/gpg.keyname&gt;</span>
        <span class="nt">&lt;gpg.passphrase&gt;</span>my-secret<span class="nt">&lt;/gpg.passphrase&gt;</span>
      <span class="nt">&lt;/properties&gt;</span>
    <span class="nt">&lt;/profile&gt;</span>
  <span class="nt">&lt;/profiles&gt;</span>
  <span class="nt">&lt;servers&gt;</span>
    <span class="nt">&lt;server&gt;</span>
      <span class="nt">&lt;id&gt;</span>oss.sonatype.org<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;username&gt;</span><span class="c">&lt;!-- Sonatype JIRA user name --&gt;</span><span class="nt">&lt;/username&gt;</span>
      <span class="nt">&lt;password&gt;</span><span class="c">&lt;!-- Sonatype JIRA pwd --&gt;</span><span class="nt">&lt;/password&gt;</span>
    <span class="nt">&lt;/server&gt;</span>
  <span class="nt">&lt;/servers&gt;</span>
<span class="nt">&lt;/settings&gt;</span></code></pre></figure><p>In this example, <code>9A105525</code> is the ID of your public key, and <code>my-secret</code> is the pass phrase you have used while generating the keys.</p><h2 id="encrypt-security-assets">Encrypt Security Assets</h2><p>Now, encrypt these three files with a <a href="https://github.com/yegor256/rultor-remote">rultor remote</a>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span>$ gem install rultor
$ rultor encrypt -p me/test pubring.gpg
$ rultor encrypt -p me/test secring.gpg
$ rultor encrypt -p me/test settings.xml</code></pre></figure><p>Instead of <code>me/test</code> you should use the name of your GitHub project.</p><p>You will get three new files: <code>pubring.gpg.asc</code>, <code>secring.gpg.asc</code> and <code>settings.xml.asc</code>. Add them to the root directory of your project, commit and push. The files contain your secret information, but only the Rultor server can decrypt them.</p><h2 id="add-sonatype-repositories">Add Sonatype Repositories</h2><p>I would recommend using <a href="/2015/02/05/jcabi-parent-maven-pom.html">jcabi-parent</a>, as a parent pom for your project. This will make many further steps unnecessary. If you’re using jcabi-parent, skip this step.</p><p>However, if you don’t use jcabi-parent, you should add these two repositories to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  [...]
  <span class="nt">&lt;distributionManagement&gt;</span>
    <span class="nt">&lt;repository&gt;</span>
      <span class="nt">&lt;id&gt;</span>oss.sonatype.org<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;url&gt;</span>https://oss.sonatype.org/service/local/staging/deploy/maven2/<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
    <span class="nt">&lt;snapshotRepository&gt;</span>
      <span class="nt">&lt;id&gt;</span>oss.sonatype.org<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;url&gt;</span>https://oss.sonatype.org/content/repositories/snapshots<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/snapshotRepository&gt;</span>
  <span class="nt">&lt;/distributionManagement&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><h2 id="configure-gpg-plugin">Configure GPG Plugin</h2><p>Again, I’d recommend using <a href="http://parent.jcabi.com">jcabi-parent</a>, which configures this plugin automatically. If you’re using it, skip this step.</p><p>Otherwise, add this plugin to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  [..]
  <span class="nt">&lt;build&gt;</span>
    [..]
    <span class="nt">&lt;plugins&gt;</span>
      [..]
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-gpg-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.5<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>sign-artifacts<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;phase&gt;</span>verify<span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>sign<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><h2 id="configure-versions-plugin">Configure Versions Plugin</h2><p>Once again, I recommend using <a href="/2015/02/05/jcabi-parent-maven-pom.html">http://parent.jcabi.com</a>. It configures all required plugins out-of-the-box. If you’re using it, skip this step.</p><p>Otherwise, add this plugin to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  [..]
  <span class="nt">&lt;build&gt;</span>
    [..]
    <span class="nt">&lt;plugins&gt;</span>
      [..]
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>versions-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>2.1<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;generateBackupPoms&gt;</span>false<span class="nt">&lt;/generateBackupPoms&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><h2 id="configure-sonatype-plugin">Configure Sonatype Plugin</h2><p>Yes, you’re right, <a href="/2015/02/05/jcabi-parent-maven-pom.html">http://parent.jcabi.com</a> will help you here as well. If you’re using it, skip this step too.</p><p>Otherwise, add these four plugins to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project&gt;</span>
  [..]
  <span class="nt">&lt;build&gt;</span>
    [..]
    <span class="nt">&lt;plugins&gt;</span>
      [..]
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-deploy-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;skip&gt;</span>true<span class="nt">&lt;/skip&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-source-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>package-sources<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>jar<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-javadoc-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>package-javadoc<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>jar<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.sonatype.plugins<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>nexus-staging-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.6<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;extensions&gt;</span>true<span class="nt">&lt;/extensions&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;serverId&gt;</span>oss.sonatype.org<span class="nt">&lt;/serverId&gt;</span>
          <span class="nt">&lt;nexusUrl&gt;</span>https://oss.sonatype.org/<span class="nt">&lt;/nexusUrl&gt;</span>
          <span class="nt">&lt;description&gt;</span>${project.version}<span class="nt">&lt;/description&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>deploy-to-sonatype<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;phase&gt;</span>deploy<span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>deploy<span class="nt">&lt;/goal&gt;</span>
              <span class="nt">&lt;goal&gt;</span>release<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure><h2 id="create-rultor-configuration">Create Rultor Configuration</h2><p>Create a <code>.rultor.yml</code> file in the root directory of your project (<a href="http://doc.rultor.com/reference.html">reference page</a> explains this format in details):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>decrypt:
  settings.xml: &quot;repo/settings.xml.asc&quot;
  pubring.gpg: &quot;repo/pubring.gpg.asc&quot;
  secring.gpg: &quot;repo/secring.gpg.asc&quot;
release:
  script: |
    mvn versions:set &quot;-DnewVersion=${tag}&quot;
    git commit -am &quot;${tag}&quot;
    mvn clean deploy -Pjcabi --settings /home/r/settings.xml</code></pre></figure><p>You can compare your file with live Rultor <a href="https://github.com/jcabi/jcabi-aspects/blob/master/.rultor.yml">configuration of jcabi-aspects</a>.</p><h2 id="run-it">Run It!</h2><figure class="badge"><a href="http://www.rultor.com"><img src="http://doc.rultor.com/images/logo.svg" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p>Now it’s time to see how it all works. Create a new ticket in the GitHub issue tracker, and post something like that into it (read more about <a href="http://doc.rultor.com/basics.html">Rultor commands</a>):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>@rultor release, tag is `0.1`</code></pre></figure><p>You will get a response in a few seconds. The rest will be done by Rultor.</p><p>Enjoy :)</p><p>BTW, if something doesn’t work as I’ve explained, don’t hesitate to submit a ticket to <a href="https://github.com/yegor256/rultor/issues">Rultor issue tracker</a>. I will try to help you.</p><p>Yeah, forgot to mention, Rultor is also doing two important things. First, it creates a GitHub release with a proper description. Second, it posts a tweet about the release, which you can retweet, to make an announcement to your followers. Both features are very convenient for me. For example:</p><blockquote class="twitter-tweet" lang="en"><p>DynamoDB Local Maven Plugin, 0.7.1 released <a href="https://t.co/C3KULouuKS">https://t.co/C3KULouuKS</a></p>---rultor.com (@rultors) <a href="https://twitter.com/rultors/statuses/501617747269517312">August 19, 2014</a></blockquote> <script async="" src="http://platform.twitter.com/widgets.js" charset="utf-8"></script></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?23bb3130b4f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="&lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.travis-ci.org&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/07/travis-logo.png&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/logo.svg&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor&lt;/a&gt; is a coding team assistant. &lt;a href=&quot;http://travis-ci.org&quot;&gt;Travis&lt;/a&gt; is a hosted &lt;a href=&quot;/2014/10/08/continuous-integration-is-dead.html&quot;&gt;continuous integration&lt;/a&gt; system. In this article I’ll show how our open source projects are using them in tandem to achieve seamless continuous delivery.&lt;/p&gt; &lt;p&gt;I’ll show a few practical scenarios.&lt;/p&gt; &lt;!--more--&gt; &lt;h2 id=&quot;scenario-1-merge-pull-request&quot;&gt;Scenario #1: Merge Pull Request&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;https://github.com/jcabi/jcabi-mysql-maven-plugin&quot;&gt;&lt;code&gt;jcabi-mysql-maven-plugin&lt;/code&gt;&lt;/a&gt; is a Maven plugin for &lt;a href=&quot;/2014/05/21/mysql-maven-plugin.html&quot;&gt;MySQL integration testing&lt;/a&gt;. &lt;a href=&quot;https://github.com/ChristianRedl&quot;&gt;&lt;code&gt;@ChristianRedl&lt;/code&gt;&lt;/a&gt; submitted pull request &lt;a href=&quot;https://github.com/jcabi/jcabi-mysql-maven-plugin/pull/35&quot;&gt;#35&lt;/a&gt; with a new feature. I reviewed the request and asked Rultor to merge it into &lt;code&gt;master&lt;/code&gt;:&lt;/p&gt; &lt;figure class=&quot;unprintable&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/07/rultor-mysql-35.png&quot; itemprop=&quot;image&quot; style=&quot;width:600px;max-width:100%;&quot; alt=&quot;The figure&quot; /&gt;&lt;/figure&gt; &lt;p&gt;As you can see, an actual merge operation was made by Rultor. I gave him access to the project by adding his GitHub account to the list of project collaborators.&lt;/p&gt; &lt;p&gt;Before giving a “go ahead” to Rultor I checked the status of the pre-build reported by Travis:&lt;/p&gt; &lt;figure class=&quot;unprintable&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/07/rultor-mysql-35-2.png&quot; itemprop=&quot;image&quot; style=&quot;width:600px;max-width:100%;&quot; alt=&quot;The figure&quot; /&gt;&lt;/figure&gt; &lt;p&gt;Travis found a new commit in the pull request and immediately (without any interaction from my side) triggered a build in that branch. The build didn’t fail, that’s why Travis gave me a green sign. I looked at that sign and at the code. Since all problems in the code were corrected by the pull request author and Travis didn’t complain—I gave a “go” to Rultor.&lt;/p&gt; &lt;h2 id=&quot;scenario-2-continuous-integration&quot;&gt;Scenario #2: Continuous Integration&lt;/h2&gt; &lt;p&gt;Even though the previous step &lt;a href=&quot;/2014/07/21/read-only-master-branch.html&quot;&gt;guarantees&lt;/a&gt; that &lt;code&gt;master&lt;/code&gt; branch is always clean and stable, we’re using Travis to continuously integrate it. Every commit made to &lt;code&gt;master&lt;/code&gt; triggers a new build in Travis. The result of the build changes the status of the project in Travis: either “failing” or “passing.”&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://aspects.jcabi.com&quot;&gt;&lt;code&gt;jcabi-aspects&lt;/code&gt;&lt;/a&gt; is a collection of &lt;a href=&quot;/2014/06/01/aop-aspectj-java-method-logging.html&quot;&gt;AOP AspectJ aspects&lt;/a&gt;. We configured Travis to build it continuously. This is the badge it produces (the left one):&lt;/p&gt; &lt;figure class=&quot;unprintable&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/07/rultor-aspects.png&quot; itemprop=&quot;image&quot; style=&quot;width:600px;max-width:100%;&quot; alt=&quot;The figure&quot; /&gt;&lt;/figure&gt; &lt;p&gt;Again, let me stress that even through &lt;a href=&quot;/2014/07/21/read-only-master-branch.html&quot;&gt;read-only master&lt;/a&gt; is a strong protection against broken builds, it doesn’t guarantee that at any moment master is stable. For example, sometimes unit tests fail sporadically due to changes in calendar, in environment, in dependencies, in network connection qualities, etc.&lt;/p&gt; &lt;p&gt;Well, ideally, unit tests should either fail or pass because they are environment independent. However, in reality, unit tests are far from being ideal.&lt;/p&gt; &lt;p&gt;That’s why a combination of &lt;a href=&quot;/2014/07/21/read-only-master-branch.html&quot;&gt;read-only master&lt;/a&gt; with Rultor and &lt;a href=&quot;/2014/10/08/continuous-integration-is-dead.html&quot;&gt;continuous integration&lt;/a&gt; with Travis gives us higher stability.&lt;/p&gt; &lt;h2 id=&quot;scenario-3-release-to-rubygems&quot;&gt;Scenario #3: Release to RubyGems&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;https://github.com/yegor256/jekyll-github-deploy&quot;&gt;&lt;code&gt;jekyll-github-deploy&lt;/code&gt;&lt;/a&gt; is a Ruby gem that &lt;a href=&quot;/2014/06/24/jekyll-github-deploy.html&quot;&gt;automates deployment of Jekyll sites to GitHub Pages&lt;/a&gt;. &lt;a href=&quot;https://github.com/leucos&quot;&gt;&lt;code&gt;@leucos&lt;/code&gt;&lt;/a&gt; submitted a pull request &lt;a href=&quot;https://github.com/yegor256/jekyll-github-deploy/pull/4&quot;&gt;#4&lt;/a&gt; with a new feature. The request was merged successfully into &lt;code&gt;master&lt;/code&gt; branch.&lt;/p&gt; &lt;p&gt;Then, Rultor was instructed by myself that &lt;code&gt;master&lt;/code&gt; branch should be released to RubyGems and a new version to set is 1.5:&lt;/p&gt; &lt;figure class=&quot;unprintable&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/07/rultor-jekyll-4.png&quot; itemprop=&quot;image&quot; style=&quot;width:600px;max-width:100%;&quot; alt=&quot;The figure&quot; /&gt;&lt;/figure&gt; &lt;p&gt;Rultor executed a simple script, &lt;a href=&quot;http://doc.rultor.com/basics.html#release&quot;&gt;pre-configured&lt;/a&gt; in its &lt;a href=&quot;https://github.com/yegor256/jekyll-github-deploy/blob/master/.rultor.yml&quot;&gt;&lt;code&gt;.rultor.yml&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;release: script: | ./test.sh rm -rf *.gem sed -i &amp;quot;s/2.0-SNAPSHOT/${tag}/g&amp;quot; jgd.gemspec gem build jgd.gemspec chmod 0600 ../rubygems.yml gem push *.gem --config-file ../rubygems.yml&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;The script is parameterized, as you see. There is one parameter that is passed by Rultor into the script: &lt;code&gt;${tag}&lt;/code&gt;. This parameter was provided by myself in the GitHub issue, when I submitted a command to Rultor.&lt;/p&gt; &lt;p&gt;The script tests that the gem works (integration testing) and clean up afterwords:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ ./test.sh $ rm -rf *.gem&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Then, it changes the version of itself in &lt;code&gt;jgd.gemspec&lt;/code&gt; to the one provided in the &lt;code&gt;${tag}&lt;/code&gt; (it is an environment variable), and builds a new &lt;code&gt;.gem&lt;/code&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ sed -i &lt;span class=&quot;s2&quot;&gt;&amp;quot;s/2.0-SNAPSHOT/&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;tag&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/g&amp;quot;&lt;/span&gt; jgd.gemspec $ gem build jgd.gemspec&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Finally, it pushes a newly built &lt;code&gt;.gem&lt;/code&gt; to &lt;a href=&quot;/2014/08/26/publish-to-rubygems.html&quot;&gt;RubyGems&lt;/a&gt;, using login credentials from &lt;code&gt;../rubygems.yml&lt;/code&gt;. This file is created by Rultor right before starting the script (this mechanism is discussed below):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ chmod &lt;span class=&quot;m&quot;&gt;0600&lt;/span&gt; ../rubygems.yml $ gem push *.gem --config-file ../rubygems.yml&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;If everything works fine and RubyGems confirms successful deployment, Rultor reports to GitHub. This is exactly what happened in &lt;a href=&quot;https://github.com/yegor256/jekyll-github-deploy/pull/4&quot;&gt;pull request #4&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;scenario-4-deploy-to-cloudbees&quot;&gt;Scenario #4: Deploy to CloudBees&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;http://www.s3auth.com&quot;&gt;s3auth.com&lt;/a&gt; is a &lt;a href=&quot;/2014/04/21/s3-http-basic-auth.html&quot;&gt;Basic HTTP authentication gateway for Amazon S3 Buckets&lt;/a&gt;. It is a Java web app. In its pull request &lt;a href=&quot;https://github.com/yegor256/s3auth/pull/195&quot;&gt;#195&lt;/a&gt;, a resource leakage problem was fixed by &lt;a href=&quot;https://github.com/carlosmiranda&quot;&gt;&lt;code&gt;@carlosmiranda&lt;/code&gt;&lt;/a&gt; and the pull request was merged by Rultor.&lt;/p&gt; &lt;p&gt;Then, &lt;a href=&quot;https://github.com/davvd&quot;&gt;&lt;code&gt;@davvd&lt;/code&gt;&lt;/a&gt; instructed Rultor to deploy &lt;code&gt;master&lt;/code&gt; branch to production environment. Rultor created &lt;a href=&quot;/2014/07/29/docker-in-rultor.html&quot;&gt;a new Docker container&lt;/a&gt; and ran &lt;code&gt;mvn clean deploy&lt;/code&gt; in it.&lt;/p&gt; &lt;p&gt;Maven deployed the application to &lt;a href=&quot;http://www.cloudbees.com&quot;&gt;CloudBees&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;unprintable&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/07/rultor-s3auth-195.png&quot; itemprop=&quot;image&quot; style=&quot;width:600px;max-width:100%;&quot; alt=&quot;The figure&quot; /&gt;&lt;/figure&gt; &lt;p&gt;The overall procedure took 21 minutes, as you see the in the report generated by Rultor.&lt;/p&gt; &lt;p&gt;There is one important trick worth mentioning. Deployment to production always means using secure credentials, like login, password, SSH keys, etc.&lt;/p&gt; &lt;p&gt;In this particular example, &lt;a href=&quot;https://wiki.cloudbees.com/bin/view/RUN/MavenGuide&quot;&gt;Maven CloudBees Plugin&lt;/a&gt; needed API key, secret and web application name. These three parameters are kept secure and can’t be revealed in an “&lt;a href=&quot;/2015/12/22/why-dont-you-contribute-to-open-source.html&quot;&gt;open source&lt;/a&gt;” way.&lt;/p&gt; &lt;p&gt;So, there is &lt;a href=&quot;http://doc.rultor.com/reference.html#assets&quot;&gt;a mechanism&lt;/a&gt; that configures Rultor accordingly through its &lt;a href=&quot;https://github.com/yegor256/s3auth/blob/master/.rultor.yml&quot;&gt;&lt;code&gt;.rultor.yml&lt;/code&gt;&lt;/a&gt; file (pay attention to the first few lines):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;assets: settings.xml: &amp;quot;yegor256/home#assets/s3auth/settings.xml&amp;quot; pubring.gpg: &amp;quot;yegor256/home#assets/pubring.gpg&amp;quot; secring.gpg: &amp;quot;yegor256/home#assets/secring.gpg&amp;quot;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;These YAML entries inform Rultor that it has to get &lt;code&gt;assets/s3auth/settings.xml&lt;/code&gt; file from &lt;code&gt;yegor256/home&lt;/code&gt; private (!) GitHub repository and put it into the working directory of Docker container, right before starting the Maven build.&lt;/p&gt; &lt;p&gt;This &lt;code&gt;settings.xml&lt;/code&gt; file contains that secret data CloudBees plugin needs in order to deploy the application.&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;/2014/08/25/deploy-to-cloudbees.html&quot;&gt;How to Deploy to CloudBees, in One Click&lt;/a&gt; explains this process even better.&lt;/p&gt; &lt;h2 id=&quot;you-can-do-the-same&quot;&gt;You Can Do The Same&lt;/h2&gt; &lt;p&gt;Both Rultor and Travis are free hosted products, provided your projects are open source and hosted at GitHub.&lt;/p&gt; &lt;p&gt;Other good examples of Rultor+Travis usage can be seen in these GitHub issues: &lt;a href=&quot;https://github.com/jcabi/jcabi-http/issues/47&quot;&gt;&lt;code&gt;jcabi/jcabi-http#47&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://github.com/jcabi/jcabi-http/pull/48&quot;&gt;&lt;code&gt;jcabi/jcabi-http#48&lt;/code&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;PS. You can do something similar with AppVeyor, for Windows platform: &lt;a href=&quot;/2015/03/29/rultor-with-appveyor.html&quot;&gt;How AppVeyor Helps Me to Validate Pull Requests Before Rultor Merges Them&lt;/a&gt;&lt;/p&gt; " /> <meta name="keywords" content="next, path, output, content, previous, url, relative_path, id, collection, excerpt, draft, categories, layout, title, date, tags, description, keywords, slug, ext" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-07-31 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Rultor + Travis"/> <meta name="twitter:description" property="og:description" content="&lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.travis-ci.org&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/07/travis-logo.png&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/logo.svg&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor&lt;/a&gt; is a coding team assistant. &lt;a href=&quot;http://travis-ci.org&quot;&gt;Travis&lt;/a&gt; is a hosted &lt;a href=&quot;/2014/10/08/continuous-integration-is-dead.html&quot;&gt;continuous integration&lt;/a&gt; system. In this article I’ll show how our open source projects are using them in tandem to achieve seamless continuous delivery.&lt;/p&gt; &lt;p&gt;I’ll show a few practical scenarios.&lt;/p&gt; &lt;!--more--&gt; &lt;h2 id=&quot;scenario-1-merge-pull-request&quot;&gt;Scenario #1: Merge Pull Request&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;https://github.com/jcabi/jcabi-mysql-maven-plugin&quot;&gt;&lt;code&gt;jcabi-mysql-maven-plugin&lt;/code&gt;&lt;/a&gt; is a Maven plugin for &lt;a href=&quot;/2014/05/21/mysql-maven-plugin.html&quot;&gt;MySQL integration testing&lt;/a&gt;. &lt;a href=&quot;https://github.com/ChristianRedl&quot;&gt;&lt;code&gt;@ChristianRedl&lt;/code&gt;&lt;/a&gt; submitted pull request &lt;a href=&quot;https://github.com/jcabi/jcabi-mysql-maven-plugin/pull/35&quot;&gt;#35&lt;/a&gt; with a new feature. I reviewed the request and asked Rultor to merge it into &lt;code&gt;master&lt;/code&gt;:&lt;/p&gt; &lt;figure class=&quot;unprintable&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/07/rultor-mysql-35.png&quot; itemprop=&quot;image&quot; style=&quot;width:600px;max-width:100%;&quot; alt=&quot;The figure&quot; /&gt;&lt;/figure&gt; &lt;p&gt;As you can see, an actual merge operation was made by Rultor. I gave him access to the project by adding his GitHub account to the list of project collaborators.&lt;/p&gt; &lt;p&gt;Before giving a “go ahead” to Rultor I checked the status of the pre-build reported by Travis:&lt;/p&gt; &lt;figure class=&quot;unprintable&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/07/rultor-mysql-35-2.png&quot; itemprop=&quot;image&quot; style=&quot;width:600px;max-width:100%;&quot; alt=&quot;The figure&quot; /&gt;&lt;/figure&gt; &lt;p&gt;Travis found a new commit in the pull request and immediately (without any interaction from my side) triggered a build in that branch. The build didn’t fail, that’s why Travis gave me a green sign. I looked at that sign and at the code. Since all problems in the code were corrected by the pull request author and Travis didn’t complain—I gave a “go” to Rultor.&lt;/p&gt; &lt;h2 id=&quot;scenario-2-continuous-integration&quot;&gt;Scenario #2: Continuous Integration&lt;/h2&gt; &lt;p&gt;Even though the previous step &lt;a href=&quot;/2014/07/21/read-only-master-branch.html&quot;&gt;guarantees&lt;/a&gt; that &lt;code&gt;master&lt;/code&gt; branch is always clean and stable, we’re using Travis to continuously integrate it. Every commit made to &lt;code&gt;master&lt;/code&gt; triggers a new build in Travis. The result of the build changes the status of the project in Travis: either “failing” or “passing.”&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://aspects.jcabi.com&quot;&gt;&lt;code&gt;jcabi-aspects&lt;/code&gt;&lt;/a&gt; is a collection of &lt;a href=&quot;/2014/06/01/aop-aspectj-java-method-logging.html&quot;&gt;AOP AspectJ aspects&lt;/a&gt;. We configured Travis to build it continuously. This is the badge it produces (the left one):&lt;/p&gt; &lt;figure class=&quot;unprintable&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/07/rultor-aspects.png&quot; itemprop=&quot;image&quot; style=&quot;width:600px;max-width:100%;&quot; alt=&quot;The figure&quot; /&gt;&lt;/figure&gt; &lt;p&gt;Again, let me stress that even through &lt;a href=&quot;/2014/07/21/read-only-master-branch.html&quot;&gt;read-only master&lt;/a&gt; is a strong protection against broken builds, it doesn’t guarantee that at any moment master is stable. For example, sometimes unit tests fail sporadically due to changes in calendar, in environment, in dependencies, in network connection qualities, etc.&lt;/p&gt; &lt;p&gt;Well, ideally, unit tests should either fail or pass because they are environment independent. However, in reality, unit tests are far from being ideal.&lt;/p&gt; &lt;p&gt;That’s why a combination of &lt;a href=&quot;/2014/07/21/read-only-master-branch.html&quot;&gt;read-only master&lt;/a&gt; with Rultor and &lt;a href=&quot;/2014/10/08/continuous-integration-is-dead.html&quot;&gt;continuous integration&lt;/a&gt; with Travis gives us higher stability.&lt;/p&gt; &lt;h2 id=&quot;scenario-3-release-to-rubygems&quot;&gt;Scenario #3: Release to RubyGems&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;https://github.com/yegor256/jekyll-github-deploy&quot;&gt;&lt;code&gt;jekyll-github-deploy&lt;/code&gt;&lt;/a&gt; is a Ruby gem that &lt;a href=&quot;/2014/06/24/jekyll-github-deploy.html&quot;&gt;automates deployment of Jekyll sites to GitHub Pages&lt;/a&gt;. &lt;a href=&quot;https://github.com/leucos&quot;&gt;&lt;code&gt;@leucos&lt;/code&gt;&lt;/a&gt; submitted a pull request &lt;a href=&quot;https://github.com/yegor256/jekyll-github-deploy/pull/4&quot;&gt;#4&lt;/a&gt; with a new feature. The request was merged successfully into &lt;code&gt;master&lt;/code&gt; branch.&lt;/p&gt; &lt;p&gt;Then, Rultor was instructed by myself that &lt;code&gt;master&lt;/code&gt; branch should be released to RubyGems and a new version to set is 1.5:&lt;/p&gt; &lt;figure class=&quot;unprintable&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/07/rultor-jekyll-4.png&quot; itemprop=&quot;image&quot; style=&quot;width:600px;max-width:100%;&quot; alt=&quot;The figure&quot; /&gt;&lt;/figure&gt; &lt;p&gt;Rultor executed a simple script, &lt;a href=&quot;http://doc.rultor.com/basics.html#release&quot;&gt;pre-configured&lt;/a&gt; in its &lt;a href=&quot;https://github.com/yegor256/jekyll-github-deploy/blob/master/.rultor.yml&quot;&gt;&lt;code&gt;.rultor.yml&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;release: script: | ./test.sh rm -rf *.gem sed -i &amp;quot;s/2.0-SNAPSHOT/${tag}/g&amp;quot; jgd.gemspec gem build jgd.gemspec chmod 0600 ../rubygems.yml gem push *.gem --config-file ../rubygems.yml&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;The script is parameterized, as you see. There is one parameter that is passed by Rultor into the script: &lt;code&gt;${tag}&lt;/code&gt;. This parameter was provided by myself in the GitHub issue, when I submitted a command to Rultor.&lt;/p&gt; &lt;p&gt;The script tests that the gem works (integration testing) and clean up afterwords:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ ./test.sh $ rm -rf *.gem&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Then, it changes the version of itself in &lt;code&gt;jgd.gemspec&lt;/code&gt; to the one provided in the &lt;code&gt;${tag}&lt;/code&gt; (it is an environment variable), and builds a new &lt;code&gt;.gem&lt;/code&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ sed -i &lt;span class=&quot;s2&quot;&gt;&amp;quot;s/2.0-SNAPSHOT/&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;tag&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/g&amp;quot;&lt;/span&gt; jgd.gemspec $ gem build jgd.gemspec&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Finally, it pushes a newly built &lt;code&gt;.gem&lt;/code&gt; to &lt;a href=&quot;/2014/08/26/publish-to-rubygems.html&quot;&gt;RubyGems&lt;/a&gt;, using login credentials from &lt;code&gt;../rubygems.yml&lt;/code&gt;. This file is created by Rultor right before starting the script (this mechanism is discussed below):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ chmod &lt;span class=&quot;m&quot;&gt;0600&lt;/span&gt; ../rubygems.yml $ gem push *.gem --config-file ../rubygems.yml&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;If everything works fine and RubyGems confirms successful deployment, Rultor reports to GitHub. This is exactly what happened in &lt;a href=&quot;https://github.com/yegor256/jekyll-github-deploy/pull/4&quot;&gt;pull request #4&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;scenario-4-deploy-to-cloudbees&quot;&gt;Scenario #4: Deploy to CloudBees&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;http://www.s3auth.com&quot;&gt;s3auth.com&lt;/a&gt; is a &lt;a href=&quot;/2014/04/21/s3-http-basic-auth.html&quot;&gt;Basic HTTP authentication gateway for Amazon S3 Buckets&lt;/a&gt;. It is a Java web app. In its pull request &lt;a href=&quot;https://github.com/yegor256/s3auth/pull/195&quot;&gt;#195&lt;/a&gt;, a resource leakage problem was fixed by &lt;a href=&quot;https://github.com/carlosmiranda&quot;&gt;&lt;code&gt;@carlosmiranda&lt;/code&gt;&lt;/a&gt; and the pull request was merged by Rultor.&lt;/p&gt; &lt;p&gt;Then, &lt;a href=&quot;https://github.com/davvd&quot;&gt;&lt;code&gt;@davvd&lt;/code&gt;&lt;/a&gt; instructed Rultor to deploy &lt;code&gt;master&lt;/code&gt; branch to production environment. Rultor created &lt;a href=&quot;/2014/07/29/docker-in-rultor.html&quot;&gt;a new Docker container&lt;/a&gt; and ran &lt;code&gt;mvn clean deploy&lt;/code&gt; in it.&lt;/p&gt; &lt;p&gt;Maven deployed the application to &lt;a href=&quot;http://www.cloudbees.com&quot;&gt;CloudBees&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;unprintable&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/07/rultor-s3auth-195.png&quot; itemprop=&quot;image&quot; style=&quot;width:600px;max-width:100%;&quot; alt=&quot;The figure&quot; /&gt;&lt;/figure&gt; &lt;p&gt;The overall procedure took 21 minutes, as you see the in the report generated by Rultor.&lt;/p&gt; &lt;p&gt;There is one important trick worth mentioning. Deployment to production always means using secure credentials, like login, password, SSH keys, etc.&lt;/p&gt; &lt;p&gt;In this particular example, &lt;a href=&quot;https://wiki.cloudbees.com/bin/view/RUN/MavenGuide&quot;&gt;Maven CloudBees Plugin&lt;/a&gt; needed API key, secret and web application name. These three parameters are kept secure and can’t be revealed in an “&lt;a href=&quot;/2015/12/22/why-dont-you-contribute-to-open-source.html&quot;&gt;open source&lt;/a&gt;” way.&lt;/p&gt; &lt;p&gt;So, there is &lt;a href=&quot;http://doc.rultor.com/reference.html#assets&quot;&gt;a mechanism&lt;/a&gt; that configures Rultor accordingly through its &lt;a href=&quot;https://github.com/yegor256/s3auth/blob/master/.rultor.yml&quot;&gt;&lt;code&gt;.rultor.yml&lt;/code&gt;&lt;/a&gt; file (pay attention to the first few lines):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;assets: settings.xml: &amp;quot;yegor256/home#assets/s3auth/settings.xml&amp;quot; pubring.gpg: &amp;quot;yegor256/home#assets/pubring.gpg&amp;quot; secring.gpg: &amp;quot;yegor256/home#assets/secring.gpg&amp;quot;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;These YAML entries inform Rultor that it has to get &lt;code&gt;assets/s3auth/settings.xml&lt;/code&gt; file from &lt;code&gt;yegor256/home&lt;/code&gt; private (!) GitHub repository and put it into the working directory of Docker container, right before starting the Maven build.&lt;/p&gt; &lt;p&gt;This &lt;code&gt;settings.xml&lt;/code&gt; file contains that secret data CloudBees plugin needs in order to deploy the application.&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;/2014/08/25/deploy-to-cloudbees.html&quot;&gt;How to Deploy to CloudBees, in One Click&lt;/a&gt; explains this process even better.&lt;/p&gt; &lt;h2 id=&quot;you-can-do-the-same&quot;&gt;You Can Do The Same&lt;/h2&gt; &lt;p&gt;Both Rultor and Travis are free hosted products, provided your projects are open source and hosted at GitHub.&lt;/p&gt; &lt;p&gt;Other good examples of Rultor+Travis usage can be seen in these GitHub issues: &lt;a href=&quot;https://github.com/jcabi/jcabi-http/issues/47&quot;&gt;&lt;code&gt;jcabi/jcabi-http#47&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://github.com/jcabi/jcabi-http/pull/48&quot;&gt;&lt;code&gt;jcabi/jcabi-http#48&lt;/code&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;PS. You can do something similar with AppVeyor, for Windows platform: &lt;a href=&quot;/2015/03/29/rultor-with-appveyor.html&quot;&gt;How AppVeyor Helps Me to Validate Pull Requests Before Rultor Merges Them&lt;/a&gt;&lt;/p&gt; "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/07/31/travis-and-rultor.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?23bb3130b4f"/> <link rel="apple-touch-icon" href="/favicon.ico?23bb3130b4f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?23bb3130b4f"/> <link rel="stylesheet" href="/css/icons.css?23bb3130b4f"/> <link rel="canonical" href="https://www.yegor256.com/2014/07/31/travis-and-rultor.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/07/31/travis-and-rultor.amp.html" /> <title>Rultor + Travis </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /2014/07/31/travis-and-rultor.html><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /2014/07/31/travis-and-rultor.html><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /2014/07/31/travis-and-rultor.html><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /2014/07/31/travis-and-rultor.html><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /2014/07/31/travis-and-rultor.html><a href="/books.html" title="The books I wrote">Books</a></li> <li /2014/07/31/travis-and-rultor.html><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /2014/07/31/travis-and-rultor.html><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /2014/07/31/travis-and-rultor.html class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /2014/07/31/travis-and-rultor.html><a href="/award.html" title="Software quality award">Award</a></li> <li /2014/07/31/travis-and-rultor.html><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /2014/07/31/travis-and-rultor.html><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /2014/07/31/travis-and-rultor.html><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/07/31/travis-and-rultor.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2014/07/31/travis-and-rultor.html</code></p><h1 itemprop="name headline mainEntityOfPage">Rultor + Travis</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-07-31T00:00:00+00:00"> 31 July 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2014/07/31/travis-and-rultor.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><figure class="badge"><a href="http://www.travis-ci.org"><img src="https://www.yegor256.com/images/2014/07/travis-logo.png" style="width:100px;max-width:100%;" alt="badge" /></a></figure> <figure class="badge"><a href="http://www.rultor.com"><img src="http://doc.rultor.com/images/logo.svg" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.rultor.com">Rultor</a> is a coding team assistant. <a href="http://travis-ci.org">Travis</a> is a hosted <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> system. In this article I’ll show how our open source projects are using them in tandem to achieve seamless continuous delivery.</p><p>I’ll show a few practical scenarios.</p><h2 id="scenario-1-merge-pull-request">Scenario #1: Merge Pull Request</h2><p><a href="https://github.com/jcabi/jcabi-mysql-maven-plugin"><code>jcabi-mysql-maven-plugin</code></a> is a Maven plugin for <a href="/2014/05/21/mysql-maven-plugin.html">MySQL integration testing</a>. <a href="https://github.com/ChristianRedl"><code>@ChristianRedl</code></a> submitted pull request <a href="https://github.com/jcabi/jcabi-mysql-maven-plugin/pull/35">#35</a> with a new feature. I reviewed the request and asked Rultor to merge it into <code>master</code>:</p><figure class="unprintable"><img src="https://www.yegor256.com/images/2014/07/rultor-mysql-35.png" itemprop="image" style="width:600px;max-width:100%;" alt="The figure" /></figure><p>As you can see, an actual merge operation was made by Rultor. I gave him access to the project by adding his GitHub account to the list of project collaborators.</p><p>Before giving a “go ahead” to Rultor I checked the status of the pre-build reported by Travis:</p><figure class="unprintable"><img src="https://www.yegor256.com/images/2014/07/rultor-mysql-35-2.png" itemprop="image" style="width:600px;max-width:100%;" alt="The figure" /></figure><p>Travis found a new commit in the pull request and immediately (without any interaction from my side) triggered a build in that branch. The build didn’t fail, that’s why Travis gave me a green sign. I looked at that sign and at the code. Since all problems in the code were corrected by the pull request author and Travis didn’t complain—I gave a “go” to Rultor.</p><h2 id="scenario-2-continuous-integration">Scenario #2: Continuous Integration</h2><p>Even though the previous step <a href="/2014/07/21/read-only-master-branch.html">guarantees</a> that <code>master</code> branch is always clean and stable, we’re using Travis to continuously integrate it. Every commit made to <code>master</code> triggers a new build in Travis. The result of the build changes the status of the project in Travis: either “failing” or “passing.”</p><p><a href="http://aspects.jcabi.com"><code>jcabi-aspects</code></a> is a collection of <a href="/2014/06/01/aop-aspectj-java-method-logging.html">AOP AspectJ aspects</a>. We configured Travis to build it continuously. This is the badge it produces (the left one):</p><figure class="unprintable"><img src="https://www.yegor256.com/images/2014/07/rultor-aspects.png" itemprop="image" style="width:600px;max-width:100%;" alt="The figure" /></figure><p>Again, let me stress that even through <a href="/2014/07/21/read-only-master-branch.html">read-only master</a> is a strong protection against broken builds, it doesn’t guarantee that at any moment master is stable. For example, sometimes unit tests fail sporadically due to changes in calendar, in environment, in dependencies, in network connection qualities, etc.</p><p>Well, ideally, unit tests should either fail or pass because they are environment independent. However, in reality, unit tests are far from being ideal.</p><p>That’s why a combination of <a href="/2014/07/21/read-only-master-branch.html">read-only master</a> with Rultor and <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> with Travis gives us higher stability.</p><h2 id="scenario-3-release-to-rubygems">Scenario #3: Release to RubyGems</h2><p><a href="https://github.com/yegor256/jekyll-github-deploy"><code>jekyll-github-deploy</code></a> is a Ruby gem that <a href="/2014/06/24/jekyll-github-deploy.html">automates deployment of Jekyll sites to GitHub Pages</a>. <a href="https://github.com/leucos"><code>@leucos</code></a> submitted a pull request <a href="https://github.com/yegor256/jekyll-github-deploy/pull/4">#4</a> with a new feature. The request was merged successfully into <code>master</code> branch.</p><p>Then, Rultor was instructed by myself that <code>master</code> branch should be released to RubyGems and a new version to set is 1.5:</p><figure class="unprintable"><img src="https://www.yegor256.com/images/2014/07/rultor-jekyll-4.png" itemprop="image" style="width:600px;max-width:100%;" alt="The figure" /></figure><p>Rultor executed a simple script, <a href="http://doc.rultor.com/basics.html#release">pre-configured</a> in its <a href="https://github.com/yegor256/jekyll-github-deploy/blob/master/.rultor.yml"><code>.rultor.yml</code></a>:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>release:
  script: |
    ./test.sh
    rm -rf *.gem
    sed -i &quot;s/2.0-SNAPSHOT/${tag}/g&quot; jgd.gemspec
    gem build jgd.gemspec
    chmod 0600 ../rubygems.yml
    gem push *.gem --config-file ../rubygems.yml</code></pre></figure><p>The script is parameterized, as you see. There is one parameter that is passed by Rultor into the script: <code>${tag}</code>. This parameter was provided by myself in the GitHub issue, when I submitted a command to Rultor.</p><p>The script tests that the gem works (integration testing) and clean up afterwords:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ ./test.sh
$ rm -rf *.gem</code></pre></figure><p>Then, it changes the version of itself in <code>jgd.gemspec</code> to the one provided in the <code>${tag}</code> (it is an environment variable), and builds a new <code>.gem</code>:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ sed -i <span class="s2">&quot;s/2.0-SNAPSHOT/</span><span class="si">${</span><span class="nv">tag</span><span class="si">}</span><span class="s2">/g&quot;</span> jgd.gemspec
$ gem build jgd.gemspec</code></pre></figure><p>Finally, it pushes a newly built <code>.gem</code> to <a href="/2014/08/26/publish-to-rubygems.html">RubyGems</a>, using login credentials from <code>../rubygems.yml</code>. This file is created by Rultor right before starting the script (this mechanism is discussed below):</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ chmod <span class="m">0600</span> ../rubygems.yml
$ gem push *.gem --config-file ../rubygems.yml</code></pre></figure><p>If everything works fine and RubyGems confirms successful deployment, Rultor reports to GitHub. This is exactly what happened in <a href="https://github.com/yegor256/jekyll-github-deploy/pull/4">pull request #4</a>.</p><h2 id="scenario-4-deploy-to-cloudbees">Scenario #4: Deploy to CloudBees</h2><p><a href="http://www.s3auth.com">s3auth.com</a> is a <a href="/2014/04/21/s3-http-basic-auth.html">Basic HTTP authentication gateway for Amazon S3 Buckets</a>. It is a Java web app. In its pull request <a href="https://github.com/yegor256/s3auth/pull/195">#195</a>, a resource leakage problem was fixed by <a href="https://github.com/carlosmiranda"><code>@carlosmiranda</code></a> and the pull request was merged by Rultor.</p><p>Then, <a href="https://github.com/davvd"><code>@davvd</code></a> instructed Rultor to deploy <code>master</code> branch to production environment. Rultor created <a href="/2014/07/29/docker-in-rultor.html">a new Docker container</a> and ran <code>mvn clean deploy</code> in it.</p><p>Maven deployed the application to <a href="http://www.cloudbees.com">CloudBees</a>:</p><figure class="unprintable"><img src="https://www.yegor256.com/images/2014/07/rultor-s3auth-195.png" itemprop="image" style="width:600px;max-width:100%;" alt="The figure" /></figure><p>The overall procedure took 21 minutes, as you see the in the report generated by Rultor.</p><p>There is one important trick worth mentioning. Deployment to production always means using secure credentials, like login, password, SSH keys, etc.</p><p>In this particular example, <a href="https://wiki.cloudbees.com/bin/view/RUN/MavenGuide">Maven CloudBees Plugin</a> needed API key, secret and web application name. These three parameters are kept secure and can’t be revealed in an “<a href="/2015/12/22/why-dont-you-contribute-to-open-source.html">open source</a>” way.</p><p>So, there is <a href="http://doc.rultor.com/reference.html#assets">a mechanism</a> that configures Rultor accordingly through its <a href="https://github.com/yegor256/s3auth/blob/master/.rultor.yml"><code>.rultor.yml</code></a> file (pay attention to the first few lines):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>assets:
  settings.xml: &quot;yegor256/home#assets/s3auth/settings.xml&quot;
  pubring.gpg: &quot;yegor256/home#assets/pubring.gpg&quot;
  secring.gpg: &quot;yegor256/home#assets/secring.gpg&quot;</code></pre></figure><p>These YAML entries inform Rultor that it has to get <code>assets/s3auth/settings.xml</code> file from <code>yegor256/home</code> private (!) GitHub repository and put it into the working directory of Docker container, right before starting the Maven build.</p><p>This <code>settings.xml</code> file contains that secret data CloudBees plugin needs in order to deploy the application.</p><p><a href="/2014/08/25/deploy-to-cloudbees.html">How to Deploy to CloudBees, in One Click</a> explains this process even better.</p><h2 id="you-can-do-the-same">You Can Do The Same</h2><p>Both Rultor and Travis are free hosted products, provided your projects are open source and hosted at GitHub.</p><p>Other good examples of Rultor+Travis usage can be seen in these GitHub issues: <a href="https://github.com/jcabi/jcabi-http/issues/47"><code>jcabi/jcabi-http#47</code></a>, <a href="https://github.com/jcabi/jcabi-http/pull/48"><code>jcabi/jcabi-http#48</code></a></p><p>PS. You can do something similar with AppVeyor, for Windows platform: <a href="/2015/03/29/rultor-with-appveyor.html">How AppVeyor Helps Me to Validate Pull Requests Before Rultor Merges Them</a></p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/07/31/travis-and-rultor.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/07/31/travis-and-rultor.html&amp;text=Rultor+%2B+Travis" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/07/31/travis-and-rultor.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/07/31/travis-and-rultor.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/07/31/travis-and-rultor.html%3F2014-30&amp;title=Rultor+%2B+Travis" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/07/31/travis-and-rultor.html%3F2014-30&amp;t=Rultor+%2B+Travis" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div > <figure class="badge"><a href="http://www.travis-ci.org"><img src="https://www.yegor256.com/images/2014/07/travis-logo.png" style="width:100px;max-width:100%;" alt="badge" /></a></figure> <figure class="badge"><a href="http://www.rultor.com"><img src="http://doc.rultor.com/images/logo.svg" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.rultor.com">Rultor</a> is a coding team assistant. <a href="http://travis-ci.org">Travis</a> is a hosted <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> system. In this article I’ll show how our open source projects are using them in tandem to achieve seamless continuous delivery.</p><p>I’ll show a few practical scenarios.</p><h2 id="scenario-1-merge-pull-request">Scenario #1: Merge Pull Request</h2><p><a href="https://github.com/jcabi/jcabi-mysql-maven-plugin"><code>jcabi-mysql-maven-plugin</code></a> is a Maven plugin for <a href="/2014/05/21/mysql-maven-plugin.html">MySQL integration testing</a>. <a href="https://github.com/ChristianRedl"><code>@ChristianRedl</code></a> submitted pull request <a href="https://github.com/jcabi/jcabi-mysql-maven-plugin/pull/35">#35</a> with a new feature. I reviewed the request and asked Rultor to merge it into <code>master</code>:</p><figure class="unprintable"><img src="https://www.yegor256.com/images/2014/07/rultor-mysql-35.png" itemprop="image" style="width:600px;max-width:100%;" alt="The figure" /></figure><p>As you can see, an actual merge operation was made by Rultor. I gave him access to the project by adding his GitHub account to the list of project collaborators.</p><p>Before giving a “go ahead” to Rultor I checked the status of the pre-build reported by Travis:</p><figure class="unprintable"><img src="https://www.yegor256.com/images/2014/07/rultor-mysql-35-2.png" itemprop="image" style="width:600px;max-width:100%;" alt="The figure" /></figure><p>Travis found a new commit in the pull request and immediately (without any interaction from my side) triggered a build in that branch. The build didn’t fail, that’s why Travis gave me a green sign. I looked at that sign and at the code. Since all problems in the code were corrected by the pull request author and Travis didn’t complain—I gave a “go” to Rultor.</p><h2 id="scenario-2-continuous-integration">Scenario #2: Continuous Integration</h2><p>Even though the previous step <a href="/2014/07/21/read-only-master-branch.html">guarantees</a> that <code>master</code> branch is always clean and stable, we’re using Travis to continuously integrate it. Every commit made to <code>master</code> triggers a new build in Travis. The result of the build changes the status of the project in Travis: either “failing” or “passing.”</p><p><a href="http://aspects.jcabi.com"><code>jcabi-aspects</code></a> is a collection of <a href="/2014/06/01/aop-aspectj-java-method-logging.html">AOP AspectJ aspects</a>. We configured Travis to build it continuously. This is the badge it produces (the left one):</p><figure class="unprintable"><img src="https://www.yegor256.com/images/2014/07/rultor-aspects.png" itemprop="image" style="width:600px;max-width:100%;" alt="The figure" /></figure><p>Again, let me stress that even through <a href="/2014/07/21/read-only-master-branch.html">read-only master</a> is a strong protection against broken builds, it doesn’t guarantee that at any moment master is stable. For example, sometimes unit tests fail sporadically due to changes in calendar, in environment, in dependencies, in network connection qualities, etc.</p><p>Well, ideally, unit tests should either fail or pass because they are environment independent. However, in reality, unit tests are far from being ideal.</p><p>That’s why a combination of <a href="/2014/07/21/read-only-master-branch.html">read-only master</a> with Rultor and <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> with Travis gives us higher stability.</p><h2 id="scenario-3-release-to-rubygems">Scenario #3: Release to RubyGems</h2><p><a href="https://github.com/yegor256/jekyll-github-deploy"><code>jekyll-github-deploy</code></a> is a Ruby gem that <a href="/2014/06/24/jekyll-github-deploy.html">automates deployment of Jekyll sites to GitHub Pages</a>. <a href="https://github.com/leucos"><code>@leucos</code></a> submitted a pull request <a href="https://github.com/yegor256/jekyll-github-deploy/pull/4">#4</a> with a new feature. The request was merged successfully into <code>master</code> branch.</p><p>Then, Rultor was instructed by myself that <code>master</code> branch should be released to RubyGems and a new version to set is 1.5:</p><figure class="unprintable"><img src="https://www.yegor256.com/images/2014/07/rultor-jekyll-4.png" itemprop="image" style="width:600px;max-width:100%;" alt="The figure" /></figure><p>Rultor executed a simple script, <a href="http://doc.rultor.com/basics.html#release">pre-configured</a> in its <a href="https://github.com/yegor256/jekyll-github-deploy/blob/master/.rultor.yml"><code>.rultor.yml</code></a>:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>release:
  script: |
    ./test.sh
    rm -rf *.gem
    sed -i &quot;s/2.0-SNAPSHOT/${tag}/g&quot; jgd.gemspec
    gem build jgd.gemspec
    chmod 0600 ../rubygems.yml
    gem push *.gem --config-file ../rubygems.yml</code></pre></figure><p>The script is parameterized, as you see. There is one parameter that is passed by Rultor into the script: <code>${tag}</code>. This parameter was provided by myself in the GitHub issue, when I submitted a command to Rultor.</p><p>The script tests that the gem works (integration testing) and clean up afterwords:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ ./test.sh
$ rm -rf *.gem</code></pre></figure><p>Then, it changes the version of itself in <code>jgd.gemspec</code> to the one provided in the <code>${tag}</code> (it is an environment variable), and builds a new <code>.gem</code>:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ sed -i <span class="s2">&quot;s/2.0-SNAPSHOT/</span><span class="si">${</span><span class="nv">tag</span><span class="si">}</span><span class="s2">/g&quot;</span> jgd.gemspec
$ gem build jgd.gemspec</code></pre></figure><p>Finally, it pushes a newly built <code>.gem</code> to <a href="/2014/08/26/publish-to-rubygems.html">RubyGems</a>, using login credentials from <code>../rubygems.yml</code>. This file is created by Rultor right before starting the script (this mechanism is discussed below):</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ chmod <span class="m">0600</span> ../rubygems.yml
$ gem push *.gem --config-file ../rubygems.yml</code></pre></figure><p>If everything works fine and RubyGems confirms successful deployment, Rultor reports to GitHub. This is exactly what happened in <a href="https://github.com/yegor256/jekyll-github-deploy/pull/4">pull request #4</a>.</p><h2 id="scenario-4-deploy-to-cloudbees">Scenario #4: Deploy to CloudBees</h2><p><a href="http://www.s3auth.com">s3auth.com</a> is a <a href="/2014/04/21/s3-http-basic-auth.html">Basic HTTP authentication gateway for Amazon S3 Buckets</a>. It is a Java web app. In its pull request <a href="https://github.com/yegor256/s3auth/pull/195">#195</a>, a resource leakage problem was fixed by <a href="https://github.com/carlosmiranda"><code>@carlosmiranda</code></a> and the pull request was merged by Rultor.</p><p>Then, <a href="https://github.com/davvd"><code>@davvd</code></a> instructed Rultor to deploy <code>master</code> branch to production environment. Rultor created <a href="/2014/07/29/docker-in-rultor.html">a new Docker container</a> and ran <code>mvn clean deploy</code> in it.</p><p>Maven deployed the application to <a href="http://www.cloudbees.com">CloudBees</a>:</p><figure class="unprintable"><img src="https://www.yegor256.com/images/2014/07/rultor-s3auth-195.png" itemprop="image" style="width:600px;max-width:100%;" alt="The figure" /></figure><p>The overall procedure took 21 minutes, as you see the in the report generated by Rultor.</p><p>There is one important trick worth mentioning. Deployment to production always means using secure credentials, like login, password, SSH keys, etc.</p><p>In this particular example, <a href="https://wiki.cloudbees.com/bin/view/RUN/MavenGuide">Maven CloudBees Plugin</a> needed API key, secret and web application name. These three parameters are kept secure and can’t be revealed in an “<a href="/2015/12/22/why-dont-you-contribute-to-open-source.html">open source</a>” way.</p><p>So, there is <a href="http://doc.rultor.com/reference.html#assets">a mechanism</a> that configures Rultor accordingly through its <a href="https://github.com/yegor256/s3auth/blob/master/.rultor.yml"><code>.rultor.yml</code></a> file (pay attention to the first few lines):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>assets:
  settings.xml: &quot;yegor256/home#assets/s3auth/settings.xml&quot;
  pubring.gpg: &quot;yegor256/home#assets/pubring.gpg&quot;
  secring.gpg: &quot;yegor256/home#assets/secring.gpg&quot;</code></pre></figure><p>These YAML entries inform Rultor that it has to get <code>assets/s3auth/settings.xml</code> file from <code>yegor256/home</code> private (!) GitHub repository and put it into the working directory of Docker container, right before starting the Maven build.</p><p>This <code>settings.xml</code> file contains that secret data CloudBees plugin needs in order to deploy the application.</p><p><a href="/2014/08/25/deploy-to-cloudbees.html">How to Deploy to CloudBees, in One Click</a> explains this process even better.</p><h2 id="you-can-do-the-same">You Can Do The Same</h2><p>Both Rultor and Travis are free hosted products, provided your projects are open source and hosted at GitHub.</p><p>Other good examples of Rultor+Travis usage can be seen in these GitHub issues: <a href="https://github.com/jcabi/jcabi-http/issues/47"><code>jcabi/jcabi-http#47</code></a>, <a href="https://github.com/jcabi/jcabi-http/pull/48"><code>jcabi/jcabi-http#48</code></a></p><p>PS. You can do something similar with AppVeyor, for Windows platform: <a href="/2015/03/29/rultor-with-appveyor.html">How AppVeyor Helps Me to Validate Pull Requests Before Rultor Merges Them</a></p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?23bb3130b4f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="&lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.docker.io&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/docker-logo.png&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.docker.io&quot;&gt;Docker&lt;/a&gt; is a command line tool that can run a shell command in a virtual Linux, inside an isolated file system. Every time we build our projects, we want them to run in their own Docker containers. Take this Maven project for example:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ sudo docker run -i -t ubuntu mvn clean &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/logo.svg&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;This command will start a new Ubuntu system and execute &lt;code&gt;mvn clean test&lt;/code&gt; inside it. &lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor.com&lt;/a&gt;, our virtual assistant, does exactly that with our builds, when we deploy, package, test and merge them.&lt;/p&gt; &lt;!--more--&gt; &lt;h2 id=&quot;why-docker&quot;&gt;Why Docker?&lt;/h2&gt; &lt;p&gt;What benefits does it give us? And why &lt;a href=&quot;/2014/08/29/docker-non-root.html&quot;&gt;Docker&lt;/a&gt;, when there are many &lt;a href=&quot;https://en.wikipedia.org/wiki/Operating_system-level_virtualization&quot;&gt;other virtualization technologies&lt;/a&gt;, like LXC, for example?&lt;/p&gt; &lt;p&gt;Well, there are a few very important benefits:&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Image repository (hub.docker.com)&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Versioning&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Application-centric&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Let’s discuss them in details.&lt;/p&gt; &lt;h2 id=&quot;image-repository&quot;&gt;Image Repository&lt;/h2&gt; &lt;p&gt;Docker enables image sharing through its public repository at &lt;a href=&quot;http://hub.docker.com&quot;&gt;hub.docker.com&lt;/a&gt;. This means that after I prepare a working environment for my application, I make an image out of it and push it to the hub.&lt;/p&gt; &lt;p&gt;Let’s say, I want my Maven build to be executed in a container with a pre-installed &lt;code&gt;graphviz&lt;/code&gt; package (in order to enable &lt;code&gt;dot&lt;/code&gt; command line tool). First, I would start a plain vanilla Ubuntu container, and install &lt;code&gt;graphviz&lt;/code&gt; inside it:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;$ sudo docker run -i -t ubuntu /bin/bash root@215d2696e8ad:/# sudo apt-get install -y graphviz Reading package lists... Done Building dependency tree Reading state information... Done The following extra packages will be installed: ... root@215d2696e8ad:/# exit $ sudo docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 215d2696e8ad ubuntu:14.04 /bin/bash About a minute ago Exited (0) 3 seconds ago high_mccarthy&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;I have a container that stopped a few seconds ago. Container’s ID is &lt;code&gt;215d2696e8ad&lt;/code&gt;. Now, I want to make it reusable for all further tests in Rultor.com. I have to create an image from it:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ sudo docker commit 215d2696e8ad yegor256/beta c5ad7718fc0e20fe4bf2c8a9bfade4db8617a25366ca5b64be2e1e8aa0de6e52&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;I just made my new commit to a new image &lt;code&gt;yegor256/beta&lt;/code&gt;. This image can be reused right now. I can create a new container from this image and it will have &lt;code&gt;graphviz&lt;/code&gt; installed inside!&lt;/p&gt; &lt;p&gt;Now it’s time to share my image at Docker hub, in order to make it available for Rultor:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;$ sudo docker push yegor256/beta The push refers to a repository [yegor256/beta] (len: 1) Sending image list Pushing repository yegor256/beta (1 tags) 511136ea3c5a: Image already pushed, skipping d7ac5e4f1812: Image already pushed, skipping 2f4b4d6a4a06: Image already pushed, skipping 83ff768040a0: Image already pushed, skipping 6c37f792ddac: Image already pushed, skipping e54ca5efa2e9: Image already pushed, skipping c5ad7718fc0e: Image successfully pushed Pushing tag for rev [c5ad7718fc0e] on {https://registry-1.docker.io/v1/repositories/yegor256/beta/tags/latest}&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;The last step is to configure Rultor to use this image in all builds. To do this, I will edit &lt;a href=&quot;http://doc.rultor.com/reference.html&quot;&gt;&lt;code&gt;.rultor.yml&lt;/code&gt;&lt;/a&gt; in the root directory of my GitHub repository:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;docker: image: yegor256/beta&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;That’s it. From now on, Rultor will use my custom Docker image with pre-installed &lt;code&gt;graphviz&lt;/code&gt;, in every build (merge, release, deploy, etc.)&lt;/p&gt; &lt;p&gt;Moreover, if and when I want to add something else to the image, it’s easy to do. Say, I want to install Ruby into my build image. I start a container from the image and install it (pay attention, I’m starting a container not from &lt;code&gt;ubuntu&lt;/code&gt; image, as I did before, but from &lt;code&gt;yegor256/beta&lt;/code&gt;):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;$ sudo docker run -i -t yegor256/beta /bin/bash root@7e0fbd9806c9:/# sudo apt-get install -y ruby Reading package lists... Done Building dependency tree Reading state information... Done The following extra packages will be installed: ... root@7e0fbd9806c9:/# exit $ sudo docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 7e0fbd9806c9 yegor256/beta:latest /bin/bash 28 seconds ago Exited (0) 2 seconds ago pensive_pare 215d2696e8ad ubuntu:14.04 /bin/bash 10 minutes ago Exited (0) 8 minutes ago high_mccarthy&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;You can now see that I have two containers. The first one is the one I am using right now; it contains Ruby. The second one is the one I was using before and it contains &lt;code&gt;graphviz&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;Now I have to commit again and push:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ sudo docker commit 7e0fbd9806c9 yegor256/beta 6cbfb7a6b18a2182f42171f6bb5aef67c4819b5c2795edffa6a63ba78aaada2d $ sudo docker push yegor256/beta ...&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Thus, this Docker hub is a very convenient feature for Rultor and similar systems.&lt;/p&gt; &lt;h2 id=&quot;versioning&quot;&gt;Versioning&lt;/h2&gt; &lt;p&gt;As you saw in the example above, every change to a Docker image has its own version (hash) and it’s possible to track changes. It is also possible to roll back to any particular change.&lt;/p&gt; &lt;p&gt;Rultor is not using this functionality itself, but Rultor users are able to control their build configurations with much better precision.&lt;/p&gt; &lt;h2 id=&quot;application-centric&quot;&gt;Application-Centric&lt;/h2&gt; &lt;p&gt;Docker, unlike LXC or Vagrant, for example, is application-centric. This means that when we start a container—we start an application. With other virtualization technologies, when you get a virtual machine—you get a fully functional Unix environment, where you can login through SSH and do whatever you want.&lt;/p&gt; &lt;p&gt;Docker makes things simpler. It doesn’t give you SSH access to container, but runs an application inside and shows you its output. This is exactly what we need in Rultor. We need to run an automated build (for example Maven or Bundler), see its output and get its exit code. If the code is not zero, we fail the build and report to the user.&lt;/p&gt; &lt;p&gt;This is how we run Maven build:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ sudo docker run --rm -i -t yegor256/rultor mvn clean &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;INFO&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; ------------------------------------------------------------------------ &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;INFO&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Building jcabi-github &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;.13 &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;INFO&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; ------------------------------------------------------------------------ &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;INFO&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;INFO&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; --- maven-clean-plugin:2.5:clean &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;default-clean&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; @ jcabi-github --- &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;INFO&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; ...&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;As you can see, Maven starts immediately. We don’t worry about the internals of the container. We just start an application inside it.&lt;/p&gt; &lt;p&gt;Furthermore, thanks to the &lt;code&gt;--rm&lt;/code&gt; option, the container gets destroyed immediately after Maven execution is finished.&lt;/p&gt; &lt;p&gt;This is what application-centric is about.&lt;/p&gt; &lt;p&gt;Our overall impression of Docker is highly positive.&lt;/p&gt; &lt;p&gt;ps. A compact version of this article was published at &lt;a href=&quot;http://devops.com/blogs/build-docker-containers/&quot;&gt;devops.com&lt;/a&gt;&lt;/p&gt; " /> <meta name="keywords" content="next, path, output, content, previous, url, relative_path, id, collection, excerpt, draft, categories, layout, title, date, tags, description, keywords, slug, ext" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-07-29 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Every Build in Its Own Docker Container"/> <meta name="twitter:description" property="og:description" content="&lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.docker.io&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/docker-logo.png&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.docker.io&quot;&gt;Docker&lt;/a&gt; is a command line tool that can run a shell command in a virtual Linux, inside an isolated file system. Every time we build our projects, we want them to run in their own Docker containers. Take this Maven project for example:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ sudo docker run -i -t ubuntu mvn clean &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/logo.svg&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;This command will start a new Ubuntu system and execute &lt;code&gt;mvn clean test&lt;/code&gt; inside it. &lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor.com&lt;/a&gt;, our virtual assistant, does exactly that with our builds, when we deploy, package, test and merge them.&lt;/p&gt; &lt;!--more--&gt; &lt;h2 id=&quot;why-docker&quot;&gt;Why Docker?&lt;/h2&gt; &lt;p&gt;What benefits does it give us? And why &lt;a href=&quot;/2014/08/29/docker-non-root.html&quot;&gt;Docker&lt;/a&gt;, when there are many &lt;a href=&quot;https://en.wikipedia.org/wiki/Operating_system-level_virtualization&quot;&gt;other virtualization technologies&lt;/a&gt;, like LXC, for example?&lt;/p&gt; &lt;p&gt;Well, there are a few very important benefits:&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Image repository (hub.docker.com)&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Versioning&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Application-centric&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Let’s discuss them in details.&lt;/p&gt; &lt;h2 id=&quot;image-repository&quot;&gt;Image Repository&lt;/h2&gt; &lt;p&gt;Docker enables image sharing through its public repository at &lt;a href=&quot;http://hub.docker.com&quot;&gt;hub.docker.com&lt;/a&gt;. This means that after I prepare a working environment for my application, I make an image out of it and push it to the hub.&lt;/p&gt; &lt;p&gt;Let’s say, I want my Maven build to be executed in a container with a pre-installed &lt;code&gt;graphviz&lt;/code&gt; package (in order to enable &lt;code&gt;dot&lt;/code&gt; command line tool). First, I would start a plain vanilla Ubuntu container, and install &lt;code&gt;graphviz&lt;/code&gt; inside it:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;$ sudo docker run -i -t ubuntu /bin/bash root@215d2696e8ad:/# sudo apt-get install -y graphviz Reading package lists... Done Building dependency tree Reading state information... Done The following extra packages will be installed: ... root@215d2696e8ad:/# exit $ sudo docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 215d2696e8ad ubuntu:14.04 /bin/bash About a minute ago Exited (0) 3 seconds ago high_mccarthy&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;I have a container that stopped a few seconds ago. Container’s ID is &lt;code&gt;215d2696e8ad&lt;/code&gt;. Now, I want to make it reusable for all further tests in Rultor.com. I have to create an image from it:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ sudo docker commit 215d2696e8ad yegor256/beta c5ad7718fc0e20fe4bf2c8a9bfade4db8617a25366ca5b64be2e1e8aa0de6e52&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;I just made my new commit to a new image &lt;code&gt;yegor256/beta&lt;/code&gt;. This image can be reused right now. I can create a new container from this image and it will have &lt;code&gt;graphviz&lt;/code&gt; installed inside!&lt;/p&gt; &lt;p&gt;Now it’s time to share my image at Docker hub, in order to make it available for Rultor:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;$ sudo docker push yegor256/beta The push refers to a repository [yegor256/beta] (len: 1) Sending image list Pushing repository yegor256/beta (1 tags) 511136ea3c5a: Image already pushed, skipping d7ac5e4f1812: Image already pushed, skipping 2f4b4d6a4a06: Image already pushed, skipping 83ff768040a0: Image already pushed, skipping 6c37f792ddac: Image already pushed, skipping e54ca5efa2e9: Image already pushed, skipping c5ad7718fc0e: Image successfully pushed Pushing tag for rev [c5ad7718fc0e] on {https://registry-1.docker.io/v1/repositories/yegor256/beta/tags/latest}&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;The last step is to configure Rultor to use this image in all builds. To do this, I will edit &lt;a href=&quot;http://doc.rultor.com/reference.html&quot;&gt;&lt;code&gt;.rultor.yml&lt;/code&gt;&lt;/a&gt; in the root directory of my GitHub repository:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;docker: image: yegor256/beta&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;That’s it. From now on, Rultor will use my custom Docker image with pre-installed &lt;code&gt;graphviz&lt;/code&gt;, in every build (merge, release, deploy, etc.)&lt;/p&gt; &lt;p&gt;Moreover, if and when I want to add something else to the image, it’s easy to do. Say, I want to install Ruby into my build image. I start a container from the image and install it (pay attention, I’m starting a container not from &lt;code&gt;ubuntu&lt;/code&gt; image, as I did before, but from &lt;code&gt;yegor256/beta&lt;/code&gt;):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;$ sudo docker run -i -t yegor256/beta /bin/bash root@7e0fbd9806c9:/# sudo apt-get install -y ruby Reading package lists... Done Building dependency tree Reading state information... Done The following extra packages will be installed: ... root@7e0fbd9806c9:/# exit $ sudo docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 7e0fbd9806c9 yegor256/beta:latest /bin/bash 28 seconds ago Exited (0) 2 seconds ago pensive_pare 215d2696e8ad ubuntu:14.04 /bin/bash 10 minutes ago Exited (0) 8 minutes ago high_mccarthy&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;You can now see that I have two containers. The first one is the one I am using right now; it contains Ruby. The second one is the one I was using before and it contains &lt;code&gt;graphviz&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;Now I have to commit again and push:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ sudo docker commit 7e0fbd9806c9 yegor256/beta 6cbfb7a6b18a2182f42171f6bb5aef67c4819b5c2795edffa6a63ba78aaada2d $ sudo docker push yegor256/beta ...&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Thus, this Docker hub is a very convenient feature for Rultor and similar systems.&lt;/p&gt; &lt;h2 id=&quot;versioning&quot;&gt;Versioning&lt;/h2&gt; &lt;p&gt;As you saw in the example above, every change to a Docker image has its own version (hash) and it’s possible to track changes. It is also possible to roll back to any particular change.&lt;/p&gt; &lt;p&gt;Rultor is not using this functionality itself, but Rultor users are able to control their build configurations with much better precision.&lt;/p&gt; &lt;h2 id=&quot;application-centric&quot;&gt;Application-Centric&lt;/h2&gt; &lt;p&gt;Docker, unlike LXC or Vagrant, for example, is application-centric. This means that when we start a container—we start an application. With other virtualization technologies, when you get a virtual machine—you get a fully functional Unix environment, where you can login through SSH and do whatever you want.&lt;/p&gt; &lt;p&gt;Docker makes things simpler. It doesn’t give you SSH access to container, but runs an application inside and shows you its output. This is exactly what we need in Rultor. We need to run an automated build (for example Maven or Bundler), see its output and get its exit code. If the code is not zero, we fail the build and report to the user.&lt;/p&gt; &lt;p&gt;This is how we run Maven build:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;&lt;/span&gt;$ sudo docker run --rm -i -t yegor256/rultor mvn clean &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;INFO&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; ------------------------------------------------------------------------ &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;INFO&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; Building jcabi-github &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;.13 &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;INFO&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; ------------------------------------------------------------------------ &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;INFO&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;INFO&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; --- maven-clean-plugin:2.5:clean &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;default-clean&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; @ jcabi-github --- &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;INFO&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; ...&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;As you can see, Maven starts immediately. We don’t worry about the internals of the container. We just start an application inside it.&lt;/p&gt; &lt;p&gt;Furthermore, thanks to the &lt;code&gt;--rm&lt;/code&gt; option, the container gets destroyed immediately after Maven execution is finished.&lt;/p&gt; &lt;p&gt;This is what application-centric is about.&lt;/p&gt; &lt;p&gt;Our overall impression of Docker is highly positive.&lt;/p&gt; &lt;p&gt;ps. A compact version of this article was published at &lt;a href=&quot;http://devops.com/blogs/build-docker-containers/&quot;&gt;devops.com&lt;/a&gt;&lt;/p&gt; "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/07/29/docker-in-rultor.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?23bb3130b4f"/> <link rel="apple-touch-icon" href="/favicon.ico?23bb3130b4f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?23bb3130b4f"/> <link rel="stylesheet" href="/css/icons.css?23bb3130b4f"/> <link rel="canonical" href="https://www.yegor256.com/2014/07/29/docker-in-rultor.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/07/29/docker-in-rultor.amp.html" /> <title>Every Build in Its Own Docker Container </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /2014/07/29/docker-in-rultor.html><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /2014/07/29/docker-in-rultor.html><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /2014/07/29/docker-in-rultor.html><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /2014/07/29/docker-in-rultor.html><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /2014/07/29/docker-in-rultor.html><a href="/books.html" title="The books I wrote">Books</a></li> <li /2014/07/29/docker-in-rultor.html><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /2014/07/29/docker-in-rultor.html><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /2014/07/29/docker-in-rultor.html class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /2014/07/29/docker-in-rultor.html><a href="/award.html" title="Software quality award">Award</a></li> <li /2014/07/29/docker-in-rultor.html><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /2014/07/29/docker-in-rultor.html><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /2014/07/29/docker-in-rultor.html><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/07/29/docker-in-rultor.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2014/07/29/docker-in-rultor.html</code></p><h1 itemprop="name headline mainEntityOfPage">Every Build in Its Own Docker Container</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-07-29T00:00:00+00:00"> 29 July 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2014/07/29/docker-in-rultor.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><figure class="badge"><a href="http://www.docker.io"><img src="http://doc.rultor.com/images/docker-logo.png" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.docker.io">Docker</a> is a command line tool that can run a shell command in a virtual Linux, inside an isolated file system. Every time we build our projects, we want them to run in their own Docker containers. Take this Maven project for example:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ sudo docker run -i -t ubuntu mvn clean <span class="nb">test</span></code></pre></figure> <figure class="badge"><a href="http://www.rultor.com"><img src="http://doc.rultor.com/images/logo.svg" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p>This command will start a new Ubuntu system and execute <code>mvn clean test</code> inside it. <a href="http://www.rultor.com">Rultor.com</a>, our virtual assistant, does exactly that with our builds, when we deploy, package, test and merge them.</p><h2 id="why-docker">Why Docker?</h2><p>What benefits does it give us? And why <a href="/2014/08/29/docker-non-root.html">Docker</a>, when there are many <a href="https://en.wikipedia.org/wiki/Operating_system-level_virtualization">other virtualization technologies</a>, like LXC, for example?</p><p>Well, there are a few very important benefits:</p><ul> <li><p>Image repository (hub.docker.com)</p></li> <li><p>Versioning</p></li> <li><p>Application-centric</p></li></ul><p>Let’s discuss them in details.</p><h2 id="image-repository">Image Repository</h2><p>Docker enables image sharing through its public repository at <a href="http://hub.docker.com">hub.docker.com</a>. This means that after I prepare a working environment for my application, I make an image out of it and push it to the hub.</p><p>Let’s say, I want my Maven build to be executed in a container with a pre-installed <code>graphviz</code> package (in order to enable <code>dot</code> command line tool). First, I would start a plain vanilla Ubuntu container, and install <code>graphviz</code> inside it:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>$ sudo docker run -i -t ubuntu /bin/bash
root@215d2696e8ad:/# sudo apt-get install -y graphviz
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following extra packages will be installed:
...
root@215d2696e8ad:/# exit
$ sudo docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED              STATUS                     PORTS               NAMES
215d2696e8ad        ubuntu:14.04        /bin/bash           About a minute ago   Exited (0) 3 seconds ago                       high_mccarthy</code></pre></figure><p>I have a container that stopped a few seconds ago. Container’s ID is <code>215d2696e8ad</code>. Now, I want to make it reusable for all further tests in Rultor.com. I have to create an image from it:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ sudo docker commit 215d2696e8ad yegor256/beta
c5ad7718fc0e20fe4bf2c8a9bfade4db8617a25366ca5b64be2e1e8aa0de6e52</code></pre></figure><p>I just made my new commit to a new image <code>yegor256/beta</code>. This image can be reused right now. I can create a new container from this image and it will have <code>graphviz</code> installed inside!</p><p>Now it’s time to share my image at Docker hub, in order to make it available for Rultor:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>$ sudo docker push yegor256/beta
The push refers to a repository [yegor256/beta] (len: 1)
Sending image list
Pushing repository yegor256/beta (1 tags)
511136ea3c5a: Image already pushed, skipping
d7ac5e4f1812: Image already pushed, skipping
2f4b4d6a4a06: Image already pushed, skipping
83ff768040a0: Image already pushed, skipping
6c37f792ddac: Image already pushed, skipping
e54ca5efa2e9: Image already pushed, skipping
c5ad7718fc0e: Image successfully pushed
Pushing tag for rev [c5ad7718fc0e] on {https://registry-1.docker.io/v1/repositories/yegor256/beta/tags/latest}</code></pre></figure><p>The last step is to configure Rultor to use this image in all builds. To do this, I will edit <a href="http://doc.rultor.com/reference.html"><code>.rultor.yml</code></a> in the root directory of my GitHub repository:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>docker:
  image: yegor256/beta</code></pre></figure><p>That’s it. From now on, Rultor will use my custom Docker image with pre-installed <code>graphviz</code>, in every build (merge, release, deploy, etc.)</p><p>Moreover, if and when I want to add something else to the image, it’s easy to do. Say, I want to install Ruby into my build image. I start a container from the image and install it (pay attention, I’m starting a container not from <code>ubuntu</code> image, as I did before, but from <code>yegor256/beta</code>):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>$ sudo docker run -i -t yegor256/beta /bin/bash
root@7e0fbd9806c9:/# sudo apt-get install -y ruby
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following extra packages will be installed:
...
root@7e0fbd9806c9:/# exit
$ sudo docker ps -a
CONTAINER ID        IMAGE                  COMMAND             CREATED             STATUS                     PORTS               NAMES
7e0fbd9806c9        yegor256/beta:latest   /bin/bash           28 seconds ago      Exited (0) 2 seconds ago                       pensive_pare
215d2696e8ad        ubuntu:14.04           /bin/bash           10 minutes ago      Exited (0) 8 minutes ago                       high_mccarthy</code></pre></figure><p>You can now see that I have two containers. The first one is the one I am using right now; it contains Ruby. The second one is the one I was using before and it contains <code>graphviz</code>.</p><p>Now I have to commit again and push:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ sudo docker commit 7e0fbd9806c9 yegor256/beta
6cbfb7a6b18a2182f42171f6bb5aef67c4819b5c2795edffa6a63ba78aaada2d
$ sudo docker push yegor256/beta
...</code></pre></figure><p>Thus, this Docker hub is a very convenient feature for Rultor and similar systems.</p><h2 id="versioning">Versioning</h2><p>As you saw in the example above, every change to a Docker image has its own version (hash) and it’s possible to track changes. It is also possible to roll back to any particular change.</p><p>Rultor is not using this functionality itself, but Rultor users are able to control their build configurations with much better precision.</p><h2 id="application-centric">Application-Centric</h2><p>Docker, unlike LXC or Vagrant, for example, is application-centric. This means that when we start a container—we start an application. With other virtualization technologies, when you get a virtual machine—you get a fully functional Unix environment, where you can login through SSH and do whatever you want.</p><p>Docker makes things simpler. It doesn’t give you SSH access to container, but runs an application inside and shows you its output. This is exactly what we need in Rultor. We need to run an automated build (for example Maven or Bundler), see its output and get its exit code. If the code is not zero, we fail the build and report to the user.</p><p>This is how we run Maven build:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ sudo docker run --rm -i -t yegor256/rultor mvn clean <span class="nb">test</span>
<span class="o">[</span>INFO<span class="o">]</span> ------------------------------------------------------------------------
<span class="o">[</span>INFO<span class="o">]</span> Building jcabi-github <span class="m">0</span>.13
<span class="o">[</span>INFO<span class="o">]</span> ------------------------------------------------------------------------
<span class="o">[</span>INFO<span class="o">]</span>
<span class="o">[</span>INFO<span class="o">]</span> --- maven-clean-plugin:2.5:clean <span class="o">(</span>default-clean<span class="o">)</span> @ jcabi-github ---
<span class="o">[</span>INFO<span class="o">]</span>
...</code></pre></figure><p>As you can see, Maven starts immediately. We don’t worry about the internals of the container. We just start an application inside it.</p><p>Furthermore, thanks to the <code>--rm</code> option, the container gets destroyed immediately after Maven execution is finished.</p><p>This is what application-centric is about.</p><p>Our overall impression of Docker is highly positive.</p><p>ps. A compact version of this article was published at <a href="http://devops.com/blogs/build-docker-containers/">devops.com</a></p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/07/29/docker-in-rultor.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/07/29/docker-in-rultor.html&amp;text=Every+Build+in+Its+Own+Docker+Container" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/07/29/docker-in-rultor.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/07/29/docker-in-rultor.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/07/29/docker-in-rultor.html%3F2014-30&amp;title=Every+Build+in+Its+Own+Docker+Container" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/07/29/docker-in-rultor.html%3F2014-30&amp;t=Every+Build+in+Its+Own+Docker+Container" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div > <figure class="badge"><a href="http://www.docker.io"><img src="http://doc.rultor.com/images/docker-logo.png" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.docker.io">Docker</a> is a command line tool that can run a shell command in a virtual Linux, inside an isolated file system. Every time we build our projects, we want them to run in their own Docker containers. Take this Maven project for example:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ sudo docker run -i -t ubuntu mvn clean <span class="nb">test</span></code></pre></figure> <figure class="badge"><a href="http://www.rultor.com"><img src="http://doc.rultor.com/images/logo.svg" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p>This command will start a new Ubuntu system and execute <code>mvn clean test</code> inside it. <a href="http://www.rultor.com">Rultor.com</a>, our virtual assistant, does exactly that with our builds, when we deploy, package, test and merge them.</p><h2 id="why-docker">Why Docker?</h2><p>What benefits does it give us? And why <a href="/2014/08/29/docker-non-root.html">Docker</a>, when there are many <a href="https://en.wikipedia.org/wiki/Operating_system-level_virtualization">other virtualization technologies</a>, like LXC, for example?</p><p>Well, there are a few very important benefits:</p><ul> <li><p>Image repository (hub.docker.com)</p></li> <li><p>Versioning</p></li> <li><p>Application-centric</p></li></ul><p>Let’s discuss them in details.</p><h2 id="image-repository">Image Repository</h2><p>Docker enables image sharing through its public repository at <a href="http://hub.docker.com">hub.docker.com</a>. This means that after I prepare a working environment for my application, I make an image out of it and push it to the hub.</p><p>Let’s say, I want my Maven build to be executed in a container with a pre-installed <code>graphviz</code> package (in order to enable <code>dot</code> command line tool). First, I would start a plain vanilla Ubuntu container, and install <code>graphviz</code> inside it:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>$ sudo docker run -i -t ubuntu /bin/bash
root@215d2696e8ad:/# sudo apt-get install -y graphviz
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following extra packages will be installed:
...
root@215d2696e8ad:/# exit
$ sudo docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED              STATUS                     PORTS               NAMES
215d2696e8ad        ubuntu:14.04        /bin/bash           About a minute ago   Exited (0) 3 seconds ago                       high_mccarthy</code></pre></figure><p>I have a container that stopped a few seconds ago. Container’s ID is <code>215d2696e8ad</code>. Now, I want to make it reusable for all further tests in Rultor.com. I have to create an image from it:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ sudo docker commit 215d2696e8ad yegor256/beta
c5ad7718fc0e20fe4bf2c8a9bfade4db8617a25366ca5b64be2e1e8aa0de6e52</code></pre></figure><p>I just made my new commit to a new image <code>yegor256/beta</code>. This image can be reused right now. I can create a new container from this image and it will have <code>graphviz</code> installed inside!</p><p>Now it’s time to share my image at Docker hub, in order to make it available for Rultor:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>$ sudo docker push yegor256/beta
The push refers to a repository [yegor256/beta] (len: 1)
Sending image list
Pushing repository yegor256/beta (1 tags)
511136ea3c5a: Image already pushed, skipping
d7ac5e4f1812: Image already pushed, skipping
2f4b4d6a4a06: Image already pushed, skipping
83ff768040a0: Image already pushed, skipping
6c37f792ddac: Image already pushed, skipping
e54ca5efa2e9: Image already pushed, skipping
c5ad7718fc0e: Image successfully pushed
Pushing tag for rev [c5ad7718fc0e] on {https://registry-1.docker.io/v1/repositories/yegor256/beta/tags/latest}</code></pre></figure><p>The last step is to configure Rultor to use this image in all builds. To do this, I will edit <a href="http://doc.rultor.com/reference.html"><code>.rultor.yml</code></a> in the root directory of my GitHub repository:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>docker:
  image: yegor256/beta</code></pre></figure><p>That’s it. From now on, Rultor will use my custom Docker image with pre-installed <code>graphviz</code>, in every build (merge, release, deploy, etc.)</p><p>Moreover, if and when I want to add something else to the image, it’s easy to do. Say, I want to install Ruby into my build image. I start a container from the image and install it (pay attention, I’m starting a container not from <code>ubuntu</code> image, as I did before, but from <code>yegor256/beta</code>):</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>$ sudo docker run -i -t yegor256/beta /bin/bash
root@7e0fbd9806c9:/# sudo apt-get install -y ruby
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following extra packages will be installed:
...
root@7e0fbd9806c9:/# exit
$ sudo docker ps -a
CONTAINER ID        IMAGE                  COMMAND             CREATED             STATUS                     PORTS               NAMES
7e0fbd9806c9        yegor256/beta:latest   /bin/bash           28 seconds ago      Exited (0) 2 seconds ago                       pensive_pare
215d2696e8ad        ubuntu:14.04           /bin/bash           10 minutes ago      Exited (0) 8 minutes ago                       high_mccarthy</code></pre></figure><p>You can now see that I have two containers. The first one is the one I am using right now; it contains Ruby. The second one is the one I was using before and it contains <code>graphviz</code>.</p><p>Now I have to commit again and push:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ sudo docker commit 7e0fbd9806c9 yegor256/beta
6cbfb7a6b18a2182f42171f6bb5aef67c4819b5c2795edffa6a63ba78aaada2d
$ sudo docker push yegor256/beta
...</code></pre></figure><p>Thus, this Docker hub is a very convenient feature for Rultor and similar systems.</p><h2 id="versioning">Versioning</h2><p>As you saw in the example above, every change to a Docker image has its own version (hash) and it’s possible to track changes. It is also possible to roll back to any particular change.</p><p>Rultor is not using this functionality itself, but Rultor users are able to control their build configurations with much better precision.</p><h2 id="application-centric">Application-Centric</h2><p>Docker, unlike LXC or Vagrant, for example, is application-centric. This means that when we start a container—we start an application. With other virtualization technologies, when you get a virtual machine—you get a fully functional Unix environment, where you can login through SSH and do whatever you want.</p><p>Docker makes things simpler. It doesn’t give you SSH access to container, but runs an application inside and shows you its output. This is exactly what we need in Rultor. We need to run an automated build (for example Maven or Bundler), see its output and get its exit code. If the code is not zero, we fail the build and report to the user.</p><p>This is how we run Maven build:</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span></span>$ sudo docker run --rm -i -t yegor256/rultor mvn clean <span class="nb">test</span>
<span class="o">[</span>INFO<span class="o">]</span> ------------------------------------------------------------------------
<span class="o">[</span>INFO<span class="o">]</span> Building jcabi-github <span class="m">0</span>.13
<span class="o">[</span>INFO<span class="o">]</span> ------------------------------------------------------------------------
<span class="o">[</span>INFO<span class="o">]</span>
<span class="o">[</span>INFO<span class="o">]</span> --- maven-clean-plugin:2.5:clean <span class="o">(</span>default-clean<span class="o">)</span> @ jcabi-github ---
<span class="o">[</span>INFO<span class="o">]</span>
...</code></pre></figure><p>As you can see, Maven starts immediately. We don’t worry about the internals of the container. We just start an application inside it.</p><p>Furthermore, thanks to the <code>--rm</code> option, the container gets destroyed immediately after Maven execution is finished.</p><p>This is what application-centric is about.</p><p>Our overall impression of Docker is highly positive.</p><p>ps. A compact version of this article was published at <a href="http://devops.com/blogs/build-docker-containers/">devops.com</a></p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?23bb3130b4f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="&lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/logo.svg&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;You get a GitHub pull request. You review it. It looks correct—it’s time to merge it into &lt;code&gt;master&lt;/code&gt;. You post a comment in it, asking &lt;a href=&quot;https://github.com/rultor&quot;&gt;@rultor&lt;/a&gt; to test and merge. Rultor starts a new &lt;a href=&quot;http://www.docker.io&quot;&gt;Docker&lt;/a&gt; container, merges the pull request into &lt;code&gt;master&lt;/code&gt;, runs all tests and, if everything looks clean—merges, pushes, and closes the request.&lt;/p&gt; &lt;p&gt;Then, you ask &lt;a href=&quot;https://github.com/rultor&quot;&gt;@rultor&lt;/a&gt; to deploy the current version to production environment. It checks out your repository, starts a new Docker container, executes your deployment scripts and reports to you right there in the GitHub issue.&lt;/p&gt; &lt;!--more--&gt; &lt;h2 id=&quot;why-not-jenkins-or-travis&quot;&gt;Why not Jenkins or Travis?&lt;/h2&gt; &lt;p&gt;There are many tools on the market, which automate &lt;a href=&quot;/2014/10/08/continuous-integration-is-dead.html&quot;&gt;continuous integration&lt;/a&gt; and continuous delivery (let’s call them DevOps). For example, downloadable open source &lt;a href=&quot;http://jenkins-ci.org/&quot;&gt;Jenkins&lt;/a&gt; and hosted &lt;a href=&quot;/2014/07/31/travis-and-rultor.html&quot;&gt;Travis&lt;/a&gt; both perform these tasks. So, why do we need one more?&lt;/p&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=NflR7DKwxDY&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/NflR7DKwxDY/mqdefault.jpg&quot; alt=&quot;YouTube video #NflR7DKwxDY&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Deployment Scripts Are Dead. Meet Rultor.; 26 May 2016.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;Well, there are three very important features that we need for our projects, but we can’t find all of them in any of the DevOps tools currently available on the market:&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Merging&lt;/strong&gt;. We make master branch read-only in our projects, as &lt;a href=&quot;/2014/07/21/read-only-master-branch.html&quot;&gt;this article&lt;/a&gt; recommends. All changes into master we pass through a script that validates them and merges.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Docker&lt;/strong&gt;. Every build should work in its own Docker container, in order to simplify configuration, isolate resources and make errors easily reproducible.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Tell vs. Trigger&lt;/strong&gt;. We need to communicate with DevOps tool through commands, right from our issue tracking system (GitHub issues, in most projects). All existing DevOps systems trigger builds on certain conditions. We need our developers to be able to talk to the tool, through human-like commands in the tickets they are working with.&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;p&gt;A combination of these three features is what differs &lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor&lt;/a&gt; from all other existing systems.&lt;/p&gt; &lt;h2 id=&quot;how-rultor-merges&quot;&gt;How Rultor Merges&lt;/h2&gt; &lt;p&gt;Once Rultor finds a &lt;a href=&quot;http://doc.rultor.com/basics.html&quot;&gt;merge command&lt;/a&gt; in one of your GitHub pull requests, it does exactly this:&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;Reads the &lt;a href=&quot;http://doc.rultor.com/reference.html&quot;&gt;&lt;code&gt;.rultor.yml&lt;/code&gt;&lt;/a&gt; YAML configuration file from the root directory of your repository.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Gets automated build execution command from it, for example &lt;code&gt;bundle test&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Checks out your repository into a temporary directory on one of its servers.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Merges pull request into &lt;code&gt;master&lt;/code&gt; branch.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Starts a new Docker container and runs &lt;code&gt;bundle test&lt;/code&gt; in it.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;If everything is fine, pushes modified &lt;code&gt;master&lt;/code&gt; branch to GitHub.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Reports back to you, in the GitHub pull request.&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;p&gt;You can see it in action, for example, in this pull request: &lt;a href=&quot;https://github.com/jcabi/jcabi-github/pull/878&quot;&gt;jcabi/jcabi-github#878&lt;/a&gt;.&lt;/p&gt; " /> <meta name="keywords" content="next, path, output, content, previous, url, relative_path, id, collection, excerpt, draft, categories, layout, title, date, tags, description, keywords, slug, ext" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-07-24 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Rultor.com, a Merging Bot"/> <meta name="twitter:description" property="og:description" content="&lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/logo.svg&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;You get a GitHub pull request. You review it. It looks correct—it’s time to merge it into &lt;code&gt;master&lt;/code&gt;. You post a comment in it, asking &lt;a href=&quot;https://github.com/rultor&quot;&gt;@rultor&lt;/a&gt; to test and merge. Rultor starts a new &lt;a href=&quot;http://www.docker.io&quot;&gt;Docker&lt;/a&gt; container, merges the pull request into &lt;code&gt;master&lt;/code&gt;, runs all tests and, if everything looks clean—merges, pushes, and closes the request.&lt;/p&gt; &lt;p&gt;Then, you ask &lt;a href=&quot;https://github.com/rultor&quot;&gt;@rultor&lt;/a&gt; to deploy the current version to production environment. It checks out your repository, starts a new Docker container, executes your deployment scripts and reports to you right there in the GitHub issue.&lt;/p&gt; &lt;!--more--&gt; &lt;h2 id=&quot;why-not-jenkins-or-travis&quot;&gt;Why not Jenkins or Travis?&lt;/h2&gt; &lt;p&gt;There are many tools on the market, which automate &lt;a href=&quot;/2014/10/08/continuous-integration-is-dead.html&quot;&gt;continuous integration&lt;/a&gt; and continuous delivery (let’s call them DevOps). For example, downloadable open source &lt;a href=&quot;http://jenkins-ci.org/&quot;&gt;Jenkins&lt;/a&gt; and hosted &lt;a href=&quot;/2014/07/31/travis-and-rultor.html&quot;&gt;Travis&lt;/a&gt; both perform these tasks. So, why do we need one more?&lt;/p&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=NflR7DKwxDY&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/NflR7DKwxDY/mqdefault.jpg&quot; alt=&quot;YouTube video #NflR7DKwxDY&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Deployment Scripts Are Dead. Meet Rultor.; 26 May 2016.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;Well, there are three very important features that we need for our projects, but we can’t find all of them in any of the DevOps tools currently available on the market:&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Merging&lt;/strong&gt;. We make master branch read-only in our projects, as &lt;a href=&quot;/2014/07/21/read-only-master-branch.html&quot;&gt;this article&lt;/a&gt; recommends. All changes into master we pass through a script that validates them and merges.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Docker&lt;/strong&gt;. Every build should work in its own Docker container, in order to simplify configuration, isolate resources and make errors easily reproducible.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Tell vs. Trigger&lt;/strong&gt;. We need to communicate with DevOps tool through commands, right from our issue tracking system (GitHub issues, in most projects). All existing DevOps systems trigger builds on certain conditions. We need our developers to be able to talk to the tool, through human-like commands in the tickets they are working with.&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;p&gt;A combination of these three features is what differs &lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor&lt;/a&gt; from all other existing systems.&lt;/p&gt; &lt;h2 id=&quot;how-rultor-merges&quot;&gt;How Rultor Merges&lt;/h2&gt; &lt;p&gt;Once Rultor finds a &lt;a href=&quot;http://doc.rultor.com/basics.html&quot;&gt;merge command&lt;/a&gt; in one of your GitHub pull requests, it does exactly this:&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;Reads the &lt;a href=&quot;http://doc.rultor.com/reference.html&quot;&gt;&lt;code&gt;.rultor.yml&lt;/code&gt;&lt;/a&gt; YAML configuration file from the root directory of your repository.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Gets automated build execution command from it, for example &lt;code&gt;bundle test&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Checks out your repository into a temporary directory on one of its servers.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Merges pull request into &lt;code&gt;master&lt;/code&gt; branch.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Starts a new Docker container and runs &lt;code&gt;bundle test&lt;/code&gt; in it.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;If everything is fine, pushes modified &lt;code&gt;master&lt;/code&gt; branch to GitHub.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Reports back to you, in the GitHub pull request.&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;p&gt;You can see it in action, for example, in this pull request: &lt;a href=&quot;https://github.com/jcabi/jcabi-github/pull/878&quot;&gt;jcabi/jcabi-github#878&lt;/a&gt;.&lt;/p&gt; "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/07/24/rultor-automated-merging.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?23bb3130b4f"/> <link rel="apple-touch-icon" href="/favicon.ico?23bb3130b4f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?23bb3130b4f"/> <link rel="stylesheet" href="/css/icons.css?23bb3130b4f"/> <link rel="canonical" href="https://www.yegor256.com/2014/07/24/rultor-automated-merging.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/07/24/rultor-automated-merging.amp.html" /> <title>Rultor.com, a Merging Bot </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /2014/07/24/rultor-automated-merging.html><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /2014/07/24/rultor-automated-merging.html><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /2014/07/24/rultor-automated-merging.html><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /2014/07/24/rultor-automated-merging.html><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /2014/07/24/rultor-automated-merging.html><a href="/books.html" title="The books I wrote">Books</a></li> <li /2014/07/24/rultor-automated-merging.html><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /2014/07/24/rultor-automated-merging.html><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /2014/07/24/rultor-automated-merging.html class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /2014/07/24/rultor-automated-merging.html><a href="/award.html" title="Software quality award">Award</a></li> <li /2014/07/24/rultor-automated-merging.html><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /2014/07/24/rultor-automated-merging.html><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /2014/07/24/rultor-automated-merging.html><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/07/24/rultor-automated-merging.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2014/07/24/rultor-automated-merging.html</code></p><h1 itemprop="name headline mainEntityOfPage">Rultor.com, a Merging Bot</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-07-24T00:00:00+00:00"> 24 July 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2014/07/24/rultor-automated-merging.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><figure class="badge"><a href="http://www.rultor.com"><img src="http://doc.rultor.com/images/logo.svg" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p>You get a GitHub pull request. You review it. It looks correct—it’s time to merge it into <code>master</code>. You post a comment in it, asking <a href="https://github.com/rultor">@rultor</a> to test and merge. Rultor starts a new <a href="http://www.docker.io">Docker</a> container, merges the pull request into <code>master</code>, runs all tests and, if everything looks clean—merges, pushes, and closes the request.</p><p>Then, you ask <a href="https://github.com/rultor">@rultor</a> to deploy the current version to production environment. It checks out your repository, starts a new Docker container, executes your deployment scripts and reports to you right there in the GitHub issue.</p><h2 id="why-not-jenkins-or-travis">Why not Jenkins or Travis?</h2><p>There are many tools on the market, which automate <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> and continuous delivery (let’s call them DevOps). For example, downloadable open source <a href="http://jenkins-ci.org/">Jenkins</a> and hosted <a href="/2014/07/31/travis-and-rultor.html">Travis</a> both perform these tasks. So, why do we need one more?</p><aside class="youtube"> <a href="https://www.youtube.com/watch?v=NflR7DKwxDY"><div class="box"> <img src="https://i.ytimg.com/vi/NflR7DKwxDY/mqdefault.jpg" alt="YouTube video #NflR7DKwxDY" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Deployment Scripts Are Dead. Meet Rultor.; 26 May 2016.</div></aside><p>Well, there are three very important features that we need for our projects, but we can’t find all of them in any of the DevOps tools currently available on the market:</p><ul> <li><p><strong>Merging</strong>. We make master branch read-only in our projects, as <a href="/2014/07/21/read-only-master-branch.html">this article</a> recommends. All changes into master we pass through a script that validates them and merges.</p></li> <li><p><strong>Docker</strong>. Every build should work in its own Docker container, in order to simplify configuration, isolate resources and make errors easily reproducible.</p></li> <li><p><strong>Tell vs. Trigger</strong>. We need to communicate with DevOps tool through commands, right from our issue tracking system (GitHub issues, in most projects). All existing DevOps systems trigger builds on certain conditions. We need our developers to be able to talk to the tool, through human-like commands in the tickets they are working with.</p></li></ul><p>A combination of these three features is what differs <a href="http://www.rultor.com">Rultor</a> from all other existing systems.</p><h2 id="how-rultor-merges">How Rultor Merges</h2><p>Once Rultor finds a <a href="http://doc.rultor.com/basics.html">merge command</a> in one of your GitHub pull requests, it does exactly this:</p><ol> <li><p>Reads the <a href="http://doc.rultor.com/reference.html"><code>.rultor.yml</code></a> YAML configuration file from the root directory of your repository.</p></li> <li><p>Gets automated build execution command from it, for example <code>bundle test</code>.</p></li> <li><p>Checks out your repository into a temporary directory on one of its servers.</p></li> <li><p>Merges pull request into <code>master</code> branch.</p></li> <li><p>Starts a new Docker container and runs <code>bundle test</code> in it.</p></li> <li><p>If everything is fine, pushes modified <code>master</code> branch to GitHub.</p></li> <li><p>Reports back to you, in the GitHub pull request.</p></li> </ol><p>You can see it in action, for example, in this pull request: <a href="https://github.com/jcabi/jcabi-github/pull/878">jcabi/jcabi-github#878</a>.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/07/24/rultor-automated-merging.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/07/24/rultor-automated-merging.html&amp;text=Rultor.com%2C+a+Merging+Bot" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/07/24/rultor-automated-merging.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/07/24/rultor-automated-merging.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/07/24/rultor-automated-merging.html%3F2014-29&amp;title=Rultor.com%2C+a+Merging+Bot" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/07/24/rultor-automated-merging.html%3F2014-29&amp;t=Rultor.com%2C+a+Merging+Bot" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div > <figure class="badge"><a href="http://www.rultor.com"><img src="http://doc.rultor.com/images/logo.svg" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p>You get a GitHub pull request. You review it. It looks correct—it’s time to merge it into <code>master</code>. You post a comment in it, asking <a href="https://github.com/rultor">@rultor</a> to test and merge. Rultor starts a new <a href="http://www.docker.io">Docker</a> container, merges the pull request into <code>master</code>, runs all tests and, if everything looks clean—merges, pushes, and closes the request.</p><p>Then, you ask <a href="https://github.com/rultor">@rultor</a> to deploy the current version to production environment. It checks out your repository, starts a new Docker container, executes your deployment scripts and reports to you right there in the GitHub issue.</p><h2 id="why-not-jenkins-or-travis">Why not Jenkins or Travis?</h2><p>There are many tools on the market, which automate <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> and continuous delivery (let’s call them DevOps). For example, downloadable open source <a href="http://jenkins-ci.org/">Jenkins</a> and hosted <a href="/2014/07/31/travis-and-rultor.html">Travis</a> both perform these tasks. So, why do we need one more?</p><aside class="youtube"> <a href="https://www.youtube.com/watch?v=NflR7DKwxDY"><div class="box"> <img src="https://i.ytimg.com/vi/NflR7DKwxDY/mqdefault.jpg" alt="YouTube video #NflR7DKwxDY" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Deployment Scripts Are Dead. Meet Rultor.; 26 May 2016.</div></aside><p>Well, there are three very important features that we need for our projects, but we can’t find all of them in any of the DevOps tools currently available on the market:</p><ul> <li><p><strong>Merging</strong>. We make master branch read-only in our projects, as <a href="/2014/07/21/read-only-master-branch.html">this article</a> recommends. All changes into master we pass through a script that validates them and merges.</p></li> <li><p><strong>Docker</strong>. Every build should work in its own Docker container, in order to simplify configuration, isolate resources and make errors easily reproducible.</p></li> <li><p><strong>Tell vs. Trigger</strong>. We need to communicate with DevOps tool through commands, right from our issue tracking system (GitHub issues, in most projects). All existing DevOps systems trigger builds on certain conditions. We need our developers to be able to talk to the tool, through human-like commands in the tickets they are working with.</p></li></ul><p>A combination of these three features is what differs <a href="http://www.rultor.com">Rultor</a> from all other existing systems.</p><h2 id="how-rultor-merges">How Rultor Merges</h2><p>Once Rultor finds a <a href="http://doc.rultor.com/basics.html">merge command</a> in one of your GitHub pull requests, it does exactly this:</p><ol> <li><p>Reads the <a href="http://doc.rultor.com/reference.html"><code>.rultor.yml</code></a> YAML configuration file from the root directory of your repository.</p></li> <li><p>Gets automated build execution command from it, for example <code>bundle test</code>.</p></li> <li><p>Checks out your repository into a temporary directory on one of its servers.</p></li> <li><p>Merges pull request into <code>master</code> branch.</p></li> <li><p>Starts a new Docker container and runs <code>bundle test</code> in it.</p></li> <li><p>If everything is fine, pushes modified <code>master</code> branch to GitHub.</p></li> <li><p>Reports back to you, in the GitHub pull request.</p></li> </ol><p>You can see it in action, for example, in this pull request: <a href="https://github.com/jcabi/jcabi-github/pull/878">jcabi/jcabi-github#878</a>.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?23bb3130b4f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="&lt;p&gt;Continuous integration is easy. Download Jenkins, install, create a job, click the button, and get a nice email saying that your build is broken (I assume your build is automated). Then, fix broken tests (I assume you have tests), and get a much better looking email saying that your build is clean.&lt;/p&gt; &lt;p&gt;Then, tweet about it, claiming that your team is using &lt;a href=&quot;/2014/10/08/continuous-integration-is-dead.html&quot;&gt;continuous integration&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Then, in a few weeks, start filtering out Jenkins alerts, into their own folder, so that they don’t bother you anymore. Anyway, your team doesn’t have the time or desire to fix all unit tests every time someone breaks them.&lt;/p&gt; &lt;p&gt;After all, we all know that unit testing is not for a team working with deadlines, right?&lt;/p&gt; &lt;p&gt;Wrong. Continuous integration can and must work.&lt;/p&gt; &lt;!--more--&gt; &lt;h2 id=&quot;what-is-continuous-integration&quot;&gt;What is Continuous Integration?&lt;/h2&gt; &lt;p&gt;Nowadays, software development is done in teams. We develop in feature branches and isolate changes while they are in development. Then, we merge branches into &lt;code&gt;master&lt;/code&gt;. After every merge, we test the entire product, executing all available unit and integration tests. This is called &lt;a href=&quot;https://en.wikipedia.org/wiki/Continuous_integration&quot;&gt;continuous integration&lt;/a&gt; (aka “CI”).&lt;/p&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=2a2nWELIk-Y&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/2a2nWELIk-Y/mqdefault.jpg&quot; alt=&quot;YouTube video #2a2nWELIk-Y&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Yegor Bugayenko | Kyiv DevOps, September, 2015; 6 October 2015.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;Sometimes, some tests fail. When this happens, we say that our “build is broken.” Such a failure is a positive side effect of quality control because it raises a red flag immediately after an error gets into &lt;code&gt;master&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;It is a well-known practice, when fixing that error becomes a top priority for its author and the entire team. The error should be fixed right after a red flag is raised by the &lt;a href=&quot;/2014/10/08/continuous-integration-is-dead.html&quot;&gt;continuous integration&lt;/a&gt; server.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://amzn.to/2bQVmlb&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/07/continuous-delivery-book.png&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://amzn.to/2bQVmlb&quot;&gt;Continuous Delivery by Jez Humble et. al.&lt;/a&gt; explains this approach perfectly in Chapter 7, pages 169–186.&lt;/p&gt; &lt;p&gt;There are a few good tools on the market, which automate DevOps procedures. Some of them are open source, you can download and install them on your own servers. For example: &lt;a href=&quot;http://jenkins-ci.org/&quot;&gt;Jenkins&lt;/a&gt;, &lt;a href=&quot;http://www.thoughtworks.com/products/go-continuous-delivery&quot;&gt;Go&lt;/a&gt;, and &lt;a href=&quot;http://cruisecontrol.sourceforge.net/&quot;&gt;CruiseControl&lt;/a&gt;. Some of them are available as a service in cloud, such as: &lt;a href=&quot;http://www.travis-ci.org&quot;&gt;Travis&lt;/a&gt;, &lt;a href=&quot;http://www.shippable.com&quot;&gt;Shippable&lt;/a&gt;, &lt;a href=&quot;http://wercker.com/&quot;&gt;Wercker&lt;/a&gt;, and &lt;a href=&quot;/2014/10/05/ten-hosted-continuous-integration-services.html&quot;&gt;many others&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;why-continuous-integration-doesnt-work&quot;&gt;Why Continuous Integration Doesn’t Work?&lt;/h2&gt; &lt;p&gt;CI is great, but the bigger the team (and the code base), the more often builds get broken. And, the longer it takes to fix them. I’ve seen many examples where a hard working team starts to ignore red flags, raised by Jenkins, after a few weeks or trying to keep up.&lt;/p&gt; &lt;aside class=&quot;quote&quot;&gt;Product owners do not understand the importance of a &quot;clean build&quot; and devs can't buy time for fixing unit tests&lt;/aside&gt; &lt;p&gt;The team simply becomes incapable of fixing all errors in time. Mostly because the business has other priorities. Product owners do not understand the importance of a “clean build” and technical leaders can’t buy time for fixing unit tests. Moreover, the code that broke them was already in &lt;code&gt;master&lt;/code&gt; and, in most cases, has been already deployed to production and delivered to end-users. What’s the urgency of fixing some tests if business value was already delivered?&lt;/p&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=gL4XwP-EBOg&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/gL4XwP-EBOg/mqdefault.jpg&quot; alt=&quot;YouTube video #gL4XwP-EBOg&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Continuous Integration May Have Negative Effects; 20 April 2016.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;In the end, most development teams don’t take continuous integration alerts seriously. Jenkins or Travis are just fancy tools for them that play no role in the entire development and delivery pipeline. No matter what continuous integration server says, we still deliver new features to our end-users. We’ll fix our build later. And &lt;a href=&quot;/2014/10/08/continuous-integration-is-dead.html&quot;&gt;it’s only logical&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;what-is-a-solution&quot;&gt;What Is a Solution?&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;/pdf/2014/guard-article.pdf&quot; class=&quot;em2&quot; title=&quot;Prevent Conflicts in Distributed Agile PHP Projects&quot;&gt;&lt;i class=&quot;icon icon-pdf&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;Four years ago, in 2010, I published an article in &lt;a href=&quot;http://www.phparch.com/magazine/2010-2/august/&quot;&gt;php|Architect&lt;/a&gt; called “Prevent Conflicts in Distributed Agile PHP Projects.” In the article, a solution was proposed (full article in &lt;a href=&quot;/pdf/2014/guard-article.pdf&quot;&gt;PDF&lt;/a&gt;) for Subversion and PHP.&lt;/p&gt; &lt;p&gt;Since that time, I used experimentally that approach in multiple &lt;a href=&quot;/2015/12/22/why-dont-you-contribute-to-open-source.html&quot;&gt;open source&lt;/a&gt; projects and a few commercial ones with PHP, Java, Ruby and JavaScript, Git and Subversion. In all cases, my experience was only positive, and that’s why &lt;a href=&quot;http://www.rultor.com&quot;&gt;rultor.com&lt;/a&gt; was born (later about that though).&lt;/p&gt; &lt;p&gt;So, the solution is simple—prohibit anyone from merging anything into &lt;code&gt;master&lt;/code&gt; and create a script that anyone can call. The script will merge, test, and commit. The script will not make any exceptions. If any branch is breaking at even one unit test, the entire branch will be rejected.&lt;/p&gt; &lt;p&gt;In other words, we should raise that red flag &lt;strong&gt;before&lt;/strong&gt; the code gets into &lt;code&gt;master&lt;/code&gt;. We should put the blame for broken tests on the shoulders of its author.&lt;/p&gt; &lt;p&gt;Say, I’m developing a feature in my own branch. I finished the development and broke a few tests, accidentally. It happens, we all make mistakes. I can’t merge my changes into &lt;code&gt;master&lt;/code&gt;. Git simply rejects my &lt;code&gt;push&lt;/code&gt;, because I don’t have the appropriate permissions. All I can do is call a magic script, asking it to merge my branch. The script will try to merge, but before pushing into &lt;code&gt;master&lt;/code&gt;, it will run all tests. And if any of them break, my branch will be rejected. My changes won’t be merged. Now it’s my responsibility—to fix them and call the script again.&lt;/p&gt; &lt;p&gt;In the beginning, this approach slows down the development, because everybody has to start writing cleaner code. At the end, though, this method pays off big time.&lt;/p&gt; &lt;h2 id=&quot;pre-flight-builds&quot;&gt;Pre-flight Builds&lt;/h2&gt; &lt;p&gt;Some CI servers offer pre-flight builds feature, which means testing branches before they get merged into &lt;code&gt;master&lt;/code&gt;. Travis, for example, has this feature and it is very helpful. When you make a new commit to a branch, Travis immediately tries to build it, and reports in GitHub pull request, if there are problems.&lt;/p&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=Ht0JI41kA4I&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/Ht0JI41kA4I/mqdefault.jpg&quot; alt=&quot;YouTube video #Ht0JI41kA4I&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Pre-flight Build Pitfalls; 10 May 2016.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;Pay attention, pre-flight builds don’t merge. They just check whether your individual branch is clean. After merge, it can easily break &lt;code&gt;master&lt;/code&gt;. And, of course, this mechanism doesn’t guarantee that no collaborators can commit directly to &lt;code&gt;master&lt;/code&gt;, breaking it accidentally. Pre-flight builds are a preventive measure, but do not solve the problem entirely.&lt;/p&gt; &lt;h2 id=&quot;rultorcom&quot;&gt;Rultor.com&lt;/h2&gt; &lt;p&gt;In order to start working as explained above, all you have to do is to revoke write permissions to &lt;code&gt;master&lt;/code&gt; branch (or &lt;code&gt;/trunk&lt;/code&gt;, in Subversion).&lt;/p&gt; &lt;p&gt;Unfortunately, this is &lt;a href=&quot;http://stackoverflow.com/questions/10381672&quot;&gt;not possible&lt;/a&gt; in GitHub. The only solution is to work through forks and pull requests only. Simply remove everybody from the list of “collaborators” and they will have to submit changes through pull requests.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/logo.svg&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;Then, start using &lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor.com&lt;/a&gt;, which will help you to test, merge and push every pull request. Basically, Rultor is the script we were talking about above. It is available as a free cloud service.&lt;/p&gt; &lt;p&gt;ps. A short version of this article is also published at &lt;a href=&quot;http://devops.com/blogs/continuous-integration-doesnt-work/&quot;&gt;devops.com&lt;/a&gt;&lt;/p&gt; " /> <meta name="keywords" content="next, path, output, content, previous, url, relative_path, id, collection, excerpt, draft, categories, layout, title, date, tags, description, book, keywords, slug, ext" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-07-21 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Master Branch Must Be Read-Only"/> <meta name="twitter:description" property="og:description" content="&lt;p&gt;Continuous integration is easy. Download Jenkins, install, create a job, click the button, and get a nice email saying that your build is broken (I assume your build is automated). Then, fix broken tests (I assume you have tests), and get a much better looking email saying that your build is clean.&lt;/p&gt; &lt;p&gt;Then, tweet about it, claiming that your team is using &lt;a href=&quot;/2014/10/08/continuous-integration-is-dead.html&quot;&gt;continuous integration&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Then, in a few weeks, start filtering out Jenkins alerts, into their own folder, so that they don’t bother you anymore. Anyway, your team doesn’t have the time or desire to fix all unit tests every time someone breaks them.&lt;/p&gt; &lt;p&gt;After all, we all know that unit testing is not for a team working with deadlines, right?&lt;/p&gt; &lt;p&gt;Wrong. Continuous integration can and must work.&lt;/p&gt; &lt;!--more--&gt; &lt;h2 id=&quot;what-is-continuous-integration&quot;&gt;What is Continuous Integration?&lt;/h2&gt; &lt;p&gt;Nowadays, software development is done in teams. We develop in feature branches and isolate changes while they are in development. Then, we merge branches into &lt;code&gt;master&lt;/code&gt;. After every merge, we test the entire product, executing all available unit and integration tests. This is called &lt;a href=&quot;https://en.wikipedia.org/wiki/Continuous_integration&quot;&gt;continuous integration&lt;/a&gt; (aka “CI”).&lt;/p&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=2a2nWELIk-Y&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/2a2nWELIk-Y/mqdefault.jpg&quot; alt=&quot;YouTube video #2a2nWELIk-Y&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Yegor Bugayenko | Kyiv DevOps, September, 2015; 6 October 2015.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;Sometimes, some tests fail. When this happens, we say that our “build is broken.” Such a failure is a positive side effect of quality control because it raises a red flag immediately after an error gets into &lt;code&gt;master&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;It is a well-known practice, when fixing that error becomes a top priority for its author and the entire team. The error should be fixed right after a red flag is raised by the &lt;a href=&quot;/2014/10/08/continuous-integration-is-dead.html&quot;&gt;continuous integration&lt;/a&gt; server.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://amzn.to/2bQVmlb&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/07/continuous-delivery-book.png&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://amzn.to/2bQVmlb&quot;&gt;Continuous Delivery by Jez Humble et. al.&lt;/a&gt; explains this approach perfectly in Chapter 7, pages 169–186.&lt;/p&gt; &lt;p&gt;There are a few good tools on the market, which automate DevOps procedures. Some of them are open source, you can download and install them on your own servers. For example: &lt;a href=&quot;http://jenkins-ci.org/&quot;&gt;Jenkins&lt;/a&gt;, &lt;a href=&quot;http://www.thoughtworks.com/products/go-continuous-delivery&quot;&gt;Go&lt;/a&gt;, and &lt;a href=&quot;http://cruisecontrol.sourceforge.net/&quot;&gt;CruiseControl&lt;/a&gt;. Some of them are available as a service in cloud, such as: &lt;a href=&quot;http://www.travis-ci.org&quot;&gt;Travis&lt;/a&gt;, &lt;a href=&quot;http://www.shippable.com&quot;&gt;Shippable&lt;/a&gt;, &lt;a href=&quot;http://wercker.com/&quot;&gt;Wercker&lt;/a&gt;, and &lt;a href=&quot;/2014/10/05/ten-hosted-continuous-integration-services.html&quot;&gt;many others&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;why-continuous-integration-doesnt-work&quot;&gt;Why Continuous Integration Doesn’t Work?&lt;/h2&gt; &lt;p&gt;CI is great, but the bigger the team (and the code base), the more often builds get broken. And, the longer it takes to fix them. I’ve seen many examples where a hard working team starts to ignore red flags, raised by Jenkins, after a few weeks or trying to keep up.&lt;/p&gt; &lt;aside class=&quot;quote&quot;&gt;Product owners do not understand the importance of a &quot;clean build&quot; and devs can't buy time for fixing unit tests&lt;/aside&gt; &lt;p&gt;The team simply becomes incapable of fixing all errors in time. Mostly because the business has other priorities. Product owners do not understand the importance of a “clean build” and technical leaders can’t buy time for fixing unit tests. Moreover, the code that broke them was already in &lt;code&gt;master&lt;/code&gt; and, in most cases, has been already deployed to production and delivered to end-users. What’s the urgency of fixing some tests if business value was already delivered?&lt;/p&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=gL4XwP-EBOg&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/gL4XwP-EBOg/mqdefault.jpg&quot; alt=&quot;YouTube video #gL4XwP-EBOg&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Continuous Integration May Have Negative Effects; 20 April 2016.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;In the end, most development teams don’t take continuous integration alerts seriously. Jenkins or Travis are just fancy tools for them that play no role in the entire development and delivery pipeline. No matter what continuous integration server says, we still deliver new features to our end-users. We’ll fix our build later. And &lt;a href=&quot;/2014/10/08/continuous-integration-is-dead.html&quot;&gt;it’s only logical&lt;/a&gt;.&lt;/p&gt; &lt;h2 id=&quot;what-is-a-solution&quot;&gt;What Is a Solution?&lt;/h2&gt; &lt;p&gt;&lt;a href=&quot;/pdf/2014/guard-article.pdf&quot; class=&quot;em2&quot; title=&quot;Prevent Conflicts in Distributed Agile PHP Projects&quot;&gt;&lt;i class=&quot;icon icon-pdf&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;Four years ago, in 2010, I published an article in &lt;a href=&quot;http://www.phparch.com/magazine/2010-2/august/&quot;&gt;php|Architect&lt;/a&gt; called “Prevent Conflicts in Distributed Agile PHP Projects.” In the article, a solution was proposed (full article in &lt;a href=&quot;/pdf/2014/guard-article.pdf&quot;&gt;PDF&lt;/a&gt;) for Subversion and PHP.&lt;/p&gt; &lt;p&gt;Since that time, I used experimentally that approach in multiple &lt;a href=&quot;/2015/12/22/why-dont-you-contribute-to-open-source.html&quot;&gt;open source&lt;/a&gt; projects and a few commercial ones with PHP, Java, Ruby and JavaScript, Git and Subversion. In all cases, my experience was only positive, and that’s why &lt;a href=&quot;http://www.rultor.com&quot;&gt;rultor.com&lt;/a&gt; was born (later about that though).&lt;/p&gt; &lt;p&gt;So, the solution is simple—prohibit anyone from merging anything into &lt;code&gt;master&lt;/code&gt; and create a script that anyone can call. The script will merge, test, and commit. The script will not make any exceptions. If any branch is breaking at even one unit test, the entire branch will be rejected.&lt;/p&gt; &lt;p&gt;In other words, we should raise that red flag &lt;strong&gt;before&lt;/strong&gt; the code gets into &lt;code&gt;master&lt;/code&gt;. We should put the blame for broken tests on the shoulders of its author.&lt;/p&gt; &lt;p&gt;Say, I’m developing a feature in my own branch. I finished the development and broke a few tests, accidentally. It happens, we all make mistakes. I can’t merge my changes into &lt;code&gt;master&lt;/code&gt;. Git simply rejects my &lt;code&gt;push&lt;/code&gt;, because I don’t have the appropriate permissions. All I can do is call a magic script, asking it to merge my branch. The script will try to merge, but before pushing into &lt;code&gt;master&lt;/code&gt;, it will run all tests. And if any of them break, my branch will be rejected. My changes won’t be merged. Now it’s my responsibility—to fix them and call the script again.&lt;/p&gt; &lt;p&gt;In the beginning, this approach slows down the development, because everybody has to start writing cleaner code. At the end, though, this method pays off big time.&lt;/p&gt; &lt;h2 id=&quot;pre-flight-builds&quot;&gt;Pre-flight Builds&lt;/h2&gt; &lt;p&gt;Some CI servers offer pre-flight builds feature, which means testing branches before they get merged into &lt;code&gt;master&lt;/code&gt;. Travis, for example, has this feature and it is very helpful. When you make a new commit to a branch, Travis immediately tries to build it, and reports in GitHub pull request, if there are problems.&lt;/p&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=Ht0JI41kA4I&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/Ht0JI41kA4I/mqdefault.jpg&quot; alt=&quot;YouTube video #Ht0JI41kA4I&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Pre-flight Build Pitfalls; 10 May 2016.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;Pay attention, pre-flight builds don’t merge. They just check whether your individual branch is clean. After merge, it can easily break &lt;code&gt;master&lt;/code&gt;. And, of course, this mechanism doesn’t guarantee that no collaborators can commit directly to &lt;code&gt;master&lt;/code&gt;, breaking it accidentally. Pre-flight builds are a preventive measure, but do not solve the problem entirely.&lt;/p&gt; &lt;h2 id=&quot;rultorcom&quot;&gt;Rultor.com&lt;/h2&gt; &lt;p&gt;In order to start working as explained above, all you have to do is to revoke write permissions to &lt;code&gt;master&lt;/code&gt; branch (or &lt;code&gt;/trunk&lt;/code&gt;, in Subversion).&lt;/p&gt; &lt;p&gt;Unfortunately, this is &lt;a href=&quot;http://stackoverflow.com/questions/10381672&quot;&gt;not possible&lt;/a&gt; in GitHub. The only solution is to work through forks and pull requests only. Simply remove everybody from the list of “collaborators” and they will have to submit changes through pull requests.&lt;/p&gt; &lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.rultor.com&quot;&gt;&lt;img src=&quot;http://doc.rultor.com/images/logo.svg&quot; style=&quot;width:100px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;Then, start using &lt;a href=&quot;http://www.rultor.com&quot;&gt;Rultor.com&lt;/a&gt;, which will help you to test, merge and push every pull request. Basically, Rultor is the script we were talking about above. It is available as a free cloud service.&lt;/p&gt; &lt;p&gt;ps. A short version of this article is also published at &lt;a href=&quot;http://devops.com/blogs/continuous-integration-doesnt-work/&quot;&gt;devops.com&lt;/a&gt;&lt;/p&gt; "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/07/21/read-only-master-branch.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?23bb3130b4f"/> <link rel="apple-touch-icon" href="/favicon.ico?23bb3130b4f"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?23bb3130b4f"/> <link rel="stylesheet" href="/css/icons.css?23bb3130b4f"/> <link rel="canonical" href="https://www.yegor256.com/2014/07/21/read-only-master-branch.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/07/21/read-only-master-branch.amp.html" /> <title>Master Branch Must Be Read-Only </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /2014/07/21/read-only-master-branch.html><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /2014/07/21/read-only-master-branch.html><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /2014/07/21/read-only-master-branch.html><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /2014/07/21/read-only-master-branch.html><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /2014/07/21/read-only-master-branch.html><a href="/books.html" title="The books I wrote">Books</a></li> <li /2014/07/21/read-only-master-branch.html><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /2014/07/21/read-only-master-branch.html><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /2014/07/21/read-only-master-branch.html class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /2014/07/21/read-only-master-branch.html><a href="/award.html" title="Software quality award">Award</a></li> <li /2014/07/21/read-only-master-branch.html><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /2014/07/21/read-only-master-branch.html><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /2014/07/21/read-only-master-branch.html><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/07/21/read-only-master-branch.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2014/07/21/read-only-master-branch.html</code></p><h1 itemprop="name headline mainEntityOfPage">Master Branch Must Be Read-Only</h1><aside class='book'><a href='https://amzn.to/2u9BbqF'><img src='/images/books/code-ahead/cover.png' class='book-cover' alt='book cover'/></a>Read more about this subject in <a href='https://amzn.to/2u9BbqF'>Section&nbsp;3</a><br/> of my book<a href='https://amzn.to/2u9BbqF'><img src='/images/books/amazon-buy-button.png' class='amazon-button' alt='Click to buy'/></a></aside><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-07-21T00:00:00+00:00"> 21 July 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2014/07/21/read-only-master-branch.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>Continuous integration is easy. Download Jenkins, install, create a job, click the button, and get a nice email saying that your build is broken (I assume your build is automated). Then, fix broken tests (I assume you have tests), and get a much better looking email saying that your build is clean.</p><p>Then, tweet about it, claiming that your team is using <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a>.</p><p>Then, in a few weeks, start filtering out Jenkins alerts, into their own folder, so that they don’t bother you anymore. Anyway, your team doesn’t have the time or desire to fix all unit tests every time someone breaks them.</p><p>After all, we all know that unit testing is not for a team working with deadlines, right?</p><p>Wrong. Continuous integration can and must work.</p><h2 id="what-is-continuous-integration">What is Continuous Integration?</h2><p>Nowadays, software development is done in teams. We develop in feature branches and isolate changes while they are in development. Then, we merge branches into <code>master</code>. After every merge, we test the entire product, executing all available unit and integration tests. This is called <a href="https://en.wikipedia.org/wiki/Continuous_integration">continuous integration</a> (aka “CI”).</p><aside class="youtube"> <a href="https://www.youtube.com/watch?v=2a2nWELIk-Y"><div class="box"> <img src="https://i.ytimg.com/vi/2a2nWELIk-Y/mqdefault.jpg" alt="YouTube video #2a2nWELIk-Y" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Yegor Bugayenko | Kyiv DevOps, September, 2015; 6 October 2015.</div></aside><p>Sometimes, some tests fail. When this happens, we say that our “build is broken.” Such a failure is a positive side effect of quality control because it raises a red flag immediately after an error gets into <code>master</code>.</p><p>It is a well-known practice, when fixing that error becomes a top priority for its author and the entire team. The error should be fixed right after a red flag is raised by the <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> server.</p><figure class="badge"><a href="http://amzn.to/2bQVmlb"><img src="https://www.yegor256.com/images/2014/07/continuous-delivery-book.png" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://amzn.to/2bQVmlb">Continuous Delivery by Jez Humble et. al.</a> explains this approach perfectly in Chapter 7, pages 169–186.</p><p>There are a few good tools on the market, which automate DevOps procedures. Some of them are open source, you can download and install them on your own servers. For example: <a href="http://jenkins-ci.org/">Jenkins</a>, <a href="http://www.thoughtworks.com/products/go-continuous-delivery">Go</a>, and <a href="http://cruisecontrol.sourceforge.net/">CruiseControl</a>. Some of them are available as a service in cloud, such as: <a href="http://www.travis-ci.org">Travis</a>, <a href="http://www.shippable.com">Shippable</a>, <a href="http://wercker.com/">Wercker</a>, and <a href="/2014/10/05/ten-hosted-continuous-integration-services.html">many others</a>.</p><h2 id="why-continuous-integration-doesnt-work">Why Continuous Integration Doesn’t Work?</h2><p>CI is great, but the bigger the team (and the code base), the more often builds get broken. And, the longer it takes to fix them. I’ve seen many examples where a hard working team starts to ignore red flags, raised by Jenkins, after a few weeks or trying to keep up.</p><aside class="quote">Product owners do not understand the importance of a "clean build" and devs can't buy time for fixing unit tests</aside><p>The team simply becomes incapable of fixing all errors in time. Mostly because the business has other priorities. Product owners do not understand the importance of a “clean build” and technical leaders can’t buy time for fixing unit tests. Moreover, the code that broke them was already in <code>master</code> and, in most cases, has been already deployed to production and delivered to end-users. What’s the urgency of fixing some tests if business value was already delivered?</p><aside class="youtube"> <a href="https://www.youtube.com/watch?v=gL4XwP-EBOg"><div class="box"> <img src="https://i.ytimg.com/vi/gL4XwP-EBOg/mqdefault.jpg" alt="YouTube video #gL4XwP-EBOg" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Continuous Integration May Have Negative Effects; 20 April 2016.</div></aside><p>In the end, most development teams don’t take continuous integration alerts seriously. Jenkins or Travis are just fancy tools for them that play no role in the entire development and delivery pipeline. No matter what continuous integration server says, we still deliver new features to our end-users. We’ll fix our build later. And <a href="/2014/10/08/continuous-integration-is-dead.html">it’s only logical</a>.</p><h2 id="what-is-a-solution">What Is a Solution?</h2><p><a href="/pdf/2014/guard-article.pdf" class="em2" title="Prevent Conflicts in Distributed Agile PHP Projects"><i class="icon icon-pdf"></i></a></p><p>Four years ago, in 2010, I published an article in <a href="http://www.phparch.com/magazine/2010-2/august/">php|Architect</a> called “Prevent Conflicts in Distributed Agile PHP Projects.” In the article, a solution was proposed (full article in <a href="/pdf/2014/guard-article.pdf">PDF</a>) for Subversion and PHP.</p><p>Since that time, I used experimentally that approach in multiple <a href="/2015/12/22/why-dont-you-contribute-to-open-source.html">open source</a> projects and a few commercial ones with PHP, Java, Ruby and JavaScript, Git and Subversion. In all cases, my experience was only positive, and that’s why <a href="http://www.rultor.com">rultor.com</a> was born (later about that though).</p><p>So, the solution is simple—prohibit anyone from merging anything into <code>master</code> and create a script that anyone can call. The script will merge, test, and commit. The script will not make any exceptions. If any branch is breaking at even one unit test, the entire branch will be rejected.</p><p>In other words, we should raise that red flag <strong>before</strong> the code gets into <code>master</code>. We should put the blame for broken tests on the shoulders of its author.</p><p>Say, I’m developing a feature in my own branch. I finished the development and broke a few tests, accidentally. It happens, we all make mistakes. I can’t merge my changes into <code>master</code>. Git simply rejects my <code>push</code>, because I don’t have the appropriate permissions. All I can do is call a magic script, asking it to merge my branch. The script will try to merge, but before pushing into <code>master</code>, it will run all tests. And if any of them break, my branch will be rejected. My changes won’t be merged. Now it’s my responsibility—to fix them and call the script again.</p><p>In the beginning, this approach slows down the development, because everybody has to start writing cleaner code. At the end, though, this method pays off big time.</p><h2 id="pre-flight-builds">Pre-flight Builds</h2><p>Some CI servers offer pre-flight builds feature, which means testing branches before they get merged into <code>master</code>. Travis, for example, has this feature and it is very helpful. When you make a new commit to a branch, Travis immediately tries to build it, and reports in GitHub pull request, if there are problems.</p><aside class="youtube"> <a href="https://www.youtube.com/watch?v=Ht0JI41kA4I"><div class="box"> <img src="https://i.ytimg.com/vi/Ht0JI41kA4I/mqdefault.jpg" alt="YouTube video #Ht0JI41kA4I" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Pre-flight Build Pitfalls; 10 May 2016.</div></aside><p>Pay attention, pre-flight builds don’t merge. They just check whether your individual branch is clean. After merge, it can easily break <code>master</code>. And, of course, this mechanism doesn’t guarantee that no collaborators can commit directly to <code>master</code>, breaking it accidentally. Pre-flight builds are a preventive measure, but do not solve the problem entirely.</p><h2 id="rultorcom">Rultor.com</h2><p>In order to start working as explained above, all you have to do is to revoke write permissions to <code>master</code> branch (or <code>/trunk</code>, in Subversion).</p><p>Unfortunately, this is <a href="http://stackoverflow.com/questions/10381672">not possible</a> in GitHub. The only solution is to work through forks and pull requests only. Simply remove everybody from the list of “collaborators” and they will have to submit changes through pull requests.</p><figure class="badge"><a href="http://www.rultor.com"><img src="http://doc.rultor.com/images/logo.svg" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p>Then, start using <a href="http://www.rultor.com">Rultor.com</a>, which will help you to test, merge and push every pull request. Basically, Rultor is the script we were talking about above. It is available as a free cloud service.</p><p>ps. A short version of this article is also published at <a href="http://devops.com/blogs/continuous-integration-doesnt-work/">devops.com</a></p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/07/21/read-only-master-branch.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/07/21/read-only-master-branch.html&amp;text=Master+Branch+Must+Be+Read-Only" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/07/21/read-only-master-branch.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/07/21/read-only-master-branch.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/07/21/read-only-master-branch.html%3F2014-29&amp;title=Master+Branch+Must+Be+Read-Only" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/07/21/read-only-master-branch.html%3F2014-29&amp;t=Master+Branch+Must+Be+Read-Only" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>Continuous integration is easy. Download Jenkins, install, create a job, click the button, and get a nice email saying that your build is broken (I assume your build is automated). Then, fix broken tests (I assume you have tests), and get a much better looking email saying that your build is clean.</p><p>Then, tweet about it, claiming that your team is using <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a>.</p><p>Then, in a few weeks, start filtering out Jenkins alerts, into their own folder, so that they don’t bother you anymore. Anyway, your team doesn’t have the time or desire to fix all unit tests every time someone breaks them.</p><p>After all, we all know that unit testing is not for a team working with deadlines, right?</p><p>Wrong. Continuous integration can and must work.</p><h2 id="what-is-continuous-integration">What is Continuous Integration?</h2><p>Nowadays, software development is done in teams. We develop in feature branches and isolate changes while they are in development. Then, we merge branches into <code>master</code>. After every merge, we test the entire product, executing all available unit and integration tests. This is called <a href="https://en.wikipedia.org/wiki/Continuous_integration">continuous integration</a> (aka “CI”).</p><aside class="youtube"> <a href="https://www.youtube.com/watch?v=2a2nWELIk-Y"><div class="box"> <img src="https://i.ytimg.com/vi/2a2nWELIk-Y/mqdefault.jpg" alt="YouTube video #2a2nWELIk-Y" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Yegor Bugayenko | Kyiv DevOps, September, 2015; 6 October 2015.</div></aside><p>Sometimes, some tests fail. When this happens, we say that our “build is broken.” Such a failure is a positive side effect of quality control because it raises a red flag immediately after an error gets into <code>master</code>.</p><p>It is a well-known practice, when fixing that error becomes a top priority for its author and the entire team. The error should be fixed right after a red flag is raised by the <a href="/2014/10/08/continuous-integration-is-dead.html">continuous integration</a> server.</p><figure class="badge"><a href="http://amzn.to/2bQVmlb"><img src="https://www.yegor256.com/images/2014/07/continuous-delivery-book.png" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://amzn.to/2bQVmlb">Continuous Delivery by Jez Humble et. al.</a> explains this approach perfectly in Chapter 7, pages 169–186.</p><p>There are a few good tools on the market, which automate DevOps procedures. Some of them are open source, you can download and install them on your own servers. For example: <a href="http://jenkins-ci.org/">Jenkins</a>, <a href="http://www.thoughtworks.com/products/go-continuous-delivery">Go</a>, and <a href="http://cruisecontrol.sourceforge.net/">CruiseControl</a>. Some of them are available as a service in cloud, such as: <a href="http://www.travis-ci.org">Travis</a>, <a href="http://www.shippable.com">Shippable</a>, <a href="http://wercker.com/">Wercker</a>, and <a href="/2014/10/05/ten-hosted-continuous-integration-services.html">many others</a>.</p><h2 id="why-continuous-integration-doesnt-work">Why Continuous Integration Doesn’t Work?</h2><p>CI is great, but the bigger the team (and the code base), the more often builds get broken. And, the longer it takes to fix them. I’ve seen many examples where a hard working team starts to ignore red flags, raised by Jenkins, after a few weeks or trying to keep up.</p><aside class="quote">Product owners do not understand the importance of a "clean build" and devs can't buy time for fixing unit tests</aside><p>The team simply becomes incapable of fixing all errors in time. Mostly because the business has other priorities. Product owners do not understand the importance of a “clean build” and technical leaders can’t buy time for fixing unit tests. Moreover, the code that broke them was already in <code>master</code> and, in most cases, has been already deployed to production and delivered to end-users. What’s the urgency of fixing some tests if business value was already delivered?</p><aside class="youtube"> <a href="https://www.youtube.com/watch?v=gL4XwP-EBOg"><div class="box"> <img src="https://i.ytimg.com/vi/gL4XwP-EBOg/mqdefault.jpg" alt="YouTube video #gL4XwP-EBOg" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Continuous Integration May Have Negative Effects; 20 April 2016.</div></aside><p>In the end, most development teams don’t take continuous integration alerts seriously. Jenkins or Travis are just fancy tools for them that play no role in the entire development and delivery pipeline. No matter what continuous integration server says, we still deliver new features to our end-users. We’ll fix our build later. And <a href="/2014/10/08/continuous-integration-is-dead.html">it’s only logical</a>.</p><h2 id="what-is-a-solution">What Is a Solution?</h2><p><a href="/pdf/2014/guard-article.pdf" class="em2" title="Prevent Conflicts in Distributed Agile PHP Projects"><i class="icon icon-pdf"></i></a></p><p>Four years ago, in 2010, I published an article in <a href="http://www.phparch.com/magazine/2010-2/august/">php|Architect</a> called “Prevent Conflicts in Distributed Agile PHP Projects.” In the article, a solution was proposed (full article in <a href="/pdf/2014/guard-article.pdf">PDF</a>) for Subversion and PHP.</p><p>Since that time, I used experimentally that approach in multiple <a href="/2015/12/22/why-dont-you-contribute-to-open-source.html">open source</a> projects and a few commercial ones with PHP, Java, Ruby and JavaScript, Git and Subversion. In all cases, my experience was only positive, and that’s why <a href="http://www.rultor.com">rultor.com</a> was born (later about that though).</p><p>So, the solution is simple—prohibit anyone from merging anything into <code>master</code> and create a script that anyone can call. The script will merge, test, and commit. The script will not make any exceptions. If any branch is breaking at even one unit test, the entire branch will be rejected.</p><p>In other words, we should raise that red flag <strong>before</strong> the code gets into <code>master</code>. We should put the blame for broken tests on the shoulders of its author.</p><p>Say, I’m developing a feature in my own branch. I finished the development and broke a few tests, accidentally. It happens, we all make mistakes. I can’t merge my changes into <code>master</code>. Git simply rejects my <code>push</code>, because I don’t have the appropriate permissions. All I can do is call a magic script, asking it to merge my branch. The script will try to merge, but before pushing into <code>master</code>, it will run all tests. And if any of them break, my branch will be rejected. My changes won’t be merged. Now it’s my responsibility—to fix them and call the script again.</p><p>In the beginning, this approach slows down the development, because everybody has to start writing cleaner code. At the end, though, this method pays off big time.</p><h2 id="pre-flight-builds">Pre-flight Builds</h2><p>Some CI servers offer pre-flight builds feature, which means testing branches before they get merged into <code>master</code>. Travis, for example, has this feature and it is very helpful. When you make a new commit to a branch, Travis immediately tries to build it, and reports in GitHub pull request, if there are problems.</p><aside class="youtube"> <a href="https://www.youtube.com/watch?v=Ht0JI41kA4I"><div class="box"> <img src="https://i.ytimg.com/vi/Ht0JI41kA4I/mqdefault.jpg" alt="YouTube video #Ht0JI41kA4I" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Pre-flight Build Pitfalls; 10 May 2016.</div></aside><p>Pay attention, pre-flight builds don’t merge. They just check whether your individual branch is clean. After merge, it can easily break <code>master</code>. And, of course, this mechanism doesn’t guarantee that no collaborators can commit directly to <code>master</code>, breaking it accidentally. Pre-flight builds are a preventive measure, but do not solve the problem entirely.</p><h2 id="rultorcom">Rultor.com</h2><p>In order to start working as explained above, all you have to do is to revoke write permissions to <code>master</code> branch (or <code>/trunk</code>, in Subversion).</p><p>Unfortunately, this is <a href="http://stackoverflow.com/questions/10381672">not possible</a> in GitHub. The only solution is to work through forks and pull requests only. Simply remove everybody from the list of “collaborators” and they will have to submit changes through pull requests.</p><figure class="badge"><a href="http://www.rultor.com"><img src="http://doc.rultor.com/images/logo.svg" style="width:100px;max-width:100%;" alt="badge" /></a></figure><p>Then, start using <a href="http://www.rultor.com">Rultor.com</a>, which will help you to test, merge and push every pull request. Basically, Rultor is the script we were talking about above. It is available as a free cloud service.</p><p>ps. A short version of this article is also published at <a href="http://devops.com/blogs/continuous-integration-doesnt-work/">devops.com</a></p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?23bb3130b4f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html> </article></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?23bb3130b4f"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html>
