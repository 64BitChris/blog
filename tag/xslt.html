<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="{&quot;layout&quot;=&gt;&quot;tag-index&quot;, &quot;posts&quot;=&gt;[#&lt;Jekyll::Document _posts/2015/jun/2015-06-25-xml-data-xsl-views-takes-framework.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2015/feb/2015-02-02-xsl-transformations-in-java.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/sep/2014-09-09-restful-web-sites.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/jun/2014-06-25-xml-and-xslt-in-browser.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/apr/2014-04-09-xembly-intro.md collection=posts&gt;], &quot;tag&quot;=&gt;&quot;xslt&quot;, &quot;content&quot;=&gt;&quot;&quot;, &quot;dir&quot;=&gt;&quot;/tag/&quot;, &quot;name&quot;=&gt;&quot;xslt.html&quot;, &quot;path&quot;=&gt;&quot;tag/xslt.html&quot;, &quot;url&quot;=&gt;&quot;/tag/xslt&quot;, &quot;title&quot;=&gt;&quot;xslt&quot;, &quot;description&quot;=&gt;&quot;xslt: more about xslt in this collection of recently published articles... the list is updated every few weeks.&quot;}" /> <meta name="keywords" content="{&quot;layout&quot;=&gt;&quot;tag-index&quot;, &quot;posts&quot;=&gt;[#&lt;Jekyll::Document _posts/2015/jun/2015-06-25-xml-data-xsl-views-takes-framework.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2015/feb/2015-02-02-xsl-transformations-in-java.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/sep/2014-09-09-restful-web-sites.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/jun/2014-06-25-xml-and-xslt-in-browser.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/apr/2014-04-09-xembly-intro.md collection=posts&gt;], &quot;tag&quot;=&gt;&quot;xslt&quot;, &quot;content&quot;=&gt;&quot;&quot;, &quot;dir&quot;=&gt;&quot;/tag/&quot;, &quot;name&quot;=&gt;&quot;xslt.html&quot;, &quot;path&quot;=&gt;&quot;tag/xslt.html&quot;, &quot;url&quot;=&gt;&quot;/tag/xslt&quot;, &quot;title&quot;=&gt;&quot;xslt&quot;, &quot;description&quot;=&gt;&quot;xslt: more about xslt in this collection of recently published articles... the list is updated every few weeks.&quot;}" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="xslt"/> <meta name="twitter:description" property="og:description" content="{&quot;layout&quot;=&gt;&quot;tag-index&quot;, &quot;posts&quot;=&gt;[#&lt;Jekyll::Document _posts/2015/jun/2015-06-25-xml-data-xsl-views-takes-framework.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2015/feb/2015-02-02-xsl-transformations-in-java.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/sep/2014-09-09-restful-web-sites.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/jun/2014-06-25-xml-and-xslt-in-browser.md collection=posts&gt;, #&lt;Jekyll::Document _posts/2014/apr/2014-04-09-xembly-intro.md collection=posts&gt;], &quot;tag&quot;=&gt;&quot;xslt&quot;, &quot;content&quot;=&gt;&quot;&quot;, &quot;dir&quot;=&gt;&quot;/tag/&quot;, &quot;name&quot;=&gt;&quot;xslt.html&quot;, &quot;path&quot;=&gt;&quot;tag/xslt.html&quot;, &quot;url&quot;=&gt;&quot;/tag/xslt&quot;, &quot;title&quot;=&gt;&quot;xslt&quot;, &quot;description&quot;=&gt;&quot;xslt: more about xslt in this collection of recently published articles... the list is updated every few weeks.&quot;}"/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/tag/xslt"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?c998b88f617"/> <link rel="apple-touch-icon" href="/favicon.ico?c998b88f617"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?c998b88f617"/> <link rel="stylesheet" href="/css/icons.css?c998b88f617"/> <link rel="canonical" href="https://www.yegor256.com/tag/xslt" /> <link rel="amphtml" href="https://www.yegor256.com/tag/xslt" /> <title>xslt </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /tag/xslt><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /tag/xslt><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /tag/xslt><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /tag/xslt><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /tag/xslt><a href="/books.html" title="The books I wrote">Books</a></li> <li /tag/xslt><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /tag/xslt><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /tag/xslt class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /tag/xslt><a href="/award.html" title="Software quality award">Award</a></li> <li /tag/xslt><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /tag/xslt><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /tag/xslt><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header itemprop="name"><h1>5 posts about xslt</h1></header> <article itemprop="articleBody"> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="&lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.takes.org&quot;&gt;&lt;img src=&quot;http://www.takes.org/logo.png&quot; style=&quot;width:96px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;A year ago, I &lt;a href=&quot;/2014/06/25/xml-and-xslt-in-browser.html&quot;&gt;tried to explain&lt;/a&gt; how effectively data and its presentation can be separated in a web application with the help of XML and XSL. In a few words, instead of using &lt;a href=&quot;https://en.wikipedia.org/wiki/Comparison_of_web_template_engines&quot;&gt;templating&lt;/a&gt; (like JSP, Velocity, FreeMarker, etc.) and injection of data into HTML, we compose them in the form of an XML document and then let the XSL stylesheet transform them into HTML. Here is a brief example of how all this can be used together with the &lt;a href=&quot;http://www.takes.org&quot;&gt;Takes framework&lt;/a&gt;.&lt;/p&gt; &lt;!--more--&gt; &lt;p&gt;First, let’s agree that templating is a bad idea in the first place. Yes, I mean it. The entire design of JSP is wrong, with all due respect to its creators. Here is how it works: Let’s say my website has to fetch the current exchange rate of the euro from a database and show it on the home page. Here’s how my &lt;code&gt;index.jsp&lt;/code&gt; would look:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-jsp&quot; data-lang=&quot;jsp&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt;EUR/USD: &lt;span class=&quot;k&quot;&gt;&amp;lt;%=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rates&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;%&amp;gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;In order to create HTML, the JSP engine will have to call &lt;code&gt;get()&lt;/code&gt; on object &lt;code&gt;rates&lt;/code&gt; and render what’s returned through &lt;code&gt;toString()&lt;/code&gt;. It’s a terrible design for a few reasons. First, the view is tightly coupled with the model. Second, the flexibility of rendering is very limited. Third, the result of rendering is not reusable, and views are not stackable. There are many other reasons … more about them in one of the next articles.&lt;/p&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=nheD2LNYrpk&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/nheD2LNYrpk/mqdefault.jpg&quot; alt=&quot;YouTube video #nheD2LNYrpk&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Takes, Java Web Framework, Intro (webinar #12); 2 March 2016.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;Let’s see how this should be done right. First, we let our model generate the output in XML format, for example:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?xml version=&amp;quot;1.1&amp;quot;?&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;page&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;rate&amp;gt;&lt;/span&gt;1.1324&lt;span class=&quot;nt&quot;&gt;&amp;lt;/rate&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/page&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;This is what the model will produce, having no knowledge of the view. Then, we create the view as an XSL stylesheet, which will transform XML into HTML:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:stylesheet&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;version=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;1.0&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns:xsl=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;http://www.w3.org/1999/XSL/Transform&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;http://www.w3.org/1999/xhtml&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:template&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;match=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;page&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:text&amp;gt;&lt;/span&gt;EUR/USD: &lt;span class=&quot;nt&quot;&gt;&amp;lt;/xsl:text&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:value-of&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;select=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;rate&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/xsl:template&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/xsl:stylesheet&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;As you see, the view doesn’t know anything about the model in terms of implementation. All it knows is the format of XML data output produced by the model. Here is how you design it in the &lt;a href=&quot;http://www.takes.org&quot;&gt;Takes framework&lt;/a&gt;. Let’s start with a simple example:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.takes.http.Exit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.takes.http.FtCli&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Entry&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FtCli&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TkApp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Exit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;NEVER&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;It’s a simple web application that starts a web server and never ends (it waits for connections in daemon mode). To make it work, we should create a simple “take” named &lt;code&gt;TkApp&lt;/code&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.takes.Take&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.takes.tk.TkWrap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TkApp&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TkWrap&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;act&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RsWithType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RsText&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;lt;page&amp;gt;&amp;lt;rate&amp;gt;1.1324&amp;lt;/rate&amp;gt;&amp;lt;/page&amp;gt;&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;application/xml&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;This “take” always returns the same XML response, but it doesn’t do any XSL transformation yet. We need to add the &lt;code&gt;RsXSLT&lt;/code&gt; class to the picture:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;act&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RsXSLT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RsWithType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RsText&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;lt;?xml-stylesheet type=&amp;#39;text/xsl&amp;#39; href=&amp;#39;/xsl/index.xsl&amp;#39;?&amp;gt;&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;lt;page&amp;gt;&amp;lt;rate&amp;gt;1.1324&amp;lt;/rate&amp;gt;&amp;lt;/page&amp;gt;&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;application/xml&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Excuse me for using string concatenation, which is a &lt;a href=&quot;/2014/06/19/avoid-string-concatenation.html&quot;&gt;bad practice&lt;/a&gt;; it’s merely for the simplicity of the example.&lt;/p&gt; &lt;p&gt;As you see, I also added an XML stylesheet processing instruction to the XML. &lt;code&gt;RsXSLT&lt;/code&gt; will understand it and try to find the &lt;code&gt;/xsl/index.xsl&lt;/code&gt; resource on classpath. You see the content of that file above.&lt;/p&gt; &lt;p&gt;That’s it.&lt;/p&gt; &lt;p&gt;Well, not really. Building XML from strings is not a good idea. We have a better instrument in the Takes framework. We use &lt;a href=&quot;http://www.xembly.org&quot;&gt;Xembly&lt;/a&gt;, which is a simple imperative language for building and modifying XML documents. More about it here: &lt;a href=&quot;/2014/04/09/xembly-intro.html&quot;&gt;Xembly, an Assembly for XML&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Here is how our &lt;code&gt;TkApp&lt;/code&gt; would look:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;act&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RsXSLT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RsWithType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RsXembly&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XeChain&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XeStylesheet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;/xsl/index.xsl&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XeAppend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;page&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XeDirectives&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Directives&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;rate&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;1.1324&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;application/xml&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;The most important class here is &lt;a href=&quot;http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/xe/RsXembly.html&quot;&gt;&lt;code&gt;RsXembly&lt;/code&gt;&lt;/a&gt;. The idea is to let model classes expose their data through Xembly “directives,” which will later be applied to a DOM structure by &lt;code&gt;RsXembly&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;&lt;code&gt;XeChain&lt;/code&gt;, &lt;code&gt;XeStylesheet&lt;/code&gt;, &lt;code&gt;XeAppend&lt;/code&gt;, and &lt;code&gt;XeDirectives&lt;/code&gt; expose directives but with different meanings (they are all instances of an &lt;code&gt;XeSource&lt;/code&gt; interface). Their names describe their intentions rather well. &lt;a href=&quot;http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/xe/XeChain.html&quot;&gt;&lt;code&gt;XeChain&lt;/code&gt;&lt;/a&gt; just chains everything that is delivered by encapsulated “directive sources.” &lt;a href=&quot;http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/xe/XeStylesheet.html&quot;&gt;&lt;code&gt;XeStylesheet&lt;/code&gt;&lt;/a&gt; returns directives that create a single XML processing instruction. &lt;a href=&quot;http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/xe/XeAppend.html&quot;&gt;&lt;code&gt;XeAppend&lt;/code&gt;&lt;/a&gt; creates an XML node and adds encapsulated directives to it. &lt;a href=&quot;http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/xe/XeDirectives.html&quot;&gt;&lt;code&gt;XeDirectives&lt;/code&gt;&lt;/a&gt; simply returns what’s inside.&lt;/p&gt; &lt;p&gt;In the end, this code will create exactly the same XML document as I created above with string concatenation.&lt;/p&gt; &lt;p&gt;The beauty of this approach is in the perfect &lt;a href=&quot;/2018/09/18/fear-of-coupling.html&quot;&gt;decoupling&lt;/a&gt; of data generation and XML building and translation between XML and HTML. It is perfectly reusable and “stackable.” We can transform the data in XML format multiple times, applying different XSL stylesheets to each one. We can even transform them into &lt;a href=&quot;/2015/11/16/json-vs-xml.html&quot;&gt;JSON&lt;/a&gt; without changing a line of code in model classes.&lt;/p&gt; &lt;p&gt;Moreover, we can format them differently, using rather powerful XSLT 2.0 instruments. XSLT by itself is a powerful and purely functional language that enables any possible data manipulations. No templating engine is even close to it.&lt;/p&gt; &lt;p&gt;Take a look at how it works in the &lt;a href=&quot;https://github.com/yegor256/rultor/blob/1.55/src/main/java/com/rultor/web/RsPage.java&quot;&gt;&lt;code&gt;RsPage&lt;/code&gt;&lt;/a&gt; class in Rultor, for example.&lt;/p&gt; " /> <meta name="keywords" content="next, path, output, content, previous, url, relative_path, id, collection, excerpt, draft, categories, layout, title, date, tags, place, description, keywords, slug, ext" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-06-25 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="XML Data and XSL Views in Takes Framework"/> <meta name="twitter:description" property="og:description" content="&lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.takes.org&quot;&gt;&lt;img src=&quot;http://www.takes.org/logo.png&quot; style=&quot;width:96px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;A year ago, I &lt;a href=&quot;/2014/06/25/xml-and-xslt-in-browser.html&quot;&gt;tried to explain&lt;/a&gt; how effectively data and its presentation can be separated in a web application with the help of XML and XSL. In a few words, instead of using &lt;a href=&quot;https://en.wikipedia.org/wiki/Comparison_of_web_template_engines&quot;&gt;templating&lt;/a&gt; (like JSP, Velocity, FreeMarker, etc.) and injection of data into HTML, we compose them in the form of an XML document and then let the XSL stylesheet transform them into HTML. Here is a brief example of how all this can be used together with the &lt;a href=&quot;http://www.takes.org&quot;&gt;Takes framework&lt;/a&gt;.&lt;/p&gt; &lt;!--more--&gt; &lt;p&gt;First, let’s agree that templating is a bad idea in the first place. Yes, I mean it. The entire design of JSP is wrong, with all due respect to its creators. Here is how it works: Let’s say my website has to fetch the current exchange rate of the euro from a database and show it on the home page. Here’s how my &lt;code&gt;index.jsp&lt;/code&gt; would look:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-jsp&quot; data-lang=&quot;jsp&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt;EUR/USD: &lt;span class=&quot;k&quot;&gt;&amp;lt;%=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rates&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;%&amp;gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;In order to create HTML, the JSP engine will have to call &lt;code&gt;get()&lt;/code&gt; on object &lt;code&gt;rates&lt;/code&gt; and render what’s returned through &lt;code&gt;toString()&lt;/code&gt;. It’s a terrible design for a few reasons. First, the view is tightly coupled with the model. Second, the flexibility of rendering is very limited. Third, the result of rendering is not reusable, and views are not stackable. There are many other reasons … more about them in one of the next articles.&lt;/p&gt; &lt;aside class=&quot;youtube&quot;&gt; &lt;a href=&quot;https://www.youtube.com/watch?v=nheD2LNYrpk&quot;&gt;&lt;div class=&quot;box&quot;&gt; &lt;img src=&quot;https://i.ytimg.com/vi/nheD2LNYrpk/mqdefault.jpg&quot; alt=&quot;YouTube video #nheD2LNYrpk&quot; /&gt; &lt;div class=&quot;play&quot;&gt;&lt;i class=&quot;icon icon-play&quot;&gt;&lt;/i&gt;&lt;/div&gt; &lt;/div&gt;&lt;/a&gt; &lt;div&gt;Takes, Java Web Framework, Intro (webinar #12); 2 March 2016.&lt;/div&gt;&lt;/aside&gt; &lt;p&gt;Let’s see how this should be done right. First, we let our model generate the output in XML format, for example:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?xml version=&amp;quot;1.1&amp;quot;?&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;page&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;rate&amp;gt;&lt;/span&gt;1.1324&lt;span class=&quot;nt&quot;&gt;&amp;lt;/rate&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/page&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;This is what the model will produce, having no knowledge of the view. Then, we create the view as an XSL stylesheet, which will transform XML into HTML:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:stylesheet&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;version=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;1.0&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns:xsl=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;http://www.w3.org/1999/XSL/Transform&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;http://www.w3.org/1999/xhtml&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:template&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;match=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;page&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:text&amp;gt;&lt;/span&gt;EUR/USD: &lt;span class=&quot;nt&quot;&gt;&amp;lt;/xsl:text&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:value-of&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;select=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;rate&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/xsl:template&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/xsl:stylesheet&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;As you see, the view doesn’t know anything about the model in terms of implementation. All it knows is the format of XML data output produced by the model. Here is how you design it in the &lt;a href=&quot;http://www.takes.org&quot;&gt;Takes framework&lt;/a&gt;. Let’s start with a simple example:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.takes.http.Exit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.takes.http.FtCli&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Entry&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FtCli&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TkApp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Exit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;NEVER&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;It’s a simple web application that starts a web server and never ends (it waits for connections in daemon mode). To make it work, we should create a simple “take” named &lt;code&gt;TkApp&lt;/code&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.takes.Take&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.takes.tk.TkWrap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TkApp&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TkWrap&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;act&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RsWithType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RsText&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;lt;page&amp;gt;&amp;lt;rate&amp;gt;1.1324&amp;lt;/rate&amp;gt;&amp;lt;/page&amp;gt;&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;application/xml&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;This “take” always returns the same XML response, but it doesn’t do any XSL transformation yet. We need to add the &lt;code&gt;RsXSLT&lt;/code&gt; class to the picture:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;act&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RsXSLT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RsWithType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RsText&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;lt;?xml-stylesheet type=&amp;#39;text/xsl&amp;#39; href=&amp;#39;/xsl/index.xsl&amp;#39;?&amp;gt;&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;lt;page&amp;gt;&amp;lt;rate&amp;gt;1.1324&amp;lt;/rate&amp;gt;&amp;lt;/page&amp;gt;&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;application/xml&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Excuse me for using string concatenation, which is a &lt;a href=&quot;/2014/06/19/avoid-string-concatenation.html&quot;&gt;bad practice&lt;/a&gt;; it’s merely for the simplicity of the example.&lt;/p&gt; &lt;p&gt;As you see, I also added an XML stylesheet processing instruction to the XML. &lt;code&gt;RsXSLT&lt;/code&gt; will understand it and try to find the &lt;code&gt;/xsl/index.xsl&lt;/code&gt; resource on classpath. You see the content of that file above.&lt;/p&gt; &lt;p&gt;That’s it.&lt;/p&gt; &lt;p&gt;Well, not really. Building XML from strings is not a good idea. We have a better instrument in the Takes framework. We use &lt;a href=&quot;http://www.xembly.org&quot;&gt;Xembly&lt;/a&gt;, which is a simple imperative language for building and modifying XML documents. More about it here: &lt;a href=&quot;/2014/04/09/xembly-intro.html&quot;&gt;Xembly, an Assembly for XML&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Here is how our &lt;code&gt;TkApp&lt;/code&gt; would look:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Response&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;act&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RsXSLT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RsWithType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RsXembly&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XeChain&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XeStylesheet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;/xsl/index.xsl&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XeAppend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;page&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XeDirectives&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Directives&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;rate&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;1.1324&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;application/xml&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;The most important class here is &lt;a href=&quot;http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/xe/RsXembly.html&quot;&gt;&lt;code&gt;RsXembly&lt;/code&gt;&lt;/a&gt;. The idea is to let model classes expose their data through Xembly “directives,” which will later be applied to a DOM structure by &lt;code&gt;RsXembly&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;&lt;code&gt;XeChain&lt;/code&gt;, &lt;code&gt;XeStylesheet&lt;/code&gt;, &lt;code&gt;XeAppend&lt;/code&gt;, and &lt;code&gt;XeDirectives&lt;/code&gt; expose directives but with different meanings (they are all instances of an &lt;code&gt;XeSource&lt;/code&gt; interface). Their names describe their intentions rather well. &lt;a href=&quot;http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/xe/XeChain.html&quot;&gt;&lt;code&gt;XeChain&lt;/code&gt;&lt;/a&gt; just chains everything that is delivered by encapsulated “directive sources.” &lt;a href=&quot;http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/xe/XeStylesheet.html&quot;&gt;&lt;code&gt;XeStylesheet&lt;/code&gt;&lt;/a&gt; returns directives that create a single XML processing instruction. &lt;a href=&quot;http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/xe/XeAppend.html&quot;&gt;&lt;code&gt;XeAppend&lt;/code&gt;&lt;/a&gt; creates an XML node and adds encapsulated directives to it. &lt;a href=&quot;http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/xe/XeDirectives.html&quot;&gt;&lt;code&gt;XeDirectives&lt;/code&gt;&lt;/a&gt; simply returns what’s inside.&lt;/p&gt; &lt;p&gt;In the end, this code will create exactly the same XML document as I created above with string concatenation.&lt;/p&gt; &lt;p&gt;The beauty of this approach is in the perfect &lt;a href=&quot;/2018/09/18/fear-of-coupling.html&quot;&gt;decoupling&lt;/a&gt; of data generation and XML building and translation between XML and HTML. It is perfectly reusable and “stackable.” We can transform the data in XML format multiple times, applying different XSL stylesheets to each one. We can even transform them into &lt;a href=&quot;/2015/11/16/json-vs-xml.html&quot;&gt;JSON&lt;/a&gt; without changing a line of code in model classes.&lt;/p&gt; &lt;p&gt;Moreover, we can format them differently, using rather powerful XSLT 2.0 instruments. XSLT by itself is a powerful and purely functional language that enables any possible data manipulations. No templating engine is even close to it.&lt;/p&gt; &lt;p&gt;Take a look at how it works in the &lt;a href=&quot;https://github.com/yegor256/rultor/blob/1.55/src/main/java/com/rultor/web/RsPage.java&quot;&gt;&lt;code&gt;RsPage&lt;/code&gt;&lt;/a&gt; class in Rultor, for example.&lt;/p&gt; "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/06/25/xml-data-xsl-views-takes-framework.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?c998b88f617"/> <link rel="apple-touch-icon" href="/favicon.ico?c998b88f617"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?c998b88f617"/> <link rel="stylesheet" href="/css/icons.css?c998b88f617"/> <link rel="canonical" href="https://www.yegor256.com/2015/06/25/xml-data-xsl-views-takes-framework.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/06/25/xml-data-xsl-views-takes-framework.amp.html" /> <title>XML Data and XSL Views in Takes Framework </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /2015/06/25/xml-data-xsl-views-takes-framework.html><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /2015/06/25/xml-data-xsl-views-takes-framework.html><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /2015/06/25/xml-data-xsl-views-takes-framework.html><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /2015/06/25/xml-data-xsl-views-takes-framework.html><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /2015/06/25/xml-data-xsl-views-takes-framework.html><a href="/books.html" title="The books I wrote">Books</a></li> <li /2015/06/25/xml-data-xsl-views-takes-framework.html><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /2015/06/25/xml-data-xsl-views-takes-framework.html><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /2015/06/25/xml-data-xsl-views-takes-framework.html class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /2015/06/25/xml-data-xsl-views-takes-framework.html><a href="/award.html" title="Software quality award">Award</a></li> <li /2015/06/25/xml-data-xsl-views-takes-framework.html><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /2015/06/25/xml-data-xsl-views-takes-framework.html><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /2015/06/25/xml-data-xsl-views-takes-framework.html><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/06/25/xml-data-xsl-views-takes-framework.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2015/06/25/xml-data-xsl-views-takes-framework.html</code></p><h1 itemprop="name headline mainEntityOfPage">XML Data and XSL Views in Takes Framework</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-06-25T00:00:00+00:00"> 25 June 2015 </time> </li> <li class="desktop-only" itemprop="locationCreated">Palo Alto, CA</li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2015/06/25/xml-data-xsl-views-takes-framework.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><figure class="badge"><a href="http://www.takes.org"><img src="http://www.takes.org/logo.png" style="width:96px;max-width:100%;" alt="badge" /></a></figure><p>A year ago, I <a href="/2014/06/25/xml-and-xslt-in-browser.html">tried to explain</a> how effectively data and its presentation can be separated in a web application with the help of XML and XSL. In a few words, instead of using <a href="https://en.wikipedia.org/wiki/Comparison_of_web_template_engines">templating</a> (like JSP, Velocity, FreeMarker, etc.) and injection of data into HTML, we compose them in the form of an XML document and then let the XSL stylesheet transform them into HTML. Here is a brief example of how all this can be used together with the <a href="http://www.takes.org">Takes framework</a>.</p><p>First, let’s agree that templating is a bad idea in the first place. Yes, I mean it. The entire design of JSP is wrong, with all due respect to its creators. Here is how it works: Let’s say my website has to fetch the current exchange rate of the euro from a database and show it on the home page. Here’s how my <code>index.jsp</code> would look:</p><figure class="highlight"><pre><code class="language-jsp" data-lang="jsp"><span></span><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;p&gt;</span>EUR/USD: <span class="k">&lt;%=</span> <span class="n">rates</span><span class="o">.</span><span class="na">get</span><span class="o">()</span> <span class="k">%&gt;</span><span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure><p>In order to create HTML, the JSP engine will have to call <code>get()</code> on object <code>rates</code> and render what’s returned through <code>toString()</code>. It’s a terrible design for a few reasons. First, the view is tightly coupled with the model. Second, the flexibility of rendering is very limited. Third, the result of rendering is not reusable, and views are not stackable. There are many other reasons … more about them in one of the next articles.</p><aside class="youtube"> <a href="https://www.youtube.com/watch?v=nheD2LNYrpk"><div class="box"> <img src="https://i.ytimg.com/vi/nheD2LNYrpk/mqdefault.jpg" alt="YouTube video #nheD2LNYrpk" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Takes, Java Web Framework, Intro (webinar #12); 2 March 2016.</div></aside><p>Let’s see how this should be done right. First, we let our model generate the output in XML format, for example:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="cp">&lt;?xml version=&quot;1.1&quot;?&gt;</span>
<span class="nt">&lt;page&gt;</span>
  <span class="nt">&lt;rate&gt;</span>1.1324<span class="nt">&lt;/rate&gt;</span>
<span class="nt">&lt;/page&gt;</span></code></pre></figure><p>This is what the model will produce, having no knowledge of the view. Then, we create the view as an XSL stylesheet, which will transform XML into HTML:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;xsl:stylesheet</span> <span class="na">version=</span><span class="s">&quot;1.0&quot;</span>
  <span class="na">xmlns:xsl=</span><span class="s">&quot;http://www.w3.org/1999/XSL/Transform&quot;</span>
  <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsl:template</span> <span class="na">match=</span><span class="s">&quot;page&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;html&gt;</span>
      <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;p&gt;</span>
          <span class="nt">&lt;xsl:text&gt;</span>EUR/USD: <span class="nt">&lt;/xsl:text&gt;</span>
          <span class="nt">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;rate&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/html&gt;</span>
  <span class="nt">&lt;/xsl:template&gt;</span>
<span class="nt">&lt;/xsl:stylesheet&gt;</span></code></pre></figure><p>As you see, the view doesn’t know anything about the model in terms of implementation. All it knows is the format of XML data output produced by the model. Here is how you design it in the <a href="http://www.takes.org">Takes framework</a>. Let’s start with a simple example:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.takes.http.Exit</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.takes.http.FtCli</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Entry</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="k">new</span> <span class="n">FtCli</span><span class="o">(</span><span class="k">new</span> <span class="n">TkApp</span><span class="o">(),</span> <span class="n">args</span><span class="o">).</span><span class="na">start</span><span class="o">(</span><span class="n">Exit</span><span class="o">.</span><span class="na">NEVER</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>It’s a simple web application that starts a web server and never ends (it waits for connections in daemon mode). To make it work, we should create a simple “take” named <code>TkApp</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.takes.Take</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.takes.tk.TkWrap</span><span class="o">;</span>
<span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkApp</span> <span class="kd">extends</span> <span class="n">TkWrap</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Response</span> <span class="nf">act</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">RsWithType</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">RsText</span><span class="o">(</span>
        <span class="s">&quot;&lt;page&gt;&lt;rate&gt;1.1324&lt;/rate&gt;&lt;/page&gt;&quot;</span>
      <span class="o">),</span>
      <span class="s">&quot;application/xml&quot;</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This “take” always returns the same XML response, but it doesn’t do any XSL transformation yet. We need to add the <code>RsXSLT</code> class to the picture:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">Response</span> <span class="nf">act</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="n">RsXSLT</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">RsWithType</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">RsText</span><span class="o">(</span>
        <span class="s">&quot;&lt;?xml-stylesheet type=&#39;text/xsl&#39; href=&#39;/xsl/index.xsl&#39;?&gt;&quot;</span>
        <span class="o">+</span> <span class="s">&quot;&lt;page&gt;&lt;rate&gt;1.1324&lt;/rate&gt;&lt;/page&gt;&quot;</span>
      <span class="o">),</span>
      <span class="s">&quot;application/xml&quot;</span>
    <span class="o">)</span>
  <span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>Excuse me for using string concatenation, which is a <a href="/2014/06/19/avoid-string-concatenation.html">bad practice</a>; it’s merely for the simplicity of the example.</p><p>As you see, I also added an XML stylesheet processing instruction to the XML. <code>RsXSLT</code> will understand it and try to find the <code>/xsl/index.xsl</code> resource on classpath. You see the content of that file above.</p><p>That’s it.</p><p>Well, not really. Building XML from strings is not a good idea. We have a better instrument in the Takes framework. We use <a href="http://www.xembly.org">Xembly</a>, which is a simple imperative language for building and modifying XML documents. More about it here: <a href="/2014/04/09/xembly-intro.html">Xembly, an Assembly for XML</a>.</p><p>Here is how our <code>TkApp</code> would look:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">Response</span> <span class="nf">act</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="n">RsXSLT</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">RsWithType</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">RsXembly</span><span class="o">(</span>
        <span class="k">new</span> <span class="n">XeChain</span><span class="o">(</span>
          <span class="k">new</span> <span class="n">XeStylesheet</span><span class="o">(</span><span class="s">&quot;/xsl/index.xsl&quot;</span><span class="o">),</span>
          <span class="k">new</span> <span class="n">XeAppend</span><span class="o">(</span>
            <span class="s">&quot;page&quot;</span><span class="o">,</span>
            <span class="k">new</span> <span class="n">XeDirectives</span><span class="o">(</span>
              <span class="k">new</span> <span class="n">Directives</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;rate&quot;</span><span class="o">).</span><span class="na">set</span><span class="o">(</span><span class="s">&quot;1.1324&quot;</span><span class="o">)</span>
            <span class="o">)</span>
          <span class="o">)</span>
        <span class="o">)</span>
      <span class="o">),</span>
      <span class="s">&quot;application/xml&quot;</span>
    <span class="o">)</span>
  <span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>The most important class here is <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/xe/RsXembly.html"><code>RsXembly</code></a>. The idea is to let model classes expose their data through Xembly “directives,” which will later be applied to a DOM structure by <code>RsXembly</code>.</p><p><code>XeChain</code>, <code>XeStylesheet</code>, <code>XeAppend</code>, and <code>XeDirectives</code> expose directives but with different meanings (they are all instances of an <code>XeSource</code> interface). Their names describe their intentions rather well. <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/xe/XeChain.html"><code>XeChain</code></a> just chains everything that is delivered by encapsulated “directive sources.” <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/xe/XeStylesheet.html"><code>XeStylesheet</code></a> returns directives that create a single XML processing instruction. <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/xe/XeAppend.html"><code>XeAppend</code></a> creates an XML node and adds encapsulated directives to it. <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/xe/XeDirectives.html"><code>XeDirectives</code></a> simply returns what’s inside.</p><p>In the end, this code will create exactly the same XML document as I created above with string concatenation.</p><p>The beauty of this approach is in the perfect <a href="/2018/09/18/fear-of-coupling.html">decoupling</a> of data generation and XML building and translation between XML and HTML. It is perfectly reusable and “stackable.” We can transform the data in XML format multiple times, applying different XSL stylesheets to each one. We can even transform them into <a href="/2015/11/16/json-vs-xml.html">JSON</a> without changing a line of code in model classes.</p><p>Moreover, we can format them differently, using rather powerful XSLT 2.0 instruments. XSLT by itself is a powerful and purely functional language that enables any possible data manipulations. No templating engine is even close to it.</p><p>Take a look at how it works in the <a href="https://github.com/yegor256/rultor/blob/1.55/src/main/java/com/rultor/web/RsPage.java"><code>RsPage</code></a> class in Rultor, for example.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/06/25/xml-data-xsl-views-takes-framework.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/06/25/xml-data-xsl-views-takes-framework.html&amp;text=XML+Data+and+XSL+Views+in+Takes+Framework" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/06/25/xml-data-xsl-views-takes-framework.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/06/25/xml-data-xsl-views-takes-framework.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/06/25/xml-data-xsl-views-takes-framework.html%3F2015-25&amp;title=XML+Data+and+XSL+Views+in+Takes+Framework" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/06/25/xml-data-xsl-views-takes-framework.html%3F2015-25&amp;t=XML+Data+and+XSL+Views+in+Takes+Framework" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div > <figure class="badge"><a href="http://www.takes.org"><img src="http://www.takes.org/logo.png" style="width:96px;max-width:100%;" alt="badge" /></a></figure><p>A year ago, I <a href="/2014/06/25/xml-and-xslt-in-browser.html">tried to explain</a> how effectively data and its presentation can be separated in a web application with the help of XML and XSL. In a few words, instead of using <a href="https://en.wikipedia.org/wiki/Comparison_of_web_template_engines">templating</a> (like JSP, Velocity, FreeMarker, etc.) and injection of data into HTML, we compose them in the form of an XML document and then let the XSL stylesheet transform them into HTML. Here is a brief example of how all this can be used together with the <a href="http://www.takes.org">Takes framework</a>.</p><p>First, let’s agree that templating is a bad idea in the first place. Yes, I mean it. The entire design of JSP is wrong, with all due respect to its creators. Here is how it works: Let’s say my website has to fetch the current exchange rate of the euro from a database and show it on the home page. Here’s how my <code>index.jsp</code> would look:</p><figure class="highlight"><pre><code class="language-jsp" data-lang="jsp"><span></span><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;p&gt;</span>EUR/USD: <span class="k">&lt;%=</span> <span class="n">rates</span><span class="o">.</span><span class="na">get</span><span class="o">()</span> <span class="k">%&gt;</span><span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure><p>In order to create HTML, the JSP engine will have to call <code>get()</code> on object <code>rates</code> and render what’s returned through <code>toString()</code>. It’s a terrible design for a few reasons. First, the view is tightly coupled with the model. Second, the flexibility of rendering is very limited. Third, the result of rendering is not reusable, and views are not stackable. There are many other reasons … more about them in one of the next articles.</p><aside class="youtube"> <a href="https://www.youtube.com/watch?v=nheD2LNYrpk"><div class="box"> <img src="https://i.ytimg.com/vi/nheD2LNYrpk/mqdefault.jpg" alt="YouTube video #nheD2LNYrpk" /><div class="play"><i class="icon icon-play"></i></div></div></a><div>Takes, Java Web Framework, Intro (webinar #12); 2 March 2016.</div></aside><p>Let’s see how this should be done right. First, we let our model generate the output in XML format, for example:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="cp">&lt;?xml version=&quot;1.1&quot;?&gt;</span>
<span class="nt">&lt;page&gt;</span>
  <span class="nt">&lt;rate&gt;</span>1.1324<span class="nt">&lt;/rate&gt;</span>
<span class="nt">&lt;/page&gt;</span></code></pre></figure><p>This is what the model will produce, having no knowledge of the view. Then, we create the view as an XSL stylesheet, which will transform XML into HTML:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;xsl:stylesheet</span> <span class="na">version=</span><span class="s">&quot;1.0&quot;</span>
  <span class="na">xmlns:xsl=</span><span class="s">&quot;http://www.w3.org/1999/XSL/Transform&quot;</span>
  <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsl:template</span> <span class="na">match=</span><span class="s">&quot;page&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;html&gt;</span>
      <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;p&gt;</span>
          <span class="nt">&lt;xsl:text&gt;</span>EUR/USD: <span class="nt">&lt;/xsl:text&gt;</span>
          <span class="nt">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;rate&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/html&gt;</span>
  <span class="nt">&lt;/xsl:template&gt;</span>
<span class="nt">&lt;/xsl:stylesheet&gt;</span></code></pre></figure><p>As you see, the view doesn’t know anything about the model in terms of implementation. All it knows is the format of XML data output produced by the model. Here is how you design it in the <a href="http://www.takes.org">Takes framework</a>. Let’s start with a simple example:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.takes.http.Exit</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.takes.http.FtCli</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Entry</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="k">new</span> <span class="n">FtCli</span><span class="o">(</span><span class="k">new</span> <span class="n">TkApp</span><span class="o">(),</span> <span class="n">args</span><span class="o">).</span><span class="na">start</span><span class="o">(</span><span class="n">Exit</span><span class="o">.</span><span class="na">NEVER</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>It’s a simple web application that starts a web server and never ends (it waits for connections in daemon mode). To make it work, we should create a simple “take” named <code>TkApp</code>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.takes.Take</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.takes.tk.TkWrap</span><span class="o">;</span>
<span class="kd">final</span> <span class="kd">class</span> <span class="nc">TkApp</span> <span class="kd">extends</span> <span class="n">TkWrap</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Response</span> <span class="nf">act</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">RsWithType</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">RsText</span><span class="o">(</span>
        <span class="s">&quot;&lt;page&gt;&lt;rate&gt;1.1324&lt;/rate&gt;&lt;/page&gt;&quot;</span>
      <span class="o">),</span>
      <span class="s">&quot;application/xml&quot;</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>This “take” always returns the same XML response, but it doesn’t do any XSL transformation yet. We need to add the <code>RsXSLT</code> class to the picture:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">Response</span> <span class="nf">act</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="n">RsXSLT</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">RsWithType</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">RsText</span><span class="o">(</span>
        <span class="s">&quot;&lt;?xml-stylesheet type=&#39;text/xsl&#39; href=&#39;/xsl/index.xsl&#39;?&gt;&quot;</span>
        <span class="o">+</span> <span class="s">&quot;&lt;page&gt;&lt;rate&gt;1.1324&lt;/rate&gt;&lt;/page&gt;&quot;</span>
      <span class="o">),</span>
      <span class="s">&quot;application/xml&quot;</span>
    <span class="o">)</span>
  <span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>Excuse me for using string concatenation, which is a <a href="/2014/06/19/avoid-string-concatenation.html">bad practice</a>; it’s merely for the simplicity of the example.</p><p>As you see, I also added an XML stylesheet processing instruction to the XML. <code>RsXSLT</code> will understand it and try to find the <code>/xsl/index.xsl</code> resource on classpath. You see the content of that file above.</p><p>That’s it.</p><p>Well, not really. Building XML from strings is not a good idea. We have a better instrument in the Takes framework. We use <a href="http://www.xembly.org">Xembly</a>, which is a simple imperative language for building and modifying XML documents. More about it here: <a href="/2014/04/09/xembly-intro.html">Xembly, an Assembly for XML</a>.</p><p>Here is how our <code>TkApp</code> would look:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="n">Response</span> <span class="nf">act</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="n">RsXSLT</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">RsWithType</span><span class="o">(</span>
      <span class="k">new</span> <span class="n">RsXembly</span><span class="o">(</span>
        <span class="k">new</span> <span class="n">XeChain</span><span class="o">(</span>
          <span class="k">new</span> <span class="n">XeStylesheet</span><span class="o">(</span><span class="s">&quot;/xsl/index.xsl&quot;</span><span class="o">),</span>
          <span class="k">new</span> <span class="n">XeAppend</span><span class="o">(</span>
            <span class="s">&quot;page&quot;</span><span class="o">,</span>
            <span class="k">new</span> <span class="n">XeDirectives</span><span class="o">(</span>
              <span class="k">new</span> <span class="n">Directives</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;rate&quot;</span><span class="o">).</span><span class="na">set</span><span class="o">(</span><span class="s">&quot;1.1324&quot;</span><span class="o">)</span>
            <span class="o">)</span>
          <span class="o">)</span>
        <span class="o">)</span>
      <span class="o">),</span>
      <span class="s">&quot;application/xml&quot;</span>
    <span class="o">)</span>
  <span class="o">);</span>
<span class="o">}</span></code></pre></figure><p>The most important class here is <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/xe/RsXembly.html"><code>RsXembly</code></a>. The idea is to let model classes expose their data through Xembly “directives,” which will later be applied to a DOM structure by <code>RsXembly</code>.</p><p><code>XeChain</code>, <code>XeStylesheet</code>, <code>XeAppend</code>, and <code>XeDirectives</code> expose directives but with different meanings (they are all instances of an <code>XeSource</code> interface). Their names describe their intentions rather well. <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/xe/XeChain.html"><code>XeChain</code></a> just chains everything that is delivered by encapsulated “directive sources.” <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/xe/XeStylesheet.html"><code>XeStylesheet</code></a> returns directives that create a single XML processing instruction. <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/xe/XeAppend.html"><code>XeAppend</code></a> creates an XML node and adds encapsulated directives to it. <a href="http://static.javadoc.io/org.takes/takes/1.1/org/takes/rs/xe/XeDirectives.html"><code>XeDirectives</code></a> simply returns what’s inside.</p><p>In the end, this code will create exactly the same XML document as I created above with string concatenation.</p><p>The beauty of this approach is in the perfect <a href="/2018/09/18/fear-of-coupling.html">decoupling</a> of data generation and XML building and translation between XML and HTML. It is perfectly reusable and “stackable.” We can transform the data in XML format multiple times, applying different XSL stylesheets to each one. We can even transform them into <a href="/2015/11/16/json-vs-xml.html">JSON</a> without changing a line of code in model classes.</p><p>Moreover, we can format them differently, using rather powerful XSLT 2.0 instruments. XSLT by itself is a powerful and purely functional language that enables any possible data manipulations. No templating engine is even close to it.</p><p>Take a look at how it works in the <a href="https://github.com/yegor256/rultor/blob/1.55/src/main/java/com/rultor/web/RsPage.java"><code>RsPage</code></a> class in Rultor, for example.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?c998b88f617"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="&lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://http.jcabi.com&quot;&gt;&lt;img src=&quot;http://img.jcabi.com/logo-square.svg&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.w3.org/TR/xslt20/&quot;&gt;XSL transformation&lt;/a&gt; (XSLT) is a powerful mechanism for converting one XML document into another. However, in Java, XML manipulations are rather verbose and complex. Even for a simple XSL transformation, you have to write a few dozen lines of code—and maybe even more than that if proper exception handling and logging is needed. &lt;a href=&quot;/2014/04/24/java-xml-parsing-and-traversing.html&quot;&gt;jcabi-xml&lt;/a&gt; is a small open source library that makes life much easier by enabling XML parsing and XPath traversing with &lt;a href=&quot;/2014/04/24/java-xml-parsing-and-traversing.html&quot;&gt;a few simple methods&lt;/a&gt;. Let’s see how this library helps in XSL transformations.&lt;/p&gt; &lt;!--more--&gt; &lt;p&gt;First, take a look at a practical example—&lt;a href=&quot;http://www.rultor.com&quot;&gt;rultor.com&lt;/a&gt;—a hosted DevOps assistant that &lt;a href=&quot;/2014/07/24/rultor-automated-merging.html&quot;&gt;automates&lt;/a&gt; release, merge, and deploy operations. Rultor keeps each conversation session with an end user (a.k.a. “talk”) in a DynamoDB record. There are multiple situations to handle in each talk; that’s why using multiple columns of a record is not really feasible. Instead, we’re keeping only a few parameters of each talk in record columns (like ID and name) and putting all the rest in a single XML column.&lt;/p&gt; &lt;p&gt;This is approximately how our DynamoDB table looks:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;+----+---------------+--------------------------------------+ | id | name | xml | +----+---------------+--------------------------------------+ | 12 | jcabi-xml#54 | &amp;lt;?xml version=&amp;#39;1.0&amp;#39;?&amp;gt; | | | | &amp;lt;talk public=&amp;quot;true&amp;quot;&amp;gt; | | | | &amp;lt;request id=&amp;quot;e5f4b3&amp;quot;&amp;gt;...&amp;lt;/request&amp;gt; | | | | &amp;lt;/talk&amp;gt; | +----+---------------+--------------------------------------+ | 13 | jcabi-email#2 | &amp;lt;?xml version=&amp;#39;1.0&amp;#39;?&amp;gt; | | | | &amp;lt;talk public=&amp;quot;true&amp;quot;&amp;gt; | | | | &amp;lt;daemon id=&amp;quot;f787fe&amp;quot;&amp;gt;...&amp;lt;/daemon&amp;gt; | | | | &amp;lt;/talk&amp;gt; | +----+---------------+--------------------------------------+&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Once a user posts &lt;code&gt;@rultor status&lt;/code&gt; into a GitHub ticket, Rultor has to answer with a full status report about the current talk. In order to create such a text answer (a regular user would not appreciate an XML response), we have to fetch that &lt;code&gt;xml&lt;/code&gt; column from the necessary DynamoDB record and convert it to plain English text.&lt;/p&gt; &lt;p&gt;Here is how we’re doing that with the help of &lt;a href=&quot;/2014/04/24/java-xml-parsing-and-traversing.html&quot;&gt;jcabi-xml&lt;/a&gt; and its class, &lt;a href=&quot;http://xml.jcabi.com/apidocs-0.15/com/jcabi/xml/XSLDocument.html&quot;&gt;&lt;code&gt;XSLDocument&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xml&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// comes from DynamoDB&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XSL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xsl&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XSLDocument&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getResourceAsStream&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;status.xsl&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xsl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;applyTo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xml&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;That’s it. Now let’s see what’s there in that &lt;code&gt;status.xsl&lt;/code&gt; file (this is just a skeleton of it; the full version is &lt;a href=&quot;https://github.com/yegor256/rultor/blob/1.48/src/main/resources/com/rultor/agents/github/qtn/status.xsl&quot;&gt;here&lt;/a&gt;):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:stylesheet&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns:xsl=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;http://www.w3.org/1999/XSL/Transform&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;version=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;2.0&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:output&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;method=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;text&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:template&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;match=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;/talk&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:text&amp;gt;&lt;/span&gt;Hi, here is your status report:&lt;span class=&quot;nt&quot;&gt;&amp;lt;/xsl:text&amp;gt;&lt;/span&gt; ... &lt;span class=&quot;nt&quot;&gt;&amp;lt;/xsl:template&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:template&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;match=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;node()|@*&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:copy&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:apply-templates&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;select=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;node()|@*&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/xsl:copy&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/xsl:template&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/xsl:stylesheet&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;It is good practice to create XSL documents only once per application run. We have a static utility method &lt;a href=&quot;http://xml.jcabi.com/apidocs-0.15/com/jcabi/xml/XSLDocument.html#make%28java.io.InputStream%29&quot;&gt;&lt;code&gt;XSLDocument.make()&lt;/code&gt;&lt;/a&gt; for this:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Foo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XSL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;STYLESHEET&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XSLDocument&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getResourceAsStream&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;stylesheet.xsl&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XML&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XML&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xml&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;STYLESHEET&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;transform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xml&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Pay attention to the fact we’re using XSLT 2.0. Built-in Java implementation of XSLT doesn’t support version 2.0, and in order to make it work, we’re using these two Maven Saxon dependencies:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;net.sourceforge.saxon&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;saxon&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;9.1.0.8&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;runtime&lt;span class=&quot;nt&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;net.sourceforge.saxon&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;saxon&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;9.1.0.8&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;classifier&amp;gt;&lt;/span&gt;xpath&lt;span class=&quot;nt&quot;&gt;&amp;lt;/classifier&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;runtime&lt;span class=&quot;nt&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;All you need to do to start using &lt;code&gt;jcabi-xml&lt;/code&gt; for XSL transformations is add this dependency to your &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.jcabi&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jcabi-xml&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;If you have any problems or suggestions, don’t hesitate to submit an issue to the GitHub &lt;a href=&quot;https://github.com/jcabi/jcabi-xml/issues&quot;&gt;issue tracker&lt;/a&gt;.&lt;/p&gt; " /> <meta name="keywords" content="next, path, output, content, previous, url, relative_path, id, collection, excerpt, draft, categories, layout, title, date, tags, description, keywords, slug, ext" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2015-02-02 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="XSL Transformation in Java: An Easy Way"/> <meta name="twitter:description" property="og:description" content="&lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://http.jcabi.com&quot;&gt;&lt;img src=&quot;http://img.jcabi.com/logo-square.svg&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;http://www.w3.org/TR/xslt20/&quot;&gt;XSL transformation&lt;/a&gt; (XSLT) is a powerful mechanism for converting one XML document into another. However, in Java, XML manipulations are rather verbose and complex. Even for a simple XSL transformation, you have to write a few dozen lines of code—and maybe even more than that if proper exception handling and logging is needed. &lt;a href=&quot;/2014/04/24/java-xml-parsing-and-traversing.html&quot;&gt;jcabi-xml&lt;/a&gt; is a small open source library that makes life much easier by enabling XML parsing and XPath traversing with &lt;a href=&quot;/2014/04/24/java-xml-parsing-and-traversing.html&quot;&gt;a few simple methods&lt;/a&gt;. Let’s see how this library helps in XSL transformations.&lt;/p&gt; &lt;!--more--&gt; &lt;p&gt;First, take a look at a practical example—&lt;a href=&quot;http://www.rultor.com&quot;&gt;rultor.com&lt;/a&gt;—a hosted DevOps assistant that &lt;a href=&quot;/2014/07/24/rultor-automated-merging.html&quot;&gt;automates&lt;/a&gt; release, merge, and deploy operations. Rultor keeps each conversation session with an end user (a.k.a. “talk”) in a DynamoDB record. There are multiple situations to handle in each talk; that’s why using multiple columns of a record is not really feasible. Instead, we’re keeping only a few parameters of each talk in record columns (like ID and name) and putting all the rest in a single XML column.&lt;/p&gt; &lt;p&gt;This is approximately how our DynamoDB table looks:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;&lt;span&gt;&lt;/span&gt;+----+---------------+--------------------------------------+ | id | name | xml | +----+---------------+--------------------------------------+ | 12 | jcabi-xml#54 | &amp;lt;?xml version=&amp;#39;1.0&amp;#39;?&amp;gt; | | | | &amp;lt;talk public=&amp;quot;true&amp;quot;&amp;gt; | | | | &amp;lt;request id=&amp;quot;e5f4b3&amp;quot;&amp;gt;...&amp;lt;/request&amp;gt; | | | | &amp;lt;/talk&amp;gt; | +----+---------------+--------------------------------------+ | 13 | jcabi-email#2 | &amp;lt;?xml version=&amp;#39;1.0&amp;#39;?&amp;gt; | | | | &amp;lt;talk public=&amp;quot;true&amp;quot;&amp;gt; | | | | &amp;lt;daemon id=&amp;quot;f787fe&amp;quot;&amp;gt;...&amp;lt;/daemon&amp;gt; | | | | &amp;lt;/talk&amp;gt; | +----+---------------+--------------------------------------+&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Once a user posts &lt;code&gt;@rultor status&lt;/code&gt; into a GitHub ticket, Rultor has to answer with a full status report about the current talk. In order to create such a text answer (a regular user would not appreciate an XML response), we have to fetch that &lt;code&gt;xml&lt;/code&gt; column from the necessary DynamoDB record and convert it to plain English text.&lt;/p&gt; &lt;p&gt;Here is how we’re doing that with the help of &lt;a href=&quot;/2014/04/24/java-xml-parsing-and-traversing.html&quot;&gt;jcabi-xml&lt;/a&gt; and its class, &lt;a href=&quot;http://xml.jcabi.com/apidocs-0.15/com/jcabi/xml/XSLDocument.html&quot;&gt;&lt;code&gt;XSLDocument&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xml&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// comes from DynamoDB&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XSL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xsl&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XSLDocument&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getResourceAsStream&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;status.xsl&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xsl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;applyTo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xml&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;That’s it. Now let’s see what’s there in that &lt;code&gt;status.xsl&lt;/code&gt; file (this is just a skeleton of it; the full version is &lt;a href=&quot;https://github.com/yegor256/rultor/blob/1.48/src/main/resources/com/rultor/agents/github/qtn/status.xsl&quot;&gt;here&lt;/a&gt;):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:stylesheet&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns:xsl=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;http://www.w3.org/1999/XSL/Transform&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;version=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;2.0&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:output&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;method=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;text&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:template&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;match=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;/talk&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:text&amp;gt;&lt;/span&gt;Hi, here is your status report:&lt;span class=&quot;nt&quot;&gt;&amp;lt;/xsl:text&amp;gt;&lt;/span&gt; ... &lt;span class=&quot;nt&quot;&gt;&amp;lt;/xsl:template&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:template&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;match=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;node()|@*&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:copy&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:apply-templates&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;select=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;node()|@*&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/xsl:copy&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/xsl:template&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/xsl:stylesheet&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;It is good practice to create XSL documents only once per application run. We have a static utility method &lt;a href=&quot;http://xml.jcabi.com/apidocs-0.15/com/jcabi/xml/XSLDocument.html#make%28java.io.InputStream%29&quot;&gt;&lt;code&gt;XSLDocument.make()&lt;/code&gt;&lt;/a&gt; for this:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Foo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XSL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;STYLESHEET&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XSLDocument&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getResourceAsStream&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;stylesheet.xsl&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XML&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XML&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xml&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;STYLESHEET&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;transform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xml&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Pay attention to the fact we’re using XSLT 2.0. Built-in Java implementation of XSLT doesn’t support version 2.0, and in order to make it work, we’re using these two Maven Saxon dependencies:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;net.sourceforge.saxon&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;saxon&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;9.1.0.8&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;runtime&lt;span class=&quot;nt&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;net.sourceforge.saxon&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;saxon&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;9.1.0.8&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;classifier&amp;gt;&lt;/span&gt;xpath&lt;span class=&quot;nt&quot;&gt;&amp;lt;/classifier&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;runtime&lt;span class=&quot;nt&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;All you need to do to start using &lt;code&gt;jcabi-xml&lt;/code&gt; for XSL transformations is add this dependency to your &lt;code&gt;pom.xml&lt;/code&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.jcabi&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jcabi-xml&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;If you have any problems or suggestions, don’t hesitate to submit an issue to the GitHub &lt;a href=&quot;https://github.com/jcabi/jcabi-xml/issues&quot;&gt;issue tracker&lt;/a&gt;.&lt;/p&gt; "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?c998b88f617"/> <link rel="apple-touch-icon" href="/favicon.ico?c998b88f617"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?c998b88f617"/> <link rel="stylesheet" href="/css/icons.css?c998b88f617"/> <link rel="canonical" href="https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html" /> <link rel="amphtml" href="https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.amp.html" /> <title>XSL Transformation in Java: An Easy Way </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /2015/02/02/xsl-transformations-in-java.html><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /2015/02/02/xsl-transformations-in-java.html><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /2015/02/02/xsl-transformations-in-java.html><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /2015/02/02/xsl-transformations-in-java.html><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /2015/02/02/xsl-transformations-in-java.html><a href="/books.html" title="The books I wrote">Books</a></li> <li /2015/02/02/xsl-transformations-in-java.html><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /2015/02/02/xsl-transformations-in-java.html><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /2015/02/02/xsl-transformations-in-java.html class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /2015/02/02/xsl-transformations-in-java.html><a href="/award.html" title="Software quality award">Award</a></li> <li /2015/02/02/xsl-transformations-in-java.html><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /2015/02/02/xsl-transformations-in-java.html><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /2015/02/02/xsl-transformations-in-java.html><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html</code></p><h1 itemprop="name headline mainEntityOfPage">XSL Transformation in Java: An Easy Way</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2015-02-02T00:00:00+00:00"> 2 February 2015 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><figure class="badge"><a href="http://http.jcabi.com"><img src="http://img.jcabi.com/logo-square.svg" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.w3.org/TR/xslt20/">XSL transformation</a> (XSLT) is a powerful mechanism for converting one XML document into another. However, in Java, XML manipulations are rather verbose and complex. Even for a simple XSL transformation, you have to write a few dozen lines of code—and maybe even more than that if proper exception handling and logging is needed. <a href="/2014/04/24/java-xml-parsing-and-traversing.html">jcabi-xml</a> is a small open source library that makes life much easier by enabling XML parsing and XPath traversing with <a href="/2014/04/24/java-xml-parsing-and-traversing.html">a few simple methods</a>. Let’s see how this library helps in XSL transformations.</p><p>First, take a look at a practical example—<a href="http://www.rultor.com">rultor.com</a>—a hosted DevOps assistant that <a href="/2014/07/24/rultor-automated-merging.html">automates</a> release, merge, and deploy operations. Rultor keeps each conversation session with an end user (a.k.a. “talk”) in a DynamoDB record. There are multiple situations to handle in each talk; that’s why using multiple columns of a record is not really feasible. Instead, we’re keeping only a few parameters of each talk in record columns (like ID and name) and putting all the rest in a single XML column.</p><p>This is approximately how our DynamoDB table looks:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>+----+---------------+--------------------------------------+
| id | name          | xml                                  |
+----+---------------+--------------------------------------+
| 12 | jcabi-xml#54  | &lt;?xml version=&#39;1.0&#39;?&gt;                |
|    |               | &lt;talk public=&quot;true&quot;&gt;                 |
|    |               |   &lt;request id=&quot;e5f4b3&quot;&gt;...&lt;/request&gt; |
|    |               | &lt;/talk&gt;                              |
+----+---------------+--------------------------------------+
| 13 | jcabi-email#2 | &lt;?xml version=&#39;1.0&#39;?&gt;                |
|    |               | &lt;talk public=&quot;true&quot;&gt;                 |
|    |               |   &lt;daemon id=&quot;f787fe&quot;&gt;...&lt;/daemon&gt;   |
|    |               | &lt;/talk&gt;                              |
+----+---------------+--------------------------------------+</code></pre></figure><p>Once a user posts <code>@rultor status</code> into a GitHub ticket, Rultor has to answer with a full status report about the current talk. In order to create such a text answer (a regular user would not appreciate an XML response), we have to fetch that <code>xml</code> column from the necessary DynamoDB record and convert it to plain English text.</p><p>Here is how we’re doing that with the help of <a href="/2014/04/24/java-xml-parsing-and-traversing.html">jcabi-xml</a> and its class, <a href="http://xml.jcabi.com/apidocs-0.15/com/jcabi/xml/XSLDocument.html"><code>XSLDocument</code></a>.</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">String</span> <span class="n">xml</span> <span class="o">=</span> <span class="c1">// comes from DynamoDB</span>
<span class="kd">final</span> <span class="n">XSL</span> <span class="n">xsl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">XSLDocument</span><span class="o">(</span>
  <span class="k">this</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="s">&quot;status.xsl&quot;</span><span class="o">)</span>
<span class="o">);</span>
<span class="kd">final</span> <span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="n">xsl</span><span class="o">.</span><span class="na">applyTo</span><span class="o">(</span><span class="n">xml</span><span class="o">);</span></code></pre></figure><p>That’s it. Now let’s see what’s there in that <code>status.xsl</code> file (this is just a skeleton of it; the full version is <a href="https://github.com/yegor256/rultor/blob/1.48/src/main/resources/com/rultor/agents/github/qtn/status.xsl">here</a>):</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;xsl:stylesheet</span> <span class="na">xmlns:xsl=</span><span class="s">&quot;http://www.w3.org/1999/XSL/Transform&quot;</span>
  <span class="na">version=</span><span class="s">&quot;2.0&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsl:output</span> <span class="na">method=</span><span class="s">&quot;text&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;xsl:template</span> <span class="na">match=</span><span class="s">&quot;/talk&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsl:text&gt;</span>Hi, here is your status report:<span class="nt">&lt;/xsl:text&gt;</span>
    ...
  <span class="nt">&lt;/xsl:template&gt;</span>
  <span class="nt">&lt;xsl:template</span> <span class="na">match=</span><span class="s">&quot;node()|@*&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsl:copy&gt;</span>
      <span class="nt">&lt;xsl:apply-templates</span> <span class="na">select=</span><span class="s">&quot;node()|@*&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsl:copy&gt;</span>
  <span class="nt">&lt;/xsl:template&gt;</span>
<span class="nt">&lt;/xsl:stylesheet&gt;</span></code></pre></figure><p>It is good practice to create XSL documents only once per application run. We have a static utility method <a href="http://xml.jcabi.com/apidocs-0.15/com/jcabi/xml/XSLDocument.html#make%28java.io.InputStream%29"><code>XSLDocument.make()</code></a> for this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">XSL</span> <span class="n">STYLESHEET</span> <span class="o">=</span> <span class="n">XSLDocument</span><span class="o">.</span><span class="na">make</span><span class="o">(</span>
    <span class="n">Foo</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="s">&quot;stylesheet.xsl&quot;</span><span class="o">)</span>
  <span class="o">);</span>
  <span class="kd">public</span> <span class="n">XML</span> <span class="nf">style</span><span class="o">(</span><span class="kd">final</span> <span class="n">XML</span> <span class="n">xml</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Foo</span><span class="o">.</span><span class="na">STYLESHEET</span><span class="o">.</span><span class="na">transform</span><span class="o">(</span><span class="n">xml</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Pay attention to the fact we’re using XSLT 2.0. Built-in Java implementation of XSLT doesn’t support version 2.0, and in order to make it work, we’re using these two Maven Saxon dependencies:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>net.sourceforge.saxon<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>saxon<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>9.1.0.8<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>net.sourceforge.saxon<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>saxon<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>9.1.0.8<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;classifier&gt;</span>xpath<span class="nt">&lt;/classifier&gt;</span>
  <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre></figure><p>All you need to do to start using <code>jcabi-xml</code> for XSL transformations is add this dependency to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.jcabi<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>jcabi-xml<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre></figure><p>If you have any problems or suggestions, don’t hesitate to submit an issue to the GitHub <a href="https://github.com/jcabi/jcabi-xml/issues">issue tracker</a>.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html&amp;text=XSL+Transformation+in+Java%3A+An+Easy+Way" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html%3F2015-05&amp;title=XSL+Transformation+in+Java%3A+An+Easy+Way" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2015/02/02/xsl-transformations-in-java.html%3F2015-05&amp;t=XSL+Transformation+in+Java%3A+An+Easy+Way" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div > <figure class="badge"><a href="http://http.jcabi.com"><img src="http://img.jcabi.com/logo-square.svg" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p><a href="http://www.w3.org/TR/xslt20/">XSL transformation</a> (XSLT) is a powerful mechanism for converting one XML document into another. However, in Java, XML manipulations are rather verbose and complex. Even for a simple XSL transformation, you have to write a few dozen lines of code—and maybe even more than that if proper exception handling and logging is needed. <a href="/2014/04/24/java-xml-parsing-and-traversing.html">jcabi-xml</a> is a small open source library that makes life much easier by enabling XML parsing and XPath traversing with <a href="/2014/04/24/java-xml-parsing-and-traversing.html">a few simple methods</a>. Let’s see how this library helps in XSL transformations.</p><p>First, take a look at a practical example—<a href="http://www.rultor.com">rultor.com</a>—a hosted DevOps assistant that <a href="/2014/07/24/rultor-automated-merging.html">automates</a> release, merge, and deploy operations. Rultor keeps each conversation session with an end user (a.k.a. “talk”) in a DynamoDB record. There are multiple situations to handle in each talk; that’s why using multiple columns of a record is not really feasible. Instead, we’re keeping only a few parameters of each talk in record columns (like ID and name) and putting all the rest in a single XML column.</p><p>This is approximately how our DynamoDB table looks:</p><figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>+----+---------------+--------------------------------------+
| id | name          | xml                                  |
+----+---------------+--------------------------------------+
| 12 | jcabi-xml#54  | &lt;?xml version=&#39;1.0&#39;?&gt;                |
|    |               | &lt;talk public=&quot;true&quot;&gt;                 |
|    |               |   &lt;request id=&quot;e5f4b3&quot;&gt;...&lt;/request&gt; |
|    |               | &lt;/talk&gt;                              |
+----+---------------+--------------------------------------+
| 13 | jcabi-email#2 | &lt;?xml version=&#39;1.0&#39;?&gt;                |
|    |               | &lt;talk public=&quot;true&quot;&gt;                 |
|    |               |   &lt;daemon id=&quot;f787fe&quot;&gt;...&lt;/daemon&gt;   |
|    |               | &lt;/talk&gt;                              |
+----+---------------+--------------------------------------+</code></pre></figure><p>Once a user posts <code>@rultor status</code> into a GitHub ticket, Rultor has to answer with a full status report about the current talk. In order to create such a text answer (a regular user would not appreciate an XML response), we have to fetch that <code>xml</code> column from the necessary DynamoDB record and convert it to plain English text.</p><p>Here is how we’re doing that with the help of <a href="/2014/04/24/java-xml-parsing-and-traversing.html">jcabi-xml</a> and its class, <a href="http://xml.jcabi.com/apidocs-0.15/com/jcabi/xml/XSLDocument.html"><code>XSLDocument</code></a>.</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="n">String</span> <span class="n">xml</span> <span class="o">=</span> <span class="c1">// comes from DynamoDB</span>
<span class="kd">final</span> <span class="n">XSL</span> <span class="n">xsl</span> <span class="o">=</span> <span class="k">new</span> <span class="n">XSLDocument</span><span class="o">(</span>
  <span class="k">this</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="s">&quot;status.xsl&quot;</span><span class="o">)</span>
<span class="o">);</span>
<span class="kd">final</span> <span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="n">xsl</span><span class="o">.</span><span class="na">applyTo</span><span class="o">(</span><span class="n">xml</span><span class="o">);</span></code></pre></figure><p>That’s it. Now let’s see what’s there in that <code>status.xsl</code> file (this is just a skeleton of it; the full version is <a href="https://github.com/yegor256/rultor/blob/1.48/src/main/resources/com/rultor/agents/github/qtn/status.xsl">here</a>):</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;xsl:stylesheet</span> <span class="na">xmlns:xsl=</span><span class="s">&quot;http://www.w3.org/1999/XSL/Transform&quot;</span>
  <span class="na">version=</span><span class="s">&quot;2.0&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsl:output</span> <span class="na">method=</span><span class="s">&quot;text&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;xsl:template</span> <span class="na">match=</span><span class="s">&quot;/talk&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsl:text&gt;</span>Hi, here is your status report:<span class="nt">&lt;/xsl:text&gt;</span>
    ...
  <span class="nt">&lt;/xsl:template&gt;</span>
  <span class="nt">&lt;xsl:template</span> <span class="na">match=</span><span class="s">&quot;node()|@*&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xsl:copy&gt;</span>
      <span class="nt">&lt;xsl:apply-templates</span> <span class="na">select=</span><span class="s">&quot;node()|@*&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/xsl:copy&gt;</span>
  <span class="nt">&lt;/xsl:template&gt;</span>
<span class="nt">&lt;/xsl:stylesheet&gt;</span></code></pre></figure><p>It is good practice to create XSL documents only once per application run. We have a static utility method <a href="http://xml.jcabi.com/apidocs-0.15/com/jcabi/xml/XSLDocument.html#make%28java.io.InputStream%29"><code>XSLDocument.make()</code></a> for this:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">XSL</span> <span class="n">STYLESHEET</span> <span class="o">=</span> <span class="n">XSLDocument</span><span class="o">.</span><span class="na">make</span><span class="o">(</span>
    <span class="n">Foo</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="s">&quot;stylesheet.xsl&quot;</span><span class="o">)</span>
  <span class="o">);</span>
  <span class="kd">public</span> <span class="n">XML</span> <span class="nf">style</span><span class="o">(</span><span class="kd">final</span> <span class="n">XML</span> <span class="n">xml</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Foo</span><span class="o">.</span><span class="na">STYLESHEET</span><span class="o">.</span><span class="na">transform</span><span class="o">(</span><span class="n">xml</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></figure><p>Pay attention to the fact we’re using XSLT 2.0. Built-in Java implementation of XSLT doesn’t support version 2.0, and in order to make it work, we’re using these two Maven Saxon dependencies:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>net.sourceforge.saxon<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>saxon<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>9.1.0.8<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>net.sourceforge.saxon<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>saxon<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>9.1.0.8<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;classifier&gt;</span>xpath<span class="nt">&lt;/classifier&gt;</span>
  <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre></figure><p>All you need to do to start using <code>jcabi-xml</code> for XSL transformations is add this dependency to your <code>pom.xml</code>:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.jcabi<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>jcabi-xml<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre></figure><p>If you have any problems or suggestions, don’t hesitate to submit an issue to the GitHub <a href="https://github.com/jcabi/jcabi-xml/issues">issue tracker</a>.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?c998b88f617"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="&lt;p&gt;Look at GitHub RESTful API, for example. To get information about a repository you should make a GET request to &lt;a href=&quot;https://api.github.com/repos/yegor256/rultor&quot;&gt;api.github.com/repos/yegor256/rultor&lt;/a&gt;. In response, you will get a JSON document with all the details of the &lt;code&gt;yegor256/rultor&lt;/code&gt; repository. Try it, the URL doesn’t require any authentication.&lt;/p&gt; &lt;p&gt;To open the same repository in a nice HTML+CSS page, you should use a different URL: &lt;a href=&quot;https://github.com/yegor256/rultor&quot;&gt;github.com/yegor256/rultor&lt;/a&gt;. The URL is different, the server-side is definitely different, but the nature of the data is exactly the same. The only thing that changes is a representation layer.&lt;/p&gt; &lt;p&gt;In the first case, we get JSON; in the second—HTML.&lt;/p&gt; &lt;p&gt;How about combining them? How about using the same URL and the same server-side processing mechanism for both of them? How about shifting the whole rendering task to the client-side (the browser) and letting the server work solely with the data?&lt;/p&gt; &lt;!--more--&gt; &lt;figure class=&quot;jb_picture&quot;&gt;&lt;img itemprop=&quot;image&quot; alt=&quot;The Good, the Bad, The Wierd (2008) by Kim Jee-woon&quot; src=&quot;/images/2014/09/good_bad_weird.png&quot; longdesc=&quot;#a51703b7&quot; /&gt;&lt;figcaption id=&quot;a51703b7&quot;&gt;The Good, the Bad, The Wierd (2008) by Kim Jee-woon&lt;/figcaption&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;/2015/02/02/xsl-transformations-in-java.html&quot;&gt;XSLT&lt;/a&gt; is the technology that can help us do this. In &lt;a href=&quot;/2014/06/25/xml-and-xslt-in-browser.html&quot;&gt;XML+XSLT in a Browser&lt;/a&gt; I explained briefly how it works in a browser. In a nutshell, the server returns an XML with some data and a link to the XSL stylesheet. The stylesheet, being executed in a browser, converts XML to HTML. XSL language is as powerful as any other rendering engine, like JSP, JSF, Tiles, or what have you. Actually, it is much more powerful.&lt;/p&gt; &lt;p&gt;Using this approach we literally remove the entire rendering layer (“View” in the &lt;a href=&quot;/2016/12/13/mvc-vs-oop.html&quot;&gt;MVC paradigm&lt;/a&gt;) from the server and move it to the browser.&lt;/p&gt; &lt;p&gt;If we can make it possible, the web server will expose just a RESTful API, and every response page will have an XSL stylesheet attached. What do we gain? We’ll discuss later, at the end of the post. Now, let’s see what problems we will face:&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;JSON doesn’t have a rendering layer. There is no such thing as &lt;a href=&quot;/2015/11/16/json-vs-xml.html&quot;&gt;XSLT&lt;/a&gt; for JSON. So, we will have to forget about JSON and stay with XML only. For me, this sounds perfectly all right. Others don’t like XML and prefer to work with JSON only. Never understood them :)&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;XSLT 2.0 is not supported by all browsers. Even XSLT 1.0 is only supported by some of them. For example, Internet Explorer 8 doesn’t support XSLT at all.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Browsers support only &lt;code&gt;GET&lt;/code&gt; and &lt;code&gt;POST&lt;/code&gt; HTTP methods, while traditional RESTful API-s exploit also, at least, &lt;code&gt;PUT&lt;/code&gt; and &lt;code&gt;DELETE&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;p&gt;The first problem is not really a problem. It’s just a matter of taste (and level of education). The last two problems are much more serious. Let’s discuss them.&lt;/p&gt; &lt;h2 id=&quot;xsl-transformation-on-the-server&quot;&gt;XSL Transformation on the Server&lt;/h2&gt; &lt;p&gt;XSLT is not supported by some browsers. How do we solve this?&lt;/p&gt; &lt;p&gt;I think that the best approach is to parse the &lt;code&gt;User-Agent&lt;/code&gt; HTTP header in every request and make a guess, whether this particular version of the browser supports XSLT or not. It’s not so difficult to do, since this compatibility information is public.&lt;/p&gt; &lt;p&gt;If the browser doesn’t support XSLT, we can do the transformation on the server side. We already have the XML with data, generated by the server, and we already have the XSL attached to it. All we need to do is to apply the latter to the former and obtain an HTML page. Then, we return the HTML to the browser.&lt;/p&gt; &lt;p&gt;Besides that, we can also pay attention to the &lt;code&gt;Accept&lt;/code&gt; header. If it is set to &lt;code&gt;application/xml&lt;/code&gt; or &lt;code&gt;text/xml&lt;/code&gt;, we return XML, no matter what &lt;code&gt;User-Agent&lt;/code&gt; is saying. This means, basically, that some API client is talking to us, not a browser. And this client is not interested in HTML, but in pure data in XML format.&lt;/p&gt; &lt;h2 id=&quot;post-instead-of-put&quot;&gt;POST Instead of PUT&lt;/h2&gt; &lt;p&gt;There is no workaround for this. Browsers don’t know anything about &lt;code&gt;PUT&lt;/code&gt; or &lt;code&gt;DELETE&lt;/code&gt;. So, we should also forget them in our RESTful API-s. We should design our API using only two methods: &lt;code&gt;GET&lt;/code&gt; and &lt;code&gt;POST&lt;/code&gt;. Is this even possible? Yes. Why not? It won’t look as fancy as with all six methods (some API-s also use &lt;code&gt;OPTIONS&lt;/code&gt; and &lt;code&gt;HEAD&lt;/code&gt;), but it will work.&lt;/p&gt; &lt;h2 id=&quot;what-do-we-gain&quot;&gt;What Do We Gain?&lt;/h2&gt; &lt;p&gt;OK, here is the question—why do we need this? What’s wrong with the way most people work now? Why can’t we make a web site separate from the API? What benefits do we get if we combine them?&lt;/p&gt; &lt;p&gt;I’ve been combining them in all web applications I’ve worked with since 2011. And the biggest advantage I’m experiencing is avoiding code duplication.&lt;/p&gt; &lt;p&gt;It is obvious that in the server we don’t duplicate controllers (in the case of MVC). We have one layer of controllers, and they control both the API and the web site (since they are one thing now).&lt;/p&gt; &lt;p&gt;Avoiding code duplication is a very important achievement. Moreover, I believe that it is the most important target for any software project.&lt;/p&gt; &lt;p&gt;These small web apps work exactly as explained above: &lt;a href=&quot;http://www.s3auth.com&quot;&gt;s3auth.com&lt;/a&gt;, &lt;a href=&quot;http://www.stateful.co&quot;&gt;stateful.co&lt;/a&gt;, &lt;a href=&quot;http://www.bibrarian.com&quot;&gt;bibrarian.com&lt;/a&gt;. They are all open source, and you can see their source code in GitHub.&lt;/p&gt; " /> <meta name="keywords" content="next, path, output, content, previous, url, relative_path, id, collection, excerpt, draft, categories, layout, title, date, tags, description, keywords, image, jb_picture, slug, ext" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-09-09 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="RESTful API and a Web Site in the Same URL"/> <meta name="twitter:description" property="og:description" content="&lt;p&gt;Look at GitHub RESTful API, for example. To get information about a repository you should make a GET request to &lt;a href=&quot;https://api.github.com/repos/yegor256/rultor&quot;&gt;api.github.com/repos/yegor256/rultor&lt;/a&gt;. In response, you will get a JSON document with all the details of the &lt;code&gt;yegor256/rultor&lt;/code&gt; repository. Try it, the URL doesn’t require any authentication.&lt;/p&gt; &lt;p&gt;To open the same repository in a nice HTML+CSS page, you should use a different URL: &lt;a href=&quot;https://github.com/yegor256/rultor&quot;&gt;github.com/yegor256/rultor&lt;/a&gt;. The URL is different, the server-side is definitely different, but the nature of the data is exactly the same. The only thing that changes is a representation layer.&lt;/p&gt; &lt;p&gt;In the first case, we get JSON; in the second—HTML.&lt;/p&gt; &lt;p&gt;How about combining them? How about using the same URL and the same server-side processing mechanism for both of them? How about shifting the whole rendering task to the client-side (the browser) and letting the server work solely with the data?&lt;/p&gt; &lt;!--more--&gt; &lt;figure class=&quot;jb_picture&quot;&gt;&lt;img itemprop=&quot;image&quot; alt=&quot;The Good, the Bad, The Wierd (2008) by Kim Jee-woon&quot; src=&quot;/images/2014/09/good_bad_weird.png&quot; longdesc=&quot;#a51703b7&quot; /&gt;&lt;figcaption id=&quot;a51703b7&quot;&gt;The Good, the Bad, The Wierd (2008) by Kim Jee-woon&lt;/figcaption&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href=&quot;/2015/02/02/xsl-transformations-in-java.html&quot;&gt;XSLT&lt;/a&gt; is the technology that can help us do this. In &lt;a href=&quot;/2014/06/25/xml-and-xslt-in-browser.html&quot;&gt;XML+XSLT in a Browser&lt;/a&gt; I explained briefly how it works in a browser. In a nutshell, the server returns an XML with some data and a link to the XSL stylesheet. The stylesheet, being executed in a browser, converts XML to HTML. XSL language is as powerful as any other rendering engine, like JSP, JSF, Tiles, or what have you. Actually, it is much more powerful.&lt;/p&gt; &lt;p&gt;Using this approach we literally remove the entire rendering layer (“View” in the &lt;a href=&quot;/2016/12/13/mvc-vs-oop.html&quot;&gt;MVC paradigm&lt;/a&gt;) from the server and move it to the browser.&lt;/p&gt; &lt;p&gt;If we can make it possible, the web server will expose just a RESTful API, and every response page will have an XSL stylesheet attached. What do we gain? We’ll discuss later, at the end of the post. Now, let’s see what problems we will face:&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;JSON doesn’t have a rendering layer. There is no such thing as &lt;a href=&quot;/2015/11/16/json-vs-xml.html&quot;&gt;XSLT&lt;/a&gt; for JSON. So, we will have to forget about JSON and stay with XML only. For me, this sounds perfectly all right. Others don’t like XML and prefer to work with JSON only. Never understood them :)&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;XSLT 2.0 is not supported by all browsers. Even XSLT 1.0 is only supported by some of them. For example, Internet Explorer 8 doesn’t support XSLT at all.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Browsers support only &lt;code&gt;GET&lt;/code&gt; and &lt;code&gt;POST&lt;/code&gt; HTTP methods, while traditional RESTful API-s exploit also, at least, &lt;code&gt;PUT&lt;/code&gt; and &lt;code&gt;DELETE&lt;/code&gt;.&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;p&gt;The first problem is not really a problem. It’s just a matter of taste (and level of education). The last two problems are much more serious. Let’s discuss them.&lt;/p&gt; &lt;h2 id=&quot;xsl-transformation-on-the-server&quot;&gt;XSL Transformation on the Server&lt;/h2&gt; &lt;p&gt;XSLT is not supported by some browsers. How do we solve this?&lt;/p&gt; &lt;p&gt;I think that the best approach is to parse the &lt;code&gt;User-Agent&lt;/code&gt; HTTP header in every request and make a guess, whether this particular version of the browser supports XSLT or not. It’s not so difficult to do, since this compatibility information is public.&lt;/p&gt; &lt;p&gt;If the browser doesn’t support XSLT, we can do the transformation on the server side. We already have the XML with data, generated by the server, and we already have the XSL attached to it. All we need to do is to apply the latter to the former and obtain an HTML page. Then, we return the HTML to the browser.&lt;/p&gt; &lt;p&gt;Besides that, we can also pay attention to the &lt;code&gt;Accept&lt;/code&gt; header. If it is set to &lt;code&gt;application/xml&lt;/code&gt; or &lt;code&gt;text/xml&lt;/code&gt;, we return XML, no matter what &lt;code&gt;User-Agent&lt;/code&gt; is saying. This means, basically, that some API client is talking to us, not a browser. And this client is not interested in HTML, but in pure data in XML format.&lt;/p&gt; &lt;h2 id=&quot;post-instead-of-put&quot;&gt;POST Instead of PUT&lt;/h2&gt; &lt;p&gt;There is no workaround for this. Browsers don’t know anything about &lt;code&gt;PUT&lt;/code&gt; or &lt;code&gt;DELETE&lt;/code&gt;. So, we should also forget them in our RESTful API-s. We should design our API using only two methods: &lt;code&gt;GET&lt;/code&gt; and &lt;code&gt;POST&lt;/code&gt;. Is this even possible? Yes. Why not? It won’t look as fancy as with all six methods (some API-s also use &lt;code&gt;OPTIONS&lt;/code&gt; and &lt;code&gt;HEAD&lt;/code&gt;), but it will work.&lt;/p&gt; &lt;h2 id=&quot;what-do-we-gain&quot;&gt;What Do We Gain?&lt;/h2&gt; &lt;p&gt;OK, here is the question—why do we need this? What’s wrong with the way most people work now? Why can’t we make a web site separate from the API? What benefits do we get if we combine them?&lt;/p&gt; &lt;p&gt;I’ve been combining them in all web applications I’ve worked with since 2011. And the biggest advantage I’m experiencing is avoiding code duplication.&lt;/p&gt; &lt;p&gt;It is obvious that in the server we don’t duplicate controllers (in the case of MVC). We have one layer of controllers, and they control both the API and the web site (since they are one thing now).&lt;/p&gt; &lt;p&gt;Avoiding code duplication is a very important achievement. Moreover, I believe that it is the most important target for any software project.&lt;/p&gt; &lt;p&gt;These small web apps work exactly as explained above: &lt;a href=&quot;http://www.s3auth.com&quot;&gt;s3auth.com&lt;/a&gt;, &lt;a href=&quot;http://www.stateful.co&quot;&gt;stateful.co&lt;/a&gt;, &lt;a href=&quot;http://www.bibrarian.com&quot;&gt;bibrarian.com&lt;/a&gt;. They are all open source, and you can see their source code in GitHub.&lt;/p&gt; "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/09/09/restful-web-sites.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?c998b88f617"/> <link rel="apple-touch-icon" href="/favicon.ico?c998b88f617"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?c998b88f617"/> <link rel="stylesheet" href="/css/icons.css?c998b88f617"/> <link rel="canonical" href="https://www.yegor256.com/2014/09/09/restful-web-sites.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/09/09/restful-web-sites.amp.html" /> <title>RESTful API and a Web Site in the Same URL </title> <meta name='og:image' content='https://www.yegor256.com/images/2014/09/good_bad_weird.png'/><meta name='twitter:image' content='https://www.yegor256.com/images/2014/09/good_bad_weird.png'/><meta name='og:image:width' content='1280'/> <meta name='twitter:image:width' content='1280'/><meta name='og:image:height' content='640'/> <meta name='twitter:image:height' content='640'/><meta name='twitter:card' content='summary_large_image'/><meta name='twitter:image:alt' content='The Good, the Bad, The Wierd (2008) by Kim Jee-woon'/> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /2014/09/09/restful-web-sites.html><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /2014/09/09/restful-web-sites.html><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /2014/09/09/restful-web-sites.html><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /2014/09/09/restful-web-sites.html><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /2014/09/09/restful-web-sites.html><a href="/books.html" title="The books I wrote">Books</a></li> <li /2014/09/09/restful-web-sites.html><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /2014/09/09/restful-web-sites.html><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /2014/09/09/restful-web-sites.html class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /2014/09/09/restful-web-sites.html><a href="/award.html" title="Software quality award">Award</a></li> <li /2014/09/09/restful-web-sites.html><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /2014/09/09/restful-web-sites.html><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /2014/09/09/restful-web-sites.html><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/09/09/restful-web-sites.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2014/09/09/restful-web-sites.html</code></p><h1 itemprop="name headline mainEntityOfPage">RESTful API and a Web Site in the Same URL</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-09-09T00:00:00+00:00"> 9 September 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2014/09/09/restful-web-sites.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p>Look at GitHub RESTful API, for example. To get information about a repository you should make a GET request to <a href="https://api.github.com/repos/yegor256/rultor">api.github.com/repos/yegor256/rultor</a>. In response, you will get a JSON document with all the details of the <code>yegor256/rultor</code> repository. Try it, the URL doesn’t require any authentication.</p><p>To open the same repository in a nice HTML+CSS page, you should use a different URL: <a href="https://github.com/yegor256/rultor">github.com/yegor256/rultor</a>. The URL is different, the server-side is definitely different, but the nature of the data is exactly the same. The only thing that changes is a representation layer.</p><p>In the first case, we get JSON; in the second—HTML.</p><p>How about combining them? How about using the same URL and the same server-side processing mechanism for both of them? How about shifting the whole rendering task to the client-side (the browser) and letting the server work solely with the data?</p><figure class="jb_picture"><img itemprop="image" alt="The Good, the Bad, The Wierd (2008) by Kim Jee-woon" src="/images/2014/09/good_bad_weird.png" longdesc="#a51703b7" /><figcaption id="a51703b7">The Good, the Bad, The Wierd (2008) by Kim Jee-woon</figcaption></figure><p><a href="/2015/02/02/xsl-transformations-in-java.html">XSLT</a> is the technology that can help us do this. In <a href="/2014/06/25/xml-and-xslt-in-browser.html">XML+XSLT in a Browser</a> I explained briefly how it works in a browser. In a nutshell, the server returns an XML with some data and a link to the XSL stylesheet. The stylesheet, being executed in a browser, converts XML to HTML. XSL language is as powerful as any other rendering engine, like JSP, JSF, Tiles, or what have you. Actually, it is much more powerful.</p><p>Using this approach we literally remove the entire rendering layer (“View” in the <a href="/2016/12/13/mvc-vs-oop.html">MVC paradigm</a>) from the server and move it to the browser.</p><p>If we can make it possible, the web server will expose just a RESTful API, and every response page will have an XSL stylesheet attached. What do we gain? We’ll discuss later, at the end of the post. Now, let’s see what problems we will face:</p><ol> <li><p>JSON doesn’t have a rendering layer. There is no such thing as <a href="/2015/11/16/json-vs-xml.html">XSLT</a> for JSON. So, we will have to forget about JSON and stay with XML only. For me, this sounds perfectly all right. Others don’t like XML and prefer to work with JSON only. Never understood them :)</p></li> <li><p>XSLT 2.0 is not supported by all browsers. Even XSLT 1.0 is only supported by some of them. For example, Internet Explorer 8 doesn’t support XSLT at all.</p></li> <li><p>Browsers support only <code>GET</code> and <code>POST</code> HTTP methods, while traditional RESTful API-s exploit also, at least, <code>PUT</code> and <code>DELETE</code>.</p></li> </ol><p>The first problem is not really a problem. It’s just a matter of taste (and level of education). The last two problems are much more serious. Let’s discuss them.</p><h2 id="xsl-transformation-on-the-server">XSL Transformation on the Server</h2><p>XSLT is not supported by some browsers. How do we solve this?</p><p>I think that the best approach is to parse the <code>User-Agent</code> HTTP header in every request and make a guess, whether this particular version of the browser supports XSLT or not. It’s not so difficult to do, since this compatibility information is public.</p><p>If the browser doesn’t support XSLT, we can do the transformation on the server side. We already have the XML with data, generated by the server, and we already have the XSL attached to it. All we need to do is to apply the latter to the former and obtain an HTML page. Then, we return the HTML to the browser.</p><p>Besides that, we can also pay attention to the <code>Accept</code> header. If it is set to <code>application/xml</code> or <code>text/xml</code>, we return XML, no matter what <code>User-Agent</code> is saying. This means, basically, that some API client is talking to us, not a browser. And this client is not interested in HTML, but in pure data in XML format.</p><h2 id="post-instead-of-put">POST Instead of PUT</h2><p>There is no workaround for this. Browsers don’t know anything about <code>PUT</code> or <code>DELETE</code>. So, we should also forget them in our RESTful API-s. We should design our API using only two methods: <code>GET</code> and <code>POST</code>. Is this even possible? Yes. Why not? It won’t look as fancy as with all six methods (some API-s also use <code>OPTIONS</code> and <code>HEAD</code>), but it will work.</p><h2 id="what-do-we-gain">What Do We Gain?</h2><p>OK, here is the question—why do we need this? What’s wrong with the way most people work now? Why can’t we make a web site separate from the API? What benefits do we get if we combine them?</p><p>I’ve been combining them in all web applications I’ve worked with since 2011. And the biggest advantage I’m experiencing is avoiding code duplication.</p><p>It is obvious that in the server we don’t duplicate controllers (in the case of MVC). We have one layer of controllers, and they control both the API and the web site (since they are one thing now).</p><p>Avoiding code duplication is a very important achievement. Moreover, I believe that it is the most important target for any software project.</p><p>These small web apps work exactly as explained above: <a href="http://www.s3auth.com">s3auth.com</a>, <a href="http://www.stateful.co">stateful.co</a>, <a href="http://www.bibrarian.com">bibrarian.com</a>. They are all open source, and you can see their source code in GitHub.</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/09/09/restful-web-sites.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/09/09/restful-web-sites.html&amp;text=RESTful+API+and+a+Web+Site+in+the+Same+URL" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/09/09/restful-web-sites.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/09/09/restful-web-sites.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/09/09/restful-web-sites.html%3F2014-36&amp;title=RESTful+API+and+a+Web+Site+in+the+Same+URL" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/09/09/restful-web-sites.html%3F2014-36&amp;t=RESTful+API+and+a+Web+Site+in+the+Same+URL" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p>Look at GitHub RESTful API, for example. To get information about a repository you should make a GET request to <a href="https://api.github.com/repos/yegor256/rultor">api.github.com/repos/yegor256/rultor</a>. In response, you will get a JSON document with all the details of the <code>yegor256/rultor</code> repository. Try it, the URL doesn’t require any authentication.</p><p>To open the same repository in a nice HTML+CSS page, you should use a different URL: <a href="https://github.com/yegor256/rultor">github.com/yegor256/rultor</a>. The URL is different, the server-side is definitely different, but the nature of the data is exactly the same. The only thing that changes is a representation layer.</p><p>In the first case, we get JSON; in the second—HTML.</p><p>How about combining them? How about using the same URL and the same server-side processing mechanism for both of them? How about shifting the whole rendering task to the client-side (the browser) and letting the server work solely with the data?</p><figure class="jb_picture"><img itemprop="image" alt="The Good, the Bad, The Wierd (2008) by Kim Jee-woon" src="/images/2014/09/good_bad_weird.png" longdesc="#a51703b7" /><figcaption id="a51703b7">The Good, the Bad, The Wierd (2008) by Kim Jee-woon</figcaption></figure><p><a href="/2015/02/02/xsl-transformations-in-java.html">XSLT</a> is the technology that can help us do this. In <a href="/2014/06/25/xml-and-xslt-in-browser.html">XML+XSLT in a Browser</a> I explained briefly how it works in a browser. In a nutshell, the server returns an XML with some data and a link to the XSL stylesheet. The stylesheet, being executed in a browser, converts XML to HTML. XSL language is as powerful as any other rendering engine, like JSP, JSF, Tiles, or what have you. Actually, it is much more powerful.</p><p>Using this approach we literally remove the entire rendering layer (“View” in the <a href="/2016/12/13/mvc-vs-oop.html">MVC paradigm</a>) from the server and move it to the browser.</p><p>If we can make it possible, the web server will expose just a RESTful API, and every response page will have an XSL stylesheet attached. What do we gain? We’ll discuss later, at the end of the post. Now, let’s see what problems we will face:</p><ol> <li><p>JSON doesn’t have a rendering layer. There is no such thing as <a href="/2015/11/16/json-vs-xml.html">XSLT</a> for JSON. So, we will have to forget about JSON and stay with XML only. For me, this sounds perfectly all right. Others don’t like XML and prefer to work with JSON only. Never understood them :)</p></li> <li><p>XSLT 2.0 is not supported by all browsers. Even XSLT 1.0 is only supported by some of them. For example, Internet Explorer 8 doesn’t support XSLT at all.</p></li> <li><p>Browsers support only <code>GET</code> and <code>POST</code> HTTP methods, while traditional RESTful API-s exploit also, at least, <code>PUT</code> and <code>DELETE</code>.</p></li> </ol><p>The first problem is not really a problem. It’s just a matter of taste (and level of education). The last two problems are much more serious. Let’s discuss them.</p><h2 id="xsl-transformation-on-the-server">XSL Transformation on the Server</h2><p>XSLT is not supported by some browsers. How do we solve this?</p><p>I think that the best approach is to parse the <code>User-Agent</code> HTTP header in every request and make a guess, whether this particular version of the browser supports XSLT or not. It’s not so difficult to do, since this compatibility information is public.</p><p>If the browser doesn’t support XSLT, we can do the transformation on the server side. We already have the XML with data, generated by the server, and we already have the XSL attached to it. All we need to do is to apply the latter to the former and obtain an HTML page. Then, we return the HTML to the browser.</p><p>Besides that, we can also pay attention to the <code>Accept</code> header. If it is set to <code>application/xml</code> or <code>text/xml</code>, we return XML, no matter what <code>User-Agent</code> is saying. This means, basically, that some API client is talking to us, not a browser. And this client is not interested in HTML, but in pure data in XML format.</p><h2 id="post-instead-of-put">POST Instead of PUT</h2><p>There is no workaround for this. Browsers don’t know anything about <code>PUT</code> or <code>DELETE</code>. So, we should also forget them in our RESTful API-s. We should design our API using only two methods: <code>GET</code> and <code>POST</code>. Is this even possible? Yes. Why not? It won’t look as fancy as with all six methods (some API-s also use <code>OPTIONS</code> and <code>HEAD</code>), but it will work.</p><h2 id="what-do-we-gain">What Do We Gain?</h2><p>OK, here is the question—why do we need this? What’s wrong with the way most people work now? Why can’t we make a web site separate from the API? What benefits do we get if we combine them?</p><p>I’ve been combining them in all web applications I’ve worked with since 2011. And the biggest advantage I’m experiencing is avoiding code duplication.</p><p>It is obvious that in the server we don’t duplicate controllers (in the case of MVC). We have one layer of controllers, and they control both the API and the web site (since they are one thing now).</p><p>Avoiding code duplication is a very important achievement. Moreover, I believe that it is the most important target for any software project.</p><p>These small web apps work exactly as explained above: <a href="http://www.s3auth.com">s3auth.com</a>, <a href="http://www.stateful.co">stateful.co</a>, <a href="http://www.bibrarian.com">bibrarian.com</a>. They are all open source, and you can see their source code in GitHub.</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?c998b88f617"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Separation_of_presentation_and_content&quot;&gt;Separating data and their presentation&lt;/a&gt; is a great concept. Take HTML and CSS for example. HTML is supposed to have pure data and CSS is supposed to format that data in order to make it readable by a human. Years ago, that was probably the intention of HTML/CSS, but in reality it doesn’t work like that. Mostly because CSS is not powerful enough.&lt;/p&gt; &lt;p&gt;We still have to format our data using HTML tags, while &lt;a href=&quot;/2014/06/26/sass-in-java-webapp.html&quot;&gt;CSS&lt;/a&gt; can help slightly with positioning and decorating.&lt;/p&gt; &lt;p&gt;On the other hand, XML with &lt;a href=&quot;http://en.wikipedia.org/wiki/XSLT&quot;&gt;XSLT&lt;/a&gt; implements perfectly the idea of separating data and presentation. XML documents, like HTML, are supposed to contain data only without any information about positioning or formatting. XSL stylesheets position and decorate the data. XSL is a much more powerful language. That’s why it’s possible to avoid any formatting inside XML.&lt;/p&gt; &lt;p&gt;The latest versions of Chrome, Safari, Firefox and IE all support this mechanism. When a browser retrieves an XML document from a server, and the document has an XSL stylesheet &lt;a href=&quot;http://www.w3.org/TR/xml-stylesheet/&quot;&gt;associated&lt;/a&gt; with it—the browser transforms XML into HTML on-fly.&lt;/p&gt; &lt;!--more--&gt; &lt;h2 id=&quot;working-example&quot;&gt;Working Example&lt;/h2&gt; &lt;p&gt;Let’s review a simple Java web application that works this way. It is using &lt;a href=&quot;http://www.takes.org&quot;&gt;Takes Framework&lt;/a&gt; that makes this mechanism possible. In the next post, I’ll explain how ReXSL works. For now, though, let’s focus on the idea of delivering bare data in XML and formatting it with an XSL stylesheet.&lt;/p&gt; &lt;p&gt;Open &lt;a href=&quot;http://www.stateful.co&quot;&gt;http://www.stateful.co&lt;/a&gt;—it is a collection of stateful web primitives, explained in the &lt;a href=&quot;/2014/05/18/cloud-autoincrement-counters.html&quot;&gt;Atomic Counters at Stateful.co&lt;/a&gt; article.&lt;/p&gt; &lt;p&gt;Open it in Chrome or Safari. When you do, you should see a normal web page with a logo, some text, some links, a footer, etc. Now check its sources (I assume you know how to do this).&lt;/p&gt; &lt;p&gt;This is approximately what you will see (I assume you understand XML, if not, start learning it immediately):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?xml-stylesheet type=&amp;#39;text/xsl&amp;#39; href=&amp;#39;/xsl/index.xsl&amp;#39;?&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;page&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;date=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;2014-06-15T15:30:49.521Z&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;ip=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;10.168.29.135&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;menu&amp;gt;&lt;/span&gt;home&lt;span class=&quot;nt&quot;&gt;&amp;lt;/menu&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;documentation&amp;gt;&lt;/span&gt;.. some text here ..&lt;span class=&quot;nt&quot;&gt;&amp;lt;/documentation&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;1.4&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;revision&amp;gt;&lt;/span&gt;5c7b5af&lt;span class=&quot;nt&quot;&gt;&amp;lt;/revision&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;date&amp;gt;&lt;/span&gt;2014-05-29 07:58&lt;span class=&quot;nt&quot;&gt;&amp;lt;/date&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;links&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;...&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;rexsl:google&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;text/xml&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;...&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;rexsl:github&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;text/xml&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;...&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;rexsl:facebook&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;text/xml&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/links&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;millis&amp;gt;&lt;/span&gt;70&lt;span class=&quot;nt&quot;&gt;&amp;lt;/millis&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/page&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;As you see, it is a proper XML document with attributes, elements and data. It contains absolutely no information about how its elements have to be presented to an end-user. Actually, this document is more suitable for machine parsing instead of reading by a human.&lt;/p&gt; &lt;p&gt;The document contains data, which is important for its requester. It’s up to the requester on how to render the data or to not render it at all.&lt;/p&gt; &lt;p&gt;Its second line &lt;a href=&quot;http://www.w3.org/TR/xml-stylesheet/&quot;&gt;associates&lt;/a&gt; the document with the XSL stylesheet &lt;code&gt;/xsl/index.xsl&lt;/code&gt; that is loaded by the browser separately:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?xml-stylesheet type=&amp;#39;text/xsl&amp;#39; href=&amp;#39;/xsl/index.xsl&amp;#39;?&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Open developer tools in Chrome and you will see that right after the page is loaded, the browser loads the XSL stylesheet and then all other resources including a few CSS stylesheets, jQuery and an SVG logo:&lt;/p&gt; &lt;figure class=&quot;unprintable&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/06/xslt-loading-order-in-chrome.png&quot; itemprop=&quot;image&quot; style=&quot;width:600px;max-width:100%;&quot; alt=&quot;The figure&quot; /&gt;&lt;/figure&gt; &lt;p&gt;&lt;code&gt;index.xsl&lt;/code&gt; includes &lt;code&gt;layout.xsl&lt;/code&gt;, that’s why it is loaded right after.&lt;/p&gt; &lt;p&gt;Let’s consider an example of &lt;code&gt;index.xsl&lt;/code&gt; (in reality it is much more complex, check &lt;a href=&quot;https://github.com/sttc/stateful/blob/master/src/main/webapp/xsl/layout.xsl&quot;&gt;&lt;code&gt;layout.xsl&lt;/code&gt;&lt;/a&gt;. For example:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:stylesheet&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;version=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;2.0&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns:xsl=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;http://www.w3.org/1999/XSL/Transform&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;http://www.w3.org/1999/xhtml&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:template&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;match=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;page&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt; Current version of the application is &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:value-of&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;select=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;version/name&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/xsl:template&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/xsl:stylesheet&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;I think it’s obvious how the HTML page will look like after applying this XSL stylesheet to our XML document.&lt;/p&gt; &lt;p&gt;For me, this XSL looks clean and easy to understand. However, I often hear people say that XSLT is a hard-to-understand programming language. I don’t find it hard to understand at all. Of course, I’m not using all of its features. But, for simple page rendering, all I need to know are a few simple commands and the principle of XML transformation.&lt;/p&gt; &lt;h2 id=&quot;why-not-a-templating-engine&quot;&gt;Why Not a Templating Engine?&lt;/h2&gt; &lt;p&gt;Now, why is this approach better than all that widely use Java templating engines, including &lt;a href=&quot;http://en.wikipedia.org/wiki/JavaServer_Pages&quot;&gt;JSP&lt;/a&gt;, &lt;a href=&quot;http://en.wikipedia.org/wiki/JavaServer_Faces&quot;&gt;JSF&lt;/a&gt;, &lt;a href=&quot;http://velocity.apache.org/engine/devel/&quot;&gt;Velocity&lt;/a&gt;, &lt;a href=&quot;http://freemarker.org/&quot;&gt;FreeMarker&lt;/a&gt;, &lt;a href=&quot;http://tiles.apache.org/&quot;&gt;Tiles&lt;/a&gt;, etc?&lt;/p&gt; &lt;p&gt;Well, I see a number of reasons. But, the most important are:&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Web UI and API are same pages&lt;/strong&gt;. There is no need to develop separate pages for RESTful API—Web user interface, being accessed by a computer, is an API. In my experience, this leads to massive avoidance of code duplication.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;XSL is testable by itself without a server&lt;/strong&gt;. In order to test how our web site will look with certain data, we just create a new XML document with necessary test data, associate it with an XSL and open it in a browser. We can also modify XML and refresh the page in browser. This makes the work of HTML/CSS designer much easier and independent of programmers.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;XSL is a powerful functional language&lt;/strong&gt;. Compared with all other templating engines, which look mostly like workarounds, XSL is a complete and well-designed environment. Writing XSL (after you get used to its syntax and programming concepts) is a pleasure in itself. You’re not injecting instructions into a HTML document (like in JSP and all others). Instead, you are programming transformation of data into presentation—a different mindset and much better feeling.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;XML output is perfectly testable&lt;/strong&gt;. A controller in MVC that generates an XML document with all data required for the XSL stylesheet can easily be tested in a single unit test using simple XPath expressions. Testing of a controller that injects data into a templating engine is a much more complex operation—even impossible sometimes. I’m also writing in PHP and Ruby. They have exactly the same problems—even though their templating engines are much more powerful due to the interpretation nature of the languages.&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;is-it-fully-supported&quot;&gt;Is It Fully Supported?&lt;/h2&gt; &lt;p&gt;Everything would be great if all browsers would support XML+XSL rendering. However, this is far from being true. Only the latest versions of modern browsers support XSL. Check &lt;a href=&quot;http://greenbytes.de/tech/tc/xslt/&quot;&gt;this comparison&lt;/a&gt; done by Julian Reschke. Besides that, XSLT 2.0 is &lt;a href=&quot;http://stackoverflow.com/questions/6282340/which-browsers-support-xslt-2-0-already&quot;&gt;not supported&lt;/a&gt; at all.&lt;/p&gt; &lt;p&gt;There is a workaround, though. We can understand which browser is making a request (via its &lt;a href=&quot;http://en.wikipedia.org/wiki/User_agent&quot;&gt;&lt;code&gt;User-Agent&lt;/code&gt;&lt;/a&gt; HTTP header) and transform XML into HTML on the server side. Thus, for modern browsers that support XSL, we will deliver XML and for all others—HTML.&lt;/p&gt; &lt;p&gt;This is exactly how &lt;a href=&quot;https://github.com/yegor256/rexsl&quot;&gt;ReXSL framework&lt;/a&gt; works. Open &lt;a href=&quot;http://www.stateful.co&quot;&gt;http://www.stateful.co&lt;/a&gt; in Internet Explorer and you will see an HTML document, not an XML document as is the case with Chrome.&lt;/p&gt; &lt;p&gt;BTW, see how all this is implemented: &lt;a href=&quot;/2015/06/25/xml-data-xsl-views-takes-framework.html&quot;&gt;XML Data and XSL Views in Takes Framework&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Read this one, it continues the discussion of this subject: &lt;a href=&quot;/2014/09/09/restful-web-sites.html&quot;&gt;RESTful API and a Web Site in the Same URL&lt;/a&gt;&lt;/p&gt; " /> <meta name="keywords" content="next, path, output, content, previous, url, relative_path, id, collection, excerpt, draft, categories, layout, title, date, tags, description, keywords, slug, ext" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-06-25 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="XML+XSLT in a Browser"/> <meta name="twitter:description" property="og:description" content="&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Separation_of_presentation_and_content&quot;&gt;Separating data and their presentation&lt;/a&gt; is a great concept. Take HTML and CSS for example. HTML is supposed to have pure data and CSS is supposed to format that data in order to make it readable by a human. Years ago, that was probably the intention of HTML/CSS, but in reality it doesn’t work like that. Mostly because CSS is not powerful enough.&lt;/p&gt; &lt;p&gt;We still have to format our data using HTML tags, while &lt;a href=&quot;/2014/06/26/sass-in-java-webapp.html&quot;&gt;CSS&lt;/a&gt; can help slightly with positioning and decorating.&lt;/p&gt; &lt;p&gt;On the other hand, XML with &lt;a href=&quot;http://en.wikipedia.org/wiki/XSLT&quot;&gt;XSLT&lt;/a&gt; implements perfectly the idea of separating data and presentation. XML documents, like HTML, are supposed to contain data only without any information about positioning or formatting. XSL stylesheets position and decorate the data. XSL is a much more powerful language. That’s why it’s possible to avoid any formatting inside XML.&lt;/p&gt; &lt;p&gt;The latest versions of Chrome, Safari, Firefox and IE all support this mechanism. When a browser retrieves an XML document from a server, and the document has an XSL stylesheet &lt;a href=&quot;http://www.w3.org/TR/xml-stylesheet/&quot;&gt;associated&lt;/a&gt; with it—the browser transforms XML into HTML on-fly.&lt;/p&gt; &lt;!--more--&gt; &lt;h2 id=&quot;working-example&quot;&gt;Working Example&lt;/h2&gt; &lt;p&gt;Let’s review a simple Java web application that works this way. It is using &lt;a href=&quot;http://www.takes.org&quot;&gt;Takes Framework&lt;/a&gt; that makes this mechanism possible. In the next post, I’ll explain how ReXSL works. For now, though, let’s focus on the idea of delivering bare data in XML and formatting it with an XSL stylesheet.&lt;/p&gt; &lt;p&gt;Open &lt;a href=&quot;http://www.stateful.co&quot;&gt;http://www.stateful.co&lt;/a&gt;—it is a collection of stateful web primitives, explained in the &lt;a href=&quot;/2014/05/18/cloud-autoincrement-counters.html&quot;&gt;Atomic Counters at Stateful.co&lt;/a&gt; article.&lt;/p&gt; &lt;p&gt;Open it in Chrome or Safari. When you do, you should see a normal web page with a logo, some text, some links, a footer, etc. Now check its sources (I assume you know how to do this).&lt;/p&gt; &lt;p&gt;This is approximately what you will see (I assume you understand XML, if not, start learning it immediately):&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?xml-stylesheet type=&amp;#39;text/xsl&amp;#39; href=&amp;#39;/xsl/index.xsl&amp;#39;?&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;page&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;date=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;2014-06-15T15:30:49.521Z&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;ip=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;10.168.29.135&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;menu&amp;gt;&lt;/span&gt;home&lt;span class=&quot;nt&quot;&gt;&amp;lt;/menu&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;documentation&amp;gt;&lt;/span&gt;.. some text here ..&lt;span class=&quot;nt&quot;&gt;&amp;lt;/documentation&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;1.4&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;revision&amp;gt;&lt;/span&gt;5c7b5af&lt;span class=&quot;nt&quot;&gt;&amp;lt;/revision&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;date&amp;gt;&lt;/span&gt;2014-05-29 07:58&lt;span class=&quot;nt&quot;&gt;&amp;lt;/date&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;links&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;...&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;rexsl:google&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;text/xml&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;...&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;rexsl:github&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;text/xml&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;...&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;rexsl:facebook&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;text/xml&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/links&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;millis&amp;gt;&lt;/span&gt;70&lt;span class=&quot;nt&quot;&gt;&amp;lt;/millis&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/page&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;As you see, it is a proper XML document with attributes, elements and data. It contains absolutely no information about how its elements have to be presented to an end-user. Actually, this document is more suitable for machine parsing instead of reading by a human.&lt;/p&gt; &lt;p&gt;The document contains data, which is important for its requester. It’s up to the requester on how to render the data or to not render it at all.&lt;/p&gt; &lt;p&gt;Its second line &lt;a href=&quot;http://www.w3.org/TR/xml-stylesheet/&quot;&gt;associates&lt;/a&gt; the document with the XSL stylesheet &lt;code&gt;/xsl/index.xsl&lt;/code&gt; that is loaded by the browser separately:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?xml-stylesheet type=&amp;#39;text/xsl&amp;#39; href=&amp;#39;/xsl/index.xsl&amp;#39;?&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;Open developer tools in Chrome and you will see that right after the page is loaded, the browser loads the XSL stylesheet and then all other resources including a few CSS stylesheets, jQuery and an SVG logo:&lt;/p&gt; &lt;figure class=&quot;unprintable&quot;&gt;&lt;img src=&quot;https://www.yegor256.com/images/2014/06/xslt-loading-order-in-chrome.png&quot; itemprop=&quot;image&quot; style=&quot;width:600px;max-width:100%;&quot; alt=&quot;The figure&quot; /&gt;&lt;/figure&gt; &lt;p&gt;&lt;code&gt;index.xsl&lt;/code&gt; includes &lt;code&gt;layout.xsl&lt;/code&gt;, that’s why it is loaded right after.&lt;/p&gt; &lt;p&gt;Let’s consider an example of &lt;code&gt;index.xsl&lt;/code&gt; (in reality it is much more complex, check &lt;a href=&quot;https://github.com/sttc/stateful/blob/master/src/main/webapp/xsl/layout.xsl&quot;&gt;&lt;code&gt;layout.xsl&lt;/code&gt;&lt;/a&gt;. For example:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:stylesheet&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;version=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;2.0&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns:xsl=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;http://www.w3.org/1999/XSL/Transform&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;http://www.w3.org/1999/xhtml&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:template&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;match=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;page&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt; Current version of the application is &lt;span class=&quot;nt&quot;&gt;&amp;lt;xsl:value-of&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;select=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;version/name&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/xsl:template&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/xsl:stylesheet&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;I think it’s obvious how the HTML page will look like after applying this XSL stylesheet to our XML document.&lt;/p&gt; &lt;p&gt;For me, this XSL looks clean and easy to understand. However, I often hear people say that XSLT is a hard-to-understand programming language. I don’t find it hard to understand at all. Of course, I’m not using all of its features. But, for simple page rendering, all I need to know are a few simple commands and the principle of XML transformation.&lt;/p&gt; &lt;h2 id=&quot;why-not-a-templating-engine&quot;&gt;Why Not a Templating Engine?&lt;/h2&gt; &lt;p&gt;Now, why is this approach better than all that widely use Java templating engines, including &lt;a href=&quot;http://en.wikipedia.org/wiki/JavaServer_Pages&quot;&gt;JSP&lt;/a&gt;, &lt;a href=&quot;http://en.wikipedia.org/wiki/JavaServer_Faces&quot;&gt;JSF&lt;/a&gt;, &lt;a href=&quot;http://velocity.apache.org/engine/devel/&quot;&gt;Velocity&lt;/a&gt;, &lt;a href=&quot;http://freemarker.org/&quot;&gt;FreeMarker&lt;/a&gt;, &lt;a href=&quot;http://tiles.apache.org/&quot;&gt;Tiles&lt;/a&gt;, etc?&lt;/p&gt; &lt;p&gt;Well, I see a number of reasons. But, the most important are:&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;Web UI and API are same pages&lt;/strong&gt;. There is no need to develop separate pages for RESTful API—Web user interface, being accessed by a computer, is an API. In my experience, this leads to massive avoidance of code duplication.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;XSL is testable by itself without a server&lt;/strong&gt;. In order to test how our web site will look with certain data, we just create a new XML document with necessary test data, associate it with an XSL and open it in a browser. We can also modify XML and refresh the page in browser. This makes the work of HTML/CSS designer much easier and independent of programmers.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;XSL is a powerful functional language&lt;/strong&gt;. Compared with all other templating engines, which look mostly like workarounds, XSL is a complete and well-designed environment. Writing XSL (after you get used to its syntax and programming concepts) is a pleasure in itself. You’re not injecting instructions into a HTML document (like in JSP and all others). Instead, you are programming transformation of data into presentation—a different mindset and much better feeling.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;&lt;strong&gt;XML output is perfectly testable&lt;/strong&gt;. A controller in MVC that generates an XML document with all data required for the XSL stylesheet can easily be tested in a single unit test using simple XPath expressions. Testing of a controller that injects data into a templating engine is a much more complex operation—even impossible sometimes. I’m also writing in PHP and Ruby. They have exactly the same problems—even though their templating engines are much more powerful due to the interpretation nature of the languages.&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;h2 id=&quot;is-it-fully-supported&quot;&gt;Is It Fully Supported?&lt;/h2&gt; &lt;p&gt;Everything would be great if all browsers would support XML+XSL rendering. However, this is far from being true. Only the latest versions of modern browsers support XSL. Check &lt;a href=&quot;http://greenbytes.de/tech/tc/xslt/&quot;&gt;this comparison&lt;/a&gt; done by Julian Reschke. Besides that, XSLT 2.0 is &lt;a href=&quot;http://stackoverflow.com/questions/6282340/which-browsers-support-xslt-2-0-already&quot;&gt;not supported&lt;/a&gt; at all.&lt;/p&gt; &lt;p&gt;There is a workaround, though. We can understand which browser is making a request (via its &lt;a href=&quot;http://en.wikipedia.org/wiki/User_agent&quot;&gt;&lt;code&gt;User-Agent&lt;/code&gt;&lt;/a&gt; HTTP header) and transform XML into HTML on the server side. Thus, for modern browsers that support XSL, we will deliver XML and for all others—HTML.&lt;/p&gt; &lt;p&gt;This is exactly how &lt;a href=&quot;https://github.com/yegor256/rexsl&quot;&gt;ReXSL framework&lt;/a&gt; works. Open &lt;a href=&quot;http://www.stateful.co&quot;&gt;http://www.stateful.co&lt;/a&gt; in Internet Explorer and you will see an HTML document, not an XML document as is the case with Chrome.&lt;/p&gt; &lt;p&gt;BTW, see how all this is implemented: &lt;a href=&quot;/2015/06/25/xml-data-xsl-views-takes-framework.html&quot;&gt;XML Data and XSL Views in Takes Framework&lt;/a&gt;.&lt;/p&gt; &lt;p&gt;Read this one, it continues the discussion of this subject: &lt;a href=&quot;/2014/09/09/restful-web-sites.html&quot;&gt;RESTful API and a Web Site in the Same URL&lt;/a&gt;&lt;/p&gt; "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?c998b88f617"/> <link rel="apple-touch-icon" href="/favicon.ico?c998b88f617"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?c998b88f617"/> <link rel="stylesheet" href="/css/icons.css?c998b88f617"/> <link rel="canonical" href="https://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.amp.html" /> <title>XML+XSLT in a Browser </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /2014/06/25/xml-and-xslt-in-browser.html><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /2014/06/25/xml-and-xslt-in-browser.html><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /2014/06/25/xml-and-xslt-in-browser.html><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /2014/06/25/xml-and-xslt-in-browser.html><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /2014/06/25/xml-and-xslt-in-browser.html><a href="/books.html" title="The books I wrote">Books</a></li> <li /2014/06/25/xml-and-xslt-in-browser.html><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /2014/06/25/xml-and-xslt-in-browser.html><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /2014/06/25/xml-and-xslt-in-browser.html class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /2014/06/25/xml-and-xslt-in-browser.html><a href="/award.html" title="Software quality award">Award</a></li> <li /2014/06/25/xml-and-xslt-in-browser.html><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /2014/06/25/xml-and-xslt-in-browser.html><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /2014/06/25/xml-and-xslt-in-browser.html><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html</code></p><h1 itemprop="name headline mainEntityOfPage">XML+XSLT in a Browser</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-06-25T00:00:00+00:00"> 25 June 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><p><a href="http://en.wikipedia.org/wiki/Separation_of_presentation_and_content">Separating data and their presentation</a> is a great concept. Take HTML and CSS for example. HTML is supposed to have pure data and CSS is supposed to format that data in order to make it readable by a human. Years ago, that was probably the intention of HTML/CSS, but in reality it doesn’t work like that. Mostly because CSS is not powerful enough.</p><p>We still have to format our data using HTML tags, while <a href="/2014/06/26/sass-in-java-webapp.html">CSS</a> can help slightly with positioning and decorating.</p><p>On the other hand, XML with <a href="http://en.wikipedia.org/wiki/XSLT">XSLT</a> implements perfectly the idea of separating data and presentation. XML documents, like HTML, are supposed to contain data only without any information about positioning or formatting. XSL stylesheets position and decorate the data. XSL is a much more powerful language. That’s why it’s possible to avoid any formatting inside XML.</p><p>The latest versions of Chrome, Safari, Firefox and IE all support this mechanism. When a browser retrieves an XML document from a server, and the document has an XSL stylesheet <a href="http://www.w3.org/TR/xml-stylesheet/">associated</a> with it—the browser transforms XML into HTML on-fly.</p><h2 id="working-example">Working Example</h2><p>Let’s review a simple Java web application that works this way. It is using <a href="http://www.takes.org">Takes Framework</a> that makes this mechanism possible. In the next post, I’ll explain how ReXSL works. For now, though, let’s focus on the idea of delivering bare data in XML and formatting it with an XSL stylesheet.</p><p>Open <a href="http://www.stateful.co">http://www.stateful.co</a>—it is a collection of stateful web primitives, explained in the <a href="/2014/05/18/cloud-autoincrement-counters.html">Atomic Counters at Stateful.co</a> article.</p><p>Open it in Chrome or Safari. When you do, you should see a normal web page with a logo, some text, some links, a footer, etc. Now check its sources (I assume you know how to do this).</p><p>This is approximately what you will see (I assume you understand XML, if not, start learning it immediately):</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="cp">&lt;?xml-stylesheet type=&#39;text/xsl&#39; href=&#39;/xsl/index.xsl&#39;?&gt;</span>
<span class="nt">&lt;page</span> <span class="na">date=</span><span class="s">&quot;2014-06-15T15:30:49.521Z&quot;</span> <span class="na">ip=</span><span class="s">&quot;10.168.29.135&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;menu&gt;</span>home<span class="nt">&lt;/menu&gt;</span>
  <span class="nt">&lt;documentation&gt;</span>.. some text here ..<span class="nt">&lt;/documentation&gt;</span>
  <span class="nt">&lt;version&gt;</span>
    <span class="nt">&lt;name&gt;</span>1.4<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;revision&gt;</span>5c7b5af<span class="nt">&lt;/revision&gt;</span>
    <span class="nt">&lt;date&gt;</span>2014-05-29 07:58<span class="nt">&lt;/date&gt;</span>
  <span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;links&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;...&quot;</span> <span class="na">rel=</span><span class="s">&quot;rexsl:google&quot;</span> <span class="na">type=</span><span class="s">&quot;text/xml&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;...&quot;</span> <span class="na">rel=</span><span class="s">&quot;rexsl:github&quot;</span> <span class="na">type=</span><span class="s">&quot;text/xml&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;...&quot;</span> <span class="na">rel=</span><span class="s">&quot;rexsl:facebook&quot;</span> <span class="na">type=</span><span class="s">&quot;text/xml&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/links&gt;</span>
  <span class="nt">&lt;millis&gt;</span>70<span class="nt">&lt;/millis&gt;</span>
<span class="nt">&lt;/page&gt;</span></code></pre></figure><p>As you see, it is a proper XML document with attributes, elements and data. It contains absolutely no information about how its elements have to be presented to an end-user. Actually, this document is more suitable for machine parsing instead of reading by a human.</p><p>The document contains data, which is important for its requester. It’s up to the requester on how to render the data or to not render it at all.</p><p>Its second line <a href="http://www.w3.org/TR/xml-stylesheet/">associates</a> the document with the XSL stylesheet <code>/xsl/index.xsl</code> that is loaded by the browser separately:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="cp">&lt;?xml-stylesheet type=&#39;text/xsl&#39; href=&#39;/xsl/index.xsl&#39;?&gt;</span></code></pre></figure><p>Open developer tools in Chrome and you will see that right after the page is loaded, the browser loads the XSL stylesheet and then all other resources including a few CSS stylesheets, jQuery and an SVG logo:</p><figure class="unprintable"><img src="https://www.yegor256.com/images/2014/06/xslt-loading-order-in-chrome.png" itemprop="image" style="width:600px;max-width:100%;" alt="The figure" /></figure><p><code>index.xsl</code> includes <code>layout.xsl</code>, that’s why it is loaded right after.</p><p>Let’s consider an example of <code>index.xsl</code> (in reality it is much more complex, check <a href="https://github.com/sttc/stateful/blob/master/src/main/webapp/xsl/layout.xsl"><code>layout.xsl</code></a>. For example:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;xsl:stylesheet</span> <span class="na">version=</span><span class="s">&quot;2.0&quot;</span>
  <span class="na">xmlns:xsl=</span><span class="s">&quot;http://www.w3.org/1999/XSL/Transform&quot;</span>
  <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsl:template</span> <span class="na">match=</span><span class="s">&quot;page&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;html&gt;</span>
      <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;p&gt;</span>
          Current version of the application is
          <span class="nt">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;version/name&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/html&gt;</span>
  <span class="nt">&lt;/xsl:template&gt;</span>
<span class="nt">&lt;/xsl:stylesheet&gt;</span></code></pre></figure><p>I think it’s obvious how the HTML page will look like after applying this XSL stylesheet to our XML document.</p><p>For me, this XSL looks clean and easy to understand. However, I often hear people say that XSLT is a hard-to-understand programming language. I don’t find it hard to understand at all. Of course, I’m not using all of its features. But, for simple page rendering, all I need to know are a few simple commands and the principle of XML transformation.</p><h2 id="why-not-a-templating-engine">Why Not a Templating Engine?</h2><p>Now, why is this approach better than all that widely use Java templating engines, including <a href="http://en.wikipedia.org/wiki/JavaServer_Pages">JSP</a>, <a href="http://en.wikipedia.org/wiki/JavaServer_Faces">JSF</a>, <a href="http://velocity.apache.org/engine/devel/">Velocity</a>, <a href="http://freemarker.org/">FreeMarker</a>, <a href="http://tiles.apache.org/">Tiles</a>, etc?</p><p>Well, I see a number of reasons. But, the most important are:</p><ol> <li><p><strong>Web UI and API are same pages</strong>. There is no need to develop separate pages for RESTful API—Web user interface, being accessed by a computer, is an API. In my experience, this leads to massive avoidance of code duplication.</p></li> <li><p><strong>XSL is testable by itself without a server</strong>. In order to test how our web site will look with certain data, we just create a new XML document with necessary test data, associate it with an XSL and open it in a browser. We can also modify XML and refresh the page in browser. This makes the work of HTML/CSS designer much easier and independent of programmers.</p></li> <li><p><strong>XSL is a powerful functional language</strong>. Compared with all other templating engines, which look mostly like workarounds, XSL is a complete and well-designed environment. Writing XSL (after you get used to its syntax and programming concepts) is a pleasure in itself. You’re not injecting instructions into a HTML document (like in JSP and all others). Instead, you are programming transformation of data into presentation—a different mindset and much better feeling.</p></li> <li><p><strong>XML output is perfectly testable</strong>. A controller in MVC that generates an XML document with all data required for the XSL stylesheet can easily be tested in a single unit test using simple XPath expressions. Testing of a controller that injects data into a templating engine is a much more complex operation—even impossible sometimes. I’m also writing in PHP and Ruby. They have exactly the same problems—even though their templating engines are much more powerful due to the interpretation nature of the languages.</p></li> </ol><h2 id="is-it-fully-supported">Is It Fully Supported?</h2><p>Everything would be great if all browsers would support XML+XSL rendering. However, this is far from being true. Only the latest versions of modern browsers support XSL. Check <a href="http://greenbytes.de/tech/tc/xslt/">this comparison</a> done by Julian Reschke. Besides that, XSLT 2.0 is <a href="http://stackoverflow.com/questions/6282340/which-browsers-support-xslt-2-0-already">not supported</a> at all.</p><p>There is a workaround, though. We can understand which browser is making a request (via its <a href="http://en.wikipedia.org/wiki/User_agent"><code>User-Agent</code></a> HTTP header) and transform XML into HTML on the server side. Thus, for modern browsers that support XSL, we will deliver XML and for all others—HTML.</p><p>This is exactly how <a href="https://github.com/yegor256/rexsl">ReXSL framework</a> works. Open <a href="http://www.stateful.co">http://www.stateful.co</a> in Internet Explorer and you will see an HTML document, not an XML document as is the case with Chrome.</p><p>BTW, see how all this is implemented: <a href="/2015/06/25/xml-data-xsl-views-takes-framework.html">XML Data and XSL Views in Takes Framework</a>.</p><p>Read this one, it continues the discussion of this subject: <a href="/2014/09/09/restful-web-sites.html">RESTful API and a Web Site in the Same URL</a></p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html&amp;text=XML%2BXSLT+in+a+Browser" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html%3F2014-25&amp;title=XML%2BXSLT+in+a+Browser" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/06/25/xml-and-xslt-in-browser.html%3F2014-25&amp;t=XML%2BXSLT+in+a+Browser" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div ><p><a href="http://en.wikipedia.org/wiki/Separation_of_presentation_and_content">Separating data and their presentation</a> is a great concept. Take HTML and CSS for example. HTML is supposed to have pure data and CSS is supposed to format that data in order to make it readable by a human. Years ago, that was probably the intention of HTML/CSS, but in reality it doesn’t work like that. Mostly because CSS is not powerful enough.</p><p>We still have to format our data using HTML tags, while <a href="/2014/06/26/sass-in-java-webapp.html">CSS</a> can help slightly with positioning and decorating.</p><p>On the other hand, XML with <a href="http://en.wikipedia.org/wiki/XSLT">XSLT</a> implements perfectly the idea of separating data and presentation. XML documents, like HTML, are supposed to contain data only without any information about positioning or formatting. XSL stylesheets position and decorate the data. XSL is a much more powerful language. That’s why it’s possible to avoid any formatting inside XML.</p><p>The latest versions of Chrome, Safari, Firefox and IE all support this mechanism. When a browser retrieves an XML document from a server, and the document has an XSL stylesheet <a href="http://www.w3.org/TR/xml-stylesheet/">associated</a> with it—the browser transforms XML into HTML on-fly.</p><h2 id="working-example">Working Example</h2><p>Let’s review a simple Java web application that works this way. It is using <a href="http://www.takes.org">Takes Framework</a> that makes this mechanism possible. In the next post, I’ll explain how ReXSL works. For now, though, let’s focus on the idea of delivering bare data in XML and formatting it with an XSL stylesheet.</p><p>Open <a href="http://www.stateful.co">http://www.stateful.co</a>—it is a collection of stateful web primitives, explained in the <a href="/2014/05/18/cloud-autoincrement-counters.html">Atomic Counters at Stateful.co</a> article.</p><p>Open it in Chrome or Safari. When you do, you should see a normal web page with a logo, some text, some links, a footer, etc. Now check its sources (I assume you know how to do this).</p><p>This is approximately what you will see (I assume you understand XML, if not, start learning it immediately):</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="cp">&lt;?xml-stylesheet type=&#39;text/xsl&#39; href=&#39;/xsl/index.xsl&#39;?&gt;</span>
<span class="nt">&lt;page</span> <span class="na">date=</span><span class="s">&quot;2014-06-15T15:30:49.521Z&quot;</span> <span class="na">ip=</span><span class="s">&quot;10.168.29.135&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;menu&gt;</span>home<span class="nt">&lt;/menu&gt;</span>
  <span class="nt">&lt;documentation&gt;</span>.. some text here ..<span class="nt">&lt;/documentation&gt;</span>
  <span class="nt">&lt;version&gt;</span>
    <span class="nt">&lt;name&gt;</span>1.4<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;revision&gt;</span>5c7b5af<span class="nt">&lt;/revision&gt;</span>
    <span class="nt">&lt;date&gt;</span>2014-05-29 07:58<span class="nt">&lt;/date&gt;</span>
  <span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;links&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;...&quot;</span> <span class="na">rel=</span><span class="s">&quot;rexsl:google&quot;</span> <span class="na">type=</span><span class="s">&quot;text/xml&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;...&quot;</span> <span class="na">rel=</span><span class="s">&quot;rexsl:github&quot;</span> <span class="na">type=</span><span class="s">&quot;text/xml&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;...&quot;</span> <span class="na">rel=</span><span class="s">&quot;rexsl:facebook&quot;</span> <span class="na">type=</span><span class="s">&quot;text/xml&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/links&gt;</span>
  <span class="nt">&lt;millis&gt;</span>70<span class="nt">&lt;/millis&gt;</span>
<span class="nt">&lt;/page&gt;</span></code></pre></figure><p>As you see, it is a proper XML document with attributes, elements and data. It contains absolutely no information about how its elements have to be presented to an end-user. Actually, this document is more suitable for machine parsing instead of reading by a human.</p><p>The document contains data, which is important for its requester. It’s up to the requester on how to render the data or to not render it at all.</p><p>Its second line <a href="http://www.w3.org/TR/xml-stylesheet/">associates</a> the document with the XSL stylesheet <code>/xsl/index.xsl</code> that is loaded by the browser separately:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="cp">&lt;?xml-stylesheet type=&#39;text/xsl&#39; href=&#39;/xsl/index.xsl&#39;?&gt;</span></code></pre></figure><p>Open developer tools in Chrome and you will see that right after the page is loaded, the browser loads the XSL stylesheet and then all other resources including a few CSS stylesheets, jQuery and an SVG logo:</p><figure class="unprintable"><img src="https://www.yegor256.com/images/2014/06/xslt-loading-order-in-chrome.png" itemprop="image" style="width:600px;max-width:100%;" alt="The figure" /></figure><p><code>index.xsl</code> includes <code>layout.xsl</code>, that’s why it is loaded right after.</p><p>Let’s consider an example of <code>index.xsl</code> (in reality it is much more complex, check <a href="https://github.com/sttc/stateful/blob/master/src/main/webapp/xsl/layout.xsl"><code>layout.xsl</code></a>. For example:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;xsl:stylesheet</span> <span class="na">version=</span><span class="s">&quot;2.0&quot;</span>
  <span class="na">xmlns:xsl=</span><span class="s">&quot;http://www.w3.org/1999/XSL/Transform&quot;</span>
  <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsl:template</span> <span class="na">match=</span><span class="s">&quot;page&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;html&gt;</span>
      <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;p&gt;</span>
          Current version of the application is
          <span class="nt">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;version/name&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/html&gt;</span>
  <span class="nt">&lt;/xsl:template&gt;</span>
<span class="nt">&lt;/xsl:stylesheet&gt;</span></code></pre></figure><p>I think it’s obvious how the HTML page will look like after applying this XSL stylesheet to our XML document.</p><p>For me, this XSL looks clean and easy to understand. However, I often hear people say that XSLT is a hard-to-understand programming language. I don’t find it hard to understand at all. Of course, I’m not using all of its features. But, for simple page rendering, all I need to know are a few simple commands and the principle of XML transformation.</p><h2 id="why-not-a-templating-engine">Why Not a Templating Engine?</h2><p>Now, why is this approach better than all that widely use Java templating engines, including <a href="http://en.wikipedia.org/wiki/JavaServer_Pages">JSP</a>, <a href="http://en.wikipedia.org/wiki/JavaServer_Faces">JSF</a>, <a href="http://velocity.apache.org/engine/devel/">Velocity</a>, <a href="http://freemarker.org/">FreeMarker</a>, <a href="http://tiles.apache.org/">Tiles</a>, etc?</p><p>Well, I see a number of reasons. But, the most important are:</p><ol> <li><p><strong>Web UI and API are same pages</strong>. There is no need to develop separate pages for RESTful API—Web user interface, being accessed by a computer, is an API. In my experience, this leads to massive avoidance of code duplication.</p></li> <li><p><strong>XSL is testable by itself without a server</strong>. In order to test how our web site will look with certain data, we just create a new XML document with necessary test data, associate it with an XSL and open it in a browser. We can also modify XML and refresh the page in browser. This makes the work of HTML/CSS designer much easier and independent of programmers.</p></li> <li><p><strong>XSL is a powerful functional language</strong>. Compared with all other templating engines, which look mostly like workarounds, XSL is a complete and well-designed environment. Writing XSL (after you get used to its syntax and programming concepts) is a pleasure in itself. You’re not injecting instructions into a HTML document (like in JSP and all others). Instead, you are programming transformation of data into presentation—a different mindset and much better feeling.</p></li> <li><p><strong>XML output is perfectly testable</strong>. A controller in MVC that generates an XML document with all data required for the XSL stylesheet can easily be tested in a single unit test using simple XPath expressions. Testing of a controller that injects data into a templating engine is a much more complex operation—even impossible sometimes. I’m also writing in PHP and Ruby. They have exactly the same problems—even though their templating engines are much more powerful due to the interpretation nature of the languages.</p></li> </ol><h2 id="is-it-fully-supported">Is It Fully Supported?</h2><p>Everything would be great if all browsers would support XML+XSL rendering. However, this is far from being true. Only the latest versions of modern browsers support XSL. Check <a href="http://greenbytes.de/tech/tc/xslt/">this comparison</a> done by Julian Reschke. Besides that, XSLT 2.0 is <a href="http://stackoverflow.com/questions/6282340/which-browsers-support-xslt-2-0-already">not supported</a> at all.</p><p>There is a workaround, though. We can understand which browser is making a request (via its <a href="http://en.wikipedia.org/wiki/User_agent"><code>User-Agent</code></a> HTTP header) and transform XML into HTML on the server side. Thus, for modern browsers that support XSL, we will deliver XML and for all others—HTML.</p><p>This is exactly how <a href="https://github.com/yegor256/rexsl">ReXSL framework</a> works. Open <a href="http://www.stateful.co">http://www.stateful.co</a> in Internet Explorer and you will see an HTML document, not an XML document as is the case with Chrome.</p><p>BTW, see how all this is implemented: <a href="/2015/06/25/xml-data-xsl-views-takes-framework.html">XML Data and XSL Views in Takes Framework</a>.</p><p>Read this one, it continues the discussion of this subject: <a href="/2014/09/09/restful-web-sites.html">RESTful API and a Web Site in the Same URL</a></p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?c998b88f617"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html> <!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" content="&lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.xembly.org&quot;&gt;&lt;img src=&quot;http://img.xembly.org/logo-256x256.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;I use XML in almost every one of my projects. And, despite all the fuss about JSON/YAML, I honestly &lt;a href=&quot;/2015/11/16/json-vs-xml.html&quot;&gt;believe&lt;/a&gt; that XML is one of the greatest languages ever invented. Also, I believe that the beauty of XML reveals itself when used in combination with related technologies.&lt;/p&gt; &lt;p&gt;For example, you can expose your data in XML and render it for the end-user using &lt;a href=&quot;http://www.w3.org/Style/XSL/&quot;&gt;XSL stylesheet&lt;/a&gt;.&lt;/p&gt; &lt;!--more--&gt; &lt;p&gt;Another example would be when you validate the same data, before rendering, to ensure that the structure is correct. You can do this with the &lt;a href=&quot;http://www.w3.org/TR/xmlschema11-1/&quot;&gt;XSD&lt;/a&gt; schema. Alternatively, you can pick specific data elements from the entire document by using &lt;a href=&quot;http://www.w3.org/TR/xpath/&quot;&gt;XPath&lt;/a&gt; queries.&lt;/p&gt; &lt;p&gt;Essentially, these three technologies, XSL, XSD schema and XPath, are what makes XML so powerful.&lt;/p&gt; &lt;p&gt;However, there can be times when XML falls short. For instance, imagine you have an existing document that needs to be modified just slightly. For example, let’s use the following:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;accounts&amp;gt;&lt;/span&gt; [...] &lt;span class=&quot;nt&quot;&gt;&amp;lt;acc&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;34&amp;#39;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;Jeffrey&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;balance&amp;gt;&lt;/span&gt;305&lt;span class=&quot;nt&quot;&gt;&amp;lt;/balance&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/acc&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;acc&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;35&amp;#39;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;Walter&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;balance&amp;gt;&lt;/span&gt;50090&lt;span class=&quot;nt&quot;&gt;&amp;lt;/balance&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/acc&amp;gt;&lt;/span&gt; [...] &lt;span class=&quot;nt&quot;&gt;&amp;lt;/accounts&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;The above code represents a list of accounts. Each account has its own &lt;code&gt;id&lt;/code&gt; and several child elements. In our example, we need to find the account belonging to &lt;code&gt;Jeffrey&lt;/code&gt; and increase its balance by &lt;code&gt;500&lt;/code&gt;. How would we do this?&lt;/p&gt; &lt;p&gt;Well, there are a few possible solutions:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;SAX-parse the document, change the balance and save the stream;&lt;/li&gt; &lt;li&gt;DOM-parse it, find the element with XPath, change the value and then print it;&lt;/li&gt; &lt;li&gt;apply a parametrized XSL stylesheet;&lt;/li&gt; &lt;li&gt;apply XQuery small script to make changes&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;All of these methods have their own drawbacks. However, all of them have one particular problem in common—they are very verbose. With each of the above methods, you need at least a page of code to perform this rather simple operation. Furthermore, if the logic of the operation becomes more complex, the amount of needed code grows much faster than you may expect.&lt;/p&gt; &lt;p&gt;Simply put, XML lacks a tool for primitive data manipulations within a document. Perhaps, it is this shortcoming that makes XML unpopular with some.&lt;/p&gt; &lt;p&gt;Anyway, here is a tool I created a few month ago: &lt;a href=&quot;http://www.xembly.org&quot;&gt;Xembly&lt;/a&gt;. It is an imperative language with a few simple directives and resembles &lt;a href=&quot;http://en.wikipedia.org/wiki/Assembly_language&quot;&gt;Assembly&lt;/a&gt; in style. Thus, the name - Xembly. With Xembly, there are no loops, conditions or variables - just a sequence of directives with arguments.&lt;/p&gt; &lt;p&gt;Let’s create a simple example. Say, for instance, we want to add a new account number &lt;code&gt;36&lt;/code&gt; to our list document. The code would look like:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-asm&quot; data-lang=&quot;asm&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;XPATH&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;accounts&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ADD&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;account&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ATTR&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;36&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ADD&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SET&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Donny&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;UP&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ADD&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;balance&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SET&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3400&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;The above should be intuitively clear, but I’ll explain just in case. First, the &lt;code&gt;XPATH&lt;/code&gt; directive points us to the element found by the “/accounts” XPath query. This will be our root element. We assume here that it exists in the document. Therefore, if it is absent, our Xembly script will fail with a runtime exception.&lt;/p&gt; &lt;p&gt;Next, the &lt;code&gt;ADD&lt;/code&gt; directive on line 2 creates a new XML element without any children or attributes. Then, the &lt;code&gt;ATTR&lt;/code&gt; directive sets an attribute for this element. The code then adds the new child element &lt;code&gt;name&lt;/code&gt; and sets its text value to &lt;code&gt;&quot;Donny&quot;&lt;/code&gt; using the &lt;code&gt;SET&lt;/code&gt; directive. Finally, we move our pointer back to &lt;code&gt;account&lt;/code&gt; element using &lt;code&gt;UP&lt;/code&gt;, add the &lt;code&gt;balance&lt;/code&gt; child element and set its value to &lt;code&gt;&quot;3400&quot;&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;Our balance changing task can be expressed in Xembly with the following code:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-asm&quot; data-lang=&quot;asm&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;XPATH&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;accounts&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;account&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;=&amp;quot;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Jeffrey&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;balance&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;XSET&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;The &lt;code&gt;XSET&lt;/code&gt; directive sets the element text value, similar to &lt;code&gt;SET&lt;/code&gt;, but calculates it beforehand using the provided XPath expression &lt;code&gt;. + 500&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;Xembly performs all manipulations through DOM. Consequently, Xembly can be implemented inside any language that has a built-in DOM implementation.&lt;/p&gt; &lt;p&gt;In the meantime, there is only one implementation of Xembly language—in Java. Here is how &lt;a href=&quot;/2015/03/26/jaxb-vs-xembly.html&quot;&gt;it works&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Iterable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Directive&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;directives&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Directives&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;xpath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;/accounts&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;account&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;36&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Donny&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;up&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;balance&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;3400&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Xembler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;directives&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;In this snippet, I’m using a supplementary script builder, &lt;code&gt;Directives&lt;/code&gt;, which enables generation of directives in a &lt;a href=&quot;/2018/03/13/fluent-interfaces.html&quot;&gt;fluent&lt;/a&gt; way. Then, I use &lt;code&gt;Xembler&lt;/code&gt; class, which is similar to “assembler,” to apply all specified directives to the &lt;code&gt;document&lt;/code&gt; object of class &lt;code&gt;org.w3c.dom.Document&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;Additionally, Xembly can be used to build XML documents from scratch and as a replacement for traditional DOM building. A quick example:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Xembler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Directives&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;html&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;head&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;title&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Hello, world!&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;xml&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;The above snippet produces the following output:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;Hello, world!&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;For me, this appears to be more simple and compact.&lt;/p&gt; &lt;p&gt;As usual, your bug reports and suggestions are always welcomed. Please send to &lt;a href=&quot;https://github.com/yegor256/xembly/issues&quot;&gt;GitHub issues&lt;/a&gt; :)&lt;/p&gt; " /> <meta name="keywords" content="next, path, output, content, previous, url, relative_path, id, collection, excerpt, draft, categories, layout, title, date, tags, description, keywords, slug, ext" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <meta name="google-site-verification" content="JEj_gQr2CPe2QKGw8XdMz0R7VboQIUbX3FlM-lwTq-8" /> <meta name="author" content="Yegor Bugayenko"> <meta name="article:published_time" content="2014-04-09 00:00:00 +0000"> <meta name="og:site_name" content="Yegor Bugayenko"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="twitter:account_id" content="4503599630178231" /> <meta name="twitter:creator" content="@yegor256"/> <meta name="twitter:site" content="@yegor256"/> <meta name="twitter:title" property="og:title" content="Xembly, an Assembly for XML"/> <meta name="twitter:description" property="og:description" content="&lt;figure class=&quot;badge&quot;&gt;&lt;a href=&quot;http://www.xembly.org&quot;&gt;&lt;img src=&quot;http://img.xembly.org/logo-256x256.png&quot; style=&quot;width:64px;max-width:100%;&quot; alt=&quot;badge&quot; /&gt;&lt;/a&gt;&lt;/figure&gt; &lt;p&gt;I use XML in almost every one of my projects. And, despite all the fuss about JSON/YAML, I honestly &lt;a href=&quot;/2015/11/16/json-vs-xml.html&quot;&gt;believe&lt;/a&gt; that XML is one of the greatest languages ever invented. Also, I believe that the beauty of XML reveals itself when used in combination with related technologies.&lt;/p&gt; &lt;p&gt;For example, you can expose your data in XML and render it for the end-user using &lt;a href=&quot;http://www.w3.org/Style/XSL/&quot;&gt;XSL stylesheet&lt;/a&gt;.&lt;/p&gt; &lt;!--more--&gt; &lt;p&gt;Another example would be when you validate the same data, before rendering, to ensure that the structure is correct. You can do this with the &lt;a href=&quot;http://www.w3.org/TR/xmlschema11-1/&quot;&gt;XSD&lt;/a&gt; schema. Alternatively, you can pick specific data elements from the entire document by using &lt;a href=&quot;http://www.w3.org/TR/xpath/&quot;&gt;XPath&lt;/a&gt; queries.&lt;/p&gt; &lt;p&gt;Essentially, these three technologies, XSL, XSD schema and XPath, are what makes XML so powerful.&lt;/p&gt; &lt;p&gt;However, there can be times when XML falls short. For instance, imagine you have an existing document that needs to be modified just slightly. For example, let’s use the following:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;accounts&amp;gt;&lt;/span&gt; [...] &lt;span class=&quot;nt&quot;&gt;&amp;lt;acc&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;34&amp;#39;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;Jeffrey&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;balance&amp;gt;&lt;/span&gt;305&lt;span class=&quot;nt&quot;&gt;&amp;lt;/balance&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/acc&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;acc&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;35&amp;#39;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;Walter&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;balance&amp;gt;&lt;/span&gt;50090&lt;span class=&quot;nt&quot;&gt;&amp;lt;/balance&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/acc&amp;gt;&lt;/span&gt; [...] &lt;span class=&quot;nt&quot;&gt;&amp;lt;/accounts&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;The above code represents a list of accounts. Each account has its own &lt;code&gt;id&lt;/code&gt; and several child elements. In our example, we need to find the account belonging to &lt;code&gt;Jeffrey&lt;/code&gt; and increase its balance by &lt;code&gt;500&lt;/code&gt;. How would we do this?&lt;/p&gt; &lt;p&gt;Well, there are a few possible solutions:&lt;/p&gt; &lt;ul&gt; &lt;li&gt;SAX-parse the document, change the balance and save the stream;&lt;/li&gt; &lt;li&gt;DOM-parse it, find the element with XPath, change the value and then print it;&lt;/li&gt; &lt;li&gt;apply a parametrized XSL stylesheet;&lt;/li&gt; &lt;li&gt;apply XQuery small script to make changes&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;All of these methods have their own drawbacks. However, all of them have one particular problem in common—they are very verbose. With each of the above methods, you need at least a page of code to perform this rather simple operation. Furthermore, if the logic of the operation becomes more complex, the amount of needed code grows much faster than you may expect.&lt;/p&gt; &lt;p&gt;Simply put, XML lacks a tool for primitive data manipulations within a document. Perhaps, it is this shortcoming that makes XML unpopular with some.&lt;/p&gt; &lt;p&gt;Anyway, here is a tool I created a few month ago: &lt;a href=&quot;http://www.xembly.org&quot;&gt;Xembly&lt;/a&gt;. It is an imperative language with a few simple directives and resembles &lt;a href=&quot;http://en.wikipedia.org/wiki/Assembly_language&quot;&gt;Assembly&lt;/a&gt; in style. Thus, the name - Xembly. With Xembly, there are no loops, conditions or variables - just a sequence of directives with arguments.&lt;/p&gt; &lt;p&gt;Let’s create a simple example. Say, for instance, we want to add a new account number &lt;code&gt;36&lt;/code&gt; to our list document. The code would look like:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-asm&quot; data-lang=&quot;asm&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;XPATH&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;accounts&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ADD&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;account&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ATTR&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;36&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ADD&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SET&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Donny&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;UP&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ADD&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;balance&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SET&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3400&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;The above should be intuitively clear, but I’ll explain just in case. First, the &lt;code&gt;XPATH&lt;/code&gt; directive points us to the element found by the “/accounts” XPath query. This will be our root element. We assume here that it exists in the document. Therefore, if it is absent, our Xembly script will fail with a runtime exception.&lt;/p&gt; &lt;p&gt;Next, the &lt;code&gt;ADD&lt;/code&gt; directive on line 2 creates a new XML element without any children or attributes. Then, the &lt;code&gt;ATTR&lt;/code&gt; directive sets an attribute for this element. The code then adds the new child element &lt;code&gt;name&lt;/code&gt; and sets its text value to &lt;code&gt;&quot;Donny&quot;&lt;/code&gt; using the &lt;code&gt;SET&lt;/code&gt; directive. Finally, we move our pointer back to &lt;code&gt;account&lt;/code&gt; element using &lt;code&gt;UP&lt;/code&gt;, add the &lt;code&gt;balance&lt;/code&gt; child element and set its value to &lt;code&gt;&quot;3400&quot;&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;Our balance changing task can be expressed in Xembly with the following code:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-asm&quot; data-lang=&quot;asm&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;XPATH&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;accounts&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;account&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;=&amp;quot;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Jeffrey&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;balance&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;XSET&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;The &lt;code&gt;XSET&lt;/code&gt; directive sets the element text value, similar to &lt;code&gt;SET&lt;/code&gt;, but calculates it beforehand using the provided XPath expression &lt;code&gt;. + 500&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;Xembly performs all manipulations through DOM. Consequently, Xembly can be implemented inside any language that has a built-in DOM implementation.&lt;/p&gt; &lt;p&gt;In the meantime, there is only one implementation of Xembly language—in Java. Here is how &lt;a href=&quot;/2015/03/26/jaxb-vs-xembly.html&quot;&gt;it works&lt;/a&gt;:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Iterable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Directive&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;directives&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Directives&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;xpath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;/accounts&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;account&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;36&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Donny&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;up&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;balance&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;3400&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Xembler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;directives&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;In this snippet, I’m using a supplementary script builder, &lt;code&gt;Directives&lt;/code&gt;, which enables generation of directives in a &lt;a href=&quot;/2018/03/13/fluent-interfaces.html&quot;&gt;fluent&lt;/a&gt; way. Then, I use &lt;code&gt;Xembler&lt;/code&gt; class, which is similar to “assembler,” to apply all specified directives to the &lt;code&gt;document&lt;/code&gt; object of class &lt;code&gt;org.w3c.dom.Document&lt;/code&gt;.&lt;/p&gt; &lt;p&gt;Additionally, Xembly can be used to build XML documents from scratch and as a replacement for traditional DOM building. A quick example:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Xembler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Directives&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;html&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;head&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;title&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Hello, world!&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;xml&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;The above snippet produces the following output:&lt;/p&gt; &lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;Hello, world!&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt; &lt;p&gt;For me, this appears to be more simple and compact.&lt;/p&gt; &lt;p&gt;As usual, your bug reports and suggestions are always welcomed. Please send to &lt;a href=&quot;https://github.com/yegor256/xembly/issues&quot;&gt;GitHub issues&lt;/a&gt; :)&lt;/p&gt; "/> <meta name="twitter:url" property="og:url" content="https://www.yegor256.com/2014/04/09/xembly-intro.html"/> <meta name="telegram:channel" content="AAAAAEJFMRzsRTRxM3ec6A"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="yegor256" /> <link rel="shortcut icon" href="/favicon.ico?c998b88f617"/> <link rel="apple-touch-icon" href="/favicon.ico?c998b88f617"/> <link rel="alternate" type="application/rss+xml" title="RSS for yegor256.com" href="https://www.yegor256.com/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?c998b88f617"/> <link rel="stylesheet" href="/css/icons.css?c998b88f617"/> <link rel="canonical" href="https://www.yegor256.com/2014/04/09/xembly-intro.html" /> <link rel="amphtml" href="https://www.yegor256.com/2014/04/09/xembly-intro.amp.html" /> <title>Xembly, an Assembly for XML </title> </head> <body><div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"><div class="face"> <a href="/about-me.html#form" class="sub" title="Click to subscribe to my monthly newsletter"><span>Subscribe</span></a> <a href="/about-me.html" style="position:relative;"> <img src="/images/face-256x256.jpg" class="photo" alt="Yegor Bugayenko"/> </a></div><nav><ul class="menu social notranslate"> <li><a href="https://twitter.com/intent/follow?screen_name=yegor256" rel="nofollow" title="Follow me on Twitter"><i class="icon icon-twitter notranslate" aria-hidden="true"></i></a></li> <li><a href="/rss.xml" rel="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/yegor256" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="http://stackoverflow.com/users/187141/yegor256" rel="nofollow" title="My StackOverflow profile"><i class="icon icon-stackoverflow notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.facebook.com/yegor256" rel="nofollow" title="Follow me on Facebook"><i class="icon icon-facebook notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://instagram.com/yegor256" rel="nofollow" title="Follow me on Instagram"><i class="icon icon-instagram notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/yegor256" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.youtube.com/c/yegor256?sub_confirmation=1" rel="nofollow" title="My Youtube video channel"><i class="icon icon-youtube notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.pinterest.com/yegor256/" rel="nofollow" title="My Pinterest boards"><i class="icon icon-pinterest notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://angel.co/yegor256" rel="nofollow" title="My AngelList profile"><i class="icon icon-angellist notranslate" aria-hidden="true"></i></a></li> <li><a href="https://soundcloud.com/yegor256" rel="nofollow" title="My podcast"><i class="icon icon-podcast notranslate" aria-hidden="true"></i></a></li> <li><a href="https://itunes.apple.com/us/podcast/yegor256-podcast/id1150826721" rel="nofollow" title="My iTunes podcast"><i class="icon icon-itunes notranslate" aria-hidden="true"></i></a></li> <li><a href="https://t.me/yegor256news" rel="nofollow" title="My Telegram public channel"><i class="icon icon-telegram notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:blog@yegor256.com" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li></ul><ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li /2014/04/09/xembly-intro.html><a href="/best.html" title="Best articles to read">12&#160;Best</a></li> <li /2014/04/09/xembly-intro.html><a href="/contents.html" title="The contents of the entire blog">All&#160;292</a></li> <li /2014/04/09/xembly-intro.html><a href="/webinars.html" title="My webinars">Webinars</a></li> <li /2014/04/09/xembly-intro.html><a href="/talks.html" title="Future and past conference talks">Talks</a></li> <li /2014/04/09/xembly-intro.html><a href="/books.html" title="The books I wrote">Books</a></li> <li /2014/04/09/xembly-intro.html><a href="/papers.html" title="My academic papers and patents">Papers</a></li> <li /2014/04/09/xembly-intro.html><a href="/pets.html" title="My loved pet projects">Pets</a></li> <li /2014/04/09/xembly-intro.html class="highlighted"><a href="/trainings.html" title="On-site trainings">Trainings</a></li> <li /2014/04/09/xembly-intro.html><a href="/award.html" title="Software quality award">Award</a></li> <li /2014/04/09/xembly-intro.html><a href="/testimonials.html" title="What some people say about me">Testimonials</a></li> <li /2014/04/09/xembly-intro.html><a href="/shift-m.html" title="Audio podcast about project management">Shift-M</a></li> <li /2014/04/09/xembly-intro.html><a href="/paintings.html" title="My paintings for sale">Paintings</a></li> <li><a href="https://ru.yegor256.com/" title="Немного на русском языке">По-русски</a></li></ul></nav><div class="search"> <form method="get" action="https://www.google.com/search" itemprop="potentialAction" itemscope="" itemtype="http://schema.org/SearchAction"> <meta itemprop="target" content="https://www.google.com/search?q={q}"/> <input name="sitesearch" value="yegor256.com" type="hidden"/> <input itemprop="query-input" type="text" id="search-query" class="field field-text" required="required" onfocus="$('.google').css('visibility', 'visible');" name="q" placeholder="Search..." autocomplete="off"/> <input type="image" src="/images/google-search-icon.svg" class="google" title="Search via Google" alt="Search via Google"/> </form></div><div class="hot"><ul></ul></div></header></div><section itemscope="" itemtype="http://schema.org/BlogPosting"><div class="wrapper"> <header><p class="printable"> <img src="https://api.qrserver.com/v1/create-qr-code/?data=https://www.yegor256.com/2014/04/09/xembly-intro.html&amp;format=svg" style="width:125px;height:125px;" alt="QR code"/></p><p class="printable"> <code itemprop="url">https://www.yegor256.com/2014/04/09/xembly-intro.html</code></p><h1 itemprop="name headline mainEntityOfPage">Xembly, an Assembly for XML</h1><ul class="subline"> <li> <time itemprop="datePublished" datetime="2014-04-09T00:00:00+00:00"> 9 April 2014 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </li> <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.yegor256.com/2014/04/09/xembly-intro.html#disqus_thread" itemprop="discussionUrl">comments</a> </li></ul><p class="unprintable"><figure class="badge"><a href="http://www.xembly.org"><img src="http://img.xembly.org/logo-256x256.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p>I use XML in almost every one of my projects. And, despite all the fuss about JSON/YAML, I honestly <a href="/2015/11/16/json-vs-xml.html">believe</a> that XML is one of the greatest languages ever invented. Also, I believe that the beauty of XML reveals itself when used in combination with related technologies.</p><p>For example, you can expose your data in XML and render it for the end-user using <a href="http://www.w3.org/Style/XSL/">XSL stylesheet</a>.</p><p>Another example would be when you validate the same data, before rendering, to ensure that the structure is correct. You can do this with the <a href="http://www.w3.org/TR/xmlschema11-1/">XSD</a> schema. Alternatively, you can pick specific data elements from the entire document by using <a href="http://www.w3.org/TR/xpath/">XPath</a> queries.</p><p>Essentially, these three technologies, XSL, XSD schema and XPath, are what makes XML so powerful.</p><p>However, there can be times when XML falls short. For instance, imagine you have an existing document that needs to be modified just slightly. For example, let’s use the following:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;accounts&gt;</span>
  [...]
  <span class="nt">&lt;acc</span> <span class="na">id=</span><span class="s">&#39;34&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>Jeffrey<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;balance&gt;</span>305<span class="nt">&lt;/balance&gt;</span>
  <span class="nt">&lt;/acc&gt;</span>
  <span class="nt">&lt;acc</span> <span class="na">id=</span><span class="s">&#39;35&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>Walter<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;balance&gt;</span>50090<span class="nt">&lt;/balance&gt;</span>
  <span class="nt">&lt;/acc&gt;</span>
  [...]
<span class="nt">&lt;/accounts&gt;</span></code></pre></figure><p>The above code represents a list of accounts. Each account has its own <code>id</code> and several child elements. In our example, we need to find the account belonging to <code>Jeffrey</code> and increase its balance by <code>500</code>. How would we do this?</p><p>Well, there are a few possible solutions:</p><ul> <li>SAX-parse the document, change the balance and save the stream;</li> <li>DOM-parse it, find the element with XPath, change the value and then print it;</li> <li>apply a parametrized XSL stylesheet;</li> <li>apply XQuery small script to make changes</li></ul><p>All of these methods have their own drawbacks. However, all of them have one particular problem in common—they are very verbose. With each of the above methods, you need at least a page of code to perform this rather simple operation. Furthermore, if the logic of the operation becomes more complex, the amount of needed code grows much faster than you may expect.</p><p>Simply put, XML lacks a tool for primitive data manipulations within a document. Perhaps, it is this shortcoming that makes XML unpopular with some.</p><p>Anyway, here is a tool I created a few month ago: <a href="http://www.xembly.org">Xembly</a>. It is an imperative language with a few simple directives and resembles <a href="http://en.wikipedia.org/wiki/Assembly_language">Assembly</a> in style. Thus, the name - Xembly. With Xembly, there are no loops, conditions or variables - just a sequence of directives with arguments.</p><p>Let’s create a simple example. Say, for instance, we want to add a new account number <code>36</code> to our list document. The code would look like:</p><figure class="highlight"><pre><code class="language-asm" data-lang="asm"><span></span><span class="nf">XPATH</span> <span class="err">&#39;/</span><span class="no">accounts</span><span class="err">&#39;</span><span class="c">;</span>
<span class="no">ADD</span> <span class="err">&#39;</span><span class="no">account</span><span class="err">&#39;</span><span class="c">;</span>
<span class="no">ATTR</span> <span class="err">&#39;</span><span class="no">id</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="mi">36</span><span class="err">&#39;</span><span class="c">;</span>
<span class="no">ADD</span> <span class="err">&#39;</span><span class="no">name</span><span class="err">&#39;</span><span class="c">;</span>
<span class="no">SET</span> <span class="err">&#39;</span><span class="no">Donny</span><span class="err">&#39;</span><span class="c">;</span>
<span class="no">UP</span><span class="c">;</span>
<span class="no">ADD</span> <span class="err">&#39;</span><span class="no">balance</span><span class="err">&#39;</span><span class="c">;</span>
<span class="no">SET</span> <span class="err">&#39;</span><span class="mi">3400</span><span class="err">&#39;</span><span class="c">;</span></code></pre></figure><p>The above should be intuitively clear, but I’ll explain just in case. First, the <code>XPATH</code> directive points us to the element found by the “/accounts” XPath query. This will be our root element. We assume here that it exists in the document. Therefore, if it is absent, our Xembly script will fail with a runtime exception.</p><p>Next, the <code>ADD</code> directive on line 2 creates a new XML element without any children or attributes. Then, the <code>ATTR</code> directive sets an attribute for this element. The code then adds the new child element <code>name</code> and sets its text value to <code>"Donny"</code> using the <code>SET</code> directive. Finally, we move our pointer back to <code>account</code> element using <code>UP</code>, add the <code>balance</code> child element and set its value to <code>"3400"</code>.</p><p>Our balance changing task can be expressed in Xembly with the following code:</p><figure class="highlight"><pre><code class="language-asm" data-lang="asm"><span></span><span class="nf">XPATH</span> <span class="err">&#39;/</span><span class="no">accounts</span><span class="err">/</span><span class="no">account</span><span class="p">[</span><span class="no">name</span><span class="err">=&quot;</span><span class="no">Jeffrey</span><span class="err">&quot;</span><span class="p">]</span><span class="err">/</span><span class="no">balance</span><span class="err">&#39;</span><span class="c">;</span>
<span class="no">XSET</span> <span class="err">&#39;</span><span class="p">.</span> <span class="err">+</span> <span class="mi">500</span><span class="err">&#39;</span><span class="c">;</span></code></pre></figure><p>The <code>XSET</code> directive sets the element text value, similar to <code>SET</code>, but calculates it beforehand using the provided XPath expression <code>. + 500</code>.</p><p>Xembly performs all manipulations through DOM. Consequently, Xembly can be implemented inside any language that has a built-in DOM implementation.</p><p>In the meantime, there is only one implementation of Xembly language—in Java. Here is how <a href="/2015/03/26/jaxb-vs-xembly.html">it works</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Directive</span><span class="o">&gt;</span> <span class="n">directives</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Directives</span><span class="o">()</span>
  <span class="o">.</span><span class="na">xpath</span><span class="o">(</span><span class="s">&quot;/accounts&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;account&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="na">attr</span><span class="o">(</span><span class="s">&quot;id&quot;</span><span class="o">,</span> <span class="s">&quot;36&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">).</span><span class="na">set</span><span class="o">(</span><span class="s">&quot;Donny&quot;</span><span class="o">).</span><span class="na">up</span><span class="o">()</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;balance&quot;</span><span class="o">).</span><span class="na">set</span><span class="o">(</span><span class="s">&quot;3400&quot;</span><span class="o">);</span>
<span class="k">new</span> <span class="n">Xembler</span><span class="o">(</span><span class="n">directives</span><span class="o">).</span><span class="na">apply</span><span class="o">(</span><span class="n">document</span><span class="o">);</span></code></pre></figure><p>In this snippet, I’m using a supplementary script builder, <code>Directives</code>, which enables generation of directives in a <a href="/2018/03/13/fluent-interfaces.html">fluent</a> way. Then, I use <code>Xembler</code> class, which is similar to “assembler,” to apply all specified directives to the <code>document</code> object of class <code>org.w3c.dom.Document</code>.</p><p>Additionally, Xembly can be used to build XML documents from scratch and as a replacement for traditional DOM building. A quick example:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">Xembler</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">Directives</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;html&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;head&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="s">&quot;Hello, world!&quot;</span><span class="o">)</span>
  <span class="o">).</span><span class="na">xml</span><span class="o">()</span>
<span class="o">);</span></code></pre></figure><p>The above snippet produces the following output:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Hello, world!<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure><p>For me, this appears to be more simple and compact.</p><p>As usual, your bug reports and suggestions are always welcomed. Please send to <a href="https://github.com/yegor256/xembly/issues">GitHub issues</a> :)</p></p><nav class="buttons notranslate desktop-only"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.yegor256.com/2014/04/09/xembly-intro.html" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://twitter.com/share?url=https://www.yegor256.com/2014/04/09/xembly-intro.html&amp;text=Xembly%2C+an+Assembly+for+XML" title="Share on Twitter" class="button" rel="nofollow"> <span class="count count-twitter">0</span> <i class="icon icon-twitter notranslate" aria-hidden="true"></i> </a> <a href="https://plus.google.com/share?url=https://www.yegor256.com/2014/04/09/xembly-intro.html" title="Share on Google+" class="button" rel="nofollow"> <span class="count count-googleplus">0</span> <i class="icon icon-googleplus notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.yegor256.com/2014/04/09/xembly-intro.html" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.yegor256.com/2014/04/09/xembly-intro.html%3F2014-14&amp;title=Xembly%2C+an+Assembly+for+XML" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> <a href="http://news.ycombinator.com/submitlink?u=https://www.yegor256.com/2014/04/09/xembly-intro.html%3F2014-14&amp;t=Xembly%2C+an+Assembly+for+XML" title="Share on Hacker News" class="button" rel="nofollow"> <span class="count count-hackernews">0</span> <i class="icon icon-hackernews notranslate" aria-hidden="true"></i> </a> </nav> </header> <article class="main" itemprop="articleBody"><div > <figure class="badge"><a href="http://www.xembly.org"><img src="http://img.xembly.org/logo-256x256.png" style="width:64px;max-width:100%;" alt="badge" /></a></figure><p>I use XML in almost every one of my projects. And, despite all the fuss about JSON/YAML, I honestly <a href="/2015/11/16/json-vs-xml.html">believe</a> that XML is one of the greatest languages ever invented. Also, I believe that the beauty of XML reveals itself when used in combination with related technologies.</p><p>For example, you can expose your data in XML and render it for the end-user using <a href="http://www.w3.org/Style/XSL/">XSL stylesheet</a>.</p><p>Another example would be when you validate the same data, before rendering, to ensure that the structure is correct. You can do this with the <a href="http://www.w3.org/TR/xmlschema11-1/">XSD</a> schema. Alternatively, you can pick specific data elements from the entire document by using <a href="http://www.w3.org/TR/xpath/">XPath</a> queries.</p><p>Essentially, these three technologies, XSL, XSD schema and XPath, are what makes XML so powerful.</p><p>However, there can be times when XML falls short. For instance, imagine you have an existing document that needs to be modified just slightly. For example, let’s use the following:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;accounts&gt;</span>
  [...]
  <span class="nt">&lt;acc</span> <span class="na">id=</span><span class="s">&#39;34&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>Jeffrey<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;balance&gt;</span>305<span class="nt">&lt;/balance&gt;</span>
  <span class="nt">&lt;/acc&gt;</span>
  <span class="nt">&lt;acc</span> <span class="na">id=</span><span class="s">&#39;35&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;name&gt;</span>Walter<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;balance&gt;</span>50090<span class="nt">&lt;/balance&gt;</span>
  <span class="nt">&lt;/acc&gt;</span>
  [...]
<span class="nt">&lt;/accounts&gt;</span></code></pre></figure><p>The above code represents a list of accounts. Each account has its own <code>id</code> and several child elements. In our example, we need to find the account belonging to <code>Jeffrey</code> and increase its balance by <code>500</code>. How would we do this?</p><p>Well, there are a few possible solutions:</p><ul> <li>SAX-parse the document, change the balance and save the stream;</li> <li>DOM-parse it, find the element with XPath, change the value and then print it;</li> <li>apply a parametrized XSL stylesheet;</li> <li>apply XQuery small script to make changes</li></ul><p>All of these methods have their own drawbacks. However, all of them have one particular problem in common—they are very verbose. With each of the above methods, you need at least a page of code to perform this rather simple operation. Furthermore, if the logic of the operation becomes more complex, the amount of needed code grows much faster than you may expect.</p><p>Simply put, XML lacks a tool for primitive data manipulations within a document. Perhaps, it is this shortcoming that makes XML unpopular with some.</p><p>Anyway, here is a tool I created a few month ago: <a href="http://www.xembly.org">Xembly</a>. It is an imperative language with a few simple directives and resembles <a href="http://en.wikipedia.org/wiki/Assembly_language">Assembly</a> in style. Thus, the name - Xembly. With Xembly, there are no loops, conditions or variables - just a sequence of directives with arguments.</p><p>Let’s create a simple example. Say, for instance, we want to add a new account number <code>36</code> to our list document. The code would look like:</p><figure class="highlight"><pre><code class="language-asm" data-lang="asm"><span></span><span class="nf">XPATH</span> <span class="err">&#39;/</span><span class="no">accounts</span><span class="err">&#39;</span><span class="c">;</span>
<span class="no">ADD</span> <span class="err">&#39;</span><span class="no">account</span><span class="err">&#39;</span><span class="c">;</span>
<span class="no">ATTR</span> <span class="err">&#39;</span><span class="no">id</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="mi">36</span><span class="err">&#39;</span><span class="c">;</span>
<span class="no">ADD</span> <span class="err">&#39;</span><span class="no">name</span><span class="err">&#39;</span><span class="c">;</span>
<span class="no">SET</span> <span class="err">&#39;</span><span class="no">Donny</span><span class="err">&#39;</span><span class="c">;</span>
<span class="no">UP</span><span class="c">;</span>
<span class="no">ADD</span> <span class="err">&#39;</span><span class="no">balance</span><span class="err">&#39;</span><span class="c">;</span>
<span class="no">SET</span> <span class="err">&#39;</span><span class="mi">3400</span><span class="err">&#39;</span><span class="c">;</span></code></pre></figure><p>The above should be intuitively clear, but I’ll explain just in case. First, the <code>XPATH</code> directive points us to the element found by the “/accounts” XPath query. This will be our root element. We assume here that it exists in the document. Therefore, if it is absent, our Xembly script will fail with a runtime exception.</p><p>Next, the <code>ADD</code> directive on line 2 creates a new XML element without any children or attributes. Then, the <code>ATTR</code> directive sets an attribute for this element. The code then adds the new child element <code>name</code> and sets its text value to <code>"Donny"</code> using the <code>SET</code> directive. Finally, we move our pointer back to <code>account</code> element using <code>UP</code>, add the <code>balance</code> child element and set its value to <code>"3400"</code>.</p><p>Our balance changing task can be expressed in Xembly with the following code:</p><figure class="highlight"><pre><code class="language-asm" data-lang="asm"><span></span><span class="nf">XPATH</span> <span class="err">&#39;/</span><span class="no">accounts</span><span class="err">/</span><span class="no">account</span><span class="p">[</span><span class="no">name</span><span class="err">=&quot;</span><span class="no">Jeffrey</span><span class="err">&quot;</span><span class="p">]</span><span class="err">/</span><span class="no">balance</span><span class="err">&#39;</span><span class="c">;</span>
<span class="no">XSET</span> <span class="err">&#39;</span><span class="p">.</span> <span class="err">+</span> <span class="mi">500</span><span class="err">&#39;</span><span class="c">;</span></code></pre></figure><p>The <code>XSET</code> directive sets the element text value, similar to <code>SET</code>, but calculates it beforehand using the provided XPath expression <code>. + 500</code>.</p><p>Xembly performs all manipulations through DOM. Consequently, Xembly can be implemented inside any language that has a built-in DOM implementation.</p><p>In the meantime, there is only one implementation of Xembly language—in Java. Here is how <a href="/2015/03/26/jaxb-vs-xembly.html">it works</a>:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Directive</span><span class="o">&gt;</span> <span class="n">directives</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Directives</span><span class="o">()</span>
  <span class="o">.</span><span class="na">xpath</span><span class="o">(</span><span class="s">&quot;/accounts&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;account&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="na">attr</span><span class="o">(</span><span class="s">&quot;id&quot;</span><span class="o">,</span> <span class="s">&quot;36&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">).</span><span class="na">set</span><span class="o">(</span><span class="s">&quot;Donny&quot;</span><span class="o">).</span><span class="na">up</span><span class="o">()</span>
  <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;balance&quot;</span><span class="o">).</span><span class="na">set</span><span class="o">(</span><span class="s">&quot;3400&quot;</span><span class="o">);</span>
<span class="k">new</span> <span class="n">Xembler</span><span class="o">(</span><span class="n">directives</span><span class="o">).</span><span class="na">apply</span><span class="o">(</span><span class="n">document</span><span class="o">);</span></code></pre></figure><p>In this snippet, I’m using a supplementary script builder, <code>Directives</code>, which enables generation of directives in a <a href="/2018/03/13/fluent-interfaces.html">fluent</a> way. Then, I use <code>Xembler</code> class, which is similar to “assembler,” to apply all specified directives to the <code>document</code> object of class <code>org.w3c.dom.Document</code>.</p><p>Additionally, Xembly can be used to build XML documents from scratch and as a replacement for traditional DOM building. A quick example:</p><figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span>
  <span class="k">new</span> <span class="n">Xembler</span><span class="o">(</span>
    <span class="k">new</span> <span class="n">Directives</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;html&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;head&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="s">&quot;Hello, world!&quot;</span><span class="o">)</span>
  <span class="o">).</span><span class="na">xml</span><span class="o">()</span>
<span class="o">);</span></code></pre></figure><p>The above snippet produces the following output:</p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Hello, world!<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure><p>For me, this appears to be more simple and compact.</p><p>As usual, your bug reports and suggestions are always welcomed. Please send to <a href="https://github.com/yegor256/xembly/issues">GitHub issues</a> :)</p></div></article></div><div class="wrapper"> <related-posts /></div><div class="disqus" role="complementary"><p class="disqus_hint"> Please, use <a href="https://help.disqus.com/commenting/what-html-tags-are-allowed-within-comments">syntax highlighting</a> in your comments, to make them more readable.</p><div id="disqus_thread" class="disqus-thread"> <a>&nbsp;</a></div><script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0].replace('https://', 'http://'); this.page.identifier = this.page.url; }; (function() { var d = document, s = d.createElement('script'); s.src = '//yegor256.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript><div><p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post.</p></div></noscript></div><div class="wrapper"> <footer class="footer"><p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Yegor Bugayenko</span> </span> 2014&ndash;<span itemprop="copyrightYear">2018</span></p></footer></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?c998b88f617"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html> </article></div></section><div class="wrapper unprintable" style="text-align:center;margin-top:2em;"> <a href="http://www.sixnines.io/h/3ba1652f"> <img src="//www.sixnines.io/b/3ba1652f?style=flat" alt="sixnines availability badge"/> </a></div><script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?c998b88f617"></script> <script>var disqus_shortname = 'yegor256';</script> <script id="dsq-count-scr" src="//yegor256.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-1963507-32', 'auto'); ga('send', 'pageview'); </script> <script> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> <script> Cd.write("<img src='//c.hit.ua/hit?i=95870&g=0&x=2"+Cp+Cr+ "&r="+escape(Cd.referrer)+"&u="+escape(window.location.href)+ "' border='0' wi"+"dth='1' he"+"ight='1'/>"); </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Person", "name": "Yegor Bugayenko", "url": "https://www.yegor256.com", "sameAs": [ "https://www.facebook.com/yegor256", "https://instagram.com/yegor256", "https://www.linkedin.com/in/yegor256", "https://twitter.com/yegor256", "https://github.com/yegor256", "https://www.pinterest.com/yegor256/" ] } </script> </body> </html>
